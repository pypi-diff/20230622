# Comparing `tmp/modal_client-0.49.2437-py3-none-any.whl.zip` & `tmp/modal_client-0.49.2455-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,160 +1,162 @@
-Zip file size: 256131 bytes, number of entries: 158
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-18 00:50 client_test/__init__.py
--rw-r--r--  2.0 unx      392 b- defN 23-Jun-18 00:50 client_test/aio_test.py
--rw-r--r--  2.0 unx     5409 b- defN 23-Jun-18 00:50 client_test/async_utils_test.py
--rw-r--r--  2.0 unx     1474 b- defN 23-Jun-18 00:50 client_test/blob_test.py
--rw-r--r--  2.0 unx     3979 b- defN 23-Jun-18 00:50 client_test/cli_imports_test.py
--rw-r--r--  2.0 unx    13833 b- defN 23-Jun-18 00:50 client_test/cli_test.py
--rw-r--r--  2.0 unx     4768 b- defN 23-Jun-18 00:50 client_test/client_test.py
--rw-r--r--  2.0 unx     4422 b- defN 23-Jun-18 00:50 client_test/cls_test.py
--rw-r--r--  2.0 unx     2618 b- defN 23-Jun-18 00:50 client_test/config_test.py
--rw-r--r--  2.0 unx    31890 b- defN 23-Jun-18 00:50 client_test/conftest.py
--rw-r--r--  2.0 unx     4551 b- defN 23-Jun-18 00:50 client_test/container_app_test.py
--rw-r--r--  2.0 unx    24810 b- defN 23-Jun-18 00:50 client_test/container_test.py
--rw-r--r--  2.0 unx     1086 b- defN 23-Jun-18 00:50 client_test/deprecation_test.py
--rw-r--r--  2.0 unx     2182 b- defN 23-Jun-18 00:50 client_test/e2e_test.py
--rw-r--r--  2.0 unx      165 b- defN 23-Jun-18 00:50 client_test/error_test.py
--rw-r--r--  2.0 unx      964 b- defN 23-Jun-18 00:50 client_test/function_serialization_test.py
--rw-r--r--  2.0 unx    16957 b- defN 23-Jun-18 00:50 client_test/function_test.py
--rw-r--r--  2.0 unx     3924 b- defN 23-Jun-18 00:50 client_test/gpu_test.py
--rw-r--r--  2.0 unx     5047 b- defN 23-Jun-18 00:50 client_test/grpc_utils_test.py
--rw-r--r--  2.0 unx      930 b- defN 23-Jun-18 00:50 client_test/helpers.py
--rw-r--r--  2.0 unx    15884 b- defN 23-Jun-18 00:50 client_test/image_test.py
--rw-r--r--  2.0 unx     2356 b- defN 23-Jun-18 00:50 client_test/live_reload_test.py
--rw-r--r--  2.0 unx     2605 b- defN 23-Jun-18 00:50 client_test/lookup_test.py
--rw-r--r--  2.0 unx     5301 b- defN 23-Jun-18 00:50 client_test/mount_test.py
--rw-r--r--  2.0 unx     6239 b- defN 23-Jun-18 00:50 client_test/mounted_files_test.py
--rw-r--r--  2.0 unx     2157 b- defN 23-Jun-18 00:50 client_test/notebook_test.py
--rw-r--r--  2.0 unx     1390 b- defN 23-Jun-18 00:50 client_test/object_test.py
--rw-r--r--  2.0 unx      413 b- defN 23-Jun-18 00:50 client_test/package_utils_test.py
--rw-r--r--  2.0 unx     1648 b- defN 23-Jun-18 00:50 client_test/resolver_test.py
--rw-r--r--  2.0 unx     1807 b- defN 23-Jun-18 00:50 client_test/retries_test.py
--rw-r--r--  2.0 unx      359 b- defN 23-Jun-18 00:50 client_test/schedule_test.py
--rw-r--r--  2.0 unx     1688 b- defN 23-Jun-18 00:50 client_test/secret_test.py
--rw-r--r--  2.0 unx     1082 b- defN 23-Jun-18 00:50 client_test/serialization_test.py
--rw-r--r--  2.0 unx     3872 b- defN 23-Jun-18 00:50 client_test/shared_volume_test.py
--rw-r--r--  2.0 unx     8064 b- defN 23-Jun-18 00:50 client_test/stub_test.py
--rw-r--r--  2.0 unx     2691 b- defN 23-Jun-18 00:50 client_test/utils_test.py
--rw-r--r--  2.0 unx      410 b- defN 23-Jun-18 00:50 client_test/version_test.py
--rw-r--r--  2.0 unx     1160 b- defN 23-Jun-18 00:50 client_test/watcher_test.py
--rw-r--r--  2.0 unx     3637 b- defN 23-Jun-18 00:50 client_test/webhook_test.py
--rw-r--r--  2.0 unx     1042 b- defN 23-Jun-18 00:50 modal/__init__.py
--rw-r--r--  2.0 unx      157 b- defN 23-Jun-18 00:50 modal/__main__.py
--rw-r--r--  2.0 unx     2106 b- defN 23-Jun-18 00:50 modal/_asgi.py
--rw-r--r--  2.0 unx    13413 b- defN 23-Jun-18 00:50 modal/_blob_utils.py
--rw-r--r--  2.0 unx    26319 b- defN 23-Jun-18 00:50 modal/_container_entrypoint.py
--rw-r--r--  2.0 unx    10990 b- defN 23-Jun-18 00:50 modal/_function_utils.py
--rw-r--r--  2.0 unx      450 b- defN 23-Jun-18 00:50 modal/_ipython.py
--rw-r--r--  2.0 unx      929 b- defN 23-Jun-18 00:50 modal/_location.py
--rw-r--r--  2.0 unx      850 b- defN 23-Jun-18 00:50 modal/_object_meta.py
--rw-r--r--  2.0 unx    17552 b- defN 23-Jun-18 00:50 modal/_output.py
--rw-r--r--  2.0 unx     1785 b- defN 23-Jun-18 00:50 modal/_proxy_tunnel.py
--rw-r--r--  2.0 unx     5043 b- defN 23-Jun-18 00:50 modal/_pty.py
--rw-r--r--  2.0 unx     5438 b- defN 23-Jun-18 00:50 modal/_resolver.py
--rw-r--r--  2.0 unx     1863 b- defN 23-Jun-18 00:50 modal/_serialization.py
--rw-r--r--  2.0 unx     7598 b- defN 23-Jun-18 00:50 modal/_traceback.py
--rw-r--r--  2.0 unx     1995 b- defN 23-Jun-18 00:50 modal/_tracing.py
--rw-r--r--  2.0 unx      490 b- defN 23-Jun-18 00:50 modal/_types.py
--rw-r--r--  2.0 unx     3409 b- defN 23-Jun-18 00:50 modal/_watcher.py
--rw-r--r--  2.0 unx      703 b- defN 23-Jun-18 00:50 modal/aio.py
--rw-r--r--  2.0 unx    11385 b- defN 23-Jun-18 00:50 modal/app.py
--rw-r--r--  2.0 unx     6208 b- defN 23-Jun-18 00:51 modal/app.pyi
--rw-r--r--  2.0 unx     2462 b- defN 23-Jun-18 00:50 modal/call_graph.py
--rw-r--r--  2.0 unx     9162 b- defN 23-Jun-18 00:50 modal/client.py
--rw-r--r--  2.0 unx     3429 b- defN 23-Jun-18 00:51 modal/client.pyi
--rw-r--r--  2.0 unx     1737 b- defN 23-Jun-18 00:50 modal/cls.py
--rw-r--r--  2.0 unx     6802 b- defN 23-Jun-18 00:50 modal/config.py
--rw-r--r--  2.0 unx     5570 b- defN 23-Jun-18 00:50 modal/dict.py
--rw-r--r--  2.0 unx     3432 b- defN 23-Jun-18 00:51 modal/dict.pyi
--rw-r--r--  2.0 unx     2750 b- defN 23-Jun-18 00:50 modal/exception.py
--rw-r--r--  2.0 unx    57991 b- defN 23-Jun-18 00:50 modal/functions.py
--rw-r--r--  2.0 unx    17532 b- defN 23-Jun-18 00:51 modal/functions.pyi
--rw-r--r--  2.0 unx     4995 b- defN 23-Jun-18 00:50 modal/gpu.py
--rw-r--r--  2.0 unx    48994 b- defN 23-Jun-18 00:50 modal/image.py
--rw-r--r--  2.0 unx    15198 b- defN 23-Jun-18 00:51 modal/image.pyi
--rw-r--r--  2.0 unx    15356 b- defN 23-Jun-18 00:50 modal/mount.py
--rw-r--r--  2.0 unx     5782 b- defN 23-Jun-18 00:51 modal/mount.pyi
--rw-r--r--  2.0 unx    12299 b- defN 23-Jun-18 00:50 modal/object.py
--rw-r--r--  2.0 unx     7740 b- defN 23-Jun-18 00:51 modal/object.pyi
--rw-r--r--  2.0 unx      623 b- defN 23-Jun-18 00:50 modal/proxy.py
--rw-r--r--  2.0 unx      625 b- defN 23-Jun-18 00:51 modal/proxy.pyi
--rw-r--r--  2.0 unx        0 b- defN 23-Jun-18 00:50 modal/py.typed
--rw-r--r--  2.0 unx     5115 b- defN 23-Jun-18 00:50 modal/queue.py
--rw-r--r--  2.0 unx     2701 b- defN 23-Jun-18 00:51 modal/queue.pyi
--rw-r--r--  2.0 unx      502 b- defN 23-Jun-18 00:50 modal/requirements.txt
--rw-r--r--  2.0 unx     3730 b- defN 23-Jun-18 00:50 modal/retries.py
--rw-r--r--  2.0 unx     8715 b- defN 23-Jun-18 00:50 modal/runner.py
--rw-r--r--  2.0 unx     2619 b- defN 23-Jun-18 00:50 modal/schedule.py
--rw-r--r--  2.0 unx     5159 b- defN 23-Jun-18 00:50 modal/secret.py
--rw-r--r--  2.0 unx      765 b- defN 23-Jun-18 00:51 modal/secret.pyi
--rw-r--r--  2.0 unx     4354 b- defN 23-Jun-18 00:50 modal/serving.py
--rw-r--r--  2.0 unx     8227 b- defN 23-Jun-18 00:50 modal/shared_volume.py
--rw-r--r--  2.0 unx     3394 b- defN 23-Jun-18 00:51 modal/shared_volume.pyi
--rw-r--r--  2.0 unx    30994 b- defN 23-Jun-18 00:50 modal/stub.py
--rw-r--r--  2.0 unx    14449 b- defN 23-Jun-18 00:51 modal/stub.pyi
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-18 00:50 modal/cli/__init__.py
--rw-r--r--  2.0 unx     2915 b- defN 23-Jun-18 00:50 modal/cli/app.py
--rw-r--r--  2.0 unx      484 b- defN 23-Jun-18 00:50 modal/cli/config.py
--rw-r--r--  2.0 unx     1958 b- defN 23-Jun-18 00:50 modal/cli/entry_point.py
--rw-r--r--  2.0 unx      902 b- defN 23-Jun-18 00:50 modal/cli/env.py
--rw-r--r--  2.0 unx    10552 b- defN 23-Jun-18 00:50 modal/cli/import_refs.py
--rw-r--r--  2.0 unx      689 b- defN 23-Jun-18 00:50 modal/cli/profile.py
--rw-r--r--  2.0 unx     9118 b- defN 23-Jun-18 00:50 modal/cli/run.py
--rw-r--r--  2.0 unx     3761 b- defN 23-Jun-18 00:50 modal/cli/secret.py
--rw-r--r--  2.0 unx     3524 b- defN 23-Jun-18 00:50 modal/cli/token.py
--rw-r--r--  2.0 unx      313 b- defN 23-Jun-18 00:50 modal/cli/utils.py
--rw-r--r--  2.0 unx     9697 b- defN 23-Jun-18 00:50 modal/cli/volume.py
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-18 00:50 modal/extensions/__init__.py
--rw-r--r--  2.0 unx      987 b- defN 23-Jun-18 00:50 modal/extensions/ipython.py
--rw-r--r--  2.0 unx     6221 b- defN 23-Jun-18 00:50 modal/extensions/pymc.py
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-18 00:50 modal_base_images/__init__.py
--rw-r--r--  2.0 unx      457 b- defN 23-Jun-18 00:50 modal_base_images/client_mount.py
--rw-r--r--  2.0 unx      252 b- defN 23-Jun-18 00:50 modal_base_images/conda.py
--rw-r--r--  2.0 unx      330 b- defN 23-Jun-18 00:50 modal_base_images/debian_slim.py
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-18 00:50 modal_proto/__init__.py
--rw-r--r--  2.0 unx    27661 b- defN 23-Jun-18 00:50 modal_proto/api.proto
--rw-r--r--  2.0 unx    45296 b- defN 23-Jun-18 00:50 modal_proto/api_grpc.py
--rw-r--r--  2.0 unx   115123 b- defN 23-Jun-18 00:50 modal_proto/api_pb2.py
--rw-r--r--  2.0 unx    97896 b- defN 23-Jun-18 00:50 modal_proto/api_pb2_grpc.py
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-18 00:50 modal_test_support/__init__.py
--rw-r--r--  2.0 unx      134 b- defN 23-Jun-18 00:50 modal_test_support/assert_package.py
--rw-r--r--  2.0 unx      171 b- defN 23-Jun-18 00:50 modal_test_support/consumed_map.py
--rw-r--r--  2.0 unx     3013 b- defN 23-Jun-18 00:50 modal_test_support/functions.py
--rw-r--r--  2.0 unx      183 b- defN 23-Jun-18 00:50 modal_test_support/hello.py
--rw-r--r--  2.0 unx      266 b- defN 23-Jun-18 00:50 modal_test_support/image_run_function.py
--rw-r--r--  2.0 unx      180 b- defN 23-Jun-18 00:50 modal_test_support/is_inside.py
--rw-r--r--  2.0 unx      187 b- defN 23-Jun-18 00:50 modal_test_support/missing_main_conditional.py
--rw-r--r--  2.0 unx       59 b- defN 23-Jun-18 00:50 modal_test_support/module_1.py
--rw-r--r--  2.0 unx       59 b- defN 23-Jun-18 00:50 modal_test_support/module_2.py
--rw-r--r--  2.0 unx      277 b- defN 23-Jun-18 00:50 modal_test_support/multistub.py
--rw-r--r--  2.0 unx      228 b- defN 23-Jun-18 00:50 modal_test_support/multistub_is_inside.py
--rw-r--r--  2.0 unx      222 b- defN 23-Jun-18 00:50 modal_test_support/multistub_is_inside_warning.py
--rw-r--r--  2.0 unx      269 b- defN 23-Jun-18 00:50 modal_test_support/multistub_privately_decorated.py
--rw-r--r--  2.0 unx      211 b- defN 23-Jun-18 00:50 modal_test_support/multistub_privately_decorated_named_stub.py
--rw-r--r--  2.0 unx      218 b- defN 23-Jun-18 00:50 modal_test_support/multistub_same_name.py
--rw-r--r--  2.0 unx      219 b- defN 23-Jun-18 00:50 modal_test_support/multistub_serialized_func.py
--rw-r--r--  2.0 unx      197 b- defN 23-Jun-18 00:50 modal_test_support/package_mount.py
--rw-r--r--  2.0 unx      171 b- defN 23-Jun-18 00:50 modal_test_support/progress_info.py
--rw-r--r--  2.0 unx      153 b- defN 23-Jun-18 00:50 modal_test_support/script.py
--rw-r--r--  2.0 unx      178 b- defN 23-Jun-18 00:50 modal_test_support/startup_failure.py
--rw-r--r--  2.0 unx      177 b- defN 23-Jun-18 00:50 modal_test_support/stub.py
--rw-r--r--  2.0 unx      144 b- defN 23-Jun-18 00:50 modal_test_support/unconsumed_map.py
--rw-r--r--  2.0 unx      123 b- defN 23-Jun-18 00:50 modal_test_support/webhook_forgot_function.py
--rw-r--r--  2.0 unx       28 b- defN 23-Jun-18 00:50 modal_utils/__init__.py
--rw-r--r--  2.0 unx      465 b- defN 23-Jun-18 00:50 modal_utils/app_utils.py
--rw-r--r--  2.0 unx    11060 b- defN 23-Jun-18 00:50 modal_utils/async_utils.py
--rw-r--r--  2.0 unx      890 b- defN 23-Jun-18 00:50 modal_utils/decorator_utils.py
--rw-r--r--  2.0 unx     9837 b- defN 23-Jun-18 00:50 modal_utils/grpc_utils.py
--rw-r--r--  2.0 unx     1597 b- defN 23-Jun-18 00:50 modal_utils/hash_utils.py
--rw-r--r--  2.0 unx     1426 b- defN 23-Jun-18 00:50 modal_utils/http_utils.py
--rw-r--r--  2.0 unx      113 b- defN 23-Jun-18 00:50 modal_utils/logger.py
--rw-r--r--  2.0 unx     1226 b- defN 23-Jun-18 00:50 modal_utils/package_utils.py
--rw-r--r--  2.0 unx      458 b- defN 23-Jun-18 00:50 modal_version/__init__.py
--rw-r--r--  2.0 unx       48 b- defN 23-Jun-18 00:50 modal_version/_version_generated.py
--rw-r--r--  2.0 unx    10173 b- defN 23-Jun-18 00:51 modal_client-0.49.2437.dist-info/LICENSE
--rw-r--r--  2.0 unx     1880 b- defN 23-Jun-18 00:51 modal_client-0.49.2437.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jun-18 00:51 modal_client-0.49.2437.dist-info/WHEEL
--rw-r--r--  2.0 unx       46 b- defN 23-Jun-18 00:51 modal_client-0.49.2437.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       93 b- defN 23-Jun-18 00:51 modal_client-0.49.2437.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx    12851 b- defN 23-Jun-18 00:51 modal_client-0.49.2437.dist-info/RECORD
-158 files, 1022718 bytes uncompressed, 236199 bytes compressed:  76.9%
+Zip file size: 260982 bytes, number of entries: 160
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-22 10:13 client_test/__init__.py
+-rw-r--r--  2.0 unx      392 b- defN 23-Jun-22 10:13 client_test/aio_test.py
+-rw-r--r--  2.0 unx     5409 b- defN 23-Jun-22 10:13 client_test/async_utils_test.py
+-rw-r--r--  2.0 unx     1474 b- defN 23-Jun-22 10:13 client_test/blob_test.py
+-rw-r--r--  2.0 unx     3979 b- defN 23-Jun-22 10:13 client_test/cli_imports_test.py
+-rw-r--r--  2.0 unx    14029 b- defN 23-Jun-22 10:13 client_test/cli_test.py
+-rw-r--r--  2.0 unx     4768 b- defN 23-Jun-22 10:13 client_test/client_test.py
+-rw-r--r--  2.0 unx     4422 b- defN 23-Jun-22 10:13 client_test/cls_test.py
+-rw-r--r--  2.0 unx     2622 b- defN 23-Jun-22 10:13 client_test/config_test.py
+-rw-r--r--  2.0 unx    31926 b- defN 23-Jun-22 10:13 client_test/conftest.py
+-rw-r--r--  2.0 unx     4555 b- defN 23-Jun-22 10:13 client_test/container_app_test.py
+-rw-r--r--  2.0 unx    24810 b- defN 23-Jun-22 10:13 client_test/container_test.py
+-rw-r--r--  2.0 unx     1086 b- defN 23-Jun-22 10:13 client_test/deprecation_test.py
+-rw-r--r--  2.0 unx     2182 b- defN 23-Jun-22 10:13 client_test/e2e_test.py
+-rw-r--r--  2.0 unx      165 b- defN 23-Jun-22 10:13 client_test/error_test.py
+-rw-r--r--  2.0 unx      964 b- defN 23-Jun-22 10:13 client_test/function_serialization_test.py
+-rw-r--r--  2.0 unx    16957 b- defN 23-Jun-22 10:13 client_test/function_test.py
+-rw-r--r--  2.0 unx     3924 b- defN 23-Jun-22 10:13 client_test/gpu_test.py
+-rw-r--r--  2.0 unx     5047 b- defN 23-Jun-22 10:13 client_test/grpc_utils_test.py
+-rw-r--r--  2.0 unx      930 b- defN 23-Jun-22 10:13 client_test/helpers.py
+-rw-r--r--  2.0 unx    15884 b- defN 23-Jun-22 10:13 client_test/image_test.py
+-rw-r--r--  2.0 unx     2356 b- defN 23-Jun-22 10:13 client_test/live_reload_test.py
+-rw-r--r--  2.0 unx     2605 b- defN 23-Jun-22 10:13 client_test/lookup_test.py
+-rw-r--r--  2.0 unx     5317 b- defN 23-Jun-22 10:13 client_test/mount_test.py
+-rw-r--r--  2.0 unx     6239 b- defN 23-Jun-22 10:13 client_test/mounted_files_test.py
+-rw-r--r--  2.0 unx     2157 b- defN 23-Jun-22 10:13 client_test/notebook_test.py
+-rw-r--r--  2.0 unx     1390 b- defN 23-Jun-22 10:13 client_test/object_test.py
+-rw-r--r--  2.0 unx      413 b- defN 23-Jun-22 10:13 client_test/package_utils_test.py
+-rw-r--r--  2.0 unx     1690 b- defN 23-Jun-22 10:13 client_test/resolver_test.py
+-rw-r--r--  2.0 unx     1807 b- defN 23-Jun-22 10:13 client_test/retries_test.py
+-rw-r--r--  2.0 unx     3143 b- defN 23-Jun-22 10:13 client_test/runner_test.py
+-rw-r--r--  2.0 unx      359 b- defN 23-Jun-22 10:13 client_test/schedule_test.py
+-rw-r--r--  2.0 unx     1688 b- defN 23-Jun-22 10:13 client_test/secret_test.py
+-rw-r--r--  2.0 unx     1082 b- defN 23-Jun-22 10:13 client_test/serialization_test.py
+-rw-r--r--  2.0 unx     3872 b- defN 23-Jun-22 10:13 client_test/shared_volume_test.py
+-rw-r--r--  2.0 unx     8064 b- defN 23-Jun-22 10:13 client_test/stub_test.py
+-rw-r--r--  2.0 unx     2691 b- defN 23-Jun-22 10:13 client_test/utils_test.py
+-rw-r--r--  2.0 unx      410 b- defN 23-Jun-22 10:13 client_test/version_test.py
+-rw-r--r--  2.0 unx     1160 b- defN 23-Jun-22 10:13 client_test/watcher_test.py
+-rw-r--r--  2.0 unx     3637 b- defN 23-Jun-22 10:13 client_test/webhook_test.py
+-rw-r--r--  2.0 unx     1042 b- defN 23-Jun-22 10:13 modal/__init__.py
+-rw-r--r--  2.0 unx      157 b- defN 23-Jun-22 10:13 modal/__main__.py
+-rw-r--r--  2.0 unx     2106 b- defN 23-Jun-22 10:13 modal/_asgi.py
+-rw-r--r--  2.0 unx    13413 b- defN 23-Jun-22 10:13 modal/_blob_utils.py
+-rw-r--r--  2.0 unx    26319 b- defN 23-Jun-22 10:13 modal/_container_entrypoint.py
+-rw-r--r--  2.0 unx    10990 b- defN 23-Jun-22 10:13 modal/_function_utils.py
+-rw-r--r--  2.0 unx      450 b- defN 23-Jun-22 10:13 modal/_ipython.py
+-rw-r--r--  2.0 unx      929 b- defN 23-Jun-22 10:13 modal/_location.py
+-rw-r--r--  2.0 unx      850 b- defN 23-Jun-22 10:13 modal/_object_meta.py
+-rw-r--r--  2.0 unx    17552 b- defN 23-Jun-22 10:13 modal/_output.py
+-rw-r--r--  2.0 unx     1785 b- defN 23-Jun-22 10:13 modal/_proxy_tunnel.py
+-rw-r--r--  2.0 unx     5043 b- defN 23-Jun-22 10:13 modal/_pty.py
+-rw-r--r--  2.0 unx     5538 b- defN 23-Jun-22 10:13 modal/_resolver.py
+-rw-r--r--  2.0 unx     1863 b- defN 23-Jun-22 10:13 modal/_serialization.py
+-rw-r--r--  2.0 unx     7598 b- defN 23-Jun-22 10:13 modal/_traceback.py
+-rw-r--r--  2.0 unx     1995 b- defN 23-Jun-22 10:13 modal/_tracing.py
+-rw-r--r--  2.0 unx      490 b- defN 23-Jun-22 10:13 modal/_types.py
+-rw-r--r--  2.0 unx     3409 b- defN 23-Jun-22 10:13 modal/_watcher.py
+-rw-r--r--  2.0 unx      703 b- defN 23-Jun-22 10:13 modal/aio.py
+-rw-r--r--  2.0 unx    11467 b- defN 23-Jun-22 10:13 modal/app.py
+-rw-r--r--  2.0 unx     6300 b- defN 23-Jun-22 10:13 modal/app.pyi
+-rw-r--r--  2.0 unx     2462 b- defN 23-Jun-22 10:13 modal/call_graph.py
+-rw-r--r--  2.0 unx     9162 b- defN 23-Jun-22 10:13 modal/client.py
+-rw-r--r--  2.0 unx     3429 b- defN 23-Jun-22 10:13 modal/client.pyi
+-rw-r--r--  2.0 unx     1737 b- defN 23-Jun-22 10:13 modal/cls.py
+-rw-r--r--  2.0 unx     7149 b- defN 23-Jun-22 10:13 modal/config.py
+-rw-r--r--  2.0 unx     5570 b- defN 23-Jun-22 10:13 modal/dict.py
+-rw-r--r--  2.0 unx     3432 b- defN 23-Jun-22 10:13 modal/dict.pyi
+-rw-r--r--  2.0 unx     2750 b- defN 23-Jun-22 10:13 modal/exception.py
+-rw-r--r--  2.0 unx    57991 b- defN 23-Jun-22 10:13 modal/functions.py
+-rw-r--r--  2.0 unx    17532 b- defN 23-Jun-22 10:13 modal/functions.pyi
+-rw-r--r--  2.0 unx     4995 b- defN 23-Jun-22 10:13 modal/gpu.py
+-rw-r--r--  2.0 unx    48994 b- defN 23-Jun-22 10:13 modal/image.py
+-rw-r--r--  2.0 unx    15198 b- defN 23-Jun-22 10:13 modal/image.pyi
+-rw-r--r--  2.0 unx    15356 b- defN 23-Jun-22 10:13 modal/mount.py
+-rw-r--r--  2.0 unx     5782 b- defN 23-Jun-22 10:13 modal/mount.pyi
+-rw-r--r--  2.0 unx    13424 b- defN 23-Jun-22 10:13 modal/object.py
+-rw-r--r--  2.0 unx     8240 b- defN 23-Jun-22 10:13 modal/object.pyi
+-rw-r--r--  2.0 unx      623 b- defN 23-Jun-22 10:13 modal/proxy.py
+-rw-r--r--  2.0 unx      625 b- defN 23-Jun-22 10:13 modal/proxy.pyi
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-22 10:13 modal/py.typed
+-rw-r--r--  2.0 unx     5115 b- defN 23-Jun-22 10:13 modal/queue.py
+-rw-r--r--  2.0 unx     2701 b- defN 23-Jun-22 10:13 modal/queue.pyi
+-rw-r--r--  2.0 unx      502 b- defN 23-Jun-22 10:13 modal/requirements.txt
+-rw-r--r--  2.0 unx     3730 b- defN 23-Jun-22 10:13 modal/retries.py
+-rw-r--r--  2.0 unx     9137 b- defN 23-Jun-22 10:13 modal/runner.py
+-rw-r--r--  2.0 unx     2619 b- defN 23-Jun-22 10:13 modal/schedule.py
+-rw-r--r--  2.0 unx     5159 b- defN 23-Jun-22 10:13 modal/secret.py
+-rw-r--r--  2.0 unx      765 b- defN 23-Jun-22 10:13 modal/secret.pyi
+-rw-r--r--  2.0 unx     4717 b- defN 23-Jun-22 10:13 modal/serving.py
+-rw-r--r--  2.0 unx     8227 b- defN 23-Jun-22 10:13 modal/shared_volume.py
+-rw-r--r--  2.0 unx     3394 b- defN 23-Jun-22 10:13 modal/shared_volume.pyi
+-rw-r--r--  2.0 unx    30994 b- defN 23-Jun-22 10:13 modal/stub.py
+-rw-r--r--  2.0 unx    14449 b- defN 23-Jun-22 10:13 modal/stub.pyi
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-22 10:13 modal/cli/__init__.py
+-rw-r--r--  2.0 unx     3206 b- defN 23-Jun-22 10:13 modal/cli/app.py
+-rw-r--r--  2.0 unx     1373 b- defN 23-Jun-22 10:13 modal/cli/config.py
+-rw-r--r--  2.0 unx     1882 b- defN 23-Jun-22 10:13 modal/cli/entry_point.py
+-rw-r--r--  2.0 unx     3771 b- defN 23-Jun-22 10:13 modal/cli/environment.py
+-rw-r--r--  2.0 unx    10552 b- defN 23-Jun-22 10:13 modal/cli/import_refs.py
+-rw-r--r--  2.0 unx      700 b- defN 23-Jun-22 10:13 modal/cli/profile.py
+-rw-r--r--  2.0 unx     9883 b- defN 23-Jun-22 10:13 modal/cli/run.py
+-rw-r--r--  2.0 unx     4177 b- defN 23-Jun-22 10:13 modal/cli/secret.py
+-rw-r--r--  2.0 unx     3085 b- defN 23-Jun-22 10:13 modal/cli/token.py
+-rw-r--r--  2.0 unx      313 b- defN 23-Jun-22 10:13 modal/cli/utils.py
+-rw-r--r--  2.0 unx    10534 b- defN 23-Jun-22 10:13 modal/cli/volume.py
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-22 10:13 modal/extensions/__init__.py
+-rw-r--r--  2.0 unx      987 b- defN 23-Jun-22 10:13 modal/extensions/ipython.py
+-rw-r--r--  2.0 unx     6221 b- defN 23-Jun-22 10:13 modal/extensions/pymc.py
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-22 10:13 modal_base_images/__init__.py
+-rw-r--r--  2.0 unx      730 b- defN 23-Jun-22 10:13 modal_base_images/client_mount.py
+-rw-r--r--  2.0 unx      252 b- defN 23-Jun-22 10:13 modal_base_images/conda.py
+-rw-r--r--  2.0 unx      330 b- defN 23-Jun-22 10:13 modal_base_images/debian_slim.py
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-22 10:13 modal_proto/__init__.py
+-rw-r--r--  2.0 unx    27661 b- defN 23-Jun-22 10:13 modal_proto/api.proto
+-rw-r--r--  2.0 unx    45296 b- defN 23-Jun-22 10:13 modal_proto/api_grpc.py
+-rw-r--r--  2.0 unx   115123 b- defN 23-Jun-22 10:13 modal_proto/api_pb2.py
+-rw-r--r--  2.0 unx    97896 b- defN 23-Jun-22 10:13 modal_proto/api_pb2_grpc.py
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-22 10:13 modal_test_support/__init__.py
+-rw-r--r--  2.0 unx      134 b- defN 23-Jun-22 10:13 modal_test_support/assert_package.py
+-rw-r--r--  2.0 unx      171 b- defN 23-Jun-22 10:13 modal_test_support/consumed_map.py
+-rw-r--r--  2.0 unx     3013 b- defN 23-Jun-22 10:13 modal_test_support/functions.py
+-rw-r--r--  2.0 unx      183 b- defN 23-Jun-22 10:13 modal_test_support/hello.py
+-rw-r--r--  2.0 unx      266 b- defN 23-Jun-22 10:13 modal_test_support/image_run_function.py
+-rw-r--r--  2.0 unx      180 b- defN 23-Jun-22 10:13 modal_test_support/is_inside.py
+-rw-r--r--  2.0 unx      187 b- defN 23-Jun-22 10:13 modal_test_support/missing_main_conditional.py
+-rw-r--r--  2.0 unx       59 b- defN 23-Jun-22 10:13 modal_test_support/module_1.py
+-rw-r--r--  2.0 unx       59 b- defN 23-Jun-22 10:13 modal_test_support/module_2.py
+-rw-r--r--  2.0 unx      277 b- defN 23-Jun-22 10:13 modal_test_support/multistub.py
+-rw-r--r--  2.0 unx      228 b- defN 23-Jun-22 10:13 modal_test_support/multistub_is_inside.py
+-rw-r--r--  2.0 unx      222 b- defN 23-Jun-22 10:13 modal_test_support/multistub_is_inside_warning.py
+-rw-r--r--  2.0 unx      269 b- defN 23-Jun-22 10:13 modal_test_support/multistub_privately_decorated.py
+-rw-r--r--  2.0 unx      211 b- defN 23-Jun-22 10:13 modal_test_support/multistub_privately_decorated_named_stub.py
+-rw-r--r--  2.0 unx      218 b- defN 23-Jun-22 10:13 modal_test_support/multistub_same_name.py
+-rw-r--r--  2.0 unx      219 b- defN 23-Jun-22 10:13 modal_test_support/multistub_serialized_func.py
+-rw-r--r--  2.0 unx      197 b- defN 23-Jun-22 10:13 modal_test_support/package_mount.py
+-rw-r--r--  2.0 unx      171 b- defN 23-Jun-22 10:13 modal_test_support/progress_info.py
+-rw-r--r--  2.0 unx      153 b- defN 23-Jun-22 10:13 modal_test_support/script.py
+-rw-r--r--  2.0 unx      178 b- defN 23-Jun-22 10:13 modal_test_support/startup_failure.py
+-rw-r--r--  2.0 unx      177 b- defN 23-Jun-22 10:13 modal_test_support/stub.py
+-rw-r--r--  2.0 unx      144 b- defN 23-Jun-22 10:13 modal_test_support/unconsumed_map.py
+-rw-r--r--  2.0 unx      123 b- defN 23-Jun-22 10:13 modal_test_support/webhook_forgot_function.py
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-22 10:13 modal_utils/__init__.py
+-rw-r--r--  2.0 unx      465 b- defN 23-Jun-22 10:13 modal_utils/app_utils.py
+-rw-r--r--  2.0 unx    11060 b- defN 23-Jun-22 10:13 modal_utils/async_utils.py
+-rw-r--r--  2.0 unx      890 b- defN 23-Jun-22 10:13 modal_utils/decorator_utils.py
+-rw-r--r--  2.0 unx     4641 b- defN 23-Jun-22 10:13 modal_utils/grpc_testing.py
+-rw-r--r--  2.0 unx     9320 b- defN 23-Jun-22 10:13 modal_utils/grpc_utils.py
+-rw-r--r--  2.0 unx     1597 b- defN 23-Jun-22 10:13 modal_utils/hash_utils.py
+-rw-r--r--  2.0 unx     1426 b- defN 23-Jun-22 10:13 modal_utils/http_utils.py
+-rw-r--r--  2.0 unx      113 b- defN 23-Jun-22 10:13 modal_utils/logger.py
+-rw-r--r--  2.0 unx     1226 b- defN 23-Jun-22 10:13 modal_utils/package_utils.py
+-rw-r--r--  2.0 unx      458 b- defN 23-Jun-22 10:13 modal_version/__init__.py
+-rw-r--r--  2.0 unx       48 b- defN 23-Jun-22 10:13 modal_version/_version_generated.py
+-rw-r--r--  2.0 unx    10173 b- defN 23-Jun-22 10:13 modal_client-0.49.2455.dist-info/LICENSE
+-rw-r--r--  2.0 unx     1923 b- defN 23-Jun-22 10:13 modal_client-0.49.2455.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-22 10:13 modal_client-0.49.2455.dist-info/WHEEL
+-rw-r--r--  2.0 unx       46 b- defN 23-Jun-22 10:13 modal_client-0.49.2455.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       93 b- defN 23-Jun-22 10:13 modal_client-0.49.2455.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx    13029 b- defN 23-Jun-22 10:13 modal_client-0.49.2455.dist-info/RECORD
+160 files, 1039371 bytes uncompressed, 240776 bytes compressed:  76.8%
```

## zipnote {}

```diff
@@ -84,14 +84,17 @@
 
 Filename: client_test/resolver_test.py
 Comment: 
 
 Filename: client_test/retries_test.py
 Comment: 
 
+Filename: client_test/runner_test.py
+Comment: 
+
 Filename: client_test/schedule_test.py
 Comment: 
 
 Filename: client_test/secret_test.py
 Comment: 
 
 Filename: client_test/serialization_test.py
@@ -285,15 +288,15 @@
 
 Filename: modal/cli/config.py
 Comment: 
 
 Filename: modal/cli/entry_point.py
 Comment: 
 
-Filename: modal/cli/env.py
+Filename: modal/cli/environment.py
 Comment: 
 
 Filename: modal/cli/import_refs.py
 Comment: 
 
 Filename: modal/cli/profile.py
 Comment: 
@@ -429,14 +432,17 @@
 
 Filename: modal_utils/async_utils.py
 Comment: 
 
 Filename: modal_utils/decorator_utils.py
 Comment: 
 
+Filename: modal_utils/grpc_testing.py
+Comment: 
+
 Filename: modal_utils/grpc_utils.py
 Comment: 
 
 Filename: modal_utils/hash_utils.py
 Comment: 
 
 Filename: modal_utils/http_utils.py
@@ -450,26 +456,26 @@
 
 Filename: modal_version/__init__.py
 Comment: 
 
 Filename: modal_version/_version_generated.py
 Comment: 
 
-Filename: modal_client-0.49.2437.dist-info/LICENSE
+Filename: modal_client-0.49.2455.dist-info/LICENSE
 Comment: 
 
-Filename: modal_client-0.49.2437.dist-info/METADATA
+Filename: modal_client-0.49.2455.dist-info/METADATA
 Comment: 
 
-Filename: modal_client-0.49.2437.dist-info/WHEEL
+Filename: modal_client-0.49.2455.dist-info/WHEEL
 Comment: 
 
-Filename: modal_client-0.49.2437.dist-info/entry_points.txt
+Filename: modal_client-0.49.2455.dist-info/entry_points.txt
 Comment: 
 
-Filename: modal_client-0.49.2437.dist-info/top_level.txt
+Filename: modal_client-0.49.2455.dist-info/top_level.txt
 Comment: 
 
-Filename: modal_client-0.49.2437.dist-info/RECORD
+Filename: modal_client-0.49.2455.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## client_test/cli_test.py

```diff
@@ -103,15 +103,15 @@
     assert "dummy-secret-0" in res.stdout
     assert "dummy-secret-1" in res.stdout
     assert "dummy-secret-2" not in res.stdout
 
 
 def test_app_token_new(servicer, set_env_client, server_url_env):
     with unittest.mock.patch("webbrowser.open_new_tab", lambda url: False):
-        _run(["token", "new", "--env", "_test"])
+        _run(["token", "new", "--profile", "_test"])
 
 
 def test_run(servicer, set_env_client, test_dir):
     stub_file = test_dir / "supports" / "app_run_tests" / "default_stub.py"
     _run(["run", stub_file.as_posix()])
     _run(["run", stub_file.as_posix() + "::stub"])
     _run(["run", stub_file.as_posix() + "::stub.foo"])
@@ -355,7 +355,12 @@
             f.write("foo bar baz")
             f.flush()
         _run(["volume", "put", volume_name, upload_path, "test.txt"])
 
         _run(["volume", "get", volume_name, "test.txt", tmpdir])
         with open(os.path.join(tmpdir, "test.txt"), "r") as f:
             assert f.read() == "foo bar baz"
+
+
+def test_environment_flag(set_env_client, test_dir, servicer):
+    stub_file = test_dir / "supports" / "app_run_tests" / "default_stub.py"
+    _run(["run", "--env=staging", str(stub_file)])
```

## client_test/config_test.py

```diff
@@ -54,15 +54,15 @@
     config = _get_config(env=env)
     assert config["token_id"] is None
 
     # Set creds to abc / xyz
     _cli(["token", "set", "--token-id", "abc", "--token-secret", "xyz"], env=env)
 
     # Set creds to foo / bar1 for the prof_1 profile
-    _cli(["token", "set", "--token-id", "foo", "--token-secret", "bar1", "--env", "prof_1"], env=env)
+    _cli(["token", "set", "--token-id", "foo", "--token-secret", "bar1", "--profile", "prof_1"], env=env)
 
     # Set creds to foo / bar2 for the prof_2 profile (given as an env var)
     _cli(["token", "set", "--token-id", "foo", "--token-secret", "bar2"], env={"MODAL_PROFILE": "prof_2", **env})
 
     # Now these should be stored in the user's home directory
     config = _get_config(env=env)
     assert config["token_id"] == "abc"
```

## client_test/conftest.py

```diff
@@ -27,15 +27,16 @@
 from modal import __version__
 from modal.app import _App
 from modal.client import Client
 from modal.image import _dockerhub_python_version
 from modal.mount import client_mount_name
 from modal_proto import api_grpc, api_pb2
 from modal_utils.async_utils import synchronize_api
-from modal_utils.grpc_utils import find_free_port, patch_mock_servicer
+from modal_utils.grpc_utils import find_free_port
+from modal_utils.grpc_testing import patch_mock_servicer
 from modal_utils.http_utils import run_temporary_http_server
 
 
 def function_definition_to_handle_metadata(definition: Optional[api_pb2.Function]) -> api_pb2.FunctionHandleMetadata:
     if definition is None:
         return None
     return api_pb2.FunctionHandleMetadata(
```

## client_test/container_app_test.py

```diff
@@ -107,15 +107,15 @@
 
     assert not stub.is_inside()
 
     from modal.stub import _default_image
 
     app = await App._init_new.aio(client)
     app_id = app.app_id
-    default_image_handle = await app.create_one_object.aio(_default_image)
+    default_image_handle = await app.create_one_object.aio(_default_image, "")
     default_image_id = default_image_handle.object_id
 
     # Copy the app objects to the container servicer
     unix_servicer.app_objects[app_id] = servicer.app_objects[app_id]
 
     await App.init_container.aio(container_client, app_id)
```

## client_test/mount_test.py

```diff
@@ -34,15 +34,15 @@
     assert files["/small.py"].sha256_hex == hashlib.sha256(small_content).hexdigest()
 
     assert files["/large.py"].use_blob is True
     assert files["/large.py"].content is None
     assert files["/large.py"].sha256_hex == hashlib.sha256(large_content).hexdigest()
 
     app = await App._init_new.aio(client)
-    await app.create_one_object.aio(m)
+    await app.create_one_object.aio(m, "")
     blob_id = max(servicer.blobs.keys())  # last uploaded one
     assert len(servicer.blobs[blob_id]) == len(large_content)
     assert servicer.blobs[blob_id] == large_content
 
     assert servicer.files_sha2data[files["/large.py"].sha256_hex] == {"data": b"", "data_blob_id": blob_id}
     assert servicer.files_sha2data[files["/small.py"].sha256_hex] == {
         "data": small_content,
@@ -55,35 +55,35 @@
 
     def condition(fn):
         return fn.endswith(".py")
 
     m = Mount.from_local_dir(local_dir, remote_path="/foo", condition=condition)
 
     app = App._init_new(client)
-    obj = app.create_one_object(m)
+    obj = app.create_one_object(m, "")
 
     assert obj.object_id == "mo-123"
     assert f"/foo/{cur_filename}" in servicer.files_name2sha
     sha256_hex = servicer.files_name2sha[f"/foo/{cur_filename}"]
     assert sha256_hex in servicer.files_sha2data
     assert servicer.files_sha2data[sha256_hex]["data"] == open(__file__, "rb").read()
     assert repr(Path(local_dir)) in repr(m)
 
 
 def test_create_mount_file_errors(servicer, tmpdir, client):
     app = App._init_new(client)
     m = Mount.from_local_dir(Path(tmpdir) / "xyz", remote_path="/xyz")
     with pytest.raises(FileNotFoundError):
-        app.create_one_object(m)
+        app.create_one_object(m, "")
 
     with open(tmpdir / "abc", "w"):
         pass
     m = Mount.from_local_dir(Path(tmpdir) / "abc", remote_path="/abc")
     with pytest.raises(NotADirectoryError):
-        app.create_one_object(m)
+        app.create_one_object(m, "")
 
 
 def dummy():
     pass
 
 
 def test_create_package_mounts(servicer, client, test_dir):
```

## client_test/resolver_test.py

```diff
@@ -9,15 +9,15 @@
 from modal._resolver import Resolver
 from modal.object import _Provider
 
 
 @pytest.mark.asyncio
 async def test_multi_resolve_sequential_loads_once():
     output_manager = OutputManager(None, show_progress=False)
-    resolver = Resolver(output_manager, client=None, app_id=None)
+    resolver = Resolver(output_manager, client=None, environment_name="", app_id=None)
 
     load_count = 0
 
     class DumbObject(_Provider):
         def __init__(self):
             async def _load(resolver: Resolver, existing_object_id: Optional[str]):
                 nonlocal load_count
@@ -35,15 +35,15 @@
 
     assert load_count == 1
 
 
 @pytest.mark.asyncio
 async def test_multi_resolve_concurrent_loads_once():
     output_manager = OutputManager(None, show_progress=False)
-    resolver = Resolver(output_manager, client=None, app_id=None)
+    resolver = Resolver(output_manager, client=None, environment_name="", app_id=None)
 
     load_count = 0
 
     class DumbObject(_Provider):
         def __init__(self):
             async def _load(resolver: Resolver, existing_object_id: Optional[str]):
                 nonlocal load_count
```

## modal/_resolver.py

```diff
@@ -43,26 +43,28 @@
 
 
 class Resolver:
     # Unfortunately we can't use type annotations much in this file,
     # since that leads to circular dependencies
     _tree: Tree
     _local_uuid_to_future: Dict[str, Future]
+    _environment_name: str
 
-    def __init__(self, output_mgr, client, app_id: Optional[str] = None):
+    def __init__(self, output_mgr, client, environment_name: str, app_id: Optional[str] = None):
         from ._output import step_progress
         from rich.tree import Tree
 
         self._output_mgr = output_mgr
         self._local_uuid_to_future = {}
         self._tree = Tree(step_progress("Creating objects..."), guide_style="gray50")
 
         # Accessible by objects
         self._client = client
         self._app_id = app_id
+        self._environment_name = environment_name
 
     @property
     def app_id(self) -> str:
         if self._app_id is None:
             raise ExecutionError("Resolver has no app")
         return self._app_id
```

## modal/app.py

```diff
@@ -71,18 +71,18 @@
 
     @property
     def app_id(self) -> str:
         """A unique identifier for this running App."""
         return self._app_id
 
     async def _create_all_objects(
-        self, blueprint: Dict[str, _Provider], output_mgr, new_app_state: int
+        self, blueprint: Dict[str, _Provider], output_mgr, new_app_state: int, environment_name: str
     ):  # api_pb2.AppState.V
         """Create objects that have been defined but not created on the server."""
-        resolver = Resolver(output_mgr, self._client, self.app_id)
+        resolver = Resolver(output_mgr, self._client, environment_name, self.app_id)
         with resolver.display():
             # Preload all functions to make sure they have ids assigned before they are loaded.
             # This is important to make sure any enclosed function handle references in serialized
             # functions have ids assigned to them when the function is serialized.
             # Note: when handles/providers are merged, all objects will need to get ids pre-assigned
             # like this in order to be referrable within serialized functions
             for tag, provider in blueprint.items():
@@ -210,17 +210,17 @@
 
         # Grab the app
         if existing_app_id is not None:
             return await _App._init_existing(client, existing_app_id)
         else:
             return await _App._init_new(client, name, detach=False, deploying=True, environment_name=environment_name)
 
-    async def create_one_object(self, provider: _Provider) -> _Handle:
+    async def create_one_object(self, provider: _Provider, environment_name: str) -> _Handle:
         existing_object_id: Optional[str] = self._tag_to_existing_id.get("_object")
-        resolver = Resolver(None, self._client, self.app_id)
+        resolver = Resolver(None, self._client, environment_name, self.app_id)
         handle = await resolver.load(provider, existing_object_id)
         indexed_object_ids = {"_object": handle.object_id}
         unindexed_object_ids = [obj.object_id for obj in resolver.objects() if obj is not handle]
         req_set = api_pb2.AppSetObjectsRequest(
             app_id=self.app_id,
             indexed_object_ids=indexed_object_ids,
             unindexed_object_ids=unindexed_object_ids,
```

## modal/app.pyi

```diff
@@ -22,15 +22,15 @@
     def client(self) -> modal.client._Client:
         ...
 
     @property
     def app_id(self) -> str:
         ...
 
-    async def _create_all_objects(self, blueprint: typing.Dict[str, modal.object._Provider], output_mgr, new_app_state: int):
+    async def _create_all_objects(self, blueprint: typing.Dict[str, modal.object._Provider], output_mgr, new_app_state: int, environment_name: str):
         ...
 
     async def disconnect(self):
         ...
 
     async def stop(self):
         ...
@@ -66,15 +66,15 @@
     async def _init_new(client: modal.client._Client, description: typing.Union[str, None] = None, detach: bool = False, deploying: bool = False, environment_name: str = '') -> _App:
         ...
 
     @staticmethod
     async def _init_from_name(client: modal.client._Client, name: str, namespace, environment_name: str = ''):
         ...
 
-    async def create_one_object(self, provider: modal.object._Provider) -> modal.object._Handle:
+    async def create_one_object(self, provider: modal.object._Provider, environment_name: str) -> modal.object._Handle:
         ...
 
     async def deploy(self, name: str, namespace, object_entity: str) -> str:
         ...
 
     @staticmethod
     def _reset_container():
@@ -98,15 +98,15 @@
         ...
 
     @property
     def app_id(self) -> str:
         ...
 
     class ___create_all_objects_spec(typing_extensions.Protocol):
-        def __call__(self, blueprint: typing.Dict[str, modal.object.Provider], output_mgr, new_app_state: int):
+        def __call__(self, blueprint: typing.Dict[str, modal.object.Provider], output_mgr, new_app_state: int, environment_name: str):
             ...
 
         async def aio(self, *args, **kwargs):
             ...
 
     _create_all_objects: ___create_all_objects_spec
 
@@ -186,15 +186,15 @@
 
         async def aio(self, *args, **kwargs):
             ...
 
     _init_from_name: ___init_from_name_spec
 
     class __create_one_object_spec(typing_extensions.Protocol):
-        def __call__(self, provider: modal.object.Provider) -> modal.object.Handle:
+        def __call__(self, provider: modal.object.Provider, environment_name: str) -> modal.object.Handle:
             ...
 
         async def aio(self, *args, **kwargs) -> modal.object.Handle:
             ...
 
     create_one_object: __create_one_object_spec
```

## modal/client.pyi

```diff
@@ -11,15 +11,15 @@
 
 
 async def _grpc_exc_string(exc: grpclib.exceptions.GRPCError, method_name: str, server_url: str, timeout: float) -> str:
     ...
 
 
 class _Client:
-    def __init__(self, server_url, client_type, credentials, version='0.49.2437', *, no_verify=False):
+    def __init__(self, server_url, client_type, credentials, version='0.49.2455', *, no_verify=False):
         ...
 
     @property
     def stub(self):
         ...
 
     async def _open(self):
@@ -60,15 +60,15 @@
 
     @classmethod
     def set_env_client(cls, client):
         ...
 
 
 class Client:
-    def __init__(self, server_url, client_type, credentials, version='0.49.2437', *, no_verify=False):
+    def __init__(self, server_url, client_type, credentials, version='0.49.2455', *, no_verify=False):
         ...
 
     @property
     def stub(self):
         ...
 
     class ___open_spec(typing_extensions.Protocol):
```

## modal/config.py

```diff
@@ -151,14 +151,15 @@
     "image_python_version": _Setting(),
     "image_id": _Setting(),
     "automount": _Setting(True, transform=lambda x: x not in ("", "0")),
     "tracing_enabled": _Setting(False, transform=lambda x: x not in ("", "0")),
     "profiling_enabled": _Setting(False, transform=lambda x: x not in ("", "0")),
     "heartbeat_interval": _Setting(15, float),
     "function_runtime": _Setting(),
+    "environment": _Setting(),
 }
 
 
 class Config:
     """Singleton that holds configuration used by Modal internally."""
 
     def __init__(self):
@@ -179,19 +180,28 @@
         if env_var_key in os.environ:
             return s.transform(os.environ[env_var_key])
         elif profile in _user_config and key in _user_config[profile]:
             return s.transform(_user_config[profile][key])
         else:
             return s.default
 
+    def override_locally(self, key: str, value: str):
+        # Override setting in this process by overriding environment variable for the setting
+        #
+        # Does NOT write back to settings file etc.
+        os.environ["MODAL_" + key.upper()] = value
+
     def __getitem__(self, key):
         return self.get(key)
 
     def __repr__(self):
-        return repr({key: self.get(key) for key in _SETTINGS.keys()})
+        return repr(self.to_dict())
+
+    def to_dict(self):
+        return {key: self.get(key) for key in _SETTINGS.keys()}
 
 
 config = Config()
 
 # Logging
 
 logger = logging.getLogger("modal-client")
```

## modal/object.py

```diff
@@ -9,14 +9,15 @@
 from modal_proto import api_pb2
 from modal_utils.async_utils import synchronize_api
 from modal_utils.grpc_utils import retry_transient_errors, get_proto_oneof
 
 from ._object_meta import ObjectMeta
 from ._resolver import Resolver
 from .client import _Client
+from .config import config
 from .exception import InvalidError, NotFoundError
 
 H = TypeVar("H", bound="_Handle")
 
 _BLOCKING_H = synchronize_api(H)
 
 
@@ -113,23 +114,28 @@
     @classmethod
     async def from_app(
         cls: Type[H],
         app_name: str,
         tag: Optional[str] = None,
         namespace=api_pb2.DEPLOYMENT_NAMESPACE_WORKSPACE,
         client: Optional[_Client] = None,
+        environment_name: Optional[str] = None,
     ) -> H:
         """Returns a handle to a tagged object in a deployment on Modal."""
+        if environment_name is None:
+            environment_name = config.get("environment")
+
         if client is None:
             client = await _Client.from_env()
         request = api_pb2.AppLookupObjectRequest(
             app_name=app_name,
             object_tag=tag,
             namespace=namespace,
             object_entity=cls._type_prefix,
+            environment_name=environment_name,
         )
         try:
             response = await retry_transient_errors(client.stub.AppLookupObject, request)
             if not response.object_id:
                 # Legacy error message: remove soon
                 raise NotFoundError(response.error_message)
         except GRPCError as exc:
@@ -208,33 +214,39 @@
         return self._local_uuid
 
     async def _deploy(
         self,
         label: str,
         namespace=api_pb2.DEPLOYMENT_NAMESPACE_WORKSPACE,
         client: Optional[_Client] = None,
+        environment_name: Optional[str] = None,
     ) -> H:
         """
         Note 1: this uses the single-object app method, which we're planning to get rid of later
         Note 2: still considering this an "internal" method, but we'll make it "official" later
         """
         from .app import _App
 
+        if environment_name is None:
+            environment_name = config.get("environment")
+
         if client is None:
             client = await _Client.from_env()
 
         handle_cls = self._get_handle_cls()
         object_entity = handle_cls._type_prefix
-        app = await _App._init_from_name(client, label, namespace)
-        handle = await app.create_one_object(self)
+        app = await _App._init_from_name(client, label, namespace, environment_name=environment_name)
+        handle = await app.create_one_object(self, environment_name)
         await app.deploy(label, namespace, object_entity)  # TODO(erikbern): not needed if the app already existed
         return handle
 
     @typechecked
-    def persist(self, label: str, namespace=api_pb2.DEPLOYMENT_NAMESPACE_WORKSPACE):
+    def persist(
+        self, label: str, namespace=api_pb2.DEPLOYMENT_NAMESPACE_WORKSPACE, environment_name: Optional[str] = None
+    ):
         """Deploy a Modal app containing this object. This object can then be imported from other apps using
         the returned reference, or by calling `modal.SharedVolume.from_name(label)` (or the equivalent method
         on respective class).
 
         **Example Usage**
 
         ```python
@@ -247,28 +259,31 @@
         # Volume refers to the same object, even across instances of `stub`.
         @stub.function(shared_volumes={"/vol": volume})
         def f():
             pass
         ```
 
         """
+        if environment_name is None:
+            environment_name = config.get("environment")
 
         async def _load_persisted(resolver: Resolver, existing_object_id: Optional[str]) -> H:
-            return await self._deploy(label, namespace, resolver.client)
+            return await self._deploy(label, namespace, resolver.client, environment_name=environment_name)
 
         cls = type(self)
         rep = f"PersistedRef<{self}>({label})"
         return cls._from_loader(_load_persisted, rep, is_persisted_ref=True)
 
     @classmethod
     def from_name(
         cls: Type[P],
         app_name: str,
         tag: Optional[str] = None,
         namespace=api_pb2.DEPLOYMENT_NAMESPACE_WORKSPACE,
+        environment_name: Optional[str] = None,
     ) -> P:
         """Returns a reference to an Modal object of any type
 
         Useful for referring to already created/deployed objects, e.g., Secrets
 
         ```python
         import modal
@@ -278,43 +293,52 @@
         @stub.function(secret=modal.Secret.from_name("my-secret-name"))
         def some_function():
             pass
         ```
         """
 
         async def _load_remote(resolver: Resolver, existing_object_id: Optional[str]) -> H:
+            nonlocal environment_name
             handle_cls = cls._get_handle_cls()
-            handle: H = await handle_cls.from_app(app_name, tag, namespace, client=resolver.client)
+            if environment_name is None:
+                # resolver always has an environment name, associated with the current app setup
+                # fall back on that one if no explicit environment was set in the call itself
+                environment_name = resolver._environment_name
+
+            handle: H = await handle_cls.from_app(
+                app_name, tag, namespace, client=resolver.client, environment_name=environment_name
+            )
             return handle
 
         rep = f"Ref({app_name})"
         return cls._from_loader(_load_remote, rep)
 
     @classmethod
     async def lookup(
         cls: Type[P],
         app_name: str,
         tag: Optional[str] = None,
         namespace=api_pb2.DEPLOYMENT_NAMESPACE_WORKSPACE,
         client: Optional[_Client] = None,
+        environment_name: Optional[str] = None,
     ) -> H:
         """
         General purpose method to retrieve Modal objects such as
         functions, shared volumes, and secrets.
         ```python notest
         import modal
         square = modal.Function.lookup("my-shared-app", "square")
         assert square(3) == 9
         vol = modal.SharedVolume.lookup("my-shared-volume")
         for chunk in vol.read_file("my_db_dump.csv"):
             ...
         ```
         """
         handle_cls = cls._get_handle_cls()
-        handle: H = await handle_cls.from_app(app_name, tag, namespace, client)
+        handle: H = await handle_cls.from_app(app_name, tag, namespace, client, environment_name=environment_name)
         return handle
 
     @classmethod
     async def _exists(
         cls: Type[P],
         app_name: str,
         tag: Optional[str] = None,
```

## modal/object.pyi

```diff
@@ -45,15 +45,15 @@
         ...
 
     @property
     def object_id(self) -> str:
         ...
 
     @classmethod
-    async def from_app(cls: typing.Type[H], app_name: str, tag: typing.Union[str, None] = None, namespace=1, client: typing.Union[modal.client._Client, None] = None) -> H:
+    async def from_app(cls: typing.Type[H], app_name: str, tag: typing.Union[str, None] = None, namespace=1, client: typing.Union[modal.client._Client, None] = None, environment_name: typing.Union[str, None] = None) -> H:
         ...
 
 
 class Handle:
     _type_prefix: str
 
     def __init__(self):
@@ -90,15 +90,15 @@
         ...
 
     @property
     def object_id(self) -> str:
         ...
 
     @classmethod
-    def from_app(cls: typing.Type[_BLOCKING_H], app_name: str, tag: typing.Union[str, None] = None, namespace=1, client: typing.Union[modal.client.Client, None] = None) -> _BLOCKING_H:
+    def from_app(cls: typing.Type[_BLOCKING_H], app_name: str, tag: typing.Union[str, None] = None, namespace=1, client: typing.Union[modal.client.Client, None] = None, environment_name: typing.Union[str, None] = None) -> _BLOCKING_H:
         ...
 
 
 P = typing.TypeVar("P", bound="_Provider")
 
 _BLOCKING_P = typing.TypeVar("_BLOCKING_P", bound="Provider")
 
@@ -126,26 +126,26 @@
     def __repr__(self):
         ...
 
     @property
     def local_uuid(self):
         ...
 
-    async def _deploy(self, label: str, namespace=1, client: typing.Union[modal.client._Client, None] = None) -> H:
+    async def _deploy(self, label: str, namespace=1, client: typing.Union[modal.client._Client, None] = None, environment_name: typing.Union[str, None] = None) -> H:
         ...
 
-    def persist(self, label: str, namespace=1):
+    def persist(self, label: str, namespace=1, environment_name: typing.Union[str, None] = None):
         ...
 
     @classmethod
-    def from_name(cls: typing.Type[P], app_name: str, tag: typing.Union[str, None] = None, namespace=1) -> P:
+    def from_name(cls: typing.Type[P], app_name: str, tag: typing.Union[str, None] = None, namespace=1, environment_name: typing.Union[str, None] = None) -> P:
         ...
 
     @classmethod
-    async def lookup(cls: typing.Type[P], app_name: str, tag: typing.Union[str, None] = None, namespace=1, client: typing.Union[modal.client._Client, None] = None) -> H:
+    async def lookup(cls: typing.Type[P], app_name: str, tag: typing.Union[str, None] = None, namespace=1, client: typing.Union[modal.client._Client, None] = None, environment_name: typing.Union[str, None] = None) -> H:
         ...
 
     @classmethod
     async def _exists(cls: typing.Type[P], app_name: str, tag: typing.Union[str, None] = None, namespace=1, client: typing.Union[modal.client._Client, None] = None) -> bool:
         ...
 
 
@@ -180,29 +180,29 @@
         ...
 
     @property
     def local_uuid(self):
         ...
 
     class ___deploy_spec(typing_extensions.Protocol):
-        def __call__(self, label: str, namespace=1, client: typing.Union[modal.client.Client, None] = None) -> _BLOCKING_H:
+        def __call__(self, label: str, namespace=1, client: typing.Union[modal.client.Client, None] = None, environment_name: typing.Union[str, None] = None) -> _BLOCKING_H:
             ...
 
         async def aio(self, *args, **kwargs) -> _BLOCKING_H:
             ...
 
     _deploy: ___deploy_spec
 
-    def persist(self, label: str, namespace=1):
+    def persist(self, label: str, namespace=1, environment_name: typing.Union[str, None] = None):
         ...
 
     @classmethod
-    def from_name(cls: typing.Type[_BLOCKING_P], app_name: str, tag: typing.Union[str, None] = None, namespace=1) -> _BLOCKING_P:
+    def from_name(cls: typing.Type[_BLOCKING_P], app_name: str, tag: typing.Union[str, None] = None, namespace=1, environment_name: typing.Union[str, None] = None) -> _BLOCKING_P:
         ...
 
     @classmethod
-    def lookup(cls: typing.Type[_BLOCKING_P], app_name: str, tag: typing.Union[str, None] = None, namespace=1, client: typing.Union[modal.client.Client, None] = None) -> _BLOCKING_H:
+    def lookup(cls: typing.Type[_BLOCKING_P], app_name: str, tag: typing.Union[str, None] = None, namespace=1, client: typing.Union[modal.client.Client, None] = None, environment_name: typing.Union[str, None] = None) -> _BLOCKING_H:
         ...
 
     @classmethod
     def _exists(cls: typing.Type[_BLOCKING_P], app_name: str, tag: typing.Union[str, None] = None, namespace=1, client: typing.Union[modal.client.Client, None] = None) -> bool:
         ...
```

## modal/runner.py

```diff
@@ -30,16 +30,19 @@
 async def _run_stub(
     stub,
     client: Optional[_Client] = None,
     stdout=None,
     show_progress: Optional[bool] = None,
     detach: bool = False,
     output_mgr: Optional[OutputManager] = None,
-    environment: str = "",
+    environment_name: Optional[str] = None,
 ) -> AsyncGenerator[_App, None]:
+    if environment_name is None:
+        environment_name = config.get("environment")
+
     if not is_local():
         raise InvalidError(
             "Can not run an app from within a container."
             " Are you calling stub.run() directly?"
             " Consider using the `modal run` shell command."
         )
     if stub.app:
@@ -49,30 +52,32 @@
         )
 
     if client is None:
         client = await _Client.from_env()
     if output_mgr is None:
         output_mgr = OutputManager(stdout, show_progress, "Running app...")
     post_init_state = api_pb2.APP_STATE_DETACHED if detach else api_pb2.APP_STATE_EPHEMERAL
-    app = await _App._init_new(client, stub.description, detach=detach, deploying=False, environment_name=environment)
+    app = await _App._init_new(
+        client, stub.description, detach=detach, deploying=False, environment_name=environment_name
+    )
     async with stub._set_app(app), TaskContext(grace=config["logs_timeout"]) as tc:
         # Start heartbeats loop to keep the client alive
         tc.infinite_loop(lambda: _heartbeat(client, app.app_id), sleep=HEARTBEAT_INTERVAL)
 
         with output_mgr.ctx_if_visible(output_mgr.make_live(step_progress("Initializing..."))):
             initialized_msg = f"Initialized. [grey70]View app at [underline]{app._app_page_url}[/underline][/grey70]"
             output_mgr.print_if_visible(step_completed(initialized_msg))
             output_mgr.update_app_page_url(app._app_page_url)
 
         # Start logs loop
         logs_loop = tc.create_task(get_app_logs_loop(app.app_id, client, output_mgr))
 
         try:
             # Create all members
-            await app._create_all_objects(stub._blueprint, output_mgr, post_init_state)
+            await app._create_all_objects(stub._blueprint, output_mgr, post_init_state, environment_name)
 
             # Update all functions client-side to have the output mgr
             for tag, obj in stub._function_handles.items():
                 obj._set_output_mgr(output_mgr)
 
             # Yield to context
             if stub._pty_input_stream:
@@ -107,23 +112,24 @@
     output_mgr.print_if_visible(step_completed("App completed."))
 
 
 async def _serve_update(
     stub,
     existing_app_id: str,
     is_ready: Event,
+    environment_name: str,
 ) -> None:
     # Used by child process to reinitialize a served app
     client = await _Client.from_env()
     try:
         output_mgr = OutputManager(None, None)
         app = await _App._init_existing(client, existing_app_id)
 
         # Create objects
-        await app._create_all_objects(stub._blueprint, output_mgr, api_pb2.APP_STATE_UNSPECIFIED)
+        await app._create_all_objects(stub._blueprint, output_mgr, api_pb2.APP_STATE_UNSPECIFIED, environment_name)
 
         # Communicate to the parent process
         is_ready.set()
     except asyncio.exceptions.CancelledError:
         # Stopped by parent process
         pass
 
@@ -132,14 +138,15 @@
     stub,
     name: str = None,
     namespace=api_pb2.DEPLOYMENT_NAMESPACE_WORKSPACE,
     client=None,
     stdout=None,
     show_progress=None,
     object_entity="ap",
+    environment_name: Optional[str] = None,
 ) -> _App:
     """Deploy an app and export its objects persistently.
 
     Typically, using the command-line tool `modal deploy <module or script>`
     should be used, instead of this method.
 
     **Usage:**
@@ -154,14 +161,17 @@
     * Persists all of the objects in the app, allowing them to live past the
       current app run. For schedules this enables headless "cron"-like
       functionality where scheduled functions continue to be invoked after
       the client has disconnected.
     * Allows for certain kinds of these objects, _deployment objects_, to be
       referred to and used by other apps.
     """
+    if environment_name is None:
+        environment_name = config.get("environment")
+
     if not is_local():
         raise InvalidError("Cannot run a deploy from within a container.")
     if name is None:
         name = stub.name
     if name is None:
         raise InvalidError(
             "You need to either supply an explicit deployment name to the deploy command, or have a name set on the app.\n"
@@ -176,38 +186,38 @@
         raise InvalidError(
             f"Invalid app name {name}. App names may only contain alphanumeric characters, dashes, periods, and underscores, and must be less than 64 characters in length. "
         )
 
     if client is None:
         client = await _Client.from_env()
 
-    app = await _App._init_from_name(client, name, namespace, environment_name="")
+    app = await _App._init_from_name(client, name, namespace, environment_name=environment_name)
 
     output_mgr = OutputManager(stdout, show_progress)
 
     async with TaskContext(0) as tc:
         # Start heartbeats loop to keep the client alive
         tc.infinite_loop(lambda: _heartbeat(client, app.app_id), sleep=HEARTBEAT_INTERVAL)
 
         # Don't change the app state - deploy state is set by AppDeploy
         post_init_state = api_pb2.APP_STATE_UNSPECIFIED
 
         # Create all members
-        await app._create_all_objects(stub._blueprint, output_mgr, post_init_state)
+        await app._create_all_objects(stub._blueprint, output_mgr, post_init_state, environment_name=environment_name)
 
         # Deploy app
         # TODO(erikbern): not needed if the app already existed
         url = await app.deploy(name, namespace, object_entity)
 
     output_mgr.print_if_visible(step_completed("App deployed! "))
     output_mgr.print_if_visible(f"\nView Deployment: [magenta]{url}[/magenta]")
     return app
 
 
-async def _interactive_shell(stub, cmd=None, image=None, **kwargs):
+async def _interactive_shell(stub, cmd=None, image=None, environment_name="", **kwargs):
     """Run an interactive shell (like `bash`) within the image for this app.
 
     This is useful for online debugging and interactive exploration of the
     contents of this image. If `cmd` is optionally provided, it will be run
     instead of the default shell inside this image.
 
     **Example**
@@ -222,15 +232,15 @@
 
     ```bash
     modal shell script.py --cmd /bin/bash
     ```
     """
     wrapped_fn = stub.function(interactive=True, timeout=86400, image=image, **kwargs)(_pty.exec_cmd)
 
-    async with _run_stub(stub):
+    async with _run_stub(stub, environment_name=environment_name):
         await wrapped_fn.call(cmd)
 
 
 run_stub = synchronize_api(_run_stub)
 serve_update = synchronize_api(_serve_update)
 deploy_stub = synchronize_api(_deploy_stub)
 interactive_shell = synchronize_api(_interactive_shell)
```

## modal/serving.py

```diff
@@ -13,28 +13,31 @@
 from modal_utils.async_utils import TaskContext, asyncify, synchronize_api, synchronizer
 
 from ._output import OutputManager
 from ._watcher import watch
 from .app import _App
 from .cli.import_refs import import_stub
 from .client import _Client
+from .config import config
 from .runner import _run_stub, serve_update
 
 
-def _run_serve(stub_ref: str, existing_app_id: str, is_ready: Event):
+def _run_serve(stub_ref: str, existing_app_id: str, is_ready: Event, environment_name: str):
     # subprocess entrypoint
     _stub = import_stub(stub_ref)
     blocking_stub = synchronizer._translate_out(_stub, Interface.BLOCKING)
-    serve_update(blocking_stub, existing_app_id, is_ready)
+    serve_update(blocking_stub, existing_app_id, is_ready, environment_name)
 
 
-async def _restart_serve(stub_ref: str, existing_app_id: str, timeout: float = 5.0) -> SpawnProcess:
+async def _restart_serve(
+    stub_ref: str, existing_app_id: str, environment_name: str, timeout: float = 5.0
+) -> SpawnProcess:
     ctx = multiprocessing.get_context("spawn")  # Needed to reload the interpreter
     is_ready = ctx.Event()
-    p = ctx.Process(target=_run_serve, args=(stub_ref, existing_app_id, is_ready))
+    p = ctx.Process(target=_run_serve, args=(stub_ref, existing_app_id, is_ready, environment_name))
     p.start()
     await asyncify(is_ready.wait)(timeout)
     # TODO(erikbern): we don't fail if the above times out, but that's somewhat intentional, since
     # the child process might build a huge image or similar
     return p
 
 
@@ -51,15 +54,17 @@
                 f"[red]Serve process {proc.pid} didn't terminate after {timeout}s, killing it[/red]"
             )
             proc.kill()
     except ProcessLookupError:
         pass  # Child process already finished
 
 
-async def _run_watch_loop(stub_ref: str, app_id: str, output_mgr: OutputManager, watcher: AsyncGenerator[None, None]):
+async def _run_watch_loop(
+    stub_ref: str, app_id: str, output_mgr: OutputManager, watcher: AsyncGenerator[None, None], environment_name: str
+):
     unsupported_msg = None
     if platform.system() == "Windows":
         unsupported_msg = "Live-reload skipped. This feature is currently unsupported on Windows"
         " This can hopefully be fixed in a future version of Modal."
     elif sys.version_info < (3, 8):
         unsupported_msg = (
             "Live-reload skipped. This feature is unsupported below Python 3.8."
@@ -70,15 +75,15 @@
         async for _ in watcher:
             output_mgr.print_if_visible(unsupported_msg)
     else:
         curr_proc = None
         try:
             async for _ in watcher:
                 await _terminate(curr_proc, output_mgr)
-                curr_proc = await _restart_serve(stub_ref, existing_app_id=app_id)
+                curr_proc = await _restart_serve(stub_ref, existing_app_id=app_id, environment_name=environment_name)
         finally:
             await _terminate(curr_proc, output_mgr)
 
 
 def _get_clean_stub_description(stub_ref: str) -> str:
     # If possible, consider the 'ref' argument the start of the app's args. Everything
     # before it Modal CLI cruft (eg. `modal serve --timeout 1.0`).
@@ -91,29 +96,33 @@
 
 @contextlib.asynccontextmanager
 async def _serve_stub(
     stub_ref: str,
     stdout: Optional[io.TextIOWrapper] = None,
     show_progress: bool = True,
     _watcher: Optional[AsyncGenerator[None, None]] = None,  # for testing
+    environment_name: Optional[str] = None,
 ) -> AsyncGenerator[_App, None]:
+    if environment_name is None:
+        environment_name = config.get("environment")
+
     stub = import_stub(stub_ref)
     if stub._description is None:
         stub._description = _get_clean_stub_description(stub_ref)
 
     client = await _Client.from_env()
 
     output_mgr = OutputManager(stdout, show_progress, "Running app...")
     if _watcher is not None:
         watcher = _watcher  # Only used by tests
     else:
         mounts_to_watch = stub._get_watch_mounts()
         watcher = watch(mounts_to_watch, output_mgr)
 
-    async with _run_stub(stub, client=client, output_mgr=output_mgr) as app:
+    async with _run_stub(stub, client=client, output_mgr=output_mgr, environment_name=environment_name) as app:
         client.set_pre_stop(app.disconnect)
         async with TaskContext(grace=0.1) as tc:
-            tc.create_task(_run_watch_loop(stub_ref, app.app_id, output_mgr, watcher))
+            tc.create_task(_run_watch_loop(stub_ref, app.app_id, output_mgr, watcher, environment_name))
             yield app
 
 
 serve_stub = synchronize_api(_serve_stub)
```

## modal/cli/app.py

```diff
@@ -1,32 +1,36 @@
 # Copyright Modal Labs 2022
 import asyncio
+from typing import Optional
 
 import typer
 from click import UsageError
 from grpclib import GRPCError, Status
 from rich.console import Console
 from rich.table import Table
 
+from modal.cli.environment import ENV_OPTION_HELP, ensure_env
 from modal._output import OutputManager, get_app_logs_loop
 from modal.cli.utils import timestamp_to_local
 from modal.client import _Client
 from modal_proto import api_pb2
 from modal_utils.async_utils import synchronizer
 
 app_cli = typer.Typer(name="app", help="Manage deployed and running apps.", no_args_is_help=True)
 
 
 @app_cli.command("list")
 @synchronizer.create_blocking
-async def list_apps():
+async def list(env: Optional[str] = typer.Option(default=None, help=ENV_OPTION_HELP, hidden=True)):
     """List all running or recently running Modal apps for the current account"""
     client = await _Client.from_env()
-    res: api_pb2.AppListResponse = await client.stub.AppList(api_pb2.AppListRequest(environment_name=""))
+    env = ensure_env(env)
+    res: api_pb2.AppListResponse = await client.stub.AppList(api_pb2.AppListRequest(environment_name=env))
     console = Console()
+
     table = Table("App ID", "Description", "State", "Creation time", "Stop time")
     for app_stats in res.apps:
         if app_stats.state == api_pb2.AppState.APP_STATE_DETACHED:
             state = "[green]running (detached)[/green]"
         elif app_stats.state == api_pb2.AppState.APP_STATE_EPHEMERAL:
             state = "[green]running[/green]"
         elif app_stats.state == api_pb2.AppState.APP_STATE_INITIALIZING:
@@ -44,14 +48,16 @@
             app_stats.app_id,
             app_stats.description,
             state,
             timestamp_to_local(app_stats.created_at),
             timestamp_to_local(app_stats.stopped_at),
         )
 
+    env_part = f" in environment '{env}'" if env else ""
+    console.print(f"Listing apps{env_part}")
     console.print(table)
 
 
 @app_cli.command("logs")
 def app_logs(app_id: str):
     """Output logs for a running app."""
 
@@ -74,12 +80,12 @@
             raise
     except KeyboardInterrupt:
         pass
 
 
 @app_cli.command("stop")
 @synchronizer.create_blocking
-async def list_stops(app_id: str):
+async def stop(app_id: str):
     """Stop an app."""
     client = await _Client.from_env()
     req = api_pb2.AppStopRequest(app_id=app_id)
     await client.stub.AppStop(req)
```

## modal/cli/config.py

```diff
@@ -1,21 +1,44 @@
 # Copyright Modal Labs 2022
+import pprint
+
 import typer
 
-from modal.config import config
+from modal.config import config, _store_user_config, _config_active_profile
 
 config_cli = typer.Typer(
     name="config",
     help="""
-    Manage client configuration.
+    Manage client configuration for the current profile.
 
     Refer to https://modal.com/docs/reference/modal.config for a full explanation
     of what these options mean, and how to set them.
     """,
     no_args_is_help=True,
 )
 
 
-@config_cli.command(help="Show current configuration values (debug command).")
+@config_cli.command(help="Show configuration values for the current profile (debug command).")
 def show():
     # This is just a test command
-    print(config)
+    pprint.pprint(config.to_dict())
+
+
+SET_DEFAULT_ENV_HELP = """Set the default Modal environment for the active profile
+
+The default environment of a profile is used when no --env flag is passed to `modal run`, `modal deploy` etc.
+
+If no default environment is set, and there exists multiple environments in a workspace, an error will be raised
+when running a command that requires an environment.
+"""
+
+
+@config_cli.command(help=SET_DEFAULT_ENV_HELP, hidden=True)
+def set_environment(environment_name: str):
+    _store_user_config({"environment": environment_name})
+    active_profile = _config_active_profile()
+    typer.echo(f"New default environment for profile {active_profile}: {environment_name}")
+
+
+@config_cli.command(hidden=True)
+def set(key: str, value: str):
+    _store_user_config({key: value})
```

## modal/cli/entry_point.py

```diff
@@ -1,15 +1,15 @@
 # Copyright Modal Labs 2022
 import typer
 
 from modal.cli import run
+from modal.cli.environment import environment_cli
 
 from .app import app_cli
 from .config import config_cli
-from .env import env_cli
 from .secret import secret_cli
 from .token import token_cli
 from .volume import volume_cli
 from .profile import profile_cli
 
 
 def version_callback(value: bool):
@@ -39,21 +39,20 @@
     version: bool = typer.Option(None, "--version", callback=version_callback),
 ):
     pass
 
 
 entrypoint_cli_typer.add_typer(app_cli)
 entrypoint_cli_typer.add_typer(config_cli)
-entrypoint_cli_typer.add_typer(env_cli)
+entrypoint_cli_typer.add_typer(environment_cli, hidden=True)
 entrypoint_cli_typer.add_typer(profile_cli)
 entrypoint_cli_typer.add_typer(secret_cli)
 entrypoint_cli_typer.add_typer(token_cli)
 entrypoint_cli_typer.add_typer(volume_cli)
 
-# entrypoint_cli_typer.command("run", help="Run a Modal function.", context_settings={"allow_extra_args": True})(run.run)
 entrypoint_cli_typer.command("deploy", help="Deploy a Modal stub as an application.", no_args_is_help=True)(run.deploy)
 entrypoint_cli_typer.command("serve", no_args_is_help=True)(run.serve)
 entrypoint_cli_typer.command("shell", no_args_is_help=True)(run.shell)
 
 entrypoint_cli = typer.main.get_command(entrypoint_cli_typer)
 entrypoint_cli.add_command(run.run, name="run")  # type: ignore
 entrypoint_cli.list_commands(None)  # type: ignore
```

## modal/cli/profile.py

```diff
@@ -1,22 +1,23 @@
 # Copyright Modal Labs 2022
+
 import typer
 
 from modal.config import _profile, config_profiles, config_set_active_profile
 
 profile_cli = typer.Typer(name="profile", help="Set the active Modal profile.", no_args_is_help=True)
 
 
 @profile_cli.command(help="Change the active Modal profile.")
 def activate(profile: str = typer.Argument(..., help="Modal profile to activate.")):
     config_set_active_profile(profile)
 
 
 @profile_cli.command(help="Print the active Modal profile.")
 def current():
-    print(_profile)
+    typer.echo(_profile)
 
 
 @profile_cli.command(help="List all Modal profiles that are defined.")
 def list():
     for env in config_profiles():
-        print(f"{env} [active]" if _profile == env else env)
+        typer.echo(f"{env} [active]" if _profile == env else env)
```

## modal/cli/run.py

```diff
@@ -14,19 +14,19 @@
 
 from modal.config import config
 from modal.exception import InvalidError
 from modal.runner import run_stub, deploy_stub, interactive_shell
 from modal.serving import serve_stub
 from modal.stub import LocalEntrypoint
 from modal_utils.async_utils import synchronizer
+from .environment import ENV_OPTION_HELP, ensure_env
 
 from .import_refs import import_function, import_stub
 from ..functions import _FunctionHandle
 
-run_cli = typer.Typer(name="run")
 
 # Why do we need to support both types and the strings? Because something weird with
 # how __annotations__ works in Python (which inspect.signature uses). See #220.
 option_parsers = {
     str: str,
     "str": str,
     int: int,
@@ -84,15 +84,20 @@
     blocking_stub = synchronizer._translate_out(_stub, Interface.BLOCKING)
 
     _function = _stub[function_tag]
     raw_func = _function._info.raw_f
 
     @click.pass_context
     def f(ctx, *args, **kwargs):
-        with run_stub(blocking_stub, detach=ctx.obj["detach"], show_progress=ctx.obj["show_progress"]) as app:
+        with run_stub(
+            blocking_stub,
+            detach=ctx.obj["detach"],
+            show_progress=ctx.obj["show_progress"],
+            environment_name=ctx.obj["env"],
+        ) as app:
             _function_handle = app[function_tag]
             _function_handle.call(*args, **kwargs)
 
     # TODO: handle `self` when raw_func is an unbound method (e.g. method on lifecycle class)
     with_click_options = _add_click_options(f, inspect.signature(raw_func))
     return click.command(with_click_options)
 
@@ -105,15 +110,20 @@
     @click.pass_context
     def f(ctx, *args, **kwargs):
         if ctx.obj["detach"]:
             print(
                 "Note that running a local entrypoint in detached mode only keeps the last triggered Modal function alive after the parent process has been killed or disconnected."
             )
 
-        with run_stub(blocking_stub, detach=ctx.obj["detach"], show_progress=ctx.obj["show_progress"]) as app:
+        with run_stub(
+            blocking_stub,
+            detach=ctx.obj["detach"],
+            show_progress=ctx.obj["show_progress"],
+            environment_name=ctx.obj["env"],
+        ) as app:
             if isasync:
                 asyncio.run(func(*args, **kwargs))
             else:
                 func(*args, **kwargs)
             if app.function_invocations == 0:
                 # TODO: better formatting for the warning message
                 warnings.warn(
@@ -145,16 +155,17 @@
 
 @click.group(
     cls=RunGroup,
     subcommand_metavar="FUNC_REF",
 )
 @click.option("-q", "--quiet", is_flag=True, help="Don't show Modal progress indicators.")
 @click.option("-d", "--detach", is_flag=True, help="Don't stop the app if the local process dies or disconnects.")
+@click.option("-e", "--env", help=ENV_OPTION_HELP, default="")
 @click.pass_context
-def run(ctx, detach, quiet):
+def run(ctx, detach, quiet, env):
     """Run a Modal function or local entrypoint
 
     `FUNC_REF` should be of the format `{file or module}::{function name}`.
     Alternatively, you can refer to the function via the stub:
 
     `{file or module}::{stub variable name}.{function name}`
 
@@ -179,42 +190,51 @@
     ```bash
     modal run my_project.my_app
     ```
     """
     ctx.ensure_object(dict)
     ctx.obj["detach"] = detach  # if subcommand would be a click command...
     ctx.obj["show_progress"] = False if quiet else None
+    ctx.obj["env"] = env
 
 
 def deploy(
     stub_ref: str = typer.Argument(..., help="Path to a Python file with a stub."),
     name: str = typer.Option(None, help="Name of the deployment."),
+    env: str = typer.Option(None, help=ENV_OPTION_HELP),
 ):
+    env = ensure_env(
+        env
+    )  # this ensures that `modal.lookup()` without environment specification uses the same env as specified
+
     _stub = import_stub(stub_ref)
 
     if name is None:
         name = _stub.name
 
     blocking_stub = synchronizer._translate_out(_stub, interface=Interface.BLOCKING)
-    deploy_stub(blocking_stub, name=name)
+    deploy_stub(blocking_stub, name=name, environment_name=env)
 
 
 def serve(
     stub_ref: str = typer.Argument(..., help="Path to a Python file with a stub."),
     timeout: Optional[float] = None,
+    env: str = typer.Option(None, help=ENV_OPTION_HELP),
 ):
     """Run a web endpoint(s) associated with a Modal stub and hot-reload code.
 
     **Examples:**
 
     ```bash
     modal serve hello_world.py
     ```
     """
-    with serve_stub(stub_ref):
+    env = ensure_env(env)
+
+    with serve_stub(stub_ref, environment_name=env):
         if timeout is None:
             timeout = config["serve_timeout"]
         if timeout is None:
             timeout = float("inf")
         while timeout > 0:
             t = min(timeout, 3600)
             time.sleep(t)
@@ -222,14 +242,15 @@
 
 
 def shell(
     func_ref: str = typer.Argument(
         ..., help="Path to a Python file with a Stub or Modal function whose container to run.", metavar="FUNC_REF"
     ),
     cmd: str = typer.Option(default="/bin/bash", help="Command to run inside the Modal image."),
+    env: str = typer.Option(None, help=ENV_OPTION_HELP),
 ):
     """Run an interactive shell inside a Modal image.
 
     **Examples:**
 
     Start a bash shell using the spec for `my_function` in your stub:
 
@@ -241,33 +262,36 @@
 
     Start a `python` shell:
 
     ```bash
     modal shell hello_world.py --cmd=python
     ```
     """
+    env = ensure_env(env)
+
     console = Console()
     if not console.is_terminal:
         raise click.UsageError("`modal shell` can only be run from a terminal.")
 
     _function_handle = import_function(
         func_ref, accept_local_entrypoint=False, accept_webhook=True, interactive=True, base_cmd="modal shell"
     )
     assert isinstance(_function_handle, _FunctionHandle)  # ensured by accept_local_entrypoint=False
     _stub = _function_handle._stub
     _function = _function_handle._get_function()
     blocking_stub = synchronizer._translate_out(_stub, Interface.BLOCKING)
 
     if _function_handle is None:
-        interactive_shell(blocking_stub, cmd)
+        interactive_shell(blocking_stub, cmd, environment_name=env)
     else:
         interactive_shell(
             blocking_stub,
             cmd,
             mounts=_function._mounts,
             shared_volumes=_function._shared_volumes,
             allow_cross_region_volumes=_function._allow_cross_region_volumes,
             image=_function._image,
             secrets=_function._secrets,
             gpu=_function._gpu,
             cloud=_function._cloud,
+            environment_name=env,
         )
```

## modal/cli/secret.py

```diff
@@ -1,55 +1,63 @@
 # Copyright Modal Labs 2022
 import os
 import platform
 import subprocess
 from tempfile import NamedTemporaryFile
-from typing import List
+from typing import List, Optional
 
 import click
 import typer
 from rich.console import Console
 from rich.syntax import Syntax
 from rich.table import Table
 
 import modal
+from modal.cli.environment import ENV_OPTION_HELP, ensure_env
 from modal.cli.utils import timestamp_to_local
 from modal.client import Client, _Client
 from modal_proto import api_pb2
 from modal_utils.async_utils import synchronizer
 from modal_utils.grpc_utils import retry_transient_errors
 
 secret_cli = typer.Typer(name="secret", help="Manage secrets.", no_args_is_help=True)
 
 
 @secret_cli.command("list", help="List your published secrets.")
 @synchronizer.create_blocking
-async def list():
+async def list(env: Optional[str] = typer.Option(None, help=ENV_OPTION_HELP, hidden=True)):
+    env = ensure_env(env)
     client = await _Client.from_env()
-    response = await retry_transient_errors(client.stub.SecretList, api_pb2.SecretListRequest(environment_name=""))
+    response = await retry_transient_errors(client.stub.SecretList, api_pb2.SecretListRequest(environment_name=env))
     table = Table()
     table.add_column("Name")
     table.add_column("Created at", justify="right")
     table.add_column("Last used at", justify="right")
 
     for item in response.items:
         table.add_row(
             item.label,
             timestamp_to_local(item.created_at),
             timestamp_to_local(item.last_used_at) if item.last_used_at else "-",
         )
 
     console = Console()
+    env_part = f" in environment '{env}'" if env else ""
+    console.print(f"Listing secrets{env_part}")
     console.print(table)
 
 
 @secret_cli.command("create", help="Create a new secret, or overwrite an existing one.")
-def create(secret_name, keyvalues: List[str] = typer.Argument(..., help="Space-separated KEY=VALUE items")):
+def create(
+    secret_name,
+    keyvalues: List[str] = typer.Argument(..., help="Space-separated KEY=VALUE items"),
+    env: Optional[str] = typer.Option(None, help=ENV_OPTION_HELP, hidden=True),
+):
+    env = ensure_env(env)
     env_dict = {}
-
     for arg in keyvalues:
         if "=" in arg:
             key, value = arg.split("=")
             if value == "-":
                 value = get_text_from_editor(key)
             env_dict[key] = value
         else:
@@ -62,15 +70,15 @@
 """
             )
 
     if not env_dict:
         raise click.UsageError("You need to specify at least one key for your secret")
 
     secret = modal.Secret.from_dict(env_dict=env_dict)
-    secret._deploy(secret_name, client=Client.from_env())
+    secret._deploy(secret_name, client=Client.from_env(), environment_name=env)
     console = Console()
 
     env_var_code = "\n    ".join(f'os.getenv("{name}")' for name in env_dict.keys()) if env_dict else "..."
 
     example_code = f"""
 @stub.function(secret=modal.Secret.from_name("{secret_name}"))
 def some_function():
```

## modal/cli/token.py

```diff
@@ -1,9 +1,8 @@
 # Copyright Modal Labs 2022
-from datetime import date
 import getpass
 from typing import Optional
 import webbrowser
 
 import rich
 from rich.console import Console
 import typer
@@ -15,33 +14,23 @@
 
 profile_option = typer.Option(
     None,
     help="Modal profile to set credentials for. You can switch the currently active Modal profile with the `modal profile` command. If unspecified, uses `default` profile.",
 )
 
 
-def env_profile_deprecation():
-    from modal.exception import deprecation_warning
-
-    deprecation_warning(date(2023, 5, 25), "--env will soon be deprecated, use --profile instead", pending=True)
-
-
 @token_cli.command(
     help="Set account credentials for connecting to Modal. If not provided with the command, you will be prompted to enter your credentials."
 )
 def set(
     token_id: Optional[str] = typer.Option(None, help="Account token ID."),
     token_secret: Optional[str] = typer.Option(None, help="Account token secret."),
-    env: Optional[str] = profile_option,
     profile: Optional[str] = profile_option,
     no_verify: bool = False,
 ):
-    if env:
-        env_profile_deprecation()
-        profile = env
     if token_id is None:
         token_id = getpass.getpass("Token ID:")
     if token_secret is None:
         token_secret = getpass.getpass("Token secret:")
 
     if not no_verify:
         server_url = config.get("server_url", profile=profile)
@@ -50,18 +39,15 @@
         rich.print("[green]Token verified successfully[/green]")
 
     _store_user_config({"token_id": token_id, "token_secret": token_secret}, profile=profile)
     rich.print(f"Token written to {user_config_path}")
 
 
 @token_cli.command(help="Creates a new token by using an authenticated web session.")
-def new(env: Optional[str] = profile_option, profile: Optional[str] = profile_option, no_verify: bool = False):
-    if env:
-        env_profile_deprecation()
-        profile = env
+def new(profile: Optional[str] = profile_option, no_verify: bool = False):
     server_url = config.get("server_url", profile=profile)
 
     with Client.unauthenticated_client(server_url) as client:
         token_flow_id, web_url = client.start_token_flow()
         console = Console()
         with console.status("Waiting for authentication in the web browser...", spinner="dots"):
             # Open the web url in the browser
```

## modal/cli/volume.py

```diff
@@ -17,34 +17,38 @@
 from rich.syntax import Syntax
 from rich.table import Table
 from typer import Typer
 
 import modal
 from modal._location import display_location
 from modal._output import step_progress, step_completed
+from modal.cli.environment import ENV_OPTION_HELP, ensure_env
 from modal.client import _Client
 from modal.shared_volume import _SharedVolumeHandle, _SharedVolume
 from modal_proto import api_pb2
 from modal_utils.async_utils import synchronizer
 from modal_utils.grpc_utils import retry_transient_errors
 
 FileType = api_pb2.SharedVolumeListFilesEntry.FileType
 
 volume_cli = Typer(name="volume", help="Read and edit shared volumes.", no_args_is_help=True)
 
 
 @volume_cli.command(name="list", help="List the names of all shared volumes.")
 @synchronizer.create_blocking
-async def list():
+async def list(env: Optional[str] = typer.Option(default=None, help=ENV_OPTION_HELP, hidden=True)):
+    env = ensure_env(env)
+
     client = await _Client.from_env()
     response = await retry_transient_errors(
-        client.stub.SharedVolumeList, api_pb2.SharedVolumeListRequest(environment_name="")
+        client.stub.SharedVolumeList, api_pb2.SharedVolumeListRequest(environment_name=env)
     )
     if sys.stdout.isatty():
-        table = Table(title="Shared Volumes")
+        env_part = f" in environment '{env}'" if env else ""
+        table = Table(title=f"Shared Volumes{env_part}")
         table.add_column("Name")
         table.add_column("Location")
         table.add_column("Created at", justify="right")
         locale_tz = datetime.now().astimezone().tzinfo
         for item in response.items:
             table.add_row(
                 item.label,
@@ -63,34 +67,46 @@
 @stub.function(shared_volumes={{"/my_vol": modal.SharedVolume.from_name("{label}")}})
 def some_func():
     os.listdir("/my_vol")
 """
 
 
 @volume_cli.command(name="create", help="Create a named shared volume.")
-def create(name: str, cloud: str = typer.Option("aws", help="Cloud provider to create the volume in. One of aws|gcp.")):
+def create(
+    name: str,
+    cloud: str = typer.Option("aws", help="Cloud provider to create the volume in. One of aws|gcp."),
+    env: Optional[str] = typer.Option(None, help=ENV_OPTION_HELP),
+):
+    ensure_env(env)
     volume = modal.SharedVolume(cloud=cloud)
-    volume._deploy(name)
+    volume._deploy(name, environment_name=env)
     console = Console()
     console.print(f"Created volume '{name}' in {cloud.upper()}. \n\nCode example:\n")
     usage = Syntax(gen_usage_code(name), "python")
     console.print(usage)
 
 
-async def volume_from_name(deployment_name) -> _SharedVolumeHandle:
-    shared_volume = await _SharedVolume.lookup(deployment_name)
+async def _volume_from_name(deployment_name: str) -> _SharedVolumeHandle:
+    shared_volume = await _SharedVolume.lookup(
+        deployment_name, environment_name=None
+    )  # environment None will take value from config
     if not isinstance(shared_volume, _SharedVolumeHandle):
         raise Exception("The specified app entity is not a shared volume")
     return shared_volume
 
 
 @volume_cli.command(name="ls", help="List files and directories in a shared volume.")
 @synchronizer.create_blocking
-async def ls(volume_name: str, path: str = typer.Argument(default="/")):
-    volume = await volume_from_name(volume_name)
+async def ls(
+    volume_name: str,
+    path: str = typer.Argument(default="/"),
+    env: Optional[str] = typer.Option(None, help=ENV_OPTION_HELP),
+):
+    ensure_env(env)
+    volume = await _volume_from_name(volume_name)
     try:
         entries = await volume.listdir(path)
     except GRPCError as exc:
         if exc.status in (Status.INVALID_ARGUMENT, Status.NOT_FOUND):
             raise UsageError(exc.message)
         raise
 
@@ -124,16 +140,18 @@
 """,
 )
 @synchronizer.create_blocking
 async def put(
     volume_name: str,
     local_path: str,
     remote_path: str = typer.Argument(default="/"),
+    env: Optional[str] = typer.Option(None, help=ENV_OPTION_HELP),
 ):
-    volume = await volume_from_name(volume_name)
+    ensure_env(env)
+    volume = await _volume_from_name(volume_name)
     if remote_path.endswith("/"):
         remote_path = remote_path + os.path.basename(local_path)
     console = Console()
 
     if Path(local_path).is_dir():
         spinner = step_progress(f"Uploading directory '{local_path}' to '{remote_path}'...")
         with Live(spinner, console=console):
@@ -199,30 +217,37 @@
         tasks.append(asyncio.create_task(consumer()))
 
     await asyncio.gather(*tasks)
 
 
 @volume_cli.command(name="get")
 @synchronizer.create_blocking
-async def get(volume_name: str, remote_path: str, local_destination: str = typer.Argument("."), force: bool = False):
+async def get(
+    volume_name: str,
+    remote_path: str,
+    local_destination: str = typer.Argument("."),
+    force: bool = False,
+    env: Optional[str] = typer.Option(None, help=ENV_OPTION_HELP),
+):
     """Download a file from a shared volume.
 
     Specifying a glob pattern (using any `*` or `**` patterns) as the `remote_path` will download all matching *files*, preserving
     the source directory structure for the matched files.
 
     For example, to download an entire shared volume into `dump_volume`:
 
     ```bash
     modal volume get <volume-name> "**" dump_volume
     ```
 
     Use "-" (a hyphen) as LOCAL_DESTINATION to write contents of file to stdout (only for non-glob paths).
     """
+    ensure_env(env)
     destination = Path(local_destination)
-    volume = await volume_from_name(volume_name)
+    volume = await _volume_from_name(volume_name)
 
     if "*" in remote_path:
         try:
             await _glob_download(volume, remote_path, destination, force)
         except CliError as exc:
             print(exc.message)
         return
@@ -262,15 +287,17 @@
 
 @volume_cli.command(name="rm", help="Delete a file or directory from a shared volume.")
 @synchronizer.create_blocking
 async def rm(
     volume_name: str,
     remote_path: str,
     recursive: bool = typer.Option(False, "-r", "--recursive", help="Delete directory recursively"),
+    env: Optional[str] = typer.Option(None, help=ENV_OPTION_HELP),
 ):
-    volume = await volume_from_name(volume_name)
+    ensure_env(env)
+    volume = await _volume_from_name(volume_name)
     try:
         await volume.remove_file(remote_path, recursive=recursive)
     except GRPCError as exc:
         if exc.status in (Status.NOT_FOUND, Status.INVALID_ARGUMENT):
             raise UsageError(exc.message)
         raise
```

## modal_base_images/client_mount.py

```diff
@@ -1,16 +1,24 @@
 # Copyright Modal Labs 2022
 import asyncio
 
+from modal.config import config
 from modal.mount import create_client_mount, client_mount_name
 from modal_proto import api_pb2
 
 
 async def main(client=None):
     mount = create_client_mount()
     name = client_mount_name()
-    await mount._deploy.aio(client_mount_name(), api_pb2.DEPLOYMENT_NAMESPACE_GLOBAL, client=client)
+    profile_environment = config.get("environment")
+    # TODO: change how namespaces work, so we don't have to use unrelated workspaces when deploying to global?.
+    await mount._deploy.aio(
+        client_mount_name(),
+        api_pb2.DEPLOYMENT_NAMESPACE_GLOBAL,
+        client=client,
+        environment_name=profile_environment,
+    )
     print(f" Deployed client mount {name} to global namespace.")
 
 
 if __name__ == "__main__":
     asyncio.run(main())
```

## modal_utils/grpc_utils.py

```diff
@@ -267,29 +267,13 @@
     """Find a free TCP port, useful for testing."""
     with contextlib.closing(socket.socket(socket.AF_INET, socket.SOCK_STREAM)) as s:
         s.bind(("", 0))
         s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
         return s.getsockname()[1]
 
 
-def patch_mock_servicer(cls):
-    """Patches all unimplemented abstract methods in a mock servicer."""
-
-    async def fallback(self, stream) -> None:
-        raise GRPCError(Status.UNIMPLEMENTED, "Not implemented in mock servicer " + repr(cls))
-
-    # Fill in the remaining methods on the class
-    for name in dir(cls):
-        method = getattr(cls, name)
-        if getattr(method, "__isabstractmethod__", False):
-            setattr(cls, name, fallback)
-
-    cls.__abstractmethods__ = frozenset()
-    return cls
-
-
 def get_proto_oneof(message: Message, oneof_group: str) -> Optional[Message]:
     oneof_field = message.WhichOneof(oneof_group)
     if oneof_field is None:
         return None
 
     return getattr(message, oneof_field)
```

## modal_version/_version_generated.py

```diff
@@ -1,2 +1,2 @@
 # Copyright Modal Labs 2023
-build_number = 2437
+build_number = 2455
```

## Comparing `modal_client-0.49.2437.dist-info/LICENSE` & `modal_client-0.49.2455.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `modal_client-0.49.2437.dist-info/METADATA` & `modal_client-0.49.2455.dist-info/METADATA`

 * *Files 7% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: modal-client
-Version: 0.49.2437
+Version: 0.49.2455
 Summary: Python client library for Modal
 Author: Modal Labs
 Author-email: erik@modal.com
 Project-URL: Homepage, https://modal.com
 Keywords: modal,client,cloud,serverless,infrastructure
 Classifier: Topic :: System :: Distributed Computing
 Classifier: Operating System :: OS Independent
@@ -22,18 +22,19 @@
 Requires-Dist: grpclib (==0.4.3)
 Requires-Dist: importlib-metadata (>=3.6.0)
 Requires-Dist: protobuf (<5.0,>=3.19)
 Requires-Dist: rich (>=12.0.0)
 Requires-Dist: synchronicity (~=0.5.3)
 Requires-Dist: tblib (>=1.7.0)
 Requires-Dist: toml
-Requires-Dist: typer (>=0.6.1)
+Requires-Dist: typer (~=0.9.0)
 Requires-Dist: types-certifi
 Requires-Dist: types-toml
 Requires-Dist: watchfiles
+Requires-Dist: typing-extensions (~=4.6.3)
 Requires-Dist: cloudpickle (<2.1.0,>=2.0.0) ; python_version < "3.11"
 Requires-Dist: cloudpickle (<2.3.0,>=2.2.0) ; python_version >= "3.11"
 
 # Modal Python Library
 
 The Modal Python Library provides convenient, on-demand access to serverless
 cloud compute from Python scripts on your local computer.
```

## Comparing `modal_client-0.49.2437.dist-info/RECORD` & `modal_client-0.49.2455.dist-info/RECORD`

 * *Files 8% similar despite different names*

```diff
@@ -1,37 +1,38 @@
 client_test/__init__.py,sha256=waLjl5c6IPDhSsdWAm9Bji4e2PVxamYABKAze6CHVXY,28
 client_test/aio_test.py,sha256=EcUtn4yqdKeXpWb854v86k_n--grUnJA7sCoVjKsiUE,392
 client_test/async_utils_test.py,sha256=vhWOb8jRl3illb7UIVSVWnM1PeXrPADWKu8Ko4szsI8,5409
 client_test/blob_test.py,sha256=SSWnrbrpgAAmcU4txClK5ycgKuHwYTKLzO8ryVa3dyQ,1474
 client_test/cli_imports_test.py,sha256=CJYkSI0gF8Zz32xD24JWX2LSlI_jXbwQ_Osqxh80xvc,3979
-client_test/cli_test.py,sha256=uijE75WJqsjhtejAGd6nQ89Xm7VcWrK-_JoyvubFzvU,13833
+client_test/cli_test.py,sha256=4FB6RDMaSuYmYmRYDucmzqBCdnenAVbOZIy9JfQ2Z6Q,14029
 client_test/client_test.py,sha256=AVDt8PzLbr5QoYUsA94jfQ8GeoQwEhT81xGUQf2uzAA,4768
 client_test/cls_test.py,sha256=yWzlN5Cnys8Cc7qZfqgKQW1Pu6iPaQ9sD7SJs7iz6O4,4422
-client_test/config_test.py,sha256=8eA5DKyMm4cd6w8CSz-ImHNN3011omSp6x67r9kKOeQ,2618
-client_test/conftest.py,sha256=mcBcACvwEWwkwKbC1h5tcNiati1ap-mdGKlVsnziSwM,31890
-client_test/container_app_test.py,sha256=v_je98hrlCjgiUkFCqaKYsXYq2VlTCtDqYbSGmNKybQ,4551
+client_test/config_test.py,sha256=nXcFcqYZnAord4OOV1HDTGUCav0a0ga4ce80DSijR4w,2622
+client_test/conftest.py,sha256=8cS6IDUZ4xFgmk5hR1T4_B2qj_5wahUgvmWNHTo_Ydg,31926
+client_test/container_app_test.py,sha256=2BmMqwseKd6ZzNUA1vzUpxqks3NusAs9CLAEgW0KEks,4555
 client_test/container_test.py,sha256=OK3AbbTRyQ0gCCw5rVpdBT4pBPyOkG1W-63xm-FwWas,24810
 client_test/deprecation_test.py,sha256=I74YCSVxiNnrMz7XFFm4bzZWpdkFcGQAVlDxSLCcqmE,1086
 client_test/e2e_test.py,sha256=UEDenuTYU7laTIDNurz-dsta_BuFX76sgHn7Ul16v_0,2182
 client_test/error_test.py,sha256=bDxKUwE4WJ1qwAfm0Jlzqkb3WetF0YLxplrgjevAv4U,165
 client_test/function_serialization_test.py,sha256=cVwwiXcyRWWlBIC1gTjreTCFKwZYvlEAtrYQx__1x7A,964
 client_test/function_test.py,sha256=245gQeo9p3TvzF7ulNU8fDia3E4S5S6pEeaPew6Ifjg,16957
 client_test/gpu_test.py,sha256=0sseHEuRKQJyYAMGWMO8GtO_J_pTL0gwJbBzy4EbSqo,3924
 client_test/grpc_utils_test.py,sha256=7BYCXGcRSzHeN4dk-a5AKFF4-t3wuIG3K_vs-rxJJ4w,5047
 client_test/helpers.py,sha256=O-1kXpxApUE5R1xLVQXNVytTIPNxCJBsBP7yjYFrisY,930
 client_test/image_test.py,sha256=jP-x3LCAIj_cbUeuzqWAN3UYQ7QNMk9wdSD5eAvsAVQ,15884
 client_test/live_reload_test.py,sha256=z_L-lFufhFfrTPL6ppAaJqVwcB5L1XLmkWBRCK_3bic,2356
 client_test/lookup_test.py,sha256=p7mwPT3QPV0Xlhx7rz4JEpGT3HiG-Gkq8XUZIMXRJ08,2605
-client_test/mount_test.py,sha256=k2OxwZZPNuo4lGzH4s7azWoUgapzJRNw62nKbkaGdFE,5301
+client_test/mount_test.py,sha256=d79emlblHcv-Ey0N4jkye2roNXo_CoSRyectJadLmms,5317
 client_test/mounted_files_test.py,sha256=svuTGzOvbspbBj6twaHmCckdtpckVLpvpyCEWnAQrF0,6239
 client_test/notebook_test.py,sha256=AzzAfpXBwXvfD4zwyqAr9GW-rM0RY4aJlXKBJ3GqBp8,2157
 client_test/object_test.py,sha256=qLh9548t-Az6wK1xkKAzEohW99ZtnY5u2o19sNrkXiY,1390
 client_test/package_utils_test.py,sha256=5BHIMwW03ettWIZ2AqFHcD8n5FIXoEcy1g2qTyqFo3Y,413
-client_test/resolver_test.py,sha256=64ayX7ICo25BnoClWmQhAicEPh2r9z5-Ze_9dkCK07E,1648
+client_test/resolver_test.py,sha256=MdK8Ewe5p2GcH195V8r1rJ-4uMs0xrYuitCqSfR6ixM,1690
 client_test/retries_test.py,sha256=Q-hNmElJjxYQ0DQ0VjEzjN7fX4wZvi3YSXS5oawjxHU,1807
+client_test/runner_test.py,sha256=2YlIJ3tGKR1t_hYp0mVOwyIwAwMMX9lR7D0LVLtSJc0,3143
 client_test/schedule_test.py,sha256=lyj6pHchOg_CqyJNQY8NbRUTfh-RxwAugcX5-P4b-0k,359
 client_test/secret_test.py,sha256=EBdwK04b6WdpwCDTHGeiW286F-kvwtq1P8fZaLrxbyY,1688
 client_test/serialization_test.py,sha256=OfDsjphPr4kjN2FZZ9iI2DHYRYprzzCs1OkUAs_J6Dc,1082
 client_test/shared_volume_test.py,sha256=0fP4r1hCanByXR_zLiDffaFSDqHpLxksRiXhzk4DVdA,3872
 client_test/stub_test.py,sha256=fb4rEcTRA6rMKjM9ujA2sPopHCpZCGYW44YiqElZdD0,8064
 client_test/utils_test.py,sha256=AMlrnJQfGDjy1c8mnmaNwnCmDMUh726mFx8QHSAsaDc,2691
 client_test/version_test.py,sha256=XEiHOjqHd97yuhuUiaVU22-C72XhXJXQ4wPmPJt9n08,410
@@ -45,73 +46,73 @@
 modal/_function_utils.py,sha256=6hVfx1xazHZeGkznGljTBEQfs6Z-CtVVfl35rI7EGEM,10990
 modal/_ipython.py,sha256=HF_DYy0e0qM9WnGDmTY30s1RxzGya9GeORCauCEpRaE,450
 modal/_location.py,sha256=_SdCPzVOl7HRwLWIxzTJjhdpOo1sIl4flfEJ-bAbiDE,929
 modal/_object_meta.py,sha256=iOd17GaCMZT3uZeyZY2D6GWSBYwcmKM38w7gTd7DgSw,850
 modal/_output.py,sha256=jsWc-FsgSC_cdfBcM76RKMFHBQhJfqdQqXpp1GuzHvQ,17552
 modal/_proxy_tunnel.py,sha256=XTB23djYwYa8PzMsiNwkIF2y3nxfOyR8CSBtLiKomFs,1785
 modal/_pty.py,sha256=S93_Gyc1wuXa7dCxJVZNQtHpc7GwdeLz9xrU--3NCa0,5043
-modal/_resolver.py,sha256=uy4DXqkYxEM_-uC17F4vyEAecav4LU959_WS7L7rC44,5438
+modal/_resolver.py,sha256=3O-ZnQfnWtBycNWbMXbhrcTOLO43LWtgGNbIFfqrxEk,5538
 modal/_serialization.py,sha256=fGqgALT_r3ZwLHWIvRGA3A-i5YHOXmbec7hhQPc8yuk,1863
 modal/_traceback.py,sha256=H8kaGplSQALs7nEdob2sNrv6wlpVONXbcSBDQklxWN8,7598
 modal/_tracing.py,sha256=69f2w-j0Mvh8Xz95WApYfE6NDSkAWBMIYRzGTYniFi8,1995
 modal/_types.py,sha256=vUvweCqAt0S-mni_V_EGc_rDCKgJlU5g0P8r08zl1ko,490
 modal/_watcher.py,sha256=fTCNt2s5P-l91c6Mc9wWGbQe2CCFsPyRMNRe7GqXQ4o,3409
 modal/aio.py,sha256=drzo9s5NE5hpCS_Jv2a1NKdYKt3t25-YjlIunv3rm2M,703
-modal/app.py,sha256=LBZ4z8qNSeIAx9aDjkGnNk8QLElenV5Q2kekoNs0qXE,11385
-modal/app.pyi,sha256=7S_HuHDMD3x6_WUrCzwhgYFFHI6S8X2rdxk72xHLCnY,6208
+modal/app.py,sha256=0La3B3rJylLqPfQu4wv67IQ1QH_DDcP9T24ZGd6GAIQ,11467
+modal/app.pyi,sha256=keuw-AukqQQVafYWkBc7c0u1m9ghI2JbsBAToFytbr8,6300
 modal/call_graph.py,sha256=_cCMOMg7IeWNiRXdd-gJbb7pUYw2Ahl-KbXsizM6Lcg,2462
 modal/client.py,sha256=5SP2hnkap1_8ZZ_eu-DmhM3V24FP8X1Ew9XQNxyZ7EM,9162
-modal/client.pyi,sha256=7EG_tlPSpcGOcHyMyeb-XprexO4cQYIX3TxT5mryngI,3429
+modal/client.pyi,sha256=nhxTqLY4VFRvrrVh0nhvNFty5tVulw830yZGTyrbkW4,3429
 modal/cls.py,sha256=O9qHequfOgR2HTwPfLYPK_3v8J4Ir0iByW0_hO0CYiM,1737
-modal/config.py,sha256=fTH9PWk5sGpw3JWH_kpqlb7zogbmu8_6mjgrg3WeyjY,6802
+modal/config.py,sha256=PiJtJ0LEdL_QBEUGncbfYhHy8CJlstmH9Xh7n7ZIhFM,7149
 modal/dict.py,sha256=nDo5L6yLW1yyBxc_FGX2IG7A6jVB_MWG7lss8C2qThQ,5570
 modal/dict.pyi,sha256=36tWPmjFo-PQVhMBoyqNUoMTHA06t4Et6gQ-8krLSMs,3432
 modal/exception.py,sha256=gxHMYe7CiH1ijgGyiPe-KAxJOVkUquIMPgrOc-QIdSc,2750
 modal/functions.py,sha256=bHCad_sPUtFwBroTzZhMdc-2GIws_mwPHK_f1KxSxVA,57991
 modal/functions.pyi,sha256=hJaMyLt1yNYnkgYZ8ABe9dhaGj-ljAy2Icjd6jbwFRo,17532
 modal/gpu.py,sha256=CXpA2TLKXNhegMkRufAFBOeCqN2S8sKtW62p6G-z4Fc,4995
 modal/image.py,sha256=MiS_uOh-rZ_lojfmP2XPXaWjLNtYXAlAUU989HhQvzw,48994
 modal/image.pyi,sha256=JFVSiaw_6mxRfn-KsvruX-GuRNKk3fPZUm_QmsjV2p4,15198
 modal/mount.py,sha256=Strn5nOZTzA9wC6BJLUAPazOnA3VSjEQ2iTKb-Q9MFo,15356
 modal/mount.pyi,sha256=Ltxpa5kfe7uQ8lozUZw7AAqaB3PrOJxwQi6q0FH2Hps,5782
-modal/object.py,sha256=biCBFhwKIiCOOdIG-qCP9QXPnck4HqzVBWOG3bc8wd0,12299
-modal/object.pyi,sha256=86k2OQXQJgdvQvuwMTExGj_Wj09_-khpUeKbiuZ8f4M,7740
+modal/object.py,sha256=Zei_rqE6g-SOCvA9WMWUQT6vl3isMHaTcOwgUZ1gN18,13424
+modal/object.pyi,sha256=gBn2jrIxjo7zatDGuR_xvK7xW2v1Km4Xsou331yjEuU,8240
 modal/proxy.py,sha256=QcVqvdnt8Pd5cjtq1AKDVLeS0iiUAlkeNDUESLUATsc,623
 modal/proxy.pyi,sha256=jCXnLmWSDm2YWxDWCvyaslUtn_gm52QGhtQevo2eSqw,625
 modal/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 modal/queue.py,sha256=P71wRu_vmaVTLm440W2MMBmscLDT8VwvgZKE-4W_-9M,5115
 modal/queue.pyi,sha256=I61nk7DvvfqufMBeJO0dNyHOiwh36FvOog0NqUkhnvY,2701
 modal/requirements.txt,sha256=OjsbXFkCSdkzzryZP82Q73osr5wxQ6EUzmGcK7twfkA,502
 modal/retries.py,sha256=bRDYRTUNFzmjRAggCcoMViqwu-PNnqbokc_QYCf_2nc,3730
-modal/runner.py,sha256=Je95uVXD0ZRD5qGsWIv3uo2RoBZjJHDi4_jewfTbMAU,8715
+modal/runner.py,sha256=fS5PkObgDplm68rXUvgFo8gZ_TzNysLxztrNJoReTp0,9137
 modal/schedule.py,sha256=KUzkyV8bUZ1Oclx9thoR6q1ujX0JwPHkHKroJFS4X4k,2619
 modal/secret.py,sha256=u-GOaLQ7wbH2FzyXzLdV2HXdSbB4P35qx1qzbY2C2_Y,5159
 modal/secret.pyi,sha256=SskJ8Nt-wPAekVvQ6M8RGj8h9pvG1mDnEUjv-ViehCc,765
-modal/serving.py,sha256=O7vtjvRaXY5fBPwb2IQBAFoB_VBjPYfhfAmMwRgNkIo,4354
+modal/serving.py,sha256=BjGCRZ3Z67IHsSiSoX-8osjbLN3H41-K4zPg6KUsv_o,4717
 modal/shared_volume.py,sha256=nXZVkyMU2qerpsLs_naE8ptjKDcSK8SlTBei36hHx1A,8227
 modal/shared_volume.pyi,sha256=2yI67F84wsPOODNCMDKBi0r1vq8FczPWn8vqYwMwIwc,3394
 modal/stub.py,sha256=82oKGVf2xajJOo7_JedYDIIr7QtGETH7O_krEzXVEFM,30994
 modal/stub.pyi,sha256=6CsWgI4XUQJiUWyazkwzVxyUqg831VxkVGCG6POHOZ0,14449
 modal/cli/__init__.py,sha256=waLjl5c6IPDhSsdWAm9Bji4e2PVxamYABKAze6CHVXY,28
-modal/cli/app.py,sha256=oNIF5JvBC0qmqy4rb418ARbGOToofzdODxqJm5eJ9iA,2915
-modal/cli/config.py,sha256=yqBFZh5MLplDkpUKFG8BVDzAxe_n8cqHHJdQC_bhJL0,484
-modal/cli/entry_point.py,sha256=DNyGwfERVZEk99EeCXrzFNG5UWn_cOWZ4_xKsgQKlTk,1958
-modal/cli/env.py,sha256=N6du5XfL_UfZnfD9Nz7-n8gal34qpR6kIX5Go8pXc9Y,902
+modal/cli/app.py,sha256=hnDFRGORdjjrkdZNzt3wiaTN0EsupxFzsY02D2PwVj0,3206
+modal/cli/config.py,sha256=kia7_FF3PejvlTaJRor2i3RwykDcDeaT1o77eGZyKzc,1373
+modal/cli/entry_point.py,sha256=e66sDHtxoEAXfA4s8Giaov7RBSyI7phC639NGCsdMbI,1882
+modal/cli/environment.py,sha256=IVsnQiaSCUOb3Ip06sN-5KD7GG0AoAEiWaLBHD5aXo0,3771
 modal/cli/import_refs.py,sha256=lCplWDGnm6gkuZXsfOOgzmQLcfbnoo5Y0-a6Eh-NNOg,10552
-modal/cli/profile.py,sha256=sZtbJjh6dwg8vVtiLN2x5Xrvep7iGtTAoIlbg7NThrE,689
-modal/cli/run.py,sha256=3kwS2SzM6nlvfRkIXoDnL8IvVvLyQXSuUdcVRoc3yjY,9118
-modal/cli/secret.py,sha256=3CI_sSOCMSFJfheve_U1m9bEUaCMsbQf7Im24CM2wlI,3761
-modal/cli/token.py,sha256=6kOo8fJn_NTEWIRVgUnAfHizLmvoEeTarMaHpqxH8d0,3524
+modal/cli/profile.py,sha256=toWS4IF5RJrX4j6C_xgP_nH_xfpBEoVjc-9W-tUjgR8,700
+modal/cli/run.py,sha256=55Bp1bos_jD5wBNCm4VWoUnrCW5o3lziHcPI7WhUdkk,9883
+modal/cli/secret.py,sha256=XTKaqFdKXN0TDmd35BiTWeKJDui4tvQYjWCRC_9lGEo,4177
+modal/cli/token.py,sha256=skraioUAJCfxzjQkcTfetKI22ToIR0xWEqEarIrZJlg,3085
 modal/cli/utils.py,sha256=mAWr127UzAy_-SOT6726kAxFdTSRNiFDoQJ2ILeKLOI,313
-modal/cli/volume.py,sha256=ehMAcqy2YKErVB95hmsGsxlrzbTeJsthMFwMhcI-gWY,9697
+modal/cli/volume.py,sha256=HoNyDfTxmfT72QOCt1Bv7chKAeN4gg_QzgVBxCKYF4I,10534
 modal/extensions/__init__.py,sha256=waLjl5c6IPDhSsdWAm9Bji4e2PVxamYABKAze6CHVXY,28
 modal/extensions/ipython.py,sha256=pOFgBz4jFZtovwE_2qAOFiKwEVb4aZOA3oDbqOX2Gjo,987
 modal/extensions/pymc.py,sha256=tLK-SIa4ZH6pkKmyB3JXfbpYcmn2Xc7Q2KJP9FmsBzE,6221
 modal_base_images/__init__.py,sha256=waLjl5c6IPDhSsdWAm9Bji4e2PVxamYABKAze6CHVXY,28
-modal_base_images/client_mount.py,sha256=tq11K48y5Qv6PIOEZH0D3I6ghd61jlXwQXjh7TQkofs,457
+modal_base_images/client_mount.py,sha256=wKWxWKLbcGsXap7qxz0IK4h4v9PYXkvhOQxVIBv67X0,730
 modal_base_images/conda.py,sha256=F-Z9r1SuUsx8uKdLnF8bRO6t-tlKOmt0VYyvteDlIaI,252
 modal_base_images/debian_slim.py,sha256=9iB8L0tuEDWas3Mge1jyGvfBXiKsJpcjqJT5M1fWRos,330
 modal_proto/__init__.py,sha256=waLjl5c6IPDhSsdWAm9Bji4e2PVxamYABKAze6CHVXY,28
 modal_proto/api.proto,sha256=vp4HubZhJqg3lze6reO_uBLm57Llkogo48Nea96E3aU,27661
 modal_proto/api_grpc.py,sha256=4mXozrxt62iRK21pAIVuk6zZYT5VY8P1rNWrzuhqnVc,45296
 modal_proto/api_pb2.py,sha256=RVQogdxtS8vGggdCdkh2n9Gngdu39lJqCui5JyhJBlk,115123
 modal_proto/api_pb2_grpc.py,sha256=EcE1dicpu5F1YZjMx96aj8NVr3-Fznanxv4HiokC3is,97896
@@ -139,20 +140,21 @@
 modal_test_support/stub.py,sha256=RJj_CM-KqucBkqszzTuBimp670tjOmHUm76GmAAF54A,177
 modal_test_support/unconsumed_map.py,sha256=UOPhJz4d87sQ3ngsbaJWDDTTF_SSYgpidTOMgQ2aac8,144
 modal_test_support/webhook_forgot_function.py,sha256=Ncfi8G1C76FqWFoCzjn2TjXEmQ6Ad-u9ewjuVN3wOxQ,123
 modal_utils/__init__.py,sha256=waLjl5c6IPDhSsdWAm9Bji4e2PVxamYABKAze6CHVXY,28
 modal_utils/app_utils.py,sha256=Uf9oNKcC6wJg3wcHNygWxMlkXuIMVRYIE5nutDSafkQ,465
 modal_utils/async_utils.py,sha256=wWCT99q-Ty72Yr3WT0-6nsYmSj56KRJ3kE8QVpEjtMQ,11060
 modal_utils/decorator_utils.py,sha256=uCBKzLRMjoit8E5koKqgI-HBPznj0AvGKl-jUzbHMEE,890
-modal_utils/grpc_utils.py,sha256=qQu1Xc0O5eKaMqGYY8AIq-2sYBKZ6sVMov-OgnDjpVc,9837
+modal_utils/grpc_testing.py,sha256=EXTXGa2Kg_IjElWFn-5nK-rhjslG9LTQkIkvZbEr4ko,4641
+modal_utils/grpc_utils.py,sha256=nvoS4UwH3t2sH13Nnd9VRrG7FFpCcBbacU6PX8rM_KA,9320
 modal_utils/hash_utils.py,sha256=YOE1LZwyqaTQSZajrF-H_5_iJkjxMclJewC0SgH_8xA,1597
 modal_utils/http_utils.py,sha256=DGKvrSQxAHjP_LNdM6EaL-TIQPGDX5vt3gcMGg2xkz4,1426
 modal_utils/logger.py,sha256=odPE0R8_9GkufC_74wqolLikZVIbdxmwDF5xeoILklU,113
 modal_utils/package_utils.py,sha256=TLF7GygWqsqZpL-dVnchts55IcTwkMPFLBGeZjuRXCw,1226
 modal_version/__init__.py,sha256=mvujZot4MZ2ZzvN-QWqUcdJ-AG3rsuVzC_r7Jfwzh4E,458
-modal_version/_version_generated.py,sha256=NtNYCWg3xcNr2pre9Mx908wQBl3daSwOdxGdrW6vrXw,48
-modal_client-0.49.2437.dist-info/LICENSE,sha256=psuoW8kuDP96RQsdhzwOqi6fyWv0ct8CR6Jr7He_P_k,10173
-modal_client-0.49.2437.dist-info/METADATA,sha256=UMADw45_TAPoOmjRq9C8L7JXOudoHUwBYx2Y-FiEF5U,1880
-modal_client-0.49.2437.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-modal_client-0.49.2437.dist-info/entry_points.txt,sha256=An-wYgeEUnm6xzrAP9_NTSTSciYvvEWsMZILtYrvpAI,46
-modal_client-0.49.2437.dist-info/top_level.txt,sha256=vTBZ60jGY6Z2jEeHlo3uEJRmrR3M1rZoXur0ZaqOrS4,93
-modal_client-0.49.2437.dist-info/RECORD,,
+modal_version/_version_generated.py,sha256=HJu018HxQume0_W9eRdWFT4MtkpdMt3CpUw8BY68UCQ,48
+modal_client-0.49.2455.dist-info/LICENSE,sha256=psuoW8kuDP96RQsdhzwOqi6fyWv0ct8CR6Jr7He_P_k,10173
+modal_client-0.49.2455.dist-info/METADATA,sha256=VPuixljPMou66bCgxrZu9ZFt-L9rv6zXaR9iTCannuY,1923
+modal_client-0.49.2455.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+modal_client-0.49.2455.dist-info/entry_points.txt,sha256=An-wYgeEUnm6xzrAP9_NTSTSciYvvEWsMZILtYrvpAI,46
+modal_client-0.49.2455.dist-info/top_level.txt,sha256=vTBZ60jGY6Z2jEeHlo3uEJRmrR3M1rZoXur0ZaqOrS4,93
+modal_client-0.49.2455.dist-info/RECORD,,
```

